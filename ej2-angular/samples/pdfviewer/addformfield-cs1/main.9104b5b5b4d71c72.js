"use strict";(self.webpackChunksyncfusion_component=self.webpackChunksyncfusion_component||[]).push([[179],{90:()=>{function Mr(s){return"function"==typeof s}function AS(s){const t=s(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const LS=AS(s=>function(t){s(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,n)=>`${n+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function hy(s,e){if(s){const t=s.indexOf(e);0<=t&&s.splice(t,1)}}class Bh{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const r of t)r.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Mr(i))try{i()}catch(r){e=r instanceof LS?r.errors:[r]}const{_finalizers:n}=this;if(n){this._finalizers=null;for(const r of n)try{f2(r)}catch(o){e=e??[],o instanceof LS?e=[...e,...o.errors]:e.push(o)}}if(e)throw new LS(e)}}add(e){var t;if(e&&e!==this)if(this.closed)f2(e);else{if(e instanceof Bh){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&hy(t,e)}remove(e){const{_finalizers:t}=this;t&&hy(t,e),e instanceof Bh&&e._removeParent(this)}}Bh.EMPTY=(()=>{const s=new Bh;return s.closed=!0,s})();const c2=Bh.EMPTY;function u2(s){return s instanceof Bh||s&&"closed"in s&&Mr(s.remove)&&Mr(s.add)&&Mr(s.unsubscribe)}function f2(s){Mr(s)?s():s.unsubscribe()}const Mu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},VS={setTimeout(s,e,...t){const{delegate:i}=VS;return i?.setTimeout?i.setTimeout(s,e,...t):setTimeout(s,e,...t)},clearTimeout(s){const{delegate:e}=VS;return(e?.clearTimeout||clearTimeout)(s)},delegate:void 0};function g2(s){VS.setTimeout(()=>{const{onUnhandledError:e}=Mu;if(!e)throw s;e(s)})}function m2(){}const vJ=jE("C",void 0,void 0);function jE(s,e,t){return{kind:s,value:e,error:t}}let Eu=null;function PS(s){if(Mu.useDeprecatedSynchronousErrorHandling){const e=!Eu;if(e&&(Eu={errorThrown:!1,error:null}),s(),e){const{errorThrown:t,error:i}=Eu;if(Eu=null,t)throw i}}else s()}class qE extends Bh{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,u2(e)&&e.add(this)):this.destination=xJ}static create(e,t,i){return new dy(e,t,i)}next(e){this.isStopped?UE(function bJ(s){return jE("N",s,void 0)}(e),this):this._next(e)}error(e){this.isStopped?UE(function yJ(s){return jE("E",void 0,s)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?UE(vJ,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const SJ=Function.prototype.bind;function WE(s,e){return SJ.call(s,e)}class CJ{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){NS(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){NS(i)}else NS(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){NS(t)}}}class dy extends qE{constructor(e,t,i){let n;if(super(),Mr(e)||!e)n={next:e??void 0,error:t??void 0,complete:i??void 0};else{let r;this&&Mu.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),n={next:e.next&&WE(e.next,r),error:e.error&&WE(e.error,r),complete:e.complete&&WE(e.complete,r)}):n=e}this.destination=new CJ(n)}}function NS(s){Mu.useDeprecatedSynchronousErrorHandling?function wJ(s){Mu.useDeprecatedSynchronousErrorHandling&&Eu&&(Eu.errorThrown=!0,Eu.error=s)}(s):g2(s)}function UE(s,e){const{onStoppedNotification:t}=Mu;t&&VS.setTimeout(()=>t(s,e))}const xJ={closed:!0,next:m2,error:function IJ(s){throw s},complete:m2},GE="function"==typeof Symbol&&Symbol.observable||"@@observable";function v2(s){return s}let Qo=(()=>{class s{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new s;return i.source=this,i.operator=t,i}subscribe(t,i,n){const r=function MJ(s){return s&&s instanceof qE||function TJ(s){return s&&Mr(s.next)&&Mr(s.error)&&Mr(s.complete)}(s)&&u2(s)}(t)?t:new dy(t,i,n);return PS(()=>{const{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=b2(i))((n,r)=>{const o=new dy({next:a=>{try{t(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:n});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[GE](){return this}pipe(...t){return function y2(s){return 0===s.length?v2:1===s.length?s[0]:function(t){return s.reduce((i,n)=>n(i),t)}}(t)(this)}toPromise(t){return new(t=b2(t))((i,n)=>{let r;this.subscribe(o=>r=o,o=>n(o),()=>i(r))})}}return s.create=e=>new s(e),s})();function b2(s){var e;return null!==(e=s??Mu.Promise)&&void 0!==e?e:Promise}const EJ=AS(s=>function(){s(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let YE=(()=>{class s extends Qo{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new w2(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new EJ}next(t){PS(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){PS(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){PS(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:n,observers:r}=this;return i||n?c2:(this.currentObservers=null,r.push(t),new Bh(()=>{this.currentObservers=null,hy(r,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:n,isStopped:r}=this;i?t.error(n):r&&t.complete()}asObservable(){const t=new Qo;return t.source=this,t}}return s.create=(e,t)=>new w2(e,t),s})();class w2 extends YE{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:c2}}function py(s){return e=>{if(function DJ(s){return Mr(s?.lift)}(e))return e.lift(function(t){try{return s(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function FS(s,e,t,i,n){return new kJ(s,e,t,i,n)}class kJ extends qE{constructor(e,t,i,n,r,o){super(e),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=n?function(a){try{n(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function nc(s){return this instanceof nc?(this.v=s,this):new nc(s)}function T2(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=s[Symbol.asyncIterator];return e?e.call(s):(s=function KE(s){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&s[e],i=0;if(t)return t.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=s[r]&&function(o){return new Promise(function(a,l){!function n(r,o,a,l){Promise.resolve(l).then(function(h){r({value:h,done:a})},o)}(a,l,(o=s[r](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const M2=s=>s&&"number"==typeof s.length&&"function"!=typeof s;function E2(s){return Mr(s?.then)}function D2(s){return Mr(s[GE])}function k2(s){return Symbol.asyncIterator&&Mr(s?.[Symbol.asyncIterator])}function A2(s){return new TypeError(`You provided ${null!==s&&"object"==typeof s?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const L2=function KJ(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function V2(s){return Mr(s?.[L2])}function P2(s){return function x2(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=t.apply(s,e||[]),r=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(u){i[u]&&(n[u]=function(f){return new Promise(function(g,m){r.push([u,f,g,m])>1||a(u,f)})})}function a(u,f){try{!function l(u){u.value instanceof nc?Promise.resolve(u.value.v).then(h,d):p(r[0][2],u)}(i[u](f))}catch(g){p(r[0][3],g)}}function h(u){a("next",u)}function d(u){a("throw",u)}function p(u,f){u(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}(this,arguments,function*(){const t=s.getReader();try{for(;;){const{value:i,done:n}=yield nc(t.read());if(n)return yield nc(void 0);yield yield nc(i)}}finally{t.releaseLock()}})}function N2(s){return Mr(s?.getReader)}function Du(s){if(s instanceof Qo)return s;if(null!=s){if(D2(s))return function JJ(s){return new Qo(e=>{const t=s[GE]();if(Mr(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(s);if(M2(s))return function $J(s){return new Qo(e=>{for(let t=0;t<s.length&&!e.closed;t++)e.next(s[t]);e.complete()})}(s);if(E2(s))return function e$(s){return new Qo(e=>{s.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,g2)})}(s);if(k2(s))return F2(s);if(V2(s))return function t$(s){return new Qo(e=>{for(const t of s)if(e.next(t),e.closed)return;e.complete()})}(s);if(N2(s))return function i$(s){return F2(P2(s))}(s)}throw A2(s)}function F2(s){return new Qo(e=>{(function n$(s,e){var t,i,n,r;return function C2(s,e,t,i){return new(t||(t=Promise))(function(r,o){function a(d){try{h(i.next(d))}catch(p){o(p)}}function l(d){try{h(i.throw(d))}catch(p){o(p)}}function h(d){d.done?r(d.value):function n(r){return r instanceof t?r:new t(function(o){o(r)})}(d.value).then(a,l)}h((i=i.apply(s,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=T2(s);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){n={error:o}}finally{try{i&&!i.done&&(r=t.return)&&(yield r.call(t))}finally{if(n)throw n.error}}e.complete()})})(s,e).catch(t=>e.error(t))})}function rc(s,e,t,i=0,n=!1){const r=e.schedule(function(){t(),n?s.add(this.schedule(null,i)):this.unsubscribe()},i);if(s.add(r),!n)return r}function R2(s,e,t=1/0){return Mr(e)?R2((i,n)=>function AJ(s,e){return py((t,i)=>{let n=0;t.subscribe(FS(i,r=>{i.next(s.call(e,r,n++))}))})}((r,o)=>e(i,r,n,o))(Du(s(i,n))),t):("number"==typeof e&&(t=e),py((i,n)=>function r$(s,e,t,i,n,r,o,a){const l=[];let h=0,d=0,p=!1;const u=()=>{p&&!l.length&&!h&&e.complete()},f=m=>h<i?g(m):l.push(m),g=m=>{r&&e.next(m),h++;let y=!1;Du(t(m,d++)).subscribe(FS(e,b=>{n?.(b),r?f(b):e.next(b)},()=>{y=!0},void 0,()=>{if(y)try{for(h--;l.length&&h<i;){const b=l.shift();o?rc(e,o,()=>g(b)):g(b)}u()}catch(b){e.error(b)}}))};return s.subscribe(FS(e,f,()=>{p=!0,u()})),()=>{a?.()}}(i,n,s,t)))}const O2=new Qo(s=>s.complete());function JE(s){return s[s.length-1]}function B2(s,e=0){return py((t,i)=>{t.subscribe(FS(i,n=>rc(i,s,()=>i.next(n),e),()=>rc(i,s,()=>i.complete(),e),n=>rc(i,s,()=>i.error(n),e)))})}function z2(s,e=0){return py((t,i)=>{i.add(s.schedule(()=>t.subscribe(i),e))})}function H2(s,e){if(!s)throw new Error("Iterable cannot be null");return new Qo(t=>{rc(t,e,()=>{const i=s[Symbol.asyncIterator]();rc(t,e,()=>{i.next().then(n=>{n.done?t.complete():t.next(n.value)})},0,!0)})})}function v$(...s){const e=function l$(s){return function a$(s){return s&&Mr(s.schedule)}(JE(s))?s.pop():void 0}(s),t=function h$(s,e){return"number"==typeof JE(s)?s.pop():e}(s,1/0),i=s;return i.length?1===i.length?Du(i[0]):function s$(s=1/0){return R2(v2,s)}(t)(function m$(s,e){return e?function g$(s,e){if(null!=s){if(D2(s))return function d$(s,e){return Du(s).pipe(z2(e),B2(e))}(s,e);if(M2(s))return function c$(s,e){return new Qo(t=>{let i=0;return e.schedule(function(){i===s.length?t.complete():(t.next(s[i++]),t.closed||this.schedule())})})}(s,e);if(E2(s))return function p$(s,e){return Du(s).pipe(z2(e),B2(e))}(s,e);if(k2(s))return H2(s,e);if(V2(s))return function u$(s,e){return new Qo(t=>{let i;return rc(t,e,()=>{i=s[L2](),rc(t,e,()=>{let n,r;try{({value:n,done:r}=i.next())}catch(o){return void t.error(o)}r?t.complete():t.next(n)},0,!0)}),()=>Mr(i?.return)&&i.return()})}(s,e);if(N2(s))return function f$(s,e){return H2(P2(s),e)}(s,e)}throw A2(s)}(s,e):Du(s)}(i,e)):O2}function $E(s,e,...t){if(!0===e)return void s();if(!1===e)return;const i=new dy({next:()=>{i.unsubscribe(),s()}});return e(...t).subscribe(i)}function bn(s){for(let e in s)if(s[e]===bn)return e;throw Error("Could not find renamed property on target object.")}function eD(s,e){for(const t in e)e.hasOwnProperty(t)&&!s.hasOwnProperty(t)&&(s[t]=e[t])}function Tn(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Tn).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const e=s.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function tD(s,e){return null==s||""===s?null===e?"":e:null==e||""===e?s:s+" "+e}const b$=bn({__forward_ref__:bn});function iD(s){return s.__forward_ref__=iD,s.toString=function(){return Tn(this())},s}function xt(s){return function nD(s){return"function"==typeof s&&s.hasOwnProperty(b$)&&s.__forward_ref__===iD}(s)?s():s}function rD(s){return s&&!!s.\u0275providers}class ut extends Error{constructor(e,t){super(RS(e,t)),this.code=e}}function RS(s,e){return`NG0${Math.abs(s)}${e?": "+e.trim():""}`}function Zi(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():function Bt(s){return"string"==typeof s?s:null==s?"":String(s)}(s)}function OS(s,e){throw new ut(-201,!1)}function dl(s,e){null==s&&function Ki(s,e,t,i){throw new Error(`ASSERTION ERROR: ${s}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,s,null,"!=")}function Zn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ku(s){return{providers:s.providers||[],imports:s.imports||[]}}function BS(s){return j2(s,zS)||j2(s,W2)}function j2(s,e){return s.hasOwnProperty(e)?s[e]:null}function q2(s){return s&&(s.hasOwnProperty(sD)||s.hasOwnProperty(M$))?s[sD]:null}const zS=bn({\u0275prov:bn}),sD=bn({\u0275inj:bn}),W2=bn({ngInjectableDef:bn}),M$=bn({ngInjectorDef:bn});var Pt=(()=>((Pt=Pt||{})[Pt.Default=0]="Default",Pt[Pt.Host=1]="Host",Pt[Pt.Self=2]="Self",Pt[Pt.SkipSelf=4]="SkipSelf",Pt[Pt.Optional=8]="Optional",Pt))();let oD;function pl(s){const e=oD;return oD=s,e}function U2(s,e,t){const i=BS(s);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Pt.Optional?null:void 0!==e?e:void OS(Tn(s))}const On=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),cy={},aD="__NG_DI_FLAG__",HS="ngTempTokenPath",D$="ngTokenPath",k$=/\n/gm,A$="\u0275",G2="__source";let uy;function bg(s){const e=uy;return uy=s,e}function L$(s,e=Pt.Default){if(void 0===uy)throw new ut(-203,!1);return null===uy?U2(s,void 0,e):uy.get(s,e&Pt.Optional?null:void 0,e)}function Wi(s,e=Pt.Default){return(function E$(){return oD}()||L$)(xt(s),e)}function _S(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function lD(s){const e=[];for(let t=0;t<s.length;t++){const i=xt(s[t]);if(Array.isArray(i)){if(0===i.length)throw new ut(900,!1);let n,r=Pt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=P$(a);"number"==typeof l?-1===l?n=a.token:r|=l:n=a}e.push(Wi(n,r))}else e.push(Wi(i))}return e}function P$(s){return s[aD]}function Fd(s){return{toString:s}.toString()}var zh=(()=>((zh=zh||{})[zh.OnPush=0]="OnPush",zh[zh.Default=1]="Default",zh))(),Hh=(()=>{return(s=Hh||(Hh={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Hh;var s})();const Rd={},Ui=[],jS=bn({\u0275cmp:bn}),hD=bn({\u0275dir:bn}),dD=bn({\u0275pipe:bn}),Q2=bn({\u0275mod:bn}),Od=bn({\u0275fac:bn}),gy=bn({__NG_ELEMENT_ID__:bn});let R$=0;function pD(s){return Fd(()=>{const e=function Z2(s){const e={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:e,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Ui,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:X2(s.inputs,e),outputs:X2(s.outputs)}}(s),t={...e,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===zh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Hh.Emulated,id:"c"+R$++,styles:s.styles||Ui,_:null,schemas:s.schemas||null,tView:null};!function K2(s){s.features?.forEach(e=>e(s))}(t);const i=s.dependencies;return t.directiveDefs=qS(i,!1),t.pipeDefs=qS(i,!0),t})}function B$(s){return Ji(s)||eo(s)}function z$(s){return null!==s}function wg(s){return Fd(()=>({type:s.type,bootstrap:s.bootstrap||Ui,declarations:s.declarations||Ui,imports:s.imports||Ui,exports:s.exports||Ui,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function X2(s,e){if(null==s)return Rd;const t={};for(const i in s)if(s.hasOwnProperty(i)){let n=s[i],r=n;Array.isArray(n)&&(r=n[1],n=n[0]),t[n]=i,e&&(e[n]=r)}return t}function Ji(s){return s[jS]||null}function eo(s){return s[hD]||null}function Zo(s){return s[dD]||null}function qS(s,e){if(!s)return null;const t=e?Zo:B$;return()=>("function"==typeof s?s():s).map(i=>t(i)).filter(z$)}const Bd=0,tt=1,Kt=2,Er=3,Gl=4,Au=5,to=6,Sg=7,Vr=8,WS=9,US=10,ii=11,cD=12,vy=13,J2=14,Cg=15,io=16,yy=17,Ig=18,_h=19,by=20,$2=21,Bn=22,uD=1,ez=2,GS=7,YS=8,xg=9,To=10;function Da(s){return Array.isArray(s)&&"object"==typeof s[uD]}function Yl(s){return Array.isArray(s)&&!0===s[uD]}function fD(s){return 0!=(4&s.flags)}function wy(s){return s.componentOffset>-1}function QS(s){return 1==(1&s.flags)}function Ql(s){return!!s.template}function _$(s){return 0!=(256&s[Kt])}function Lu(s,e){return s.hasOwnProperty(Od)?s[Od]:null}class W${constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function nz(s){return s.type.prototype.ngOnChanges&&(s.setInput=G$),U$}function U$(){const s=sz(this),e=s?.current;if(e){const t=s.previous;if(t===Rd)s.previous=e;else for(let i in e)t[i]=e[i];s.current=null,this.ngOnChanges(e)}}function G$(s,e,t,i){const n=this.declaredInputs[t],r=sz(s)||function Y$(s,e){return s[rz]=e}(s,{previous:Rd,current:null}),o=r.current||(r.current={}),a=r.previous,l=a[n];o[n]=new W$(l&&l.currentValue,e,a===Rd),s[i]=e}const rz="__ngSimpleChanges__";function sz(s){return s[rz]||null}const ul=function(s,e,t){};function Ps(s){for(;Array.isArray(s);)s=s[Bd];return s}function ka(s,e){return Ps(e[s.index])}function lz(s,e){return s.data[e]}function Ko(s,e){const t=e[s];return Da(t)?t:t[Bd]}function KS(s){return 64==(64&s[Kt])}function oc(s,e){return null==e?null:s[e]}function hz(s){s[Ig]=0}function mD(s,e){s[Au]+=e;let t=s,i=s[Er];for(;null!==i&&(1===e&&1===t[Au]||-1===e&&0===t[Au]);)i[Au]+=e,t=i,i=i[Er]}const zt={lFrame:bz(null),bindingsEnabled:!0};function pz(){return zt.bindingsEnabled}function Ae(){return zt.lFrame.lView}function Mi(){return zt.lFrame.tView}function Ns(){let s=cz();for(;null!==s&&64===s.type;)s=s.parent;return s}function cz(){return zt.lFrame.currentTNode}function jh(s,e){const t=zt.lFrame;t.currentTNode=s,t.isParent=e}function vD(){return zt.lFrame.isParent}function lee(s,e){const t=zt.lFrame;t.bindingIndex=t.bindingRootIndex=s,bD(e)}function bD(s){zt.lFrame.currentDirectiveIndex=s}function mz(){return zt.lFrame.currentQueryIndex}function SD(s){zt.lFrame.currentQueryIndex=s}function dee(s){const e=s[tt];return 2===e.type?e.declTNode:1===e.type?s[to]:null}function vz(s,e,t){if(t&Pt.SkipSelf){let n=e,r=s;for(;!(n=n.parent,null!==n||t&Pt.Host||(n=dee(r),null===n||(r=r[Cg],10&n.type))););if(null===n)return!1;e=n,s=r}const i=zt.lFrame=yz();return i.currentTNode=e,i.lView=s,!0}function CD(s){const e=yz(),t=s[tt];zt.lFrame=e,e.currentTNode=t.firstChild,e.lView=s,e.tView=t,e.contextLView=s,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yz(){const s=zt.lFrame,e=null===s?null:s.child;return null===e?bz(s):e}function bz(s){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=e),e}function wz(){const s=zt.lFrame;return zt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Sz=wz;function ID(){const s=wz();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Eo(){return zt.lFrame.selectedIndex}function Vu(s){zt.lFrame.selectedIndex=s}function JS(s,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const r=s.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:h,ngOnDestroy:d}=r;o&&(s.contentHooks??(s.contentHooks=[])).push(-t,o),a&&((s.contentHooks??(s.contentHooks=[])).push(t,a),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(t,a)),l&&(s.viewHooks??(s.viewHooks=[])).push(-t,l),h&&((s.viewHooks??(s.viewHooks=[])).push(t,h),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(t,h)),null!=d&&(s.destroyHooks??(s.destroyHooks=[])).push(t,d)}}function $S(s,e,t){Cz(s,e,3,t)}function eC(s,e,t,i){(3&s[Kt])===t&&Cz(s,e,t,i)}function xD(s,e){let t=s[Kt];(3&t)===e&&(t&=2047,t+=1,s[Kt]=t)}function Cz(s,e,t,i){const r=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&s[Ig]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(s[Ig]+=65536),(a<r||-1==r)&&(bee(s,t,e,l),s[Ig]=(4294901760&s[Ig])+l+2),l++}function bee(s,e,t,i){const n=t[i]<0,r=t[i+1],a=s[n?-t[i]:t[i]];if(n){if(s[Kt]>>11<s[Ig]>>16&&(3&s[Kt])===e){s[Kt]+=2048,ul(4,a,r);try{r.call(a)}finally{ul(5,a,r)}}}else{ul(4,a,r);try{r.call(a)}finally{ul(5,a,r)}}}const Eg=-1;class Cy{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function MD(s,e,t){let i=0;for(;i<t.length;){const n=t[i];if("number"==typeof n){if(0!==n)break;i++;const r=t[i++],o=t[i++],a=t[i++];s.setAttribute(e,o,a,r)}else{const r=n,o=t[++i];xz(r)?s.setProperty(e,r,o):s.setAttribute(e,r,o),i++}}return i}function Iz(s){return 3===s||4===s||6===s}function xz(s){return 64===s.charCodeAt(0)}function Iy(s,e){if(null!==e&&0!==e.length)if(null===s||0===s.length)s=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const n=e[i];"number"==typeof n?t=n:0===t||Tz(s,t,n,null,-1===t||2===t?e[++i]:null)}}return s}function Tz(s,e,t,i,n){let r=0,o=s.length;if(-1===e)o=-1;else for(;r<s.length;){const a=s[r++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=r-1;break}}}for(;r<s.length;){const a=s[r];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==n&&(s[r+1]=n));if(i===s[r+1])return void(s[r+2]=n)}r++,null!==i&&r++,null!==n&&r++}-1!==o&&(s.splice(o,0,e),r=o+1),s.splice(r++,0,t),null!==i&&s.splice(r++,0,i),null!==n&&s.splice(r++,0,n)}function Mz(s){return s!==Eg}function tC(s){return 32767&s}function iC(s,e){let t=function Iee(s){return s>>16}(s),i=e;for(;t>0;)i=i[Cg],t--;return i}let ED=!0;function nC(s){const e=ED;return ED=s,e}const Ez=255,Dz=5;let xee=0;const qh={};function rC(s,e){const t=kz(s,e);if(-1!==t)return t;const i=e[tt];i.firstCreatePass&&(s.injectorIndex=e.length,DD(i.data,s),DD(e,null),DD(i.blueprint,null));const n=kD(s,e),r=s.injectorIndex;if(Mz(n)){const o=tC(n),a=iC(n,e),l=a[tt].data;for(let h=0;h<8;h++)e[r+h]=a[o+h]|l[o+h]}return e[r+8]=n,r}function DD(s,e){s.push(0,0,0,0,0,0,0,0,e)}function kz(s,e){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===e[s.injectorIndex+8]?-1:s.injectorIndex}function kD(s,e){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let t=0,i=null,n=e;for(;null!==n;){if(i=Rz(n),null===i)return Eg;if(t++,n=n[Cg],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Eg}function AD(s,e,t){!function Tee(s,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(gy)&&(i=t[gy]),null==i&&(i=t[gy]=xee++);const n=i&Ez;e.data[s+(n>>Dz)]|=1<<n}(s,e,t)}function Az(s,e,t){if(t&Pt.Optional||void 0!==s)return s;OS()}function Lz(s,e,t,i){if(t&Pt.Optional&&void 0===i&&(i=null),!(t&(Pt.Self|Pt.Host))){const n=s[WS],r=pl(void 0);try{return n?n.get(e,i,t&Pt.Optional):U2(e,i,t&Pt.Optional)}finally{pl(r)}}return Az(i,0,t)}function Vz(s,e,t,i=Pt.Default,n){if(null!==s){if(1024&e[Kt]){const o=function Lee(s,e,t,i,n){let r=s,o=e;for(;null!==r&&null!==o&&1024&o[Kt]&&!(256&o[Kt]);){const a=Pz(r,o,t,i|Pt.Self,qh);if(a!==qh)return a;let l=r.parent;if(!l){const h=o[$2];if(h){const d=h.get(t,qh,i);if(d!==qh)return d}l=Rz(o),o=o[Cg]}r=l}return n}(s,e,t,i,qh);if(o!==qh)return o}const r=Pz(s,e,t,i,qh);if(r!==qh)return r}return Lz(e,t,i,n)}function Pz(s,e,t,i,n){const r=function Dee(s){if("string"==typeof s)return s.charCodeAt(0)||0;const e=s.hasOwnProperty(gy)?s[gy]:void 0;return"number"==typeof e?e>=0?e&Ez:kee:e}(t);if("function"==typeof r){if(!vz(e,s,i))return i&Pt.Host?Az(n,0,i):Lz(e,t,i,n);try{const o=r(i);if(null!=o||i&Pt.Optional)return o;OS()}finally{Sz()}}else if("number"==typeof r){let o=null,a=kz(s,e),l=Eg,h=i&Pt.Host?e[io][to]:null;for((-1===a||i&Pt.SkipSelf)&&(l=-1===a?kD(s,e):e[a+8],l!==Eg&&Fz(i,!1)?(o=e[tt],a=tC(l),e=iC(l,e)):a=-1);-1!==a;){const d=e[tt];if(Nz(r,a,d.data)){const p=Eee(a,e,t,o,i,h);if(p!==qh)return p}l=e[a+8],l!==Eg&&Fz(i,e[tt].data[a+8]===h)&&Nz(r,a,e)?(o=d,a=tC(l),e=iC(l,e)):a=-1}}return n}function Eee(s,e,t,i,n,r){const o=e[tt],a=o.data[s+8],d=sC(a,o,t,null==i?wy(a)&&ED:i!=o&&0!=(3&a.type),n&Pt.Host&&r===a);return null!==d?Pu(e,o,d,a):qh}function sC(s,e,t,i,n){const r=s.providerIndexes,o=e.data,a=1048575&r,l=s.directiveStart,d=r>>20,u=n?a+d:s.directiveEnd;for(let f=i?a:a+d;f<u;f++){const g=o[f];if(f<l&&t===g||f>=l&&g.type===t)return f}if(n){const f=o[l];if(f&&Ql(f)&&f.type===t)return l}return null}function Pu(s,e,t,i){let n=s[t];const r=e.data;if(function wee(s){return s instanceof Cy}(n)){const o=n;o.resolving&&function w$(s,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${s}`:"";throw new ut(-200,`Circular dependency in DI detected for ${s}${t}`)}(Zi(r[t]));const a=nC(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?pl(o.injectImpl):null;vz(s,i,Pt.Default);try{n=s[t]=o.factory(void 0,r,s,i),e.firstCreatePass&&t>=i.directiveStart&&function yee(s,e,t){const{ngOnChanges:i,ngOnInit:n,ngDoCheck:r}=e.type.prototype;if(i){const o=nz(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(s,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(s,o)}n&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-s,n),r&&((t.preOrderHooks??(t.preOrderHooks=[])).push(s,r),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(s,r))}(t,r[t],e)}finally{null!==l&&pl(l),nC(a),o.resolving=!1,Sz()}}return n}function Nz(s,e,t){return!!(t[e+(s>>Dz)]&1<<s)}function Fz(s,e){return!(s&Pt.Self||s&Pt.Host&&e)}class Dg{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Vz(this._tNode,this._lView,e,_S(i),t)}}function kee(){return new Dg(Ns(),Ae())}function Rz(s){const e=s[tt],t=e.type;return 2===t?e.declTNode:1===t?s[to]:null}class ni{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Zn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Nu(s,e){s.forEach(t=>Array.isArray(t)?Nu(t,e):e(t))}function Bz(s,e,t){e>=s.length?s.push(t):s.splice(e,0,t)}function oC(s,e){return e>=s.length-1?s.pop():s.splice(e,1)[0]}var Jo=(()=>((Jo=Jo||{})[Jo.Important=1]="Important",Jo[Jo.DashCase=2]="DashCase",Jo))();const _D=new Map;let nte=0;const qD="__ngContext__";function no(s,e){Da(e)?(s[qD]=e[by],function ste(s){_D.set(s[by],s)}(e)):s[qD]=e}let WD;function UD(s,e){return WD(s,e)}function Ay(s){const e=s[Er];return Yl(e)?e[Er]:e}function GD(s){return s3(s[vy])}function YD(s){return s3(s[Gl])}function s3(s){for(;null!==s&&!Yl(s);)s=s[Gl];return s}function Fg(s,e,t,i,n){if(null!=i){let r,o=!1;Yl(i)?r=i:Da(i)&&(o=!0,i=i[Bd]);const a=Ps(i);0===s&&null!==t?null==n?p3(e,t,a):Fu(e,t,a,n||null,!0):1===s&&null!==t?Fu(e,t,a,n||null,!0):2===s?function ek(s,e,t){const i=cC(s,e);i&&function Tte(s,e,t,i){s.removeChild(e,t,i)}(s,i,e,t)}(e,a,o):3===s&&e.destroyNode(a),null!=r&&function Dte(s,e,t,i,n){const r=t[GS];r!==Ps(t)&&Fg(e,s,i,r,n);for(let a=To;a<t.length;a++){const l=t[a];Ly(l[tt],l,s,e,i,r)}}(e,s,r,t,n)}}function XD(s,e,t){return s.createElement(e,t)}function a3(s,e){const t=s[xg],i=t.indexOf(e),n=e[Er];512&e[Kt]&&(e[Kt]&=-513,mD(n,-1)),t.splice(i,1)}function ZD(s,e){if(s.length<=To)return;const t=To+e,i=s[t];if(i){const n=i[yy];null!==n&&n!==s&&a3(n,i),e>0&&(s[t-1][Gl]=i[Gl]);const r=oC(s,To+e);!function vte(s,e){Ly(s,e,e[ii],2,null,null),e[Bd]=null,e[to]=null}(i[tt],i);const o=r[_h];null!==o&&o.detachView(r[tt]),i[Er]=null,i[Gl]=null,i[Kt]&=-65}return i}function l3(s,e){if(!(128&e[Kt])){const t=e[ii];t.destroyNode&&Ly(s,e,t,3,null,null),function wte(s){let e=s[vy];if(!e)return KD(s[tt],s);for(;e;){let t=null;if(Da(e))t=e[vy];else{const i=e[To];i&&(t=i)}if(!t){for(;e&&!e[Gl]&&e!==s;)Da(e)&&KD(e[tt],e),e=e[Er];null===e&&(e=s),Da(e)&&KD(e[tt],e),t=e&&e[Gl]}e=t}}(e)}}function KD(s,e){if(!(128&e[Kt])){e[Kt]&=-65,e[Kt]|=128,function xte(s,e){let t;if(null!=s&&null!=(t=s.destroyHooks))for(let i=0;i<t.length;i+=2){const n=e[t[i]];if(!(n instanceof Cy)){const r=t[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=n[r[o]],l=r[o+1];ul(4,a,l);try{l.call(a)}finally{ul(5,a,l)}}else{ul(4,n,r);try{r.call(n)}finally{ul(5,n,r)}}}}}(s,e),function Ite(s,e){const t=s.cleanup,i=e[Sg];let n=-1;if(null!==t)for(let r=0;r<t.length-1;r+=2)if("string"==typeof t[r]){const o=t[r+3];o>=0?i[n=o]():i[n=-o].unsubscribe(),r+=2}else{const o=i[n=t[r+1]];t[r].call(o)}if(null!==i){for(let r=n+1;r<i.length;r++)(0,i[r])();e[Sg]=null}}(s,e),1===e[tt].type&&e[ii].destroy();const t=e[yy];if(null!==t&&Yl(e[Er])){t!==e[Er]&&a3(t,e);const i=e[_h];null!==i&&i.detachView(s)}!function ote(s){_D.delete(s[by])}(e)}}function h3(s,e,t){return function d3(s,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Bd];{const{componentOffset:n}=i;if(n>-1){const{encapsulation:r}=s.data[i.directiveStart+n];if(r===Hh.None||r===Hh.Emulated)return null}return ka(i,t)}}(s,e.parent,t)}function Fu(s,e,t,i,n){s.insertBefore(e,t,i,n)}function p3(s,e,t){s.appendChild(e,t)}function c3(s,e,t,i,n){null!==i?Fu(s,e,t,i,n):p3(s,e,t)}function cC(s,e){return s.parentNode(e)}let JD,nk,g3=function f3(s,e,t){return 40&s.type?ka(s,t):null};function uC(s,e,t,i){const n=h3(s,i,e),r=e[ii],a=function u3(s,e,t){return g3(s,e,t)}(i.parent||e[to],i,e);if(null!=n)if(Array.isArray(t))for(let l=0;l<t.length;l++)c3(r,n,t[l],a,!1);else c3(r,n,t,a,!1);void 0!==JD&&JD(r,i,e,t,n)}function fC(s,e){if(null!==e){const t=e.type;if(3&t)return ka(e,s);if(4&t)return $D(-1,s[e.index]);if(8&t){const i=e.child;if(null!==i)return fC(s,i);{const n=s[e.index];return Yl(n)?$D(-1,n):Ps(n)}}if(32&t)return UD(e,s)()||Ps(s[e.index]);{const i=v3(s,e);return null!==i?Array.isArray(i)?i[0]:fC(Ay(s[io]),i):fC(s,e.next)}}return null}function v3(s,e){return null!==e?s[io][to].projection[e.projection]:null}function $D(s,e){const t=To+s+1;if(t<e.length){const i=e[t],n=i[tt].firstChild;if(null!==n)return fC(i,n)}return e[GS]}function tk(s,e,t,i,n,r,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&no(Ps(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)tk(s,e,t.child,i,n,r,!1),Fg(e,s,n,a,r);else if(32&l){const h=UD(t,i);let d;for(;d=h();)Fg(e,s,n,d,r);Fg(e,s,n,a,r)}else 16&l?y3(s,e,i,t,n,r):Fg(e,s,n,a,r);t=o?t.projectionNext:t.next}}function Ly(s,e,t,i,n,r){tk(t,i,s.firstChild,e,n,r,!1)}function y3(s,e,t,i,n,r){const o=t[io],l=o[to].projection[i.projection];if(Array.isArray(l))for(let h=0;h<l.length;h++)Fg(e,s,n,l[h],r);else tk(s,e,l,o[Er],n,r,!0)}function b3(s,e,t){""===t?s.removeAttribute(e,"class"):s.setAttribute(e,"class",t)}function w3(s,e,t){const{mergedAttrs:i,classes:n,styles:r}=t;null!==i&&MD(s,e,i),null!==n&&b3(s,e,n),null!==r&&function Ate(s,e,t){s.setAttribute(e,"style",t)}(s,e,r)}const N3=new ni("ENVIRONMENT_INITIALIZER"),F3=new ni("INJECTOR",-1),R3=new ni("INJECTOR_DEF_TYPES");class O3{get(e,t=cy){if(t===cy){const i=new Error(`NullInjectorError: No provider for ${Tn(e)}!`);throw i.name="NullInjectorError",i}return t}}function rie(...s){return{\u0275providers:B3(0,s),\u0275fromNgModule:!0}}function B3(s,...e){const t=[],i=new Set;let n;return Nu(e,r=>{const o=r;hk(o,t,[],i)&&(n||(n=[]),n.push(o))}),void 0!==n&&z3(n,t),t}function z3(s,e){for(let t=0;t<s.length;t++){const{providers:n}=s[t];dk(n,r=>{e.push(r)})}}function hk(s,e,t,i){if(!(s=xt(s)))return!1;let n=null,r=q2(s);const o=!r&&Ji(s);if(r||o){if(o&&!o.standalone)return!1;n=s}else{const l=s.ngModule;if(r=q2(l),!r)return!1;n=l}const a=i.has(n);if(o){if(a)return!1;if(i.add(n),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const h of l)hk(h,e,t,i)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let h;i.add(n);try{Nu(r.imports,d=>{hk(d,e,t,i)&&(h||(h=[]),h.push(d))})}finally{}void 0!==h&&z3(h,e)}if(!a){const h=Lu(n)||(()=>new n);e.push({provide:n,useFactory:h,deps:Ui},{provide:R3,useValue:n,multi:!0},{provide:N3,useValue:()=>Wi(n),multi:!0})}const l=r.providers;null==l||a||dk(l,d=>{e.push(d)})}}return n!==s&&void 0!==s.providers}function dk(s,e){for(let t of s)rD(t)&&(t=t.\u0275providers),Array.isArray(t)?dk(t,e):e(t)}const sie=bn({provide:String,useValue:bn});function pk(s){return null!==s&&"object"==typeof s&&sie in s}function Ru(s){return"function"==typeof s}const ck=new ni("Set Injector scope."),yC={},aie={};let uk;function bC(){return void 0===uk&&(uk=new O3),uk}class Og{}class j3 extends Og{get destroyed(){return this._destroyed}constructor(e,t,i,n){super(),this.parent=t,this.source=i,this.scopes=n,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gk(e,o=>this.processProvider(o)),this.records.set(F3,Bg(void 0,this)),n.has("environment")&&this.records.set(Og,Bg(void 0,this));const r=this.records.get(ck);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(R3.multi,Ui,Pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=bg(this),i=pl(void 0);try{return e()}finally{bg(t),pl(i)}}get(e,t=cy,i=Pt.Default){this.assertNotDestroyed(),i=_S(i);const n=bg(this),r=pl(void 0);try{if(!(i&Pt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function cie(s){return"function"==typeof s||"object"==typeof s&&s instanceof ni}(e)&&BS(e);a=l&&this.injectableDefInScope(l)?Bg(fk(e),yC):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Pt.Self?bC():this.parent).get(e,t=i&Pt.Optional&&t===cy?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[HS]=o[HS]||[]).unshift(Tn(e)),n)throw o;return function N$(s,e,t,i){const n=s[HS];throw e[G2]&&n.unshift(e[G2]),s.message=function F$(s,e,t,i=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==A$?s.slice(2):s;let n=Tn(e);if(Array.isArray(e))n=e.map(Tn).join(" -> ");else if("object"==typeof e){let r=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):Tn(a)))}n=`{${r.join(", ")}}`}return`${t}${i?"("+i+")":""}[${n}]: ${s.replace(k$,"\n  ")}`}("\n"+s.message,n,t,i),s[D$]=n,s[HS]=null,s}(o,e,"R3InjectorError",this.source)}throw o}finally{pl(r),bg(n)}}resolveInjectorInitializers(){const e=bg(this),t=pl(void 0);try{const i=this.get(N3.multi,Ui,Pt.Self);for(const n of i)n()}finally{bg(e),pl(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Tn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ut(205,!1)}processProvider(e){let t=Ru(e=xt(e))?e:xt(e&&e.provide);const i=function hie(s){return pk(s)?Bg(void 0,s.useValue):Bg(q3(s),yC)}(e);if(Ru(e)||!0!==e.multi)this.records.get(t);else{let n=this.records.get(t);n||(n=Bg(void 0,yC,!0),n.factory=()=>lD(n.multi),this.records.set(t,n)),t=e,n.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===yC&&(t.value=aie,t.value=t.factory()),"object"==typeof t.value&&t.value&&function pie(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=xt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function fk(s){const e=BS(s),t=null!==e?e.factory:Lu(s);if(null!==t)return t;if(s instanceof ni)throw new ut(204,!1);if(s instanceof Function)return function lie(s){const e=s.length;if(e>0)throw function My(s,e){const t=[];for(let i=0;i<s;i++)t.push(e);return t}(e,"?"),new ut(204,!1);const t=function T$(s){return s&&(s[zS]||s[W2])||null}(s);return null!==t?()=>t.factory(s):()=>new s}(s);throw new ut(204,!1)}function q3(s,e,t){let i;if(Ru(s)){const n=xt(s);return Lu(n)||fk(n)}if(pk(s))i=()=>xt(s.useValue);else if(function _3(s){return!(!s||!s.useFactory)}(s))i=()=>s.useFactory(...lD(s.deps||[]));else if(function H3(s){return!(!s||!s.useExisting)}(s))i=()=>Wi(xt(s.useExisting));else{const n=xt(s&&(s.useClass||s.provide));if(!function die(s){return!!s.deps}(s))return Lu(n)||fk(n);i=()=>new n(...lD(s.deps))}return i}function Bg(s,e,t=!1){return{factory:s,value:e,multi:t?[]:void 0}}function gk(s,e){for(const t of s)Array.isArray(t)?gk(t,e):t&&rD(t)?gk(t.\u0275providers,e):e(t)}class uie{}class W3{}class gie{resolveComponentFactory(e){throw function fie(s){const e=Error(`No component factory found for ${Tn(s)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=s,e}(e)}}let wC=(()=>{class s{}return s.NULL=new gie,s})();function mie(){return zg(Ns(),Ae())}function zg(s,e){return new Ou(ka(s,e))}let Ou=(()=>{class s{constructor(t){this.nativeElement=t}}return s.__NG_ELEMENT_ID__=mie,s})();function vie(s){return s instanceof Ou?s.nativeElement:s}class G3{}let mk=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function yie(){const s=Ae(),t=Ko(Ns().index,s);return(Da(t)?t:s)[ii]}(),s})(),bie=(()=>{class s{}return s.\u0275prov=Zn({token:s,providedIn:"root",factory:()=>null}),s})();class vk{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const wie=new vk("15.2.9"),yk={},bk="ngOriginalError";function wk(s){return s[bk]}class Hg{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&wk(e);for(;t&&wk(t);)t=wk(t);return t||null}}function Q3(s,e,t){let i=s.length;for(;;){const n=s.indexOf(e,t);if(-1===n)return n;if(0===n||s.charCodeAt(n-1)<=32){const r=e.length;if(n+r===i||s.charCodeAt(n+r)<=32)return n}t=n+1}}const X3="ng-template";function Lie(s,e,t){let i=0,n=!0;for(;i<s.length;){let r=s[i++];if("string"==typeof r&&n){const o=s[i++];if(t&&"class"===r&&-1!==Q3(o.toLowerCase(),e,0))return!0}else{if(1===r){for(;i<s.length&&"string"==typeof(r=s[i++]);)if(r.toLowerCase()===e)return!0;return!1}"number"==typeof r&&(n=!1)}}return!1}function Z3(s){return 4===s.type&&s.value!==X3}function Vie(s,e,t){return e===(4!==s.type||t?s.value:X3)}function Pie(s,e,t){let i=4;const n=s.attrs||[],r=function Rie(s){for(let e=0;e<s.length;e++)if(Iz(s[e]))return e;return s.length}(n);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Vie(s,l,t)||""===l&&1===e.length){if(Xl(i))return!1;o=!0}}else{const h=8&i?l:e[++a];if(8&i&&null!==s.attrs){if(!Lie(s.attrs,h,t)){if(Xl(i))return!1;o=!0}continue}const p=Nie(8&i?"class":l,n,Z3(s),t);if(-1===p){if(Xl(i))return!1;o=!0;continue}if(""!==h){let u;u=p>r?"":n[p+1].toLowerCase();const f=8&i?u:null;if(f&&-1!==Q3(f,h,0)||2&i&&h!==u){if(Xl(i))return!1;o=!0}}}}else{if(!o&&!Xl(i)&&!Xl(l))return!1;if(o&&Xl(l))continue;o=!1,i=l|1&i}}return Xl(i)||o}function Xl(s){return 0==(1&s)}function Nie(s,e,t,i){if(null===e)return-1;let n=0;if(i||!t){let r=!1;for(;n<e.length;){const o=e[n];if(o===s)return n;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=e[++n];for(;"string"==typeof a;)a=e[++n];continue}if(4===o)break;if(0===o){n+=4;continue}}n+=r?1:2}return-1}return function Oie(s,e){let t=s.indexOf(4);if(t>-1)for(t++;t<s.length;){const i=s[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,s)}function K3(s,e,t=!1){for(let i=0;i<e.length;i++)if(Pie(s,e[i],t))return!0;return!1}function J3(s,e){return s?":not("+e.trim()+")":e}function zie(s){let e=s[0],t=1,i=2,n="",r=!1;for(;t<s.length;){let o=s[t];if("string"==typeof o)if(2&i){const a=s[++t];n+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?n+="."+o:4&i&&(n+=" "+o);else""!==n&&!Xl(o)&&(e+=J3(r,n),n=""),i=o,r=r||!Xl(i);t++}return""!==n&&(e+=J3(r,n)),e}const Ht={};function e4(s,e,t,i){if(!i)if(3==(3&e[Kt])){const r=s.preOrderCheckHooks;null!==r&&$S(e,r,t)}else{const r=s.preOrderHooks;null!==r&&eC(e,r,0,t)}Vu(t)}function r4(s,e=null,t=null,i){const n=s4(s,e,t,i);return n.resolveInjectorInitializers(),n}function s4(s,e=null,t=null,i,n=new Set){const r=[t||Ui,rie(s)];return i=i||("object"==typeof s?void 0:Tn(s)),new j3(r,e||bC(),i||null,n)}let lc=(()=>{class s{static create(t,i){if(Array.isArray(t))return r4({name:""},i,t,"");{const n=t.name??"";return r4({name:n},t.parent,t.providers,n)}}}return s.THROW_IF_NOT_FOUND=cy,s.NULL=new O3,s.\u0275prov=Zn({token:s,providedIn:"any",factory:()=>Wi(F3)}),s.__NG_ELEMENT_ID__=-1,s})();function jt(s,e=Pt.Default){const t=Ae();return null===t?Wi(s,e):Vz(Ns(),t,xt(s),e)}function c4(s,e){const t=s.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i+1];if(-1!==r){const o=s.data[r];SD(t[i]),o.contentQueries(2,e[r],r)}}}function CC(s,e,t,i,n,r,o,a,l,h,d){const p=e.blueprint.slice();return p[Bd]=n,p[Kt]=76|i,(null!==d||s&&1024&s[Kt])&&(p[Kt]|=1024),hz(p),p[Er]=p[Cg]=s,p[Vr]=t,p[US]=o||s&&s[US],p[ii]=a||s&&s[ii],p[cD]=l||s&&s[cD]||null,p[WS]=h||s&&s[WS]||null,p[to]=r,p[by]=function rte(){return nte++}(),p[$2]=d,p[io]=2==e.type?s[io]:p,p}function qg(s,e,t,i,n){let r=s.data[e];if(null===r)r=function Tk(s,e,t,i,n){const r=cz(),o=vD(),l=s.data[e]=function cne(s,e,t,i,n,r){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:n,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,t,e,i,n);return null===s.firstChild&&(s.firstChild=l),null!==r&&(o?null==r.child&&null!==l.parent&&(r.child=l):null===r.next&&(r.next=l,l.prev=r)),l}(s,e,t,i,n),function aee(){return zt.lFrame.inI18n}()&&(r.flags|=32);else if(64&r.type){r.type=t,r.value=i,r.attrs=n;const o=function Sy(){const s=zt.lFrame,e=s.currentTNode;return s.isParent?e:e.parent}();r.injectorIndex=null===o?-1:o.injectorIndex}return jh(r,!0),r}function Fy(s,e,t,i){if(0===t)return-1;const n=e.length;for(let r=0;r<t;r++)e.push(i),s.blueprint.push(i),s.data.push(null);return n}function Mk(s,e,t){CD(e);try{const i=s.viewQuery;null!==i&&Fk(1,i,t);const n=s.template;null!==n&&u4(s,e,n,1,t),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&c4(s,e),s.staticViewQueries&&Fk(2,s.viewQuery,t);const r=s.components;null!==r&&function hne(s,e){for(let t=0;t<e.length;t++)Vne(s,e[t])}(e,r)}catch(i){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),i}finally{e[Kt]&=-5,ID()}}function IC(s,e,t,i){const n=e[Kt];if(128!=(128&n)){CD(e);try{hz(e),function fz(s){return zt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==t&&u4(s,e,t,2,i);const o=3==(3&n);if(o){const h=s.preOrderCheckHooks;null!==h&&$S(e,h,null)}else{const h=s.preOrderHooks;null!==h&&eC(e,h,0,null),xD(e,0)}if(function Ane(s){for(let e=GD(s);null!==e;e=YD(e)){if(!e[ez])continue;const t=e[xg];for(let i=0;i<t.length;i++){const n=t[i];512&n[Kt]||mD(n[Er],1),n[Kt]|=512}}}(e),function kne(s){for(let e=GD(s);null!==e;e=YD(e))for(let t=To;t<e.length;t++){const i=e[t],n=i[tt];KS(i)&&IC(n,i,n.template,i[Vr])}}(e),null!==s.contentQueries&&c4(s,e),o){const h=s.contentCheckHooks;null!==h&&$S(e,h)}else{const h=s.contentHooks;null!==h&&eC(e,h,1),xD(e,1)}!function ane(s,e){const t=s.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const n=t[i];if(n<0)Vu(~n);else{const r=n,o=t[++i],a=t[++i];lee(o,r),a(2,e[r])}}}finally{Vu(-1)}}(s,e);const a=s.components;null!==a&&function lne(s,e){for(let t=0;t<e.length;t++)Lne(s,e[t])}(e,a);const l=s.viewQuery;if(null!==l&&Fk(2,l,i),o){const h=s.viewCheckHooks;null!==h&&$S(e,h)}else{const h=s.viewHooks;null!==h&&eC(e,h,2),xD(e,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),e[Kt]&=-41,512&e[Kt]&&(e[Kt]&=-513,mD(e[Er],-1))}finally{ID()}}}function u4(s,e,t,i,n){const r=Eo(),o=2&i;try{Vu(-1),o&&e.length>Bn&&e4(s,e,Bn,!1),ul(o?2:0,n),t(i,n)}finally{Vu(r),ul(o?3:1,n)}}function Ek(s,e,t){if(fD(e)){const n=e.directiveEnd;for(let r=e.directiveStart;r<n;r++){const o=s.data[r];o.contentQueries&&o.contentQueries(1,t[r],r)}}}function f4(s){const e=s.tView;return null===e||e.incompleteFirstPass?s.tView=Ak(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):e}function Ak(s,e,t,i,n,r,o,a,l,h){const d=Bn+i,p=d+n,u=function dne(s,e){const t=[];for(let i=0;i<e;i++)t.push(i<s?null:Ht);return t}(d,p),f="function"==typeof h?h():h;return u[tt]={type:s,blueprint:u,template:t,queries:null,viewQuery:a,declTNode:e,data:u.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function g4(s,e,t,i){const n=S4(e);null===t?n.push(i):(n.push(t),s.firstCreatePass&&C4(s).push(i,n.length-1))}function m4(s,e,t,i){for(let n in s)if(s.hasOwnProperty(n)){t=null===t?{}:t;const r=s[n];null===i?v4(t,e,n,r):i.hasOwnProperty(n)&&v4(t,e,i[n],r)}return t}function v4(s,e,t,i){s.hasOwnProperty(t)?s[t].push(e,i):s[t]=[e,i]}function y4(s,e,t,i,n,r){for(let h=0;h<i.length;h++)AD(rC(t,e),s,i[h].type);!function xne(s,e,t){s.flags|=1,s.directiveStart=e,s.directiveEnd=e+t,s.providerIndexes=e}(t,s.data.length,i.length);for(let h=0;h<i.length;h++){const d=i[h];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=Fy(s,e,i.length,null);for(let h=0;h<i.length;h++){const d=i[h];t.mergedAttrs=Iy(t.mergedAttrs,d.hostAttrs),Tne(s,t,e,l,d),Ine(l,d,n),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const p=d.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function une(s,e,t){const n=e.directiveEnd,r=s.data,o=e.attrs,a=[];let l=null,h=null;for(let d=e.directiveStart;d<n;d++){const p=r[d],u=t?t.get(p):null,g=u?u.outputs:null;l=m4(p.inputs,d,l,u?u.inputs:null),h=m4(p.outputs,d,h,g);const m=null===l||null===o||Z3(e)?null:Dne(l,d,o);a.push(m)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=h}(s,t,r)}function b4(s,e,t){const i=t.directiveStart,n=t.directiveEnd,r=t.index,o=function hee(){return zt.lFrame.currentDirectiveIndex}();try{Vu(r);for(let a=i;a<n;a++){const l=s.data[a],h=e[a];bD(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&wne(l,h)}}finally{Vu(-1),bD(o)}}function wne(s,e){null!==s.hostBindings&&s.hostBindings(1,e)}function Vk(s,e,t){e.componentOffset=t,(s.components??(s.components=[])).push(e.index)}function Ine(s,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=s;Ql(e)&&(t[""]=s)}}function Tne(s,e,t,i,n){s.data[i]=n;const r=n.factory||(n.factory=Lu(n.type)),o=new Cy(r,Ql(n),jt);s.blueprint[i]=o,t[i]=o,function vne(s,e,t,i,n){const r=n.hostBindings;if(r){let o=s.hostBindingOpCodes;null===o&&(o=s.hostBindingOpCodes=[]);const a=~e.index;(function yne(s){let e=s.length;for(;e>0;){const t=s[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,r)}}(s,e,i,Fy(s,t,n.hostVars,Ht),n)}function Ene(s,e,t,i,n,r){const o=r[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const h=o[l++],d=o[l++],p=o[l++];null!==a?i.setInput(t,p,h,d):t[d]=p}}}function Dne(s,e,t){let i=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;if(s.hasOwnProperty(r)){null===i&&(i=[]);const o=s[r];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(r,o[a+1],t[n+1]);break}}n+=2}else n+=2;else n+=4}return i}function Lne(s,e){const t=Ko(e,s);if(KS(t)){const i=t[tt];48&t[Kt]?IC(i,t,i.template,t[Vr]):t[Au]>0&&Nk(t)}}function Nk(s){for(let i=GD(s);null!==i;i=YD(i))for(let n=To;n<i.length;n++){const r=i[n];if(KS(r))if(512&r[Kt]){const o=r[tt];IC(o,r,o.template,r[Vr])}else r[Au]>0&&Nk(r)}const t=s[tt].components;if(null!==t)for(let i=0;i<t.length;i++){const n=Ko(t[i],s);KS(n)&&n[Au]>0&&Nk(n)}}function Vne(s,e){const t=Ko(e,s),i=t[tt];(function Pne(s,e){for(let t=e.length;t<s.blueprint.length;t++)e.push(s.blueprint[t])})(i,t),Mk(i,t,t[Vr])}function xC(s,e){return s[vy]?s[J2][Gl]=e:s[vy]=e,s[J2]=e,e}function TC(s){for(;s;){s[Kt]|=32;const e=Ay(s);if(_$(s)&&!e)return s;s=e}return null}function MC(s,e,t,i=!0){const n=e[US];n.begin&&n.begin();try{IC(s,e,s.template,t)}catch(o){throw i&&x4(e,o),o}finally{n.end&&n.end()}}function Fk(s,e,t){SD(0),e(s,t)}function S4(s){return s[Sg]||(s[Sg]=[])}function C4(s){return s.cleanup||(s.cleanup=[])}function x4(s,e){const t=s[WS],i=t?t.get(Hg,null):null;i&&i.handleError(e)}function Rk(s,e,t,i,n){for(let r=0;r<t.length;){const o=t[r++],a=t[r++],l=e[o],h=s.data[o];null!==h.setInput?h.setInput(l,n,i,a):l[a]=n}}function EC(s,e,t){let i=t?s.styles:null,n=t?s.classes:null,r=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?r=a:1==r?n=tD(n,a):2==r&&(i=tD(i,a+": "+e[++o]+";"))}t?s.styles=i:s.stylesWithoutHost=i,t?s.classes=n:s.classesWithoutHost=n}function DC(s,e,t,i,n=!1){for(;null!==t;){const r=e[t.index];if(null!==r&&i.push(Ps(r)),Yl(r))for(let a=To;a<r.length;a++){const l=r[a],h=l[tt].firstChild;null!==h&&DC(l[tt],l,h,i)}const o=t.type;if(8&o)DC(s,e,t.child,i);else if(32&o){const a=UD(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=v3(e,t);if(Array.isArray(a))i.push(...a);else{const l=Ay(e[io]);DC(l[tt],l,a,i,!0)}}t=n?t.projectionNext:t.next}return i}class Ry{get rootNodes(){const e=this._lView,t=e[tt];return DC(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vr]}set context(e){this._lView[Vr]=e}get destroyed(){return 128==(128&this._lView[Kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Er];if(Yl(e)){const t=e[YS],i=t?t.indexOf(this):-1;i>-1&&(ZD(e,i),oC(t,i))}this._attachedToViewContainer=!1}l3(this._lView[tt],this._lView)}onDestroy(e){g4(this._lView[tt],this._lView,null,e)}markForCheck(){TC(this._cdRefInjectingView||this._lView)}detach(){this._lView[Kt]&=-65}reattach(){this._lView[Kt]|=64}detectChanges(){MC(this._lView[tt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ut(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bte(s,e){Ly(s,e,e[ii],2,null,null)}(this._lView[tt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ut(902,!1);this._appRef=e}}class Nne extends Ry{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;MC(e[tt],e,e[Vr],!1)}checkNoChanges(){}get context(){return null}}class T4 extends wC{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ji(e);return new Oy(t,this.ngModule)}}function M4(s){const e=[];for(let t in s)s.hasOwnProperty(t)&&e.push({propName:s[t],templateName:t});return e}class Rne{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=_S(i);const n=this.injector.get(e,yk,i);return n!==yk||t===yk?n:this.parentInjector.get(e,t,i)}}class Oy extends W3{get inputs(){return M4(this.componentDef.inputs)}get outputs(){return M4(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Hie(s){return s.map(zie).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,n){let r=(n=n||this.ngModule)instanceof Og?n:n?.injector;r&&null!==this.componentDef.getStandaloneInjector&&(r=this.componentDef.getStandaloneInjector(r)||r);const o=r?new Rne(e,r):e,a=o.get(G3,null);if(null===a)throw new ut(407,!1);const l=o.get(bie,null),h=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",p=i?function pne(s,e,t){return s.selectRootElement(e,t===Hh.ShadowDom)}(h,i,this.componentDef.encapsulation):XD(h,d,function Fne(s){const e=s.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(d)),u=this.componentDef.onPush?288:272,f=Ak(0,null,null,1,0,null,null,null,null,null),g=CC(null,f,null,u,null,null,a,h,l,o,null);let m,y;CD(g);try{const b=this.componentDef;let w,S=null;b.findHostDirectiveDefs?(w=[],S=new Map,b.findHostDirectiveDefs(b,w,S),w.push(b)):w=[b];const I=function Bne(s,e){const t=s[tt],i=Bn;return s[i]=e,qg(t,i,2,"#host",null)}(g,p),x=function zne(s,e,t,i,n,r,o,a){const l=n[tt];!function Hne(s,e,t,i){for(const n of s)e.mergedAttrs=Iy(e.mergedAttrs,n.hostAttrs);null!==e.mergedAttrs&&(EC(e,e.mergedAttrs,!0),null!==t&&w3(i,t,e))}(i,s,e,o);const h=r.createRenderer(e,t),d=CC(n,f4(t),null,t.onPush?32:16,n[s.index],s,r,h,a||null,null,null);return l.firstCreatePass&&Vk(l,s,i.length-1),xC(n,d),n[s.index]=d}(I,p,b,w,g,a,h);y=lz(f,Bn),p&&function jne(s,e,t,i){if(i)MD(s,t,["ng-version",wie.full]);else{const{attrs:n,classes:r}=function _ie(s){const e=[],t=[];let i=1,n=2;for(;i<s.length;){let r=s[i];if("string"==typeof r)2===n?""!==r&&e.push(r,s[++i]):8===n&&t.push(r);else{if(!Xl(n))break;n=r}i++}return{attrs:e,classes:t}}(e.selectors[0]);n&&MD(s,t,n),r&&r.length>0&&b3(s,t,r.join(" "))}}(h,b,p,i),void 0!==t&&function qne(s,e,t){const i=s.projection=[];for(let n=0;n<e.length;n++){const r=t[n];i.push(null!=r?Array.from(r):null)}}(y,this.ngContentSelectors,t),m=function _ne(s,e,t,i,n,r){const o=Ns(),a=n[tt],l=ka(o,n);y4(a,n,o,t,null,i);for(let d=0;d<t.length;d++)no(Pu(n,a,o.directiveStart+d,o),n);b4(a,n,o),l&&no(l,n);const h=Pu(n,a,o.directiveStart+o.componentOffset,o);if(s[Vr]=n[Vr]=h,null!==r)for(const d of r)d(h,e);return Ek(a,o,s),h}(x,b,w,S,g,[Wne]),Mk(f,g,null)}finally{ID()}return new One(this.componentType,m,zg(y,g),g,y)}}class One extends uie{constructor(e,t,i,n,r){super(),this.location=i,this._rootLView=n,this._tNode=r,this.instance=t,this.hostView=this.changeDetectorRef=new Nne(n),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let n;if(null!==i&&(n=i[e])){const r=this._rootLView;Rk(r[tt],r,n,e,t),TC(Ko(this._tNode.index,r))}}get injector(){return new Dg(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Wne(){const s=Ns();JS(Ae()[tt],s)}function Ok(s){let e=function E4(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),t=!0;const i=[s];for(;e;){let n;if(Ql(s))n=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ut(903,!1);n=e.\u0275dir}if(n){if(t){i.push(n);const o=s;o.inputs=Bk(s.inputs),o.declaredInputs=Bk(s.declaredInputs),o.outputs=Bk(s.outputs);const a=n.hostBindings;a&&Qne(s,a);const l=n.viewQuery,h=n.contentQueries;if(l&&Gne(s,l),h&&Yne(s,h),eD(s.inputs,n.inputs),eD(s.declaredInputs,n.declaredInputs),eD(s.outputs,n.outputs),Ql(n)&&n.data.animation){const d=s.data;d.animation=(d.animation||[]).concat(n.data.animation)}}const r=n.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(s),a===Ok&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Une(s){let e=0,t=null;for(let i=s.length-1;i>=0;i--){const n=s[i];n.hostVars=e+=n.hostVars,n.hostAttrs=Iy(n.hostAttrs,t=Iy(t,n.hostAttrs))}}(i)}function Bk(s){return s===Rd?{}:s===Ui?[]:s}function Gne(s,e){const t=s.viewQuery;s.viewQuery=t?(i,n)=>{e(i,n),t(i,n)}:e}function Yne(s,e){const t=s.contentQueries;s.contentQueries=t?(i,n,r)=>{e(i,n,r),t(i,n,r)}:e}function Qne(s,e){const t=s.hostBindings;s.hostBindings=t?(i,n)=>{e(i,n),t(i,n)}:e}function Hk(s,e,t){const i=Ae();return function ro(s,e,t){return!Object.is(s[e],t)&&(s[e]=t,!0)}(i,function Mg(){return zt.lFrame.bindingIndex++}(),e)&&function La(s,e,t,i,n,r,o,a){const l=ka(e,t);let d,h=e.inputs;!a&&null!=h&&(d=h[i])?(Rk(s,t,d,i,n),wy(e)&&function gne(s,e){const t=Ko(e,s);16&t[Kt]||(t[Kt]|=32)}(t,e.index)):3&e.type&&(i=function fne(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(i),n=null!=o?o(n,e.value||"",i):n,r.setProperty(l,i,n))}(Mi(),function ar(){const s=zt.lFrame;return lz(s.tView,s.selectedIndex)}(),i,s,e,i[ii],t,!1),Hk}function _k(s,e,t,i,n){const o=n?"class":"style";Rk(s,t,e.inputs[o],o,i)}function LC(s,e,t,i){const n=Ae(),r=Mi(),o=Bn+s,a=n[ii],l=r.firstCreatePass?function lre(s,e,t,i,n,r){const o=e.consts,l=qg(e,s,2,i,oc(o,n));return function Lk(s,e,t,i){if(pz()){const n=null===i?null:{"":-1},r=function Sne(s,e){const t=s.directiveRegistry;let i=null,n=null;if(t)for(let r=0;r<t.length;r++){const o=t[r];if(K3(e,o.selectors,!1))if(i||(i=[]),Ql(o))if(null!==o.findHostDirectiveDefs){const a=[];n=n||new Map,o.findHostDirectiveDefs(o,a,n),i.unshift(...a,o),Vk(s,e,a.length)}else i.unshift(o),Vk(s,e,0);else n=n||new Map,o.findHostDirectiveDefs?.(o,i,n),i.push(o)}return null===i?null:[i,n]}(s,t);let o,a;null===r?o=a=null:[o,a]=r,null!==o&&y4(s,e,t,o,n,a),n&&function Cne(s,e,t){if(e){const i=s.localNames=[];for(let n=0;n<e.length;n+=2){const r=t[e[n+1]];if(null==r)throw new ut(-301,!1);i.push(e[n],r)}}}(t,i,n)}t.mergedAttrs=Iy(t.mergedAttrs,t.attrs)}(e,t,l,oc(o,r)),null!==l.attrs&&EC(l,l.attrs,!1),null!==l.mergedAttrs&&EC(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,r,n,e,t,i):r.data[o],h=n[o]=XD(a,e,function vee(){return zt.lFrame.currentNamespace}()),d=QS(l);return jh(l,!0),w3(a,h,l),32!=(32&l.flags)&&uC(r,n,h,l),0===function $$(){return zt.lFrame.elementDepthCount}()&&no(h,n),function eee(){zt.lFrame.elementDepthCount++}(),d&&(function Dk(s,e,t){pz()&&(function bne(s,e,t,i){const n=t.directiveStart,r=t.directiveEnd;wy(t)&&function Mne(s,e,t){const i=ka(e,s),n=f4(t),r=s[US],o=xC(s,CC(s,n,null,t.onPush?32:16,i,e,r,r.createRenderer(i,t),null,null,null));s[e.index]=o}(e,t,s.data[n+t.componentOffset]),s.firstCreatePass||rC(t,e),no(i,e);const o=t.initialInputs;for(let a=n;a<r;a++){const l=s.data[a],h=Pu(e,s,a,t);no(h,e),null!==o&&Ene(0,a-n,h,l,0,o),Ql(l)&&(Ko(t.index,e)[Vr]=Pu(e,s,a,t))}}(s,e,t,ka(t,e)),64==(64&t.flags)&&b4(s,e,t))}(r,n,l),Ek(r,l,n)),null!==i&&function kk(s,e,t=ka){const i=e.localNames;if(null!==i){let n=e.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?t(e,s):s[o];s[n++]=a}}}(n,l),LC}function VC(){let s=Ns();vD()?function yD(){zt.lFrame.isParent=!1}():(s=s.parent,jh(s,!1));const e=s;!function tee(){zt.lFrame.elementDepthCount--}();const t=Mi();return t.firstCreatePass&&(JS(t,s),fD(s)&&t.queries.elementEnd(s)),null!=e.classesWithoutHost&&function See(s){return 0!=(8&s.flags)}(e)&&_k(t,e,Ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Cee(s){return 0!=(16&s.flags)}(e)&&_k(t,e,Ae(),e.stylesWithoutHost,!1),VC}function Wk(s){return!!s&&"function"==typeof s.then}const pre=function q4(s){return!!s&&"function"==typeof s.subscribe};function Uk(s,e,t,i){const n=Ae(),r=Mi(),o=Ns();return function U4(s,e,t,i,n,r,o){const a=QS(i),h=s.firstCreatePass&&C4(s),d=e[Vr],p=S4(e);let u=!0;if(3&i.type||o){const m=ka(i,e),y=o?o(m):m,b=p.length,w=o?I=>o(Ps(I[i.index])):i.index;let S=null;if(!o&&a&&(S=function cre(s,e,t,i){const n=s.cleanup;if(null!=n)for(let r=0;r<n.length-1;r+=2){const o=n[r];if(o===t&&n[r+1]===i){const a=e[Sg],l=n[r+2];return a.length>l?a[l]:null}"string"==typeof o&&(r+=2)}return null}(s,e,n,i.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=r,S.__ngLastListenerFn__=r,u=!1;else{r=Y4(i,e,d,r,!1);const I=t.listen(y,n,r);p.push(r,I),h&&h.push(n,w,b,b+1)}}else r=Y4(i,e,d,r,!1);const f=i.outputs;let g;if(u&&null!==f&&(g=f[n])){const m=g.length;if(m)for(let y=0;y<m;y+=2){const x=e[g[y]][g[y+1]].subscribe(r),T=p.length;p.push(r,x),h&&h.push(n,i.index,T,-(T+1))}}}(r,n,n[ii],o,s,e,i),Uk}function G4(s,e,t,i){try{return ul(6,e,t),!1!==t(i)}catch(n){return x4(s,n),!1}finally{ul(7,e,t)}}function Y4(s,e,t,i,n){return function r(o){if(o===Function)return i;TC(s.componentOffset>-1?Ko(s.index,e):e);let l=G4(e,t,i,o),h=r.__ngNextListenerFn__;for(;h;)l=G4(e,t,h,o)&&l,h=h.__ngNextListenerFn__;return n&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}const tm="en-US";let H5=tm;function eA(s,e,t,i,n){if(s=xt(s),Array.isArray(s))for(let r=0;r<s.length;r++)eA(s[r],e,t,i,n);else{const r=Mi(),o=Ae();let a=Ru(s)?s:xt(s.provide),l=q3(s);const h=Ns(),d=1048575&h.providerIndexes,p=h.directiveStart,u=h.providerIndexes>>20;if(Ru(s)||!s.multi){const f=new Cy(l,n,jt),g=iA(a,e,n?d:d+u,p);-1===g?(AD(rC(h,o),r,a),tA(r,s,e.length),e.push(a),h.directiveStart++,h.directiveEnd++,n&&(h.providerIndexes+=1048576),t.push(f),o.push(f)):(t[g]=f,o[g]=f)}else{const f=iA(a,e,d+u,p),g=iA(a,e,d,d+u),y=g>=0&&t[g];if(n&&!y||!n&&!(f>=0&&t[f])){AD(rC(h,o),r,a);const b=function noe(s,e,t,i,n){const r=new Cy(s,t,jt);return r.multi=[],r.index=e,r.componentProviders=0,pH(r,n,i&&!t),r}(n?ioe:toe,t.length,n,i,l);!n&&y&&(t[g].providerFactory=b),tA(r,s,e.length,0),e.push(a),h.directiveStart++,h.directiveEnd++,n&&(h.providerIndexes+=1048576),t.push(b),o.push(b)}else tA(r,s,f>-1?f:g,pH(t[n?g:f],l,!n&&i));!n&&i&&y&&t[g].componentProviders++}}}function tA(s,e,t,i){const n=Ru(e),r=function oie(s){return!!s.useClass}(e);if(n||r){const l=(r?xt(e.useClass):e).prototype.ngOnDestroy;if(l){const h=s.destroyHooks||(s.destroyHooks=[]);if(!n&&e.multi){const d=h.indexOf(t);-1===d?h.push(t,[i,l]):h[d+1].push(i,l)}else h.push(t,l)}}}function pH(s,e,t){return t&&s.componentProviders++,s.multi.push(e)-1}function iA(s,e,t,i){for(let n=t;n<i;n++)if(e[n]===s)return n;return-1}function toe(s,e,t,i){return nA(this.multi,[])}function ioe(s,e,t,i){const n=this.multi;let r;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Pu(t,t[tt],this.providerFactory.index,i);r=a.slice(0,o),nA(n,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],nA(n,r);return r}function nA(s,e){for(let t=0;t<s.length;t++)e.push((0,s[t])());return e}function cH(s,e=[]){return t=>{t.providersResolver=(i,n)=>function eoe(s,e,t){const i=Mi();if(i.firstCreatePass){const n=Ql(s);eA(t,i.data,i.blueprint,n,!0),eA(e,i.data,i.blueprint,n,!1)}}(i,n?n(s):s,e)}}class im{}class roe{}class uH extends im{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new T4(this);const i=function Ea(s,e){const t=s[Q2]||null;if(!t&&!0===e)throw new Error(`Type ${Tn(s)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function jd(s){return s instanceof Function?s():s}(i.bootstrap),this._r3Injector=s4(e,t,[{provide:im,useValue:this},{provide:wC,useValue:this.componentFactoryResolver}],Tn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class rA extends roe{constructor(e){super(),this.moduleType=e}create(e){return new uH(this.moduleType,e)}}function oA(s){return e=>{setTimeout(s,void 0,e)}}const ml=class Noe extends YE{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let n=e,r=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;n=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=oA(r),n&&(n=oA(n)),o&&(o=oA(o)));const a=super.subscribe({next:n,error:r,complete:o});return e instanceof Bh&&e.add(a),a}};function Foe(){return this._results[Symbol.iterator]()}class aA{get changes(){return this._changes||(this._changes=new ml)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=aA.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Foe)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const n=function fl(s){return s.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Pee(s,e,t){if(s.length!==e.length)return!1;for(let i=0;i<s.length;i++){let n=s[i],r=e[i];if(t&&(n=t(n),r=t(r)),r!==n)return!1}return!0}(i._results,n,t))&&(i._results=n,i.length=n.length,i.last=n[this.length-1],i.first=n[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wd=(()=>{class s{}return s.__NG_ELEMENT_ID__=Boe,s})();const Roe=Wd,Ooe=class extends Roe{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tView,n=CC(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);n[yy]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[_h];return null!==o&&(n[_h]=o.createEmbeddedView(i)),Mk(i,n,e),new Ry(n)}};function Boe(){return zC(Ns(),Ae())}function zC(s,e){return 4&s.type?new Ooe(e,s,zg(s,e)):null}let Jl=(()=>{class s{}return s.__NG_ELEMENT_ID__=zoe,s})();function zoe(){return DH(Ns(),Ae())}const Hoe=Jl,MH=class extends Hoe{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return zg(this._hostTNode,this._hostLView)}get injector(){return new Dg(this._hostTNode,this._hostLView)}get parentInjector(){const e=kD(this._hostTNode,this._hostLView);if(Mz(e)){const t=iC(e,this._hostLView),i=tC(e);return new Dg(t[tt].data[i+8],t)}return new Dg(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=EH(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-To}createEmbeddedView(e,t,i){let n,r;"number"==typeof i?n=i:null!=i&&(n=i.index,r=i.injector);const o=e.createEmbeddedView(t||{},r);return this.insert(o,n),o}createComponent(e,t,i,n,r){const o=e&&!function Ty(s){return"function"==typeof s}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,n=p.projectableNodes,r=p.environmentInjector||p.ngModuleRef}const l=o?e:new Oy(Ji(e)),h=i||this.parentInjector;if(!r&&null==l.ngModule){const u=(o?h:this.parentInjector).get(Og,null);u&&(r=u)}const d=l.create(h,n,void 0,r);return this.insert(d.hostView,a),d}insert(e,t){const i=e._lView,n=i[tt];if(function J$(s){return Yl(s[Er])}(i)){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const p=i[Er],u=new MH(p,p[to],p[Er]);u.detach(u.indexOf(e))}}const r=this._adjustIndex(t),o=this._lContainer;!function Ste(s,e,t,i){const n=To+i,r=t.length;i>0&&(t[n-1][Gl]=e),i<r-To?(e[Gl]=t[n],Bz(t,To+i,e)):(t.push(e),e[Gl]=null),e[Er]=t;const o=e[yy];null!==o&&t!==o&&function Cte(s,e){const t=s[xg];e[io]!==e[Er][Er][io]&&(s[ez]=!0),null===t?s[xg]=[e]:t.push(e)}(o,e);const a=e[_h];null!==a&&a.insertView(s),e[Kt]|=64}(n,i,o,r);const a=$D(r,o),l=i[ii],h=cC(l,o[GS]);return null!==h&&function yte(s,e,t,i,n,r){i[Bd]=n,i[to]=e,Ly(s,i,t,1,n,r)}(n,o[to],l,i,h,a),e.attachToViewContainerRef(),Bz(lA(o),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=EH(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=ZD(this._lContainer,t);i&&(oC(lA(this._lContainer),t),l3(i[tt],i))}detach(e){const t=this._adjustIndex(e,-1),i=ZD(this._lContainer,t);return i&&null!=oC(lA(this._lContainer),t)?new Ry(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function EH(s){return s[YS]}function lA(s){return s[YS]||(s[YS]=[])}function DH(s,e){let t;const i=e[s.index];if(Yl(i))t=i;else{let n;if(8&s.type)n=Ps(i);else{const r=e[ii];n=r.createComment("");const o=ka(s,e);Fu(r,cC(r,o),n,function Mte(s,e){return s.nextSibling(e)}(r,o),!1)}e[s.index]=t=function w4(s,e,t,i){return[s,!0,!1,e,null,0,i,t,null,null]}(i,e,n,s),xC(e,t)}return new MH(t,s,e)}class hA{constructor(e){this.queryList=e,this.matches=null}clone(){return new hA(this.queryList)}setDirty(){this.queryList.setDirty()}}class dA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,n=[];for(let r=0;r<i;r++){const o=t.getByIndex(r);n.push(this.queries[o.indexInDeclarationView].clone())}return new dA(n)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==RH(e,t).matches&&this.queries[t].setDirty()}}class kH{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class pA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const n=null!==t?t.length:0,r=this.getByIndex(i).embeddedTView(e,n);r&&(r.indexInDeclarationView=i,null!==t?t.push(r):t=[r])}return null!==t?new pA(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class cA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new cA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let n=0;n<i.length;n++){const r=i[n];this.matchTNodeWithReadOption(e,t,_oe(t,r)),this.matchTNodeWithReadOption(e,t,sC(t,e,r,!1,!1))}else i===Wd?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,sC(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const n=this.metadata.read;if(null!==n)if(n===Ou||n===Jl||n===Wd&&4&t.type)this.addMatch(t.index,-2);else{const r=sC(t,e,n,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function _oe(s,e){const t=s.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function qoe(s,e,t,i){return-1===t?function joe(s,e){return 11&s.type?zg(s,e):4&s.type?zC(s,e):null}(e,s):-2===t?function Woe(s,e,t){return t===Ou?zg(e,s):t===Wd?zC(e,s):t===Jl?DH(e,s):void 0}(s,e,i):Pu(s,s[tt],t,e)}function AH(s,e,t,i){const n=e[_h].queries[i];if(null===n.matches){const r=s.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const h=o[l];a.push(h<0?null:qoe(e,r[h],o[l+1],t.metadata.read))}n.matches=a}return n.matches}function uA(s,e,t,i){const n=s.queries.getByIndex(t),r=n.matches;if(null!==r){const o=AH(s,e,n,t);for(let a=0;a<r.length;a+=2){const l=r[a];if(l>0)i.push(o[a/2]);else{const h=r[a+1],d=e[-l];for(let p=To;p<d.length;p++){const u=d[p];u[yy]===u[Er]&&uA(u[tt],u,h,i)}if(null!==d[xg]){const p=d[xg];for(let u=0;u<p.length;u++){const f=p[u];uA(f[tt],f,h,i)}}}}}return i}function LH(s){const e=Ae(),t=Mi(),i=mz();SD(i+1);const n=RH(t,i);if(s.dirty&&function K$(s){return 4==(4&s[Kt])}(e)===(2==(2&n.metadata.flags))){if(null===n.matches)s.reset([]);else{const r=n.crossesNgTemplate?uA(t,e,i,[]):AH(t,e,n,i);s.reset(r,vie),s.notifyOnChanges()}return!0}return!1}function VH(s,e,t){const i=Mi();i.firstCreatePass&&(function FH(s,e,t){null===s.queries&&(s.queries=new pA),s.queries.track(new cA(e,t))}(i,new kH(s,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function NH(s,e,t){const i=new aA(4==(4&t));g4(s,e,i,i.destroy),null===e[_h]&&(e[_h]=new dA),e[_h].queries.push(new hA(i))}(i,Ae(),e)}function RH(s,e){return s.queries.getByIndex(e)}function _C(...s){}const t_=new ni("Application Initializer");let jC=(()=>{class s{constructor(t){this.appInits=t,this.resolve=_C,this.reject=_C,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,n)=>{this.resolve=i,this.reject=n})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const r=this.appInits[n]();if(Wk(r))t.push(r);else if(pre(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(n=>{this.reject(n)}),0===t.length&&i(),this.initialized=!0}}return s.\u0275fac=function(t){return new(t||s)(Wi(t_,8))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Qy=new ni("AppId",{providedIn:"root",factory:function i_(){return`${yA()}${yA()}${yA()}`}});function yA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const n_=new ni("Platform Initializer"),r_=new ni("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ud=new ni("LocaleId",{providedIn:"root",factory:()=>function V$(s,e=Pt.Default){return Wi(s,_S(e))}(Ud,Pt.Optional|Pt.SkipSelf)||function fae(){return typeof $localize<"u"&&$localize.locale||tm}()}),bae=(()=>Promise.resolve(0))();function bA(s){typeof Zone>"u"?bae.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class so{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ml(!1),this.onMicrotaskEmpty=new ml(!1),this.onStable=new ml(!1),this.onError=new ml(!1),typeof Zone>"u")throw new ut(908,!1);Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=!i&&t,n.shouldCoalesceRunChangeDetection=i,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function wae(){let s=On.requestAnimationFrame,e=On.cancelAnimationFrame;if(typeof Zone<"u"&&s&&e){const t=s[Zone.__symbol__("OriginalDelegate")];t&&(s=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Iae(s){const e=()=>{!function Cae(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(On,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,SA(s),s.isCheckStableRunning=!0,wA(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),SA(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,n,r,o,a)=>{try{return a_(s),t.invokeTask(n,r,o,a)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||s.shouldCoalesceRunChangeDetection)&&e(),l_(s)}},onInvoke:(t,i,n,r,o,a,l)=>{try{return a_(s),t.invoke(n,r,o,a,l)}finally{s.shouldCoalesceRunChangeDetection&&e(),l_(s)}},onHasTask:(t,i,n,r)=>{t.hasTask(n,r),i===n&&("microTask"==r.change?(s._hasPendingMicrotasks=r.microTask,SA(s),wA(s)):"macroTask"==r.change&&(s.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,i,n,r)=>(t.handleError(n,r),s.runOutsideAngular(()=>s.onError.emit(r)),!1)})}(n)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!so.isInAngularZone())throw new ut(909,!1)}static assertNotInAngularZone(){if(so.isInAngularZone())throw new ut(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,n){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+n,e,Sae,_C,_C);try{return r.runTask(o,t,i)}finally{r.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Sae={};function wA(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function SA(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function a_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function l_(s){s._nesting--,wA(s)}class xae{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ml,this.onMicrotaskEmpty=new ml,this.onStable=new ml,this.onError=new ml}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,n){return e.apply(t,i)}}const h_=new ni(""),qC=new ni("");let xA,CA=(()=>{class s{constructor(t,i,n){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xA||(function Tae(s){xA=s}(n),n.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{so.assertNotInAngularZone(),bA(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bA(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,n){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,i,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,n){return[]}}return s.\u0275fac=function(t){return new(t||s)(Wi(so),Wi(IA),Wi(qC))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})(),IA=(()=>{class s{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return xA?.findTestabilityInTree(this,t,i)??null}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Gd=!1;let dc=null;const d_=new ni("AllowMultipleToken"),TA=new ni("PlatformDestroyListeners"),Mae=new ni("appBootstrapListener");function c_(s,e,t=[]){const i=`Platform: ${e}`,n=new ni(i);return(r=[])=>{let o=MA();if(!o||o.injector.get(d_,!1)){const a=[...t,...r,{provide:n,useValue:!0}];s?s(a):function kae(s){if(dc&&!dc.get(d_,!1))throw new ut(400,!1);dc=s;const e=s.get(f_);(function p_(s){const e=s.get(n_,null);e&&e.forEach(t=>t())})(s)}(function u_(s=[],e){return lc.create({name:e,providers:[{provide:ck,useValue:"platform"},{provide:TA,useValue:new Set([()=>dc=null])},...s]})}(a,i))}return function Lae(s){const e=MA();if(!e)throw new ut(401,!1);return e}()}}function MA(){return dc?.get(f_)??null}let f_=(()=>{class s{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const n=function m_(s,e){let t;return t="noop"===s?new xae:("zone.js"===s?void 0:s)||new so(e),t}(i?.ngZone,function g_(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(i)),r=[{provide:so,useValue:n}];return n.run(()=>{const o=lc.create({providers:r,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Hg,null);if(!l)throw new ut(402,!1);return n.runOutsideAngular(()=>{const h=n.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{WC(this._modules,a),h.unsubscribe()})}),function v_(s,e,t){try{const i=t();return Wk(i)?i.catch(n=>{throw e.runOutsideAngular(()=>s.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>s.handleError(i)),i}}(l,n,()=>{const h=a.injector.get(jC);return h.runInitializers(),h.donePromise.then(()=>(function _5(s){dl(s,"Expected localeId to be defined"),"string"==typeof s&&(H5=s.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ud,tm)||tm),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const n=y_({},i);return function Eae(s,e,t){const i=new rA(t);return Promise.resolve(i)}(0,0,t).then(r=>this.bootstrapModuleFactory(r,n))}_moduleDoBootstrap(t){const i=t.injector.get(EA);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(n=>i.bootstrap(n));else{if(!t.instance.ngDoBootstrap)throw new ut(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ut(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(TA,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(t){return new(t||s)(Wi(lc))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function y_(s,e){return Array.isArray(e)?e.reduce(y_,s):{...s,...e}}let EA=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,i,n){this._zone=t,this._injector=i,this._exceptionHandler=n,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const r=new Qo(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Qo(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{so.assertNotInAngularZone(),bA(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{so.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),h.unsubscribe()}});this.isStable=v$(r,o.pipe(function y$(s={}){const{connector:e=(()=>new YE),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:n=!0}=s;return r=>{let o,a,l,h=0,d=!1,p=!1;const u=()=>{a?.unsubscribe(),a=void 0},f=()=>{u(),o=l=void 0,d=p=!1},g=()=>{const m=o;f(),m?.unsubscribe()};return py((m,y)=>{h++,!p&&!d&&u();const b=l=l??e();y.add(()=>{h--,0===h&&!p&&!d&&(a=$E(g,n))}),b.subscribe(y),!o&&h>0&&(o=new dy({next:w=>b.next(w),error:w=>{p=!0,u(),a=$E(f,t,w),b.error(w)},complete:()=>{d=!0,u(),a=$E(f,i),b.complete()}}),Du(m).subscribe(o))})(r)}}()))}bootstrap(t,i){const n=t instanceof W3;if(!this._injector.get(jC).done){!n&&function my(s){const e=Ji(s)||eo(s)||Zo(s);return null!==e&&e.standalone}(t);throw new ut(405,Gd)}let o;o=n?t:this._injector.get(wC).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Dae(s){return s.isBoundToModule}(o)?void 0:this._injector.get(im),h=o.create(lc.NULL,[],i||o.selector,a),d=h.location.nativeElement,p=h.injector.get(h_,null);return p?.registerApplication(d),h.onDestroy(()=>{this.detachView(h.hostView),WC(this.components,h),p?.unregisterApplication(d)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new ut(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;WC(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Mae,[]);i.push(...this._bootstrapListeners),i.forEach(n=>n(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>WC(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ut(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(t){return new(t||s)(Wi(so),Wi(Og),Wi(Hg))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function WC(s,e){const t=s.indexOf(e);t>-1&&s.splice(t,1)}const Qae=c_(null,"core",[]);let Xae=(()=>{class s{constructor(t){}}return s.\u0275fac=function(t){return new(t||s)(Wi(EA))},s.\u0275mod=wg({type:s}),s.\u0275inj=ku({}),s})(),VA=null;function QC(){return VA}class Jae{}const Yd=new ni("DocumentToken");let U_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=wg({type:s}),s.\u0275inj=ku({}),s})();class Ghe extends Jae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class XA extends Ghe{static makeCurrent(){!function Kae(s){VA||(VA=s)}(new XA)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Yhe(){return $y=$y||document.querySelector("base"),$y?$y.getAttribute("href"):null}();return null==t?null:function Qhe(s){o1=o1||document.createElement("a"),o1.setAttribute("href",s);const e=o1.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$y=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ole(s,e){e=encodeURIComponent(e);for(const t of s.split(";")){const i=t.indexOf("="),[n,r]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(n.trim()===e)return decodeURIComponent(r)}return null}(document.cookie,e)}}let o1,$y=null;const J_=new ni("TRANSITION_ID"),Zhe=[{provide:t_,useFactory:function Xhe(s,e,t){return()=>{t.get(jC).donePromise.then(()=>{const i=QC(),n=e.querySelectorAll(`style[ng-transition="${s}"]`);for(let r=0;r<n.length;r++)i.remove(n[r])})}},deps:[J_,Yd,lc],multi:!0}];let Jhe=(()=>{class s{build(){return new XMLHttpRequest}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})();const a1=new ni("EventManagerPlugins");let l1=(()=>{class s{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(n=>{n.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,n){return this._findPluginFor(i).addEventListener(t,i,n)}addGlobalEventListener(t,i,n){return this._findPluginFor(i).addGlobalEventListener(t,i,n)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const n=this._plugins;for(let r=0;r<n.length;r++){const o=n[r];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return s.\u0275fac=function(t){return new(t||s)(Wi(a1),Wi(so))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})();class $_{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const n=QC().getGlobalEventTarget(this._doc,e);if(!n)throw new Error(`Unsupported event target ${n} for event ${t}`);return this.addEventListener(n,t,i)}}let e6=(()=>{class s{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const n=this.usageCount;let r=n.get(t)??0;return r+=i,r>0?n.set(t,r):n.delete(t),r}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})(),e0=(()=>{class s extends e6{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(r=>r.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const n=this.doc.createElement("style");n.textContent=i,t.appendChild(n);const r=this.styleRef.get(i);r?r.push(n):this.styleRef.set(i,[n])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return s.\u0275fac=function(t){return new(t||s)(Wi(Yd))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})();const ZA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},KA=/%COMP%/g,n6=new ni("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function r6(s,e){return e.flat(100).map(t=>t.replace(KA,s))}function s6(s){return e=>{if("__ngUnwrap__"===e)return s;!1===s(e)&&(e.preventDefault(),e.returnValue=!1)}}let JA=(()=>{class s{constructor(t,i,n,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=n,this.removeStylesOnCompDestory=r,this.rendererByCompId=new Map,this.defaultRenderer=new $A(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const n=this.getOrCreateRenderer(t,i);return n instanceof l6?n.applyToHost(t):n instanceof eL&&n.applyStyles(),n}getOrCreateRenderer(t,i){const n=this.rendererByCompId;let r=n.get(i.id);if(!r){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(i.encapsulation){case Hh.Emulated:r=new l6(o,a,i,this.appId,l);break;case Hh.ShadowDom:return new sde(o,a,t,i);default:r=new eL(o,a,i,l)}r.onDestroy=()=>n.delete(i.id),n.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return s.\u0275fac=function(t){return new(t||s)(Wi(l1),Wi(e0),Wi(Qy),Wi(n6))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})();class $A{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ZA[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(a6(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(a6(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,n){if(n){t=n+":"+t;const r=ZA[n];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const n=ZA[i];n?e.removeAttributeNS(n,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,n){n&(Jo.DashCase|Jo.Important)?e.style.setProperty(t,i,n&Jo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Jo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,s6(i)):this.eventManager.addEventListener(e,t,s6(i))}}function a6(s){return"TEMPLATE"===s.tagName&&void 0!==s.content}class sde extends $A{constructor(e,t,i,n){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=r6(n.id,n.styles);for(const o of r){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class eL extends $A{constructor(e,t,i,n,r=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=n,this.rendererUsageCount=0,this.styles=r6(r,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class l6 extends eL{constructor(e,t,i,n,r){const o=n+"-"+i.id;super(e,t,i,r,o),this.contentAttr=function ide(s){return"_ngcontent-%COMP%".replace(KA,s)}(o),this.hostAttr=function nde(s){return"_nghost-%COMP%".replace(KA,s)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let ode=(()=>{class s extends $_{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,n){return t.addEventListener(i,n,!1),()=>this.removeEventListener(t,i,n)}removeEventListener(t,i,n){return t.removeEventListener(i,n)}}return s.\u0275fac=function(t){return new(t||s)(Wi(Yd))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})();const h6=["alt","control","meta","shift"],ade={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lde={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey};let hde=(()=>{class s extends $_{constructor(t){super(t)}supports(t){return null!=s.parseEventName(t)}addEventListener(t,i,n){const r=s.parseEventName(i),o=s.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>QC().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const r=s._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),h6.forEach(h=>{const d=i.indexOf(h);d>-1&&(i.splice(d,1),o+=h+".")}),o+=r,0!=i.length||0===r.length)return null;const l={};return l.domEventName=n,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let n=ade[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(n=t.code,r="code."),!(null==n||!n)&&(n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),h6.forEach(o=>{o!==n&&(0,lde[o])(t)&&(r+=o+".")}),r+=n,r===i)}static eventCallback(t,i,n){return r=>{s.matchEventFullKeyCode(r,t)&&n.runGuarded(()=>i(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return s.\u0275fac=function(t){return new(t||s)(Wi(Yd))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})();const p6=[{provide:r_,useValue:"browser"},{provide:n_,useValue:function dde(){XA.makeCurrent()},multi:!0},{provide:Yd,useFactory:function cde(){return function Nte(s){nk=s}(document),document},deps:[]}],ude=c_(Qae,"browser",p6),c6=new ni(""),u6=[{provide:qC,useClass:class Khe{addToWindow(e){On.getAngularTestability=(i,n=!0)=>{const r=e.findTestabilityInTree(i,n);if(null==r)throw new Error("Could not find testability for element.");return r},On.getAllAngularTestabilities=()=>e.getAllTestabilities(),On.getAllAngularRootElements=()=>e.getAllRootElements(),On.frameworkStabilizers||(On.frameworkStabilizers=[]),On.frameworkStabilizers.push(i=>{const n=On.getAllAngularTestabilities();let r=n.length,o=!1;const a=function(l){o=o||l,r--,0==r&&i(o)};n.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?QC().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h_,useClass:CA,deps:[so,IA,qC]},{provide:CA,useClass:CA,deps:[so,IA,qC]}],f6=[{provide:ck,useValue:"root"},{provide:Hg,useFactory:function pde(){return new Hg},deps:[]},{provide:a1,useClass:ode,multi:!0,deps:[Yd,so,r_]},{provide:a1,useClass:hde,multi:!0,deps:[Yd]},{provide:JA,useClass:JA,deps:[l1,e0,Qy,n6]},{provide:G3,useExisting:JA},{provide:e6,useExisting:e0},{provide:e0,useClass:e0,deps:[Yd]},{provide:l1,useClass:l1,deps:[a1,so]},{provide:class bhe{},useClass:Jhe,deps:[]},[]];let fde=(()=>{class s{constructor(t){}static withServerTransition(t){return{ngModule:s,providers:[{provide:Qy,useValue:t.appId},{provide:J_,useExisting:Qy},Zhe]}}}return s.\u0275fac=function(t){return new(t||s)(Wi(c6,12))},s.\u0275mod=wg({type:s}),s.\u0275inj=ku({providers:[...f6,...u6],imports:[U_,Xae]}),s})();typeof window<"u"&&window;var t0="ej2_instances",Cde=0,nL=!1;function h1(s,e){var t=e;return t.unshift(void 0),new(Function.prototype.bind.apply(s,t))}function R(s,e){for(var t=e,i=s.replace(/\[/g,".").replace(/\]/g,"").split("."),n=0;n<i.length&&!Oe(t);n++)t=t[i[parseInt(n.toString(),10)]];return t}function ke(s,e,t){var o,l,i=s.replace(/\[/g,".").replace(/\]/g,"").split("."),n=t||{},r=n,a=i.length;for(o=0;o<a;o++)l=i[parseInt(o.toString(),10)],o+1===a?r[""+l]=void 0===e?{}:e:c(r[""+l])&&(r[""+l]={}),r=r[""+l];return n}function d1(s,e){delete s[""+e]}var sm=typeof window<"u"?window:{};function Va(s){return!c(s)&&s.constructor==={}.constructor}function zn(s,e){if(!c(e))for(var t=s,i=e,r="deepMerge",o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];c(t[""+r])||-1===t[""+r].indexOf(l)||!Va(i[""+l])&&!Array.isArray(i[""+l])?t[""+l]=i[""+l]:Q(t[""+l],t[""+l],i[""+l],!0)}}function Q(s,e,t,i){var n=s&&"object"==typeof s?s:{},r=arguments.length;i&&(r-=1);for(var o=function(h){if(!a[h])return"continue";var d=a[h];Object.keys(d).forEach(function(p){var g,u=n[""+p],f=d[""+p],m=Array.isArray(f)&&Array.isArray(u)&&f.length!==u.length,y=!X()||!(u instanceof Event||m);i&&y&&(Va(f)||Array.isArray(f))?Va(f)?(g=u||{},Array.isArray(g)&&g.hasOwnProperty("isComplexArray")?Q(g,{},f,i):n[""+p]=Q(g,{},f,i)):(g=X()?u&&Object.keys(f).length:u||[],n[""+p]=Q([],g,f,g&&g.length||f&&f.length)):n[""+p]=f})},a=arguments,l=1;l<r;l++)o(l);return n}function c(s){return null==s}function Oe(s){return typeof s>"u"}function yt(s){return s+"_"+Cde++}function p1(s,e){return s===e||!(s===document||!s)&&p1(s.parentNode,e)}function om(s){try{throw new Error(s)}catch(e){throw e.message+"\n"+e.stack}}function oe(s){var e=s+"";return e.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?e:e+"px"}function X(){return nL}function y6(s){var e="xPath";return s instanceof Node||!X()||c(s[""+e])?s:document.evaluate(s[""+e],document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function Hn(s,e){var t="string"==typeof s?document.querySelector(s):s;if(t[""+t0])for(var i=0,n=t[""+t0];i<n.length;i++){var r=n[i];if(r instanceof e)return r}return null}var Pa,s,e,Mde={latn:{_digits:"0123456789",_type:"numeric"}},b6={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},w6=[0,1,2,3,4,5,6,7,8,9],_n=function(){function s(){}return s.getMainObject=function(e,t){return R(X()?t:"main."+t,e)},s.getNumberingSystem=function(e){return R("supplemental.numberingSystems",e)||this.numberingSystems},s.reverseObject=function(e,t){for(var n={},r=0,o=t||Object.keys(e);r<o.length;r++){var a=o[r];n.hasOwnProperty(e[a])||(n[e[a]]=a)}return n},s.getSymbolRegex=function(e){var t=e.map(function(n){return n.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|");return new RegExp(t,"g")},s.getSymbolMatch=function(e){for(var i={},n=0,r=Object.keys(b6);n<r.length;n++){var o=r[n];i[e[o]]=b6[o]}return i},s.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[parseInt(n.toString(),10)]+"|":e[parseInt(n.toString(),10)];return i},s.convertValueParts=function(e,t,i){return e.replace(t,function(n){return i[n]})},s.getDefaultNumberingSystem=function(e){var t={};return t.obj=R("numbers",e),t.nSystem=R("defaultNumberingSystem",t.obj),t},s.getCurrentNumericOptions=function(e,t,i,n){var r={},o=this.getDefaultNumberingSystem(e);if(!Oe(o.nSystem)||n){var a=n?R("obj.mapperDigits",o):R(o.nSystem+"._digits",t);if(!Oe(a)){r.numericPair=this.reverseObject(a,w6);var l=RegExp;r.numberParseRegex=new l(this.constructRegex(a),"g"),r.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(r.numericRegex=a[0]+"-"+a[9],r.symbolNumberSystem=R(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),r.symbolMatch=this.getSymbolMatch(r.symbolNumberSystem),r.numberSystem=o.nSystem)}}return r},s.getNumberMapper=function(e,t,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(e);if(!Oe(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=R("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=R("timeSeparator",n.numberSymbols);var o=R(r.nSystem+"._digits",t);if(!Oe(o))for(var a=0,l=w6;a<l.length;a++){var h=l[a];n.mapper[h]=o[h]}}return n},s.nPair="numericPair",s.nRegex="numericRegex",s.numberingSystems=Mde,s}(),Ede={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.",BHD:"\u062f.\u0628.",DZD:"\u062f.\u062c.",EGP:"\u062c.\u0645.",ILS:"\u20aa",IQD:"\u062f.\u0639.",JOD:"\u062f.\u0627.",KMF:"CF",KWD:"\u062f.\u0643.",LBP:"\u0644.\u0644.",LYD:"\u062f.\u0644.",MAD:"\u062f.\u0645.",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.",QAR:"\u0631.\u0642.",SAR:"\u0631.\u0633.",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.",TND:"\u062f.\u062a.",YER:"\u0631.\u064a.",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};s=Pa||(Pa={}),e=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],s.getHijriDate=function t(n){var r=n.getDate(),o=n.getMonth(),a=n.getFullYear(),l=o+1,h=a;l<3&&(h-=1,l+=12);var d=Math.floor(h/100),p=d-Math.floor(d/4)-2,u=Math.floor(365.25*(h+4716))+Math.floor(30.6001*(l+1))+r-p-1524,f=u+(p=(d=Math.floor((u-1867216.25)/36524.25))-Math.floor(d/4)+1)+1524,g=Math.floor((f-122.1)/365.25),m=Math.floor(365.25*g),y=Math.floor((f-m)/30.6001);r=f-m-Math.floor(30.6001*y),(o=Math.floor((f-m)/20.6001))>13&&(g+=1,o-=12),o-=1,a=g-4716;var b=u-24e5,w=10631/30,S=u-1948084,I=Math.floor(S/10631);S-=10631*I;var x=Math.floor((S-.1335)/w),T=30*I+x;S-=Math.floor(x*w+.1335);var L=Math.floor((S+28.5001)/29.5);13===L&&(L=12);for(var N=S-Math.floor(29.5001*L-29),O=0;O<e.length&&!(e[parseInt(O.toString(),10)]>b);O++);var _=O+16260,B=Math.floor((_-1)/12),q=B+1,W=_-12*B,j=b-e[O-1]+1;return(j+"").length>2&&(j=N,W=L,q=T),{year:q,month:W,date:j}},s.toGregorian=function i(n,r,o){var m=Math.floor(o+e[12*(n-1)+1+(r-1)-16260-1]-1+24e5+.5),y=Math.floor((m-1867216.25)/36524.25),b=1524+(y=m+1+y-Math.floor(y/4)),w=Math.floor((b-122.1)/365.25),S=Math.floor(365.25*w),I=Math.floor((b-S)/30.6001),x=b-S-Math.floor(30.6001*I),T=I-(I>13.5?13:1),L=w-(T>2.5?4716:4715);return L<=0&&T--,new Date(L+"/"+T+"/"+x)};var kde=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,S6="stand-alone",Ade=["sun","mon","tue","wed","thu","fri","sat"],C6={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},Lde={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},I6=function(){function s(){}return s.dateFormat=function(e,t,i){var n=this,r=pt.getDependables(i,e,t.calendar),o=R("parserObject.numbers",r),a=r.dateObject,l={isIslamic:pt.islamicRegex.test(t.calendar)};X()&&t.isServerRendered&&(t=pt.compareBlazorDateFormats(t,e));var h=t.format||pt.getResultantPattern(t.skeleton,r.dateObject,t.type,!1,X()?e:"");if(l.dateSeperator=X()?R("dateSeperator",a):pt.getDateSeparator(r.dateObject),Oe(h))om("Format options or type given must be invalid");else{h=pt.ConvertDateToWeekFormat(h),X()&&(h=h.replace(/tt/,"a")),l.pattern=h,l.numMapper=X()?Q({},o):_n.getNumberMapper(r.parserObject,_n.getNumberingSystem(i));for(var p=0,u=h.match(kde)||[];p<u.length;p++){var f=u[p],g=f.length,m=f[0];switch("K"===m&&(m="h"),m){case"E":case"c":l.weekday=X()?R("days."+pt.monthIndex[g],a):r.dateObject[pt.days][S6][pt.monthIndex[g]];break;case"M":case"L":l.month=X()?R("months."+pt.monthIndex[g],a):r.dateObject[pt.month][S6][pt.monthIndex[g]];break;case"a":l.designator=X()?R("dayPeriods",a):R("dayPeriods.format.wide",a);break;case"G":var y=g<=3?"eraAbbr":4===g?"eraNames":"eraNarrow";l.era=X()?R("eras",a):R("eras."+y,r.dateObject);break;case"z":l.timeZone=R("dates.timeZoneNames",r.parserObject)}}}return function(b){return isNaN(b.getDate())?null:n.intDateFormatter(b,l)}},s.intDateFormatter=function(e,t){for(var n="",r=t.pattern.match(pt.dateParseRegex),o=this.getCurrentDateValue(e,t.isIslamic),a=0,l=r;a<l.length;a++){var h=l[a],d=h.length,p=h[0];"K"===p&&(p="h");var u=void 0,f="",g=void 0,m=void 0,y="";switch(p){case"M":case"L":u=o.month,d>2?n+=t.month[u]:g=!0;break;case"E":case"c":n+=t.weekday[Ade[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(g=!0,"d"===p)u=o.date;else if("f"===p){g=!1,m=!0;var b=(f=(f=e[C6[p]]().toString()).substring(0,d)).length;if(d!==b){if(d>3)continue;for(var w=0;w<d-b;w++)f="0"+f.toString()}y+=f}else u=e[C6[p]]();"h"===p&&(u=u%12||12);break;case"y":m=!0,y+=o.year,2===d&&(y=y.substr(y.length-2));break;case"a":var S=e.getHours()<12?"am":"pm";n+=t.designator[S];break;case"G":var I=e.getFullYear()<0?0:1,x=t.era[I];c(x)&&(x=t.era[I?0:1]),n+=x||"";break;case"'":n+="''"===h?"'":h.replace(/'/g,"");break;case"z":var T=e.getTimezoneOffset(),L=d<4?"+H;-H":t.timeZone.hourFormat;L=L.replace(/:/g,t.numMapper.timeSeparator),0===T?n+=t.timeZone.gmtZeroFormat:(m=!0,y=this.getTimeZoneValue(T,L)),y=t.timeZone.gmtFormat.replace(/\{0\}/,y);break;case":":n+=t.numMapper.numberSymbols.timeSeparator;break;case"/":n+=t.dateSeperator;break;case"W":g=!0,u=pt.getWeekOfYear(e);break;default:n+=h}g&&(m=!0,y=this.checkTwodigitNumber(u,d)),m&&(n+=_n.convertValueParts(y,pt.latnParseRegex,t.numMapper.mapper))}return n},s.getCurrentDateValue=function(e,t){return t?Pa.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},s.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},s.getTimeZoneValue=function(e,t){var i=this,r=t.split(";")[e>0?1:0],o=Math.abs(e);return r.replace(/HH?|mm/g,function(a){var l=a.length,h=-1!==a.indexOf("H");return i.checkTwodigitNumber(Math.floor(h?o/60:o%60),l)})},s}(),x6={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},am=["infinity","nan","group","decimal","exponential"],T6=function(){function s(){}return s.numberFormatter=function(e,t,i){var l,n=this,r=Q({},t),o={},a={},h=pt.getDependables(i,e,"",!0),d=h.numericObject;a.numberMapper=X()?Q({},d):_n.getNumberMapper(h.parserObject,_n.getNumberingSystem(i),!0),a.currencySymbol=X()?R("currencySymbol",d):pt.getCurrencySymbol(h.numericObject,r.currency||Wu,t.altSymbol),a.percentSymbol=X()?R("numberSymbols.percentSign",d):a.numberMapper.numberSymbols.percentSign,a.minusSymbol=X()?R("numberSymbols.minusSign",d):a.numberMapper.numberSymbols.minusSign;var p=a.numberMapper.numberSymbols;if(t.format&&!pt.formatRegex.test(t.format))o=pt.customFormat(t.format,a,h.numericObject);else{if(Q(r,pt.getProperNumericSkeleton(t.format||"N")),r.isCurrency="currency"===r.type,r.isPercent="percent"===r.type,X()||(l=pt.getSymbolPattern(r.type,a.numberMapper.numberSystem,h.numericObject,r.isAccount)),r.groupOne=this.checkValueRange(r.maximumSignificantDigits,r.minimumSignificantDigits,!0),this.checkValueRange(r.maximumFractionDigits,r.minimumFractionDigits,!1,!0),Oe(r.fractionDigits)||(r.minimumFractionDigits=r.maximumFractionDigits=r.fractionDigits),Oe(r.useGrouping)&&(r.useGrouping=!0),r.isCurrency&&!X()&&(l=l.replace(/\u00A4/g,pt.defaultCurrency)),X())o.nData=Q({},{},R(r.type+"nData",d)),o.pData=Q({},{},R(r.type+"pData",d)),"currency"===r.type&&t.currency&&pt.replaceBlazorCurrency([o.pData,o.nData],a.currencySymbol,t.currency);else{var u=l.split(";");o.nData=pt.getFormatData(u[1]||"-"+u[0],!0,a.currencySymbol),o.pData=pt.getFormatData(u[0],!1,a.currencySymbol),r.useGrouping&&(r.groupSeparator=p[am[2]],r.groupData=this.getGroupingDetails(u[0]))}if(Oe(r.minimumFractionDigits)&&(r.minimumFractionDigits=o.nData.minimumFraction),Oe(r.maximumFractionDigits)){var g=o.nData.maximumFraction;r.maximumFractionDigits=Oe(g)&&r.isPercent?0:g}var m=r.minimumFractionDigits,y=r.maximumFractionDigits;!Oe(m)&&!Oe(y)&&m>y&&(r.maximumFractionDigits=m)}return Q(o.nData,r),Q(o.pData,r),function(b){return isNaN(b)?p[am[1]]:isFinite(b)?n.intNumberFormatter(b,o,a,t):p[am[0]]}},s.getGroupingDetails=function(e){var t={},i=e.match(pt.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];t.primary=o.length-r-1;var a=n.lastIndexOf(",",r-1);-1!==a&&(t.secondary=r-1-a)}}return t},s.checkValueRange=function(e,t,i,n){var r=n?"f":"s",o=0,a=x6["l"+r],l=x6["m"+r];if(Oe(e)||(this.checkRange(e,a,n),o++),Oe(t)||(this.checkRange(t,l,n),o++),2===o){if(!(e<t))return!0;om(l+"specified must be less than the"+a)}else i&&1===o&&om("Both"+l+"and"+l+"must be present");return!1},s.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&om(t+"value must be within the range"+n[0]+"to"+n[1])},s.intNumberFormatter=function(e,t,i,n){var r;if(!Oe(t.nData.type)){e<0?(e*=-1,r=t.nData):r=0===e&&t.zeroData||t.pData;var o="";if(r.isPercent&&(e*=100),r.groupOne)o=this.processSignificantDigits(e,r.minimumSignificantDigits,r.maximumSignificantDigits);else if(o=this.processFraction(e,r.minimumFractionDigits,r.maximumFractionDigits,n),r.minimumIntegerDigits&&(o=this.processMinimumIntegers(o,r.minimumIntegerDigits)),i.isCustomFormat&&r.minimumFractionDigits<r.maximumFractionDigits&&/\d+\.\d+/.test(o)){for(var a=o.split("."),l=a[1],d=l.length-1;d>=0&&"0"===l[""+d]&&d>=r.minimumFractionDigits;d--)l=l.slice(0,d);o=a[0]+"."+l}return"scientific"===r.type&&(o=(o=e.toExponential(r.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[am[4]])),o=o.replace(".",i.numberMapper.numberSymbols[am[3]]),o="#,###,,;(#,###,,)"===r.format?this.customPivotFormat(parseInt(o)):o,r.useGrouping&&(o=this.groupNumbers(o,r.groupData.primary,r.groupSeparator||",",i.numberMapper.numberSymbols[am[3]]||".",r.groupData.secondary)),o=_n.convertValueParts(o,pt.latnParseRegex,i.numberMapper.mapper),"N/A"===r.nlead?r.nlead:"0"===o&&n&&"0"===n.format?o+r.nend:r.nlead+o+r.nend}},s.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},s.groupNumbers=function(e,t,i,n,r){for(var o=!c(r)&&0!==r,a=e.split(n),l=a[0],h=l.length,d="";h>t;)d=l.slice(h-t,h)+(d.length?i+d:""),h-=t,o&&(t=r,o=!1);return a[0]=l.slice(0,h)+(d.length?i:"")+d,a.join(n)},s.processFraction=function(e,t,i,n){var r=(e+"").split(".")[1],o=r?r.length:0;if(t&&o<t){var a="";if(0!==o){a+=e;for(var l=0;l<t-o;l++)a+="0";return a}return a=e.toFixed(t),e.toFixed(t)}if(!c(i)&&(o>i||0===i))return e.toFixed(i);var h=e+"";return"0"===h[0]&&n&&"###.00"===n.format&&(h=h.slice(1)),h},s.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],r=n.length;if(r<t){for(var o=0;o<t-r;o++)n="0"+n;i[0]=n}return i.join(".")},s.customPivotFormat=function(e){if(e>=5e5){var n=(e/=1e6).toString().split(".")[1];return n&&+n.substring(0,1)>=5?Math.ceil(e).toString():Math.floor(e).toString()}return""},s}(),M6="stand-alone",Fde=/^[0-9]*$/,E6={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},Ode=function(){function s(){}return s.dateParser=function(e,t,i){var n=this,r=pt.getDependables(i,e,t.calendar),o=_n.getCurrentNumericOptions(r.parserObject,_n.getNumberingSystem(i),!1,X()),a={};X()&&t.isServerRendered&&(t=pt.compareBlazorDateFormats(t,e));var d,l=t.format||pt.getResultantPattern(t.skeleton,r.dateObject,t.type,!1,X()?e:""),h="";if(Oe(l))om("Format options or type given must be invalid");else{l=pt.ConvertDateToWeekFormat(l),a={isIslamic:pt.islamicRegex.test(t.calendar),pattern:l,evalposition:{},culture:e};for(var p=l.match(pt.dateParseRegex)||[],u=p.length,f=0,g=0,m=!1,y=o.numericRegex,b=X()?r.parserObject.numbers:_n.getNumberMapper(r.parserObject,_n.getNumberingSystem(i)),w=0;w<u;w++){var S=p[parseInt(w.toString(),10)],I=S.length,x="K"===S[0]?"h":S[0],T=void 0,L=void 0,N=Lde[x],O=2===I?"":"?";switch(m&&(f=g,m=!1),x){case"E":case"c":var _;_=X()?R("days."+pt.monthIndex[I],r.dateObject):r.dateObject[pt.days][M6][pt.monthIndex[I]];var B=_n.reverseObject(_);h+="("+Object.keys(B).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(L=!0,("M"===x||"L"===x)&&I>2){var q;q=X()?R("months."+pt.monthIndex[I],r.dateObject):r.dateObject.months[M6][pt.monthIndex[I]],a[N]=_n.reverseObject(q),h+="("+Object.keys(a[N]).join("|")+")"}else if("f"===x){if(I>3)continue;T=!0,h+="("+y+y+"?"+y+"?)"}else T=!0,h+="("+y+y+O+")";"h"===x&&(a.hour12=!0);break;case"W":h+="("+y+(1===I?"?":"")+y+")";break;case"y":L=T=!0,h+=2===I?"("+y+y+")":"("+y+"{"+I+",})";break;case"a":L=!0;var j=X()?R("dayPeriods",r.dateObject):R("dayPeriods.format.wide",r.dateObject);a[N]=_n.reverseObject(j),h+="("+Object.keys(a[N]).join("|")+")";break;case"G":L=!0;var G=I<=3?"eraAbbr":4===I?"eraNames":"eraNarrow";a[N]=_n.reverseObject(X()?R("eras",r.dateObject):R("eras."+G,r.dateObject)),h+="("+Object.keys(a[N]).join("|")+"?)";break;case"z":L=0!==(new Date).getTimezoneOffset(),a[N]=R("dates.timeZoneNames",r.parserObject);var U=a[N],J=(d=I<4)?"+H;-H":U.hourFormat;J=J.replace(/:/g,b.timeSeparator),h+="("+this.parseTimeZoneRegx(J,U,y)+")?",m=!0,g=d?6:12;break;case"'":h+="("+S.replace(/'/g,"")+")?";break;default:h+="([\\D])"}if(L&&(a.evalposition[""+N]={isNumber:T,pos:w+1+f,hourOnly:d}),w===u-1&&!c(h)){var ye=RegExp;a.parserRegex=new ye("^"+h+"$","i")}}}return function(fe){var ve=n.internalDateParse(fe,a,o);if(c(ve)||!Object.keys(ve).length)return null;if(a.isIslamic){var Te={},Ne=ve.year,Ue=ve.day,Pe=ve.month,rt=Ne?Ne+"":"",Ye=2===rt.length;(!Ne||!Pe||!Ue||Ye)&&(Te=Pa.getHijriDate(new Date)),Ye&&(Ne=parseInt((Te.year+"").slice(0,2)+rt,10));var dt=Pa.toGregorian(Ne||Te.year,Pe||Te.month,Ue||Te.date);ve.year=dt.getFullYear(),ve.month=dt.getMonth()+1,ve.day=dt.getDate()}return n.getDateObject(ve)}},s.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var r=e.year,o=e.designator,a=e.timeZone;Oe(r)||((r+"").length<=2&&(r+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(r));for(var d=0,p=["hour","minute","second","milliseconds","month","day"];d<p.length;d++){var u=p[d],f=e[u];if(Oe(f)&&"day"===u&&i.setDate(1),!Oe(f))if("month"===u){if((f-=1)<0||f>11)return new Date("invalid");var g=i.getDate();i.setDate(1),i[E6[u]](f);var m=new Date(i.getFullYear(),f+1,0).getDate();i.setDate(g<m?g:m)}else{if("day"===u){var y=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(f<1||f>y)return null}i[E6[u]](f)}}if(!Oe(o)){var b=i.getHours();"pm"===o?i.setHours(b+(12===b?0:12)):12===b&&i.setHours(0)}if(!Oe(a)){var w=a-i.getTimezoneOffset();0!==w&&i.setMinutes(i.getMinutes()+w)}return i},s.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),r={hour:0,minute:0,second:0};if(c(n))return null;for(var a=0,l=Object.keys(t.evalposition);a<l.length;a++){var h=l[a],d=t.evalposition[""+h],p=n[d.pos];if(d.isNumber)r[h]=this.internalNumberParser(p,i);else if("timeZone"!==h||Oe(p))p="month"!==h||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?p:p[0].toUpperCase()+p.substring(1).toLowerCase(),r[h]=t[h][p];else{var u=d.pos,f=void 0,g=n[u+1],m=!Oe(g);d.hourOnly?f=60*this.getZoneValue(m,g,n[u+4],i):(f=60*this.getZoneValue(m,g,n[u+7],i),f+=this.getZoneValue(m,n[u+4],n[u+10],i)),c(f)||(r[""+h]=f)}}return t.hour12&&(r.hour12=!0),r},s.internalNumberParser=function(e,t){return e=_n.convertValueParts(e,t.numberParseRegex,t.numericPair),Fde.test(e)?+e:null},s.parseTimeZoneRegx=function(e,t,i){var r,n=t.gmtFormat,o="("+i+")("+i+")";return r=e.replace("+","\\+"),(r=-1!==e.indexOf("HH")?r.replace(/HH|mm/g,"("+o+")"):r.replace(/H|m/g,"("+o+"?)")).split(";").map(function(l){return n.replace("{0}",l)}).join("|")+"|"+t.gmtZeroFormat},s.getZoneValue=function(e,t,i,n){var r=e?t:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return e?-o:o},s}(),zde=new RegExp("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$"),Hde=/,/g,_de=["minusSign","infinity"],jde=function(){function s(){}return s.numberParser=function(e,t,i){var a,n=this,r=pt.getDependables(i,e,"",!0),o={custom:!0};pt.formatRegex.test(t.format)||!t.format?(Q(o,pt.getProperNumericSkeleton(t.format||"N")),o.custom=!1,o.fractionDigits||t.maximumFractionDigits&&(o.maximumFractionDigits=t.maximumFractionDigits)):Q(o,pt.customFormat(t.format,null,null));var h,l=R("numbers",r.parserObject);if(a=_n.getCurrentNumericOptions(r.parserObject,_n.getNumberingSystem(i),!0,X()),o.symbolRegex=_n.getSymbolRegex(Object.keys(a.symbolMatch)),o.infinity=a.symbolNumberSystem[_de[1]],X())o.nData=Q({},{},R(o.type+"nData",l)),o.pData=Q({},{},R(o.type+"pData",l)),"currency"===o.type&&t.currency&&pt.replaceBlazorCurrency([o.pData,o.nData],R("currencySymbol",l),t.currency);else if(h=pt.getSymbolPattern(o.type,a.numberSystem,r.numericObject,o.isAccount)){var d=(h=h.replace(/\u00A4/g,pt.defaultCurrency)).split(";");o.nData=pt.getFormatData(d[1]||"-"+d[0],!0,""),o.pData=pt.getFormatData(d[0],!0,"")}return function(p){return n.getParsedNumber(p,o,a)}},s.getParsedNumber=function(e,t,i){var n,r,o,a,l,h;if(-1!==e.indexOf(t.infinity))return 1/0;e=_n.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=_n.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);var d=e.match(zde);if(c(d))return NaN;a=d[1],o=d[2];var p=d[5];return l=d[6],r=(n=t.custom?a===t.nData.nlead&&l===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==l.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(Hde,""),p&&(o+=p),h=+o,("percent"===t.type||r)&&(h/=100),(t.custom||t.fractionDigits)&&(h=parseFloat(h.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(h=this.convertMaxFracDigits(o,t,h,n)),n&&(h*=-1),h},s.convertMaxFracDigits=function(e,t,i,n){var r=e.split(".");return r[1]&&r[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i},s}(),ju=function(){function s(e){this.ranArray=[],this.boundedEvents={},!c(e)&&(this.context=e)}return s.prototype.on=function(e,t,i,n){if(!c(t)){var r=i||this.context;if(this.notExist(e))return void(this.boundedEvents[""+e]=[{handler:t,context:r}]);c(n)?this.isHandlerPresent(this.boundedEvents[""+e],t)||this.boundedEvents[""+e].push({handler:t,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[""+e].push({handler:t,context:r,id:n}))}},s.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=R(e,this.boundedEvents);if(t){for(var r=0;r<n.length;r++)if(i){if(n[parseInt(r.toString(),10)].id===i){n.splice(r,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===n[parseInt(r.toString(),10)].handler){n.splice(r,1);break}}else delete this.boundedEvents[""+e]}},s.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var o=R(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,t,i,n,0);for(var a=0,l=o;a<l.length;a++){var h=l[a];h.handler.call(h.context,t)}i&&i.call(this,t)}},s.prototype.blazorCallback=function(e,t,i,n,r){var o=this,a=r===e.length-1;if(r<e.length){var l=e[parseInt(r.toString(),10)],h=l.handler.call(l.context,t);if(h&&"function"==typeof h.then){if(!i)return h;h.then(function(d){if(d="string"==typeof d&&o.isJson(d)?JSON.parse(d,o.dateReviver):d,Q(t,t,d,!0),!i||!a)return o.blazorCallback(e,t,i,n,r+1);i.call(l.context,t)}).catch(function(d){n&&n.call(l.context,"string"==typeof d&&o.isJson(d)?JSON.parse(d,o.dateReviver):d)})}else{if(!i||!a)return this.blazorCallback(e,t,i,n,r+1);i.call(l.context,t)}}},s.prototype.dateReviver=function(e,t){return X&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},s.prototype.isJson=function(e){try{JSON.parse(e)}catch{return!1}return!0},s.prototype.destroy=function(){this.boundedEvents=this.context=void 0},s.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},s.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++)if(n[i].handler===t)return!0;return!1},s}(),qu=new ju,rL=!1,Fr={},n0="en-US",Wu="USD",sL=["numericObject","dateObject"],qt=function(){function s(e){e&&(this.culture=e)}return s.prototype.getDateFormat=function(e){return I6.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},Fr)},s.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=Wu),X()&&e&&!e.format&&(e.minimumFractionDigits=0),T6.numberFormatter(this.getCulture(),e||{},Fr)},s.prototype.getDateParser=function(e){return Ode.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},Fr)},s.prototype.getNumberParser=function(e){return X()&&e&&!e.format&&(e.minimumFractionDigits=0),jde.numberParser(this.getCulture(),e||{format:"N"},Fr)},s.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},s.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},s.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},s.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},s.prototype.getDatePattern=function(e,t){return pt.getActualDateTimeFormat(this.getCulture(),e,Fr,t)},s.prototype.getNumberPattern=function(e,t){return pt.getActualNumberFormat(this.getCulture(),e,Fr,t)},s.prototype.getFirstDayOfWeek=function(){return pt.getWeekData(this.getCulture(),Fr)},s.prototype.getCulture=function(){return this.culture||n0},s}();function r0(s,e){var t=pt.getDependables(Fr,s,"",!0)[sL[0]],i=pt.getDependables(Fr,s,"")[sL[1]],n=R("defaultNumberingSystem",t),r=X()?R("numberSymbols",t):R("symbols-numberSystem-"+n,t),o=pt.getSymbolPattern(e||"decimal",n,t,!1);return Q(r,pt.getFormatData(o,!0,"",!0),{dateSeparator:pt.getDateSeparator(i)})}function Zd(s){return pt.getDependables(Fr,"",s,!1)[sL[1]]}var pt,D6=RegExp,k6={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(s){s.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,s.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,s.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var e=/[0-9]/g;s.defaultCurrency="$";var t=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,n={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};s.dateConverterMapper=/dddd|ddd/gi;s.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};s.formatRegex=new D6("(^[ncpae]{1})([0-1]?[0-9]|20)?$","i"),s.currencyFormatRegex=new D6("(^[ca]{1})([0-1]?[0-9]|20)?$","i"),s.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(j,G,Y,U,J){var $,ye=Y||"date";if(J)$=u({skeleton:j},J).format||u({skeleton:"d"},"en-US").format;else{if(-1!==s.basicPatterns.indexOf(j)){if($=R(ye+"Formats."+j,G),"dateTime"===ye){var fe=R("dateFormats."+j,G),ve=R("timeFormats."+j,G);$=$.replace("{1}",fe).replace("{0}",ve)}}else $=R("dateTimeFormats.availableFormats."+j,G);Oe($)&&"yMd"===j&&($="M/d/y")}return $}function h(j,G,Y,U){var J={},$=Y||"gregorian";if(J.parserObject=_n.getMainObject(j,G)||(X()?s.blazorDefaultObject:s.defaultObject),U)J.numericObject=R("numbers",J.parserObject);else{var ye=X()?"dates":"dates.calendars."+$;J.dateObject=R(ye,J.parserObject)}return J}function d(j,G,Y,U){return R(j+"Formats-numberSystem-"+G+(U?".accounting":".standard"),Y)||(U?R(j+"Formats-numberSystem-"+G+".standard",Y):"")}function p(j){var G=j.match(s.dateConverterMapper);return G&&X()?j.replace(s.dateConverterMapper,3===G[0].length?"EEE":"EEEE"):j}function u(j,G){var Y=j.format||j.skeleton,U=R((G||"en-US")+"."+Y,k6);return U||(U=R("en-US."+Y,k6)),U&&(U=p(U),j.format=U.replace(/tt/,"a")),j}function f(j){var G=j.match(s.formatRegex),Y={},U=G[1].toUpperCase();return Y.isAccount="A"===U,Y.type=s.patternMatcher[U],j.length>1&&(Y.fractionDigits=parseInt(G[2],10)),Y}function g(j,G,Y,U){var J=U?{}:{nlead:"",nend:""},$=j.match(s.customRegex);if($){U||(J.nlead=m($[1],Y),J.nend=m($[10],Y),J.groupPattern=$[4]);var ye=$[7];if(ye&&G){var fe=ye.match(e);J.minimumFraction=c(fe)?0:fe.length,J.maximumFraction=ye.length-1}}return J}function m(j,G){return j?j.replace(s.defaultCurrency,G):""}function y(j,G,Y){return R("currencies."+G+(Y?"."+Y:".symbol"),j)||R("currencies."+G+".symbol-alt-narrow",j)||"$"}function w(j,G,Y){var U={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},J=j.match(s.customRegex);if(c(J)||""===J[5]&&"N/A"!==j)return U.type=void 0,U;U.nlead=J[1],U.nend=J[10];var $=J[6],ye=!!$.match(/\ $/g),fe=-1!==$.replace(/\ $/g,"").indexOf(" ");U.useGrouping=-1!==$.indexOf(",")||fe,$=$.replace(/,/g,"");var ve=J[7];if(-1!==$.indexOf("0")&&(U.minimumIntegerDigits=$.length-$.indexOf("0")),c(ve)||(U.minimumFractionDigits=ve.lastIndexOf("0"),U.maximumFractionDigits=ve.lastIndexOf("#"),-1===U.minimumFractionDigits&&(U.minimumFractionDigits=0),(-1===U.maximumFractionDigits||U.maximumFractionDigits<U.minimumFractionDigits)&&(U.maximumFractionDigits=U.minimumFractionDigits)),c(G)?Q(U,S([U.nlead,U.nend],"%","%")):(G.isCustomFormat=!0,Q(U,S([U.nlead,U.nend],"$",G.currencySymbol)),U.isCurrency||Q(U,S([U.nlead,U.nend],"%",G.percentSymbol))),!c(Y)){var Te=d(U.type,G.numberMapper.numberSystem,Y,!1);U.useGrouping&&(U.groupSeparator=fe?" ":G.numberMapper.numberSymbols[t[2]],U.groupData=T6.getGroupingDetails(Te.split(";")[0])),U.nlead=U.nlead.replace(/'/g,""),U.nend=ye?" "+U.nend.replace(/'/g,""):U.nend.replace(/'/g,"")}return U}function S(j,G,Y){for(var U={nlead:j[0],nend:j[1]},J=0;J<2;J++){var $=j[parseInt(J.toString(),10)],ye=$.indexOf(G);if(-1!==ye&&(ye<$.indexOf("'")||ye>$.lastIndexOf("'"))){U[a[J]]=$.substr(0,ye)+Y+$.substr(ye+1),U[a[G]]=!0,U.type=U.isCurrency?"currency":"percent";break}}return U}function N(j,G,Y){j+=".";for(var U=0;U<G;U++)j+="0";if(G<Y)for(var J=Y-G,$=0;$<J;$++)j+="#";return j}function O(j,G){for(var Y=j.split("."),U="",J=0;J<G;J++)U+="0";return Y[1]?U+"."+Y[1]:U}function _(j){var G=j.split("."),Y=G[0],U=3-Y.length%3;j="";for(var $=(Y=(U&&1===U?"#":2===U?"##":"")+Y).length-1;$>0;$-=3)j=","+Y[$-2]+Y[$-1]+Y[parseInt($.toString(),10)]+j;return j=j.slice(1),G[1]?j+"."+G[1]:j}s.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,s.basicPatterns=["short","medium","long","full"],s.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},s.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},s.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},s.month="months",s.days="days",s.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},s.getResultantPattern=l,s.getDependables=h,s.getSymbolPattern=d,s.ConvertDateToWeekFormat=p,s.compareBlazorDateFormats=u,s.getProperNumericSkeleton=f,s.getFormatData=g,s.changeCurrencySymbol=m,s.getCurrencySymbol=y,s.customFormat=function b(j,G,Y){for(var U={},J=j.split(";"),$=["pData","nData","zeroData"],ye=0;ye<J.length;ye++)U[$[ye]]=w(J[ye],G,Y);return c(U.nData)&&(U.nData=Q({},U.pData),U.nData.nlead=c(G)?"-"+U.nData.nlead:G.minusSymbol+U.nData.nlead),U},s.customNumberFormat=w,s.isCurrencyPercent=S,s.getDateSeparator=function I(j){var G=(R("dateFormats.short",j)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return G?G[1]:"/"},s.getActualDateTimeFormat=function x(j,G,Y,U){var J=h(Y,j,G.calendar);X()&&(G=u(G,j));var $=G.format||l(G.skeleton,J.dateObject,G.type);if(U){if(-1!==($=$.replace(i,function(Pe){return n[Pe]})).indexOf("z")){var ye=$.match(/z/g).length,fe=void 0,ve={timeZone:{}};ve.numMapper=_n.getNumberMapper(J.parserObject,_n.getNumberingSystem(Y)),ve.timeZone=R("dates.timeZoneNames",J.parserObject);var Ne=(new Date).getTimezoneOffset(),Ue=ye<4?"+H;-H":ve.timeZone.hourFormat;Ue=Ue.replace(/:/g,ve.numMapper.timeSeparator),0===Ne?fe=ve.timeZone.gmtZeroFormat:(fe=I6.getTimeZoneValue(Ne,Ue),fe=ve.timeZone.gmtFormat.replace(/\{0\}/,fe)),$=$.replace(/[z]+/,'"'+fe+'"')}$=$.replace(/ $/,"")}return $},s.getActualNumberFormat=function L(j,G,Y,U){var fe,dt,J=h(Y,j,"",!0),$={custom:!0},ye=J.numericObject,ve={},Te=(G.format||"").match(s.currencyFormatRegex),Ne=s.formatRegex.test(G.format)?f(G.format||"N"):{},Ue={};if(Te){Ue.numberMapper=X()?Q({},J.numericObject):_n.getNumberMapper(J.parserObject,_n.getNumberingSystem(Y),!0);var Pe=X()?R("currencySymbol",J.numericObject):y(J.numericObject,G.currency||Wu,G.altSymbol),rt=d("currency",Ue.numberMapper.numberSystem,J.numericObject,/a/i.test(G.format)),Ye=(rt=rt.replace(/\u00A4/g,Pe)).split(";");ve.hasNegativePattern=!!X()||Ye.length>1,ve.nData=X()?R(Ne.type+"nData",ye):g(Ye[1]||"-"+Ye[0],!0,Pe),ve.pData=X()?R(Ne.type+"pData",ye):g(Ye[0],!1,Pe),!Te[2]&&!G.minimumFractionDigits&&!G.maximumFractionDigits&&(fe=g(rt.split(";")[0],!0,"",!0).minimumFraction)}if(s.formatRegex.test(G.format)||!G.format){if(Q($,f(G.format||"N")),$.custom=!1,dt="###0",($.fractionDigits||G.minimumFractionDigits||G.maximumFractionDigits||fe)&&($.fractionDigits&&(G.minimumFractionDigits=G.maximumFractionDigits=$.fractionDigits),dt=N(dt,fe||$.fractionDigits||G.minimumFractionDigits||0,G.maximumFractionDigits||0)),G.minimumIntegerDigits&&(dt=O(dt,G.minimumIntegerDigits)),G.useGrouping&&(dt=_(dt)),"currency"===$.type||$.type&&X()){X()&&"currency"!==$.type&&(ve.pData=R($.type+"pData",ye),ve.nData=R($.type+"nData",ye));var te=dt;dt=ve.pData.nlead+te+ve.pData.nend,(ve.hasNegativePattern||X())&&(dt+=";"+ve.nData.nlead+te+ve.nData.nend)}"percent"===$.type&&!X()&&(dt+=" %")}else dt=G.format.replace(/'/g,'"');return Object.keys(Ue).length>0&&(dt=U?dt:function T(j,G){if(-1!==j.indexOf(",")){var Y=j.split(",");j=Y[0]+R("numberMapper.numberSymbols.group",G)+Y[1].replace(".",R("numberMapper.numberSymbols.decimal",G))}else j=j.replace(".",R("numberMapper.numberSymbols.decimal",G));return j}(dt,Ue)),dt},s.fractionDigitsPattern=N,s.minimumIntegerPattern=O,s.groupingPattern=_,s.getWeekData=function B(j,G){var Y="sun",U=R("supplemental.weekData.firstDay",G),J=j;return/en-/.test(J)&&(J=J.slice(3)),J=J.slice(0,2).toUpperCase()+J.substr(2),U&&(Y=U[""+J]||U[J.slice(0,2)]||"sun"),o[""+Y]},s.replaceBlazorCurrency=function q(j,G,Y){var U=function Dde(s){return R(s||"",Ede)}(Y);if(G!==U)for(var J=0,$=j;J<$.length;J++){var ye=$[J];ye.nend=ye.nend.replace(G,U),ye.nlead=ye.nlead.replace(G,U)}},s.getWeekOfYear=function W(j){var U,G=new Date(j.getFullYear(),0,1),Y=G.getDay();Y=Y>=0?Y:Y+7;var J=Math.floor((j.getTime()-G.getTime()-6e4*(j.getTimezoneOffset()-G.getTimezoneOffset()))/864e5)+1;if(Y<4){if((U=Math.floor((J+Y-1)/7)+1)>52){var ye=new Date(j.getFullYear()+1,0,1).getDay();U=(ye=ye>=0?ye:ye+7)<4?1:53}}else U=Math.floor((J+Y-1)/7);return U}}(pt||(pt={}));var A6=/^(.*?):[ \t]*([^\r\n]*)$/gm,L6="GET",bl=function(){function s(e,t,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():L6,this.mode=!!c(i)||i):"object"==typeof e&&(this.options=e,zn(this,this.options)),this.type=this.type?this.type.toUpperCase():L6,this.contentType=void 0!==this.contentType?this.contentType:n}return s.prototype.send=function(e){var t=this;this.data=c(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise(function(r,o){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(r,o)},c(t.onLoad)||(t.httpRequest.onload=t.onLoad),c(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),c(t.onAbort)||(t.httpRequest.onabort=t.onAbort),c(t.onError)||(t.httpRequest.onerror=t.onError),c(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),!c(t.data)&&null!==t.contentType&&t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(c(t.data)?null:t.data)})},s.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},s.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},s.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch{}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},s.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=A6.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=A6.exec(this.httpRequest.getAllResponseHeaders());return c(i=t[e.toLowerCase()])?null:i},s}(),Wde=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,Ude=/msie|trident/i,Gde=/Trident\/7\./,Yde=/(ipad|iphone|ipod touch)/i,Qde=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,Xde=/android/i,Zde=/trident|windows phone|edge/i,Kde=/(version)[ /]([\w.]+)/i,oL={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};typeof window<"u"&&(window.browserDetails=window.browserDetails||{});var E=function(){function s(){}return s.extractBrowserDetail=function(){for(var e={culture:{}},i=[],n=0,r=Object.keys(oL);n<r.length;n++)if(i=s.userAgent.match(oL[""+r[n]])){if(e.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),e.name="crios"===i[1].toLowerCase()?"chrome":e.name,e.version=i[2],e.culture.name=e.culture.language=navigator.language,s.userAgent.match(Gde)){e.name="msie";break}var a=s.userAgent.match(Kde);"safari"===e.name&&a&&(e.version=a[2]);break}return e},s.getEvent=function(e){var t={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return s.isPointer?t[""+e].isPointer:s.isTouch?t[""+e].isTouch+(s.isDevice?"":" "+t[""+e].isDevice):t[""+e].isDevice},s.getTouchStartEvent=function(){return s.getEvent("start")},s.getTouchEndEvent=function(){return s.getEvent("end")},s.getTouchMoveEvent=function(){return s.getEvent("move")},s.getTouchCancelEvent=function(){return s.getEvent("cancel")},s.isSafari=function(){return s.isDevice&&s.isIos&&s.isTouch&&typeof window<"u"&&-1===window.navigator.userAgent.toLowerCase().indexOf("iphone")&&window.navigator.userAgent.toLowerCase().indexOf("safari")>-1},s.getValue=function(e,t){var i=typeof window<"u"?window.browserDetails:{};return typeof navigator<"u"&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===s.isTouch&&!oL.CHROME.test(navigator.userAgent)&&(i.isIos=!0,i.isDevice=!0,i.isTouch=!0,i.isPointer=!0),typeof i[""+e]>"u"?i[""+e]=t.test(s.userAgent):i[""+e]},Object.defineProperty(s,"userAgent",{get:function(){return s.uA},set:function(e){s.uA=e,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(s,"info",{get:function(){return Oe(window.browserDetails.info)?window.browserDetails.info=s.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isIE",{get:function(){return s.getValue("isIE",Ude)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isTouch",{get:function(){return Oe(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isPointer",{get:function(){return Oe(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isMSPointer",{get:function(){return Oe(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isDevice",{get:function(){return s.getValue("isDevice",Wde)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isIos",{get:function(){return s.getValue("isIos",Yde)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isIos7",{get:function(){return s.getValue("isIos7",Qde)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isAndroid",{get:function(){return s.getValue("isAndroid",Xde)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isWebView",{get:function(){return Oe(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!(Oe(window.cordova)&&Oe(window.PhoneGap)&&Oe(window.phonegap)&&"object"!==window.forge)),window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isWindows",{get:function(){return s.getValue("isWindows",Zde)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"touchStartEvent",{get:function(){return Oe(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=s.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(s,"touchMoveEvent",{get:function(){return Oe(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=s.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(s,"touchEndEvent",{get:function(){return Oe(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=s.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(s,"touchCancelEvent",{get:function(){return Oe(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=s.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),s.uA=typeof navigator<"u"?navigator.userAgent:"",s}(),C=function(){function s(){}return s.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},s.add=function(e,t,i,n,r){var a,o=s.addOrGetEventData(e);a=r?function Xd(s,e){var t;return function(){var i=this,n=arguments;clearTimeout(t),t=setTimeout(function(){return t=null,s.apply(i,n)},e)}}(i,r):i,n&&(a=a.bind(n));for(var l=t.split(" "),h=0;h<l.length;h++)o.push({name:l[parseInt(h.toString(),10)],listener:i,debounce:a}),E.isIE?e.addEventListener(l[parseInt(h.toString(),10)],a):e.addEventListener(l[parseInt(h.toString(),10)],a,{passive:!1});return a},s.remove=function(e,t,i){for(var n=s.addOrGetEventData(e),r=t.split(" "),o=function(l){var d,h=-1;n&&0!==n.length&&n.some(function(p,u){return p.name===r[parseInt(l.toString(),10)]&&p.listener===i&&(h=u,d=p.debounce,!0)}),-1!==h&&n.splice(h,1),d&&e.removeEventListener(r[parseInt(l.toString(),10)],d)},a=0;a<r.length;a++)o(a)},s.clearEvents=function(e){var t,i;i=Q([],i,t=s.addOrGetEventData(e));for(var n=0;n<i.length;n++)e.removeEventListener(i[parseInt(n.toString(),10)].name,i[parseInt(n.toString(),10)].debounce),t.shift()},s.trigger=function(e,t,i){for(var r=0,o=s.addOrGetEventData(e);r<o.length;r++){var a=o[r];a.name===t&&a.debounce.call(this,i)}},s}(),Jde=/^svg|^path|^g/;function F(s,e){var t=Jde.test(s)?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s);return typeof e>"u"||(t.innerHTML=e.innerHTML?e.innerHTML:"",void 0!==e.className&&(t.className=e.className),void 0!==e.id&&(t.id=e.id),void 0!==e.styles&&t.setAttribute("style",e.styles),void 0!==e.attrs&&re(t,e.attrs)),t}function M(s,e){for(var t=V6(e),i=RegExp,n=0,r=s;n<r.length;n++)for(var o=r[n],a=0,l=t;a<l.length;a++){var h=l[a];if(Va(o)){var d=R("attributes.className",o);c(d)?ke("attributes.className",h,o):new i("\\b"+h+"\\b","i").test(d)||ke("attributes.className",d+" "+h,o)}else o.classList.contains(h)||o.classList.add(h)}return s}function A(s,e){for(var t=V6(e),i=0,n=s;i<n.length;i++){var r=n[i],o=Va(r);if(o?R("attributes.className",r):""!==r.className)for(var l=0,h=t;l<h.length;l++){var d=h[l];if(o){var u=R("attributes.className",r).split(" "),f=u.indexOf(d);-1!==f&&u.splice(f,1),ke("attributes.className",u.join(" "),r)}else r.classList.remove(d)}}return s}function V6(s){var e=[];return"string"==typeof s?e.push(s):e=s,e}function wn(s){return""===s.style.visibility&&s.offsetWidth>0}function Ii(s,e,t){for(var i=document.createDocumentFragment(),n=0,r=s;n<r.length;n++)i.appendChild(r[n]);return e.insertBefore(i,e.firstElementChild),t&&P6(e),s}function Le(s,e,t){var i=document.createDocumentFragment();if(s instanceof NodeList)for(;s.length>0;)i.appendChild(s[0]);else for(var n=0,r=s;n<r.length;n++)i.appendChild(r[n]);return e.appendChild(i),t&&P6(e),s}function P6(s){s.querySelectorAll("script").forEach(function(t){var i=document.createElement("script");i.text=t.innerHTML,document.head.appendChild(i),z(i)})}function z(s){var e=s.parentNode;if(e)return e.removeChild(s)}function le(s){var e=s.parentNode;C.clearEvents(s),e.removeChild(s)}function re(s,e){for(var i=s,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(Va(i)){var a=o;"tabindex"===o&&(a="tabIndex"),i.attributes[""+a]=e[""+o]}else i.setAttribute(o,e[""+o])}return i}function H(s,e,t){return void 0===e&&(e=document),s=N6(s),e.querySelector(s)}function me(s,e,t){return void 0===e&&(e=document),s=N6(s),e.querySelectorAll(s)}function N6(s){var e=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(s.match(/#[0-9]/g)||s.match(e)){for(var t=s.split(","),i=0;i<t.length;i++){for(var n=t[parseInt(i.toString(),10)].split(" "),r=0;r<n.length;r++)if(n[parseInt(r.toString(),10)].indexOf("#")>-1&&!n[parseInt(r.toString(),10)].match(/\[.*\]/)){var o=n[parseInt(r.toString(),10)].split("#");if(o[1].match(/^\d/)||o[1].match(e)){var a=n[parseInt(r.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",n[parseInt(r.toString(),10)]=a.join(".")}}t[parseInt(i.toString(),10)]=n.join(" ")}return t.join(",")}return s}function k(s,e){var t=s;if("function"==typeof t.closest)return t.closest(e);for(;t&&1===t.nodeType;){if(Uu(t,e))return t;t=t.parentNode}return null}function ge(s,e){void 0!==e&&Object.keys(e).forEach(function(t){s.style[t]=e[t]})}function ze(s,e,t){M([s],e),A([s],t)}function Uu(s,e){var t=s.matches||s.msMatchesSelector||s.webkitMatchesSelector;return t?t.call(s,e):-1!==[].indexOf.call(document.querySelectorAll(e),s)}var $de=new RegExp("]"),Qh=function(){function s(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new ju(this),Oe(t)||(this.element="string"==typeof t?document.querySelector(t):t,c(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),Oe(e)||this.setProperties(e,!0),this.isDestroyed=!1}return s.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,zn(this,e),!0!==t?(zn(this.changedProperties,e),this.dataBind()):X()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},s.callChildDataBind=function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(t[""+o]instanceof Array)for(var a=0,l=t[""+o];a<l.length;a++){var h=l[a];void 0!==h.dataBind&&h.dataBind()}else t[""+o].dataBind()}},s.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},s.prototype.dataBind=function(){if(s.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var e=this.isProtectedOnChange,t=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(t,i),this.isProtectedOnChange=e}},s.prototype.serverDataBind=function(e){if(X()){Q(this.bulkChanges,{},e=e||{},!0);var t="sfBlazor";this.allowServerDataBinding&&window[""+t].updateModel&&(window[""+t].updateModel(this),this.bulkChanges={})}},s.prototype.saveChanges=function(e,t,i){if(X()){var n={};n[""+e]=t,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.finalUpdate(),this.finalUpdate=function Ide(s){var e,t=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(t);var n="ej2"+function Tde(s){for(var e="",t=0;t<5;t++)e+=(t?",":"")+s[parseInt(t.toString(),10)];return e}(t),r=function(o){o.source===window&&"string"==typeof o.data&&o.data.length<=32&&o.data===n&&(s(),e())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),e=function(){window.removeEventListener("message",r),s=r=n=void 0}}(this.dataBind.bind(this)))},s.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},s.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},s.prototype.trigger=function(e,t,i,n){var r=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(e,t,i,n);if($de.test(e)){var l=R(e,this);if(l)if(window.Blazor){var d=l.call(this,t);d&&"function"==typeof d.then?i?d.then(function(p){i&&(p="string"==typeof p&&r.modelObserver.isJson(p)?JSON.parse(p):p,i.call(r,p))}).catch(function(p){n&&(p="string"==typeof p&&r.modelObserver.isJson(p)?JSON.parse(p):p,n.call(r,p))}):a=d:i&&i.call(this,t)}else l.call(this,t),i&&i.call(this,t);else i&&i.call(this,t)}return this.isProtectedOnChange=o,a}},s.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();M([this.element],["e-lib",e]),c(this.element.ej2_instances)?ke("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},s.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(t){return t!==e}),A([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&A([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},s}();function c1(s,e,t,i){return(!s.properties.hasOwnProperty(e)||!(s.properties[e]instanceof i))&&(s.properties[""+e]=h1(i,[s,e,t])),s.properties[""+e]}function s0(s,e,t,i,n,r){for(var o=[],a=t?t.length:0,l=0;l<a;l++){var h=i;if(r&&(h=i(t[parseInt(l.toString(),10)],s)),n){var d=h1(h,[s,e,{},!0]);d.setProperties(t[parseInt(l.toString(),10)],!0),o.push(d)}else o.push(h1(h,[s,e,t[parseInt(l.toString(),10)],!1]))}return o}function F6(s,e){return function(){return this.properties.hasOwnProperty(e)||(this.properties[""+e]=s),this.properties[""+e]}}function epe(s,e){return function(t){if(this.properties[""+e]!==t){var i=this.properties.hasOwnProperty(e)?this.properties[e]:s;this.saveChanges(e,t,i),this.properties[""+e]=t}}}function tpe(s,e,t){return function(){return c1(this,e,s,t)}}function ipe(s,e,t){return function(i){c1(this,e,s,t).setProperties(i)}}function spe(s,e,t){return function(){var i=this;if(!this.properties.hasOwnProperty(e)){var n=s0(this,e,s,t,!1);this.properties[""+e]=n}var r=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!this.properties[e].hasOwnProperty("push")&&!r&&["push","pop"].forEach(function(o){var a={value:hpe(o,e,0,i.properties[""+e]).bind(i),configurable:!0};Object.defineProperty(i.properties[""+e],o,a)}),this.properties[e].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+e],"isComplexArray",{value:!0}),this.properties[""+e]}}function ope(s,e,t){return function(i){this.isComplexArraySetter=!0;var n=s0(this,e,s,t,!1),r=s0(this,e,i,t,!0);this.isComplexArraySetter=!1,this.saveChanges(e,r,n),this.properties[""+e]=r}}function hpe(s,e,t,i){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=this.propName?this.getParentKey()+"."+e+"-":e+"-";switch(s){case"push":for(var a=0;a<n.length;a++){Array.prototype[""+s].apply(i,[n[parseInt(a.toString(),10)]]);var l=R6(o+(i.length-1),n[parseInt(a.toString(),10)],!this.controlParent,s);this.serverDataBind(l,n[parseInt(a.toString(),10)],!1,s)}break;case"pop":Array.prototype[""+s].apply(i);var h=R6(o+i.length,null,!this.controlParent,s);this.serverDataBind(h,{ejsAction:"pop"},!1,s)}return i}}function R6(s,e,t,i){var n=s;return t&&((n={})[""+s]=e,e&&"object"==typeof e)&&(n[""+s].ejsAction=i),n}function v(s){return function(e,t){var i={set:epe(s,t),get:F6(s,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),lm(e,t,"prop",s)}}function Fe(s,e){return function(t,i){var n={set:ipe(s,i,e),get:tpe(s,i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),lm(t,i,"complexProp",s,e)}}function Sn(s,e){return function(t,i){var n={set:ope(s,i,e),get:spe(s,i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),lm(t,i,"colProp",s,e)}}function V(){return function(s,e){var t={set:function(i){var n=this.properties[""+e];if(n!==i){var r=B6(this,e);!1===Oe(n)&&r.context.removeEventListener(r.prefix,n),r.context.addEventListener(r.prefix,i),this.properties[""+e]=i}},get:F6(void 0,e),enumerable:!0,configurable:!0};Object.defineProperty(s,e,t),lm(s,e,"event")}}function et(s){}function lm(s,e,t,i,n){Oe(s.propList)&&(s.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),s.propList[t+"s"].push({propertyName:e,defaultValue:i,type:n}),s.propList[t+"Names"].push(e)}function B6(s,e){if(!1===s.hasOwnProperty("parentObj"))return{context:s,prefix:e};var t=R("propName",s);return t&&(e=t+"-"+e),B6(R("parentObj",s),e)}var ppe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Kd=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Gi=function(s){function e(i){var n=s.call(this,i,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var t;return ppe(e,s),t=e,e.prototype.animate=function(i,n){var r=this.getModel(n=n||{});if("string"==typeof i)for(var a=0,l=Array.prototype.slice.call(me(i,document));a<l.length;a++)r.element=l[a],t.delayAnimation(r);else r.element=i,t.delayAnimation(r)},e.stop=function(i,n){i.style.animation="",i.removeAttribute("e-animate");var r=i.getAttribute("e-animation-id");if(r){var o=parseInt(r,10);cancelAnimationFrame(o),i.removeAttribute("e-animation-id")}n&&n.end&&n.end.call(this,n)},e.delayAnimation=function(i){"Disable"===j6?(i.begin&&i.begin.call(this,i),i.end&&i.end.call(this,i)):i.delay?setTimeout(function(){t.applyAnimation(i)},i.delay):t.applyAnimation(i)},e.applyAnimation=function(i){var n=this;i.timeStamp=0;var r=0,o=0,a=0,l=i.duration;i.element.setAttribute("e-animate","true");var h=function(d){try{d?(i.timeStamp=d+i.timeStamp-(a=0===a?d:a),a=d,!r&&i.begin&&i.begin.call(n,i),r+=1,i.timeStamp<l&&i.timeStamp+i.timeStamp/r<l&&i.element.getAttribute("e-animate")?(i.element.style.animation=i.name+" "+i.duration+"ms "+i.timingFunction,i.progress&&i.progress.call(n,i),requestAnimationFrame(h)):(cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.element.removeAttribute("e-animate"),i.element.style.animation="",i.end&&i.end.call(n,i))):(o=requestAnimationFrame(h),i.element.setAttribute("e-animation-id",o.toString()))}catch(u){cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.fail&&i.fail.call(n,u)}};h()},e.prototype.getModel=function(i){return{name:i.name||this.name,delay:i.delay||this.delay,duration:void 0!==i.duration?i.duration:this.duration,begin:i.begin||this.begin,end:i.end||this.end,fail:i.fail||this.fail,progress:i.progress||this.progress,timingFunction:this.easing[i.timingFunction]?this.easing[i.timingFunction]:i.timingFunction||this.easing[this.timingFunction]}},e.prototype.onPropertyChanged=function(i,n){},e.prototype.getModuleName=function(){return"animation"},e.prototype.destroy=function(){},Kd([v("FadeIn")],e.prototype,"name",void 0),Kd([v(400)],e.prototype,"duration",void 0),Kd([v("ease")],e.prototype,"timingFunction",void 0),Kd([v(0)],e.prototype,"delay",void 0),Kd([V()],e.prototype,"progress",void 0),Kd([V()],e.prototype,"begin",void 0),Kd([V()],e.prototype,"end",void 0),Kd([V()],e.prototype,"fail",void 0),t=Kd([et],e)}(Qh);function zi(s,e,t){var i=function cpe(s){return{selector:s&&s.selector?s.selector:null,ignore:s&&s.ignore?s.ignore:null,rippleFlag:s&&s.rippleFlag,isCenterRipple:s&&s.isCenterRipple,duration:s&&s.duration?s.duration:350}}(e);return!1===i.rippleFlag||void 0===i.rippleFlag&&!wl?function(){}:(s.setAttribute("data-ripple","true"),C.add(s,"mousedown",z6,{parent:s,rippleOptions:i}),C.add(s,"mouseup",H6,{parent:s,rippleOptions:i,done:t}),C.add(s,"mouseleave",hm,{parent:s,rippleOptions:i}),E.isPointer&&C.add(s,"transitionend",hm,{parent:s,rippleOptions:i}),function(){s.removeAttribute("data-ripple"),C.remove(s,"mousedown",z6),C.remove(s,"mouseup",H6),C.remove(s,"mouseleave",hm),C.remove(s,"transitionend",hm)})}function z6(s){var e=s.target,t=this.rippleOptions.selector,i=t?k(e,t):e;if(!(!i||this.rippleOptions&&k(e,this.rippleOptions.ignore))){var n=i.getBoundingClientRect(),r=s.pageX-document.body.scrollLeft,o=s.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(r-n.left),Math.abs(r-n.right)),l=Math.max(Math.abs(o-n.top),Math.abs(o-n.bottom)),h=Math.sqrt(a*a+l*l),d=2*h+"px",p=r-n.left-h,u=o-n.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(p=0,u=0,d="100%"),i.classList.add("e-ripple");var m=F("div",{className:"e-ripple-element",styles:"width: "+d+";height: "+d+";left: "+p+"px;top: "+u+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(m),window.getComputedStyle(m).getPropertyValue("opacity"),m.style.transform="scale(1)",i!==this.parent&&C.add(i,"mouseleave",hm,{parent:this.parent,rippleOptions:this.rippleOptions})}}function H6(s){_6(s,this)}function hm(s){_6(s,this)}function _6(s,e){var t=e.rippleOptions.duration,i=s.target,n=e.rippleOptions.selector,r=n?k(i,n):i;if(r&&(!r||-1!==r.className.indexOf("e-ripple"))){var o=me(".e-ripple-element",r),a=o[o.length-1];a&&(a.style.opacity="0.5"),e.parent!==r&&C.remove(r,"mouseleave",hm),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),r.getElementsByClassName("e-ripple-element").length||r.classList.remove("e-ripple"),e.done&&e.done(s)},t)}}var aL,wl=!1,j6="",fpe=function(){function s(e){this.loadedModules=[],this.parent=e}return s.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var r=e[parseInt(n.toString(),10)],o=0,a=t;o<a.length;o++){var l=a[o],h=r.member;if(l&&l.prototype.getModuleName()===r.member&&!this.isModuleLoaded(h)){var d=h1(l,r.args),p=this.getMemberName(h);ke(p,r.isProperty?l:d,this.parent);var u=r;u.member=p,this.loadedModules.push(u)}}}else this.clean()},s.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||R(i.member,this.parent).destroy()}this.loadedModules=[]},s.prototype.clearUnusedModule=function(e){for(var t=this,i=e.map(function(l){return t.getMemberName(l.member)}),r=0,o=this.loadedModules.filter(function(l){return-1===i.indexOf(l.member)});r<o.length;r++){var a=o[r];a.isProperty||R(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),d1(this.parent,a.member)}},s.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},s.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++)if(i[t].member===this.getMemberName(e))return!0;return!1},s}(),ce=function(){function s(e,t,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=R("callChildDataBind",Qh),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=n,this.setProperties(i,!0)}return s.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[""+t]=e:delete this.parentObj.childChangedProperties[""+t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},s.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},s.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},s.prototype.setProperties=function(e,t){!0===t?(zn(this,e),this.updateChange(!1,this.propName),this.clearChanges()):zn(this,e)},s.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(ke(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),ke(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},s.prototype.saveChanges=function(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},s.prototype.serverDataBind=function(e,t,i,n){if(X()&&!this.parentObj.isComplexArraySetter){var r,o={},a=i?this.getParentKey(!0)+"."+e:e;if(-1!==a.indexOf(".")){var l=a.split(".");r=o;for(var h=0;h<l.length;h++){var d=h===l.length-1;r[l[parseInt(h.toString(),10)]]=d?t:{},r=d?r:r[l[parseInt(h.toString(),10)]]}}else o[""+a]={},r=o[""+a],o[""+a][""+e]=t;this.isParentArray&&(r.ejsAction=n||"none"),this.controlParent.serverDataBind(o)}},s.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,i+=t=-1!==t?"-"+t:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},s}(),gpe=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","inplaceeditor","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","slider","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],q6=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],W6=function(){function s(e){var t;this.isValidated=!1,this.isLicensed=!0,this.version="22",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats|essentialstudio/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion license key is invalid.</span>",invalidKey:"<span>The included Syncfusion license key is invalid.</span>"},this.manager=(t=null,{setKey:function i(r){t=r},getKey:function n(){return t}}),this.npxManager={getKey:function i(){return"npxKeyReplace"}},this.manager.setKey(e)}return s.prototype.validate=function(){if(!this.isValidated&&sm&&!R(u1(q6),sm)&&!R("Blazor",sm)){var i=void 0,n=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var r=this.getInfoFromKey();if(r&&r.length)for(var o=0,a=r;o<a.length;o++){var l=a[o];if(!this.platform.test(l.platform)||l.invalidPlatform)i=this.errors.platformMismatched;else if(-1===l.version.indexOf(this.version))i=(i=(i=this.errors.versionMismatched).replace("##LicenseVersion",l.version)).replace("##Requireversion",this.version+".x");else if(l.expiryDate){var h=new Date(l.expiryDate),d=new Date;if(!(h!==d&&h<d))break;i=this.errors.trailExpired}}else i=this.errors.invalidKey}else{var p=R(u1([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),sm);n=R(u1([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),sm),i=p&&""!==p?p:this.errors.noLicense}if(i&&typeof document<"u"&&!c(document)){var u=F("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+i+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(aL=n&&""!==n?n:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjI=")+">Claim your free account</a>"});u.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(u),this.isLicensed=!1}this.isValidated=!0,ke(u1(q6),this.isValidated,sm)}return this.isLicensed},s.prototype.getDecryptedData=function(e){try{return atob(e)}catch{return""}},s.prototype.getInfoFromKey=function(){try{var e="",t=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],r=!1,o=!1;this.manager.getKey()?e=this.manager.getKey():(o=!0,e=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var a=e.split(";"),l=0,h=a;l<h.length;l++){var p=this.getDecryptedData(h[l]);if(p){var u=0,f="";if(o){for(var y=p[p.length-1],b=[],g=0;g<p.length;g++)b[parseInt(g.toString(),10)]=p[parseInt(g.toString(),10)].charCodeAt(0)-y.charCodeAt(0);for(g=0;g<b.length;g++)f+=String.fromCharCode(b[parseInt(g.toString(),10)])}else for(g=0;g<p.length;g++,u++){u===t.length&&(u=0);var m=p.charCodeAt(g);f+=String.fromCharCode(m^t[parseInt(u.toString(),10)]>>16)}this.platform.test(f)?(i=f.split(";"),r=!1,i.length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):f&&f.split(";").length>3&&(r=!0)}}return r&&!n.length?[{invalidPlatform:r}]:n.length?n:null}catch{return null}},s}();function u1(s){for(var e="",t=0,i=s;t<i.length;t++)e+=String.fromCharCode(i[t]);return e}new W6;var hL,vpe=function(s){return s&&function mpe(s){new W6(s)}(s),!0},bpe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),f1=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},lL=0,G6=0,dL=0,Y6=!0,Q6=!1,Lt=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.randomId=function xde(){if(!(typeof window>"u")){var s=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(s)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,c(n.enableRtl)&&n.setProperties({enableRtl:rL},!0),c(n.locale)&&n.setProperties({locale:n0},!0),n.moduleLoader=new fpe(n),n.localObserver=new ju(n),qu.on("notifyExternalChange",n.detectFunction,n,n.randomId),typeof window<"u"&&typeof document<"u"&&!vpe()&&-1!==gpe.indexOf(n.getModuleName())&&(dL+=1)>5&&(Y6=!1),Oe(i)||n.appendTo(),n}return bpe(e,s),e.prototype.requiredModules=function(){return[]},e.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),!this.refreshing&&(A([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),s.prototype.destroy.call(this),this.moduleLoader.clean(),qu.off("notifyExternalChange",this.detectFunction,this.randomId)))},e.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new ju(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},e.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},e.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},e.prototype.getLocalData=function(){var t=this.getModuleName()+this.element.id;return window.localStorage.getItem(t)},e.prototype.appendTo=function(t){if(c(t)||"string"!=typeof t?c(t)||(this.element=t):this.element=H(t,document),!c(this.element)){var i="e-"+this.getModuleName().toLowerCase();M([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=R("ej2_instances",this.element);(!n||-1===n.indexOf(this))&&s.prototype.addInstance.call(this),this.preRender(),this.injectModules(),!Y6&&!Q6&&(function(){var s='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+aL+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if(typeof document<"u"&&!c(document)){var e=F("div",{innerHTML:s});document.body.appendChild(e)}}(),Q6=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},e.prototype.renderComplete=function(t){X()&&window.sfBlazor.renderComplete(this.element,t),this.isRendered=!0},e.prototype.dataBind=function(){this.injectModules(),s.prototype.dataBind.call(this)},e.prototype.on=function(t,i,n){if("string"==typeof t)this.localObserver.on(t,i,n);else for(var r=0,o=t;r<o.length;r++){var a=o[r];this.localObserver.on(a.event,a.handler,a.context)}},e.prototype.off=function(t,i){if("string"==typeof t)this.localObserver.off(t,i);else for(var n=0,r=t;n<r.length;n++){var o=r[n];this.localObserver.off(o.event,o.handler)}},e.prototype.notify=function(t,i){!0!==this.isDestroyed&&this.localObserver.notify(t,i)},e.prototype.getInjectedModules=function(){return this.injectedModules},e.Inject=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<t.length;n++)-1===this.prototype.injectedModules.indexOf(t[parseInt(n.toString(),10)])&&this.prototype.injectedModules.push(t[parseInt(n.toString(),10)])},e.prototype.createElement=function(t,i,n){return F(t,i)},e.prototype.triggerStateChange=function(t,i){this.isReactHybrid&&(this.setState(),this.currentContext={calls:t,args:i})},e.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},e.prototype.detectFunction=function(t){var i=Object.keys(t);i.length&&(this[i[0]]=t[i[0]])},e.prototype.mergePersistData=function(){var t;c(t=window.localStorage.getItem(this.getModuleName()+this.element.id))||""===t||this.setProperties(JSON.parse(t),!0)},e.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},e.prototype.renderReactTemplates=function(t){c(t)||t()},e.prototype.clearTemplate=function(t,i){},e.prototype.getUniqueID=function(t){return this.isHistoryChanged()&&(lL=0),hL=this.pageID(location.href),G6=history.length,t+"_"+hL+"_"+lL++},e.prototype.pageID=function(t){var i=0;if(0===t.length)return i;for(var n=0;n<t.length;n++)i=(i<<5)-i+t.charCodeAt(n),i&=i;return Math.abs(i)},e.prototype.isHistoryChanged=function(){return hL!==this.pageID(location.href)||G6!==history.length},e.prototype.addOnPersist=function(t){for(var i=this,n={},r=0,o=t;r<o.length;r++){var l,a=o[r];Oe(l=R(a,this))||ke(a,this.getActualProperties(l),n)}return JSON.stringify(n,function(h,d){return i.getActualProperties(d)})},e.prototype.getActualProperties=function(t){return t instanceof ce?R("properties",t):t},e.prototype.ignoreOnPersist=function(t){return JSON.stringify(this.iterateJsonProperties(this.properties,t))},e.prototype.iterateJsonProperties=function(t,i){for(var n={},r=function(d){if(-1===i.indexOf(d)){var p=t[d];if("object"!=typeof p||p instanceof Array)n[""+d]=p;else{var u=i.filter(function(f){return new RegExp(d+".").test(f)}).map(function(f){return f.replace(d+".","")});n[""+d]=o.iterateJsonProperties(o.getActualProperties(p),u)}}},o=this,a=0,l=Object.keys(t);a<l.length;a++)r(l[a]);return n},f1([v(!1)],e.prototype,"enablePersistence",void 0),f1([v()],e.prototype,"enableRtl",void 0),f1([v()],e.prototype,"locale",void 0),f1([et],e)}(Qh);typeof window<"u"&&window.addEventListener("popstate",function(){lL=0});var X6=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Cn=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},wpe={left:0,top:0,bottom:0,right:0},pL={isDragged:!1},Spe=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return X6(e,s),Cn([v(0)],e.prototype,"left",void 0),Cn([v(0)],e.prototype,"top",void 0),e}(ce),Sl=function(s){function e(i,n){var r=s.call(this,n,i)||this;return r.dragLimit=t.getDefaultPosition(),r.borderWidth=t.getDefaultPosition(),r.padding=t.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.eleTop=0,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}var t;return X6(e,s),t=e,e.prototype.bind=function(){this.toggleEvents(),E.isIE&&M([this.element],"e-block-touch"),this.droppables[this.scope]={}},e.getDefaultPosition=function(){return Q({},wpe)},e.prototype.toggleEvents=function(i){var n;Oe(this.handle)||(n=H(this.handle,this.element));var r=this.enableTapHold&&E.isDevice&&E.isTouch?this.mobileInitialize:this.initialize;i?C.remove(n||this.element,E.isSafari()?"touchstart":E.touchStartEvent,r):C.add(n||this.element,E.isSafari()?"touchstart":E.touchStartEvent,r,this)},e.prototype.mobileInitialize=function(i){var n=this,r=i.currentTarget;this.tapHoldTimer=setTimeout(function(){n.externalInitialize=!0,n.removeTapholdTimer(),n.initialize(i,r)},this.tapHoldThreshold),C.add(document,E.isSafari()?"touchmove":E.touchMoveEvent,this.removeTapholdTimer,this),C.add(document,E.isSafari()?"touchend":E.touchEndEvent,this.removeTapholdTimer,this)},e.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),C.remove(document,E.isSafari()?"touchmove":E.touchMoveEvent,this.removeTapholdTimer),C.remove(document,E.isSafari()?"touchend":E.touchEndEvent,this.removeTapholdTimer)},e.prototype.getScrollableParent=function(i,n){return c(i)?null:i[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+n]]>i[{vertical:"clientHeight",horizontal:"clientWidth"}[""+n]]&&("vertical"===n?i.scrollTop>0:i.scrollLeft>0)?("vertical"===n?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?i.scrollTop:i.scrollTop-this.parentScrollY),this.tempScrollHeight=i.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?i.scrollLeft:i.scrollLeft-this.parentScrollX),this.tempScrollWidth=i.scrollWidth),c(i)?i:this.getScrollableParent(i.parentNode,n)):this.getScrollableParent(i.parentNode,n)},e.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},e.prototype.initialize=function(i,n){if(this.currentStateTarget=i.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=i.currentTarget||n,this.dragProcessStarted=!1,this.abort){var r=this.abort;"string"==typeof r&&(r=[r]);for(var o=0;o<r.length;o++)if(!c(k(i.target,r[parseInt(o.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!Oe(i.changedTouches)&&"touchstart"!==i.type&&i.preventDefault(),this.element.setAttribute("aria-grabbed","true");var a=this.getCoordinates(i);if(this.initialPosition={x:a.pageX,y:a.pageY},!this.clone){var l=this.element.getBoundingClientRect();this.getScrollableValues(),i.clientX===i.pageX&&(this.parentScrollX=0),i.clientY===i.pageY&&(this.parentScrollY=0),this.relativeXPosition=a.pageX-(l.left+this.parentScrollX),this.relativeYPosition=a.pageY-(l.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(i):(C.add(document,E.isSafari()?"touchmove":E.touchMoveEvent,this.intDragStart,this),C.add(document,E.isSafari()?"touchend":E.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==i.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,C.trigger(document.documentElement,E.isSafari()?"touchstart":E.touchStartEvent,i)}},e.prototype.intDragStart=function(i){this.removeTapholdTimer();var n=!Oe(i.changedTouches);if(!n||1===i.changedTouches.length){var o,r=this.getCoordinates(i),a=getComputedStyle(this.element);this.margin={left:parseInt(a.marginLeft,10),top:parseInt(a.marginTop,10),right:parseInt(a.marginRight,10),bottom:parseInt(a.marginBottom,10)};var l=this.element;if(this.clone&&this.dragTarget){var h=k(i.target,this.dragTarget);c(h)||(l=h)}this.isReplaceDragEle&&(l=this.currentStateCheck(i.target,l)),this.offset=this.calculateParentPosition(l),this.position=this.getMousePosition(i,this.isDragScroll);var d=this.initialPosition.x-r.pageX,p=this.initialPosition.y-r.pageY;if(Math.sqrt(d*d+p*p)>=this.distance||this.externalInitialize){var f=this.getHelperElement(i);if(!f||c(f))return;n&&i.preventDefault();var g=this.helperElement=f;if(this.parentClientRect=this.calculateParentPosition(g.offsetParent),this.dragStart){var y={event:i,element:l,target:this.getProperTargetElement(i),bindEvents:X()?this.bindDragEvents.bind(this):null,dragElement:g};this.trigger("dragStart",y)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),o={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var b=getComputedStyle(l),w=parseFloat(b.marginTop);this.clone&&0!==w&&(o.top+=w),this.eleTop=isNaN(parseFloat(b.top))?0:parseFloat(b.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(o.top-=this.parentScrollY,o.left-=this.parentScrollX);var S=this.getProcessedPositionValue({top:o.top-this.diffY+"px",left:o.left-this.diffX+"px"});this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(o.top+=this.dragArea.scrollTop),this.dragElePosition={top:o.top,left:o.left},ge(g,this.getDragPosition({position:"absolute",left:S.left,top:S.top})),C.remove(document,E.isSafari()?"touchmove":E.touchMoveEvent,this.intDragStart),C.remove(document,E.isSafari()?"touchend":E.touchEndEvent,this.intDestroy),X()||this.bindDragEvents(g)}}},e.prototype.bindDragEvents=function(i){wn(i)?(C.add(document,E.isSafari()?"touchmove":E.touchMoveEvent,this.intDrag,this),C.add(document,E.isSafari()?"touchend":E.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,i)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},e.prototype.elementInViewport=function(i){for(this.top=i.offsetTop,this.left=i.offsetLeft,this.width=i.offsetWidth,this.height=i.offsetHeight;i.offsetParent;)this.top+=(i=i.offsetParent).offsetTop,this.left+=i.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},e.prototype.getProcessedPositionValue=function(i){return this.queryPositionInfo?this.queryPositionInfo(i):i},e.prototype.calculateParentPosition=function(i){if(c(i))return{left:0,top:0};var n=i.getBoundingClientRect(),r=getComputedStyle(i);return{left:n.left+window.pageXOffset-parseInt(r.marginLeft,10),top:n.top+window.pageYOffset-parseInt(r.marginTop,10)}},e.prototype.intDrag=function(i){if(Oe(i.changedTouches)||1===i.changedTouches.length){var n,r;this.clone&&i.changedTouches&&E.isDevice&&E.isTouch&&i.preventDefault(),this.position=this.getMousePosition(i,this.isDragScroll);var o=this.getDocumentWidthHeight("Height");o<this.position.top&&(this.position.top=o);var a=this.getDocumentWidthHeight("Width");if(a<this.position.left&&(this.position.left=a),this.drag){var l=this.getProperTargetElement(i);this.trigger("drag",{event:i,element:this.element,target:l})}var h=this.checkTargetElement(i);if(h.target&&h.instance){var d=!0;this.hoverObject&&(this.hoverObject.instance!==h.instance?this.triggerOutFunction(i,h):d=!1),d&&(h.instance.dragData[this.scope]=this.droppables[this.scope],h.instance.intOver(i,h.target),this.hoverObject=h)}else this.hoverObject&&this.triggerOutFunction(i,h);var p=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var u=this.parentClientRect.left,f=this.parentClientRect.top,g=this.getCoordinates(i),m=g.pageX,y=g.pageY,b=this.position.left-this.diffX,w=this.position.top-this.diffY,S=getComputedStyle(p);if(this.dragArea){if(this.enableAutoScroll&&this.setDragArea(),this.pageX!==m||this.skipDistanceCheck){var I=p.offsetWidth+(parseFloat(S.marginLeft)+parseFloat(S.marginRight));n=this.dragLimit.left>b&&b>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<b+I&&b>0?b-(b-this.dragLimit.right)+window.pageXOffset-I:b<0?this.dragLimit.left:b}if(this.pageY!==y||this.skipDistanceCheck){var x=p.offsetHeight+(parseFloat(S.marginTop)+parseFloat(S.marginBottom));r=this.dragLimit.top>w&&w>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<w+x&&w>0?w-(w-this.dragLimit.bottom)+window.pageYOffset-x:w<0?this.dragLimit.top:w}}else n=b,r=w;var N,O,T=f+this.borderWidth.top,L=u+this.borderWidth.left;if(this.dragProcessStarted&&(c(r)&&(r=this.prevTop),c(n)&&(n=this.prevLeft)),this.helperElement.classList.contains("e-treeview"))this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,N=r-T<0?this.dragLimit.top:r-this.borderWidth.top,O=n-L<0?this.dragLimit.left:n-this.borderWidth.left):(N=r-this.borderWidth.top,O=n-this.borderWidth.left);else if(this.dragArea){var _=this.helperElement.classList.contains("e-dialog");this.dragLimit.top=this.clone?this.dragLimit.top:0,N=r-T<0?this.dragLimit.top:r-T,O=n-L<0?_?n-(L-this.borderWidth.left):this.dragElePosition.left:n-L}else N=r-T,O=n-L;var B=parseFloat(getComputedStyle(this.element).marginTop);if(B>0&&(this.clone&&(N+=B,w<0&&(B+w>=0?N=B+w:N-=B),N=this.dragLimit.bottom<N?this.dragLimit.bottom:N),r-T<0))if(w+B+(p.offsetHeight-T)>=0){var q=this.dragLimit.top+w-T;q+B+T<0?N-=B+T:N=q}else N-=B+T;this.dragArea&&this.helperElement.classList.contains("e-treeview")&&(N=N+(x=p.offsetHeight+(parseFloat(S.marginTop)+parseFloat(S.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-x:N),this.enableScrollHandler&&!this.clone&&(N-=this.parentScrollY,O-=this.parentScrollX),this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(N+=this.dragArea.scrollTop);var W=this.getProcessedPositionValue({top:N+"px",left:O+"px"});ge(p,this.getDragPosition(W)),!this.elementInViewport(p)&&this.enableAutoScroll&&!this.helperElement.classList.contains("e-treeview")&&this.helperElement.scrollIntoView();var j=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===j.length&&(j=this.getPathElements(i));var G=this.getScrollParent(j,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(G,N):this.elementInViewport(this.helperElement)||(0===(j=[].slice.call(document.querySelectorAll(":hover"))).length&&(j=this.getPathElements(i)),G=this.getScrollParent(j,!0),this.getScrollPosition(G,N))}this.dragProcessStarted=!0,this.prevLeft=n,this.prevTop=r,this.position.left=n,this.position.top=r,this.pageX=m,this.pageY=y}},e.prototype.getScrollParent=function(i,n){for(var o,r=n?i.reverse():i,a=r.length-1;a>=0;a--)if(("auto"===(o=window.getComputedStyle(r[parseInt(a.toString(),10)])["overflow-y"])||"scroll"===o)&&r[parseInt(a.toString(),10)].scrollHeight>r[parseInt(a.toString(),10)].clientHeight)return r[parseInt(a.toString(),10)];if("visible"===(o=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},e.prototype.getScrollPosition=function(i,n){i&&i===document.scrollingElement?i.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<n&&i.getBoundingClientRect().height+this.parentClientRect.top>n?i.scrollTop+=this.helperElement.clientHeight:i.scrollTop>n-this.helperElement.clientHeight&&(i.scrollTop-=this.helperElement.clientHeight):i&&i!==document.scrollingElement&&(i.clientHeight+i.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<n?i.scrollTop+=this.helperElement.clientHeight:i.getBoundingClientRect().top>n-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(i.scrollTop-=this.helperElement.clientHeight))},e.prototype.getPathElements=function(i){return document.elementsFromPoint(i.clientX>0?i.clientX:0,i.clientY>0?i.clientY:0)},e.prototype.triggerOutFunction=function(i,n){this.hoverObject.instance.intOut(i,n.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},e.prototype.getDragPosition=function(i){var n=Q({},i);return this.axis&&("x"===this.axis?delete n.top:"y"===this.axis&&delete n.left),n},e.prototype.getDocumentWidthHeight=function(i){var n=document.body,r=document.documentElement;return Math.max(n["scroll"+i],r["scroll"+i],n["offset"+i],r["offset"+i],r["client"+i])},e.prototype.intDragStop=function(i){if(this.dragProcessStarted=!1,Oe(i.changedTouches)||1===i.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(i.type)){if(this.dragStop){var r=this.getProperTargetElement(i);this.trigger("dragStop",{event:i,element:this.element,target:r,helper:this.helperElement})}this.intDestroy(i)}else this.element.setAttribute("aria-grabbed","false");var o=this.checkTargetElement(i);o.target&&o.instance&&(o.instance.dragStopCalled=!0,o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intDrop(i,o.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},e.prototype.intDestroy=function(i){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),C.remove(document,E.isSafari()?"touchmove":E.touchMoveEvent,this.intDragStart),C.remove(document,E.isSafari()?"touchend":E.touchEndEvent,this.intDragStop),C.remove(document,E.isSafari()?"touchend":E.touchEndEvent,this.intDestroy),C.remove(document,E.isSafari()?"touchmove":E.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},e.prototype.onPropertyChanged=function(i,n){},e.prototype.getModuleName=function(){return"draggable"},e.prototype.isDragStarted=function(i){return i&&(pL.isDragged=!pL.isDragged),pL.isDragged},e.prototype.setDragArea=function(){var i,n,a,r=0,o=0;if(a="string"==typeof this.dragArea?H(this.dragArea):this.dragArea){var h=a.getBoundingClientRect();i=a.scrollWidth?a.scrollWidth:h.right-h.left,n=a.scrollHeight?this.dragArea&&!c(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?a.clientHeight:a.scrollHeight:h.bottom-h.top;for(var d=["Top","Left","Bottom","Right"],p=getComputedStyle(a),u=0;u<d.length;u++){var f=d[parseInt(u.toString(),10)],g=p["border"+f+"Width"],m=p["padding"+f],y=f.toLowerCase();this.borderWidth[""+y]=isNaN(parseFloat(g))?0:parseFloat(g),this.padding[""+y]=isNaN(parseFloat(m))?0:parseFloat(m)}r=this.dragArea&&!c(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?h.top+document.scrollingElement.scrollTop:h.top,this.dragLimit.left=(o=h.left)+this.borderWidth.left+this.padding.left,this.dragLimit.top=a.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+i-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=r+n-(this.borderWidth.bottom+this.padding.bottom)}},e.prototype.getProperTargetElement=function(i){var r,n=this.getCoordinates(i),o=this.helperElement.style.pointerEvents||"",a=-1!==i.type.indexOf("pointer")&&"safari"===E.info.name&&parseInt(E.info.version)>12;return p1(i.target,this.helperElement)||-1!==i.type.indexOf("touch")||a?(this.helperElement.style.pointerEvents="none",r=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.pointerEvents=o):r=i.target,r},e.prototype.currentStateCheck=function(i,n){return c(this.currentStateTarget)||this.currentStateTarget===i?c(n)?i:n:this.currentStateTarget},e.prototype.getMousePosition=function(i,n){var a,l,r=void 0!==i.srcElement?i.srcElement:i.target,o=this.getCoordinates(i),h=c(r.offsetParent);if(n?(a=this.clone?o.pageX:o.pageX+(h?0:r.offsetParent.scrollLeft)-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+(h?0:r.offsetParent.scrollTop)-this.relativeYPosition):(a=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),document.scrollingElement&&!n&&!this.clone){var d=document.scrollingElement.scrollHeight>0&&document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight&&document.scrollingElement.scrollTop>0;a=document.scrollingElement.scrollWidth>0&&document.scrollingElement.scrollWidth>document.scrollingElement.clientWidth&&document.scrollingElement.scrollLeft>0?a-document.scrollingElement.scrollLeft:a,l=d?l-document.scrollingElement.scrollTop:l}return{left:a-(this.margin.left+this.cursorAt.left),top:l-(this.margin.top+this.cursorAt.top)}},e.prototype.getCoordinates=function(i){return i.type.indexOf("touch")>-1?i.changedTouches[0]:i},e.prototype.getHelperElement=function(i){var n;return this.clone?this.helper?n=this.helper({sender:i,element:this.target}):(n=F("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(n)):n=this.element,n},e.prototype.setGlobalDroppables=function(i,n,r){this.droppables[this.scope]=i?null:{draggable:n,helper:r,draggedElement:this.element}},e.prototype.checkTargetElement=function(i){var n=this.getProperTargetElement(i),r=this.getDropInstance(n);if(!r&&n&&!c(n.parentNode)){var o=k(n.parentNode,".e-droppable")||n.parentElement;o&&(r=this.getDropInstance(o))}return{target:n,instance:r}},e.prototype.getDropInstance=function(i){var r,o=i&&i.ej2_instances;if(o)for(var a=0,l=o;a<l.length;a++){var h=l[a];if("droppable"===h.getModuleName()){r=h;break}}return r},e.prototype.destroy=function(){this.toggleEvents(!0),s.prototype.destroy.call(this)},Cn([Fe({},Spe)],e.prototype,"cursorAt",void 0),Cn([v(!0)],e.prototype,"clone",void 0),Cn([v()],e.prototype,"dragArea",void 0),Cn([v()],e.prototype,"isDragScroll",void 0),Cn([v()],e.prototype,"isReplaceDragEle",void 0),Cn([v(!0)],e.prototype,"isPreventSelect",void 0),Cn([V()],e.prototype,"drag",void 0),Cn([V()],e.prototype,"dragStart",void 0),Cn([V()],e.prototype,"dragStop",void 0),Cn([v(1)],e.prototype,"distance",void 0),Cn([v()],e.prototype,"handle",void 0),Cn([v()],e.prototype,"abort",void 0),Cn([v()],e.prototype,"helper",void 0),Cn([v("default")],e.prototype,"scope",void 0),Cn([v("")],e.prototype,"dragTarget",void 0),Cn([v()],e.prototype,"axis",void 0),Cn([v()],e.prototype,"queryPositionInfo",void 0),Cn([v(!1)],e.prototype,"enableTailMode",void 0),Cn([v(!1)],e.prototype,"skipDistanceCheck",void 0),Cn([v(!0)],e.prototype,"preventDefault",void 0),Cn([v(!1)],e.prototype,"enableAutoScroll",void 0),Cn([v(!1)],e.prototype,"enableTapHold",void 0),Cn([v(750)],e.prototype,"tapHoldThreshold",void 0),Cn([v(!1)],e.prototype,"enableScrollHandler",void 0),t=Cn([et],e)}(Qh),Cpe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),dm=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},m1=function(s){function e(t,i){var n=s.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return Cpe(e,s),e.prototype.bind=function(){this.wireEvents()},e.prototype.wireEvents=function(){C.add(this.element,E.isSafari()?"touchend":E.touchEndEvent,this.intDrop,this)},e.prototype.onPropertyChanged=function(t,i){},e.prototype.getModuleName=function(){return"droppable"},e.prototype.intOver=function(t,i){this.mouseOver||(this.trigger("over",{event:t,target:i,dragData:this.dragData[this.scope]}),this.mouseOver=!0)},e.prototype.intOut=function(t,i){this.mouseOver&&(this.trigger("out",{evt:t,target:i}),this.mouseOver=!1)},e.prototype.intDrop=function(t,i){if(this.dragStopCalled){this.dragStopCalled=!1;var a,n=!0,r=this.dragData[this.scope],o=!!r&&r.helper&&wn(r.helper);o&&(a=this.isDropArea(t,r.helper,i),this.accept&&(n=Uu(r.helper,this.accept))),o&&this.drop&&a.canDrop&&n&&this.trigger("drop",{event:t,target:a.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},e.prototype.isDropArea=function(t,i,n){var r={canDrop:!0,target:n||t.target},o="touchend"===t.type;if(o||r.target===i){i.style.display="none";var a=o?t.changedTouches[0]:t,l=document.elementFromPoint(a.clientX,a.clientY);r.canDrop=!1,r.canDrop=p1(l,this.element),r.canDrop&&(r.target=l),i.style.display=""}return r},e.prototype.destroy=function(){C.remove(this.element,E.isSafari()?"touchend":E.touchEndEvent,this.intDrop),s.prototype.destroy.call(this)},dm([v()],e.prototype,"accept",void 0),dm([v("default")],e.prototype,"scope",void 0),dm([V()],e.prototype,"drop",void 0),dm([V()],e.prototype,"over",void 0),dm([V()],e.prototype,"out",void 0),dm([et],e)}(Qh),Ipe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),v1=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},xpe={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},St=function(s){function e(i,n){var r=s.call(this,n,i)||this;return r.keyPressHandler=function(o){for(var a=o.altKey,l=o.ctrlKey,h=o.shiftKey,d=o.which,u=0,f=Object.keys(r.keyConfigs);u<f.length;u++)for(var g=f[u],y=0,b=r.keyConfigs[""+g].split(",");y<b.length;y++){var S=t.getKeyConfigData(b[y].trim());a===S.altKey&&l===S.ctrlKey&&h===S.shiftKey&&d===S.keyCode&&(o.action=g,r.keyAction&&r.keyAction(o))}},r.bind(),r}var t;return Ipe(e,s),t=e,e.prototype.destroy=function(){this.unwireEvents(),s.prototype.destroy.call(this)},e.prototype.onPropertyChanged=function(i,n){},e.prototype.bind=function(){this.wireEvents()},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},e.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},e.getKeyConfigData=function(i){if(i in this.configCache)return this.configCache[""+i];var n=i.toLowerCase().split("+"),r={altKey:-1!==n.indexOf("alt"),ctrlKey:-1!==n.indexOf("ctrl"),shiftKey:-1!==n.indexOf("shift"),keyCode:null};return r.keyCode=n[n.length-1].length>1&&Number(n[n.length-1])?Number(n[n.length-1]):t.getKeyCode(n[n.length-1]),t.configCache[""+i]=r,r},e.getKeyCode=function(i){return xpe[""+i]||i.toUpperCase().charCodeAt(0)},e.configCache={},v1([v({})],e.prototype,"keyConfigs",void 0),v1([v("keyup")],e.prototype,"eventName",void 0),v1([V()],e.prototype,"keyAction",void 0),t=v1([et],e)}(Qh),mi=function(){function s(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||n0)}return s.prototype.setLocale=function(e){var t=this.intGetControlConstant(s.locale,e);this.currentLocale=t||this.localeStrings},s.load=function(e){this.locale=Q(this.locale,e,{},!0)},s.prototype.getConstant=function(e){return c(this.currentLocale[""+e])?this.localeStrings[""+e]||"":this.currentLocale[""+e]},s.prototype.intGetControlConstant=function(e,t){return e[""+t]?e[""+t][this.controlName]:null},s.locale={},s}(),Z6=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jd=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Tpe=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Z6(e,s),Jd([v(50)],e.prototype,"swipeThresholdDistance",void 0),e}(ce),Mpe=/(Up|Down)/,hr=function(s){function e(t,i){var n=s.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(r){if(!0===n.touchAction){var o=n.updateChangeTouches(r);void 0!==r.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY},n.startEventData=o,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(r)},n.tapHoldThreshold),C.add(n.element,E.touchMoveEvent,n.moveEvent,n),C.add(n.element,E.touchEndEvent,n.endEvent,n),C.add(n.element,E.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(r){var o=n.updateChangeTouches(r);n.movedPoint=o,n.isTouchMoved=!(o.clientX===n.startPoint.clientX&&o.clientY===n.startPoint.clientY);var a={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(r),a=Q(a,{},{startEvents:n.startEventData,originalEvent:r,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(o)}),n.trigger("scroll",a),n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY})},n.cancelEvent=function(r){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(r),C.remove(n.element,E.touchCancelEvent,n.cancelEvent)},n.endEvent=function(r){n.swipeFn(r),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:r,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(r){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var o=n.updateChangeTouches(r),a=o.clientX-n.startPoint.clientX,l=o.clientY-n.startPoint.clientY;a=Math.floor(a<0?-1*a:a),l=Math.floor(l<0?-1*l:a),n.isTouchMoved=a>1||l>1,/Firefox/.test(E.userAgent)&&0===o.clientX&&0===o.clientY&&"mouseup"===r.type&&(n.isTouchMoved=!1),n.endPoint=o,n.calcPoints(r);var d={originalEvent:r,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(o)};if(n.isTouchMoved){var p=void 0,u=n.swipeSettings.swipeThresholdDistance;p=Q(p,n.defaultArgs,d);var f=!1,g=n.element,m=n.isScrollable(g),y=Mpe.test(n.movedDirection);(u<n.distanceX&&!y||u<n.distanceY&&y)&&(f=!m||n.checkSwipe(g,y)),f&&n.trigger("swipe",p)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),C.remove(n.element,E.touchMoveEvent,n.moveEvent),C.remove(n.element,E.touchEndEvent,n.endEvent),C.remove(n.element,E.touchCancelEvent,n.cancelEvent)},n.bind(),n}return Z6(e,s),e.prototype.onPropertyChanged=function(t,i){},e.prototype.bind=function(){this.wireEvents(),E.isIE&&this.element.classList.add("e-block-touch")},e.prototype.destroy=function(){this.unwireEvents(),s.prototype.destroy.call(this)},e.prototype.wireEvents=function(){C.add(this.element,E.touchStartEvent,this.startEvent,this)},e.prototype.unwireEvents=function(){C.remove(this.element,E.touchStartEvent,this.startEvent)},e.prototype.getModuleName=function(){return"touch"},e.prototype.isScrollable=function(t){var i=getComputedStyle(t);return!!/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY)},e.prototype.tapHoldEvent=function(t){this.tapCount=0,this.touchAction=!0,C.remove(this.element,E.touchMoveEvent,this.moveEvent),C.remove(this.element,E.touchEndEvent,this.endEvent),this.trigger("tapHold",{originalEvent:t}),C.remove(this.element,E.touchCancelEvent,this.cancelEvent)},e.prototype.calcPoints=function(t){var i=this.updateChangeTouches(t);this.defaultArgs={originalEvent:t},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?i.clientX>this.startPoint.clientX?"Right":"Left":i.clientY<this.startPoint.clientY?"Up":"Down"},e.prototype.calcScrollPoints=function(t){var i=this.updateChangeTouches(t);this.defaultArgs={originalEvent:t},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=i.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=i.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},e.prototype.getVelocity=function(t){var i=t.clientX,n=t.clientY,r=Date.now(),o=i-this.startPoint.clientX,a=n-this.startPoint.clientX,l=r-this.tStampStart;return Math.sqrt(o*o+a*a)/l},e.prototype.checkSwipe=function(t,i){var n=["scroll","offset"],r=i?["Height","Top"]:["Width","Left"];return t[n[0]+r[0]]<=t[n[1]+r[0]]||0===t[n[0]+r[1]]||t[n[1]+r[0]]+t[n[0]+r[1]]>=t[n[0]+r[0]]},e.prototype.updateChangeTouches=function(t){return t.changedTouches&&0!==t.changedTouches.length?t.changedTouches[0]:t},Jd([V()],e.prototype,"tap",void 0),Jd([V()],e.prototype,"tapHold",void 0),Jd([V()],e.prototype,"swipe",void 0),Jd([V()],e.prototype,"scroll",void 0),Jd([v(350)],e.prototype,"tapThreshold",void 0),Jd([v(750)],e.prototype,"tapHoldThreshold",void 0),Jd([Fe({},Tpe)],e.prototype,"swipeSettings",void 0),Jd([et],e)}(Qh),Epe=new RegExp("\\n|\\r|\\s\\s+","g"),Dpe=new RegExp(/'|"/g),kpe=new RegExp("if ?\\("),Ape=new RegExp("else if ?\\("),K6=new RegExp("else"),Lpe=new RegExp("for ?\\("),J6=new RegExp("(/if|/for)"),Vpe=new RegExp("\\((.*)\\)",""),cL=new RegExp("^[0-9]+$","g"),Ppe=new RegExp("[\\w\"'.\\s+]+","g"),Npe=new RegExp('"(.*?)"',"g"),Fpe=new RegExp("[\\w\"'@#$.\\s-+]+","g"),Rpe=new RegExp("\\${([^}]*)}","g"),Ope=/^\..*/gm,uL=/\\/gi,Bpe=/\\\\/gi,zpe=new RegExp("[\\w\"'@#$.\\s+]+","g"),Hpe=/\window\./gm;function pm(s,e,t,i,n){return!e||cL.test(s)||-1!==i.indexOf(s.split(".")[0])||n||"true"===s||"false"===s?s:t+"."+s}function fL(s,e,t,i){return e&&!cL.test(s)&&-1===i.indexOf(s.split(".")[0])?t+'["'+s:s}function $6(s){return s.match(Bpe)||(s=s.replace(uL,"\\\\")),s}function e7(s,e,t,i){if(s=s.trim(),/\window\./gm.test(s))return s;var r=/'|"/gm;return/@|\$|#/gm.test(s)&&(s=fL(s,-1===t.indexOf(s),e,t)+'"]'),Ope.test(s)?function qpe(s,e,t,i){return!e||cL.test(s)||-1!==i.indexOf(s.split(".")[0])||/^\..*/gm.test(s)?s:t+"."+s}(s,!r.test(s)&&-1===t.indexOf(s),e,t):pm(s,!r.test(s)&&-1===t.indexOf(s),e,t,i)}var Wpe=/^[\n\r.]+<tr|^<tr/,Upe=/^[\n\r.]+<svg|^<path|^<g/,Xh={};function t7(){return"-"+Math.random().toString(36).substr(2,5)}function qe(s,e,t){var i=gL.compile(s,e,t);return function(n,r,o,a,l,h,d,p){var u=i(n,r,o,d,p),f="BlazorTemplateId";if(X()&&!l){var m=a+t7();if(Xh[""+a]||(Xh[""+a]=[]),c(h))n[""+f]=m,Xh[""+a].push(n);else for(var b=0,w=Object.keys(Xh[""+a][parseInt(h.toString(),10)]);b<w.length;b++){var S=w[b];S!==f&&n[""+S]&&(Xh[""+a][parseInt(h.toString(),10)][""+S]=n[""+S]),S===f&&(m=Xh[""+a][parseInt(h.toString(),10)][""+S])}return"rowTemplate"===o?[F("tr",{id:m,className:"e-blazor-template"})]:[F("div",{id:m,className:"e-blazor-template"})]}return"string"==typeof u?Upe.test(u)?F("svg",{innerHTML:u}).childNodes:F(Wpe.test(u)?"table":"div",{innerHTML:u}).childNodes:u}}function oo(s,e){var t;return s.prototype.CSPTemplate=!0,c(e)?t=s:(t=s.bind(e)).prototype=Object.create(s.prototype),t}var Qpe=function(){function s(){}return s.prototype.compile=function(e,t,i){return void 0===t&&(t={}),function _pe(s,e,t){if("function"==typeof s)return s;var i="data",n=function jpe(s,e,t,i){var n=0,r=[],o=s.match(/class="([^"]+|)\s{2}/g),a="";return o&&o.forEach(function(l){a=l.replace(/\s\s+/g," "),s=s.replace(l,a)}),s.replace(Epe,"").replace(Npe,"'$1'").replace(Rpe,function(l,h,d,p){var f=h.match(Vpe);if(f){var g=f[1];if(Ape.test(h))h='";} '+h.replace(f[1],g.replace(Ppe,function(T){return pm(T=T.trim(),!Dpe.test(T)&&-1===r.indexOf(T),e,r,i)}))+'{ \n str = str + "';else if(kpe.test(h))h='"; '+h.replace(f[1],g.replace(Fpe,function(T){return e7(T,e,r,i)}))+'{ \n str = str + "';else if(Lpe.test(h)){var m=f[1].split(" of ");h='"; '+h.replace(f[1],function(T){return r.push(m[0]),r.push(m[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+pm(m[1],!0,e,r,i)+".length; i"+n+"++"})+"{ \n "+m[0]+"= "+pm(m[1],!0,e,r,i)+"[i"+n+"]; \n var "+m[0]+"Index=i"+n+'; \n str = str + "'}else{var y=h.split("("),b=t&&t.hasOwnProperty(y[0])?"this.":"global";b=/\./.test(y[0])?"":b;var w=f[1].split(",");0!==f[1].length&&!/data/.test(w[0])&&!/window./.test(w[0])&&(f[1]="global"===b?e+"."+f[1]:f[1]),Hpe.test(h)&&/\]\./gm.test(h)||/@|\$|#/gm.test(h)?/@|\$|#|\]\./gm.test(h)&&(h='"+ '+("global"===b?"":b)+h.replace(f[1],g.replace(zpe,function(T){return e7(T,e,r,i)}))+'+ "'):h='" + '+("global"===b?"":b)+h.replace(g,pm(f[1].replace(/,( |)data.|,/gi,","+e+".").replace(/,( |)data.window/gi,",window"),"global"!==b,e,r,i))+'+"'}}else K6.test(h)?h='"; '+h.replace(K6,'} else { \n str = str + "'):h.match(J6)?h=h.replace(J6,'"; \n } \n str = str + "'):/@|#|\$/gm.test(h)?(h.match(uL)&&(h=$6(h)),h='"+'+fL(h,-1===r.indexOf(h),e,r)+'"]+"'):h=h.match(uL)?'"+'+fL(h=$6(h),-1===r.indexOf(h),e,r)+'"]+"':""!==h?'"+'+pm(h.replace(/,/gi,"+"+e+"."),-1===r.indexOf(h),e,r,i)+'+"':" ";return h})}(s,i,e,t);return new Function(i,'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n        var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n        if(str.match(valueRegEx)){\n            var check = str.match(valueRegEx);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(valueRegEx)[i].split('value=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n        else if (str.match(/(?:href='')/) === null) {\n            if(str.match(hrefRegex)) {\n                var check = str.match(hrefRegex);\n                var str1 = str;\n                for (var i=0; i < check.length; i++) {\n                    var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                    if (check1) {\n                        var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                        change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                        str1 = str1.replace(check1, change);\n                    }\n                }\n                str = str.replace(str, str1);\n            }\n        }\n         return str;").bind(e)}(e,t)},s}(),gL={compile:(new Qpe).compile},Xpe=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Zpe=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],i7=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","oncanplay","oncanplaythrough","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeypress","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onstart","onpropertychange","oncopy","ontoggle","onpointerout","onpointermove","onpointerleave","onpointerenter","onpointerrawupdate","onpointerover","onbeforecopy","onbeforecut","onbeforeinput"],$t=function(){function s(){}return s.beforeSanitize=function(){return{selectors:{tags:Xpe,attributes:Zpe}}},s.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},s.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},s.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[parseInt(t.toString(),10)].attributes,n=0;n<i.length;n++)this.wrapElement.children[parseInt(t.toString(),10)].removeAttribute(i[parseInt(n.toString(),10)].localName)},s.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach(function(t){z(t)})},s.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+i7.join("],[")+"]");e.length>0&&e.forEach(function(t){i7.forEach(function(i){t.hasAttribute(i)&&t.removeAttribute(i)})})},s.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach(function(t,i){var n=e.wrapElement.querySelectorAll(t.selector);n.length>0&&n.forEach(function(r){r.removeAttribute(t.attribute)})})},s}();function Jpe(s){return function(e){!function Kpe(s,e){e.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){(!s.prototype.hasOwnProperty(i)||t.isFormBase&&"constructor"!==i)&&(s.prototype[i]=t.prototype[i])})})}(e,s)}}function n7(s,e,t){var i={};if(s&&s.length){for(var n=0,r=s;n<r.length;n++){var o=r[n];!0===t?(e.propCollection[o]=new ml(!1),e[o]=e.propCollection[o]):i[o]=new ml(!1)}!0!==t&&e.setProperties(i,!0)}}function r7(s,e,t){var i=Object.keys(s.registeredTemplate);if(i.length)for(var n=e&&e.filter(function(I){return!/\./g.test(I)}),r="tab"===s.getModuleName(),o=0,a=n&&n||i;o<a.length;o++){var l=a[o];if(t&&t.length)for(var h=0;h<t.length;h++)if(r)for(var d=0;d<s.registeredTemplate[l].length;d++)(p=s.registeredTemplate[l][d])&&p===t[h]&&(p.destroy(),s.registeredTemplate[l].splice(d,1));else for(d=0;d<s.registeredTemplate.template.length;d++){var p;(p=s.registeredTemplate.template[d].rootNodes[0])===t[h]&&(u=s.registeredTemplate[l])[d].destroy()}else if(s.registeredTemplate[l])for(var f=0,g=s.registeredTemplate[l];f<g.length;f++){var u;if(!(u=g[f]).destroyed){if(u._view){var m=u._view.renderer.parentNode(u.rootNodes[0]);if(!c(m))for(d=0;d<u.rootNodes.length;d++)m.appendChild(u.rootNodes[d])}u.destroy()}}(!r||!t)&&delete s.registeredTemplate[l]}for(var y=function(I){I.instance&&I.instance.clearTemplate(e&&e.filter(function(x){return!!new RegExp(I.name).test(x)}))},b=0,w=s.tagObjects;b<w.length;b++)y(w[b])}var ece=/Ref$/,s7=(function(){function s(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}s.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var i=t[e],n=R("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);n&&this.tagObjects.push({instance:n,name:i})}for(var r=Object.keys(this),o=0;o<r.length;o++){var a=R(r[o],this);"object"==typeof a&&a&&a.elementRef&&(R(-1!==r[o].indexOf("Ref")?r[o]:r[o]+"Ref",this)||ke(-1!==r[o].indexOf("Ref")?r[o]:r[o]+"Ref",a,this),R("viewContainerRef",this)&&!R("_viewContainerRef",a.elementRef.nativeElement)&&!R("propName",a.elementRef.nativeElement)&&(ke("_viewContainerRef",R("viewContainerRef",this),a.elementRef.nativeElement),ke("propName",r[o].replace("Ref",""),a.elementRef.nativeElement)))}for(var l=0,h=r=(r=Object.keys(this)).filter(function(m){return/Ref$/i.test(m)});l<h.length;l++){var p=h[l].replace("Ref","");ke(p.replace("_","."),R(p,this),this.propCollection)}var u=Object.keys(this);if(this.directivePropList){for(var f=0;f<this.directivePropList.length;f++){var g=this.directivePropList[f];-1!==u.indexOf(g)&&(!1===R(g,this)||R(g,this))&&ke(g,R(g,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},s.prototype.registerEvents=function(e){n7(e,this,!0)},s.prototype.ngOnChanges=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t];this.propCollection[n]=e[n].currentValue}this.isUpdated=!1,this.hasChanges=!0},s.prototype.clearTemplate=function(e){r7(this,e)},s.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var i=t[e];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},s.prototype.isChanged=function(){var e=this.hasChanges;if(!c(this.propCollection[this.property]))for(var i=Object.keys(this.propCollection[this.property][0]),n=0;n<i.length;n++)if(!c(this.propCollection[i[n]])){var r=R(i[n],this),o=this.propCollection[this.property][0][i[n]];!c(r)&&this.propCollection[i[n]]!==r&&o!==r&&(ke(i[n],r,this.propCollection[this.property][0]),ke(i[n],r,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var a=0,l=this.tagObjects;a<l.length;a++)e=e||l[a].instance.hasChanges;return e||this.hasChanges},s.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var e=Object.keys(this),t=0,i=e=e.filter(function(o){return ece.test(o)});t<i.length;t++){var r=i[t].replace("Ref","");ke(r.replace("_","."),R(r,this),this.propCollection)}},s.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},s.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},s.prototype.ngOnDestroy=function(){this.directivePropList=[]}}(),function(){function s(e){this.list=[],this.hasChanges=!1,this.propertyName=e}s.prototype.ngOnInit=function(){this.isInitChanges=!0},s.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map(function(i){return i.dirIndex=t++,i.property=e.propertyName,i}),this.hasChanges=!0},s.prototype.getProperties=function(){for(var e=[],t=0,i=this.list;t<i.length;t++)e.push(i[t].getProperties());return e},s.prototype.isChanged=function(){var e=this,t=!1,i=0,n=!1,r=this.children.map(function(d){return d});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&(this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),n=JSON.stringify(this.list[o].propCollection.dataSource)!==JSON.stringify(r[o].propCollection.dataSource)),n=this.list[o].hasChanges!==r[o].hasChanges;this.hasNewChildren=!(this.list.length===this.children.length&&!n)||null,this.hasNewChildren&&(this.list=this.children.map(function(d){return d.dirIndex=i++,d.property=e.propertyName,d}));for(var a=0,l=this.list;a<l.length;a++)t=t||l[a].hasChanges;return!!this.list.length&&t},s.prototype.clearTemplate=function(e){for(var t=this,i=0,n=this.list;i<n.length;i++)n[i].clearTemplate(e&&e.map(function(o){return new RegExp(t.propertyName).test(o)?o.replace(t.propertyName+".",""):o}))},s.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)R("childColumns",this.list[e])&&"columns"===R("property",this.list[e])&&ke("columns",R("childColumns",this.list[e]).getProperties(),this.list[e].propCollection),this.list[e].isUpdated=!0},s.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},s.prototype.ngOnDestroy=function(){this.list=[]}}(),function(){function s(){this.isProtectedOnChange=!0,this.isFormInit=!0}return s.prototype.saveChanges=function(e,t,i){if(!this.isProtectedOnChange){this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate();var n=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(n)}}},s.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,t.isFormInit=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(m,y){var b=t.srenderer?t.srenderer.createElement(m):F(m);return typeof y>"u"||(b.innerHTML=y.innerHTML?y.innerHTML:"",void 0!==y.className&&(b.className=y.className),void 0!==y.id&&(b.id=y.id),void 0!==y.styles&&b.setAttribute("style",y.styles),void 0!==t.ngAttr&&b.setAttribute(t.ngAttr,""),void 0!==y.attrs&&re(b,y.attrs)),b};for(var i=0,n=t.tags;i<n.length;i++){var r=n[i],o={instance:R("child"+r.substring(0,1).toUpperCase()+r.substring(1),t),name:r};t.tagObjects.push(o)}for(var a=Object.keys(t),l=0;l<a.length;l++){var h=R(a[l],t);"object"==typeof h&&h&&h.elementRef&&("object"==typeof h&&h&&h.elementRef&&-1!==a[l].indexOf("_")&&-1===a[l].indexOf("Ref")&&ke(a[l]+"Ref",h,t),t.viewContainerRef&&!R("_viewContainerRef",h.elementRef.nativeElement)&&!R("propName",h.elementRef.nativeElement)&&(ke("_viewContainerRef",t.viewContainerRef,h.elementRef.nativeElement),ke("propName",a[l].replace("Ref",""),h.elementRef.nativeElement)))}for(var d=0,p=a=(a=Object.keys(t)).filter(function(m){return/Ref$/i.test(m)&&/\_/i.test(m)});d<p.length;d++){var f=p[d].replace("Ref",""),g={};ke(f.replace("_","."),R(f,t),g),t.setProperties(g,!0)}},s.prototype.getAngularAttr=function(e){for(var n,t=e.attributes,i=t.length,r=0;r<i;r++)/_ngcontent/g.test(t[r].name)&&(n=t[r].name);return n},s.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");var n=Object.keys(t);n=n.filter(function(p){return/Ref$/i.test(p)});for(var r="DocumentEditor"===t.getModuleName(),o=0,a=n;o<a.length;o++){var h=a[o].replace("Ref","");ke(h.replace("_","."),R(h+"Ref",t),t)}var d=function(p){(typeof window<"u"&&p.element||p.getModuleName().includes("btn"))&&(p.appendTo(p.element),p.ngEle.nativeElement.style.visibility="")};r?d(t):setTimeout(function(){d(t)})},s.prototype.ngOnDestroy=function(e){var t=e||this;setTimeout(function(){typeof window<"u"&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null),setTimeout(function(){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i],o=t[r];if(o&&/object/.test(typeof o)&&0!==Object.keys(o).length)if(/properties|changedProperties|childChangedProperties|oldProperties|moduleLoader/.test(r))for(var a=0,l=Object.keys(t[r]);a<l.length;a++){var h=l[a],d=o[h];d&&/object/.test(typeof d)&&0!==Object.keys(d).length&&(d.parent||d.parentObj)&&(t[r][h]=null)}else(o.parent||o.parentObj)&&(t[r]=null)}}))})},s.prototype.clearTemplate=function(e,t){r7(this,e,t)},s.prototype.ngAfterContentChecked=function(e){for(var t=e||this,i=0,n=t.tagObjects;i<n.length;i++){var r=n[i];if(!Oe(r.instance)&&(r.instance.isInitChanges||r.instance.hasChanges||r.instance.hasNewChildren))if(r.instance.isInitChanges){var o={},a=void 0;(l=R("instance.list",r))&&l.length&&(a=l[0].directivePropList);var h=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(h=!1),a&&h&&-1===a.indexOf(r.instance.propertyName))for(var d=Object.keys(r.instance.list[0].propCollection),p=0;p<r.instance.list.length;p++){r.instance.list[p].propCollection[r.instance.propertyName]=[];for(var u={},f=0;f<d.length;f++)u[g=d[f]]=r.instance.list[p].propCollection[g];for(var m=function(N){var O=r.instance.list[p].tags[N],_=R("child"+O.substring(0,1).toUpperCase()+O.substring(1),r.instance.list[p]);if(_){var B=r.instance.list[p]["child"+O.substring(0,1).toUpperCase()+O.substring(1)],q=function(W){var j=[];if(W)for(var G=0;G<W.list.length;G++){var Y=W.list[0].tags[0];if(Y){var U=R("child"+Y.substring(0,1).toUpperCase()+Y.substring(1),W.list[G]);U&&(W.list[G].tagObjects.push({instance:U,name:Y}),j.push(U))}}if(0!==j.length)for(var J=0;J<j.length;J++)q(j[J])};q(B),r.instance.list[p].tagObjects.push({instance:_,name:O})}},y=0;y<r.instance.list[p].tags.length;y++)m(y);r.instance.list[p].propCollection[r.instance.propertyName].push(u)}o[r.name]=r.instance.getProperties(),t.setProperties(o,r.instance.isInitChanges)}else{(t[r.name].length!==r.instance.list.length||/diagram|tab|DashboardLayout/.test(t.getModuleName()))&&(t[r.name]=r.instance.list);for(var b=0,w=r.instance.list;b<w.length;b++){var l,S=r.instance.list.indexOf(l=w[b]),I=R(r.name,t)[S],x=Object.keys(I);if(x=x.filter(function(O){return/Ref$/i.test(O)}),I.properties&&0!==Object.keys(I.properties).length)for(var T=0,L=x;T<L.length;T++){var g;g=(g=L[T]).replace(/Ref/,""),I.properties[g]=I.properties[g]?I.properties[g]:I.propCollection[g]}!Oe(I)&&!Oe(I.setProperties)&&(/diagram|DashboardLayout/.test(t.getModuleName())?I.setProperties(l.getProperties(),!0):I.setProperties(l.getProperties())),l.isUpdated=!0}}}},s.prototype.registerEvents=function(e){n7(e,this)},s.prototype.twoWaySetter=function(e,t){var i=R(t,this.properties);i!==e&&(this.saveChanges(t,e,i),ke(t,c(e)?null:e,this.properties),R(t+"Change",this).emit(e))},s.prototype.addTwoWay=function(e){for(var t=this,i=function(l){R(l,n),Object.defineProperty(n,l,{get:function(){return R(l,t.properties)},set:function(h){return t.twoWaySetter(h,l)}}),ke(l+"Change",new ml,n)},n=this,r=0,o=e;r<o.length;r++)i(o[r])},s.prototype.addEventListener=function(e,t){var i=R(e,this);Oe(i)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,i.subscribe(t)))},s.prototype.removeEventListener=function(e,t){Oe(R(e,this))||this.ngBoundedEvents[e].get(t).unsubscribe()},s.prototype.trigger=function(e,t,i){var n=R(e,this),r=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),Oe(n)||n.next(t);var o=R("local"+e.charAt(0).toUpperCase()+e.slice(1),this);Oe(o)||o.call(this,t),this.isProtectedOnChange=r,i&&(this.preventChange=this.isPreventChange,i.call(this,t)),this.isPreventChange=!1},s}()),tce=(function(){function s(){}s.prototype.propagateChange=function(e){},s.prototype.propagateTouch=function(){},s.prototype.localChange=function(e){var t=void 0===e.checked?e.value:e.checked;this.objCheck=Va(t),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(t),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==t&&(this.propagateChange(t),this.angularValue=t)):t!==this.angularValue&&void 0!==this.propagateChange&&void 0!==t&&(this.propagateChange(t),this.angularValue=t)},s.prototype.registerOnChange=function(e){this.propagateChange=e},s.prototype.registerOnTouched=function(e){this.propagateTouch=e},s.prototype.twoWaySetter=function(e,t){var i=this.oldValue||R(t,this.properties),n=this.inputElement||this.element;n&&i===e&&this.value===e&&(void 0===n.value||""===n.value)||(this.saveChanges(t,e,i),ke(t,c(e)?null:e,this.properties),R(t+"Change",this).emit(e))},s.prototype.ngAfterViewInit=function(e){var t=e||this;if(typeof window<"u"){t.appendTo(t.element);var i=t.inputElement||t.element;i.addEventListener("focus",t.ngOnFocus.bind(t)),i.addEventListener("blur",t.ngOnBlur.bind(t))}this.isFormInit=!1},s.prototype.setDisabledState=function(e){this.enabled=!e,this.disabled=e},s.prototype.writeValue=function(e){void 0===this.checked?this.value=e:this.ngEle&&(this.checked="boolean"==typeof e?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?e===this.value:e:e===this.value),this.angularValue=e,this.isUpdated=!0,this.preventChange=!this.isFormInit},s.prototype.ngOnFocus=function(e){!0!==this.skipFromEvent&&this.focus.emit(e)},s.prototype.ngOnBlur=function(e){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(e)},s.isFormBase=!0}(),function Ype(){return gL.compile}());!function Gpe(s){gL.compile=s.compile}({compile:function ice(s,e){if("string"==typeof s||"function"==typeof s&&s.prototype&&s.prototype.CSPTemplate)return tce(s,e);var t=s.elementRef.nativeElement._viewContainerRef,i=s.elementRef.nativeElement.propName;return function(n,r,o){var l=t||r.viewContainerRef,h=l.createEmbeddedView(s,{$implicit:n});"EJS-MENTION"===R("currentInstance.element.nodeName",l)?h.detectChanges():h.markForCheck();var d=r&&r.registeredTemplate?r.registeredTemplate:R("currentInstance.registeredTemplate",l);return typeof d[o=o&&r.registeredTemplate?o:i]>"u"&&(d[o]=[]),d[o].push(h),h.rootNodes}}});var Zh=(()=>(function(s){s[s.Self=1]="Self",s[s.Parent=2]="Parent"}(Zh||(Zh={})),Zh))(),y1=(()=>(function(s){s[s.None=0]="None",s[s.ElementIsPort=2]="ElementIsPort",s[s.ElementIsGroup=4]="ElementIsGroup"}(y1||(y1={})),y1))(),ws=(()=>(function(s){s[s.Rotate=2]="Rotate",s[s.ConnectorSource=4]="ConnectorSource",s[s.ConnectorTarget=8]="ConnectorTarget",s[s.ResizeNorthEast=16]="ResizeNorthEast",s[s.ResizeEast=32]="ResizeEast",s[s.ResizeSouthEast=64]="ResizeSouthEast",s[s.ResizeSouth=128]="ResizeSouth",s[s.ResizeSouthWest=256]="ResizeSouthWest",s[s.ResizeWest=512]="ResizeWest",s[s.ResizeNorthWest=1024]="ResizeNorthWest",s[s.ResizeNorth=2048]="ResizeNorth",s[s.Default=4094]="Default"}(ws||(ws={})),ws))(),nn=function(){function s(e,t){this.width=e,this.height=t}return s.prototype.clone=function(){return new s(this.width,this.height)},s}(),$i=function(){function s(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return Object.defineProperty(s.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),s.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},s.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=i-this.y,this},s.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),i=Math.min(this.top,e.y),n=Math.max(this.right,e.x),r=Math.max(this.bottom,e.y);this.x=t,this.y=i,this.width=n-this.x,this.height=r-this.y},s.prototype.intersection=function(e){if(this.intersects(e)){var t=Math.max(this.left,e.left),i=Math.max(this.top,e.top);return new s(t,i,Math.min(this.right,e.right)-t,Math.min(this.bottom,e.bottom)-i)}return s.empty},s.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},s.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},s.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},s.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},s.prototype.toPoints=function(){var e=[];return e.push(this.topLeft),e.push(this.topRight),e.push(this.bottomLeft),e.push(this.bottomRight),e},s.toBounds=function(e){for(var t=new s,i=0,n=e;i<n.length;i++)t.unitePoint(n[i]);return t},s.prototype.scale=function(e,t){this.width*=e,this.height*=t},s.prototype.offset=function(e,t){this.x+=e,this.y+=t},s.empty=new s(Number.MAX_VALUE,Number.MIN_VALUE,0,0),s}(),ai=(()=>(function(s){s[s.Identity=0]="Identity",s[s.Translation=1]="Translation",s[s.Scaling=2]="Scaling",s[s.Unknown=4]="Unknown"}(ai||(ai={})),ai))(),hce=function(){return function s(e,t,i,n,r,o,a){this.m11=e,this.m12=t,this.m21=i,this.m22=n,this.offsetX=r,this.offsetY=o,this.type=a}}();function en(){return new hce(1,0,0,1,0,0,ai.Identity)}function We(s,e){var t=function uce(s,e,t){switch(s.type){case ai.Identity:break;case ai.Translation:e+=s.offsetX,t+=s.offsetY;break;case ai.Scaling:e*=s.m11,t*=s.m22;break;case ai.Translation|ai.Scaling:e*=s.m11,e+=s.offsetX,t*=s.m22,t+=s.offsetY;break;default:var n=e*s.m12+s.offsetY;e*=s.m11,e+=t*s.m21+s.offsetX,t*=s.m22,t+=n}return{x:e,y:t}}(s,e.x,e.y);return{x:Math.round(100*t.x)/100,y:Math.round(100*t.y)/100}}function rn(s,e,t,i){h7(s,function cce(s,e,t){var i=en(),n=Math.sin(s),r=Math.cos(s),o=e*(1-r)+t*n,a=t*(1-r)-e*n;return i.type=ai.Unknown,b1(i,r,n,-n,r,o,a),i}(.017453292519943295*(e%=360),t||0,i||0))}function h7(s,e){var t=s.type,i=e.type;if(i!==ai.Identity){if(t===ai.Identity)return d7(s,e),void(s.type=e.type);if(i===ai.Translation)return s.offsetX+=e.offsetX,s.offsetY+=e.offsetY,void(t!==ai.Unknown&&(s.type|=ai.Translation));if(t!==ai.Translation){var n=t<<4|i;switch(n){case 34:return s.m11*=e.m11,void(s.m22*=e.m22);case 35:return s.m11*=e.m11,s.m22*=e.m22,s.offsetX=e.offsetX,s.offsetY=e.offsetY,void(s.type=ai.Translation|ai.Scaling);case 36:break;default:switch(n){case 50:return s.m11*=e.m11,s.m22*=e.m22,s.offsetX*=e.m11,void(s.offsetY*=e.m22);case 51:return s.m11*=e.m11,s.m22*=e.m22,s.offsetX=e.m11*s.offsetX+e.offsetX,void(s.offsetY=e.m22*s.offsetY+e.offsetY);case 52:break;default:switch(n){case 66:case 67:case 68:break;default:return}}}var r=en();return b1(r,s.m11*e.m11+s.m12*e.m21,s.m11*e.m12+s.m12*e.m22,s.m21*e.m11+s.m22*e.m21,s.m21*e.m12+s.m22*e.m22,s.offsetX*e.m11+s.offsetY*e.m21+e.offsetX,s.offsetX*e.m12+s.offsetY*e.m22+e.offsetY),r.m21||r.m12?r.type=ai.Unknown:((r.m11&&1!==r.m11||r.m22&&1!==r.m22)&&(r.type=ai.Scaling),(r.offsetX||r.offsetY)&&(r.type|=ai.Translation),(r.type&(ai.Translation|ai.Scaling))===ai.Identity&&(r.type=ai.Identity),r.type=ai.Scaling|ai.Translation),d7(s,r),void(s.type=r.type)}var u=s.offsetX,f=s.offsetY;if(s.offsetX=u*e.m11+f*e.m21+e.offsetX,s.offsetY=u*e.m12+f*e.m22+e.offsetY,i===ai.Unknown)return void(s.type=ai.Unknown);s.type=ai.Translation|ai.Scaling}}function b1(s,e,t,i,n,r,o){s.m11=e,s.m12=t,s.m21=i,s.m22=n,s.offsetX=r,s.offsetY=o}function d7(s,e){s.m11=e.m11,s.m12=e.m12,s.m21=e.m21,s.m22=e.m22,s.offsetX=e.offsetX,s.offsetY=e.offsetY,s.type=e.type}function p7(s){var e,t=[];if("msie"===E.info.name||"edge"===E.info.name)for(var i=0;i<s.childNodes.length;i++)1===(e=s.childNodes[parseInt(i.toString(),10)]).nodeType&&t.push(e);else t=s.children;return t}function bce(s,e,t){var n,r,i=0,o=e||s.content;for(n="",n+=o[0],i=0;i<o.length;i++)if((r=fc(n,s))>=s.width&&n.length>0)t[t.length]={text:n,x:0,dy:0,width:r},n="";else{var a=fc(n+=o[i+1]||"",s);(Math.ceil(a)+2>=s.width&&n.length>0||n.indexOf("\n")>-1)&&(n=n.slice(0,-1),t[t.length]={text:n,x:0,dy:0,width:a},n=o[i+1]||""),i===o.length-1&&n.length>0&&(t[t.length]={text:n,x:0,dy:0,width:a},n="")}return t}function Sce(s,e,t,i,n){var o,a,r=new nn(0,0),l=function mce(s,e){var t={fill:s.style.fill,stroke:s.style.strokeColor,angle:s.rotateAngle+s.parentTransform,pivotX:s.pivot.x,pivotY:s.pivot.y,strokeWidth:s.style.strokeWidth,dashArray:s.style.strokeDashArray,opacity:s.style.opacity,visible:s.visible,id:s.id,width:e||s.actualSize.width,height:s.actualSize.height,x:s.offsetX-s.actualSize.width*s.pivot.x+.5,y:s.offsetY-s.actualSize.height*s.pivot.y+.5};return t.fontSize=s.style.fontSize,t.fontFamily=s.style.fontFamily,t.textOverflow=s.style.textOverflow,t.textDecoration=s.style.textDecoration,t.doWrap=s.doWrap,t.whiteSpace=f7(s.style.whiteSpace,s.style.textWrapping),t.content=s.content,t.textWrapping=s.style.textWrapping,t.breakWord=u7(s.style.textWrapping),t.textAlign=c7(s.style.textAlign),t.color=s.style.color,t.italic=s.style.italic,t.bold=s.style.bold,t.dashArray="",t.strokeWidth=0,t.fill="",t}(s,i);return s.childNodes=o=function vce(s,e){var n,r,t=[],i=0,o=e||s.content;if("nowrap"!==s.whiteSpace&&"pre"!==s.whiteSpace)if("breakall"===s.breakWord)for(n="",n+=o[0],i=0;i<o.length;i++)if((r=fc(n,s))>=s.width&&n.length>0)t[t.length]={text:n,x:0,dy:0,width:r},n="";else{var a=fc(n+=o[i+1]||"",s);(Math.ceil(a)+2>=s.width&&n.length>0||n.indexOf("\n")>-1)&&(t[t.length]={text:n,x:0,dy:0,width:a},n=""),i===o.length-1&&n.length>0&&(t[t.length]={text:n,x:0,dy:0,width:a},n="")}else t=function yce(s,e){var d,p,u,f,t=[],i="",n=0,r=0,o="nowrap"!==s.whiteSpace,h=(e||s.content).split("\n");for(n=0;n<h.length;n++)for(d="NoWrap"!==s.textWrapping?h[parseInt(n.toString(),10)].split(" "):h,r=0;r<d.length;r++)if(fc(d[parseInt(r.toString(),10)],s)>s.width&&d[parseInt(r.toString(),10)].length>0&&"NoWrap"!==s.textWrapping)h.length>1&&(d[parseInt(r.toString(),10)]=d[parseInt(r.toString(),10)]+"\n"),s.content=d[parseInt(r.toString(),10)],t=bce(s,i,t);else{var g=fc(p=(i+=((0!==r||1===d.length)&&o&&i.length>0?" ":"")+d[parseInt(r.toString(),10)])+(d[r+1]||""),s);h.length>1&&r===d.length-1&&(i+="\n"),Math.floor(g)>s.width-2&&i.length>0?(e=i,t[t.length]={text:-1===i.indexOf("\n")?i+" ":e,x:0,dy:0,width:p===i?g:i===f?u:fc(i,s)},i=""):r===d.length-1&&(t[t.length]={text:i,x:0,dy:0,width:g},i=""),f=p,u=g}return t}(s,e);else t[t.length]={text:o,x:0,dy:0,width:fc(o,s)};return t}(l,n),s.wrapBounds=a=function wce(s,e){var n,r,t={x:0,width:0},i=0;for(i=0;i<e.length;i++)r=n=e[parseInt(i.toString(),10)].width,n="left"===s.textAlign?0:"center"===s.textAlign?n>s.width&&("Ellipsis"===s.textOverflow||"Clip"===s.textOverflow)?0:-n/2:"right"===s.textAlign?-n:e.length>1?0:-n/2,e[parseInt(i.toString(),10)].dy=1.2*s.fontSize,e[parseInt(i.toString(),10)].x=n,t?(t.x=Math.min(t.x,n),t.width=Math.max(t.width,r)):t={x:n,width:r};return t}(l,o),r.width=a.width,s.wrapBounds.width>=i&&"Wrap"!==l.textOverflow&&(r.width=i),r.height=o.length*s.style.fontSize*1.2,r}function Gu(s,e){var i;return e&&(i=document.getElementById(e)),i?i.querySelector("#"+s):document.getElementById(s)}function o0(s,e){var t=F(s);return function Cce(s,e){for(var t=Object.keys(e),i=0;i<t.length;i++)s.setAttribute(t[parseInt(i.toString(),10)],e[t[parseInt(i.toString(),10)]])}(t,e),t}function ta(){for(var t,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",i=0;i<5;i++){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint16Array(1);t=(window.msCrypto||window.crypto).getRandomValues(n)[0]%(s.length-1)}else t=Math.floor(Math.random()*s.length);0===i&&t<10?i--:e+=s.substring(t,t+1)}return e}function Ao(s){new $i;var t=s.offsetY-s.actualSize.height*s.pivot.y,i=s.offsetY+s.actualSize.height*(1-s.pivot.y),n=s.offsetX-s.actualSize.width*s.pivot.x,r=s.offsetX+s.actualSize.width*(1-s.pivot.x);return $i.toBounds([{x:n,y:t},{x:r,y:t},{x:n,y:i},{x:r,y:i}])}function Mce(s,e){var t=en();rn(t,e,0,0);var i=We(t,{x:0,y:0}),n=We(t,{x:s.width,y:0}),r=We(t,{x:0,y:s.height}),o=We(t,{x:s.width,y:s.height}),a=Math.min(i.x,n.x,r.x,o.x),l=Math.min(i.y,n.y,r.y,o.y),h=Math.max(i.x,n.x,r.x,o.x),d=Math.max(i.y,n.y,r.y,o.y);return new nn(h-a,d-l)}function c7(s){var e="";switch(s){case"Center":e="center";break;case"Left":e="left";break;case"Right":e="right"}return e}function u7(s){var e="";switch(s){case"Wrap":e="breakall";break;case"NoWrap":e="keepall";break;case"WrapWithOverflow":e="normal";break;case"LineThrough":e="line-through"}return e}function fc(s,e){var t="measureElement";window[t].style.visibility="visible";var n=p7(window[t].children[2])[1];n.textContent=s,n.setAttribute("style","font-size:"+e.fontSize+"px; font-family:"+e.fontFamily+";font-weight:"+(e.bold?"bold":"normal"));var r=n.getBBox().width;return window[t].style.visibility="hidden",r}function f7(s,e){if("NoWrap"===e&&"PreserveAll"===s)return"pre";var t="";switch(s){case"CollapseAll":t="nowrap";break;case"CollapseSpace":t="pre-line";break;case"PreserveAll":t="pre-wrap"}return t}function Na(s,e,t,i){if(0!==s){var n=en();return rn(n,s,e,t),We(n,i)}return i}var Fa=function(){function s(){this.pivot={x:.5,y:.5},this.rotateValue={x:0,y:0,angle:0},this.isDirt=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.visible=!0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.relativeMode="Point",this.transform=Zh.Self|Zh.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new nn,this.actualSize=new nn,this.parentTransform=0,this.preventContainer=!1,this.bounds=new $i(0,0,0,0),this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.elementActions=y1.None,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return s.prototype.setOffsetWithRespectToBounds=function(e,t,i){this.unitMode=i,this.position={x:e,y:t}},s.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(s.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!0,configurable:!0}),s.prototype.measure=function(e){return this.desiredSize=new nn(void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},s.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},s.prototype.updateBounds=function(){this.bounds=function Ece(s){var t,e=new $i,i=(t=Ao(s)).middleLeft,n=t.topCenter,r=t.bottomCenter,o=t.middleRight,a=t.topLeft,l=t.topRight,h=t.bottomLeft,d=t.bottomRight;if(s.corners={topLeft:a,topCenter:n,topRight:l,middleLeft:i,middleRight:o,bottomLeft:h,bottomCenter:r,bottomRight:d},0!==s.rotateAngle||0!==s.parentTransform){var p=en();rn(p,s.rotateAngle+s.parentTransform,s.offsetX,s.offsetY),s.corners.topLeft=a=We(p,a),s.corners.topCenter=n=We(p,n),s.corners.topRight=l=We(p,l),s.corners.middleLeft=i=We(p,i),s.corners.middleRight=o=We(p,o),s.corners.bottomLeft=h=We(p,h),s.corners.bottomCenter=r=We(p,r),s.corners.bottomRight=d=We(p,d)}return e=$i.toBounds([a,l,h,d]),s.corners.left=e.left,s.corners.right=e.right,s.corners.top=e.top,s.corners.bottom=e.bottom,s.corners.center=e.center,s.corners.width=e.width,s.corners.height=e.height,e}(this)},s.prototype.validateDesiredSize=function(e,t){return this.isRectElement&&!this.width&&!this.minWidth&&!this.maxWidth&&(e.width=50),this.isRectElement&&!this.height&&!this.minHeight&&!this.maxHeight&&(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new nn).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},s}(),kce=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yu=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return kce(e,s),e.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},e.prototype.measure=function(t){this.desiredBounds=void 0;var n,r,i=void 0;if(this.hasChildren()){for(var o=0;o<this.children.length;o++)"Stretch"===(n=this.children[parseInt(o.toString(),10)]).horizontalAlignment&&!t.width&&(t.width=n.bounds.width),"Stretch"===n.verticalAlignment&&!t.height&&(t.height=n.bounds.height),(this.measureChildren||"Stretch"===n.horizontalAlignment||"Stretch"===n.verticalAlignment||n instanceof e&&void 0!==n.measureChildren)&&n.measure(t),r=this.GetChildrenBounds(n),"Stretch"!==n.horizontalAlignment&&"Stretch"!==n.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=r:this.desiredBounds.uniteRect(r):this.actualSize&&!this.actualSize.width&&!this.actualSize.height&&!n.preventContainer&&"Stretch"===n.horizontalAlignment&&"Stretch"===n.verticalAlignment&&(void 0===this.desiredBounds?this.desiredBounds=n.bounds:this.desiredBounds.uniteRect(n.bounds));if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var h=Na(this.rotateAngle,void 0,void 0,{x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y});this.desiredBounds.x=h.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=h.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(i=new nn(this.desiredBounds.width,this.desiredBounds.height))}return i=this.validateDesiredSize(i,t),this.stretchChildren(i),this.desiredSize=i,i},e.prototype.arrange=function(t){var i,n=this.desiredBounds;if(n&&(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren()))for(var a=0;a<this.children.length;a++){var l=!1;"Stretch"===(i=this.children[parseInt(a.toString(),10)]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,l=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,l=!0),(l||this.measureChildren||i instanceof e&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}return this.actualSize=t,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,t},e.prototype.stretchChildren=function(t){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var r=n[i];("Stretch"===r.horizontalAlignment||void 0===r.desiredSize.width)&&(r.desiredSize.width=t.width-r.margin.left-r.margin.right),("Stretch"===r.verticalAlignment||void 0===r.desiredSize.height)&&(r.desiredSize.height=t.height-r.margin.top-r.margin.bottom),r instanceof e&&r.stretchChildren(r.desiredSize)}},e.prototype.findChildOffsetFromCenter=function(t,i){var r=function Dce(s,e){return{x:s.x+e.desiredSize.width*e.pivot.x,y:s.y+e.desiredSize.height*e.pivot.y}}({x:i.x-t.desiredSize.width/2,y:i.y-t.desiredSize.height/2},t);r=Na(t.rotateAngle,i.x,i.y,r),r=Na(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,r),t.offsetX=r.x,t.offsetY=r.y},e.prototype.GetChildrenBounds=function(t){var i;i=t.desiredSize.clone();var o=t.offsetX-i.width*t.pivot.x,a=t.offsetY-i.height*t.pivot.y,l=o+i.width,h=a+i.height,d={x:o,y:a},p={x:l,y:a},u={x:o,y:h},f={x:l,y:h};return d=Na(t.rotateAngle,t.offsetX,t.offsetY,d),p=Na(t.rotateAngle,t.offsetX,t.offsetY,p),u=Na(t.rotateAngle,t.offsetX,t.offsetY,u),f=Na(t.rotateAngle,t.offsetX,t.offsetY,f),0!==this.rotateAngle&&(d=Na(-this.rotateAngle,void 0,void 0,d),p=Na(-this.rotateAngle,void 0,void 0,p),u=Na(-this.rotateAngle,void 0,void 0,u),f=Na(-this.rotateAngle,void 0,void 0,f)),$i.toBounds([d,p,u,f])},e}(Fa),Ace=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ss=function(s){function e(){var t=s.call(this)||this;return t.textContent="",t.canMeasure=!0,t.canConsiderBounds=!0,t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:1,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return Ace(e,s),Object.defineProperty(e.prototype,"content",{get:function(){return this.textContent},set:function(t){this.textContent!==t&&(this.textContent=t,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.textNodes},set:function(t){this.textNodes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(t){this.textWrapBounds=t},enumerable:!0,configurable:!0}),e.prototype.refreshTextElement=function(){this.isDirt=!0},e.prototype.measure=function(t){var i;return i=this.isDirt&&this.canMeasure?Sce(this,0,0,this.width||t.width):this.desiredSize,this.desiredSize=void 0===this.width||void 0===this.height?new nn(i.width,i.height):new nn(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return(t.width!==this.actualSize.width||t.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=t,this.updateBounds(),this.isDirt=!1,this.actualSize},e}(Fa),Lce=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),g7=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.measureChildren=void 0,t}return Lce(e,s),e.prototype.measure=function(t){var i=void 0,n=void 0;if(this.hasChildren()){for(var r=0,o=this.children;r<o.length;r++){var a=o[r];if(a instanceof Ss){if(!a.canMeasure)break;t.width=t.width||this.maxWidth||this.minWidth,a.measure(t)}else a instanceof Ss||a.measure(t);var l=a.desiredSize.clone();0!==a.rotateAngle&&(l=Mce(l,a.rotateAngle));var p=new $i(a.margin.left,a.margin.top,l.width+a.margin.right,l.height+a.margin.bottom);a.float&&void 0!==a.getAbsolutePosition(l)||(!(a instanceof Ss)||a instanceof Ss&&a.canConsiderBounds)&&(void 0===n?n=p:n.uniteRect(p))}var f,g;if(n)f=Math.max(n.left,0),g=Math.max(n.top,0),i=new nn(n.width+f,n.height+g)}return i=s.prototype.validateDesiredSize.call(this,i,t),s.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},e.prototype.arrange=function(t){if(this.outerBounds=new $i,this.hasChildren()){var i,n;i=this.offsetY-t.height*this.pivot.y,n=this.offsetX-t.width*this.pivot.x;for(var r=0,o=this.children;r<o.length;r++){var a=o[r];if(a.transform&Zh.Parent){a.parentTransform=this.parentTransform+this.rotateAngle;var h,l=a.desiredSize.clone(),d={x:0,y:0},p=n,u=i;if("Point"===a.relativeMode){var f=a.getAbsolutePosition(t);void 0!==f&&(p+=f.x,u+=f.y)}if(d={x:(h="Object"===a.relativeMode?this.alignChildBasedOnParent(a,l,t,p,u):this.alignChildBasedOnaPoint(a,p,u)).x+l.width/2,y:h.y+l.height/2},a.rotateValue){var g={x:this.offsetX+(a.rotateValue.x||0),y:this.offsetY+(a.rotateValue.y||0)},m={x:this.offsetX,y:this.offsetY},y=0|a.rotateValue.angle,b=en();rn(b,y,m.x,m.y),d=We(b,g)}s.prototype.findChildOffsetFromCenter.call(this,a,d)}"Stretch"===a.horizontalAlignment||"Stretch"===a.verticalAlignment?a.arrange(t):a instanceof Ss&&a.canMeasure?(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a instanceof Ss||(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds))}}return this.actualSize=t,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),t},e.prototype.alignChildBasedOnParent=function(t,i,n,r,o){switch(t.horizontalAlignment){case"Auto":case"Left":r+=t.margin.left;break;case"Right":r+=n.width-i.width-t.margin.right;break;case"Stretch":case"Center":r+=n.width/2-i.width/2}switch(t.verticalAlignment){case"Auto":case"Top":o+=t.margin.top;break;case"Bottom":o+=n.height-i.height-t.margin.bottom;break;case"Stretch":case"Center":o+=n.height/2-i.height/2}return{x:r,y:o}},e.prototype.alignChildBasedOnaPoint=function(t,i,n){switch(i+=t.margin.left-t.margin.right,n+=t.margin.top-t.margin.bottom,t.horizontalAlignment){case"Auto":case"Left":break;case"Stretch":case"Center":i-=t.desiredSize.width*t.pivot.x;break;case"Right":i-=t.desiredSize.width}switch(t.verticalAlignment){case"Auto":case"Top":break;case"Stretch":case"Center":n-=t.desiredSize.height*t.pivot.y;break;case"Bottom":n-=t.desiredSize.height}return{x:i,y:n}},e}(Yu),Vce=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),mL=function(s){function e(){var t=s.call(this)||this;return t.imageSource="",t.printID="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return Vce(e,s),Object.defineProperty(e.prototype,"source",{get:function(){return this.imageSource},set:function(t){this.imageSource=t,this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function Tce(s,e){var t="measureElement";window[t].style.visibility="visible";var i=window[t].children[1];i.setAttribute("src",s);var n=i.getBoundingClientRect();return e=new nn(n.width,n.height),window[t].style.visibility="hidden",e}(this.source,this.contentSize),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new nn(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new nn(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(Fa);function Cs(s){var t,e=[],i=function Pce(s){var e=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,t=[],i=[],n={};e.lastIndex=0;var r=!1;for(n=e.exec(s);n;)"e"===n[1]?r=!0:n[1]?("zm"===n[1].toLowerCase()?(t.length&&i.push(t),i.push(["Z"]),t=[n[1].substring(1,2)]):(t.length&&i.push(t),t=[n[1]]),r=!1):(t.length||(t=[]),r||t.push(Number(n[2])),r=!1),n=e.exec(s);return t.length&&i.push(t),i}(s);if(i.length>0)for(var n=0;n<i.length;n++){var r=i[parseInt(n.toString(),10)],o="";switch((o=r[0]).toLowerCase()){case"m":for(t=1;t<r.length;t++)e.push({command:o,x:r[parseInt(t.toString(),10)],y:r[t+1]}),t+=1,"m"===o?o="l":"M"===o&&(o="L");break;case"l":case"t":for(t=1;t<r.length;t++)e.push({command:o,x:r[parseInt(t.toString(),10)],y:r[t+1]}),t+=1;break;case"h":for(t=1;t<r.length;t++)e.push({command:o,x:r[parseInt(t.toString(),10)]});break;case"v":for(t=1;t<r.length;t++)e.push({command:o,y:r[parseInt(t.toString(),10)]});break;case"z":e.push({command:o});break;case"c":for(t=1;t<r.length;t++)e.push({command:o,x1:r[parseInt(t.toString(),10)],y1:r[t+1],x2:r[t+2],y2:r[t+3],x:r[t+4],y:r[t+5]}),t+=5;break;case"s":for(t=1;t<r.length;t++)e.push({command:o,x2:r[parseInt(t.toString(),10)],y2:r[t+1],x:r[t+2],y:r[t+3]}),t+=3;break;case"q":for(t=1;t<r.length;t++)e.push({command:o,x1:r[parseInt(t.toString(),10)],y1:r[t+1],x:r[t+2],y:r[t+3]}),t+=3;break;case"a":for(t=1;t<r.length;t++)e.push({command:o,r1:r[parseInt(t.toString(),10)],r2:r[t+1],angle:r[t+2],largeArc:r[t+3],sweep:r[t+4],x:r[t+5],y:r[t+6]}),t+=6}}return e}function m7(s){var e,t,i,n,r,o,a,l,h,d,p=[];for(a=0,l=0,d=0,h=s.length;d<h;++d){var f=s[parseInt(d.toString(),10)];"y1"in f&&(n=f.y1),"y2"in f&&(o=f.y2),"x1"in f&&(i=f.x1),"x2"in f&&(r=f.x2),"x"in f&&(a=f.x),"y"in f&&(l=f.y);var m=p[p.length-1];switch(f.command){case"M":p.push({command:"M",x:a,y:l});break;case"L":p.push({command:"L",x0:e,y0:t,x:a,y:l});break;case"H":p.push({command:"L",x0:e,y0:t,x:a,y:t});break;case"V":p.push({command:"L",x0:e,y0:t,x:e,y:l});break;case"C":p.push({command:"C",x0:e,y0:t,x1:i,y1:n,x2:r,y2:o,x:a,y:l});break;case"S":if(m){var y=void 0;p.push({command:"C",x0:e,y0:t,x1:(b={x:2*e-(y="C"===m.command||"S"===m.command?{x:m.x2,y:m.y2}:{x:e,y:t}).x,y:2*t-y.y}).x,y1:b.y,x2:r,y2:o,x:a,y:l})}break;case"Q":p.push({command:"Q",x0:e,y0:t,x1:i,y1:n,x:a,y:l});break;case"T":var b;if(m)y=void 0,p.push({command:"Q",x0:e,y0:t,x1:(b={x:2*e-(y="Q"===m.command?{x:m.x1,y:m.y1}:{x:e,y:t}).x,y:2*t-y.y}).x,y1:b.y,x:a,y:l});break;case"A":var w=f;w.command="A",p.push(w);break;case"Z":case"z":p.push({command:"Z"}),a=e,l=t}e=a,t=l}return p}function Rce(s,e,t,i,n,r){switch(e){case"M":case"L":case"T":s.x=t.x,s.y=t.y;break;case"H":s.x=t.x;break;case"V":s.y=t.y;break;case"C":s.x=t.x,s.y=t.y,s.x1=t.x1,s.y1=t.y1,s.x2=t.x2,s.y2=t.y2;break;case"S":s.x=t.x,s.y=t.y,s.x2=t.x2,s.y2=t.y2;break;case"Q":s.x=t.x,s.y=t.y,s.x1=t.x1,s.y1=t.y1;break;case"A":var o=t.r1,a=t.r2;i&&(t.r1=o*=n,t.r2=a*=r),s.x=t.x,s.y=t.y,s.r1=t.r1,s.r2=t.r2;break;case"z":case"Z":s={command:"Z"}}return s}function cm(s,e,t,i){return s!==t?s=i!==t?s*e-(Number(t)*e-Number(t))+(i-Number(t)):Number(s)*e-(Number(t)*e-Number(t)):i!==t&&(s=i),Number(s.toFixed(2))}function ia(s){var e,t,i,n,r,o,a,l,h,d;for(a=0,l=0,d=0,h=s.length;d<h;++d){var u=s[parseInt(d.toString(),10)],f=u.command;if(/[MLHVCSQTA]/.test(f))"x"in u&&(u.x=a=u.x),"y"in u&&(u.y=l=u.y);else{"x1"in u&&(u.x1=i=a+u.x1),"x2"in u&&(u.x2=r=a+u.x2),"y1"in u&&(u.y1=n=l+u.y1),"y2"in u&&(u.y2=o=l+u.y2),"x"in u&&(u.x=a+=u.x),"y"in u&&(u.y=l+=u.y);var g=void 0;switch(f){case"m":case"M":g={command:"M",x:a,y:l};break;case"l":case"L":g={command:"L",x:a,y:l};break;case"h":case"H":g={command:"H",x:a};break;case"v":case"V":g={command:"V",y:l};break;case"c":case"C":g={command:"C",x:a,y:l,x1:i,y1:n,x2:r,y2:o};break;case"s":case"S":g={command:"S",x:a,y:l,x2:r,y2:o};break;case"q":case"Q":g={command:"Q",x:a,y:l,x1:i,y1:n};break;case"t":case"T":g={command:"T",x:a,y:l};break;case"a":case"A":(g={command:"A",x:a,y:l}).r1=u.r1,g.r2=u.r2,g.angle=u.angle,g.largeArc=u.largeArc,g.sweep=u.sweep;break;case"z":case"Z":g={command:"Z"},a=e,l=t,g=s[parseInt(d.toString(),10)]}g&&(s[parseInt(d.toString(),10)]=g)}("M"===f||"m"===f)&&(e=a,t=l)}return s}function Kh(s){var t,e="";for(t=0;t<s.length;t++)e+=0===t?v7(s[parseInt(t.toString(),10)]):" "+v7(s[parseInt(t.toString(),10)]);return e}function v7(s){var e="";switch(s.command){case"Z":case"z":e=s.command;break;case"M":case"m":case"L":case"l":case"T":case"t":e=s.command+" "+s.x+" "+s.y;break;case"C":case"c":e=s.command+" "+s.x1+" "+s.y1+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y;break;case"Q":case"q":e=s.command+" "+s.x1+" "+s.y1+" "+s.x+" "+s.y;break;case"A":case"a":e=s.command+" "+s.r1+" "+s.r2+" "+s.angle+" "+(s.largeArc?"1":"0")+" "+(s.sweep?"1":"0")+" "+s.x+" "+s.y;break;case"H":case"h":e=s.command+" "+s.x;break;case"V":case"v":e=s.command+" "+s.y;break;case"S":case"s":e=s.command+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y}return e}var Oce=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rs=function(s){function e(){var t=s.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new $i,t}return Oce(e,s),Object.defineProperty(e.prototype,"data",{get:function(){return this.pathData},set:function(t){this.pathData!==t&&(this.pathData=t,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new $i(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(this.isDirt&&(this.transformPath||void 0===this.width||void 0===this.height)&&(!this.absoluteBounds||0===this.absoluteBounds.height)||this.canMeasurePath)&&(this.absoluteBounds=function fce(s){var e="pathTable";if(window[e]||(window[e]={}),s){var t="measureElement";window[t].style.visibility="visible";var n=p7(window[t].children[2])[0];n.setAttribute("d",s);var r=void 0;window[e][s]?r=window[e][s]:(window[e][s]=r=n.getBBox(),(0===r.x||0===r.y)&&(0===r.width||0===r.height)&&(window[e][s]=r=function gce(s){var r,e=0,t=0,i=0,n=0,o=s;o=o.replace(/[a-z].*/g," ").replace(/[\sA-Z]+/gi," ").trim().split(" ");for(var a=0;a<o.length;a++)o[parseInt(a.toString(),10)].length>1&&(e=t=(r=o[parseInt(a.toString(),10)].split(","))[0],i=n=r[1]);for(a=0;a<o.length;a++)(r=o[parseInt(a.toString(),10)].split(","))[1]||(r[0]=e,r[1]=i),e=Math.min(e,r[0]),t=Math.max(t,r[0]),i=Math.min(i,r[1]),n=Math.max(n,r[1]);return{x:e,y:i,width:t-e,height:n-i}}(s)));var o=new $i(r.x,r.y,r.width,r.height);return window[t].style.visibility="hidden",o}return new $i(0,0,0,0)}(this.data?this.data:"")),this.desiredSize=void 0===this.width?new nn(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?new nn(this.width||this.absoluteBounds.width,this.absoluteBounds.height):new nn(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.canMeasurePath=!1,this.desiredSize},e.prototype.arrange=function(t){return(this.isDirt||this.actualSize.width!==t.width||this.actualSize.height!==t.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,t),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},e.prototype.updatePath=function(t,i,n){var o,r=!1,a=-i.x,l=-i.y,h=[];return(n.width!==i.width||n.height!==i.height)&&(a=n.width/Number(i.width?i.width:1),l=n.height/Number(i.height?i.height:1),r=!0),h=ia(h=Cs(t)),o=(r||this.isDirt)&&this.transformPath?function Fce(s,e,t,i,n,r,o,a){var l,h,d,p,u,f,g,m,y;for(u=0,f=0,m=0,g=s.length;m<g;++m){var w=s[parseInt(m.toString(),10)],S=w.command;"x"in w&&(u=w.x),"y"in w&&(f=w.y),"y1"in w&&(h=w.y1),"y2"in w&&(p=w.y2),"x1"in w&&(l=w.x1),"x2"in w&&(d=w.x2),i?(void 0!==u&&(u=cm(u,e,n,o)),void 0!==f&&(f=cm(f,t,r,a)),void 0!==l&&(l=cm(l,e,n,o)),void 0!==h&&(h=cm(h,t,r,a)),void 0!==d&&(d=cm(d,e,n,o)),void 0!==p&&(p=cm(p,t,r,a))):(void 0!==u&&(u=Number((u+e).toFixed(2))),void 0!==f&&(f=Number((f+t).toFixed(2))),void 0!==l&&(l=Number((l+e).toFixed(2))),void 0!==h&&(h=Number((h+t).toFixed(2))),void 0!==d&&(d=Number((d+e).toFixed(2))),void 0!==p&&(p=Number((p+t).toFixed(2)))),(y=Rce(w,S,{x:u,y:f,x1:l,y1:h,x2:d,y2:p,r1:w.r1,r2:w.r2},i,e,t))&&(s[parseInt(m.toString(),10)]=y)}return Kh(s)}(h,a,l,r,i.x,i.y,0,0):Kh(h),r=!1,o},e}(Fa),Bce=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),y7=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Ei=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Bce(e,s),e.equals=function(t,i){return t===i||!(!t||!i)&&(!t||!i||t.x===i.x&&t.y===i.y)},e.isEmptyPoint=function(t){return!(t.x&&t.y)},e.transform=function(t,i,n){var r={x:0,y:0};return r.x=Math.round(100*(t.x+n*Math.cos(i*Math.PI/180)))/100,r.y=Math.round(100*(t.y+n*Math.sin(i*Math.PI/180)))/100,r},e.findLength=function(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))},e.findAngle=function(t,i){var n=Math.atan2(i.y-t.y,i.x-t.x);return n=180*n/Math.PI,(n%=360)<0&&(n+=360),n},e.distancePoints=function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},e.getLengthFromListOfPoints=function(t){for(var i=0,n=0;n<t.length-1;n++)i+=this.distancePoints(t[parseInt(n.toString(),10)],t[n+1]);return i},e.adjustPoint=function(t,i,n,r){var a,o=n?{x:t.x,y:t.y}:{x:i.x,y:i.y};return t.x===i.x?t.y<i.y&&n||t.y>i.y&&!n?o.y+=r:o.y-=r:t.y===i.y?t.x<i.x&&n||t.x>i.x&&!n?o.x+=r:o.x-=r:n?(a=this.findAngle(t,i),o=this.transform(t,a,r)):(a=this.findAngle(i,t),o=this.transform(i,a,r)),o},e.direction=function(t,i){return Math.abs(i.x-t.x)>Math.abs(i.y-t.y)?t.x<i.x?"Right":"Left":t.y<i.y?"Bottom":"Top"},e.prototype.getClassName=function(){return"Point"},y7([v(0)],e.prototype,"x",void 0),y7([v(0)],e.prototype,"y",void 0),e}(ce),b7=function(){function s(){}return s.getContext=function(e){return e.getContext("2d")},s.prototype.setStyle=function(e,t){var i=s.getContext(e);"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent"),i.strokeStyle=t.stroke,i.lineWidth=t.strokeWidth,0===t.strokeWidth&&(i.strokeStyle="transparent"),i.globalAlpha=t.opacity;var n=[];t.dashArray&&(n=this.parseDashArray(t.dashArray)),i.setLineDash(n),i.fillStyle=t.fill},s.prototype.rotateContext=function(e,t,i,n){var r=s.getContext(e);r.translate(i,n),r.rotate(t*Math.PI/180),r.translate(-i,-n)},s.prototype.setFontStyle=function(e,t){var i=s.getContext(e),n="";t.italic&&(n+="italic "),t.bold&&(n+="bold "),n+=t.fontSize+"px ",i.font=n+=t.fontFamily},s.prototype.parseDashArray=function(e){for(var t=[],i=-1!==e.indexOf(" ")?" ":",",r=0,o=e.split(i);r<o.length;r++)t.push(Number(o[r]));return t},s.prototype.drawRectangle=function(e,t){if(!0===t.visible)if(t.cornerRadius)t.data=function Nce(s,e,t){s>e/2&&(s=e/2),s>t/2&&(s=t/2);var h,d,p,r="",o=[{x:0+s,y:0},{x:0+t-s,y:0},{x:0+t,y:0+s},{x:0+t,y:0+e-s},{x:0+t-s,y:0+e},{x:0+s,y:0+e},{x:0,y:0+e-s},{x:0,y:0+s}],a=[{x:0+t,y:0},{x:0+t,y:0+e},{x:0,y:0+e},{x:0,y:0}],l=0;for(r="M"+o[0].x+" "+o[0].y,p=0;p<o.length;p+=2)r+="L"+(h=o[p+1]).x+" "+h.y,r+="Q"+a[l].x+" "+a[l].y+" "+(d=o[p+2]||o[0]).x+" "+d.y,l++;return r}(t.cornerRadius,t.height,t.width),this.drawPath(e,t);else{var i=s.getContext(e);i.save(),i.beginPath(),this.rotateContext(e,t.angle,t.x+t.width*t.pivotX,t.y+t.height*t.pivotY),this.setStyle(e,t),i.rect(t.x,t.y,t.width,t.height),i.fillRect(t.x,t.y,t.width,t.height),i.fill(),i.stroke(),i.closePath(),i.restore()}},s.prototype.drawPath=function(e,t){var i=[];i=m7(i=Cs(t.data));var n=s.getContext(e);n.save(),n.beginPath(),this.rotateContext(e,t.angle,t.x+t.width*t.pivotX,t.y+t.height*t.pivotY),this.setStyle(e,t),n.translate(t.x,t.y),this.renderPath(e,t,i),n.fill(),n.translate(-t.x,-t.y),n.stroke(),n.restore()},s.prototype.renderPath=function(e,t,i){if(!0===t.visible){var f,n=s.getContext(e),r=void 0,o=void 0,a=void 0,l=void 0,h=void 0,d=void 0,p=void 0,u=void 0,g=void 0,m=i;for(p=0,u=0,g=0,f=m.length;g<f;++g){var b=m[parseInt(g.toString(),10)];switch("x1"in b&&(a=b.x1),"x2"in b&&(h=b.x2),"y1"in b&&(l=b.y1),"y2"in b&&(d=b.y2),"x"in b&&(p=b.x),"y"in b&&(u=b.y),b.command){case"M":n.moveTo(p,u),b.x=p,b.y=u;break;case"L":n.lineTo(p,u),b.x=p,b.y=u;break;case"C":n.bezierCurveTo(a,l,h,d,p,u),b.x=p,b.y=u,b.x1=a,b.y1=l,b.x2=h,b.y2=d;break;case"Q":n.quadraticCurveTo(a,l,p,u),b.x=p,b.y=u,b.x1=a,b.y1=l;break;case"A":var S={x:r,y:o},I=b.r1,x=b.r2,T=b.angle*(Math.PI/180),L=b.largeArc,N=b.sweep,O={x:p,y:u},_={x:Math.cos(T)*(S.x-O.x)/2+Math.sin(T)*(S.y-O.y)/2,y:-Math.sin(T)*(S.x-O.x)/2+Math.cos(T)*(S.y-O.y)/2},B=Math.pow(_.x,2)/Math.pow(I,2)+Math.pow(_.y,2)/Math.pow(x,2);B>1&&(I*=Math.sqrt(B),x*=Math.sqrt(B));var q=Math.pow(x,2)*Math.pow(_.x,2),W=(L===N?-1:1)*Math.sqrt((Math.pow(I,2)*Math.pow(x,2)-Math.pow(I,2)*Math.pow(_.y,2)-q)/(Math.pow(I,2)*Math.pow(_.y,2)+Math.pow(x,2)*Math.pow(_.x,2)));isNaN(W)&&(W=0);var j={x:W*I*_.y/x,y:W*-x*_.x/I},G={x:(S.x+O.x)/2+Math.cos(T)*j.x-Math.sin(T)*j.y,y:(S.y+O.y)/2+Math.sin(T)*j.x+Math.cos(T)*j.y},Y=this.a([1,0],[(_.x-j.x)/I,(_.y-j.y)/x]),U=[(_.x-j.x)/I,(_.y-j.y)/x],J=[(-_.x-j.x)/I,(-_.y-j.y)/x],$=this.a(U,J);if(this.r(U,J)<=-1&&($=Math.PI),this.r(U,J)>=1&&($=0),b.centp=G,b.xAxisRotation=T,b.rx=I,b.ry=x,b.a1=Y,b.ad=$,b.sweep=N,null!=n){var ye=I>x?I:x,fe=I>x?1:I/x,ve=I>x?x/I:1;n.save(),n.translate(G.x,G.y),n.rotate(T),n.scale(fe,ve),n.arc(0,0,ye,Y,Y+$,!N),n.scale(1/fe,1/ve),n.rotate(-T),n.translate(-G.x,-G.y),n.restore()}break;case"Z":case"z":n.closePath(),p=r,u=o}r=p,o=u}}},s.prototype.drawText=function(e,t){if(t.content&&!0===t.visible){var i=s.getContext(e);i.save(),this.setStyle(e,t),this.rotateContext(e,t.angle,t.x+t.width*t.pivotX,t.y+t.height*t.pivotY),this.setFontStyle(e,t);var a,o=0;a=t.childNodes;var l=t.wrapBounds;if(i.fillStyle=t.color,l){var h=this.labelAlign(t,l,a);for(o=0;o<a.length;o++){var d=a[parseInt(o.toString(),10)],p=h.x+d.x-l.x,u=h.y+d.dy*o+.8*t.fontSize;if(i.fillText(d.text,p,u),"Underline"===t.textDecoration||"Overline"===t.textDecoration||"LineThrough"===t.textDecoration){var f=p,g=void 0,y=p+i.measureText(d.text).width,b=void 0;switch(t.textDecoration){case"Underline":g=u+2,b=u+2;break;case"Overline":g=h.y+d.dy*o,b=h.y+d.dy*o;break;case"LineThrough":g=(u+h.y+d.dy*o)/2+2,b=(u+h.y+d.dy*o)/2+2}i.beginPath(),i.moveTo(f,g),i.lineTo(y,b),i.strokeStyle=t.color,i.lineWidth=.08*t.fontSize,i.globalAlpha=t.opacity,i.stroke()}}}i.restore()}},s.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},s.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},s.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},s.prototype.getMeetOffset=function(e,t,i){var n=Math.max(t,i),r=Math.min(t,i);switch(e){case"min":default:return 0;case"mid":return(n-r)/2;case"max":return n-r}},s.prototype.getSliceOffset=function(e,t,i,n){switch(e){case"min":default:return 0;case"mid":return(t-i)/2*n/t;case"max":return(t-i)*n/t}},s.prototype.image=function(e,t,i,n,r,o,a){e.beginPath();var l=t.width,h=t.height,d=r,p=o,u=0,f=0;if(e.globalAlpha=a.opacity,a&&"None"!==a.alignment){var g=a.alignment.toLowerCase().substr(1,3),m=a.alignment.toLowerCase().substr(5,3);if("Slice"===a.scale){var y=function(){u=d,f=h*d/l},b=function(){u=l*p/h,f=p};d>p?(y(),p>f&&b()):d===p?l>h?b():y():(b(),d>u&&y());var w=this.getSliceOffset(g,u,d,l),S=this.getSliceOffset(m,f,p,h),I=l-w,x=h-S,T=u-w*(u/l),L=f-S*(f/h),N=o0("canvas",{width:r.toString(),height:o.toString()});N.getContext("2d").drawImage(t,w,S,I,x,0,0,T,L),e.drawImage(N,i,n,r,o)}else if("Meet"===a.scale){var _=h/l,B=p/d;f=B>_?d*_:p,i+=this.getMeetOffset(g,u=B>_?d:p/_,d),n+=this.getMeetOffset(m,f,p),e.drawImage(t,0,0,l,h,i,n,u,f)}else e.drawImage(t,i,n,r,o)}else if(t.complete)e.drawImage(t,i,n,r,o);else{var q=e.getTransform();t.onload=function(){e.setTransform(q.a,q.b,q.c,q.d,q.e,q.f),e.drawImage(t,i,n,r,o)}}e.closePath()},s.prototype.loadImage=function(e,t,i,n,r){var o;this.rotateContext(i,t.angle,n,r),window.customStampCollection&&window.customStampCollection.get(t.printID)?o=window.customStampCollection.get(t.printID):(o=new Image).src=t.source,this.image(e,o,t.x,t.y,t.width,t.height,t)},s.prototype.drawImage=function(e,t,i,n){var r=this;if(t.visible){var o=s.getContext(e);o.save();var a=t.x+t.width*t.pivotX,l=t.y+t.height*t.pivotY,h=new Image;h.src=t.source,o.canvas.id.split("_"),n?h.onload=function(){r.loadImage(o,t,e,a,l)}:this.loadImage(o,t,e,a,l),o.restore()}},s.prototype.labelAlign=function(e,t,i){var n=new nn(t.width,i.length*(1.2*e.fontSize)),r={x:0,y:0},a=e.y,d=.5*e.width,p=.5*e.height;return"left"===e.textAlign?d=0:"center"===e.textAlign?d=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(d=1*e.width),r.x=e.x+d+(t?t.x:0),r.y=a+p-n.height/2,r},s}();function w7(s,e,t){for(var i=0;i<e.length;i++)t.renderElement(e[parseInt(i.toString(),10)],s,void 0)}var zce=function(){function s(e,t){this.renderer=null,this.isSvgMode=!0,this.diagramId=e,this.element=Gu(this.diagramId),this.isSvgMode=t,this.renderer=new b7}return s.prototype.renderElement=function(e,t,i,n,r,o,a,l){e instanceof Yu?this.renderContainer(e,t,i,n,r,o,a,l):e instanceof mL?this.renderImageElement(e,t,n,r,a):e instanceof Rs?this.renderPathElement(e,t,n,r,a):e instanceof Ss?this.renderTextElement(e,t,n,r,a):this.renderRect(e,t,n,r)},s.prototype.renderImageElement=function(e,t,i,n,r){var a,l,h,d,o=this.getBaseAttributes(e,i);if(o.cornerRadius=0,this.renderer.drawRectangle(t,o),"Stretch"===e.stretch)a=e.actualSize.width,l=e.actualSize.height;else{var p=e.contentSize.width,u=e.contentSize.height,f=o.width/p,g=o.height/u,m=void 0;switch(e.stretch){case"Meet":a=p*(m=Math.min(f,g)),l=u*m,o.x+=Math.abs(o.width-a)/2,o.y+=Math.abs(o.height-l)/2;break;case"Slice":f=o.width/p,g=o.height/u,m=Math.max(f,g),h=o.width/(a=p*m)*p,d=o.height/(l=u*m)*u;break;case"None":a=p,l=u}}o.width=a,o.height=l,o.sourceWidth=h,o.sourceHeight=d,o.source=e.source,o.alignment=e.imageAlign,o.scale=e.imageScale,o.printID=e.printID,this.renderer.drawImage(t,o,n,r)},s.prototype.renderPathElement=function(e,t,i,n,r){var o=this.getBaseAttributes(e,i);o.data=e.absolutePath,o.data=e.absolutePath,this.isSvgMode||(o.x=o.x,o.y=o.y),this.renderer.drawPath(t,o)},s.prototype.renderTextElement=function(e,t,i,n,r){var o=this.getBaseAttributes(e,i);o.cornerRadius=0,o.whiteSpace=f7(e.style.whiteSpace,e.style.textWrapping),o.content=e.content,o.breakWord=u7(e.style.textWrapping),o.textAlign=c7(e.style.textAlign),o.color=e.style.color,o.italic=e.style.italic,o.bold=e.style.bold,o.fontSize=e.style.fontSize,o.fontFamily=e.style.fontFamily,o.textOverflow=e.style.textOverflow,o.textDecoration=e.style.textDecoration,o.doWrap=e.doWrap,o.wrapBounds=e.wrapBounds,o.childNodes=e.childNodes,o.dashArray="",o.strokeWidth=0,o.fill=e.style.fill,this.renderer.drawRectangle(t,o),this.renderer.drawText(t,o)},s.prototype.renderContainer=function(e,t,i,n,r,o,a,l){if(this.renderRect(e,t,n={tx:0,ty:0,scale:1},r),e.hasChildren())for(var d=0,p=e.children;d<p.length;d++)this.renderElement(p[d],t,i,n,r,!0,a,l)},s.prototype.renderRect=function(e,t,i,n){var r=this.getBaseAttributes(e,i);r.cornerRadius=e.cornerRadius||0,this.renderer.drawRectangle(t,r)},s.prototype.getBaseAttributes=function(e,t){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,visible:e.visible,id:e.id,gradient:e.style.gradient};return t&&(i.x+=t.tx,i.y+=t.ty),i},s}(),Hce=function(){function s(){}return s.prototype.parseDashArray=function(e){return[]},s.prototype.drawRectangle=function(e,t,i,n,r,o,a){var l,h;l=t.id===e.id?t.id+"_container":t.id,(!h||r)&&(h=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(h));var d={id:l,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":a||""};t.class&&(d.class=t.class),a||(d["pointer-events"]="none"),$d(h,d),this.setSvgStyle(h,t,i)},s.prototype.updateSelectionRegion=function(e,t){var i,n;i=e.parentNode.getElementById(t.id),n={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(i)),this.setSvgStyle(i,t),$d(i,n)},s.prototype.createGElement=function(e,t){return vL(e,t)},s.prototype.drawCircle=function(e,t,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(r,t);var o=t.class||"";i||(o+=" e-disabled");var a={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:o,"aria-label":n?n["aria-label"]:""};""===a["aria-label"]&&(a["pointer-events"]="none"),r.style.display=t.visible?"block":"none",$d(r,a),e.appendChild(r)},s.prototype.setSvgStyle=function(e,t,i){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var r,n=[];void 0!==t.dashArray&&(n=(new b7).parseDashArray(t.dashArray)),r=t.fill,t.stroke&&e.setAttribute("stroke",t.stroke),null!=t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),n&&e.setAttribute("stroke-dasharray",n.toString()),r&&e.setAttribute("fill",r)}},s.prototype.svgLabelAlign=function(e,t,i){var n=new nn(t.width,i.length*(1.2*e.fontSize)),r={x:0,y:0},d=.5*e.width,p=.5*e.height;return"left"===e.textAlign?d=0:"center"===e.textAlign?d=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(d=1*e.width),r.x=0+d+(t?t.x:0),r.y=1.2+p-n.height/2,r},s.prototype.drawLine=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,t);var n=t.x+t.width*t.pivotX,r=t.y+t.height*t.pivotY,o={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+n+" "+r+")",visibility:t.visible?"visible":"hidden"};t.class&&(o.class=t.class),$d(i,o),e.appendChild(i)},s.prototype.drawPath=function(e,t,i,n,r,o){Math.floor(10*Math.random()+1).toString();var d,p,h=[];h=m7(h=Cs(t.data)),r&&(d=r.getElementById(t.id+"_groupElement_shadow"))&&d.parentNode.removeChild(d),r&&(p=r.getElementById(t.id)),(!p||n)&&(p=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(p)),this.renderPath(p,t,h);var u={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":o||""};t.class&&(u.class=t.class),$d(p,u),this.setSvgStyle(p,t,i)},s.prototype.renderPath=function(e,t,i){var n,r,o,a,l,h,d,p,u=i,f="";for(l=0,h=0,p=0,d=u.length;p<d;++p){var m=u[parseInt(p.toString(),10)];switch("x1"in m&&(n=m.x1),"x2"in m&&(o=m.x2),"y1"in m&&(r=m.y1),"y2"in m&&(a=m.y2),"x"in m&&(l=m.x),"y"in m&&(h=m.y),m.command){case"M":f=f+"M"+l.toString()+","+h.toString()+" ";break;case"L":f=f+"L"+l.toString()+","+h.toString()+" ";break;case"C":f=f+"C"+n.toString()+","+r.toString()+","+o.toString()+","+a.toString()+",",f+=l.toString()+","+h.toString()+" ";break;case"Q":f=f+"Q"+n.toString()+","+r.toString()+","+l.toString()+","+h.toString()+" ";break;case"A":f=f+"A"+m.r1.toString()+","+m.r2.toString()+","+m.angle.toString()+",",f+=m.largeArc.toString()+","+m.sweep+","+l.toString()+","+h.toString()+" ";break;case"Z":case"z":f+="Z "}}e.setAttribute("d",f)},s}();function $d(s,e){for(var t=Object.keys(e),i=0;i<t.length;i++)s.setAttribute(t[parseInt(i.toString(),10)],e[t[parseInt(i.toString(),10)]])}function vL(s,e){var t=document.createElementNS("http://www.w3.org/2000/svg",s);return $d(t,e),t}function S7(s,e){var t={x:0,y:0},i=s,r=(e.y2-e.y1)*(i.x2-i.x1)-(e.x2-e.x1)*(i.y2-i.y1);if(0===r)return{enabled:!1,intersectPt:t};var l=((e.x2-e.x1)*(i.y1-e.y1)-(e.y2-e.y1)*(i.x1-e.x1))/r,h=((i.x2-i.x1)*(i.y1-e.y1)-(i.y2-i.y1)*(i.x1-e.x1))/r;return l>=0&&l<=1&&h>=0&&h<=1?(t.x=i.x1+l*(i.x2-i.x1),t.y=i.y1+l*(i.y2-i.y1),{enabled:!0,intersectPt:t}):{enabled:!1,intersectPt:t}}function Il(s,e,t){return s.x>=e.x-t&&s.x<=e.x+t&&s.y>=e.y-t&&s.y<=e.y+t}function qce(s){for(var e,t=s.childNodes,i=0;i<t.length;i++)if(3===(e=t[i]).nodeType)return e;return null}function Ra(s,e,t){void 0===e&&(e=!1),void 0===t&&(t={});var i=s("div",{className:"e-checkbox-wrapper e-css"});if(t.cssClass&&M([i],t.cssClass.split(" ")),t.enableRtl&&i.classList.add("e-rtl"),e){var n=s("span",{className:"e-ripple-container"});zi(n,{isCenterRipple:!0,duration:400}),i.appendChild(n)}var r=s("span",{className:"e-frame e-icons"});if(t.checked&&r.classList.add("e-check"),i.appendChild(r),t.label){var o=s("span",{className:"e-label"});t.disableHtmlEncode?o.textContent=t.label:o.innerHTML=t.label,i.appendChild(o)}return i}function Qu(s,e){if(e){var t=document.createEvent("MouseEvents");t.initEvent(s.type,!1,!0),e.dispatchEvent(t)}}var $h,Zu,c0,u0,Ku,Ba,Gce=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ih=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},xl_RTL=(new ju,"e-rtl"),li=function(s){function e(t,i){return s.call(this,t,i)||this}return Gce(e,s),e.prototype.preRender=function(){},e.prototype.render=function(){this.initialize(),this.removeRippleEffect=zi(this.element,{selector:".e-btn"}),this.renderComplete()},e.prototype.initialize=function(){if(this.cssClass&&M([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),!X()||X()&&"progress-btn"!==this.getModuleName()){if(this.content){var t=this.enableHtmlSanitizer?$t.sanitize(this.content):this.content;this.element.innerHTML=t}this.setIconCss()}this.enableRtl&&this.element.classList.add(xl_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},e.prototype.controlStatus=function(t){this.element.disabled=t},e.prototype.setIconCss=function(){if(this.iconCss){var t=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(t.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(t):this.element.insertBefore(t,i)}},e.prototype.wireEvents=function(){this.isToggle&&C.add(this.element,"click",this.btnClickHandler,this)},e.prototype.unWireEvents=function(){this.isToggle&&C.remove(this.element,"click",this.btnClickHandler)},e.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},e.prototype.destroy=function(){var t=["e-primary",xl_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),s.prototype.destroy.call(this),A([this.element],t),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&z(i),this.unWireEvents(),wl&&this.removeRippleEffect()},e.prototype.getModuleName=function(){return"btn"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.Inject=function(){},e.prototype.onPropertyChanged=function(t,i){for(var n=this.element.querySelector("span.e-btn-icon"),r=0,o=Object.keys(t);r<o.length;r++)switch(o[r]){case"isPrimary":t.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(t.disabled);break;case"iconCss":n?t.iconCss?(n.className="e-btn-icon "+t.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):z(n):this.setIconCss();break;case"iconPosition":A([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&z(n),this.setIconCss();break;case"cssClass":i.cssClass&&A([this.element],i.cssClass.split(" ")),t.cssClass&&M([this.element],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?this.element.classList.add(xl_RTL):this.element.classList.remove(xl_RTL);break;case"content":qce(this.element)||this.element.classList.remove("e-icon-btn"),(!X()||X()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(t.content=$t.sanitize(t.content)),this.element.innerHTML=t.content,this.setIconCss());break;case"isToggle":t.isToggle?C.add(this.element,"click",this.btnClickHandler,this):(C.remove(this.element,"click",this.btnClickHandler),A([this.element],["e-active"]))}},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},ih([v("Left")],e.prototype,"iconPosition",void 0),ih([v("")],e.prototype,"iconCss",void 0),ih([v(!1)],e.prototype,"disabled",void 0),ih([v(!1)],e.prototype,"isPrimary",void 0),ih([v("")],e.prototype,"cssClass",void 0),ih([v("")],e.prototype,"content",void 0),ih([v(!1)],e.prototype,"isToggle",void 0),ih([v()],e.prototype,"locale",void 0),ih([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),ih([V()],e.prototype,"created",void 0),ih([et],e)}(Lt),Yce=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Oa=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},bL="e-check",x7="e-checkbox-disabled",a0="e-frame",wL="e-stop",SL="e-label",w1="e-ripple-container",CL="e-ripple-check",IL="e-ripple-stop",xL="e-rtl",TL="e-checkbox-wrapper",Qce=["title","class","style","disabled","readonly","name","value"],Os=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n.clickTriggered=!1,n.validCheck=!0,n}return Yce(e,s),e.prototype.changeState=function(t,i){var n,r=this.getWrapper().getElementsByClassName(a0)[0];wl&&(n=this.getWrapper().getElementsByClassName(w1)[0]),"check"===t?(r.classList.remove(wL),r.classList.add(bL),n&&(n.classList.remove(IL),n.classList.add(CL)),this.element.checked=!0,(this.element.required||this.element.closest("form")&&this.element.closest("form").classList.contains("e-formvalidator"))&&this.validCheck&&!i?(this.element.checked=!1,this.validCheck=!1):(this.element.required||this.element.closest("form")&&this.element.closest("form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):"uncheck"===t?(A([r],[bL,wL]),n&&A([n],[CL,IL]),this.element.checked=!1,(this.element.required||this.element.closest("form")&&this.element.closest("form").classList.contains("e-formvalidator"))&&this.validCheck&&!i?(this.element.checked=!0,this.validCheck=!1):(this.element.required||this.element.closest("form")&&this.element.closest("form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):(r.classList.remove(bL),r.classList.add(wL),n&&(n.classList.remove(CL),n.classList.add(IL)),this.element.indeterminate=!0,this.indeterminate=!0)},e.prototype.clickHandler=function(t){if("INPUT"===t.target.tagName&&this.clickTriggered)return this.isVue&&this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);("SPAN"===t.target.tagName||"LABEL"===t.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var i={checked:this.updateVueArrayModel(!1),event:t};this.trigger("change",i),t.stopPropagation()},e.prototype.destroy=function(){var t=this,i=this.getWrapper();s.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),z(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(n){t.element.removeAttribute(n)})):(["class"].forEach(function(n){i.removeAttribute(n)}),i.innerHTML=""))},e.prototype.focusHandler=function(){this.isFocused=!0},e.prototype.focusOutHandler=function(){var t=this.getWrapper();t&&t.classList.remove("e-focus"),this.isFocused=!1},e.prototype.getModuleName=function(){return"checkbox"},e.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},e.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},e.prototype.initialize=function(){c(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check",!0),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},e.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains(TL)||(t=this.createElement("div",{className:TL}),this.element.parentNode.insertBefore(t,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}}),n=this.createElement("span",{className:"e-icons "+a0});if(t.classList.add("e-wrapper"),this.enableRtl&&t.classList.add(xL),this.cssClass&&M([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),t.appendChild(i),i.appendChild(this.element),function I7(s,e){s.element.getAttribute("ejs-for")&&e.appendChild(s.createElement("input",{attrs:{name:s.name||s.element.name,value:"false",type:"hidden"}}))}(this,i),i.appendChild(n),wl){var r=this.createElement("span",{className:w1});"Before"===this.labelPosition?i.appendChild(r):i.insertBefore(r,n),zi(r,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},e.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},e.prototype.labelMouseDownHandler=function(t){this.isMouseClick=!0,Qu(t,this.getWrapper().getElementsByClassName(w1)[0])},e.prototype.labelMouseUpHandler=function(t){this.isMouseClick=!0;var i=this.getWrapper().getElementsByClassName(w1)[0];if(i){for(var n=i.querySelectorAll(".e-ripple-element"),r=0;r<n.length-1;r++)i.removeChild(i.childNodes[r]);Qu(t,i)}},e.prototype.onPropertyChanged=function(t,i){for(var n=this.getWrapper(),r=0,o=Object.keys(t);r<o.length;r++)switch(o[r]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(t.checked?"check":"uncheck");break;case"indeterminate":t.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":t.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,n.classList.remove(x7),n.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":i.cssClass&&A([n],i.cssClass.split(" ")),t.cssClass&&M([n],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?n.classList.add(xL):n.classList.remove(xL);break;case"label":this.setText(t.label);break;case"labelPosition":var l=n.getElementsByClassName(SL)[0],h=n.getElementsByTagName("label")[0];z(l),"After"===t.labelPosition?h.appendChild(l):h.insertBefore(l,n.getElementsByClassName(a0)[0]);break;case"name":this.element.setAttribute("name",t.name);break;case"value":if(this.isVue&&"object"==typeof t.value)break;this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}},e.prototype.preRender=function(){var t=this.element;this.tagName=this.element.tagName,t=function yL(s,e,t,i,n,r){var o=i;if(i.tagName===e){var a=R("ej2_instances",i);o=s("input",{attrs:{type:t}});for(var l=["change","cssClass","label","labelPosition","id"],h=0,d=i.attributes.length;h<d;h++)-1===l.indexOf(i.attributes[h].nodeName)&&o.setAttribute(i.attributes[h].nodeName,i.attributes[h].nodeValue);re(i,{class:n}),i.appendChild(o),ke("ej2_instances",a,o),d1(i,"ej2_instances")}return o}(this.createElement,"EJS-CHECKBOX","checkbox",t,TL),this.element=t,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=yt("e-"+this.getModuleName()))},e.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},e.prototype.setDisabled=function(){var t=this.getWrapper();this.element.disabled=!0,t.classList.add(x7),t.setAttribute("aria-disabled","true")},e.prototype.setText=function(t){var i=this.getWrapper();if(i){var n=i.getElementsByClassName(SL)[0];if(n)n.textContent=t;else{t=this.enableHtmlSanitizer?$t.sanitize(t):t,n=this.createElement("span",{className:SL,innerHTML:t});var r=i.getElementsByTagName("label")[0];"Before"===this.labelPosition?r.insertBefore(n,i.getElementsByClassName(a0)[0]):r.appendChild(n)}}},e.prototype.changeHandler=function(t){t.stopPropagation()},e.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},e.prototype.unWireEvents=function(){var t=this.wrapper;C.remove(t,"click",this.clickHandler),C.remove(this.element,"keyup",this.keyUpHandler),C.remove(this.element,"focus",this.focusHandler),C.remove(this.element,"focusout",this.focusOutHandler);var i=t.getElementsByTagName("label")[0];C.remove(i,"mousedown",this.labelMouseDownHandler),C.remove(i,"mouseup",this.labelMouseUpHandler);var n=k(this.element,"form");n&&C.remove(n,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&C.remove(this.element,"change",this.changeHandler)},e.prototype.wireEvents=function(){var t=this.getWrapper();C.add(t,"click",this.clickHandler,this),C.add(this.element,"keyup",this.keyUpHandler,this),C.add(this.element,"focus",this.focusHandler,this),C.add(this.element,"focusout",this.focusOutHandler,this);var i=t.getElementsByTagName("label")[0];C.add(i,"mousedown",this.labelMouseDownHandler,this),C.add(i,"mouseup",this.labelMouseUpHandler,this);var n=k(this.element,"form");n&&C.add(n,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&C.add(this.element,"change",this.changeHandler,this)},e.prototype.updateVueArrayModel=function(t){if(this.isVue&&"object"==typeof this.value){var i=this.element.value;if(i&&this.value){if(!t){var r=this.value.indexOf(i);return this.checked?r<0&&this.value.push(i):r>-1&&this.value.splice(r,1),this.value}for(var n=0;n<this.value.length;n++)i===this.value[n]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},e.prototype.updateHtmlAttributeToWrapper=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];if(Qce.indexOf(n)>-1){var r=this.getWrapper();"class"===n?M([r],this.htmlAttributes[""+n].split(" ")):"title"===n?r.setAttribute(n,this.htmlAttributes[""+n]):"style"===n?this.getWrapper().getElementsByClassName(a0)[0].setAttribute(n,this.htmlAttributes[""+n]):"disabled"===n?("true"===this.htmlAttributes[""+n]&&this.setDisabled(),this.element.setAttribute(n,this.htmlAttributes[""+n])):this.element.setAttribute(n,this.htmlAttributes[""+n])}}},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},Oa([V()],e.prototype,"change",void 0),Oa([V()],e.prototype,"created",void 0),Oa([v(!1)],e.prototype,"checked",void 0),Oa([v("")],e.prototype,"cssClass",void 0),Oa([v(!1)],e.prototype,"disabled",void 0),Oa([v(!1)],e.prototype,"indeterminate",void 0),Oa([v("")],e.prototype,"label",void 0),Oa([v("After")],e.prototype,"labelPosition",void 0),Oa([v("")],e.prototype,"name",void 0),Oa([v("")],e.prototype,"value",void 0),Oa([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),Oa([v({})],e.prototype,"htmlAttributes",void 0),Oa([et],e)}(Lt),KL=!1;function kr(s,e,t,i,n){return Zu=void 0,Zu=n,KL=!!i,s?(e||(e="left"),t||(t="top"),u0=s.ownerDocument,c0=s,function uue(s,e,t){switch($h=c0.getBoundingClientRect(),e+s){case"topcenter":ep(tV(),t),tp(D1(),t);break;case"topright":ep(eV(),t),tp(D1(),t);break;case"centercenter":ep(tV(),t),tp($L(),t);break;case"centerright":ep(eV(),t),tp($L(),t);break;case"centerleft":ep(k1(),t),tp($L(),t);break;case"bottomcenter":ep(tV(),t),tp(JL(),t);break;case"bottomright":ep(eV(),t),tp(JL(),t);break;case"bottomleft":ep(k1(),t),tp(JL(),t);break;default:ep(k1(),t),tp(D1(),t)}return c0=null,t}(e.toLowerCase(),t.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function ep(s,e){e.left=s}function tp(s,e){e.top=s}function Z7(){return u0.documentElement.scrollTop||u0.body.scrollTop}function K7(){return u0.documentElement.scrollLeft||u0.body.scrollLeft}function JL(){return KL?$h.bottom:$h.bottom+Z7()}function $L(){return D1()+$h.height/2}function D1(){return KL?$h.top:$h.top+Z7()}function k1(){return $h.left+K7()}function eV(){var s=c0&&c0.classList.contains("e-date-range-wrapper")?Zu?Zu.width:0:Zu&&$h.width>=Zu.width?Zu.width:0;return $h.right+K7()-s}function tV(){return k1()+$h.width/2}function iV(s,e,t,i){if(void 0===e&&(e=null),void 0===t&&(t={X:!1,Y:!1}),!t.Y&&!t.X)return{left:0,top:0};var n=s.getBoundingClientRect();if(Ba=e,Ku=s.ownerDocument,i||(i=kr(s,"left","top")),t.X){var r=Ba?i8():a8(),o=sV(),a=oV(),l=o-i.left,h=i.left+n.width-a;n.width>r?i.left=l>0&&h<=0?a-n.width:h>0&&l<=0?o:l>h?a-n.width:o:l>0?i.left+=l:h>0&&(i.left-=h)}if(t.Y){var d=Ba?n8():o8(),p=rV(),u=aV(),f=p-i.top,g=i.top+n.height-u;n.height>d?i.top=f>0&&g<=0?u-n.height:g>0&&f<=0?p:f>g?u-n.height:p:f>0?i.top+=f:g>0&&(i.top-=g)}return i}function rh(s,e,t,i){void 0===e&&(e=null);var n=kr(s,"left","top");t&&(n.left=t),i&&(n.top=i);var r=[];Ba=e,Ku=s.ownerDocument;var o=s.getBoundingClientRect(),l=n.left,h=n.left+o.width,p=t8(n.top,n.top+o.height),u=J7(l,h);return p.topSide&&r.push("top"),u.rightSide&&r.push("right"),u.leftSide&&r.push("left"),p.bottomSide&&r.push("bottom"),r}function fue(s,e,t,i,n,r,o,a,l){if(void 0===o&&(o=null),void 0===a&&(a={X:!0,Y:!0}),e&&s&&n&&r&&(a.X||a.Y)){var p,h={TL:null,TR:null,BL:null,BR:null},d={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(s).display){var u=s.style.visibility;s.style.visibility="hidden",s.style.display="block",p=s.getBoundingClientRect(),s.style.removeProperty("display"),s.style.visibility=u}else p=s.getBoundingClientRect();var f={posX:n,posY:r,offsetX:t,offsetY:i,position:{left:0,top:0}};Ba=o,Ku=e.ownerDocument,function mue(s,e,t,i,n){t.position=kr(s,t.posX,t.posY,i,n),e.TL=kr(s,"left","top",i,n),e.TR=kr(s,"right","top",i,n),e.BR=kr(s,"left","bottom",i,n),e.BL=kr(s,"right","bottom",i,n)}(e,h,f,l,p),nV(d,f,p),a.X&&$7(e,d,h,f,p,!0),a.Y&&h.TL.top>-1&&e8(e,d,h,f,p,!0),function gue(s,e,t){var i=0,n=0;if(null!=s.offsetParent&&("absolute"===getComputedStyle(s.offsetParent).position||"relative"===getComputedStyle(s.offsetParent).position)){var r=kr(s.offsetParent,"left","top",!1,t);i=r.left,n=r.top}s.style.top=e.position.top+e.offsetY-n+"px",s.style.left=e.position.left+e.offsetX-i+"px"}(s,f,p)}}function nV(s,e,t){s.TL={top:e.position.top+e.offsetY,left:e.position.left+e.offsetX},s.TR={top:s.TL.top,left:s.TL.left+t.width},s.BL={top:s.TL.top+t.height,left:s.TL.left},s.BR={top:s.TL.top+t.height,left:s.TL.left+t.width}}function J7(s,e){var t=!1,i=!1;return s-L1()<sV()&&(t=!0),e>oV()&&(i=!0),{leftSide:t,rightSide:i}}function $7(s,e,t,i,n,r){var o=J7(e.TL.left,e.TR.left);t.TL.left-L1()<=sV()&&(o.leftSide=!1),t.TR.left>oV()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&(i.posX="right"===i.posX?"left":"right",i.offsetX=i.offsetX+n.width,i.offsetX=-1*i.offsetX,i.position=kr(s,i.posX,i.posY,!1),nV(e,i,n),r&&$7(s,e,t,i,n,!1))}function e8(s,e,t,i,n,r){var o=t8(e.TL.top,e.BL.top);t.TL.top-A1()<=rV()&&(o.topSide=!1),t.BL.top>=aV()&&s.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&(i.posY="top"===i.posY?"bottom":"top",i.offsetY=i.offsetY+n.height,i.offsetY=-1*i.offsetY,i.position=kr(s,i.posX,i.posY,!1,n),nV(e,i,n),r&&e8(s,e,t,i,n,!1))}function t8(s,e){var t=!1,i=!1;return s-A1()<rV()&&(t=!0),e>aV()&&(i=!0),{topSide:t,bottomSide:i}}function i8(){return Ba.getBoundingClientRect().width}function n8(){return Ba.getBoundingClientRect().height}function r8(){return Ba.getBoundingClientRect().left}function s8(){return Ba.getBoundingClientRect().top}function rV(){return Ba?s8():0}function sV(){return Ba?r8():0}function oV(){return Ba?L1()+r8()+i8():L1()+a8()}function aV(){return Ba?A1()+s8()+n8():A1()+o8()}function A1(){return Ku.documentElement.scrollTop||Ku.body.scrollTop}function L1(){return Ku.documentElement.scrollLeft||Ku.body.scrollLeft}function o8(){return window.innerHeight}function a8(){var s=window.innerWidth,e=document.documentElement.getBoundingClientRect();return s-(s-(c(document.documentElement)?0:e.width))}var l8=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rr=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},h8=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return l8(e,s),Rr([v("left")],e.prototype,"X",void 0),Rr([v("top")],e.prototype,"Y",void 0),e}(ce),fs_OPEN="e-popup-open",fs_CLOSE="e-popup-close",dr=function(s){function e(t,i){return s.call(this,i,t)||this}return l8(e,s),e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"width":ge(this.element,{width:oe(t.width)});break;case"height":ge(this.element,{height:oe(t.height)});break;case"zIndex":ge(this.element,{zIndex:t.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var a=t.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+a).toString()+"px";break;case"offsetY":var l=t.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==t.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},e.prototype.getModuleName=function(){return"popup"},e.prototype.resolveCollision=function(){this.checkCollision()},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove("e-popup","e-rtl",fs_OPEN,fs_CLOSE),this.content=null,this.relateTo=null,s.prototype.destroy.call(this)},e.prototype.render=function(){this.element.classList.add("e-popup");var t={};1e3!==this.zIndex&&(t.zIndex=this.zIndex),"auto"!==this.width&&(t.width=oe(this.width)),"auto"!==this.height&&(t.height=oe(this.height)),ge(this.element,t),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},e.prototype.wireEvents=function(){E.isDevice&&C.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},e.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,i=this.getScrollableParent(this.getRelateToElement());t<i.length;t++)C.add(i[t],"scroll",this.scrollRefresh,this)},e.prototype.unwireEvents=function(){E.isDevice&&C.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},e.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,i=this.getScrollableParent(this.getRelateToElement());t<i.length;t++)C.remove(i[t],"scroll",this.scrollRefresh)},e.prototype.getRelateToElement=function(){var t=""===this.relateTo||c(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:t},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},e.prototype.scrollRefresh=function(t){if("reposition"===this.actionOnScroll?!c(this.element)&&!(this.element.offsetParent===t.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==t.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),t.target);i||this.targetInvisibleStatus?i&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},e.prototype.isElementOnViewport=function(t,i){for(var n=this.getScrollableParent(t),r=0;r<n.length;r++)if(!this.isElementVisible(t,n[r]))return!1;return!0},e.prototype.isElementVisible=function(t,i){var n=this.checkGetBoundingClientRect(t);if(!n.height||!n.width)return!1;if(c(this.checkGetBoundingClientRect(i))){var o=window,a={top:o.scrollY,left:o.scrollX,right:o.scrollX+o.outerWidth,bottom:o.scrollY+o.outerHeight},l=kr(t),h={top:l.top,left:l.left,right:l.left+n.width,bottom:l.top+n.height},d={top:a.bottom-h.top,left:a.right-h.left,bottom:h.bottom-a.top,right:h.right-a.left};return d.top>0&&d.left>0&&d.right>0&&d.bottom>0}var r=i.getBoundingClientRect();return!(n.bottom<r.top||n.bottom>r.bottom||n.right>r.right||n.left<r.left)},e.prototype.preRender=function(){},e.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.setContent=function(){if(!c(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var t=this.getRelateToElement(),i=this.content.props;(!t.classList.contains("e-dropdown-btn")||c(i))&&this.element.appendChild(this.content)}},e.prototype.orientationOnChange=function(){var t=this;setTimeout(function(){t.refreshPosition()},200)},e.prototype.refreshPosition=function(t,i){c(t)||this.checkFixedParent(t),this.reposition(),i||this.checkCollision()},e.prototype.reposition=function(){var t,i,n=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)t={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var r=void 0,o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),t="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else n?(o=this.element.style.display,this.element.style.display="block",t=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=o):t={left:0,top:0};c(t)||(this.element.style.left=t.left+"px",this.element.style.top=t.top+"px")},e.prototype.checkGetBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch{return null}},e.prototype.getAnchorPosition=function(t,i,n,r,o){var a=this.checkGetBoundingClientRect(i),l=this.checkGetBoundingClientRect(t);if(c(a)||c(l))return null;var h=t,d={left:0,top:0};switch(i.offsetParent&&"BODY"===i.offsetParent.tagName&&"BODY"===t.tagName?d=kr(t):(i.classList.contains("e-dlg-modal")&&"BODY"!==h.tagName&&(i=i.parentElement),d=function E1(s,e){var t=!1,i={left:0,top:0},n=s;if(!s||!e)return i;for(c(e.offsetParent)&&"fixed"===e.style.position&&(t=!0);(e.offsetParent||t)&&s&&e.offsetParent!==s;)i.left+=s.offsetLeft,i.top+=s.offsetTop,s=s.offsetParent;for(s=n;(e.offsetParent||t)&&s&&e.offsetParent!==s;)i.left-=s.scrollLeft,i.top-=s.scrollTop,s=s.parentElement;return i}(h,i)),n.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?d.left+=window.innerWidth/2-a.width/2:d.left+="container"===this.targetType?l.width/2-a.width/2:l.width/2;break;case"right":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?d.left+=window.innerWidth-a.width:d.left+="container"===this.targetType?l.width-a.width:l.width}switch(n.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?d.top+=window.innerHeight/2-a.height/2:d.top+="container"===this.targetType?l.height/2-a.height/2:l.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?d.top+=window.innerHeight-a.height:d.top+="container"===this.targetType?l.height-a.height:l.height}return d.left+=r,d.top+=o,d},e.prototype.callFlip=function(t){var i=this.getRelateToElement();fue(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,t,this.fixedParent)},e.prototype.callFit=function(t){if(0!==rh(this.element,this.viewPortElement).length)if(c(this.viewPortElement)){var i=iV(this.element,this.viewPortElement,t);t.X&&(this.element.style.left=i.left+"px"),t.Y&&(this.element.style.top=i.top+"px")}else{var n=this.checkGetBoundingClientRect(this.element),r=this.checkGetBoundingClientRect(this.viewPortElement);if(c(n)||c(r))return null;t&&!0===t.Y&&(r.top>n.top?this.element.style.top="0px":r.bottom<n.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(n.bottom-r.bottom)+"px")),t&&!0===t.X&&(r.right<n.right?this.element.style.left=parseInt(this.element.style.left,10)-(n.right-r.right)+"px":r.left>n.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(r.left-n.left)+"px"))}},e.prototype.checkCollision=function(){var t=this.collision.X,i=this.collision.Y;"none"===t&&"none"===i||("flip"===t&&"flip"===i?this.callFlip({X:!0,Y:!0}):"fit"===t&&"fit"===i?this.callFit({X:!0,Y:!0}):("flip"===t?this.callFlip({X:!0,Y:!1}):"flip"===i&&this.callFlip({Y:!0,X:!1}),"fit"===t?this.callFit({X:!0,Y:!1}):"fit"===i&&this.callFit({X:!1,Y:!0})))},e.prototype.show=function(t,i){var n=this;if(this.getRelateToElement().classList.contains("e-filemanager")&&(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0]),this.wireEvents(),!c(this.fmDialogContainer)&&E.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!c(i)){var o=c(i)?this.element:i;this.zIndex=ed(o),ge(this.element,{zIndex:this.zIndex})}t=c(t)||"object"!=typeof t?this.showAnimation:t,("none"!==this.collision.X||"none"!==this.collision.Y)&&(A([this.element],fs_CLOSE),M([this.element],fs_OPEN),this.checkCollision(),A([this.element],fs_OPEN),M([this.element],fs_CLOSE)),c(t)?(A([this.element],fs_CLOSE),M([this.element],fs_OPEN),this.trigger("open")):(t.begin=function(){n.isDestroyed||(A([n.element],fs_CLOSE),M([n.element],fs_OPEN))},t.end=function(){n.isDestroyed||n.trigger("open")},new Gi(t).animate(this.element))},e.prototype.hide=function(t){var i=this;t=c(t)||"object"!=typeof t?this.hideAnimation:t,c(t)?(A([this.element],fs_OPEN),M([this.element],fs_CLOSE),this.trigger("close")):(t.end=function(){i.isDestroyed||(A([i.element],fs_OPEN),M([i.element],fs_CLOSE),i.trigger("close"))},new Gi(t).animate(this.element)),this.unwireEvents()},e.prototype.getScrollableParent=function(t){return this.checkFixedParent(t),um(t,this.fixedParent)},e.prototype.checkFixedParent=function(t){for(var i=t.parentElement;i&&"HTML"!==i.tagName;){var n=getComputedStyle(i);"fixed"===n.position&&!c(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&"hidden"!==getComputedStyle(this.element.offsetParent).overflow&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?oe(window.scrollY-parseInt(this.element.style.top,10)):oe(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!c(this.element)&&c(this.element.offsetParent)&&"fixed"===n.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},Rr([v("auto")],e.prototype,"height",void 0),Rr([v("auto")],e.prototype,"width",void 0),Rr([v(null)],e.prototype,"content",void 0),Rr([v("container")],e.prototype,"targetType",void 0),Rr([v(null)],e.prototype,"viewPortElement",void 0),Rr([v({X:"none",Y:"none"})],e.prototype,"collision",void 0),Rr([v("")],e.prototype,"relateTo",void 0),Rr([Fe({},h8)],e.prototype,"position",void 0),Rr([v(0)],e.prototype,"offsetX",void 0),Rr([v(0)],e.prototype,"offsetY",void 0),Rr([v(1e3)],e.prototype,"zIndex",void 0),Rr([v(!1)],e.prototype,"enableRtl",void 0),Rr([v("reposition")],e.prototype,"actionOnScroll",void 0),Rr([v(null)],e.prototype,"showAnimation",void 0),Rr([v(null)],e.prototype,"hideAnimation",void 0),Rr([V()],e.prototype,"open",void 0),Rr([V()],e.prototype,"close",void 0),Rr([V()],e.prototype,"targetExitViewport",void 0),Rr([et],e)}(Lt);function um(s,e){for(var t=getComputedStyle(s),i=[],n=/(auto|scroll)/,r=s.parentElement;r&&"HTML"!==r.tagName;){var o=getComputedStyle(r);!("absolute"===t.position&&"static"===o.position)&&n.test(o.overflow+o.overflowY+o.overflowX)&&i.push(r),r=r.parentElement}return e||i.push(document),i}function ed(s){for(var e=s.parentElement,t=[];e&&"BODY"!==e.tagName;){var i=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(e,null).getPropertyValue("position");"auto"!==i&&"static"!==n&&t.push(i),e=e.parentElement}for(var r=[],o=0;o<document.body.children.length;o++)s.isEqualNode(document.body.children[o])||(i=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&r.push(i));r.push("999");var a=[];if(!c(s.parentElement)&&"BODY"!==s.parentElement.tagName){var l=[].slice.call(s.parentElement.children);for(o=0;o<l.length;o++)s.isEqualNode(l[o])||(i=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&a.push(i))}var h=t.concat(r,a),d=Math.max.apply(Math,h)+1;return d>2147483647?2147483647:d}var Hi,td,fm,mc,pV,ip,di,vc,lV=["north-west","north","north-east","west","east","south-west","south","south-east"],f0="e-resize-handle",gc="e-focused-handle",vue="e-dlg-resizable",d8=["e-restrict-left"],p8="e-resize-viewport",yue=["north","west","east","south"],hV=0,dV=0,c8=0,u8=0,g0=0,m0=0,v0=null,cV=null,uV=null,V1=!0,f8=0,fV=!0;function wue(s){gV();var e=F("span",{attrs:{unselectable:"on",contenteditable:"false"}});e.setAttribute("class","e-dialog-border-resize e-"+s),"south"===s&&(e.style.height="2px",e.style.width="100%",e.style.bottom="0px",e.style.left="0px"),"north"===s&&(e.style.height="2px",e.style.width="100%",e.style.top="0px",e.style.left="0px"),"east"===s&&(e.style.height="100%",e.style.width="2px",e.style.right="0px",e.style.top="0px"),"west"===s&&(e.style.height="100%",e.style.width="2px",e.style.left="0px",e.style.top="0px"),Hi.appendChild(e)}function g8(s){var e;return c(s)||(e="string"==typeof s?document.querySelector(s):s),e}function m8(s){c(s)&&(s=this);for(var e=Hi.querySelectorAll("."+f0),t=0;t<e.length;t++)C.add(td=e[t],"mousedown",y8,s),C.add(td,"msie"===E.info.name?"pointerdown":"touchstart",b8,s);var n=Hi.querySelectorAll(".e-dialog-border-resize");if(!c(n))for(t=0;t<n.length;t++)C.add(td=n[t],"mousedown",y8,s),C.add(td,"msie"===E.info.name?"pointerdown":"touchstart",b8,s)}function v8(s){return s.indexOf("mouse")>-1?"mouse":"touch"}function y8(s){if(s.preventDefault(),Hi=s.target.parentElement,gV(),g0=s.pageX,m0=s.pageY,s.target.classList.add(gc),c(v0)||!0!==v0(s,this)){this.targetEle&&Hi&&Hi.querySelector("."+vue)&&(di="body"===this.target?null:this.targetEle,ip=this.targetEle.clientWidth,mc=this.targetEle.clientHeight);var e=c(di)?document:di;C.add(e,"mousemove",y0,this),C.add(document,"mouseup",P1,this);for(var t=0;t<d8.length;t++)V1=!Hi.classList.contains(d8[t])}}function P1(s){var e="msie"===E.info.name?"pointermove":"touchmove",t="msie"===E.info.name?"pointerup":"touchend",i=c(di)?document:di,n="msie"===E.info.name?"pointerdown":"touchstart";C.remove(i,"mousemove",y0),C.remove(i,e,y0),C.remove(i,n,y0),c(document.body.querySelector("."+gc))||document.body.querySelector("."+gc).classList.remove(gc),c(uV)||uV(s,this),C.remove(document,"mouseup",P1),C.remove(document,t,P1)}function gV(){hV=parseFloat(getComputedStyle(Hi,null).getPropertyValue("width").replace("px","")),dV=parseFloat(getComputedStyle(Hi,null).getPropertyValue("height").replace("px","")),c8=Hi.getBoundingClientRect().left,u8=Hi.getBoundingClientRect().top}function b8(s){Hi=s.target.parentElement,gV();var e=Hi.classList.contains("e-dialog");(s.target.classList.contains(f0)||s.target.classList.contains("e-dialog-border-resize"))&&e&&s.target.classList.add(gc);var t=s.touches?s.changedTouches[0]:s;if(g0=t.pageX,m0=t.pageY,c(v0)||!0!==v0(s,this)){var i="msie"===E.info.name?"pointermove":"touchmove",n="msie"===E.info.name?"pointerup":"touchend",r=c(di)?document:di;C.add(r,i,y0,this),C.add(document,n,P1,this)}}function y0(s){if(s.target.classList.contains(f0)&&s.target.classList.contains(gc)?td=s.target:c(document.body.querySelector("."+gc))||(td=document.body.querySelector("."+gc)),!c(td)){for(var e="",t=0;t<lV.length;t++)td.classList.contains("e-"+lV[t])&&(e=lV[t]);switch(c(cV)||cV(s,this),e){case"south":mV(s);break;case"north":vV(s);break;case"west":yV(s);break;case"east":bV(s);break;case"south-east":mV(s),bV(s);break;case"south-west":mV(s),yV(s);break;case"north-east":vV(s),bV(s);break;case"north-west":vV(s),yV(s)}}}function bc(s){return s.getBoundingClientRect()}function mV(s){var o,e=document.documentElement.clientHeight,t=!1,n=(s.touches?s.changedTouches[0]:s).pageY,r=bc(Hi);c(di)||(o=bc(di)),c(di)?c(di)&&(e-n>=0||r.top<0)&&(t=!0):t=!0;var a=dV+(n-m0);a=a>fm?a:fm;var l=0;c(di)||(l=o.top);var h=c(di)?0:di.offsetHeight-di.clientHeight,d=r.top-l-h/2;if(d=d<0?0:d,r.top>0&&d+a>mc){if(t=!1,Hi.classList.contains(p8))return;Hi.style.height=mc-parseInt(d.toString(),10)+"px"}else{var p=0;if(t){r.top<0&&e+(r.height+r.top)>0&&a+(p=r.top)<=30&&(a=r.height-(r.height+r.top)+30),a+r.top>=mc&&(Hi.style.height=r.height+(e-(r.height+r.top))+"px");var u=c(di)?p:d;a>=fm&&a+u<=mc&&(Hi.style.height=a+"px")}}}function vV(s){var t,e=!1,i="mouse"===v8(s.type)?s.pageY:s.touches[0].pageY,n=bc(Hi);c(di)||(t=bc(di)),(!c(di)&&n.top-t.top>0||c(di)&&i>0)&&(e=!0);var r=dV-(i-m0);if(e&&r>=fm&&r<=mc){var o=0;c(di)||(o=t.top);var a=u8-o+(i-m0);a=a>0?a:1,Hi.style.height=r+"px",Hi.style.top=a+"px"}}function yV(s){var i,e=document.documentElement.clientWidth,t=!1;c(di)||(i=bc(di));var n="mouse"===v8(s.type)?s.pageX:s.touches[0].pageX,r=bc(Hi),o=c(di)?0:di.offsetWidth-di.clientWidth,a=c(di)?0:i.left,l=c(di)?0:i.width;c(vc)&&(c(di)?vc=e:(vc=r.left-a-o/2+r.width,vc+=l-o-vc)),(!c(di)&&Math.floor(r.left-i.left+r.width+(i.right-r.right))-o<=ip||c(di)&&n>=0)&&(t=!0);var h=hV-(n-g0);if(V1&&(h=h>vc?vc:h),t&&h>=pV&&h<=ip){var d=0;c(di)||(d=i.left);var p=c8-d+(n-g0);p=p>0?p:1,h!==f8&&fV&&(Hi.style.width=h+"px"),V1&&(Hi.style.left=p+"px",fV=1!==p)}f8=h}function bV(s){var i,e=document.documentElement.clientWidth,t=!1;c(di)||(i=bc(di));var r=(s.touches?s.changedTouches[0]:s).pageX,o=bc(Hi);(!c(di)&&(o.left-i.left+o.width<=ip||o.right-i.left>=o.width)||c(di)&&e-r>0)&&(t=!0);var a=hV+(r-g0),l=0;if(c(di)||(l=i.left),o.left-l+a>ip){if(t=!1,Hi.classList.contains(p8))return;Hi.style.width=ip-(o.left-l)+"px"}t&&a>=pV&&a<=ip&&(Hi.style.width=a+"px")}function w8(){for(var s=Hi.querySelectorAll("."+f0),e=0;e<s.length;e++)z(s[e]);var t=Hi.querySelectorAll(".e-dialog-border-resize");if(!c(t))for(e=0;e<t.length;e++)z(t[e])}var A8,wV=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Wt=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},xue=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return wV(e,s),Wt([v(!0)],e.prototype,"isFlat",void 0),Wt([v()],e.prototype,"buttonModel",void 0),Wt([v("Button")],e.prototype,"type",void 0),Wt([V()],e.prototype,"click",void 0),e}(ce),Tue=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return wV(e,s),Wt([v("Fade")],e.prototype,"effect",void 0),Wt([v(400)],e.prototype,"duration",void 0),Wt([v(0)],e.prototype,"delay",void 0),e}(ce),N1="e-dialog",SV="e-rtl",CV="e-dlg-header-content",S8="e-dlg-header",b0="e-footer-content",IV="e-dlg-modal",C8="e-icon-dlg-close",id="e-dlg-target",sh="e-scroll-disabled",I8="e-device",F1="e-dlg-fullscreen",x8="e-dlg-closeicon-btn",T8="e-popup-open",xV="Information",M8="e-scroll-disabled",E8="e-alert-dialog",D8="e-confirm-dialog",TV="e-dlg-resizable",R1="e-restrict-left",k8="e-resize-viewport",MV="user action",Or=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.needsID=!0,n}return wV(e,s),e.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=oe(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},e.prototype.initializeValue=function(){this.dlgClosedBy=MV},e.prototype.preRender=function(){var t=this;if(this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(r){t.dlgClosedBy="close icon",t.hide(r)},this.dlgOverlayClickEventHandler=function(r){t.dlgClosedBy="overlayClick",r.preventFocus=!1,t.trigger("overlayClick",r,function(o){o.preventFocus||t.focusContent(),t.dlgClosedBy=MV})},this.l10n=new mi("dialog",{close:"Close"},this.locale),this.checkPositionData(),c(this.target)){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=n}},e.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},e.prototype.isNumberValue=function(t){return/^[-+]?\d*\.?\d+$/.test(t)},e.prototype.checkPositionData=function(){if(!c(this.position)){if(!c(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}c(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(i=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i)}},e.prototype.getEle=function(t,i){for(var n=void 0,r=0;r<t.length;r++)if(t[r].classList.contains(i)){n=t[r];break}return n},e.prototype.getMinHeight=function(){var t="0px",i="0px";c(this.element.querySelector("."+CV))||(t=getComputedStyle(this.headerContent).height);var n=this.getEle(this.element.children,b0);c(n)||(i=getComputedStyle(n).height);var r=parseInt(t.slice(0,t.indexOf("p")),10),o=parseInt(i.slice(0,i.indexOf("p")),10);return function Sue(s){fm=s}(r+30+(isNaN(o)?0:o)),r+30+o},e.prototype.onResizeStart=function(t,i){return i.trigger("resizeStart",t),t.cancel},e.prototype.onResizing=function(t,i){i.trigger("resizing",t)},e.prototype.onResizeComplete=function(t,i){i.trigger("resizeStop",t),this.updatePersistData()},e.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!c(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(TV);for(var t=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,n="",r=0;r<this.resizeHandles.length;r++){if("All"===this.resizeHandles[r]){n="south north east west north-east north-west south-east south-west";break}var o="";switch(this.resizeHandles[r].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[r].toString()}n+=o.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===n.trim()?n="south-west":this.enableRtl&&"south-west"===n.trim()&&(n="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(R1):this.isModal&&this.target===document.body&&this.element.classList.add(k8),function bue(s){v0=s.resizeBegin,cV=s.resizing,uV=s.resizeComplete,Hi=g8(s.element),di=g8(s.boundary);for(var e=s.direction.split(" "),t=0;t<e.length;t++)if(yue.indexOf(e[t])>=0&&e[t])wue(e[t]);else if(""!==e[t].trim()){var i=F("div",{className:"e-icons "+f0+" e-"+e[t]});Hi.appendChild(i)}fm=s.minHeight,pV=s.minWidth,ip=s.maxWidth,mc=s.maxHeight,s.proxy&&s.proxy.element&&s.proxy.element.classList.contains("e-dialog")?m8(s.proxy):m8()}({element:this.element,direction:n,minHeight:parseInt(t.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else w8(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?R1:k8),this.element.classList.remove(TV)},e.prototype.getFocusElement=function(t){var n=t.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:n[n.length-1]}},e.prototype.keyDown=function(t){var i=this;if(9===t.keyCode&&this.isModal){var n=void 0;c(this.btnObj)||(n=this.btnObj[this.btnObj.length-1]),c(this.btnObj)&&!c(this.ftrTemplateContent)&&(n=this.getFocusElement(this.ftrTemplateContent)),c(this.btnObj)&&c(this.ftrTemplateContent)&&!c(this.contentEle)&&(n=this.getFocusElement(this.contentEle)),!c(n)&&document.activeElement===n.element&&!t.shiftKey&&(t.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&t.shiftKey&&(t.preventDefault(),c(n)||n.element.focus())}var h,r=document.activeElement,o=["input","textarea"].indexOf(r.tagName.toLowerCase())>-1,a=!1;if(o||(a=r.hasAttribute("contenteditable")&&"true"===r.getAttribute("contenteditable")),27===t.keyCode&&this.closeOnEscape){this.dlgClosedBy="escape";var l=document.querySelector(".e-popup-open:not(.e-dialog)");!c(l)&&!l.classList.contains("e-toolbar-pop")||this.hide(t)}(13===t.keyCode&&!t.ctrlKey&&"textarea"!==r.tagName.toLowerCase()&&o&&!c(this.primaryButtonEle)||13===t.keyCode&&t.ctrlKey&&("textarea"===r.tagName.toLowerCase()||a)&&!c(this.primaryButtonEle))&&this.buttons.some(function(p,u){h=u;var f=p.buttonModel;return!c(f)&&!0===f.isPrimary})&&"function"==typeof this.buttons[h].click&&setTimeout(function(){i.buttons[h].click.call(i,t)})},e.prototype.initialize=function(){c(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||M([this.element],N1),E.isDevice&&M([this.element],I8),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},e.prototype.initRender=function(){var t=this;if(this.initialRender=!0,this.isBlazorServerRender()||re(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&c(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&c(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!c(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||c(this.footerTemplate)?c(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!c(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(re(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&c(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var i=0,n=this.dlgContainer.children;i<n.length;i++)n[i].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=n[i])}if(!0!==this.element.classList.contains(E8)&&!0!==this.element.classList.contains(D8)&&!c(this.element.parentElement)){var r=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),r.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}c(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new dr(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(o){var a={container:t.isModal?t.dlgContainer:t.element,element:t.element,target:t.target,preventFocus:!1};t.enableResize&&t.resetResizeIcon(),t.trigger("open",a,function(l){l.preventFocus||t.focusContent()})},close:function(o){t.isModal&&M([t.dlgOverlay],"e-fade"),t.unBindEvent(t.element),t.isModal&&(t.dlgContainer.style.display="none"),t.trigger("close",t.closeArgs);var a=document.activeElement;!c(a)&&!c(a.blur)&&a.blur(),!c(t.storeActiveElement)&&!c(t.storeActiveElement.focus)&&t.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(M([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},e.prototype.resetResizeIcon=function(){var t=this.getMinHeight();if(this.targetEle.offsetHeight<t){var n=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));c(n)||(n.style.bottom="-"+t.toString()+"px")}},e.prototype.setOverlayZindex=function(t){var i;i=c(t)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:t,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},e.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},e.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},e.prototype.setAllowDragging=function(){var t=this,i="."+CV;this.element.classList.contains("e-draggable")||(this.dragObj=new Sl(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:i,dragStart:function(n){t.trigger("dragStart",n,function(r){X()&&r.bindEvents(n.dragElement)})},dragStop:function(n){t.isModal&&(c(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y),t.element.style.position="relative"),t.trigger("dragStop",n),t.element.classList.remove(R1),t.updatePersistData()},drag:function(n){t.trigger("drag",n)}}),c(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},e.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var t=0;t<this.buttons.length;t++){var i=c(this.buttons[t].type)?"button":this.buttons[t].type.toLowerCase(),n=this.createElement("button",{className:this.cssClass,attrs:{type:i}});this.buttonContent.push(n.outerHTML)}this.setFooterTemplate()}t=0;for(var r,o=this.element.children;t<o.length;t++)o[t].classList.contains(b0)&&(r=o[t].querySelectorAll("button"));for(t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new li(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+b0)),!c(this.ftrTemplateContent)&&r.length>0&&("function"==typeof this.buttons[t].click&&C.add(r[t],"click",this.buttons[t].click,this),"object"==typeof this.buttons[t].click&&C.add(r[t],"click",this.buttonClickHandler.bind(this,t),this)),!this.isBlazorServerRender()&&!c(this.ftrTemplateContent)&&(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.buttons[t].isFlat&&this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},e.prototype.buttonClickHandler=function(t){this.trigger("buttons["+t+"].click",{})},e.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!c(this.content)&&""!==this.content||!this.initialRender)&&(("string"!=typeof this.content||X())&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),c(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&E.isIE&&""===this.element.style.width&&!c(this.width)&&(this.element.style.width=oe(this.width)),this.setMaxHeight())},e.prototype.setTemplate=function(t,i,n){var r,o,a;o=i.classList.contains(S8)?this.element.id+"header":i.classList.contains(b0)?this.element.id+"footerTemplate":this.element.id+"content",c(t.outerHTML)?("string"==typeof t||"string"!=typeof t||X()&&!this.isStringTemplate)&&("string"==typeof t&&(t=this.sanitizeHelper(t)),this.isVue||"string"!=typeof t?(r=qe(t),a=t):i.innerHTML=t):i.appendChild(t);var l=[];if(!c(r)){for(var d=0,p=r({},this,n,o,!(X()&&!this.isStringTemplate&&0===a.indexOf("<div>Blazor"))||this.isStringTemplate);d<p.length;d++)l.push(p[d]);Le([].slice.call(l),i)}},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var i=$t.beforeSanitize();Q(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!c(i.helper)?t=i.helper(t):i.cancel||(t=$t.serializeValue(i,t))}return t},e.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!c(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=t,E.isIE&&"auto"===this.height&&!c(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},e.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?M([this.element],SV):A([this.element],SV)),c(this.element.querySelector(".e-resize-handle"))||(w8(),this.setResize())},e.prototype.setTargetContent=function(){var t=this;if(c(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(n){8!==n.nodeType&&t.innerContentElement.appendChild(n)}))}},e.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:S8}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),re(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging()},e.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:b0}),""===this.footerTemplate||c(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},e.prototype.createHeaderContent=function(){c(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:CV}))},e.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:x8,attrs:{type:"button"}}),this.closeIconBtnObj=new li({cssClass:"e-flat",iconCss:C8+" e-icons"}),this.closeIconTitle(),c(this.headerContent)?(this.createHeaderContent(),Ii([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Ii([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},e.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",t),this.closeIcon.setAttribute("aria-label",t)},e.prototype.setCSSClass=function(t){t&&(A([this.element],t.split(" ")),this.isModal&&!c(this.dlgContainer)&&A([this.dlgContainer],t.split(" "))),this.cssClass&&(M([this.element],this.cssClass.split(" ")),this.isModal&&!c(this.dlgContainer)&&M([this.dlgContainer],this.cssClass.split(" ")))},e.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove(T8),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),M([this.element],IV),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},e.prototype.getValidFocusNode=function(t){for(var i,n=0;n<t.length;n++){if(((i=t[n]).clientHeight>0||"a"===i.tagName.toLowerCase()&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},e.prototype.focusableElements=function(t){if(!c(t)){var n=t.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(n)}return null},e.prototype.getAutoFocusNode=function(t){var i=t.querySelector("."+x8),r=t.querySelectorAll("[autofocus]"),o=this.getValidFocusNode(r);if(X()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),c(o)){if(!c(o=this.focusableElements(this.contentEle)))return o;if(!c(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else i=o;return i},e.prototype.disableElement=function(t,i){var n=t?t.matches||t.webkitMatchesSelector||t.msGetRegionContent:null;if(n)for(;t;t=t.parentNode)if(t instanceof Element&&n.call(t,i))return t;return null},e.prototype.focusContent=function(){var t=this.getAutoFocusNode(this.element),i=c(t)?this.element:t,n=E.userAgent;(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},e.prototype.bindEvent=function(t){C.add(t,"keydown",this.keyDown,this)},e.prototype.unBindEvent=function(t){C.remove(t,"keydown",this.keyDown)},e.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},e.prototype.isBlazorServerRender=function(){return X()&&this.isServerRendered},e.prototype.getModuleName=function(){return"dialog"},e.prototype.onPropertyChanged=function(t,i){if(this.element.classList.contains(N1))for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"content":c(this.content)||""===this.content?c(this.contentEle)||(z(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),c(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||c(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),z(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||c(this.header)?this.headerEle&&(z(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||c(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||c(this.footerTemplate)){if(!this.ftrTemplateContent)return;z(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||c(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(C8).length>0?this.showCloseIcon||""!==this.header&&!c(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():z(this.closeIcon):(z(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":ge(this.element,{height:oe(t.height)}),this.updatePersistData();break;case"width":ge(this.element,{width:oe(t.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":var a=this.buttons.length;!c(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&(z(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var l=0;l<a;l++)c(this.buttons[l].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!c(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(t.target);break;case"position":if(this.checkPositionData(),this.isModal){var h=c(i.position)||c(i.position.X)?this.position.X:i.position.X,d=c(i.position)||c(i.position.Y)?this.position.Y:i.position.Y;this.dlgContainer.classList.contains("e-dlg-"+h+"-"+d)&&this.dlgContainer.classList.remove("e-dlg-"+h+"-"+d)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=oe(this.minHeight))}},e.prototype.setTarget=function(t){this.popupObj.relateTo=t,this.target=t,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},e.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)c(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",c(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(A([this.element],IV),A([document.body],[id,sh]),z(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&C.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.setzIndex=function(t,i){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0;var r=ed(t);this.zIndex=r>this.zIndex?r:this.zIndex,this.isProtectedOnChange=n,i&&(this.popupObj.zIndex=this.zIndex)},e.prototype.windowResizeHandler=function(){(function Cue(s){ip=s})(this.targetEle.clientWidth),function Iue(s){mc=s}(this.targetEle.clientHeight),this.setMaxHeight()},e.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},e.prototype.destroy=function(){if(!this.isDestroyed){var t=[SV,IV,TV,R1,F1,I8],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(A([this.targetEle],[id,sh]),!c(this.element)&&this.element.classList.contains(F1)&&A([document.body],[id,sh]),this.isModal&&A([c(this.targetEle)?document.body:this.targetEle],sh),this.unWireEvents(),!c(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(c(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),c(this.dragObj)||this.dragObj.destroy(),!c(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),A([this.element],t),!c(this.cssClass)&&""!==this.cssClass&&A([this.element],this.cssClass.split(" ")),!c(this.refElement)&&!c(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),z(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(z(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),z(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!c(this.element.children))for(n=0;n<=this.element.children.length;n++)z(this.element.children[n-=n]);for(n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.isBlazorServerRender()?this.isDestroyed=!0:s.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},e.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},e.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},e.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&C.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&C.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.unWireEvents=function(){if(this.showCloseIcon&&C.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&C.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!c(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var t=0;t<this.buttons.length;t++)"function"==typeof this.buttons[t].click&&C.remove(this.ftrTemplateContent.children[t],"click",this.buttons[t].click)},e.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},e.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},e.prototype.show=function(t){var i=this;if(this.element.classList.contains(N1)){if(!this.element.classList.contains(T8)||!c(t)){c(t)||this.fullScreen(t);var n=X()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",n,function(r){if(!r.cancel){i.element.style.maxHeight!==n.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=n.maxHeight),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!c(i.dlgOverlay)&&(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",A([i.dlgOverlay],"e-fade"),c(i.targetEle)?M([document.body],[id,sh]):(i.dlgContainer.style.position=i.targetEle===document.body?"fixed":"absolute",i.dlgOverlay.style.position="absolute",i.element.style.position="relative",M([i.targetEle],[id,sh])));var o={name:i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.calculatezIndex&&(i.setzIndex(i.isModal?i.element.parentElement:i.element,!0),ge(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),"None"===i.animationSettings.effect?i.popupObj.show():i.popupObj.show(o),i.dialogOpen=!0;var l=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=l}})}this.isReact&&this.renderReactTemplates()}},e.prototype.hide=function(t){var i=this;if(this.element.classList.contains(N1)&&this.preventVisibility){var n=X()?{cancel:!1,isInteracted:!!t,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:t}:{cancel:!1,isInteracted:!!t,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:t,closedBy:this.dlgClosedBy};this.closeArgs=n,this.trigger("beforeClose",n,function(r){if(!r.cancel){i.isModal&&(c(i.targetEle)||A([i.targetEle],[id,sh])),document.body.classList.contains(id)&&document.body.classList.contains(sh)&&A([document.body],[id,sh]);var o={name:i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};"None"===i.animationSettings.effect?i.popupObj.hide():i.popupObj.hide(o),i.dialogOpen=!1;var a=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=a}i.dlgClosedBy=MV})}},e.prototype.fullScreen=function(t){if(t){this.element.style.top=document.scrollingElement.scrollTop+"px",M([this.element],F1);var r=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=c(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=r,M([document.body],[id,sh]),this.allowDragging&&!c(this.dragObj)&&this.dragObj.destroy()}else A([this.element],F1),A([document.body],[id,sh]),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging();return t},e.prototype.getButtons=function(t){return c(t)?this.btnObj:this.btnObj[t]},Wt([v("")],e.prototype,"content",void 0),Wt([v(!0)],e.prototype,"enableHtmlSanitizer",void 0),Wt([v(!1)],e.prototype,"enablePersistence",void 0),Wt([v(!1)],e.prototype,"showCloseIcon",void 0),Wt([v(!1)],e.prototype,"isModal",void 0),Wt([v("")],e.prototype,"header",void 0),Wt([v(!0)],e.prototype,"visible",void 0),Wt([v(!1)],e.prototype,"enableResize",void 0),Wt([v(["South-East"])],e.prototype,"resizeHandles",void 0),Wt([v("auto")],e.prototype,"height",void 0),Wt([v("")],e.prototype,"minHeight",void 0),Wt([v("100%")],e.prototype,"width",void 0),Wt([v("")],e.prototype,"cssClass",void 0),Wt([v(1e3)],e.prototype,"zIndex",void 0),Wt([v(null)],e.prototype,"target",void 0),Wt([v("")],e.prototype,"footerTemplate",void 0),Wt([v(!1)],e.prototype,"allowDragging",void 0),Wt([Sn([{}],xue)],e.prototype,"buttons",void 0),Wt([v(!0)],e.prototype,"closeOnEscape",void 0),Wt([Fe({},Tue)],e.prototype,"animationSettings",void 0),Wt([Fe({X:"center",Y:"center"},h8)],e.prototype,"position",void 0),Wt([V()],e.prototype,"created",void 0),Wt([V()],e.prototype,"open",void 0),Wt([V()],e.prototype,"beforeSanitizeHtml",void 0),Wt([V()],e.prototype,"beforeOpen",void 0),Wt([V()],e.prototype,"close",void 0),Wt([V()],e.prototype,"beforeClose",void 0),Wt([V()],e.prototype,"dragStart",void 0),Wt([V()],e.prototype,"dragStop",void 0),Wt([V()],e.prototype,"drag",void 0),Wt([V()],e.prototype,"overlayClick",void 0),Wt([V()],e.prototype,"resizeStart",void 0),Wt([V()],e.prototype,"resizing",void 0),Wt([V()],e.prototype,"resizeStop",void 0),Wt([V()],e.prototype,"destroyed",void 0),Wt([et],e)}(Lt);!function(s){function i(d,p){var u=new Or(d);return u.appendTo(p),u}function o(d,p){return d.header=c(p.title)?xV:p.title,d.content=c(p.content)?"":p.content,d.isModal=!!c(p.isModal)||p.isModal,d.showCloseIcon=!c(p.showCloseIcon)&&p.showCloseIcon,d.allowDragging=!c(p.isDraggable)&&p.isDraggable,d.closeOnEscape=!c(p.closeOnEscape)&&p.closeOnEscape,d.position=c(p.position)?{X:"center",Y:"top"}:p.position,d.animationSettings=c(p.animationSettings)?{effect:"Fade",duration:400,delay:0}:p.animationSettings,d.cssClass=c(p.cssClass)?"":p.cssClass,d.zIndex=c(p.zIndex)?1e3:p.zIndex,d.open=c(p.open)?null:p.open,d.width=c(p.width)?"auto":p.width,d.height=c(p.height)?"auto":p.height,d}function h(d,p,u){var f=u;return c(p.text)||(f.buttonModel.content=p.text),c(p.icon)||(f.buttonModel.iconCss=p.icon),c(p.cssClass)||(f.buttonModel.cssClass=p.cssClass),c(p.click)||(f.click=p.click),f}s.alert=function e(d){var u,p=F("div",{className:E8});return document.body.appendChild(p),(u=i("string"==typeof d?{content:d,position:{X:"center",Y:"top"},isModal:!0,header:xV,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function n(d){var p={buttons:[]};return p=function a(d,p){var u=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return c(p.okButton)?d.buttons=u:d.buttons[0]=h(0,p.okButton,u[0]),d}(p=o(p,d),d),p}(d),p)).close=function(){d&&d.close&&d.close.apply(u),u.destroy(),u.element.classList.contains("e-dlg-modal")?(u.element.parentElement.remove(),u.target.classList.remove(M8)):u.element.remove()},u},s.confirm=function t(d){var u,p=F("div",{className:D8});return document.body.appendChild(p),(u=i("string"==typeof d?{position:{X:"center",Y:"top"},content:d,isModal:!0,header:xV,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function r(d){var p={buttons:[]};return p=function l(d,p){var u={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},f={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return d.buttons[0]=c(p.okButton)?u:h(0,p.okButton,u),d.buttons[1]=c(p.cancelButton)?f:h(0,p.cancelButton,f),d}(p=o(p,d),d),p}(d),p)).close=function(){d&&d.close&&d.close.apply(u),u.destroy(),u.element.classList.contains("e-dlg-modal")?(u.element.parentElement.remove(),u.target.classList.remove(M8)):u.element.remove()},u}}(A8||(A8={}));var L8=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),_i=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},EV="e-tooltip",DV="e-tooltip-wrap",P8="e-tip-content",w0="e-arrow-tip",N8="e-arrow-tip-outer",O1="e-arrow-tip-inner",S0="e-tip-bottom",kV="e-tip-top",F8="e-tip-left",AV="e-tip-right",LV="e-popup",B1="e-popup-open",VV="e-popup-close",z1="e-lib",R8="e-tooltip-popup-container",Yue=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return L8(e,s),_i([v({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),_i([v({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(ce),za=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.mouseMoveEvent=null,n.mouseMoveTarget=null,n.containerElement=null,n.isBodyContainer=!0,n}return L8(e,s),e.prototype.initialize=function(){this.formatPosition(),M([this.element],EV)},e.prototype.formatPosition=function(){var t,i;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1])},e.prototype.renderArrow=function(){this.setTipClass(this.position);var t=this.createElement("div",{className:w0+" "+this.tipClass});t.appendChild(this.createElement("div",{className:N8+" "+this.tipClass})),t.appendChild(this.createElement("div",{className:O1+" "+this.tipClass})),this.tooltipEle.appendChild(t)},e.prototype.setTipClass=function(t){this.tipClass=0===t.indexOf("Right")?F8:0===t.indexOf("Bottom")?kV:0===t.indexOf("Left")?AV:S0},e.prototype.renderPopup=function(t){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(t);this.tooltipEle.classList.remove(z1),this.popupObj=new dr(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.getTooltipPosition=function(t){this.tooltipEle.style.display="block";var i=kr(t,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.calculateTooltipOffset(this.position),r=this.calculateElementPosition(i,n),l=this.collisionFlipFit(t,r[0],r[1]);return this.tooltipEle.style.display="",l},e.prototype.windowResize=function(){this.reposition(this.findTarget())},e.prototype.reposition=function(t){if(this.popupObj&&t){var i=this.getTooltipPosition(t);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},e.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},e.prototype.closePopupHandler=function(){this.isReact&&!("Click"===this.opensOn&&"function"==typeof this.content)&&this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs),this.tooltipEventArgs=null},e.prototype.calculateTooltipOffset=function(t){var i={top:0,left:0},n=this.tooltipEle.offsetWidth,r=this.tooltipEle.offsetHeight,o=H("."+w0,this.tooltipEle),a=o?o.offsetWidth:0,l=o?o.offsetHeight:0,h=this.showTipPointer?0:8,d=l/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),p=a/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(h+=2),t){case"RightTop":i.left+=a+h,i.top-=r-d;break;case"RightCenter":i.left+=a+h,i.top-=r/2;break;case"RightBottom":i.left+=a+h,i.top-=d;break;case"BottomRight":i.top+=l+h,i.left-=p;break;case"BottomCenter":i.top+=l+h,i.left-=n/2;break;case"BottomLeft":i.top+=l+h,i.left-=n-p;break;case"LeftBottom":i.left-=a+n+h,i.top-=d;break;case"LeftCenter":i.left-=a+n+h,i.top-=r/2;break;case"LeftTop":i.left-=a+n+h,i.top-=r-d;break;case"TopLeft":i.top-=r+l+h,i.left-=n-p;break;case"TopRight":i.top-=r+l+h,i.left-=p;break;default:i.top-=r+l+h,i.left-=n/2}return i.left+=this.offsetX,i.top+=this.offsetY,i},e.prototype.updateTipPosition=function(t){var i=me("."+w0+",."+N8+",."+O1,this.tooltipEle);A(i,[S0,kV,F8,AV]),this.setTipClass(t),M(i,this.tipClass)},e.prototype.adjustArrow=function(t,i,n,r){if(!1!==this.showTipPointer){var o,a;this.updateTipPosition(i),this.tooltipEle.style.display="block";var g,l=this.tooltipEle.clientWidth,h=this.tooltipEle.clientHeight,d=H("."+w0,this.tooltipEle),p=H("."+O1,this.tooltipEle),u=d.offsetWidth,f=d.offsetHeight;this.tooltipEle.style.display="",this.tipClass===S0||this.tipClass===kV?(this.tipClass===S0?(a="99.9%",p.style.top="-"+(f-2)+"px"):(a=-(f-1)+"px",p.style.top="-"+(f-6)+"px"),t&&(o=(g="Center"!==n||l>t.offsetWidth||this.mouseTrail)&&"Left"===n||!g&&"End"===this.tipPointerPosition?l-u-2+"px":g&&"Right"===n||!g&&"Start"===this.tipPointerPosition?"2px":!g||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?l/2-u/2+"px":"End"===this.tipPointerPosition?t.offsetWidth+(this.tooltipEle.offsetWidth-t.offsetWidth)/2-u/2-2+"px":(this.tooltipEle.offsetWidth-t.offsetWidth)/2-u/2+2+"px")):(this.tipClass===AV?(o="99.9%",p.style.left="-"+(u-2)+"px"):(o=-(u-1)+"px",p.style.left=u-2-u+"px"),a=(g="Center"!==r||h>t.offsetHeight||this.mouseTrail)&&"Top"===r||!g&&"End"===this.tipPointerPosition?h-f-2+"px":g&&"Bottom"===r||!g&&"Start"===this.tipPointerPosition?"2px":h/2-f/2+"px"),d.style.top=a,d.style.left=o}},e.prototype.renderContent=function(t){var i=H("."+P8,this.tooltipEle);if(this.cssClass&&M([this.tooltipEle],this.cssClass.split(" ")),t&&!c(t.getAttribute("title"))&&(t.setAttribute("data-content",t.getAttribute("title")),t.removeAttribute("title")),c(this.content))t&&!c(t.getAttribute("data-content"))&&(i.innerHTML=t.getAttribute("data-content"));else if(i.innerHTML="",this.content instanceof HTMLElement)i.appendChild(this.content);else if("string"==typeof this.content){if(this.enableHtmlSanitizer&&this.setProperties({content:$t.sanitize(this.content)},!0),r=qe(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))if(this.enableHtmlParse)for(var o=r.length,a=0;a<o;a++)i[(Le(r,i),"innerHTML")]=this.content;else i.textContent=this.content}else{var r;(r=qe(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))&&Le(r,i),this.renderReactTemplates()}},e.prototype.renderCloseIcon=function(){if(this.isSticky){var t=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(t),C.add(t,E.touchStartEvent,this.onStickyClose,this)}},e.prototype.addDataTooltipId=function(t,i){re(t,{"data-tooltip-id":i})},e.prototype.removeDataTooltipId=function(t){t.removeAttribute("data-tooltip-id")},e.prototype.tapHoldHandler=function(t){clearTimeout(this.autoCloseTimer),this.targetHover(t.originalEvent)},e.prototype.touchEndHandler=function(t){var i=this;this.isSticky||(this.autoCloseTimer=setTimeout(function(){i.close()},1500))},e.prototype.targetClick=function(t){var i;!c(i=this.target?k(t.target,this.target):this.element)&&(null===i.getAttribute("data-tooltip-id")?this.targetHover(t):this.isSticky||this.hideTooltip(this.animation.close,t,i))},e.prototype.targetHover=function(t){var i;if(!(c(i=this.target?k(t.target,this.target):this.element)||null!==i.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var r=0,o=[].slice.call(me('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));r<o.length;r++)this.restoreElement(o[r]);this.showTooltip(i,this.animation.open,t)}},e.prototype.mouseMoveBeforeOpen=function(t){this.mouseMoveEvent=t},e.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&C.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},e.prototype.showTooltip=function(t,i,n){var r=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=t,C.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:n?n.type:null,cancel:!1,target:t,event:n||null,element:this.tooltipEle,isInteracted:!c(n)},this.trigger("beforeRender",this.tooltipEventArgs,function(a){r.beforeRenderCallback(a,t,n,i)}.bind(this))},e.prototype.beforeRenderCallback=function(t,i,n,r){if(t.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove();else if(this.isHidden=!1,c(this.tooltipEle)){if(this.ctrlId=this.element.getAttribute("id")?yt(this.element.getAttribute("id")):yt("tooltip"),this.tooltipEle=this.createElement("div",{className:DV+" "+LV+" "+z1,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+oe(this.width)+";height:"+oe(this.height)+";position:absolute;"}),0!==Object.keys(this.htmlAttributes).length)for(var o in this.htmlAttributes)"class"===o?this.tooltipEle.classList.add(this.htmlAttributes[""+o]):this.tooltipEle.setAttribute(o,this.htmlAttributes[""+o]);this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,n,r,this)}else i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDataTooltipId(i,this.ctrlId+"_content"),this.renderContent(i),Gi.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,n,r,this))},e.prototype.appendContainer=function(t){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=H(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||M([this.containerElement],R8),this.containerElement.appendChild(t.tooltipEle)},e.prototype.tooltipBeforeRender=function(t,i){t&&(E.isDevice&&M([i.tooltipEle],"e-bigger"),"auto"!==i.width&&(i.tooltipEle.style.maxWidth=oe(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:P8})),this.appendContainer(i),A([i.tooltipEle],"e-hidden"),i.addDataTooltipId(t,i.ctrlId+"_content"),i.renderContent(t),M([i.tooltipEle],B1),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(t),i.adjustArrow(t,i.position,i.tooltipPositionX,i.tooltipPositionY),Gi.stop(i.tooltipEle),i.reposition(t))},e.prototype.tooltipAfterRender=function(t,i,n,r){t&&(A([r.tooltipEle],B1),M([r.tooltipEle],VV),r.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:t,event:i||null,element:r.tooltipEle,isInteracted:!c(i)},r.needTemplateReposition()&&!r.mouseTrail&&(r.tooltipEle.style.display="none"),r.trigger("beforeOpen",r.tooltipEventArgs,function(a){r.beforeOpenCallback(a,t,n,i)}.bind(r)))},e.prototype.beforeOpenCallback=function(t,i,n,r){var o=this;if(t.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var a={name:n.effect,duration:n.duration,delay:n.delay,timingFunction:"easeOut"};"None"===n.effect&&(a=void 0),this.openDelay>0?this.showTimer=setTimeout(function(){o.mouseTrail&&C.add(i,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&(o.popupObj.show(a,i),o.mouseMoveEvent&&o.mouseTrail&&o.onMouseMove(o.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(a,i)}r&&this.wireMouseEvents(r,i)},e.prototype.needTemplateReposition=function(){return!c(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef},e.prototype.checkCollision=function(t,i,n){var r={left:i,top:n,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=rh(this.tooltipEle,this.checkCollideTarget(),i,n);return o.length>0&&(r.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,r.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),r},e.prototype.calculateElementPosition=function(t,i){return[this.isBodyContainer?t.left+i.left:t.left-this.containerElement.offsetLeft+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?t.top+i.top:t.top-this.containerElement.offsetTop+i.top+window.pageYOffset+this.containerElement.scrollTop]},e.prototype.collisionFlipFit=function(t,i,n){var r=this.checkCollision(t,i,n),o=r.position;if(this.tooltipPositionY!==r.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?r.vertical+this.tooltipPositionX:this.tooltipPositionX+r.vertical),this.tooltipPositionX!==r.horizontal&&(0===o.indexOf("Left")&&(r.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=r.vertical+"Left"),0===o.indexOf("Right")&&(r.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=r.vertical+"Right"),r.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:t,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)o=this.position;else{var a=r.vertical,l=r.horizontal;if(r.position!==o){var h=kr(t,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(t,o,l,a);var d=this.calculateTooltipOffset(o);d.top-=this.getOffSetPosition("TopBottom",o,this.offsetY),d.left-=this.getOffSetPosition("RightLeft",o,this.offsetX),r.position=o;var p=this.calculateElementPosition(h,d);r.left=p[0],r.top=p[1]}else this.adjustArrow(t,o,l,a)}var u={left:r.left,top:r.top},f=this.isBodyContainer?iV(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},u).left:u.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var g=H("."+w0,this.tooltipEle),m=parseInt(g.style.left,10)-(f-r.left);m<0?m=0:m+g.offsetWidth>this.tooltipEle.clientWidth&&(m=this.tooltipEle.clientWidth-g.offsetWidth),g.style.left=m.toString()+"px"}return this.tooltipEle.style.display="",u.left=f,u},e.prototype.getOffSetPosition=function(t,i,n){return-1!==t.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==t.indexOf(i.split(/(?=[A-Z])/)[0])?2*n:0},e.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},e.prototype.hideTooltip=function(t,i,n){var r=this;this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(function(){r.closeDelay&&r.tooltipEle&&r.isTooltipOpen||r.tooltipHide(t,i,n)},this.closeDelay)):this.tooltipHide(t,i,n)},e.prototype.tooltipHide=function(t,i,n){var o,r=this;o=i?this.target?n||i.target:this.element:H('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:o,event:i||null,element:this.tooltipEle,isInteracted:!c(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?r.isHidden=!1:(r.mouseMoveBeforeRemove(),r.popupHide(t,o))}),this.tooltipEventArgs=null},e.prototype.popupHide=function(t,i){i&&this.restoreElement(i),this.isHidden=!0;var n={name:t.effect,duration:t.duration,delay:t.delay,timingFunction:"easeIn"};"None"===t.effect&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},e.prototype.restoreElement=function(t){this.unwireMouseEvents(t),c(t.getAttribute("data-content"))||(t.setAttribute("title",t.getAttribute("data-content")),t.removeAttribute("data-content")),this.removeDataTooltipId(t)},e.prototype.clear=function(){this.tooltipEle&&(A([this.tooltipEle],VV),M([this.tooltipEle],B1)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&le(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},e.prototype.tooltipHover=function(t){this.tooltipEle&&(this.isTooltipOpen=!0)},e.prototype.tooltipMouseOut=function(t){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,t,this.findTarget())},e.prototype.onMouseOut=function(t){var i=t.relatedTarget;if(i&&!this.mouseTrail){var n=k(i,"."+DV+"."+z1+"."+LV);n?C.add(n,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,t,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,t,this.findTarget()),this.clear()},e.prototype.tooltipElementMouseOut=function(t){this.hideTooltip(this.animation.close,t,this.findTarget()),C.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},e.prototype.onStickyClose=function(t){this.close()},e.prototype.onMouseMove=function(t){var i=0,n=0;t.type.indexOf("touch")>-1?(t.preventDefault(),i=t.touches[0].pageX,n=t.touches[0].pageY):(i=t.pageX,n=t.pageY),Gi.stop(this.tooltipEle),A([this.tooltipEle],VV),M([this.tooltipEle],B1),this.adjustArrow(t.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var r=this.calculateTooltipOffset(this.position),l=this.checkCollision(t.target,i+r.left+this.offsetX,n+r.top+this.offsetY);if(this.tooltipPositionX!==l.horizontal||this.tooltipPositionY!==l.vertical){var h=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?l.vertical+l.horizontal:l.horizontal+l.vertical;l.position=h,this.adjustArrow(t.target,l.position,l.horizontal,l.vertical);var d=this.calculateTooltipOffset(l.position);l.left=i+d.left-this.offsetX,l.top=n+d.top-this.offsetY}this.tooltipEle.style.left=l.left+"px",this.tooltipEle.style.top=l.top+"px"},e.prototype.keyDown=function(t){c(this.targetsList)||c(this.target)||[].slice.call(me(this.target,this.element)).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn)),this.tooltipEle&&27===t.keyCode&&this.close()},e.prototype.touchEnd=function(t){this.tooltipEle&&null===k(t.target,"."+EV)&&!this.isSticky&&this.close()},e.prototype.scrollHandler=function(t){this.tooltipEle&&(k(t.target,"."+DV+"."+z1+"."+LV)||this.close())},e.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},e.prototype.preRender=function(){this.tipClass=S0,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},e.prototype.wireEvents=function(t){for(var n=0,r=this.getTriggerList(t);n<r.length;n++){var o=r[n];if("Custom"===o)return;"Focus"===o&&this.wireFocusEvents(),"Click"===o&&C.add(this.element,E.touchStartEvent,this.targetClick,this),"Hover"===o&&(E.isDevice?(this.touchModule=new hr(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),C.add(this.element,E.touchEndEvent,this.touchEndHandler,this)):C.add(this.element,"mouseover",this.targetHover,this))}C.add(document,"touchend",this.touchEnd,this),C.add(document,"scroll wheel",this.scrollHandler,this),C.add(window,"resize",this.windowResize,this),C.add(document,"keydown",this.keyDown,this)},e.prototype.getTriggerList=function(t){return"Auto"===t&&(t=E.isDevice?"Hover":"Hover Focus"),t.split(" ")},e.prototype.wireFocusEvents=function(){if(c(this.target))C.add(this.element,"focus",this.targetHover,this);else if("BODY"!==this.element.nodeName)C.add(this.element,"focusin",this.targetHover,this);else{var t=[].slice.call(me(this.target,this.element));this.targetsList=t;for(var i=0,n=t;i<n.length;i++)C.add(n[i],"focus",this.targetHover,this)}},e.prototype.wireMouseEvents=function(t,i){this.tooltipEle&&(this.isSticky||("focus"===t.type&&C.add(i,"blur",this.onMouseOut,this),"focusin"===t.type&&C.add(i,"focusout",this.onMouseOut,this),"mouseover"===t.type&&C.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(C.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),C.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&C.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this))},e.prototype.unwireEvents=function(t){for(var n=0,r=this.getTriggerList(t);n<r.length;n++){var o=r[n];if("Custom"===o)return;"Focus"===o&&this.unwireFocusEvents(),"Click"===o&&C.remove(this.element,E.touchStartEvent,this.targetClick),"Hover"===o&&(E.isDevice?(this.touchModule&&this.touchModule.destroy(),C.remove(this.element,E.touchEndEvent,this.touchEndHandler)):C.remove(this.element,"mouseover",this.targetHover))}C.remove(document,"touchend",this.touchEnd),C.remove(document,"scroll wheel",this.scrollHandler),C.remove(window,"resize",this.windowResize),C.remove(document,"keydown",this.keyDown)},e.prototype.unwireFocusEvents=function(){if(c(this.target))C.remove(this.element,"focus",this.targetHover);else if("BODY"===this.element.nodeName)C.remove(this.element,"focusin",this.targetHover);else for(var i=0,n=[].slice.call(me(this.target,this.element));i<n.length;i++)C.remove(n[i],"focus",this.targetHover)},e.prototype.unwireMouseEvents=function(t){if(!this.isSticky){for(var n=0,r=this.getTriggerList(this.opensOn);n<r.length;n++){var o=r[n];"Focus"===o&&(C.remove(t,"blur",this.onMouseOut),C.remove(t,"focusout",this.onMouseOut)),"Hover"===o&&!E.isDevice&&C.remove(t,"mouseleave",this.onMouseOut)}this.closeDelay&&(C.remove(t,"mouseenter",this.tooltipHover),C.remove(t,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&C.remove(t,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){return H('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},e.prototype.getModuleName=function(){return"tooltip"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.onPropertyChanged=function(t,i){for(var n=this.findTarget(),r=0,o=Object.keys(t);r<o.length;r++)switch(o[r]){case"width":this.tooltipEle&&n&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=oe(t.width),this.reposition(n));break;case"height":this.tooltipEle&&n&&(this.tooltipEle.style.height=oe(t.height),this.reposition(n));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(t.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&n){var l=H("."+O1,this.tooltipEle);l.style.top=l.style.left=null,this.reposition(n)}break;case"tipPointerPosition":this.tooltipEle&&n&&this.reposition(n);break;case"offsetX":if(this.tooltipEle){var h=t.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var d=t.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+d).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&A([this.tooltipEle],i.cssClass.split(" ")),t.cssClass&&M([this.tooltipEle],t.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?M([this.tooltipEle],"e-rtl"):A([this.tooltipEle],"e-rtl"));break;case"container":c(this.containerElement)||A([this.containerElement],R8),this.container=t.container,this.tooltipEle&&n&&(this.appendContainer(this),this.reposition(n))}},e.prototype.open=function(t,i){c(i)&&(i=this.animation.open),c(t)&&(t=this.element),"none"!==t.style.display&&this.showTooltip(t,i)},e.prototype.close=function(t){t||(t=this.animation.close),this.hideTooltip(t)},e.prototype.refresh=function(t){this.tooltipEle&&this.renderContent(t),this.popupObj&&t&&this.reposition(t)},e.prototype.destroy=function(){s.prototype.destroy.call(this),this.tooltipEle&&le(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),A([this.element],EV),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var i=0,n=me('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element);i<n.length;i++)this.restoreElement(n[i])},_i([v("auto")],e.prototype,"width",void 0),_i([v("auto")],e.prototype,"height",void 0),_i([v()],e.prototype,"content",void 0),_i([v("body")],e.prototype,"container",void 0),_i([v()],e.prototype,"target",void 0),_i([v("TopCenter")],e.prototype,"position",void 0),_i([v(0)],e.prototype,"offsetX",void 0),_i([v(0)],e.prototype,"offsetY",void 0),_i([v(!0)],e.prototype,"showTipPointer",void 0),_i([v(!0)],e.prototype,"enableHtmlParse",void 0),_i([v(!1)],e.prototype,"windowCollision",void 0),_i([v("Auto")],e.prototype,"tipPointerPosition",void 0),_i([v("Auto")],e.prototype,"opensOn",void 0),_i([v(!1)],e.prototype,"mouseTrail",void 0),_i([v(!1)],e.prototype,"isSticky",void 0),_i([Fe({},Yue)],e.prototype,"animation",void 0),_i([v(0)],e.prototype,"openDelay",void 0),_i([v(0)],e.prototype,"closeDelay",void 0),_i([v()],e.prototype,"cssClass",void 0),_i([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),_i([v("")],e.prototype,"htmlAttributes",void 0),_i([V()],e.prototype,"beforeRender",void 0),_i([V()],e.prototype,"beforeOpen",void 0),_i([V()],e.prototype,"afterOpen",void 0),_i([V()],e.prototype,"beforeClose",void 0),_i([V()],e.prototype,"afterClose",void 0),_i([V()],e.prototype,"beforeCollision",void 0),_i([V()],e.prototype,"created",void 0),_i([V()],e.prototype,"destroyed",void 0),_i([et],e)}(Lt),gs={},Que=30,Xue=30,O8=30,Zue=30,Kue=30,Jue=36,$ue=36,C0="e-spin-show",I0="e-spin-hide",B8="e-spin-material",z8="e-spin-material3",H8="e-spin-fabric",_8="e-spin-fluent",j8="e-spin-tailwind",efe="e-spin-bootstrap",q8="e-spin-bootstrap4",W8="e-spin-bootstrap5",U8="e-spin-high-contrast",H1="e-spinner-pane",PV="e-spinner-inner",_1="e-path-circle",tfe="e-path-arc",ife="e-spin-label",j1="e-spin-template",gm=null,q1=null;function ao(s,e){if(s.target){var t,i=c(e)?F:e,n=function Sfe(s,e){var t=e("div",{}),i=e("div",{});return t.classList.add(H1),i.classList.add(PV),s.appendChild(t),t.appendChild(i),{wrap:t,inner_wrap:i}}(s.target,i);if(c(s.cssClass)||n.wrap.classList.add(s.cssClass),c(s.template)&&c(gm)){var o=c(s.type)?function ufe(s){return window.getComputedStyle(s,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):s.type;t=function bfe(s,e){var t;switch(e){case"Material":t=Que;break;case"Material3":t=Xue;break;case"Fabric":case"Tailwind":case"Tailwind-dark":t=O8;break;case"Fluent":t=Zue;break;case"Bootstrap4":t=Jue;break;case"Bootstrap5":t=$ue;break;default:t=Kue}return s=s?parseFloat(s+""):t,"Bootstrap"===e?s:s/2}(c(s.width)?void 0:s.width,o),function G8(s,e,t,i){var n=e.querySelector("."+PV),r=n.querySelector("svg");switch(c(r)||n.removeChild(r),s){case"Material":!function rfe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"Material",radius:e},U1(s,i,0,B8),G1(e,s,"Material",B8)}(n,t);break;case"Material3":!function sfe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"Material3",radius:e},U1(s,i,0,z8),G1(e,s,"Material3",z8)}(n,t);break;case"Fabric":!function hfe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"Fabric",radius:e},W1(s,i,H8),Y1(e,s,H8)}(n,t);break;case"Fluent":!function dfe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"Fluent",radius:e},W1(s,i,_8),Y1(e,s,_8)}(n,t);break;case"Bootstrap":!function ffe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"Bootstrap",radius:e},function gfe(s,e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=64,r=32,o=2;i.setAttribute("id",e),i.setAttribute("class",efe),i.setAttribute("viewBox","0 0 "+n+" "+n),s.insertBefore(i,s.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",_1+"_"+a),l.setAttribute("r",o+""),l.setAttribute("transform","translate("+r+","+r+")"),i.appendChild(l)}}(s,i),function mfe(s,e){var t=s.querySelector("svg.e-spin-bootstrap"),i=0,n=0,r=24;t.style.width=t.style.height=e+"px";for(var o=90,a=0;a<=7;a++){var l=NV(i,n,r,o),h=t.querySelector("."+_1+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),o=o>=360?0:o,o+=45}}(s,e)}(n,t);break;case"HighContrast":!function cfe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"HighContrast",radius:e},W1(s,i,U8),Y1(e,s,U8)}(n,t);break;case"Bootstrap4":!function ofe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"Bootstrap4",radius:e},U1(s,i,0,q8),G1(e,s,"Bootstrap4",q8)}(n,t);break;case"Bootstrap5":!function afe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"Bootstrap5",radius:e},U1(s,i,0,W8),G1(e,s,"Bootstrap5",W8)}(n,t);break;case"Tailwind":case"Tailwind-dark":!function pfe(s,e,t){var i=np();gs[""+i]={timeOut:0,type:"Tailwind",radius:e},W1(s,i,j8),Y1(e,s,j8)}(n,t)}}(o,n.wrap,t),c(s.label)||function nfe(s,e,t){var i=t("div",{});i.classList.add(ife),i.innerHTML=e,s.appendChild(i)}(n.inner_wrap,s.label,i)}else{var r=c(s.template)?gm:s.template;n.wrap.classList.add(j1),function Y8(s,e,t){c(t)||s.classList.add(t),s.querySelector(".e-spinner-inner").innerHTML=e}(n.wrap,r,q1)}n.wrap.classList.add(I0),n=null}}function vfe(s,e){var t=[],i=s,n=e,r=!1,o=1;return function a(l){t.push(l),(l!==n||1===o)&&(l<=i&&l>1&&!r?l=parseFloat((l-.2).toFixed(2)):1===l?(l=7,l=parseFloat((l+.2).toFixed(2)),r=!0):l<8&&r?8===(l=parseFloat((l+.2).toFixed(2)))&&(r=!1):l<=8&&!r&&(l=parseFloat((l-.2).toFixed(2))),++o,a(l))}(i),t}function np(){for(var s="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<5;t++)s+=e.charAt(Math.floor(Math.random()*e.length));return s}function W1(s,e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",e),n.setAttribute("class",t);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",_1);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",tfe),s.insertBefore(n,s.firstChild),n.appendChild(r),n.appendChild(o)}function U1(s,e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",i),n.setAttribute("id",e),r.setAttribute("class",_1),s.insertBefore(n,s.firstChild),n.appendChild(r)}function Q8(s){(function Cfe(s,e,t,i,n,r,o){var a=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),h=e-s,d=function Ife(s){return parseFloat(s)}(2*o.globalInfo[o.uniqueID].radius+""),p=X8(d),u=-90*(o.globalInfo[o.uniqueID].count||0);!function f(m){var y=Math.max(0,Math.min((new Date).getTime()-l,i));(function g(m,y){if(!c(y.querySelector("svg.e-spin-material"))||!c(y.querySelector("svg.e-spin-material3"))){var b=void 0;if(c(y.querySelector("svg.e-spin-material"))||c(y.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?!c(y.querySelector("svg.e-spin-material3"))&&!c(y.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))&&(b=y.querySelector("svg.e-spin-material3")):b=y.querySelector("svg.e-spin-material"),!c(b)){var w=b.querySelector("path.e-path-circle");w.setAttribute("stroke-dashoffset",Z8(d,p,m,r)+""),w.setAttribute("transform","rotate("+u+" "+d/2+" "+d/2+")")}}})(t(y,s,h,i),m.container),a===m.globalInfo[m.uniqueID].previousId&&y<i?gs[m.uniqueID].timeOut=setTimeout(f.bind(null,m),1):Q8(m)}(o)})(1,149,Tfe,1333,0,75,s),s.globalInfo[s.uniqueID].count=++s.globalInfo[s.uniqueID].count%4}function G1(s,e,t,i){var n=2*s,r=e.querySelector("svg."+i),o=r.querySelector("path.e-path-circle"),a=X8(n),l=n/2+"px";r.setAttribute("viewBox","0 0 "+n+" "+n),r.style.width=r.style.height=n+"px",r.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function xfe(s,e){var t=s/2,i=e/2;return"M"+t+","+i+"A"+(t-i)+","+(t-i)+" 0 1 1 "+i+","+t}(n,a)),("Material"===t||"Material3"===t)&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",Z8(n,a,1,75)+""))}function X8(s){return.1*s}function Z8(s,e,t,i){return(s-e)*Math.PI*(3*i/100-t/100)}function Tfe(s,e,t,i){var n=(s/=i)*s,r=n*s;return e+t*(6*r*n+-15*n*n+10*r)}function Y1(s,e,t){var i=s,n=s,r=2*s,l=e.querySelector("."+t),h=l.querySelector(".e-path-circle"),d=l.querySelector(".e-path-arc"),p=r/2+"px";h.setAttribute("d",function Efe(s,e,t){return["M",s,e,"m",-t,0,"a",t,t,0,1,0,2*t,0,"a",t,t,0,1,0,2*-t,0].join(" ")}(i,n,s)),d.setAttribute("d",function Mfe(s,e,t,i,n){var r=NV(s,e,t,n),o=NV(s,e,t,i);return["M",r.x,r.y,"A",t,t,0,0,0,o.x,o.y].join(" ")}(i,n,s,315,45)),l.setAttribute("viewBox","0 0 "+r+" "+r),l.style.transformOrigin=p+" "+p+" "+p,l.style.width=l.style.height=r+"px"}function NV(s,e,t,i){var n=(i-90)*Math.PI/180;return{x:s+t*Math.cos(n),y:e+t*Math.sin(n)}}function En(s){K8(s,!1),s=null}function K8(s,e){var t;if(s)if(s.classList.contains(H1))t=s;else{var i;i=s.querySelectorAll("."+H1),t=Array.from(i).find(function(l){return l.parentElement===s})||null}if(s&&t){var n=t.querySelector("."+PV);if(e?!t.classList.contains(j1)&&!t.classList.contains(I0):!t.classList.contains(j1)&&!t.classList.contains(C0)){var o=t.querySelector("svg");if(c(o))return;var a=o.getAttribute("id");switch(gs[""+a].isAnimate=!e,gs[""+a].type){case"Material":case"Material3":e?clearTimeout(gs[a].timeOut):function lfe(s,e,t){var i={};gs[""+e].timeOut=0,i[""+e]=function wfe(s,e,t,i){return{radius:e,count:t,previousId:i}}(0,t,0,0),Q8({uniqueID:e,container:s,globalInfo:i,timeOutVar:0})}(n,a,gs[a].radius);break;case"Bootstrap":e?clearTimeout(gs[a].timeOut):function yfe(s){for(var t=s.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)r(s.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,vfe(i,i),t);function r(o,a,l,h,d){var p=0;!function u(f){gs[""+d].isAnimate&&(++p,o.setAttribute("r",f+""),p>=h.length&&(p=0),gs[d].timeOut=setTimeout(u.bind(null,h[p]),18))}(a)}}(n)}}e?ze(t,[I0],[C0]):ze(t,[C0],[I0]),s=null}}function pr(s){K8(s,!0),s=null}var Lfe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),mm=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};function x0(s,e){for(var t=Q({},s),i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];e.indexOf(r)<0&&d1(t,r)}return t}function Vfe(s,e){var t=40===e?0:s.childElementCount-1,i=t,r=s.querySelector(".e-selected");r&&r.classList.remove("e-selected");for(var o=0,a=s.children.length;o<a;o++)s.children[o].classList.contains("e-focused")&&(i=o,s.children[o].classList.remove("e-focused"),40===e?i++:i--,i===(40===e?s.childElementCount:-1)&&(i=t));-1!==(i=J8(s,s.children[i],i,e))&&(M([s.children[i]],"e-focused"),s.children[i].focus())}function J8(s,e,t,i,n){if(void 0===n&&(n=0),(e.classList.contains("e-separator")||e.classList.contains("e-disabled"))&&(t===(40===i?s.childElementCount-1:0)?t=40===i?0:s.childElementCount-1:40===i?t++:t--),(e=s.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")){if(++n===s.childElementCount)return-1;t=J8(s,e,t,i,n)}return t}var ie,FV=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Lfe(e,s),mm([v("")],e.prototype,"iconCss",void 0),mm([v("")],e.prototype,"id",void 0),mm([v(!1)],e.prototype,"separator",void 0),mm([v("")],e.prototype,"text",void 0),mm([v("")],e.prototype,"url",void 0),mm([v(!1)],e.prototype,"disabled",void 0),e}(ce),Nfe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Is=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Br=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.isPopupCreated=!0,n}return Nfe(e,s),e.prototype.preRender=function(){},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.closePopup()},e.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},e.prototype.addItems=function(t,i){for(var n,r=this.items.length,o=0,a=this.items.length;o<a;o++)if(i===this.items[o].text){r=o;break}for(var l=t.length-1;l>=0;l--)n=new FV(this,"items",t[l],!0),this.items.splice(r,0,n);this.canOpen()||this.createItems()},e.prototype.removeItems=function(t,i){for(var n=!1,r=0,o=t.length;r<o;r++)for(var a=0,l=this.items.length;a<l;a++)if(t[r]===(i?this.items[a].id:this.items[a].text)){this.items.splice(a,1),n=!0;break}n&&this.getULElement()&&this.createItems()},e.prototype.createPopup=function(){var t,i=this.createElement("div",{className:"e-dropdown-popup",id:this.element.id+"-popup"});document.body.appendChild(i),this.dropDown=new dr(i,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),re(this.element,((t={})["aria-haspopup"]=this.items.length||this.target?"true":"false",t["aria-expanded"]="false",t.type="button",t["aria-label"]=this.element.textContent?this.element.textContent:"dropdownbutton",t)),this.cssClass&&M([i],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0},e.prototype.getTargetElement=function(){return"string"==typeof this.target?H(this.target):this.target},e.prototype.createItems=function(t){var r,o,a,i=this.items,n=this.hasIcon(this.items,"iconCss"),h=this.getULElement();h?h.innerHTML="":h=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var d=0;d<i.length;d++){var p=(o=i[d]).text;a=this.createElement("li",{innerHTML:o.url?"":p,className:o.separator?"e-item e-separator":"e-item",attrs:o.separator?{role:"separator",tabindex:"-1"}:{role:"menuitem",tabindex:"-1","aria-label":p},id:o.id?o.id:yt("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?a.textContent=o.url?"":p:a.innerHTML=o.url?"":p,o.url&&(a.appendChild(this.createAnchor(o)),a.classList.add("e-url")),o.iconCss?(r=this.createElement("span",{className:"e-menu-icon "+o.iconCss}),o.url?a.childNodes[0].appendChild(r):a.insertBefore(r,a.childNodes[0])):n&&!o.separator&&a.classList.add("e-blank-icon"),o.disabled&&a.classList.add("e-disabled"),this.trigger("beforeItemRender",{item:o,element:a}),h.appendChild(a)}t&&this.getPopUpElement().appendChild(h),n&&function Pfe(s,e){var t=[].slice.call(s.getElementsByClassName("e-blank-icon"));if(e&&[].slice.call(s.getElementsByClassName("e-item")).forEach(function(h){(h.style.paddingLeft||h.style.paddingRight)&&h.removeAttribute("style")}),t.length){var n=s.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!c(n)){n.classList.contains("e-url")&&(n=n.querySelector(".e-menu-url"));var o,r=n.querySelector(".e-menu-icon"),a=s.classList.contains("e-rtl");o=a?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var l=parseInt(getComputedStyle(r).fontSize,10)+parseInt(getComputedStyle(r)[o.margin],10)+parseInt(getComputedStyle(n).paddingLeft,10)+"px";t.forEach(function(h){h.classList.contains("e-url")?h.querySelector(".e-menu-url").style[o.padding]=l:h.style[o.padding]=l})}}}(this.getPopUpElement())},e.prototype.hasIcon=function(t,i){for(var n=0,r=t.length;n<r;n++)if(t[n][""+i])return!0;return!1},e.prototype.createAnchor=function(t){var i=this.enableHtmlSanitizer?$t.sanitize(t.text):t.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:i,attrs:{href:t.url}})},e.prototype.initialize=function(){this.button=new li({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=yt("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.target&&!this.isColorPicker()||!this.createPopupOnClick?this.createPopup():this.isPopupCreated=!1},e.prototype.isColorPicker=function(){if(!this.element)return!1;var t=this.element.previousSibling;return!!(t&&t.classList&&t.classList.contains("e-split-colorpicker"))},e.prototype.appendArrowSpan=function(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf("e-vertical")>-1?"bottom":"right")+" e-caret"}))},e.prototype.setActiveElem=function(t){this.activeElem=t},e.prototype.getModuleName=function(){return"dropdown-btn"},e.prototype.canOpen=function(){var t=!1;return this.isPopupCreated&&(t=this.getPopUpElement().classList.contains("e-popup-close")),t},e.prototype.destroy=function(){var i,t=this;s.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName()&&(this.element.querySelector("span.e-caret")&&z(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&A([this.element],i),A(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(function(r){t.element.removeAttribute(r)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents())},e.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var t=document.getElementById(this.getPopUpElement().id);t&&(A([t],["e-popup-open","e-popup-close"]),z(t))}C.remove(this.getPopUpElement(),"click",this.clickHandler),C.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&this.dropDown&&(this.dropDown.element=null,this.dropDown=void 0)}this.isPopupCreated=!1},e.prototype.getPopUpElement=function(){var t=null;return this.dropDown&&(t=this.dropDown.element),t},e.prototype.getULElement=function(){var t=null;return this.getPopUpElement()&&(t=this.getPopUpElement().children[0]),t},e.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||C.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),C.add(this.element,"click",this.clickHandler,this),C.add(this.element,"keydown",this.keyBoardHandler,this)},e.prototype.popupWireEvents=function(){var t=this.getPopUpElement();this.createPopupOnClick&&C.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),t&&(C.add(t,"click",this.clickHandler,this),C.add(t,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&C.add(t,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=zi(t,{selector:".e-item"})},e.prototype.popupUnWireEvents=function(){var t=this.getPopUpElement();this.createPopupOnClick&&C.remove(document,"mousedown touchstart",this.delegateMousedownHandler),t&&t.parentElement&&(C.remove(t,"click",this.clickHandler),C.remove(t,"keydown",this.keyBoardHandler),this.closeActionEvents&&C.remove(t,this.closeActionEvents,this.focusoutHandler)),wl&&this.rippleFn&&this.rippleFn()},e.prototype.keyBoardHandler=function(t){if(t.target!==this.element||9!==t.keyCode&&(t.altKey||40!==t.keyCode)&&38!==t.keyCode)switch(t.keyCode){case 38:case 40:!t.altKey||38!==t.keyCode&&40!==t.keyCode?this.upDownKeyHandler(t):this.keyEventHandler(t);break;case 9:case 13:case 27:case 32:this.keyEventHandler(t)}},e.prototype.upDownKeyHandler=function(t){this.target&&(38===t.keyCode||40===t.keyCode)||(t.preventDefault(),Vfe(this.getULElement(),t.keyCode))},e.prototype.keyEventHandler=function(t){if(!this.target||13!==t.keyCode&&9!==t.keyCode){if(13===t.keyCode&&this.activeElem[0].classList.contains("e-split-btn"))return void this.activeElem[0].focus();t.target&&t.target.className.indexOf("e-edit-template")>-1&&32===t.keyCode||(9!==t.keyCode&&t.preventDefault(),27===t.keyCode||38===t.keyCode||9===t.keyCode?this.canOpen()||this.closePopup(t,this.element):this.clickHandler(t))}},e.prototype.getLI=function(t){return"LI"===t.tagName?t:k(t,"li")},e.prototype.mousedownHandler=function(t){var i=t.target;this.dropDown&&!this.canOpen()&&!k(i,'[id="'+this.getPopUpElement().id+'"]')&&!k(i,'[id="'+this.element.id+'"]')&&this.closePopup(t)},e.prototype.focusoutHandler=function(t){if(this.isPopupCreated&&!this.canOpen()){var i=t.relatedTarget;if(i&&i.className.indexOf("e-item")>-1){var n=this.getLI(i);if(n){var r=Array.prototype.indexOf.call(this.getULElement().children,n),o=this.items[r];o&&this.trigger("select",{element:n,item:o})}}this.closePopup(t)}},e.prototype.clickHandler=function(t){var i=t.target;if(k(i,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&!this.isColorPicker()?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(t):this.closePopup(t):this.isPopupCreated?this.closePopup(t,this.activeElem[0]):(this.createPopup(),this.openPopUp(t));else if(k(i,'[id="'+this.getPopUpElement().id+'"]')){var r=void 0,o=void 0,a=this.getLI(i);a&&(r=Array.prototype.indexOf.call(this.getULElement().children,a),(o=this.items[r])&&this.trigger("select",{element:a,item:o}),this.closePopup(t,this.activeElem[0]))}},e.prototype.openPopUp=function(t){var i=this;void 0===t&&(t=null);var n=this.getPopUpElement();if(this.target)if(this.activeElem.length>1){var r=function us(s,e){var t,i,n="string"==typeof s?document.getElementById(s):s;for(i=0;i<n.ej2_instances.length;i++)if(t=n.ej2_instances[parseInt(i.toString(),10)],"string"==typeof e){if(e===t.getModuleName())return t}else if(t instanceof e)return t}(this.activeElem[0],"split-btn");r.isReact&&n.childNodes.length<1&&(r.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&n.childNodes.length<1&&(this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());else this.createItems(!0);var o=this.getULElement();this.popupWireEvents(),this.trigger("beforeOpen",{element:o,items:this.items,event:t,cancel:!1},function(l){if(!l.cancel){var h=i.getULElement();if(i.dropDown.show(null,i.element),M([i.element],"e-active"),i.element.setAttribute("aria-expanded","true"),i.element.setAttribute("aria-owns",i.getPopUpElement().id),h&&h.focus(),i.enableRtl&&"0px"!==h.parentElement.style.left){var d;d=i.element.parentElement&&i.element.parentElement.classList.contains("e-split-btn-wrapper")?i.element.parentElement.offsetWidth:i.element.offsetWidth;var p=h.parentElement.offsetWidth-d,u=parseFloat(h.parentElement.style.left)-p;u<0&&(u=0),h.parentElement.style.left=u+"px"}i.trigger("open",{element:h,items:i.items})}})},e.prototype.closePopup=function(t,i){var n=this;void 0===t&&(t=null);var r=this.getULElement();this.trigger("beforeClose",{element:r,items:this.items,event:t,cancel:!1},function(a){if(a.cancel)r&&r.focus();else{var l=n.getPopUpElement();l&&C.remove(l,"keydown",n.keyBoardHandler),n.popupUnWireEvents();var h=n.getULElement(),d=void 0;h&&(d=h.querySelector(".e-selected")),d&&d.classList.remove("e-selected"),n.dropDown.hide(),A(n.activeElem,"e-active"),n.element.setAttribute("aria-expanded","false"),n.element.removeAttribute("aria-owns"),i&&i.focus(),n.trigger("close",{element:h,items:n.items}),!n.target&&h&&z(h),(!n.target||n.isColorPicker())&&n.createPopupOnClick&&n.destroyPopup(),n.target&&(n.isPopupCreated=!n.createPopupOnClick)}})},e.prototype.unWireEvents=function(){this.createPopupOnClick||C.remove(document,"mousedown touchstart",this.delegateMousedownHandler),C.remove(this.element,"click",this.clickHandler),C.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(C.remove(this.getPopUpElement(),"click",this.clickHandler),C.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler))},e.prototype.onPropertyChanged=function(t,i){var r;this.button.setProperties(x0(t,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.isPopupCreated&&(r=this.getPopUpElement(),this.dropDown.setProperties(x0(t,["enableRtl"])));for(var o=0,a=Object.keys(t);o<a.length;o++)switch(a[o]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":t.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(t.cssClass.indexOf("e-vertical")>-1||i.cssClass.indexOf("e-vertical")>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var h=this.element.querySelector("span.e-caret");t.cssClass.indexOf("e-vertical")>-1?ze(h,["e-icon-bottom"],["e-icon-right"]):ze(h,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(i.cssClass&&A([r],i.cssClass.split(" ")),t.cssClass&&M([r],t.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":t.createPopupOnClick?this.destroyPopup():this.createPopup()}},e.prototype.focusIn=function(){this.element.focus()},Is([v("")],e.prototype,"content",void 0),Is([v("")],e.prototype,"cssClass",void 0),Is([v(!1)],e.prototype,"disabled",void 0),Is([v("")],e.prototype,"iconCss",void 0),Is([v("Left")],e.prototype,"iconPosition",void 0),Is([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),Is([Sn([],FV)],e.prototype,"items",void 0),Is([v(!1)],e.prototype,"createPopupOnClick",void 0),Is([v("")],e.prototype,"target",void 0),Is([v("")],e.prototype,"closeActionEvents",void 0),Is([V()],e.prototype,"beforeItemRender",void 0),Is([V()],e.prototype,"beforeOpen",void 0),Is([V()],e.prototype,"beforeClose",void 0),Is([V()],e.prototype,"close",void 0),Is([V()],e.prototype,"open",void 0),Is([V()],e.prototype,"select",void 0),Is([V()],e.prototype,"created",void 0),Is([et],e)}(Lt),Ffe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Bs=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Q1="e-rtl",RV="EJS-SPLITBUTTON",Rfe=function(s){function e(t,i){return s.call(this,t,i)||this}return Ffe(e,s),e.prototype.preRender=function(){var t=this.element;if(t.tagName===RV){for(var i=R("ej2_instances",t),n=this.createElement("button",{attrs:{type:"button"}}),r=this.createElement(RV,{className:"e-"+this.getModuleName()+"-wrapper"}),o=0,a=t.attributes.length;o<a;o++)n.setAttribute(t.attributes[o].nodeName,t.attributes[o].nodeValue);t.parentNode.insertBefore(r,t),z(t),r.appendChild(t=n),ke("ej2_instances",i,t),this.wrapper=r,this.element=t}this.element.id||(this.element.id=yt("e-"+this.getModuleName()))},e.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},e.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},e.prototype.addItems=function(t,i){s.prototype.addItems.call(this,t,i),this.secondaryBtnObj.items=this.items},e.prototype.removeItems=function(t,i){s.prototype.removeItems.call(this,t,i),this.secondaryBtnObj.items=this.items},e.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(Q1),this.cssClass&&M([this.wrapper],this.cssClass.replace(/\s+/g," ").trim().split(" "))},e.prototype.createPrimaryButton=function(){this.primaryBtnObj=new li({cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled}),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},e.prototype.createSecondaryButton=function(){var t=this,i=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(i),this.secondaryBtnObj=new Br({cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick,beforeItemRender:function(r){t.createPopupOnClick&&(t.secondaryBtnObj.dropDown.relateTo=t.wrapper,t.dropDown=t.secondaryBtnObj.dropDown),t.trigger("beforeItemRender",r)},open:function(r){t.trigger("open",r)},close:function(r){t.trigger("close",r)},select:function(r){t.trigger("select",r)},beforeOpen:function(r){t.createPopupOnClick&&0==t.items.length&&(t.secondaryBtnObj.dropDown.relateTo=t.wrapper,t.dropDown=t.secondaryBtnObj.dropDown);var o=new X1;return t.trigger("beforeOpen",r,function(a){o.resolve(a)}),o},beforeClose:function(r){var o=new X1;return t.trigger("beforeClose",r,function(a){o.resolve(a)}),o}}),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(i),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right"),this.disabled&&this.wrapper.classList.add("e-splitbtn-disabled")},e.prototype.setAria=function(){re(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})},e.prototype.getModuleName=function(){return"split-btn"},e.prototype.toggle=function(){this.secondaryBtnObj.toggle()},e.prototype.destroy=function(){var t=this,i=[Q1];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var n=document.getElementById(this.element.id);n&&n.parentElement===this.wrapper&&(this.wrapper.tagName===RV?(this.wrapper.innerHTML="",A([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),A([this.wrapper],this.cssClass.split(" "))):(A([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(r){t.element.removeAttribute(r)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),le(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),s.prototype.destroy.call(this),this.element.getAttribute("class")||this.element.removeAttribute("class")},e.prototype.wireEvents=function(){C.add(this.element,"click",this.primaryBtnClickHandler,this),new St(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow",enter:"enter"}})},e.prototype.unWireEvents=function(){C.remove(this.element,"click",this.primaryBtnClickHandler),Hn(this.element,St).destroy()},e.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},e.prototype.btnKeyBoardHandler=function(t){switch(t.action){case"altdownarrow":this.clickHandler(t);break;case"enter":this.clickHandler(t),this.getPopUpElement().classList.contains("e-popup-close")?this.secondaryBtnObj.element.classList.remove("e-active"):(this.element.classList.remove("e-active"),this.secondaryBtnObj.element.classList.add("e-active"))}},e.prototype.onPropertyChanged=function(t,i){var n=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(x0(t,n)),n=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(t).indexOf("items")>-1&&(this.secondaryBtnObj.items=t.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(x0(t,n));for(var r=0,o=Object.keys(t);r<o.length;r++)switch(o[r]){case"cssClass":i.cssClass&&A([this.wrapper],i.cssClass.split(" ")),M([this.wrapper],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?M([this.wrapper],Q1):A([this.wrapper],Q1);break;case"disabled":t.disabled?M([this.wrapper],"e-splitbtn-disabled"):A([this.wrapper],"e-splitbtn-disabled")}},e.prototype.focusIn=function(){this.element.focus()},Bs([v("")],e.prototype,"content",void 0),Bs([v("")],e.prototype,"cssClass",void 0),Bs([v(!1)],e.prototype,"disabled",void 0),Bs([v("")],e.prototype,"iconCss",void 0),Bs([v("Left")],e.prototype,"iconPosition",void 0),Bs([v(!1)],e.prototype,"createPopupOnClick",void 0),Bs([Sn([],FV)],e.prototype,"items",void 0),Bs([v("")],e.prototype,"target",void 0),Bs([V()],e.prototype,"beforeItemRender",void 0),Bs([V()],e.prototype,"beforeOpen",void 0),Bs([V()],e.prototype,"beforeClose",void 0),Bs([V()],e.prototype,"click",void 0),Bs([V()],e.prototype,"close",void 0),Bs([V()],e.prototype,"open",void 0),Bs([V()],e.prototype,"select",void 0),Bs([V()],e.prototype,"created",void 0),Bs([et],e)}(Br),X1=function(){return function s(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}(),je={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",FLOATTEXTCONTENT:"e-float-text-content",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"};!function(s){var e,t=!0;function n(Z){r(Z.floatLabelType,Z.element),Z.element.addEventListener("focus",function(){var te=m(this);(te.classList.contains("e-input-group")||te.classList.contains("e-outline")||te.classList.contains("e-filled"))&&te.classList.add("e-input-focus"),"Auto"===Z.floatLabelType&&setTimeout(function(){s.calculateWidth(Z.element,te)},80)}),Z.element.addEventListener("blur",function(){var te=m(this);(te.classList.contains("e-input-group")||te.classList.contains("e-outline")||te.classList.contains("e-filled"))&&te.classList.remove("e-input-focus"),"Auto"===Z.floatLabelType&&""===Z.element.value&&setTimeout(function(){s.calculateWidth(Z.element,te)},80)}),Z.element.addEventListener("input",function(){r(e,Z.element)})}function r(Z,te){var we=te.value;""!==we&&!c(we)&&te.parentElement?te.parentElement.classList.add("e-valid-input"):"Always"!==Z&&te.parentElement&&te.parentElement.classList.remove("e-valid-input")}function o(){var Z=m(this).getElementsByClassName("e-float-text")[0];c(Z)||(M([Z],je.LABELTOP),Z.classList.contains(je.LABELBOTTOM)&&A([Z],je.LABELBOTTOM))}function a(){var Z=m(this);if(Z.getElementsByTagName("textarea")[0]?""===Z.getElementsByTagName("textarea")[0].value:""===Z.getElementsByTagName("input")[0].value){var te=Z.getElementsByClassName("e-float-text")[0];c(te)||(te.classList.contains(je.LABELTOP)&&A([te],je.LABELTOP),M([te],je.LABELBOTTOM))}}function l(Z){Z.addEventListener("focus",o),Z.addEventListener("blur",a)}function d(Z,te,we){var Be=c(we)?F:we;"Auto"===Z.floatLabelType&&l(Z.element),c(te.container)?(te.container=I(Z,je.FLOATINPUT,je.FLOATCUSTOMTAG,"div",Be),Z.element.parentNode&&Z.element.parentNode.insertBefore(te.container,Z.element)):(c(Z.customTag)||te.container.classList.add(je.FLOATCUSTOMTAG),te.container.classList.add(je.FLOATINPUT));var Ge=Be("span",{className:je.FLOATLINE}),xe=Be("label",{className:je.FLOATTEXT});if(!c(Z.element.id)&&""!==Z.element.id&&(xe.id="label_"+Z.element.id.replace(/ /g,"_"),re(Z.element,{"aria-labelledby":xe.id})),!c(Z.element.placeholder)&&""!==Z.element.placeholder&&(xe.innerText=x(Z.element.placeholder),Z.element.removeAttribute("placeholder")),!c(Z.properties)&&!c(Z.properties.placeholder)&&""!==Z.properties.placeholder&&(xe.innerText=x(Z.properties.placeholder)),xe.innerText||te.container.classList.add(je.NOFLOATLABEL),te.container.classList.contains("e-float-icon-left")){var At=te.container.querySelector(".e-input-in-wrap");At.appendChild(Z.element),At.appendChild(Ge),At.appendChild(xe)}else te.container.appendChild(Z.element),te.container.appendChild(Ge),te.container.appendChild(xe);g(Z.element.value,xe),"Always"===Z.floatLabelType&&(xe.classList.contains(je.LABELBOTTOM)&&A([xe],je.LABELBOTTOM),M([xe],je.LABELTOP)),"Auto"===Z.floatLabelType&&(Z.element.addEventListener("input",function(Vs){g(Z.element.value,xe,Z.element)}),Z.element.addEventListener("blur",function(Vs){g(Z.element.value,xe)})),c(Z.element.getAttribute("id"))||xe.setAttribute("for",Z.element.getAttribute("id"))}function p(Z,te){"Always"===Z&&te.classList.contains("e-outline")&&te.classList.add("e-valid-input")}function f(Z,te,we){c(te)||(Z&&!we?A([te],je.CLEARICONHIDE):M([te],je.CLEARICONHIDE))}function g(Z,te,we){void 0===we&&(we=null),Z?(M([te],je.LABELTOP),te.classList.contains(je.LABELBOTTOM)&&A([te],je.LABELBOTTOM)):(null==we||we!==document.activeElement)&&(te.classList.contains(je.LABELTOP)&&A([te],je.LABELTOP),M([te],je.LABELBOTTOM))}function m(Z){var te=c(Z.parentNode)?Z:Z.parentNode;return te&&te.classList.contains("e-input-in-wrap")&&(te=te.parentNode),te}function b(Z,te,we){(void 0===t||t)&&te.addEventListener("click",function(Be){Z.classList.contains(je.DISABLE)||Z.readOnly||(Be.preventDefault(),Z!==document.activeElement&&Z.focus(),Z.value="",M([te],je.CLEARICONHIDE))}),Z.addEventListener("input",function(Be){f(Z.value,te)}),Z.addEventListener("focus",function(Be){f(Z.value,te,Z.readOnly)}),Z.addEventListener("blur",function(Be){setTimeout(function(){c(te)||(M([te],je.CLEARICONHIDE),te=!c(Z)&&Z.classList.contains("e-combobox")?null:te)},200)})}function S(Z,te){if(m(Z).classList.contains(je.FLOATINPUT)&&"Auto"===te){var Be=m(Z).getElementsByClassName("e-float-text")[0];g(Z.value,Be,Z)}}function I(Z,te,we,Be,Ge){var At,xe=c(Ge)?F:Ge;return c(Z.customTag)?At=xe(Be,{className:te}):(At=xe(Z.customTag,{className:te})).classList.add(we),At.classList.add("e-control-wrapper"),At}function x(Z){var te="";if(!c(Z)&&""!==Z){var we=document.createElement("span");we.innerHTML='<input  placeholder="'+Z+'"/>',te=we.children[0].placeholder}return te}function L(Z,te,we){!c(we)&&""!==we&&A(te,we.split(" ")),!c(Z)&&""!==Z&&M(te,Z.split(" "))}function N(Z,te,we){var Be="multiselect"===we?Z:Z.clientWidth-parseInt(getComputedStyle(Z,null).getPropertyValue("padding-left"),10);c(te.getElementsByClassName("e-float-text-content")[0])||(te.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&te.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(Be<te.getElementsByClassName("e-float-text-content")[0].clientWidth||Be===te.getElementsByClassName("e-float-text-content")[0].clientWidth)&&te.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}function _(Z,te){Z=x(Z);var we=m(te);we.classList.contains(je.FLOATINPUT)?c(Z)||""===Z?(we.classList.add(je.NOFLOATLABEL),we.getElementsByClassName("e-float-text-content")[0]?we.getElementsByClassName(je.FLOATTEXT)[0].children[0].textContent="":we.getElementsByClassName(je.FLOATTEXT)[0].textContent=""):(we.getElementsByClassName("e-float-text-content")[0]?we.getElementsByClassName(je.FLOATTEXT)[0].children[0].textContent=Z:we.getElementsByClassName(je.FLOATTEXT)[0].textContent=Z,we.classList.remove(je.NOFLOATLABEL),te.removeAttribute("placeholder")):c(Z)||""===Z?te.removeAttribute("placeholder"):re(te,{placeholder:Z})}function B(Z,te,we){Z?re(te,{readonly:""}):te.removeAttribute("readonly"),c(we)||S(te,we)}function q(Z,te){Z?M(te,je.RTL):A(te,je.RTL)}function W(Z,te,we,Be){var Ge={disabled:"disabled","aria-disabled":"true"},xe=!c(Be);Z?(te.classList.remove(je.DISABLE),G(Ge,te),xe&&A([Be],je.DISABLE)):(te.classList.add(je.DISABLE),Y(Ge,te),xe&&M([Be],je.DISABLE)),c(we)||S(te,we)}function j(Z,te,we,Be,Ge){var xe=c(Ge)?F:Ge;Z?we.clearButton=function y(Z,te,we,Be){var xe=(c(Be)?F:Be)("span",{className:je.CLEARICON}),At=te.container;return c(we)?(te.container.classList.contains(je.FLOATINPUT)?te.container.querySelector("."+je.FLOATTEXT):Z).insertAdjacentElement("afterend",xe):At.appendChild(xe),!c(At)&&At.classList.contains(je.FLOATINPUT)&&M([At],je.INPUTGROUP),M([xe],je.CLEARICONHIDE),b(Z,xe),xe.setAttribute("aria-label","close"),xe}(te,we,Be,xe):(le(we.clearButton),we.clearButton=null)}function G(Z,te){for(var we=0,Be=Object.keys(Z);we<Be.length;we++){var Ge=Be[we],xe=m(te);"disabled"===Ge&&te.classList.remove(je.DISABLE),"disabled"===Ge&&xe.classList.contains(je.INPUTGROUP)&&xe.classList.remove(je.DISABLE),"placeholder"===Ge&&xe.classList.contains(je.FLOATINPUT)?xe.getElementsByClassName(je.FLOATTEXT)[0].textContent="":te.removeAttribute(Ge)}}function Y(Z,te){for(var we=0,Be=Object.keys(Z);we<Be.length;we++){var Ge=Be[we],xe=m(te);"disabled"===Ge&&te.classList.add(je.DISABLE),"disabled"===Ge&&xe.classList.contains(je.INPUTGROUP)&&xe.classList.add(je.DISABLE),"placeholder"===Ge&&xe.classList.contains(je.FLOATINPUT)?xe.getElementsByClassName(je.FLOATTEXT)[0].textContent=Z[""+Ge]:te.setAttribute(Ge,Z[""+Ge])}}function $(Z,te){if(Z.classList.contains("e-outline")&&Z.getElementsByClassName("e-float-text")[0]){var we=te("span",{className:je.FLOATTEXTCONTENT});we.innerHTML=Z.getElementsByClassName("e-float-text")[0].innerHTML,Z.getElementsByClassName("e-float-text")[0].innerHTML="",Z.getElementsByClassName("e-float-text")[0].appendChild(we)}}function fe(Z,te,we){var Be=[];Be.push(we);var Ge=c(we)?te.querySelectorAll(".e-input-group-icon"):Be;if(Z&&Ge.length>0)for(var xe=0;xe<Ge.length;xe++)Ge[parseInt(xe.toString())].addEventListener("mousedown",Te,!1),Ge[parseInt(xe.toString())].addEventListener("mouseup",Ne,!1);else if(Ge.length>0)for(xe=0;xe<Ge.length;xe++)Ge[parseInt(xe.toString())].removeEventListener("mousedown",Te,this),Ge[parseInt(xe.toString())].removeEventListener("mouseup",Ne,this)}function Te(){for(var te=this.parentElement;!te.classList.contains("e-input-group");)te=te.parentElement;!function ve(Z,te){!Z.classList.contains("e-disabled")&&!Z.querySelector("input").readOnly&&te.classList.add("e-input-btn-ripple")}(te,this)}function Ne(){var Z=this;setTimeout(function(){Z.classList.remove("e-input-btn-ripple")},500)}function Ue(Z,te){var we=te("span",{className:Z});return we.classList.add("e-input-group-icon"),we}function rt(Z,te,we,Be){var Ge=c(Be)?F:Be,xe=Ue(Z,Ge);te.classList.add("e-float-icon-left");var At=te.querySelector(".e-input-in-wrap");if(c(At)){At=Ge("span",{className:"e-input-in-wrap"}),we.parentNode.insertBefore(At,we);var Vs=te.querySelectorAll(we.tagName+" ~ *");At.appendChild(we);for(var xr=0;xr<Vs.length;xr++)At.appendChild(Vs[parseInt(xr.toString())])}return At.parentNode.insertBefore(xe,At),te.classList.contains(je.INPUTGROUP)||te.classList.add(je.INPUTGROUP),fe(!0,te,xe),xe}function Ye(Z,te,we){var Ge=Ue(Z,c(we)?F:we);return te.classList.contains(je.INPUTGROUP)||te.classList.add(je.INPUTGROUP),(te.classList.contains("e-float-icon-left")?te.querySelector(".e-input-in-wrap"):te).appendChild(Ge),fe(!0,te,Ge),Ge}function dt(Z,te){"hidden"===te.type?Z.classList.add("e-hidden"):Z.classList.contains("e-hidden")&&Z.classList.remove("e-hidden")}s.createInput=function i(Z,te){var we=c(te)?F:te,Be={container:null,buttons:[],clearButton:null};if(e=Z.floatLabelType,t=Z.bindClearAction,c(Z.floatLabelType)||"Never"===Z.floatLabelType?(Be.container=I(Z,je.INPUTGROUP,je.INPUTCUSTOMTAG,"span",we),Z.element.parentNode.insertBefore(Be.container,Z.element),M([Z.element],je.INPUT),Be.container.appendChild(Z.element)):d(Z,Be,we),n(Z),!c(Z.properties)&&!c(Z.properties.showClearButton)&&Z.properties.showClearButton&&(j(Z.properties.showClearButton,Z.element,Be,!0,we),Be.clearButton.setAttribute("role","button"),Be.container.classList.contains(je.FLOATINPUT)&&M([Be.container],je.INPUTGROUP)),!c(Z.buttons))for(var Ge=0;Ge<Z.buttons.length;Ge++)Be.buttons.push(Ye(Z.buttons[Ge],Be.container,we));return!c(Z.element)&&"TEXTAREA"===Z.element.tagName&&M([Be.container],je.TEXTAREA),dt(Be.container,Z.element),$((Be=function u(Z,te){if(!c(Z.properties))for(var we=0,Be=Object.keys(Z.properties);we<Be.length;we++)switch(Be[we]){case"cssClass":L(Z.properties.cssClass,[te.container]),p(Z.floatLabelType,te.container);break;case"enabled":W(Z.properties.enabled,Z.element,Z.floatLabelType,te.container);break;case"enableRtl":q(Z.properties.enableRtl,[te.container]);break;case"placeholder":_(Z.properties.placeholder,Z.element);break;case"readonly":B(Z.properties.readonly,Z.element)}return te}(Z,Be)).container,we),Be},s.bindInitialEvent=n,s.wireFloatingEvents=l,s.wireClearBtnEvents=b,s.destroy=function w(){},s.setValue=function T(Z,te,we,Be){if(te.value=Z,"Auto"===we&&""===Z&&N(te,te.parentElement),!c(we)&&"Auto"===we&&S(te,we),!c(Be)&&Be){var Ge=m(te);if(!c(Ge)){var xe=Ge.getElementsByClassName(je.CLEARICON)[0];c(xe)||(te.value&&!c(Ge)&&Ge.classList.contains("e-input-focus")?A([xe],je.CLEARICONHIDE):M([xe],je.CLEARICONHIDE))}}r(we,te)},s.setCssClass=L,s.calculateWidth=N,s.setWidth=function O(Z,te){"number"==typeof Z?te.style.width=oe(Z):"string"==typeof Z&&(te.style.width=Z.match(/px|%|em/)?Z:oe(Z)),N(te.firstChild,te)},s.setPlaceholder=_,s.setReadonly=B,s.setEnableRtl=q,s.setEnabled=W,s.setClearButton=j,s.removeAttributes=G,s.addAttributes=Y,s.removeFloating=function U(Z){var te=Z.container;if(!c(te)&&te.classList.contains(je.FLOATINPUT)){var we=te.querySelector("textarea")?te.querySelector("textarea"):te.querySelector("input"),Be=te.querySelector("."+je.FLOATTEXT).textContent,Ge=null!==te.querySelector(".e-clear-icon");z(te.querySelector("."+je.FLOATLINE)),z(te.querySelector("."+je.FLOATTEXT)),ze(te,[je.INPUTGROUP],[je.FLOATINPUT]),function h(Z){Z.removeEventListener("focus",o),Z.removeEventListener("blur",a)}(we),re(we,{placeholder:Be}),we.classList.add(je.INPUT),!Ge&&"INPUT"===we.tagName&&we.removeAttribute("required")}},s.addFloating=function J(Z,te,we,Be){var Ge=c(Be)?F:Be,xe=k(Z,"."+je.INPUTGROUP);if(e=te,"Never"!==te){var At=xe.tagName,Vs={element:Z,floatLabelType:te,customTag:At="DIV"!==At&&"SPAN"!==At?At:null,properties:{placeholder:we}},xr=xe.querySelector(".e-clear-icon"),Tr={container:xe};Z.classList.remove(je.INPUT),d(Vs,Tr,Ge),$(Tr.container,Ge),N(Vs.element,Tr.container);var Rh=xe.classList.contains("e-float-icon-left");if(c(xr)&&(xr=Rh?xe.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):xe.querySelector(".e-input-group-icon")),c(xr))Rh&&(xr=xe.querySelector(".e-input-group-icon")),c(xr)&&xe.classList.remove(je.INPUTGROUP);else{var Oh=xe.querySelector("."+je.FLOATLINE),Nd=xe.querySelector("."+je.FLOATTEXT),yg=Rh?xe.querySelector(".e-input-in-wrap"):xe;yg.insertBefore(Z,xr),yg.insertBefore(Oh,xr),yg.insertBefore(Nd,xr)}}p(te,Z.parentElement)},s.createSpanElement=$,s.setRipple=function ye(Z,te){for(var we=0;we<te.length;we++)fe(Z,te[parseInt(we.toString())].container)},s.addIcon=function Pe(Z,te,we,Be,Ge){var xe="string"==typeof te?te.split(","):te;if("append"===Z.toLowerCase())for(var At=0,Vs=xe;At<Vs.length;At++)Ye(Vs[At],we,Ge);else for(var Tr=0,Rh=xe;Tr<Rh.length;Tr++)rt(Rh[Tr],we,Be,Ge);we.getElementsByClassName("e-input-group-icon")[0]&&we.getElementsByClassName("e-float-text-overflow")[0]&&we.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},s.prependSpan=rt,s.appendSpan=Ye,s.validateInputType=dt}(ie||(ie={}));var zfe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Dn=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},zV="e-input-group-icon",HV="e-spin-up",_V="e-error",vm="increment",M0="decrement",jfe=new RegExp("^(-)?(\\d*)$"),ej="e-input-focus",tj=["title","style","class"],ij=0,zr=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.isVue=!1,n.preventChange=!1,n.isAngular=!1,n.isDynamicChange=!1,n.numericOptions=t,n}return zfe(e,s),e.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var t=R("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),A([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=k(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var i=this.createElement("input"),n=0;n<this.element.attributes.length;n++){var r=this.element.attributes[n].nodeName;"id"!==r&&"class"!==r?(i.setAttribute(this.element.attributes[n].nodeName,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML):"class"===r&&i.setAttribute(r,this.element.className.split(" ").filter(function(a){return 0!==a.indexOf("ng-")}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(i),this.element=i,ke("ej2_instances",t,this.element)}re(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"}),this.l10n=new mi("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",yt("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},e.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!c(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},e.prototype.checkAttributes=function(t){for(var n=0,r=t?c(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];n<r.length;n++){var o=r[n];if(!c(this.element.getAttribute(o)))switch(o){case"disabled":if(c(this.numericOptions)||void 0===this.numericOptions.enabled||t){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!t)}break;case"readonly":if(c(this.numericOptions)||void 0===this.numericOptions.readonly||t){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!t)}break;case"placeholder":(c(this.numericOptions)||void 0===this.numericOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"value":if(c(this.numericOptions)||void 0===this.numericOptions.value||t){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));this.setProperties(ke(o,h,{}),!t)}break;case"min":if(c(this.numericOptions)||void 0===this.numericOptions.min||t){var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==d&&!isNaN(d)&&this.setProperties(ke(o,d,{}),!t)}break;case"max":if(c(this.numericOptions)||void 0===this.numericOptions.max||t){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==p&&!isNaN(p)&&this.setProperties(ke(o,p,{}),!t)}break;case"step":if(c(this.numericOptions)||void 0===this.numericOptions.step||t){var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==u&&!isNaN(u)&&this.setProperties(ke(o,u,{}),!t)}break;case"style":this.inputStyle=this.element.getAttribute(o);break;case"name":this.inputName=this.element.getAttribute(o);break;default:var f=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));(null!==f&&!isNaN(f)||"value"===o)&&this.setProperties(ke(o,f,{}),!0)}}},e.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},e.prototype.initCultureFunc=function(){this.instance=new qt(this.locale)},e.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==R("currency",this)&&(ke("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},e.prototype.createWrapper=function(){var t=this.cssClass;!c(this.cssClass)&&""!==this.cssClass&&(t=this.getNumericValidClassList(this.cssClass));var i=ie.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&re(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),re(this.hiddenInput,this.isAngular&&"EJS-NUMERICTEXTBOX"===this.angularTagName&&this.cloneElement.id.length>0?{name:this.cloneElement.id}:{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&re(this.container,{style:this.inputStyle})},e.prototype.updateDataAttribute=function(t){var i={};if(t)i=this.htmlAttributes;else for(var n=0;n<this.element.attributes.length;n++)i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name);for(var r=0,o=Object.keys(i);r<o.length;r++){var a=o[r];0===a.indexOf("data")&&this.hiddenInput.setAttribute(a,i[""+a])}},e.prototype.updateHTMLAttrToElement=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];tj.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[""+n])}},e.prototype.updateCssClass=function(t,i){ie.setCssClass(this.getNumericValidClassList(t),[this.container],this.getNumericValidClassList(i))},e.prototype.getNumericValidClassList=function(t){var i=t;return!c(t)&&""!==t&&(i=t.replace(/\s+/g," ").trim()),i},e.prototype.updateHTMLAttrToWrapper=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];if(tj.indexOf(n)>-1)if("class"===n){var r=this.getNumericValidClassList(this.htmlAttributes[""+n]);""!==r&&M([this.container],r.split(" "))}else if("style"===n){var o=this.container.getAttribute(n);o=c(o)?this.htmlAttributes[""+n]:o+this.htmlAttributes[""+n],this.container.setAttribute(n,o)}else this.container.setAttribute(n,this.htmlAttributes[""+n])}},e.prototype.setElementWidth=function(t){c(t)||("number"==typeof t?this.container.style.width=oe(t):"string"==typeof t&&(this.container.style.width=t.match(/px|%|em/)?t:oe(t)))},e.prototype.spinBtnCreation=function(){this.spinDown=ie.appendSpan(zV+" e-spin-down",this.container,this.createElement),re(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=ie.appendSpan(zV+" "+HV,this.container,this.createElement),re(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},e.prototype.validateMinMax=function(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&re(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&re(this.element,{"aria-valuemax":this.max.toString()})},e.prototype.formattedValue=function(t,i){return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(i)},e.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},e.prototype.action=function(t,i){this.isInteract=!0;var n=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(n,this.step,t)),this.raiseChangeEvent(i)},e.prototype.checkErrorClass=function(){this.isValidState?A([this.container],_V):M([this.container],_V),re(this.element,{"aria-invalid":this.isValidState?"false":"true"})},e.prototype.bindClearEvent=function(){this.showClearButton&&C.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},e.prototype.resetHandler=function(t){t.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(t),this.isInteract=!0,this.raiseChangeEvent(t)},e.prototype.clear=function(t){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",k(this.element,"form")){var n=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}},e.prototype.resetFormHandler=function(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)},e.prototype.setSpinButton=function(){c(this.spinDown)||re(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),c(this.spinUp)||re(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},e.prototype.wireEvents=function(){C.add(this.element,"focus",this.focusHandler,this),C.add(this.element,"blur",this.focusOutHandler,this),C.add(this.element,"keydown",this.keyDownHandler,this),C.add(this.element,"keyup",this.keyUpHandler,this),C.add(this.element,"input",this.inputHandler,this),C.add(this.element,"keypress",this.keyPressHandler,this),C.add(this.element,"change",this.changeHandler,this),C.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&C.add(this.formEle,"reset",this.resetFormHandler,this))},e.prototype.wireSpinBtnEvents=function(){C.add(this.spinUp,E.touchStartEvent,this.mouseDownOnSpinner,this),C.add(this.spinDown,E.touchStartEvent,this.mouseDownOnSpinner,this),C.add(this.spinUp,E.touchEndEvent,this.mouseUpOnSpinner,this),C.add(this.spinDown,E.touchEndEvent,this.mouseUpOnSpinner,this),C.add(this.spinUp,E.touchMoveEvent,this.touchMoveOnSpinner,this),C.add(this.spinDown,E.touchMoveEvent,this.touchMoveOnSpinner,this)},e.prototype.unwireEvents=function(){C.remove(this.element,"focus",this.focusHandler),C.remove(this.element,"blur",this.focusOutHandler),C.remove(this.element,"keyup",this.keyUpHandler),C.remove(this.element,"input",this.inputHandler),C.remove(this.element,"keydown",this.keyDownHandler),C.remove(this.element,"keypress",this.keyPressHandler),C.remove(this.element,"change",this.changeHandler),C.remove(this.element,"paste",this.pasteHandler),this.formEle&&C.remove(this.formEle,"reset",this.resetFormHandler)},e.prototype.unwireSpinBtnEvents=function(){C.remove(this.spinUp,E.touchStartEvent,this.mouseDownOnSpinner),C.remove(this.spinDown,E.touchStartEvent,this.mouseDownOnSpinner),C.remove(this.spinUp,E.touchEndEvent,this.mouseUpOnSpinner),C.remove(this.spinDown,E.touchEndEvent,this.mouseUpOnSpinner),C.remove(this.spinUp,E.touchMoveEvent,this.touchMoveOnSpinner),C.remove(this.spinDown,E.touchMoveEvent,this.touchMoveOnSpinner)},e.prototype.changeHandler=function(t){t.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,t)},e.prototype.raiseChangeEvent=function(t){if(this.prevValue!==this.value||this.prevValue!==this.inputValue){var i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:t},t&&(this.changeEventArgs.event=t),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),zn(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}},e.prototype.pasteHandler=function(){var t=this;if(this.enabled&&!this.readonly){var i=this.element.value;setTimeout(function(){t.numericRegex().test(t.element.value)||t.setElementValue(i)})}},e.prototype.preventHandler=function(){var t=this,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(t.element.selectionStart>0){var n=t.element.selectionStart,r=t.element.selectionStart-1,a=t.element.value.split(""),h=R("decimal",r0(t.locale)),d=h.charCodeAt(0);" "===t.element.value[r]&&t.element.selectionStart>0&&!i?(c(t.prevVal)?t.element.value=t.element.value.trim():0!==r?t.element.value=t.prevVal:0===r&&(t.element.value=t.element.value.trim()),t.element.setSelectionRange(r,r)):isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&45!==t.element.value[t.element.selectionStart-1].charCodeAt(0)?(a.indexOf(t.element.value[t.element.selectionStart-1])!==a.lastIndexOf(t.element.value[t.element.selectionStart-1])&&t.element.value[t.element.selectionStart-1].charCodeAt(0)===d||t.element.value[t.element.selectionStart-1].charCodeAt(0)!==d)&&(t.element.value=t.element.value.substring(0,r)+t.element.value.substring(n,t.element.value.length),t.element.setSelectionRange(r,r),isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&t.element.selectionStart>0&&t.element.value.length&&t.preventHandler()):isNaN(parseFloat(t.element.value[t.element.selectionStart-2]))&&t.element.selectionStart>1&&45!==t.element.value[t.element.selectionStart-2].charCodeAt(0)&&(a.indexOf(t.element.value[t.element.selectionStart-2])!==a.lastIndexOf(t.element.value[t.element.selectionStart-2])&&t.element.value[t.element.selectionStart-2].charCodeAt(0)===d||t.element.value[t.element.selectionStart-2].charCodeAt(0)!==d)&&(t.element.setSelectionRange(r,r),t.nextEle=t.element.value[t.element.selectionStart],t.cursorPosChanged=!0,t.preventHandler()),!0===t.cursorPosChanged&&t.element.value[t.element.selectionStart]===t.nextEle&&isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&(t.element.setSelectionRange(t.element.selectionStart+1,t.element.selectionStart+1),t.cursorPosChanged=!1,t.nextEle=null),""===t.element.value.trim()&&t.element.setSelectionRange(0,0),t.element.selectionStart>0&&(45===t.element.value[t.element.selectionStart-1].charCodeAt(0)&&t.element.selectionStart>1&&(t.element.value=c(t.prevVal)?t.element.value:t.prevVal,t.element.setSelectionRange(t.element.selectionStart,t.element.selectionStart)),t.element.value[t.element.selectionStart-1]===h&&0===t.decimals&&t.validateDecimalOnType&&(t.element.value=t.element.value.substring(0,r)+t.element.value.substring(n,t.element.value.length))),t.prevVal=t.element.value}})},e.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&E.isDevice&&this.preventHandler();var i=this.instance.getNumberParser({format:"n"})(this.element.value);if(i=null===i||isNaN(i)?null:i,this.hiddenInput.value=i||0===i?i.toString():null,k(this.element,"form")){var r=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),r.dispatchEvent(o)}}},e.prototype.inputHandler=function(t){if(this.enabled&&!this.readonly){var n=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||n)&&E.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==R("decimal",r0(this.locale))&&this.element.value!==R("minusSign",r0(this.locale))){var o=this.instance.getNumberParser({format:"n"})(this.element.value);o=isNaN(o)?null:o,this.localChange({value:o}),this.preventChange=!0}if(this.isVue){var a=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(a=this.value);var d={event:t,value:null===a||isNaN(a)?null:a,previousValue:null===l||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",d)}}},e.prototype.keyDownHandler=function(t){if(!this.readonly)switch(t.keyCode){case 38:t.preventDefault(),this.action(vm,t);break;case 40:t.preventDefault(),this.action(M0,t)}},e.prototype.performAction=function(t,i,n){(null===t||isNaN(t))&&(t=0);var r=n===vm?t+i:t-i;return r=this.correctRounding(t,i,r),this.strictMode?this.trimValue(r):r},e.prototype.correctRounding=function(t,i,n){var r=new RegExp("[,.](.*)"),o=r.test(t.toString()),a=r.test(i.toString());if(o||a){var l=o?r.exec(t.toString())[0].length:0,h=a?r.exec(i.toString())[0].length:0,d=Math.max(l,h);return this.roundValue(n,d)}return n},e.prototype.roundValue=function(t,i){i=i||0;var n=Math.pow(10,i);return Math.round(t*=n)/n},e.prototype.updateValue=function(t,i){i&&(this.isInteract=!0),null!==t&&!isNaN(t)&&this.decimals&&(t=this.roundNumber(t,this.decimals)),this.inputValue=t,this.changeValue(null===t||isNaN(t)?null:this.strictMode?this.trimValue(t):t),this.isDynamicChange||this.raiseChangeEvent(i)},e.prototype.updateCurrency=function(t,i){ke(t,i,this.cultureInfo),this.updateValue(this.value)},e.prototype.changeValue=function(t){if(t||0===t){var i=this.getNumberOfDecimals(t);this.setProperties({value:this.roundNumber(t,i)},!0)}else this.setProperties({value:t=null},!0);this.modifyText(),this.strictMode||this.validateState()},e.prototype.modifyText=function(){if(this.value||0===this.value){var t=this.formatNumber(),i=this.isFocused?t:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),re(this.element,{"aria-valuenow":t}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},e.prototype.setElementValue=function(t,i){ie.setValue(t,i||this.element,this.floatLabelType,this.showClearButton)},e.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},e.prototype.getNumberOfDecimals=function(t){var i,n=new RegExp("[eE][-+]?([0-9]+)"),r=t.toString();if(n.test(r)){var o=n.exec(r);c(o)||(r=t.toFixed(Math.min(parseInt(o[1],10),20)))}var a=r.split(".")[1];return i=a&&a.length?a.length:0,null!==this.decimals&&(i=i<this.decimals?i:this.decimals),i},e.prototype.formatNumber=function(){var t=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(this.value)},e.prototype.trimValue=function(t){return t>this.max?this.max:t<this.min?this.min:t},e.prototype.roundNumber=function(t,i){var n=t,r=i||0,o=n.toString().split("e"),a=(n=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+r:r)))).toString().split("e");return n=Number(a[0]+"e"+(a[1]?Number(a[1])-r:-r)),Number(n.toFixed(r))},e.prototype.cancelEvent=function(t){return t.preventDefault(),!1},e.prototype.keyPressHandler=function(t){if(!this.enabled||this.readonly)return!0;if(!E.isDevice&&"11.0"===E.info.version&&13===t.keyCode){var i=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(i,t),!0}if(0===t.which||t.metaKey||t.ctrlKey||8===t.keyCode||13===t.keyCode)return!0;var n=String.fromCharCode(t.which),r=R("decimal",r0(this.locale)),o="NumpadDecimal"===t.code&&n!==r;o&&(n=r);var a=this.element.value;if(a=a.substring(0,this.element.selectionStart)+n+a.substring(this.element.selectionEnd),this.numericRegex().test(a)){if(o){var l=this.element.selectionStart+1;this.element.value=a,this.element.setSelectionRange(l,l),t.preventDefault(),t.stopPropagation()}return!0}return t.preventDefault(),t.stopPropagation(),!1},e.prototype.numericRegex=function(){var i=R("decimal",r0(this.locale)),n="*";return"."===i&&(i="\\"+i),0===this.decimals&&this.validateDecimalOnType?jfe:(this.decimals&&this.validateDecimalOnType&&(n="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+i+"\\d"+n+")?)|("+i+"\\d"+n+")))?$"))},e.prototype.mouseWheel=function(t){var i;t.preventDefault(),t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3),i>0?this.action(vm,t):i<0&&this.action(M0,t),this.cancelEvent(t)},e.prototype.focusHandler=function(t){var i=this;if(clearTimeout(ij),this.focusEventArgs={event:t,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,A([this.container],_V),this.prevValue=this.value,this.value||0===this.value){var n=this.formatNumber();this.setElementValue(n),this.isPrevFocused||(E.isDevice||"11.0"!==E.info.version?ij=setTimeout(function(){i.element.setSelectionRange(0,n.length)},E.isDevice&&E.isIos?600:0):this.element.setSelectionRange(0,n.length))}E.isDevice||C.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},e.prototype.focusOutHandler=function(t){var i=this;if(this.blurEventArgs={event:t,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(t.preventDefault(),E.isDevice){var n=this.element.value;this.element.focus(),this.isPrevFocused=!1;var r=this.element;setTimeout(function(){i.setElementValue(n,r)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var o=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(o),E.isDevice||C.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(k(this.element,"form")){var l=this.element.nextElementSibling,h=document.createEvent("FocusEvent");h.initEvent("focusout",!1,!0),l.dispatchEvent(h)}}},e.prototype.mouseDownOnSpinner=function(t){var i=this;if(this.isFocused&&(this.isPrevFocused=!0,t.preventDefault()),this.getElementData(t)){this.getElementData(t);var r=t.currentTarget,o=r.classList.contains(HV)?vm:M0;C.add(r,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0,i.action(o,t)},150),C.add(document,"mouseup",this.mouseUpClick,this)}},e.prototype.touchMoveOnSpinner=function(t){var i;if("touchmove"===t.type){var n=t.touches;i=n.length&&document.elementFromPoint(n[0].pageX,n[0].pageY)}else i=document.elementFromPoint(t.clientX,t.clientY);i.classList.contains(zV)||clearInterval(this.timeOut)},e.prototype.mouseUpOnSpinner=function(t){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),E.isDevice||(this.isPrevFocused=!1)),E.isDevice||t.preventDefault(),this.getElementData(t)){var i=t.currentTarget,n=i.classList.contains(HV)?vm:M0;if(C.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(n,t),this.isCalled=!1,C.remove(document,"mouseup",this.mouseUpClick),k(this.element,"form")){var o=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),o.dispatchEvent(a)}}},e.prototype.getElementData=function(t){return!(t.which&&3===t.which||t.button&&2===t.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))},e.prototype.floatLabelTypeUpdate=function(){ie.removeFloating(this.inputWrapper);var t=this.hiddenInput;this.hiddenInput.remove(),ie.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(t,this.container.childNodes[1])},e.prototype.mouseUpClick=function(t){t.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&C.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&C.remove(this.spinDown,"mouseleave",this.mouseUpClick)},e.prototype.increment=function(t){void 0===t&&(t=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,t,vm)),this.raiseChangeEvent()},e.prototype.decrement=function(t){void 0===t&&(t=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,t,M0)),this.raiseChangeEvent()},e.prototype.destroy=function(){this.unwireEvents(),z(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),z(this.spinUp),z(this.spinDown));for(var t=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),z(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,ie.destroy(),s.prototype.destroy.call(this)},e.prototype.getText=function(){return this.element.value},e.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),M([this.container],[ej]))},e.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),A([this.container],[ej]))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"width":this.setElementWidth(t.width),ie.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"enabled":ie.setEnabled(t.enabled,this.element),this.bindClearEvent();break;case"enableRtl":ie.setEnableRtl(t.enableRtl,[this.container]);break;case"readonly":ie.setReadonly(t.readonly,this.element),this.readonly?re(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),ie.validateInputType(this.container,this.element);break;case"placeholder":ie.setPlaceholder(t.placeholder,this.element),ie.calculateWidth(this.element,this.container);break;case"step":this.step=t.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(t);break;case"showClearButton":this.updateClearButton(t);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(t.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":ke(o,R(o,t),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=t.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),ie.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var a=R(o,t);this.setProperties({currencyCode:a},!0),this.updateCurrency(o,a);break;case"currencyCode":var l=R(o,t);this.setProperties({currency:l},!0),this.updateCurrency("currency",l);break;case"format":ke(o,R(o,t),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=t.decimals,this.updateValue(this.value)}}},e.prototype.updateClearButton=function(t){ie.setClearButton(t.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},e.prototype.updateSpinButton=function(t){t.showSpinButton?this.spinBtnCreation():(z(this.spinUp),z(this.spinDown))},e.prototype.getModuleName=function(){return"numerictextbox"},Dn([v("")],e.prototype,"cssClass",void 0),Dn([v(null)],e.prototype,"value",void 0),Dn([v(-Number.MAX_VALUE)],e.prototype,"min",void 0),Dn([v(Number.MAX_VALUE)],e.prototype,"max",void 0),Dn([v(1)],e.prototype,"step",void 0),Dn([v(null)],e.prototype,"width",void 0),Dn([v(null)],e.prototype,"placeholder",void 0),Dn([v({})],e.prototype,"htmlAttributes",void 0),Dn([v(!0)],e.prototype,"showSpinButton",void 0),Dn([v(!1)],e.prototype,"readonly",void 0),Dn([v(!0)],e.prototype,"enabled",void 0),Dn([v(!1)],e.prototype,"showClearButton",void 0),Dn([v(!1)],e.prototype,"enablePersistence",void 0),Dn([v("n2")],e.prototype,"format",void 0),Dn([v(null)],e.prototype,"decimals",void 0),Dn([v(null)],e.prototype,"currency",void 0),Dn([v(null)],e.prototype,"currencyCode",void 0),Dn([v(!0)],e.prototype,"strictMode",void 0),Dn([v(!1)],e.prototype,"validateDecimalOnType",void 0),Dn([v("Never")],e.prototype,"floatLabelType",void 0),Dn([V()],e.prototype,"created",void 0),Dn([V()],e.prototype,"destroyed",void 0),Dn([V()],e.prototype,"change",void 0),Dn([V()],e.prototype,"focus",void 0),Dn([V()],e.prototype,"blur",void 0),Dn([et],e)}(Lt),Z1="e-error",Yfe="e-input-group",Qfe="e-float-input",K1="e-label-top",Xfe="e-label-bottom",rj={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^\x7f ]+",C:"[^\x7f]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"};function sj(){if(re(this.element,{role:"textbox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive"}),this.mask){for(var s=this.mask.split("]"),e=0;e<s.length;e++)if("\\"===s[e][s[e].length-1]){s[e]=s[e]+"]";for(var t=s[e].split("["),i=0;i<t.length;i++)"\\"===t[i][t[i].length-1]&&(t[i]=t[i]+"["),qV.call(this,t[i])}else if((t=s[e].split("[")).length>1){var n=!1;for(i=0;i<t.length;i++)"\\"===t[i]?(this.customRegExpCollec.push("["),this.hiddenMask+=t[i]+"["):""===t[i]?n=!0:""!==t[i]&&n||i===t.length-1?(this.customRegExpCollec.push("["+t[i]+"]"),this.hiddenMask+=this.promptChar,n=!1):qV.call(this,t[i])}else qV.call(this,t[0]);if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!c(this.customCharacters))for(e=0;e<this.promptMask.length;e++)c(this.customCharacters[this.promptMask[e]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[e],"g"),this.promptChar));var r=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(e=0;e<this.hiddenMask.length;e++)i=0,e>=1&&(i=e),i-=r=this.hiddenMask.length-this.promptMask.length,e>0&&"\\"!==this.hiddenMask[e-1]&&(">"===this.hiddenMask[e]||"<"===this.hiddenMask[e]||"|"===this.hiddenMask[e])&&(this.promptMask=this.promptMask.substring(0,i)+this.promptMask.substring(e+1-r,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,i)+this.escapeMaskValue.substring(e+1-r,this.escapeMaskValue.length)),"\\"===this.hiddenMask[e]&&(this.promptMask=this.promptMask.substring(0,i)+this.hiddenMask[e+1]+this.promptMask.substring(e+2-r,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,i)+this.escapeMaskValue[e+1]+this.escapeMaskValue.substring(e+2-r,this.escapeMaskValue.length));else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");re(this.element,{"aria-invalid":"false"})}}function oj(){sn.call(this,this.promptMask),J1.call(this,this.value)}function aj(){C.add(this.element,"keydown",yj,this),C.add(this.element,"keypress",Sj,this),C.add(this.element,"keyup",Cj,this),C.add(this.element,"input",vj,this),C.add(this.element,"focus",uj,this),C.add(this.element,"blur",fj,this),C.add(this.element,"paste",gj,this),C.add(this.element,"cut",mj,this),C.add(this.element,"drop",$fe,this),C.add(this.element,"mousedown",pj,this),C.add(this.element,"mouseup",cj,this),this.enabled&&(lj.call(this),this.formElement&&C.add(this.formElement,"reset",hj,this))}function jV(){C.remove(this.element,"keydown",yj),C.remove(this.element,"keypress",Sj),C.remove(this.element,"keyup",Cj),C.remove(this.element,"input",vj),C.remove(this.element,"focus",uj),C.remove(this.element,"blur",fj),C.remove(this.element,"paste",gj),C.remove(this.element,"cut",mj),C.remove(this.element,"mousedown",pj),C.remove(this.element,"mouseup",cj),this.formElement&&C.remove(this.formElement,"reset",hj)}function lj(){this.showClearButton&&C.add(this.inputObj.clearButton,"mousedown touchstart",Zfe,this)}function Zfe(s){s.preventDefault(),(!this.inputObj.clearButton.classList.contains("e-clear-icon-hide")||this.inputObj.container.classList.contains("e-static-clear"))&&(Kfe.call(this,s),this.value="")}function Kfe(s){var e=this.element.value;sn.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),rp.call(this,s,e),this.element.setSelectionRange(0,0)}function hj(){"EJS-MASKEDTEXTBOX"===this.element.tagName?sn.call(this,this.promptMask):this.value=this.initInputValue}function dj(s){return s.value}function oh(s,e){var t="",i=0,n=!1,r=!c(e)||c(s)||c(this)?e:s.value;if(r!==this.promptMask)for(var o=0;o<this.customRegExpCollec.length;o++)n&&(n=!1),(">"===this.customRegExpCollec[i]||"<"===this.customRegExpCollec[i]||"|"===this.customRegExpCollec[i]||"\\"===this.customRegExpCollec[i])&&(--o,n=!0),n||r[o]!==this.promptChar&&!c(this.customRegExpCollec[i])&&(this._callPasteHandler||!c(this.regExpCollec[this.customRegExpCollec[i]])||this.customRegExpCollec[i].length>2&&"["===this.customRegExpCollec[i][0]&&"]"===this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]||!c(this.customCharacters)&&!c(this.customCharacters[this.customRegExpCollec[i]]))&&""!==r&&(t+=r[o]),++i;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(t=r),t}function qV(s){for(var e=0;e<s.length;e++)this.hiddenMask+=s[e],"\\"!==s[e]&&this.customRegExpCollec.push(s[e])}function pj(){this.isClicked=!0}function cj(){this.isClicked=!1}function uj(s){var e=this,t=this.element,i=0,n=oh.call(this,t),r=!1,o=!1,a={selectionStart:t.selectionStart,event:s,value:this.value,maskedValue:t.value,container:c(this.inputObj)?this.inputObj:this.inputObj.container,selectionEnd:t.selectionEnd};if(this.isClicked||WV.call(this,a,t),this.mask&&(!(null===n||""===n)||"Always"===this.floatLabelType||null===this.placeholder||""===this.placeholder||(t.value=this.promptMask),setTimeout(function(){if(t.selectionStart===e.promptMask.length||t.value[t.selectionStart]===e.promptChar)r=!0;else for(var l=t.selectionStart;l<e.promptMask.length;l++){if(t.value[l]===e.promptChar){r=!0;break}if(t.value[l]!==e.promptMask[l]){r=!1;break}}}),setTimeout(function(){var l=t.selectionStart-1;if(l===e.promptMask.length-1||t.value[l]===e.promptChar)o=!0;else for(var h=l;h>=0;h--){if(t.value[h]===e.promptChar){o=!0;break}if(t.value[h]!==e.promptMask[h]){o=!1;break}}}),this.isClicked||"Always"!==this.floatLabelType&&(null===n||""===n)&&null!==this.placeholder&&""!==this.placeholder)){for(i=0;i<this.promptMask.length;i++)if(t.value[i]===this.promptChar){setTimeout(function(){(r||o)&&(t.selectionEnd=i,t.selectionStart=i),a={selectionStart:t.selectionStart,event:s,value:e.value,maskedValue:t.value,container:c(e.inputObj)?e.inputObj:e.inputObj.container,selectionEnd:t.selectionEnd},WV.call(e,a,t)},110);break}c(t.value.match(function Jfe(s){return c(s)?s:s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(this.promptChar)))&&(a={selectionStart:t.selectionStart,event:s,value:this.value,maskedValue:t.value,container:c(this.inputObj)?this.inputObj:this.inputObj.container,selectionEnd:t.selectionEnd},WV.call(this,a,t)),this.isClicked=!1}}function WV(s,e){this.trigger("focus",s,function(t){e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd})}function fj(s){if(this.blurEventArgs={event:s,value:this.value,maskedValue:this.element.value,container:c(this.inputObj)?this.inputObj:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){sn.call(this,"");var e=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!c(e)&&e.classList.contains(K1)&&A([e],K1)}}function gj(s){var e=this;if(this.mask&&!this.readonly){var t=this.element.selectionStart,i=this.element.selectionEnd,n=this.element.value;sn.call(this,""),this._callPasteHandler=!0,setTimeout(function(){var r=e.element.value.replace(/ /g,"");e.redoCollec.length>0&&e.redoCollec[0].value===e.element.value&&(r=oh.call(e,e.element)),sn.call(e,n),e.element.selectionStart=t,e.element.selectionEnd=i;var o=0;e.maskKeyPress=!0;do{Sc.call(e,r[o],!1,null),++o}while(o<r.length);if(e.maskKeyPress=!1,e._callPasteHandler=!1,e.element.value===n){var a=0;e.maskKeyPress=!0;do{Sc.call(e,r[a],!1,null),++a}while(a<r.length);e.maskKeyPress=!1}else rp.call(e,s,n)},1)}}function mj(s){var e=this;if(this.mask&&!this.readonly){var t=this.element.value,i=this.element.selectionStart,n=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});var r=this.element.value.substring(0,i)+this.promptMask.substring(i,n)+this.element.value.substring(n);setTimeout(function(){sn.call(e,r),e.element.selectionStart=e.element.selectionEnd=i,e.element.value!==t&&rp.call(e,s,null)},0)}}function $fe(s){s.preventDefault()}function vj(s){if((!0!==E.isIE||""!==this.element.value||"Never"!==this.floatLabelType)&&(Q(s,{ctrlKey:!1,keyCode:229}),this.mask)){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||wj.call(this,s),this.element.value.length>this.promptMask.length){var t=this.element.selectionStart,n=this.element.value.substring(t-(this.element.value.length-this.promptMask.length),t);this.maskKeyPress=!1;var r=0;do{Sc.call(this,n[r],s.ctrlKey,s),++r}while(r<n.length);this.element.value!==this.preEleVal&&rp.call(this,s,null)}var o=oh.call(this,this.element);this.prevValue=o,this.value=o,""===o&&(sn.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}function yj(s){if(this.mask&&!this.readonly){229!==s.keyCode&&(s.ctrlKey&&(89===s.keyCode||90===s.keyCode)&&s.preventDefault(),wj.call(this,s));var e=this.element.value;if(s.ctrlKey&&(89===s.keyCode||90===s.keyCode)){var t=void 0;90===s.keyCode&&this.undoCollec.length>0&&e!==this.undoCollec[this.undoCollec.length-1].value?(t=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),sn.call(this,t.value),this.element.selectionStart=t.startIndex,this.element.selectionEnd=t.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===s.keyCode&&this.redoCollec.length>0&&e!==this.redoCollec[0].value&&(t=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),sn.call(this,t.value),this.element.selectionStart=t.startIndex,this.element.selectionEnd=t.endIndex,this.redoCollec.splice(0,1))}}}function ege(){var s,e=this.element.selectionStart,t=this.element.selectionEnd;this.redoCollec.length>0?(sn.call(this,(s=this.redoCollec[0]).value),s.startIndex-e==1?(this.element.selectionStart=s.startIndex,this.element.selectionEnd=s.endIndex):(this.element.selectionStart=e+1,this.element.selectionEnd=t+1)):(sn.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=e)}function bj(s,e,t){return"input"===t.type&&(s=!1,e=this.element.value,sn.call(this,this.promptMask),J1.call(this,e)),s}function wj(s){var t,e=!1,i=!1;this.element.value.length<this.promptMask.length&&(e=bj.call(this,e=!0,t=this.element.value,s),ege.call(this)),this.element.value.length>=this.promptMask.length&&"input"===s.type&&(e=bj.call(this,e,t,s));var n=this.element.selectionStart,r=this.element.selectionEnd,o=this.element.selectionStart,a=this.element.selectionEnd,l=this.hiddenMask.replace(/[>|\\<]/g,""),h=l[o-1],d=this.element.selectionEnd;if(e||8===s.keyCode||46===s.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:a});var p=!1,u=this.element.value;if(o>0||(8===s.keyCode||46===s.keyCode)&&o<this.element.value.length&&this.element.selectionEnd-o!==this.element.value.length){var f=o;o!==a?(o=a,46===s.keyCode&&(p=!0)):46===s.keyCode?++f:--f;for(var g=o;8===s.keyCode||e||p?g>f:g<f;8===s.keyCode||e||p?g--:g++)for(var m=o;8===s.keyCode||e||p?m>0:m<this.element.value.length;8===s.keyCode||e||p?m--:m++){var y=void 0;if((8===s.keyCode||p)&&(n!==r&&n!==o||n===r)||e?(h=l[m-1],y=o-1):(h=l[m],y=o,++o),c(this.regExpCollec[""+h])&&!c(this.customCharacters)&&c(this.customCharacters[""+h])&&this.hiddenMask[y]!==this.promptChar&&"["!==this.customRegExpCollec[y][0]&&"]"!==this.customRegExpCollec[y][this.customRegExpCollec[y].length-1]||this.promptMask[y]!==this.promptChar&&c(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=y,s.preventDefault(),46===s.keyCode&&!p&&++this.element.selectionStart;else{var w=this.element.value,S=this.promptChar,I=w.substring(0,y)+S+w.substring(o,w.length);sn.call(this,I),s.preventDefault(),46===s.keyCode&&!p&&y++,this.element.selectionStart=this.element.selectionEnd=y,i=!0}if(o=this.element.selectionStart,!i&&8===s.keyCode||p||!i&&46!==s.keyCode?y=o-1:(y=o,i=!1),n!==r&&this.element.selectionStart===n||this.promptMask[y]===this.promptChar||this.element.value[y]!==this.promptMask[y]&&this.promptMask[y]!==this.promptChar&&!c(this.customCharacters))break}}46===s.keyCode&&p&&i&&(this.element.selectionStart=this.element.selectionEnd=d),0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(sn.call(this,this.promptMask),s.preventDefault(),this.element.selectionStart=this.element.selectionEnd=o),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==u&&rp.call(this,s,t)}}function Sj(s){if(this.mask&&!this.readonly){var e=this.element.value;if(!s.ctrlKey&&!s.metaKey||(s.ctrlKey||s.metaKey)&&"KeyA"!==s.code&&"KeyY"!==s.code&&"KeyZ"!==s.code&&"KeyX"!==s.code&&"KeyC"!==s.code&&"KeyV"!==s.code){this.maskKeyPress=!0;var t=s.key;"Spacebar"===t&&(t=String.fromCharCode(s.keyCode)),t?t&&1===t.length&&(Sc.call(this,t,s.ctrlKey,s),s.preventDefault()):(this.isIosInvalid=!0,Sc.call(this,String.fromCharCode(s.keyCode),s.ctrlKey,s),s.preventDefault(),this.isIosInvalid=!1),32===s.keyCode&&" "===t&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-t.length)}this.element.value!==e&&rp.call(this,s,e)}}function rp(s,e){var t=this.isProtectedOnChange;if(!c(this.changeEventArgs)&&!this.isInitial){var i={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=oh.call(this,this.element)),c(s)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=s),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=t,zn(i,this.changeEventArgs),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",i)}this.preEleVal=this.element.value,this.prevValue=oh.call(this,this.element)}function Cj(s){if(this.mask&&!this.readonly){var e=void 0;if(this.maskKeyPress||229!==s.keyCode)xj.call(this);else{var t=void 0;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){var i=this.element.selectionStart,n=this.element.value.length-this.promptMask.length,r=this.element.value.substring(i-n,i);if(this.undoCollec.length>0){var o=this.element.selectionStart;t=(e=this.undoCollec[this.undoCollec.length-1]).value;var a=e.value.substring(o-n,o);e=this.redoCollec[0],r=r.trim();var l=E.isAndroid&&""===r;l||a===r||e.value.substring(o-n,o)===r?l&&Ij.call(this,s,o-1,this.element.selectionEnd-1,r,s.ctrlKey,!1):Sc.call(this,r,s.ctrlKey,s)}else t=this.promptMask,Sc.call(this,r,s.ctrlKey,s);this.maskKeyPress=!1,rp.call(this,s,t)}}var h=oh.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==h||""===h&&this.value!==h)&&(this.prevValue=h,this.value=h)}else rp.call(this,s);if(0===this.element.selectionStart&&0===this.element.selectionEnd){var d=this.element;setTimeout(function(){d.setSelectionRange(0,0)},0)}}function tge(s){if(s.length>1&&this.promptMask.length+s.length<this.element.value.length){var e=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+s+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);sn.call(this,e),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+s.length}this.element.selectionStart=this.element.selectionStart-s.length,this.element.selectionEnd=this.element.selectionEnd-s.length}function ige(s){this.maskKeyPress||tge.call(this,s)}function Sc(s,e,t){if(ige.call(this,s),!c(this)&&!c(s))for(var r,l,i=this.element.selectionStart,n=i,o=!1,a=this.element.value,h=!1,d=!1,p=0;p<s.length;p++){var u=s[p];if(i=this.element.selectionStart,!this.maskKeyPress&&n===i&&(i+=p),!this.maskKeyPress||i<this.promptMask.length){for(var f=i;f<this.promptMask.length;f++)"\\"===this.hiddenMask[i]&&this.hiddenMask[i+1]===s&&(d=!0),(c(this.regExpCollec[""+(r=this.escapeMaskValue[i])])&&(c(this.customCharacters)||!c(this.customCharacters)&&c(this.customCharacters[""+r]))&&this.hiddenMask[i]!==this.promptChar&&"["!==this.customRegExpCollec[i][0]&&"]"!==this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]||this.promptMask[i]!==this.promptChar&&c(this.customCharacters)||this.promptChar===r&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=i+1,r=this.hiddenMask[i=this.element.selectionStart]);if(c(this.customCharacters)||c(this.customCharacters[""+r]))(!c(this.regExpCollec[""+r])&&u.match(new RegExp(this.regExpCollec[""+r]))&&this.promptMask[i]===this.promptChar||this.promptMask[i]===this.promptChar&&"["===this.customRegExpCollec[i][0]&&"]"===this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]&&u.match(new RegExp(this.customRegExpCollec[i])))&&(o=!0);else{var y=this.customCharacters[""+r].split(",");for(f=0;f<y.length;f++)if(u.match(new RegExp("["+y[f]+"]"))){o=!0;break}}if((!this.maskKeyPress||i<this.hiddenMask.length)&&o){if(0===p)if(this.maskKeyPress)this.undoCollec.push({value:a,startIndex:i,endIndex:i});else{var b=this.element.selectionStart,w=this.element.selectionEnd;this.redoCollec.length>0?(sn.call(this,l=this.redoCollec[0].value),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:i,endIndex:i}),sn.call(this,l=this.promptMask)),this.element.selectionStart=b,this.element.selectionEnd=w}nge.call(this,t,i=this.element.selectionStart,u,l,d),h=!0,p===s.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),o=!1}else Ij.call(this,t,i=this.element.selectionStart,n,s,e,h);p===s.length-1&&!o&&(!E.isAndroid||E.isAndroid&&i<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1===s.length&&!e&&!c(t)&&UV.call(this)}}function nge(s,e,t,i,n){if(this.hiddenMask.length>this.promptMask.length&&(t=rge.call(this,t,this.element.value)),!n){var r=this.element.value,o=r.substring(0,e)+t+r.substring(e+1,r.length);sn.call(this,o),this.element.selectionStart=this.element.selectionEnd=e+1}}function Ij(s,e,t,i,n,r){if(!this.maskKeyPress){var o=this.element.value;e>=this.promptMask.length?sn.call(this,o.substring(0,e)):(sn.call(this,t===e?o.substring(0,e)+o.substring(e+1,o.length):this.promptMask.length===this.element.value.length?o.substring(0,e)+o.substring(e,o.length):o.substring(0,t)+o.substring(t+1,o.length)),this.element.selectionStart=this.element.selectionEnd=r||this.element.value[t]!==this.promptChar?e:t),UV.call(this)}1===i.length&&!n&&!c(s)&&UV.call(this)}function UV(){var s=this,e=this.element.parentNode,t=200;e.classList.contains(Yfe)||e.classList.contains(Qfe)?M([e],Z1):M([this.element],Z1),!0===this.isIosInvalid&&(t=400),re(this.element,{"aria-invalid":"true"}),setTimeout(function(){s.maskKeyPress||xj.call(s)},t)}function xj(){var s=this.element.parentNode;c(s)||A([s],Z1),A([this.element],Z1),re(this.element,{"aria-invalid":"false"})}function rge(s,e){var t,i,n=e,r=0;for(i=0;i<this.hiddenMask.length;i++)if("\\"===this.hiddenMask[i]&&(t=n.substring(0,i)+"\\"+n.substring(i,n.length)),(">"===this.hiddenMask[i]||"<"===this.hiddenMask[i]||"|"===this.hiddenMask[i])&&(this.hiddenMask[i]!==n[i]&&(t=n.substring(0,i)+this.hiddenMask[i]+n.substring(i,n.length)),++r),t){if(t[i]===this.promptChar&&i>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+r===i){r=0;break}n=t}for(;i>=0&&t;){if(0===i||"\\"!==t[i-1]){if(">"===t[i]){s=s.toUpperCase();break}if("<"===t[i]){s=s.toLowerCase();break}if("|"===t[i])break}--i}return s}function J1(s){if(this.mask&&void 0!==s&&(void 0===this.prevValue||this.prevValue!==s)){if(this.maskKeyPress=!0,sn.call(this,this.promptMask),""!==s&&!(null===s&&"Never"===this.floatLabelType&&this.placeholder)&&(this.element.selectionStart=0,this.element.selectionEnd=0),null!==s)for(var e=0;e<s.length;e++)Sc.call(this,s[e],!1,null);var t=oh.call(this,this.element);this.prevValue=t,this.value=t,rp.call(this,null,null),this.maskKeyPress=!1;var i=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!c(i)&&i.classList.contains(K1)&&!this.isFocus&&(A([i],K1),M([i],Xfe),sn.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&sn.call(this,this.value)}function sn(s,e){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&c(this.value)&&(s="");var t=oh.call(this,e||this.element,s);null===t||""===t?(ie.setValue(s,e||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):ie.setValue(s,e||this.element,this.floatLabelType,this.showClearButton)}var ot,sge=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ms=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Ej="e-input-focus",Dj=["title","style","class"],kj=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.initInputValue="",n.isAngular=!1,n.preventChange=!1,n.isClicked=!1,n.maskOptions=t,n}return sge(e,s),e.prototype.getModuleName=function(){return"maskedtextbox"},e.prototype.preRender=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=rj,this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;var t=R("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),A([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=k(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var i=this.createElement("input"),n=0;n<this.element.attributes.length;n++)i.setAttribute(this.element.attributes[n].nodeName,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(i),this.element=i,ke("ej2_instances",t,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&("Never"===this.floatLabelType&&M([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,!E.isDevice&&("11.0"===E.info.version||"edge"===E.info.name)&&this.element.blur(),E.isDevice&&E.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),!c(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},e.prototype.updateHTMLAttrToElement=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];Dj.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[""+n])}},e.prototype.updateCssClass=function(t,i){ie.setCssClass(this.getValidClassList(t),[this.inputObj.container],this.getValidClassList(i))},e.prototype.getValidClassList=function(t){var i=t;return!c(t)&&""!==t&&(i=t.replace(/\s+/g," ").trim()),i},e.prototype.updateHTMLAttrToWrapper=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];if(Dj.indexOf(n)>-1)if("class"===n){var r=this.htmlAttributes[""+n].replace(/\s+/g," ").trim();""!==r&&M([this.inputObj.container],r.split(" "))}else if("style"===n){var o=this.inputObj.container.getAttribute(n);o=c(o)?this.htmlAttributes[""+n]:o+this.htmlAttributes[""+n],this.inputObj.container.setAttribute(n,o)}else this.inputObj.container.setAttribute(n,this.htmlAttributes[""+n])}},e.prototype.resetMaskedTextBox=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),sj.call(this),oj.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&sn.call(this,this.value);var t=oh.call(this,this.element);this.prevValue=t,this.value=t,this.isInitial||jV.call(this),aj.call(this)},e.prototype.setMaskPlaceholder=function(t,i){(i||this.placeholder)&&(ie.setPlaceholder(this.placeholder,this.element),(this.element.value===this.promptMask&&t&&"Always"!==this.floatLabelType||this.element.value===this.promptMask&&"Never"===this.floatLabelType)&&sn.call(this,""))},e.prototype.setWidth=function(t){if(!c(t))if("number"==typeof t)this.inputObj.container.style.width=oe(t),this.element.style.width=oe(t);else if("string"==typeof t){var i=t.match(/px|%|em/)?t:oe(t);this.inputObj.container.style.width=i,this.element.style.width=i}},e.prototype.checkHtmlAttributes=function(t){for(var n=0,r=t?c(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];n<r.length;n++){var o=r[n];if(!c(this.element.getAttribute(o)))switch(o){case"placeholder":(c(this.maskOptions)||void 0===this.maskOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"disabled":if(c(this.maskOptions)||void 0===this.maskOptions.enabled||t){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!t)}break;case"value":(c(this.maskOptions)||void 0===this.maskOptions.value||t)&&this.setProperties({value:this.element.value},!t);break;case"readonly":if(c(this.maskOptions)||void 0===this.maskOptions.readonly||t){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!t)}}}},e.prototype.createWrapper=function(){var t=this.cssClass;!c(this.cssClass)&&""!==this.cssClass&&(t=this.getValidClassList(this.cssClass)),this.inputObj=ie.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:t,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))},e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"value":J1.call(this,this.value),this.placeholder&&!this.isFocus&&this.setMaskPlaceholder(!1,!1),""===this.value&&(this.element.selectionStart=0,this.element.selectionEnd=0);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(t.width),ie.calculateWidth(this.element,this.inputObj.container);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"enabled":ie.setEnabled(t.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":ie.setReadonly(t.readonly,this.element);break;case"enableRtl":ie.setEnableRtl(t.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=t.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":ie.setClearButton(t.showClearButton,this.element,this.inputObj,void 0,this.createElement),lj.call(this);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,ie.removeFloating(this.inputObj),ie.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":var a=this.value;this.mask=t.mask,this.updateValue(a);break;case"promptChar":t.promptChar.length>1&&(t.promptChar=t.promptChar[0]),this.promptChar=t.promptChar?t.promptChar:"_";var l=this.element.value.replace(new RegExp("["+i.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(l=this.promptMask.replace(new RegExp("["+i.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+i.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],sn.call(this,l)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},e.prototype.updateValue=function(t){this.resetMaskedTextBox(),J1.call(this,t)},e.prototype.getMaskedValue=function(){return dj.call(this,this.element)},e.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.isFocus=!0,this.element.focus(),M([this.inputObj.container],[Ej]))},e.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.isFocus=!1,this.element.blur(),A([this.inputObj.container],[Ej]))},e.prototype.destroy=function(){jV.call(this);for(var t=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-invalid"],i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.inputObj&&(this.inputObj.container.insertAdjacentElement("afterend",this.element),z(this.inputObj.container)),this.blurEventArgs=null,ie.destroy(),this.changeEventArgs=null,this.inputObj=null,s.prototype.destroy.call(this)},ms([v(null)],e.prototype,"cssClass",void 0),ms([v(null)],e.prototype,"width",void 0),ms([v(null)],e.prototype,"placeholder",void 0),ms([v("Never")],e.prototype,"floatLabelType",void 0),ms([v({})],e.prototype,"htmlAttributes",void 0),ms([v(!0)],e.prototype,"enabled",void 0),ms([v(!1)],e.prototype,"readonly",void 0),ms([v(!1)],e.prototype,"showClearButton",void 0),ms([v(!1)],e.prototype,"enablePersistence",void 0),ms([v(null)],e.prototype,"mask",void 0),ms([v("_")],e.prototype,"promptChar",void 0),ms([v(null)],e.prototype,"value",void 0),ms([v(null)],e.prototype,"customCharacters",void 0),ms([V()],e.prototype,"created",void 0),ms([V()],e.prototype,"destroyed",void 0),ms([V()],e.prototype,"change",void 0),ms([V()],e.prototype,"focus",void 0),ms([V()],e.prototype,"blur",void 0),ms([et],e)}(Lt),E0=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Nt=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},dge=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return E0(e,s),Nt([v("None")],e.prototype,"placement",void 0),Nt([v(10)],e.prototype,"largeStep",void 0),Nt([v(1)],e.prototype,"smallStep",void 0),Nt([v(!1)],e.prototype,"showSmallTicks",void 0),Nt([v(null)],e.prototype,"format",void 0),e}(ce),pge=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return E0(e,s),Nt([v(null)],e.prototype,"color",void 0),Nt([v(null)],e.prototype,"start",void 0),Nt([v(null)],e.prototype,"end",void 0),e}(ce),cge=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return E0(e,s),Nt([v(!1)],e.prototype,"enabled",void 0),Nt([v(null)],e.prototype,"minStart",void 0),Nt([v(null)],e.prototype,"minEnd",void 0),Nt([v(null)],e.prototype,"maxStart",void 0),Nt([v(null)],e.prototype,"maxEnd",void 0),Nt([v(!1)],e.prototype,"startHandleFixed",void 0),Nt([v(!1)],e.prototype,"endHandleFixed",void 0),e}(ce),uge=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return E0(e,s),Nt([v("")],e.prototype,"cssClass",void 0),Nt([v("Before")],e.prototype,"placement",void 0),Nt([v("Focus")],e.prototype,"showOn",void 0),Nt([v(!1)],e.prototype,"isVisible",void 0),Nt([v(null)],e.prototype,"format",void 0),e}(ce),$u=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.horDir="left",n.verDir="bottom",n.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},n.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},n.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",n.customAriaText=null,n.drag=!0,n.isDragComplete=!1,n.initialTooltip=!0,n}return E0(e,s),e.prototype.preRender=function(){this.l10n=new mi("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},e.prototype.formChecker=function(){var t=k(this.element,"form");t?(this.isForm=!0,c(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!c(this.formResetValue)&&"object"==typeof this.formResetValue?c(this.formResetValue)&&(this.formResetValue=parseFloat(oe(this.min))):this.formResetValue=[parseFloat(oe(this.min)),parseFloat(oe(this.max))],this.formElement=t):this.isForm=!1},e.prototype.initCultureFunc=function(){this.internationalization=new qt(this.locale)},e.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=c(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=c(this.ticks.format)?null:this.ticks.format},e.prototype.formatString=function(t,i){var n=null,r=null;if(t||0===t){n=this.formatNumber(t);var o=this.numberOfDecimals(t);r=this.internationalization.getNumberFormat(i)(this.makeRoundNumber(t,o))}return{elementVal:n,formatString:r}},e.prototype.formatNumber=function(t){var i=this.numberOfDecimals(t);return this.internationalization.getNumberFormat({maximumFractionDigits:i,minimumFractionDigits:i,useGrouping:!1})(t)},e.prototype.numberOfDecimals=function(t){var i=t.toString().split(".")[1];return i&&i.length?i.length:0},e.prototype.makeRoundNumber=function(t,i){return Number(t.toFixed(i||0))},e.prototype.fractionalToInteger=function(t){t=0===this.numberOfDecimals(t)?Number(t).toFixed(this.noOfDecimals):t;for(var i=1,n=0;n<this.noOfDecimals;n++)i*=10;return Number((t*i).toFixed(0))},e.prototype.render=function(){var t=this;this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"==this.getTheme(this.sliderContainer)&&setTimeout(function(){t.refresh()},0)},e.prototype.initialize=function(){M([this.element],"e-slider"),this.setCSSClass()},e.prototype.setElementWidth=function(t){c(t)||("number"==typeof t?this.sliderContainer.style.width=oe(t):"string"==typeof t&&(this.sliderContainer.style.width=t.match(/px|%|em/)?t:oe(t)))},e.prototype.setCSSClass=function(t){t&&A([this.element],t.split(" ")),this.cssClass&&M([this.element],this.cssClass.split(" "))},e.prototype.setEnabled=function(){this.enabled?(A([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove("e-disabled"),this.wireEvents()):(M([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add("e-disabled"),this.unwireEvents())},e.prototype.getTheme=function(t){return window.getComputedStyle(t,":after").getPropertyValue("content").replace(/['"]+/g,"")},e.prototype.initRender=function(){this.sliderContainer=this.createElement("div",{className:"e-slider-container e-control-wrapper"}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:"e-slider-track"}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:c(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:"e-slider-input"}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=c(this.value)?parseFloat(oe(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(oe(this.value.toString()))):[this.checkHandleValue(parseFloat(oe(this.value[0].toString()))),this.checkHandleValue(parseFloat(oe(this.value[1].toString())))],this.previousChanged=this.previousVal,c(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?A([this.sliderContainer],["e-disabled"]):M([this.sliderContainer],["e-disabled"]),this.readonly?M([this.sliderContainer],["e-read-only"]):A([this.sliderContainer],["e-read-only"])},e.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isMaterial3="Material3"===this.getTheme(this.sliderContainer)||"Material3-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isFluent="FluentUI"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=(this.isMaterial||this.isMaterial3)&&"Range"!==this.type&&this.tooltip.isVisible},e.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:"e-range"}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&this.rangeBar.classList.add("Horizontal"===this.orientation?"e-drag-horizontal":"e-drag-vertical"))},e.prototype.createLimitBar=function(){var t="Range"!==this.type?"e-limit-bar":"e-limit-first";this.limitBarFirst=this.createElement("div",{attrs:{class:t+=" e-limits"}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:"e-limit-second e-limits"}}),this.element.appendChild(this.limitBarSecond))},e.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove("e-vertical"),this.sliderContainer.classList.add("e-horizontal"),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove("e-horizontal"),this.sliderContainer.classList.add("e-vertical"),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},e.prototype.setAriaAttributes=function(t){var i=this,n=this.min,r=this.max;!c(this.customValues)&&this.customValues.length>0&&(n=this.customValues[0],r=this.customValues[this.customValues.length-1]),"Range"!==this.type?re(t,{"aria-valuemin":n.toString(),"aria-valuemax":r.toString()}):(!c(this.customValues)&&this.customValues.length>0?[[n.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),r.toString()]]:[[n.toString(),this.value[1].toString()],[this.value[0].toString(),r.toString()]]).forEach(function(a,l){var h=0===l?i.firstHandle:i.secondHandle;h&&re(h,{"aria-valuemin":a[0],"aria-valuemax":a[1]})})},e.prototype.createSecondHandle=function(){this.secondHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0","aria-label":"slider"}}),this.secondHandle.classList.add("e-handle-second"),this.element.appendChild(this.secondHandle)},e.prototype.createFirstHandle=function(){this.firstHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0","aria-label":"slider"}}),this.firstHandle.classList.add("e-handle-first"),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:"e-handle e-material-handle"}}),this.element.appendChild(this.materialHandle))},e.prototype.wireFirstHandleEvt=function(t){t?(C.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),C.remove(this.firstHandle,"transitionend",this.transitionEnd),C.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),C.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(C.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),C.add(this.firstHandle,"transitionend",this.transitionEnd,this),C.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),C.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},e.prototype.wireSecondHandleEvt=function(t){t?(C.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),C.remove(this.secondHandle,"transitionend",this.transitionEnd),C.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),C.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(C.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),C.add(this.secondHandle,"transitionend",this.transitionEnd,this),C.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),C.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},e.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"]("e-material-tooltip-start")))},e.prototype.transitionEnd=function(t){"transform"!==t.propertyName&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),"Default"!==this.type&&(this.rangeBar.style.transition="none"),(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},e.prototype.handleFocusOut=function(){this.firstHandle.classList.contains("e-handle-focused")&&this.firstHandle.classList.remove("e-handle-focused"),"Range"===this.type&&this.secondHandle.classList.contains("e-handle-focused")&&this.secondHandle.classList.remove("e-handle-focused")},e.prototype.handleFocus=function(t){this.focusSliderElement(),this.sliderBarClick(t),t.currentTarget===this.firstHandle?(this.firstHandle.classList.add("e-handle-focused"),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add("e-handle-focused"),this.secondHandle.classList.add("e-tab-handle")),C.add(document,"mousemove touchmove",this.sliderBarMove,this),C.add(document,"mouseup touchend",this.sliderBarUp,this)},e.prototype.handleOver=function(t){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(t.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())},e.prototype.handleLeave=function(t){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&!t.currentTarget.classList.contains("e-handle-focused")&&!t.currentTarget.classList.contains("e-tab-handle")&&this.closeTooltip()},e.prototype.setHandler=function(){this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},e.prototype.setEnableRTL=function(){this.enableRtl&&"Vertical"!==this.orientation?M([this.sliderContainer],"e-rtl"):A([this.sliderContainer],"e-rtl");var t="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),t!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(ge(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&ge(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()},e.prototype.tooltipValue=function(){var i,t=this,n={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),n.text=i=this.tooltipObj.content,this.trigger("tooltipChange",n,function(r){t.addTooltipClass(r.text),i!==r.text&&(t.customAriaText=r.text,t.tooltipObj.content=r.text,t.setAriaAttrValue(t.firstHandle),"Range"===t.type&&t.setAriaAttrValue(t.secondHandle))}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},e.prototype.setTooltipContent=function(){var t;t=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=t},e.prototype.formatContent=function(t,i){var n="",r=this.handleVal1,o=this.handleVal2;return!c(this.customValues)&&this.customValues.length>0&&(r=this.customValues[this.handleVal1],o=this.customValues[this.handleVal2]),i?("Range"===this.type?n=this.enableRtl&&"Vertical"!==this.orientation?c(this.tooltip)||c(this.tooltip.format)?o.toString()+" - "+r.toString():this.formatString(o,t).elementVal+" - "+this.formatString(r,t).elementVal:c(this.tooltip)||c(this.tooltip.format)?r.toString()+" - "+o.toString():this.formatString(r,t).elementVal+" - "+this.formatString(o,t).elementVal:c(r)||(n=c(this.tooltip)||c(this.tooltip.format)?r.toString():this.formatString(r,t).elementVal),n):("Range"===this.type?n=this.enableRtl&&"Vertical"!==this.orientation?c(t.format)?o.toString()+" - "+r.toString():this.formatString(o,t).formatString+" - "+this.formatString(r,t).formatString:c(t.format)?r.toString()+" - "+o.toString():this.formatString(r,t).formatString+" - "+this.formatString(o,t).formatString:c(r)||(n=c(t.format)?r.toString():this.formatString(r,t).formatString),n)},e.prototype.addTooltipClass=function(t){if(this.isMaterialTooltip){var n,i=t.toString().length;this.tooltipElement?(this.tooltipElement.classList.remove((n=i>4?{oldCss:"e-material-default",newCss:"e-material-range"}:{oldCss:"e-material-range",newCss:"e-material-default"}).oldCss),this.tooltipElement.classList.contains(n.newCss)||(this.tooltipElement.classList.add(n.newCss),this.tooltipElement.style.transform=i>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)):this.tooltipObj.cssClass="e-slider-tooltip "+(n=i>4?"e-material-range":"e-material-default")}},e.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},e.prototype.tooltipBeforeOpen=function(t){this.tooltipElement=t.element,this.tooltip.cssClass&&M([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(i){return i})),t.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add("e-material-tooltip-hide"),this.handleStart(),this.setTooltipTransform())},e.prototype.tooltipCollision=function(t){if(this.isBootstrap||this.isBootstrap4||(this.isMaterial||this.isMaterial3)&&!this.isMaterialTooltip){var i=this.isBootstrap4?3:6;switch(t){case"TopCenter":this.tooltipObj.setProperties({offsetY:-i},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:i},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-i},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:i},!1)}}},e.prototype.materialTooltipEventCallBack=function(t){this.sliderBarClick(t),C.add(document,"mousemove touchmove",this.sliderBarMove,this),C.add(document,"mouseup touchend",this.sliderBarUp,this)},e.prototype.wireMaterialTooltipEvent=function(t){this.isMaterialTooltip&&(t?C.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):C.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},e.prototype.tooltipPositionCalculation=function(t){var i;switch(t){case"TopCenter":i="e-slider-horizontal-before";break;case"BottomCenter":i="e-slider-horizontal-after";break;case"LeftCenter":i="e-slider-vertical-before";break;case"RightCenter":i="e-slider-vertical-after"}return i},e.prototype.getTooltipTransformProperties=function(t){var i;if(this.tooltipElement){var n="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;i="Horizontal"===this.orientation?"e-slider-horizontal-before"===t?{rotate:"rotate(45deg)",translate:"translateY("+n+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-n+"px)"}:"e-slider-vertical-before"===t?{rotate:"rotate(-45deg)",translate:"translateX("+n+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-n+"px)"}}return i},e.prototype.openMaterialTooltip=function(){var t=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var i=this.tooltipElement.firstElementChild;i.classList.remove("e-material-tooltip-hide"),i.classList.add("e-material-tooltip-show"),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add("e-material-tooltip-open"),this.materialHandle.style.transform="scale(0)",this.tooltipElement.style.transform=i.innerText.length>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(function(){t.tooltipElement.style.transition=t.transition.handle},2500):setTimeout(function(){t.tooltipElement.style.transition="none"},2500)}},e.prototype.closeMaterialTooltip=function(){var t=this;if(this.isMaterialTooltip){var i=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,i.classList.remove("e-material-tooltip-show"),i.classList.add("e-material-tooltip-hide"),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove("e-material-tooltip-open"),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){t.tooltipElement.style.transition="none"},2500)}},e.prototype.checkTooltipPosition=function(t){var i=this.tooltipPositionCalculation(t.collidedPosition);(void 0===this.tooltipCollidedPosition||this.tooltipCollidedPosition!==t.collidedPosition||!t.element.classList.contains(i))&&(this.isMaterialTooltip&&(void 0!==i&&(t.element.classList.remove(this.previousTooltipClass),t.element.classList.add(i),this.previousTooltipClass=i),t.element.style.transform&&t.element.classList.contains("e-material-tooltip-open")&&t.element.firstElementChild.innerText.length<=4&&(t.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=t.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},e.prototype.setTooltipTransform=function(){var t=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.style.transform=this.tooltipElement.firstElementChild.innerText.length>4?t.translate+" scale(0.01)":t.translate+" "+t.rotate+" scale(0.01)"},e.prototype.renderTooltip=function(){this.tooltipObj=new za({showTipPointer:this.isBootstrap||this.isMaterial||this.isMaterial3||this.isBootstrap4||this.isTailwind||this.isBootstrap5||this.isFluent,cssClass:"e-slider-tooltip",height:this.isMaterial||this.isMaterial3?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},e.prototype.initializeTooltipProps=function(){this.setProperties({tooltip:{showOn:"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(i){c(i)||(i.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add("e-material-slider"),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},e.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},e.prototype.setButtons=function(){this.firstBtn=this.createElement("div",{className:"e-slider-button e-first-button"}),this.firstBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:"e-slider-button e-second-button"}),this.secondBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add("e-slider-btn"),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()},e.prototype.buttonTitle=function(){var t=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("decrementTitle"),n=this.l10n.getConstant("incrementTitle");re(t?this.secondBtn:this.firstBtn,{"aria-label":i,title:i}),re(t?this.firstBtn:this.secondBtn,{"aria-label":n,title:n})},e.prototype.buttonFocusOut=function(){(this.isMaterial||this.isMaterial3)&&this.getHandle().classList.remove("e-large-thumb-size")},e.prototype.repeatButton=function(t){var r,i=this.handleValueUpdate(),n=this.enableRtl&&"Vertical"!==this.orientation;t.target.parentElement.classList.contains("e-first-button")||t.target.classList.contains("e-first-button")?r=this.add(i,parseFloat(this.step.toString()),!!n):(t.target.parentElement.classList.contains("e-second-button")||t.target.classList.contains("e-second-button"))&&(r=this.add(i,parseFloat(this.step.toString()),!n)),this.limits.enabled&&(r=this.getLimitCorrectedValues(r)),r>=this.min&&r<=this.max&&(this.changeHandleValue(r),this.tooltipToggle(this.getHandle()))},e.prototype.repeatHandlerMouse=function(t){t.preventDefault(),("mousedown"===t.type||"touchstart"===t.type)&&(this.buttonClick(t),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,t))},e.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},e.prototype.focusHandle=function(){this.getHandle().classList.contains("e-tab-handle")||this.getHandle().classList.add("e-tab-handle")},e.prototype.repeatHandlerUp=function(t){this.changeEvent("changed",t),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},e.prototype.customTickCounter=function(t){var i=4;return!c(this.customValues)&&this.customValues.length>0&&(t>4&&(i=3),t>7&&(i=2),t>14&&(i=1),t>28&&(i=0)),i},e.prototype.renderScale=function(){var t="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:"e-scale e-"+t+"-scale e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",E.isAndroid&&"h"===t&&this.ul.classList.add("e-tick-pos");var i=this.ticks.smallStep;this.ticks.showSmallTicks?i<=0&&(i=parseFloat(oe(this.step))):i=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(oe(this.max))-parseFloat(oe(this.min));var n=this.fractionalToInteger(this.min),r=this.fractionalToInteger(this.max),o=this.fractionalToInteger(i),a=!c(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,l=this.customTickCounter(a),h=!c(this.customValues)&&this.customValues.length>0?a*l+a:Math.abs((r-n)/o);this.element.appendChild(this.ul);var d,p=parseFloat(this.min.toString());"v"===t&&(p=parseFloat(this.max.toString()));var f,u=0,g=100/h;g===1/0&&(g=5);for(var m=0,y=!c(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,b=0;m<=h;m++){if(d=this.createElement("li",{attrs:{class:"e-tick",role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!c(this.customValues)&&this.customValues.length>0)(f=m%(l+1)==0)&&("h"===t?(p=this.customValues[b],b++):(p=this.customValues[y],y--),d.setAttribute("title",p.toString()));else if(d.setAttribute("title",p.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))f="h"===t?(p-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(p-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{var w=this.fractionalToInteger(this.ticks.largeStep),S=this.fractionalToInteger(p);f="h"===t?(S-n)%w==0:Math.abs(S-parseFloat(r.toString()))%w==0}f&&d.classList.add("e-large"),"h"===t?d.style.width=g+"%":d.style.height=g+"%";var I=f?"Both"===this.ticks.placement?2:1:0;if(f)for(var x=0;x<I;x++)this.createTick(d,p,g);else c(this.customValues)&&this.formatTicksValue(d,p);this.ul.appendChild(d),this.tickElementCollection.push(d);var T=void 0;c(this.customValues)&&(T=this.numberOfDecimals(i)>this.numberOfDecimals(p)?this.numberOfDecimals(i):this.numberOfDecimals(p),p=this.makeRoundNumber("h"===t||this.min>this.max?p+i:p-i,T),u=this.makeRoundNumber(u+i,T))}this.ticksAlignment(t,g)},e.prototype.ticksAlignment=function(t,i,n){void 0===n&&(n=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add("e-first-tick"),this.lastChild.classList.add("e-last-tick"),this.sliderContainer.classList.add("e-scale-"+this.ticks.placement.toLowerCase()),"h"===t?(this.firstChild.style.width=i/2+"%",this.lastChild.style.width=i/2+"%"):(this.firstChild.style.height=i/2+"%",this.lastChild.style.height=i/2+"%"),n&&this.trigger("renderedTicks",{ticksWrapper:this.ul,tickElements:this.tickElementCollection}),this.scaleAlignment()},e.prototype.createTick=function(t,i,n){var r=this.createElement("span",{className:"e-tick-value e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});t.appendChild(r),c(this.customValues)?this.formatTicksValue(t,i,r,n):r.innerHTML=this.enableHtmlSanitizer?$t.sanitize(i.toString()):i.toString()},e.prototype.formatTicksValue=function(t,i,n,r){var o=this,a=this.formatNumber(i),l=c(this.ticks)||c(this.ticks.format)?a:this.formatString(i,this.ticksFormatInfo).formatString;this.trigger("renderingTicks",{value:i,text:l,tickElement:t},function(d){t.setAttribute("title",d.text.toString()),n&&(n.innerHTML=o.enableHtmlSanitizer?$t.sanitize(d.text.toString()):d.text.toString())})},e.prototype.scaleAlignment=function(){this.tickValuePosition(),"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size"):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size")},e.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var i,n,t=this.firstChild.getBoundingClientRect(),r=this.ticks.smallStep,o=Math.abs(parseFloat(oe(this.max))-parseFloat(oe(this.min)))/r;this.firstChild.children.length>0&&(i=this.firstChild.children[0].getBoundingClientRect());var l,a=[this.sliderContainer.querySelectorAll(".e-tick.e-large .e-tick-value")];l=[].slice.call(a[0],"Both"===this.ticks.placement?2:1);for(var h="Vertical"===this.orientation?2*t.height:2*t.width,d=0;d<this.firstChild.children.length;d++)"Vertical"===this.orientation?this.firstChild.children[d].style.top=-i.height/2+"px":this.firstChild.children[d].style.left=this.enableRtl?(h-this.firstChild.children[d].getBoundingClientRect().width)/2+"px":-i.width/2+"px";for(d=0;d<l.length;d++)n=l[d].getBoundingClientRect(),ge(l[d],"Vertical"===this.orientation?{top:(h-n.height)/2+"px"}:{left:(h-n.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==o&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===o&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove("e-last-tick"))},e.prototype.setAriaAttrValue=function(t){var i,n=!c(this.ticks)&&!c(this.ticks.format),r=this.formatContent(n?this.tooltipFormatInfo:this.ticksFormatInfo,!1),o=this.formatContent(n?this.ticksFormatInfo:this.tooltipFormatInfo,!0);i=2===(r=this.customAriaText?this.customAriaText:r).split(" - ").length?r.split(" - "):[r,r],this.setAriaAttributes(t),re(t,"Range"!==this.type?{"aria-valuenow":o,"aria-valuetext":r}:this.enableRtl?t===this.firstHandle?{"aria-valuenow":o.split(" - ")[1],"aria-valuetext":i[1]}:{"aria-valuenow":o.split(" - ")[0],"aria-valuetext":i[0]}:t===this.firstHandle?{"aria-valuenow":o.split(" - ")[0],"aria-valuetext":i[0]}:{"aria-valuenow":o.split(" - ")[1],"aria-valuetext":i[1]})},e.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},e.prototype.getLimitCorrectedValues=function(t){return"MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(t,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(t,this.limits.maxStart,this.limits.maxEnd)[0]},e.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},e.prototype.buttonClick=function(t){this.focusSliderElement();var i,n=this.enableRtl&&"Vertical"!==this.orientation,r=this.handleValueUpdate();40===t.keyCode||37===t.keyCode||t.currentTarget.classList.contains("e-first-button")?i=this.add(r,parseFloat(this.step.toString()),!!n):38===t.keyCode||39===t.keyCode||t.currentTarget.classList.contains("e-second-button")?i=this.add(r,parseFloat(this.step.toString()),!n):33===t.keyCode||t.currentTarget.classList.contains("e-first-button")?i=this.add(r,parseFloat(this.ticks.largeStep.toString()),!n):34===t.keyCode||t.currentTarget.classList.contains("e-second-button")?i=this.add(r,parseFloat(this.ticks.largeStep.toString()),!!n):36===t.keyCode?i=parseFloat(this.min<this.max?this.min.toString():this.max.toString()):35===t.keyCode&&(i=parseFloat(this.min<this.max?this.max.toString():this.min.toString())),this.limits.enabled&&(i=this.getLimitCorrectedValues(i)),this.changeHandleValue(i),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),t.currentTarget.classList.contains("e-first-button")&&C.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),t.currentTarget.classList.contains("e-second-button")&&C.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},e.prototype.tooltipToggle=function(t){this.isMaterialTooltip?this.tooltipElement.classList.contains("e-material-tooltip-open")?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(t):this.openTooltip(t)},e.prototype.buttonUp=function(t){t.currentTarget.classList.contains("e-first-button")&&C.remove(this.firstBtn,"mouseup touchend",this.buttonUp),t.currentTarget.classList.contains("e-second-button")&&C.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},e.prototype.setRangeBar=function(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",ge(this.rangeBar,{width:c(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",ge(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",ge(this.rangeBar,{height:c(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",ge(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))},e.prototype.checkValidValueAndPos=function(t){return t=this.checkHandleValue(t),this.checkHandlePosition(t)},e.prototype.setLimitBarPositions=function(t,i,n,r){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=t+"px",this.limitBarFirst.style.width=i-t+"px"):(this.limitBarFirst.style.left=t+"px",this.limitBarFirst.style.width=i-t+"px"):(this.limitBarFirst.style.bottom=(this.min<this.max?t:i)+"px",this.limitBarFirst.style.height=(this.min<this.max?i-t:t-i)+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=n+"px",this.limitBarSecond.style.width=r-n+"px"):(this.limitBarSecond.style.left=n+"px",this.limitBarSecond.style.width=r-n+"px"):(this.limitBarSecond.style.bottom=(this.min<this.max?n:r)+"px",this.limitBarSecond.style.height=(this.min<this.max?r-n:n-r)+"px"))},e.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var t=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t);var i=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i),this.setLimitBarPositions(t,i)}else if("Range"===this.type){var n=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var r=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];r=this.checkValidValueAndPos(r);var o=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o);var a=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];a=this.checkValidValueAndPos(a),this.setLimitBarPositions(n,r,o,a)}},e.prototype.getLimitValueAndPosition=function(t,i,n,r){return c(i)&&(i=this.min<this.max?this.min:this.max,c(t)&&r&&(t=i)),c(n)&&(n=this.min<this.max?this.max:this.min,c(t)&&r&&(t=n)),t<i&&(t=i),t>n&&(t=n),[t,this.checkHandlePosition(t)]},e.prototype.setValue=function(){if(!c(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=c(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,this.activeHandle=c(this.activeHandle)?"Range"===this.type?2:1:this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},e.prototype.rangeValueUpdate=function(){(null===this.value||"object"!=typeof this.value)&&(this.value=[parseFloat(oe(this.min)),parseFloat(oe(this.max))])},e.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},e.prototype.modifyZindex=function(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=ed(this.element)+"")},e.prototype.setHandlePosition=function(t){var n,i=this,r=1===this.activeHandle?this.handlePos1:this.handlePos2;n=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),n.forEach(function(o){"Horizontal"===i.orientation?i.enableRtl?o.style.right=r+"px":o.style.left=r+"px":o.style.bottom=r+"px"}),this.changeEvent("change",t)},e.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},e.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},e.prototype.changeEvent=function(t,i){var n="change"===t?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),n!==this.value&&(!this.isMaterialTooltip||!this.initialTooltip)&&(this.trigger(t,this.changeEventArgs(t,i)),this.initialTooltip=!0,this.setPreviousVal(t,this.value)),this.setAriaAttrValue(this.firstHandle);else{var r=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:r},!0),(n.length===this.value.length&&this.value[0]!==n[0]||this.value[1]!==n[1])&&(this.initialTooltip=!1,this.trigger(t,this.changeEventArgs(t,i)),this.initialTooltip=!0,this.setPreviousVal(t,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},e.prototype.changeEventArgs=function(t,i){var n;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),n={value:this.value,previousValue:"change"===t?this.previousVal:this.previousChanged,action:t,text:this.tooltipObj.content,isInteracted:!c(i)}):n={value:this.value,previousValue:"change"===t?this.previousVal:this.previousChanged,action:t,text:c(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!c(i)},n},e.prototype.setPreviousVal=function(t,i){"change"===t?this.previousVal=i:this.previousChanged=i},e.prototype.updateRangeValue=function(){var t=this.value.toString().split(",").map(Number);if(this.value=this.enableRtl&&"Vertical"!==this.orientation||this.rtl?[t[1],t[0]]:[t[0],t[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.min<this.max&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.min>this.max&&this.handlePos1<this.handlePos2&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var i=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=i[0],this.handlePos1=i[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,i=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=i[0],this.handlePos2=i[1],this.preHandlePos2=this.handlePos2}},e.prototype.checkHandlePosition=function(t){var i;return t=100*(t-parseFloat(oe(this.min)))/(parseFloat(oe(this.max))-parseFloat(oe(this.min))),i="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(t/100):this.element.getBoundingClientRect().height*(t/100),parseFloat(oe(this.max))===parseFloat(oe(this.min))&&(i="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),i},e.prototype.checkHandleValue=function(t){if(this.min===this.max)return parseFloat(oe(this.max));var i=this.tempStartEnd();return t<i.start?t=i.start:t>i.end&&(t=i.end),t},e.prototype.reposition=function(){var t=this;this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",ge(this.rangeBar,{width:c(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=this.handlePos2+"px":this.secondHandle.style.left=this.handlePos2+"px",this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",ge(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",ge(this.rangeBar,{height:c(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",ge(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){t.firstHandle.style.transition=t.scaleTransform,"Range"===t.type&&(t.secondHandle.style.transition=t.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()},e.prototype.changeHandleValue=function(t){var i=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(t),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&(this.handlePos1>this.handlePos2&&this.min<this.max||this.handlePos1<this.handlePos2&&this.min>this.max)&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(i=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(t),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&(this.handlePos2<this.handlePos1&&this.min<this.max||this.handlePos2>this.handlePos1&&this.min>this.max)&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(i=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==i&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},e.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},e.prototype.xyToPosition=function(t){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var n=t.x-this.element.getBoundingClientRect().left;this.val=n/(this.element.offsetWidth/100)}else{var o=t.y-this.element.getBoundingClientRect().top;this.val=100-o/(this.element.offsetHeight/100)}var a=this.stepValueCalculation(this.val);return a<0?a=0:a>100&&(a=100),this.enableRtl&&"Vertical"!==this.orientation&&(a=100-a),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(a/100):this.element.getBoundingClientRect().height*(a/100)},e.prototype.stepValueCalculation=function(t){0===this.step&&(this.step=1);var i=parseFloat(oe(this.step))/((parseFloat(oe(this.max))-parseFloat(oe(this.min)))/100),n=t%Math.abs(i);return 0!==n&&(i/2>n?t-=n:t+=Math.abs(i)-n),t},e.prototype.add=function(t,i,n){var o=Math.pow(10,3);return n?(Math.round(t*o)+Math.round(i*o))/o:(Math.round(t*o)-Math.round(i*o))/o},e.prototype.positionToValue=function(t){var i,n=parseFloat(oe(this.max))-parseFloat(oe(this.min));return i="Horizontal"===this.orientation?t/this.element.getBoundingClientRect().width*n:t/this.element.getBoundingClientRect().height*n,this.add(i,parseFloat(this.min.toString()),!0)},e.prototype.sliderBarClick=function(t){var i;t.preventDefault(),"mousedown"===t.type||"mouseup"===t.type||"click"===t.type?i={x:t.clientX,y:t.clientY}:("touchend"===t.type||"touchstart"===t.type)&&(i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY});var n=this.xyToPosition(i),r=this.positionToValue(n);if("Range"===this.type&&(this.min<this.max&&this.handlePos2-n<n-this.handlePos1||this.min>this.max&&this.handlePos1-n>n-this.handlePos2))this.activeHandle=2,this.limits.enabled&&this.limits.endHandleFixed||(this.limits.enabled&&(r=(o=this.getLimitValueAndPosition(r,this.limits.maxStart,this.limits.maxEnd))[0],n=o[1]),this.secondHandle.classList.add("e-handle-active"),this.handlePos2=this.preHandlePos2=n,this.handleVal2=r),this.modifyZindex(),this.secondHandle.focus();else{var o;if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed)this.limits.enabled&&(r=(o=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd))[0],n=o[1]),this.firstHandle.classList.add("e-handle-active"),this.handlePos1=this.preHandlePos1=n,this.handleVal1=r;this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add("e-tooltip-active");var a=this.element.querySelector(".e-tab-handle");a&&this.getHandle()!==a&&a.classList.remove("e-tab-handle");var h,l=1===this.activeHandle?this.firstHandle:this.secondHandle;if("click"!==t.type&&"mousedown"!==t.type||t.target!==l||(h=document.elementFromPoint(t.clientX,t.clientY)),t.target===l&&h!=l)return(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.sliderBarUp(t),void this.tooltipToggle(this.getHandle());if(this.checkRepeatedValue(r)){var u=(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=u.handle,"Default"!==this.type&&(this.rangeBar.style.transition=u.rangeBar),this.setHandlePosition(t),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",t),"Default"!==this.type&&this.setRangeBar()}},e.prototype.handleValueAdjust=function(t,i,n){1===n?(this.handleVal1=i,this.handleVal2=this.handleVal1+this.minDiff):2===n&&(this.handleVal2=i,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},e.prototype.dragRangeBarMove=function(t){var i,n,r,o,a;if("touchmove"!==t.type&&t.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===t.type?(o=(i=[t.clientX,t.clientY])[0],a=i[1]):(o=(n=[t.changedTouches[0].clientX,t.changedTouches[0].clientY])[0],a=n[1]),!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(r=this.enableRtl?{x:o+this.secondPartRemain,y:a+this.secondPartRemain}:{x:o-this.firstPartRemain,y:a+this.secondPartRemain},this.min>this.max?(this.handlePos2=this.xyToPosition(r),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(r),this.handleVal1=this.positionToValue(this.handlePos1)),r=this.enableRtl?{x:o-this.firstPartRemain,y:a-this.firstPartRemain}:{x:o+this.secondPartRemain,y:a-this.firstPartRemain},this.min>this.max?(this.handlePos1=this.xyToPosition(r),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(r),this.handleVal2=this.positionToValue(this.handlePos2)),this.limits.enabled){var l=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=l[0],this.handlePos1=l[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),l=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=l[0],this.handlePos2=l[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===(this.min>this.max?this.min:this.max)&&this.handleValueAdjust(this.handleVal2,this.min>this.max?this.min:this.max,2),this.handleVal1===(this.min>this.max?this.max:this.min)&&this.handleValueAdjust(this.handleVal1,this.min>this.max?this.max:this.min,1)}this.activeHandle=1,this.setHandlePosition(t),this.activeHandle=2,this.setHandlePosition(t),this.tooltipToggle(this.rangeBar),this.setRangeBar()},e.prototype.sliderBarUp=function(t){this.changeEvent("changed",t),this.handleFocusOut(),this.firstHandle.classList.remove("e-handle-active"),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove("e-handle-active")),this.closeTooltip(),(this.isMaterial||this.isMaterial3)&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove("e-tooltip-active")),C.remove(document,"mousemove touchmove",this.sliderBarMove),C.remove(document,"mouseup touchend",this.sliderBarUp)},e.prototype.sliderBarMove=function(t){"touchmove"!==t.type&&t.preventDefault();var n=this.xyToPosition("mousemove"===t.type?{x:t.clientX,y:t.clientY}:{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}),r=this.positionToValue(n);if(n=Math.round(n),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var o=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd);n=o[1],r=o[0]}this.handlePos1=n,this.handleVal1=r}this.firstHandle.classList.add("e-handle-active")}if("Range"===this.type)if(1===this.activeHandle)this.firstHandle.classList.add("e-handle-active"),this.limits.enabled&&this.limits.startHandleFixed||((this.min<this.max&&n>this.handlePos2||this.min>this.max&&n<this.handlePos2)&&(n=this.handlePos2,r=this.handleVal2),n===this.preHandlePos1)||(this.limits.enabled&&(r=(a=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd))[0],n=a[1]),this.handlePos1=this.preHandlePos1=n,this.handleVal1=r,this.activeHandle=1);else if(2===this.activeHandle&&(this.secondHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.endHandleFixed||((this.min<this.max&&n<this.handlePos1||this.min>this.max&&n>this.handlePos1)&&(n=this.handlePos1,r=this.handleVal1),n===this.preHandlePos2)))){var a;this.limits.enabled&&(r=(a=this.getLimitValueAndPosition(r,this.limits.maxStart,this.limits.maxEnd))[0],n=a[1]),this.handlePos2=this.preHandlePos2=n,this.handleVal2=r,this.activeHandle=2}this.checkRepeatedValue(r)&&(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(t),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},e.prototype.dragRangeBarUp=function(t){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(t)),this.changeEvent("changed",t),this.closeTooltip(),C.remove(document,"mousemove touchmove",this.dragRangeBarMove),C.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},e.prototype.checkRepeatedValue=function(t){if("Range"===this.type){if(t===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(t===this.previousVal)return 0;return 1},e.prototype.refreshTooltip=function(t){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),t&&(this.tooltipObj.refresh(t),this.tooltipTarget=t))},e.prototype.openTooltip=function(t){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(t),this.tooltipTarget=t)},e.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},e.prototype.keyDown=function(t){switch(t.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:t.preventDefault(),this.buttonClick(t)}},e.prototype.wireButtonEvt=function(t){t?(C.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),C.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),C.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),C.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),C.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),C.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),C.remove(this.firstBtn,"focusout",this.sliderFocusOut),C.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(C.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),C.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),C.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),C.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),C.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),C.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),C.add(this.firstBtn,"focusout",this.sliderFocusOut,this),C.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},e.prototype.rangeBarMousedown=function(t){var i,n;if(t.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&t.target===this.rangeBar){var r=void 0,o=void 0;"mousedown"===t.type?(r=(i=[t.clientX,t.clientY])[0],o=i[1]):"touchstart"===t.type&&(r=(n=[t.changedTouches[0].clientX,t.changedTouches[0].clientY])[0],o=n[1]),"Horizontal"===this.orientation?(this.firstPartRemain=r-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-r):(this.firstPartRemain=o-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-o),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var a=this.element.querySelector(".e-tab-handle");a&&a.classList.remove("e-tab-handle"),C.add(document,"mousemove touchmove",this.dragRangeBarMove,this),C.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},e.prototype.elementClick=function(t){this.isDragComplete?this.isDragComplete=!1:(t.preventDefault(),this.focusSliderElement(),this.sliderBarClick(t),this.focusHandle())},e.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(C.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&C.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),C.add(this.sliderContainer,"keydown",this.keyDown,this),C.add(this.sliderContainer,"keyup",this.keyUp,this),C.add(this.element,"focusout",this.sliderFocusOut,this),C.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&C.add(this.formElement,"reset",this.formResetHandler,this))},e.prototype.unwireEvents=function(){C.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&C.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),C.remove(this.sliderContainer,"keydown",this.keyDown),C.remove(this.sliderContainer,"keyup",this.keyUp),C.remove(this.element,"focusout",this.sliderFocusOut),C.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),C.remove(this.element,"reset",this.formResetHandler)},e.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},e.prototype.keyUp=function(t){if(9===t.keyCode&&t.target.classList.contains("e-handle")&&(this.focusSliderElement(),!t.target.classList.contains("e-tab-handle"))){this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),t.target.classList.add("e-tab-handle");var i=t.target.parentElement;i===this.element&&(i.querySelector(".e-slider-track").classList.add("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&i.querySelector(".e-range").classList.add("e-tab-range")),"Range"===this.type&&(this.activeHandle=t.target.previousSibling.classList.contains("e-handle")?2:1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",t)},e.prototype.hover=function(t){if(!c(t))if("mouseover"===t.type||"touchmove"===t.type||"mousemove"===t.type||"pointermove"===t.type||"touchstart"===t.type)this.sliderContainer.classList.add("e-slider-hover");else{this.sliderContainer.classList.remove("e-slider-hover");var i=t.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!i.classList.contains("e-handle-focused")&&!i.classList.contains("e-tab-handle")&&this.closeMaterialTooltip()}},e.prototype.sliderFocusOut=function(t){t.relatedTarget!==this.secondHandle&&t.relatedTarget!==this.firstHandle&&t.relatedTarget!==this.element&&t.relatedTarget!==this.firstBtn&&t.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),this.element.querySelector(".e-tab-track")&&(this.element.querySelector(".e-tab-track").classList.remove("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&this.element.querySelector(".e-tab-range")&&this.element.querySelector(".e-tab-range").classList.remove("e-tab-range")),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},e.prototype.removeElement=function(t){t.parentNode&&t.parentNode.removeChild(t)},e.prototype.changeSliderType=function(t,i){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove("e-material-slider"),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==t&&("Range"===t&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!c(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===t||"Default"===t?c(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):c(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==i&&this.updateConfig()},e.prototype.changeRtl=function(){if(!this.enableRtl&&"Range"===this.type&&(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var t=this.enableRtl&&"Vertical"!==this.orientation;re(t?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),re(t?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},e.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},e.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},e.prototype.limitsPropertyChange=function(){this.limits.enabled?(c(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),c(this.limitBarFirst)&&c(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(c(this.limitBarFirst)||z(this.limitBarFirst),c(this.limitBarSecond)||z(this.limitBarSecond))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.destroy=function(){s.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),A([this.sliderContainer],["e-disabled"]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),z(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML=""},e.prototype.onPropertyChanged=function(t,i){for(var n=this,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];switch(a){case"cssClass":this.setCSSClass(i.cssClass);break;case"value":if(t&&i){var l=c(t.value)?"Range"===this.type?[this.min,this.max]:this.min:t.value;this.setProperties({value:l},!0),!c(i.value)&&i.value.toString()!==l.toString()&&(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(this.activeHandle=c(t.value)||i.value[1]===l[1]?1:2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":!c(t.tooltip)&&!c(i.tooltip)&&(this.setTooltip(a),this.showButtons||this.wireEvents());break;case"type":!c(i)&&Object.keys(i).length&&!c(i.type)&&(this.changeSliderType(i.type,a),this.setZindex());break;case"enableRtl":i.enableRtl!==t.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=i.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":c(this.sliderContainer.querySelector(".e-scale"))||(z(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(h){h.match(/e-scale-/)&&n.sliderContainer.classList.remove(h)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":t.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove("e-slider-btn"),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(t.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},e.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add("e-read-only")):(this.wireEvents(),this.sliderContainer.classList.remove("e-read-only"))},e.prototype.setMinMaxValue=function(){var t=this;this.setValue(),this.refreshTooltip(this.tooltipTarget),c(this.sliderContainer.querySelector(".e-scale"))||this.ul&&(z(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(i){i.match(/e-scale-/)&&t.sliderContainer.classList.remove(i)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},e.prototype.setZindex=function(){this.zIndex=6,!c(this.ticks)&&"None"!==this.ticks.placement&&(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),!this.isMaterial&&!this.isMaterial3&&!c(this.ticks)&&"Both"===this.ticks.placement&&(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},e.prototype.setTooltip=function(t){this.changeSliderType(this.type,t)},e.prototype.setBarColor=function(){for(var t,i,n=this.sliderTrack.lastElementChild;n;)this.sliderTrack.removeChild(n),n=this.sliderTrack.lastElementChild;for(var r=0;r<this.colorRange.length;r++)if(!c(this.colorRange[r].start)&&!c(this.colorRange[r].end)&&this.colorRange[r].end>this.colorRange[r].start){this.colorRange[r].start<this.min&&(this.colorRange[r].start=this.min),this.colorRange[r].end>this.max&&(this.colorRange[r].end=this.max);var o=this.checkHandlePosition(this.colorRange[r].start),a=this.checkHandlePosition(this.colorRange[r].end),l=this.createElement("div");l.style.backgroundColor=this.colorRange[r].color,l.style.border="1px solid "+this.colorRange[r].color,"Horizontal"===this.orientation?(i="e-slider-horizantal-color",t=this.enableRtl?c(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[r].end):this.checkHandlePosition(this.customValues.length-this.colorRange[r].end-1):this.checkHandlePosition(this.colorRange[r].start),l.style.width=a-o+"px",l.style.left=t+"px"):(i="e-slider-vertical-color",t=this.checkHandlePosition(this.colorRange[r].start),l.style.height=a-o+"px",l.style.bottom=t+"px"),l.classList.add(i),this.sliderTrack.appendChild(l)}},e.prototype.getModuleName=function(){return"slider"},Nt([v(null)],e.prototype,"value",void 0),Nt([v(null)],e.prototype,"customValues",void 0),Nt([v(1)],e.prototype,"step",void 0),Nt([v(null)],e.prototype,"width",void 0),Nt([v(0)],e.prototype,"min",void 0),Nt([v(100)],e.prototype,"max",void 0),Nt([v(!1)],e.prototype,"readonly",void 0),Nt([v("Default")],e.prototype,"type",void 0),Nt([Sn([{}],pge)],e.prototype,"colorRange",void 0),Nt([Fe({},dge)],e.prototype,"ticks",void 0),Nt([Fe({},cge)],e.prototype,"limits",void 0),Nt([v(!0)],e.prototype,"enabled",void 0),Nt([Fe({},uge)],e.prototype,"tooltip",void 0),Nt([v(!1)],e.prototype,"showButtons",void 0),Nt([v(!0)],e.prototype,"enableAnimation",void 0),Nt([v("Horizontal")],e.prototype,"orientation",void 0),Nt([v("")],e.prototype,"cssClass",void 0),Nt([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),Nt([V()],e.prototype,"created",void 0),Nt([V()],e.prototype,"change",void 0),Nt([V()],e.prototype,"changed",void 0),Nt([V()],e.prototype,"renderingTicks",void 0),Nt([V()],e.prototype,"renderedTicks",void 0),Nt([V()],e.prototype,"tooltipChange",void 0),Nt([et],e)}(Lt),mge=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),zs=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ym={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")},D0=(()=>(function(s){s[s.Message=0]="Message",s[s.Label=1]="Label"}(D0||(D0={})),D0))(),Aj=function(s){function e(i,n){var r=s.call(this,n,i)||this;if(r.validated=[],r.errorRules=[],r.allowSubmit=!1,r.required="required",r.infoElement=null,r.inputElement=null,r.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",r.localyMessage={},r.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},typeof r.rules>"u"&&(r.rules={}),r.l10n=new mi("formValidator",r.defaultMessages,r.locale),r.locale&&r.localeFunc(),qu.on("notifyExternalChange",r.afterLocalization,r),i="string"==typeof i?H(i,document):i,null!=r.element)return r.element.setAttribute("novalidate",""),r.inputElements=me(r.selectQuery,r.element),r.createHTML5Rules(),r.wireEvents(),r}var t;return mge(e,s),t=e,e.prototype.addRules=function(i,n){i&&(this.rules.hasOwnProperty(i)?Q(this.rules[""+i],n,{}):this.rules[""+i]=n)},e.prototype.removeRules=function(i,n){if(i||n)if(this.rules[""+i]&&!n)delete this.rules[""+i];else{if(c(this.rules[""+i]&&n))return;for(var r=0;r<n.length;r++)delete this.rules[""+i][n[parseInt(r.toString())]]}else this.rules={}},e.prototype.validate=function(i){var n=Object.keys(this.rules);if(i&&n.length)return this.validateRules(i),-1!==n.indexOf(i)&&0===this.errorRules.filter(function(l){return l.name===i}).length;this.errorRules=[];for(var r=0,o=n;r<o.length;r++)this.validateRules(o[r]);return 0===this.errorRules.length},e.prototype.reset=function(){this.element.reset(),this.clearForm()},e.prototype.getInputElement=function(i){return this.inputElement=H('[name="'+i+'"]',this.element),this.inputElement},e.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var n=0,r=me("."+this.errorClass+", ."+this.validClass,this.element);n<r.length;n++)z(r[n]);s.prototype.destroy.call(this),qu.off("notifyExternalChange",this.afterLocalization)},e.prototype.onPropertyChanged=function(i,n){for(var r=0,o=Object.keys(i);r<o.length;r++)"locale"===o[r]&&this.localeFunc()},e.prototype.localeFunc=function(){for(var i=0,n=Object.keys(this.defaultMessages);i<n.length;i++){var r=n[i];this.l10n.setLocale(this.locale);var o=this.l10n.getConstant(r);this.localyMessage[""+r]=o}},e.prototype.getModuleName=function(){return"formValidator"},e.prototype.afterLocalization=function(i){this.locale=i.locale,this.localeFunc()},e.prototype.refresh=function(){this.unwireEvents(),this.inputElements=me(this.selectQuery,this.element),this.wireEvents()},e.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var n=0,r=me(this.selectQuery,this.element);n<r.length;n++){var a=r[n];a.removeAttribute("aria-invalid"),a.classList.remove(this.errorClass),a.name.length>0&&(this.getInputElement(a.name),this.getErrorElement(a.name),this.hideMessage(a.name)),a.classList.remove(this.validClass)}},e.prototype.createHTML5Rules=function(){for(var i=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],n=["hidden","email","url","date","number","tel"],r=0,o=this.inputElements;r<o.length;r++){for(var a=o[r],l={},h=0,d=i;h<d.length;h++){var p=d[h];if(null!==a.getAttribute(p))switch(p){case"required":this.defRule(a,l,p,a.required);break;case"data-validation":p=a.getAttribute(p),this.defRule(a,l,p,!0);break;case"type":-1!==n.indexOf(a.type)&&this.defRule(a,l,a.type,!0);break;case"rangeLength":case"range":this.defRule(a,l,p,JSON.parse(a.getAttribute(p)));break;case"equalTo":var u=a.getAttribute(p);this.defRule(a,l,p,u);break;default:"true"===a.getAttribute("data-val")?this.annotationRule(a,l,p,a.getAttribute(p)):this.defRule(a,l,p,a.getAttribute(p))}}0!==Object.keys(l).length&&this.addRules(a.name,l)}},e.prototype.annotationRule=function(i,n,r,o){var a=r.split("-"),l=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],h=a[a.length-1],d=a[a.length-2];if(-1!==l.indexOf(h))switch(h){case"required":this.defRule(i,n,"required",o);break;case"creditcard":this.defRule(i,n,"creditcard",o);break;case"phone":this.defRule(i,n,"tel",o)}else if(-1!==l.indexOf(d))switch(d){case"maxlength":this.defRule(i,n,"maxLength",o);break;case"minlength":this.defRule(i,n,"minLength",o);break;case"range":var p=i.getAttribute("data-val-range-min"),u=i.getAttribute("data-val-range-max");this.defRule(i,n,"range",[p,u]);break;case"equalto":var f=i.getAttribute(r).split(".");this.defRule(i,n,"equalTo",f[f.length-1]);break;case"regex":this.defRule(i,n,"regex",o)}},e.prototype.defRule=function(i,n,r,o){var h,a=i.getAttribute("data-"+r+"-message"),l=i.getAttribute("data-val-"+r);this.rules[i.name]&&"validateHidden"!==r&&"hidden"!==r&&(this.getInputElement(i.name),h=this.getErrorMessage(this.rules[i.name][""+r],r)),a?o=[o,a]:l?o=[o,l]:h&&(o=[o,h]),n[""+r]=o},e.prototype.wireEvents=function(){for(var i=0,n=this.inputElements;i<n.length;i++){var r=n[i];t.isCheckable(r)?C.add(r,"click",this.clickHandler,this):"SELECT"===r.tagName?C.add(r,"change",this.changeHandler,this):(C.add(r,"focusout",this.focusOutHandler,this),C.add(r,"keyup",this.keyUpHandler,this))}C.add(this.element,"submit",this.submitHandler,this),C.add(this.element,"reset",this.resetHandler,this)},e.prototype.unwireEvents=function(){for(var i=0,n=this.inputElements;i<n.length;i++)C.clearEvents(n[i]);C.remove(this.element,"submit",this.submitHandler),C.remove(this.element,"reset",this.resetHandler)},e.prototype.focusOutHandler=function(i){this.trigger("focusout",i);var n=i.target;this.rules[n.name]&&(this.rules[n.name][this.required]||n.value.length>0?this.validate(n.name):-1===this.validated.indexOf(n.name)&&this.validated.push(n.name))},e.prototype.keyUpHandler=function(i){this.trigger("keyup",i);var n=i.target;9===i.which&&(!this.rules[n.name]||this.rules[n.name]&&!this.rules[n.name][this.required])||-1!==this.validated.indexOf(n.name)&&this.rules[n.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(i.which)&&this.validate(n.name)},e.prototype.clickHandler=function(i){this.trigger("click",i);var n=i.target;"submit"!==n.type?this.validate(n.name):null!==n.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},e.prototype.changeHandler=function(i){this.trigger("change",i),this.validate(i.target.name)},e.prototype.submitHandler=function(i){this.trigger("submit",i),this.allowSubmit||this.validate()?this.allowSubmit=!1:i.preventDefault()},e.prototype.resetHandler=function(){this.clearForm()},e.prototype.validateRules=function(i){if(this.rules[""+i]){var n=Object.keys(this.rules[""+i]),r=!1,o=!1,a=n.indexOf("validateHidden"),l=n.indexOf("hidden");if(this.getInputElement(i),-1!==l&&(r=!0),-1!==a&&(o=!0),!(!r||r&&o))return;-1!==a&&n.splice(a,1),-1!==l&&n.splice(l-1,1),this.getErrorElement(i);for(var h=0,d=n;h<d.length;h++){var p=d[h],u=this.getErrorMessage(this.rules[""+i][""+p],p),f={name:i,message:u},g={inputName:i,element:this.inputElement,message:u};if(!this.isValid(i,p)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(i),this.errorRules.push(f),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(f):this.createErrorElement(i,f.message,this.inputElement),g.errorElement=this.infoElement,g.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(i,g),this.trigger("validationComplete",g),"required"===p&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(i),g.status="success",this.trigger("validationComplete",g)}}},e.prototype.optionalValidationStatus=function(i,n){!this.rules[""+i][this.required]&&!this.inputElement.value.length&&!c(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),n.status="",this.hideMessage(i))},e.prototype.isValid=function(i,n){var r=this.rules[""+i][""+n],a=this.rules[""+i][""+n],l={value:this.inputElement.value,param:r instanceof Array&&"string"==typeof r[1]?r[0]:r,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",l),!l.param&&"required"===n||(a&&"function"==typeof a[0]?a[0].call(this,{element:this.inputElement,value:this.inputElement.value}):t.isCheckable(this.inputElement)?"required"!==n||me('input[name="'+i+'"]:checked',this.element).length>0:t.checkValidator[""+n](l))},e.prototype.getErrorMessage=function(i,n){var r=this.inputElement.getAttribute("data-"+n+"-message")?this.inputElement.getAttribute("data-"+n+"-message"):i instanceof Array&&"string"==typeof i[1]?i[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[""+n]:this.defaultMessages[""+n],o=r.match(/{(\d)}/g);if(!c(o))for(var a=0;a<o.length;a++){var l=i instanceof Array?i[parseInt(a.toString())]:i;r=r.replace(o[parseInt(a.toString())],l)}return r},e.prototype.createErrorElement=function(i,n,r){var o=F(this.errorElement,{className:this.errorClass,innerHTML:n,attrs:{for:i}});if(this.errorOption===D0.Message&&(o.classList.remove(this.errorClass),o.classList.add("e-message"),o=F(this.errorContainer,{className:this.errorClass,innerHTML:o.outerHTML})),o.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+r.id+'"]'))this.element.querySelector('[data-valmsg-for="'+r.id+'"]').appendChild(o);else if(!0===r.hasAttribute("data-msg-containerid"))H("#"+r.getAttribute("data-msg-containerid"),this.element).appendChild(o);else if(null!=this.customPlacement)this.customPlacement.call(this,this.inputElement,o);else{var h=this.inputElement.parentElement,d=h.parentElement;h.classList.contains("e-control-wrapper")||h.classList.contains("e-wrapper")?d.insertBefore(o,h.nextSibling):d.classList.contains("e-control-wrapper")||d.classList.contains("e-wrapper")?d.parentElement.insertBefore(o,d.nextSibling):h.insertBefore(o,this.inputElement.nextSibling)}o.style.display="block",this.getErrorElement(i),this.validated.push(i),this.checkRequired(i)},e.prototype.getErrorElement=function(i){return this.infoElement=H(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=H(this.errorElement+"."+this.errorClass+'[for="'+i+'"]',this.element)),this.infoElement},e.prototype.removeErrorRules=function(i){for(var n=0;n<this.errorRules.length;n++)this.errorRules[parseInt(n.toString())].name===i&&this.errorRules.splice(n,1)},e.prototype.showMessage=function(i){this.infoElement.style.display="block",this.infoElement.innerHTML=i.message,this.checkRequired(i.name)},e.prototype.hideMessage=function(i){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(i),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))},e.prototype.checkRequired=function(i){!this.rules[""+i][this.required]&&!this.inputElement.value.length&&!c(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(i))},e.isCheckable=function(i){var n=i.getAttribute("type");return n&&("checkbox"===n||"radio"===n||"submit"===n)},e.checkValidator={required:function(i){return isNaN(Date.parse(i.value))?i.value.toString().length>0:!isNaN(new Date(i.value).getTime())},email:function(i){return ym.EMAIL.test(i.value)},url:function(i){return ym.URL.test(i.value)},dateIso:function(i){return ym.DATE_ISO.test(i.value)},tel:function(i){return ym.PHONE.test(i.value)},creditcard:function(i){return ym.CREDITCARD.test(i.value)},number:function(i){return!isNaN(Number(i.value))&&-1===i.value.indexOf(" ")},digits:function(i){return ym.DIGITS.test(i.value)},maxLength:function(i){return i.value.length<=i.param},minLength:function(i){return i.value.length>=i.param},rangeLength:function(i){var n=i.param;return i.value.length>=n[0]&&i.value.length<=n[1]},range:function(i){var n=i.param;return!isNaN(Number(i.value))&&Number(i.value)>=n[0]&&Number(i.value)<=n[1]},date:function(i){if(c(i.param)||"string"!=typeof i.param||""===i.param)return!isNaN(new Date(i.value).getTime());var n=new qt,r={format:i.param.toString(),type:"dateTime",skeleton:"yMd"},o=n.parseDate(i.value,r);return!c(o)&&o instanceof Date&&!isNaN(+o)},max:function(i){return isNaN(Number(i.value))?new Date(i.value).getTime()<=new Date(JSON.parse(JSON.stringify(i.param))).getTime():+i.value<=i.param},min:function(i){if(isNaN(Number(i.value))){if(-1!==i.value.indexOf(",")){var n=i.value.replace(/,/g,"");return parseFloat(n)>=i.param}return new Date(i.value).getTime()>=new Date(JSON.parse(JSON.stringify(i.param))).getTime()}return+i.value>=i.param},regex:function(i){return new RegExp(i.param).test(i.value)},equalTo:function(i){var n=i.formElement.querySelector("#"+i.param);return i.param=n.value,i.param===i.value}},zs([v("")],e.prototype,"locale",void 0),zs([v("e-hidden")],e.prototype,"ignore",void 0),zs([v()],e.prototype,"rules",void 0),zs([v("e-error")],e.prototype,"errorClass",void 0),zs([v("e-valid")],e.prototype,"validClass",void 0),zs([v("label")],e.prototype,"errorElement",void 0),zs([v("div")],e.prototype,"errorContainer",void 0),zs([v(D0.Label)],e.prototype,"errorOption",void 0),zs([V()],e.prototype,"focusout",void 0),zs([V()],e.prototype,"keyup",void 0),zs([V()],e.prototype,"click",void 0),zs([V()],e.prototype,"change",void 0),zs([V()],e.prototype,"submit",void 0),zs([V()],e.prototype,"validationBegin",void 0),zs([V()],e.prototype,"validationComplete",void 0),zs([V()],e.prototype,"customPlacement",void 0),t=zs([et],e)}(Qh),Dge=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ur=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},L0="e-apply",JV="e-cancel",$V="e-current",V0="e-ctrl-btn",wm="e-switch-ctrl-btn",jj="e-disabled",qj="e-value-switch-btn",Wj="e-handler",eP="e-hide-hex-value",tP="e-hide-opacity",Sm="e-hide-switchable-value",nf="e-hide-value",Gj="e-hide-valueswitcher",P0="e-hsv-color",Yj="e-hsv-container",Cm="e-selected-value",iI="e-mode-switch-btn",iP="e-nocolor-item",nP="e-opacity-value",N0="e-palette",nI="e-color-palette",rP="e-color-picker",rI="e-preview-container",sI="e-previous",Im="e-show-value",F0="e-selected",oI="e-split-preview",aI="e-tile",Lge_default=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],xm=function(s){function e(t,i){return s.call(this,t,i)||this}return Dge(e,s),e.prototype.preRender=function(){var t=this.element;this.formElement=k(this.element,"form"),this.formElement&&C.add(this.formElement,"reset",this.formResetHandler,this),this.l10n=new mi("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),t.getAttribute("ejs-for")&&!t.getAttribute("name")&&t.setAttribute("name",t.id)},e.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||M([this.container.parentElement],tP),this.renderComplete()},e.prototype.initWrapper=function(){var t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(t,this.element),t.appendChild(this.element),re(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var i=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(i="");var n=i.slice(0,7);c(this.initialInputValue)&&(this.initialInputValue=n),this.element.value=n,this.setProperties(this.enableOpacity?{value:i}:{value:n},!0),this.enableRtl&&t.classList.add("e-rtl"),this.cssClass&&M([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.tileRipple=zi(this.container,{selector:"."+aI}),this.ctrlBtnRipple=zi(this.container,{selector:".e-btn"})},e.prototype.getWrapper=function(){return this.element.parentElement},e.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),E.isDevice&&this.refreshPopupPos()},e.prototype.createSplitBtn=function(){var t=this,i=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(i),this.splitBtn=new Rfe({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){t.trigger("change",{currentValue:{hex:t.value.slice(0,7),rgba:t.convertToRgbString(t.hexToRgb(t.value))},previousValue:{hex:null,rgba:null},value:t.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(i);var n=this.createElement("span",{className:oI});H(".e-selected-color",i).appendChild(n),n.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var r=this.getPopupEle();if(M([r],"e-colorpicker-popup"),this.cssClass&&M([r],this.cssClass.replace(/\s+/g," ").trim().split(" ")),E.isDevice){var o=this.getPopupInst();o.relateTo=document.body,o.position={X:"center",Y:"center"},o.targetType="container",o.collision={X:"fit",Y:"fit"},o.offsetY=4,r.style.zIndex=ed(this.splitBtn.element).toString()}this.bindCallBackEvent()},e.prototype.onOpen=function(){this.trigger("open",{element:this.container})},e.prototype.getPopupInst=function(){return Hn(this.getPopupEle(),dr)},e.prototype.bindCallBackEvent=function(){var t=this;this.splitBtn.beforeOpen=function(i){var n=new X1;return t.trigger("beforeOpen",i,function(r){if(!r.cancel){var o=t.getPopupEle();o.style.top=oe(0+pageYOffset),o.style.left=oe(0+pageXOffset),o.style.display="block",t.createWidget(),o.style.display="",E.isDevice&&(t.modal=t.createElement("div"),t.modal.className="e-"+t.getModuleName()+" e-modal",t.modal.style.display="none",document.body.insertBefore(t.modal,o),document.body.className+=" e-colorpicker-overflow",t.modal.style.display="block",t.modal.style.zIndex=(Number(o.style.zIndex)-1).toString())}i.cancel=r.cancel,n.resolve(r)}),n},this.splitBtn.beforeClose=function(i){var n=new X1;return c(i.event)?n.resolve(i):t.trigger("beforeClose",{element:t.container,event:i.event,cancel:!1},function(o){E.isDevice&&i.event.target===t.modal&&(o.cancel=!0),o.cancel||t.onPopupClose(),i.cancel=o.cancel,n.resolve(o)}),n}},e.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",H("."+oI,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",A([this.container],[rP,nI]),E.isDevice&&this.modal&&(A([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},e.prototype.createPalette=function(){if(ze(this.container,[nI],[rP]),this.presetColors){var t=this.createElement("div",{className:"e-custom-palette"});this.appendElement(t);var i=Object.keys(this.presetColors);if(1===i.length)this.appendPalette(this.presetColors[i[0]],i[0],t);else for(var n=0,r=i.length;n<r;n++)this.appendPalette(this.presetColors[i[n]],i[n],t);me(".e-row",t).length>10&&M([t],"e-palette-group")}else this.appendPalette(Lge_default,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var o=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=oe(this.container.children[0].offsetWidth+o+o),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},e.prototype.firstPaletteFocus=function(){H("."+F0,this.container.children[0])||me("."+N0,this.container)[0].focus()},e.prototype.appendPalette=function(t,i,n){var r=this.createElement("div",{className:N0,attrs:{tabindex:"0",role:"grid"}});n?n.appendChild(r):this.appendElement(r);for(var o,a,l,h=0,d=t.length;h<d;h++)(0===h||h%this.columns==0)&&(o=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),r.appendChild(o)),l=this.roundValue(t[h]).toLowerCase(),a=this.createElement("span",{className:aI,attrs:{role:"gridcell","aria-label":l,"aria-selected":"false",tabindex:"0"}}),this.trigger("beforeTileRender",{element:a,presetName:i,value:t[h]}),o.appendChild(a),this.value===l&&(this.addTileSelection(a),r.focus()),a.style.backgroundColor=this.convertToRgbString(this.hexToRgb(l))},e.prototype.setNoColor=function(){var t=this.container.querySelector(".e-row").children[0];t.classList.add(iP),this.value||(t.classList.add(F0),k(t,"."+N0).focus()),["aria-selected","aria-label"].forEach(function(i){t.removeAttribute(i)}),t.style.backgroundColor=""},e.prototype.appendElement=function(t,i){void 0===i&&(i=0);var n=this.container.children[i];n?this.container.insertBefore(t,n):this.container.appendChild(t)},e.prototype.addTileSelection=function(t){t.classList.add(F0),t.setAttribute("aria-selected","true")},e.prototype.createPicker=function(){ze(this.container,[rP],[nI]);var t=this.createElement("div",{className:Yj});this.appendElement(t),t.appendChild(this.createElement("div",{className:P0}));var i=this.createElement("span",{className:Wj,attrs:{tabindex:"0"}});t.appendChild(i),(null===this.value||""===this.value)&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},e.prototype.setHsvContainerBg=function(t){void 0===t&&(t=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(t,100,100,1))},e.prototype.getHsvContainer=function(){return H("."+Yj,this.container)},e.prototype.setHandlerPosition=function(){var t=this.getDragHandler(),i=H("."+P0,this.container);t.style.left=oe(this.enableRtl?i.offsetWidth*Math.abs(100-this.hsv[1])/100:i.offsetWidth*this.hsv[1]/100),t.style.top=oe(i.offsetHeight*(100-this.hsv[2])/100)},e.prototype.createSlider=function(){var t=this.createElement("div",{className:"e-slider-preview"});this.appendElement(t,1),this.createPreview(t);var i=this.createElement("div",{className:"e-colorpicker-slider"});t.insertBefore(i,t.children[0]);var n=this.createElement("div",{className:"e-hue-slider"});i.appendChild(n),this.hueSlider=new $u({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(n),this.enableOpacity&&(n=this.createElement("div",{className:"e-opacity-slider"}),i.appendChild(n),this.createOpacitySlider(n))},e.prototype.createOpacitySlider=function(t){this.opacitySlider=new $u({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(t);var i=this.createElement("div",{className:"e-opacity-empty-track"});t.appendChild(i),this.updateOpacitySliderBg()},e.prototype.updateOpacitySliderBg=function(){var t=this.enableRtl?"to left":"to right",i=H(".e-opacity-empty-track",this.opacitySlider.element);i&&(i.style.background="linear-gradient("+t+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},e.prototype.hueChange=function(t){this.hsv[0]=t.value,this.setHsvContainerBg(),this.convertToOtherFormat()},e.prototype.opacityChange=function(t){var i=t.value,n=this.rgbToHex(this.rgb);this.hsv[3]=i/100,this.rgb[3]=i/100;var r=this.rgbToHex(this.rgb);this.updateOpacityInput(i);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(r,n,o)},e.prototype.updateOpacityInput=function(t){if(this.enableOpacity&&!this.getWrapper().classList.contains(nf)){var i=Hn(H("."+nP,this.container),zr);i.value=t,i.dataBind()}},e.prototype.createPreview=function(t){var i=this.createElement("div",{className:rI});t.appendChild(i);var n=this.createElement("span",{className:"e-preview "+$V});i.appendChild(n);var r=this.convertToRgbString(this.rgb);n.style.backgroundColor=r,n=this.createElement("span",{className:"e-preview "+sI}),i.appendChild(n),n.style.backgroundColor=r},e.prototype.isPicker=function(){return!this.container.classList.contains(nI)},e.prototype.getPopupEle=function(){return this.container.parentElement},e.prototype.createNumericInput=function(t,i,n,r){var o=this,a=new zr({value:i,placeholder:n,min:0,max:r,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(l){l.event&&o.inputHandler(l.event)}});a.createElement=this.createElement,a.appendTo(t)},e.prototype.createInput=function(){var t=this.isPicker(),i=this.getWrapper();if(t&&!i.classList.contains(nf)||!t&&i.classList.contains(Im)){var n=this.createElement("div",{className:Cm});this.appendElement(n,t?2:1);var r=this.createElement("div",{className:"e-input-container"});if(n.appendChild(r),i.classList.contains(Gj)||this.appendValueSwitchBtn(n),!i.classList.contains(eP)){var o=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});r.appendChild(o),ie.createInput({element:o,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),ie.setValue(this.value.slice(0,7),o),o.addEventListener("input",this.inputHandler.bind(this))}if(!i.classList.contains(Sm)){var a=void 0,l=void 0;this.isRgb?(a="RGB",l=this.rgb):(a="HSV",l=this.hsv);for(var h=["rh","gs","bv"],d=0;d<3;d++)this.createNumericInput(r.appendChild(this.createElement("input",{className:"e-"+h[d]+"-value"})),l[d],a[d],255);this.enableOpacity&&this.appendOpacityValue(r)}}},e.prototype.appendOpacityValue=function(t){this.createNumericInput(t.appendChild(this.createElement("input",{className:nP})),100*this.rgb[3],"A",100)},e.prototype.appendValueSwitchBtn=function(t){var i=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+qj,attrs:{title:"Toggle format"}});t.appendChild(i),this.isPicker()&&!this.getWrapper().classList.contains(Sm)&&i.addEventListener("click",this.formatSwitchHandler.bind(this))},e.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var t=this.createElement("div",{className:wm});if(this.container.appendChild(t),this.showButtons){var i=this.createElement("div",{className:V0});t.appendChild(i);var n=this.l10n.getConstant("Apply");i.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-primary e-small "+L0,attrs:{title:n}}));var r=this.l10n.getConstant("Cancel");i.appendChild(this.createElement("button",{innerHTML:r,className:"e-btn e-css e-flat e-small "+JV,attrs:{title:r}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},e.prototype.appendModeSwitchBtn=function(){var t=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+iI,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});H("."+wm,this.container).insertBefore(t,H("."+V0,this.container))},e.prototype.createDragTooltip=function(){var t=this,i=new za({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:function(n){t.tooltipEle=n.element},animation:{open:{effect:"None"},close:{effect:"None"}}});i.createElement=this.createElement,i.appendTo(this.container),i.open(this.container),this.tooltipEle.style.zIndex=ed(this.tooltipEle).toString(),H(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},e.prototype.getTooltipInst=function(){return Hn(this.container,za)},e.prototype.setTooltipOffset=function(t){this.getTooltipInst().offsetY=t},e.prototype.toggleDisabled=function(t){t?this.getWrapper().classList.add(jj):this.getWrapper().classList.remove(jj),this.showButtons&&[].slice.call(me(".e-btn",this.container)).forEach(function(i){t?re(i,{disabled:""}):i.removeAttribute("disabled")})},e.prototype.convertToRgbString=function(t){return t.length?4===t.length?"rgba("+t.join()+")":"rgb("+t.join()+")":""},e.prototype.convertToHsvString=function(t){return 4===t.length?"hsva("+t.join()+")":"hsv("+t.join()+")"},e.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},e.prototype.convertToOtherFormat=function(t){void 0===t&&(t=!1);var i=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var n=this.rgbToHex(this.rgb),r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.updateInput(n),this.triggerEvent(n,i,r,t)},e.prototype.updateInput=function(t){var i=this.getWrapper();i.classList.contains(nf)||(i.classList.contains(eP)||ie.setValue(t.substr(0,7),H(".e-hex",this.container)),i.classList.contains(Sm)||this.updateValue(this.isRgb?this.rgb:this.hsv,!1))},e.prototype.updatePreview=function(t){this.enableOpacity&&this.updateOpacitySliderBg(),H(".e-tip-transparent",this.tooltipEle).style.backgroundColor=t,H("."+rI+" ."+$V,this.container).style.backgroundColor=t,H("."+rI+" ."+sI,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},e.prototype.getDragHandler=function(){return H("."+Wj,this.container)},e.prototype.removeTileSelection=function(){[].slice.call(me("."+F0,this.container.children[0])).forEach(function(i){i.classList.remove(F0),i.setAttribute("aria-selected","false")})},e.prototype.convertRgbToNumberArray=function(t){return t.slice(t.indexOf("(")+1,t.indexOf(")")).split(",").map(function(i,n){return 3!==n?parseInt(i,10):parseFloat(i)})},e.prototype.getValue=function(t,i){if(t||(t=this.value),i=i?i.toLowerCase():"hex","r"===t[0]){var n=this.convertRgbToNumberArray(t);if("hex"===i||"hexa"===i){var r=this.rgbToHex(n);return"hex"===i?r.slice(0,7):r}return"hsv"===i?this.convertToHsvString(this.rgbToHsv.apply(this,n.slice(0,3))):"hsva"===i?this.convertToHsvString(this.rgbToHsv.apply(this,n)):"null"}if("h"===t[0])return n=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(t)),"rgba"===i?this.convertToRgbString(n):"hex"===i||"hexa"===i?(r=this.rgbToHex(n),"hex"===i?r.slice(0,7):r):"rgb"===i?this.convertToRgbString(n.slice(0,3)):"null";t=this.roundValue(t);var o=this.hexToRgb(t);return("rgb"===i||"hsv"===i)&&(o=o.slice(0,3)),"rgba"===i||"rgb"===i?this.convertToRgbString(o):"hsva"===i||"hsv"===i?this.convertToHsvString(this.rgbToHsv.apply(this,o)):"hex"===i?t.slice(0,7):"a"===i?o[3].toString():"null"},e.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},e.prototype.getModuleName=function(){return"colorpicker"},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.wireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();C.add(t,"keydown",this.pickerKeyDown,this);var i=H("."+V0,this.container);i&&C.add(i,"keydown",this.ctrlBtnKeyDown,this),C.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),C.add(H("."+sI,this.container),"click",this.previewHandler,this)}else C.add(this.container,"click",this.paletteClickHandler,this),C.add(this.container,"keydown",this.paletteKeyDown,this)},e.prototype.formResetHandler=function(){this.value=this.initialInputValue,re(this.element,{value:this.initialInputValue})},e.prototype.addCtrlSwitchEvent=function(){var t=H("."+wm,this.container);t&&C.add(t,"click",this.btnClickHandler,this)},e.prototype.ctrlBtnKeyDown=function(t){if(13===t.keyCode){if(H("."+L0,this.container)){var n=this.rgbToHex(this.rgb);this.triggerChangeEvent(n)}this.splitBtn.element.focus()}},e.prototype.pickerKeyDown=function(t){switch(t.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,t);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,t);break;case 38:this.handlerDragPosition(2,1,t);break;case 40:this.handlerDragPosition(2,-1,t);break;case 13:t.preventDefault();var i=this.rgbToHex(this.rgb);this.enterKeyHandler(i,t)}},e.prototype.enterKeyHandler=function(t,i){this.triggerChangeEvent(t),this.inline||this.splitBtn.element.focus()},e.prototype.closePopup=function(t){var i=this;this.trigger("beforeClose",{element:this.container,event:t,cancel:!1},function(r){r.cancel||(i.splitBtn.toggle(),i.onPopupClose())})},e.prototype.triggerChangeEvent=function(t){var i=t.slice(0,7);this.trigger("change",{currentValue:{hex:i,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?t:i}),this.setProperties(this.enableOpacity?{value:t}:{value:i},!0),this.element.value=i||"#000000"},e.prototype.handlerDragPosition=function(t,i,n){n.preventDefault(),this.hsv[t]+=i*(n.ctrlKey?1:3),this.hsv[t]<0&&(this.hsv[t]=0),this.updateHsv(),this.convertToOtherFormat(!0)},e.prototype.handlerDown=function(t){t.preventDefault(),"mousedown"===t.type?(this.clientX=Math.abs(t.pageX-pageXOffset),this.clientY=Math.abs(t.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(t.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(t.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),C.add(document,"mousemove touchmove",this.handlerMove,this),C.add(document,"mouseup touchend",this.handlerEnd,this)},e.prototype.handlerMove=function(t){var i,n;"touchmove"!==t.type&&t.preventDefault(),"mousemove"===t.type?(i=Math.abs(t.pageX-pageXOffset),n=Math.abs(t.pageY-pageYOffset)):(i=Math.abs(t.changedTouches[0].pageX-pageXOffset),n=Math.abs(t.changedTouches[0].pageY-pageYOffset)),this.setHsv(i,n);var r=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(r),this.tooltipEle.style.transform||(Math.abs(this.clientX-i)>8||Math.abs(this.clientY-n)>8)&&(H("."+P0,this.container).style.cursor="pointer",r.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",r.classList.add("e-hide-handler"))},e.prototype.setHsv=function(t,i){var n=H("."+P0,this.container),r=n.getBoundingClientRect();t=this.enableRtl?t>r.right?0:Math.abs(t-r.right):t>r.left?Math.abs(t-r.left):0,i=i>r.top?Math.abs(i-r.top):0,this.hsv[2]=Math.round(10*Number(100*(n.offsetHeight-Math.max(0,Math.min(n.offsetHeight,i-n.offsetTop)))/n.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(n.offsetWidth,t-n.offsetLeft))/n.offsetWidth))/10},e.prototype.handlerEnd=function(t){"touchend"!==t.type&&t.preventDefault(),C.remove(document,"mousemove touchmove",this.handlerMove),C.remove(document,"mouseup touchend",this.handlerEnd);var i=this.getDragHandler();H("."+P0,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",i.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(t)},e.prototype.btnClickHandler=function(t){var i=t.target;k(i,"."+iI)?(t.stopPropagation(),this.switchToPalette()):(i.classList.contains(L0)||i.classList.contains(JV))&&this.ctrlBtnClick(i,t)},e.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),z(H(".e-slider-preview",this.container)),this.getWrapper().classList.contains(nf)||le(H("."+Cm,this.container)),z(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},e.prototype.refreshPopupPos=function(){if(!this.inline){var t=this.getPopupEle();t.style.left=oe(0+pageXOffset),t.style.top=oe(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},e.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},e.prototype.updateValue=function(t,i,n,r){for(var a,o=["e-rh-value","e-gs-value","e-bv-value"],l=0,h=o.length;l<h;l++)(a=Hn(H("."+o[l],this.container),zr)).value=Math.round(t[l]),i&&(a.placeholder=o[l].substr(n,1).toUpperCase(),a.max=r?r[l]:255),a.dataBind()},e.prototype.previewHandler=function(t){var i=t.target,n=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(i.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var r=this.rgbToHex(this.rgb),o=this.rgbToHsv.apply(this,this.rgb);o[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:o[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(o[0]),this.enableOpacity&&o[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*o[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=o,this.setHandlerPosition(),this.updateInput(r),H("."+rI+" ."+$V,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(r,n,this.convertToRgbString(this.rgb))},e.prototype.paletteClickHandler=function(t){t.preventDefault();var i=t.target;if(i.classList.contains(aI)){if(this.removeTileSelection(),this.addTileSelection(i),i.classList.contains(iP))this.noColorTile();else{var n=i.getAttribute("aria-label"),r=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(n)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Im)&&this.updateInput(n),this.triggerEvent(n,r,this.convertToRgbString(this.rgb))}!this.inline&&!this.showButtons&&this.closePopup(t)}else k(i,"."+iI)?this.switchToPicker():i.classList.contains(L0)||i.classList.contains(JV)?this.ctrlBtnClick(i,t):this.getWrapper().classList.contains(Im)&&k(i,"."+qj)&&this.formatSwitchHandler()},e.prototype.noColorTile=function(t){void 0===t&&(t=!1);var i=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",i,"",t)},e.prototype.switchToPicker=function(){var t=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(me("."+N0,this.container)).forEach(function(n){z(n)}),t.classList.contains(Im)&&z(H("."+Cm,this.container)),this.container.style.width="";var i=H(".e-custom-palette",this.container);this.presetColors&&le(i),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},e.prototype.ctrlBtnClick=function(t,i){if(t.classList.contains(L0)){var n=this.rgbToHex(this.rgb);this.triggerChangeEvent(n)}this.inline||(this.closePopup(i),this.splitBtn.element.focus())},e.prototype.paletteKeyDown=function(t){var i=t.target;if(i.classList.contains(N0)){var n,r,o=[].slice.call(me("."+aI,i)),a=o.filter(function(h){return h.classList.contains("e-selected")}).pop();switch(!t.altKey&&t.keyCode){case 39:t.preventDefault(),n=a?o[this.tilePosition(o,a,this.enableRtl?-1:1)]:o[this.enableRtl?o.length-1:0],this.keySelectionChanges(n);break;case 37:t.preventDefault(),n=a?o[this.tilePosition(o,a,this.enableRtl?1:-1)]:o[this.enableRtl?0:o.length-1],this.keySelectionChanges(n);break;case 38:t.preventDefault(),r=a?this.tilePosition(o,a,-this.columns):0,this.keySelectionChanges(n=o[r]?o[r]:o[r-this.columns]);break;case 40:t.preventDefault(),o[r=a?this.tilePosition(o,a,this.columns):o.length-1]||(r%=o.length,r+=o[o.length-1].parentElement.childElementCount),this.keySelectionChanges(n=o[r]);break;case 13:if(t.preventDefault(),a){var l=a.getAttribute("aria-label");this.enterKeyHandler(l||"",t)}}}},e.prototype.keySelectionChanges=function(t){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(iP))this.noColorTile(!0);else{var i=t.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(i),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Im)&&this.updateInput(i),this.triggerEvent(i,n,this.convertToRgbString(this.rgb),!0)}},e.prototype.tilePosition=function(t,i,n){var r=(t=Array.prototype.slice.call(t)).length,o=this.columns-t[r-1].parentElement.childElementCount,a=t.indexOf(i);return(a+=n)<0?a+=r+o:a%=r+o,a},e.prototype.inputHandler=function(t){var n,r,i=t.target;if(i.value.length)switch(H(".e-float-text",i.parentElement).textContent){case"HEX":var a="";if(("#"===i.value[0]&&5!==i.value.length||"#"!==i.value[0]&&4!==i.value.length)&&(a=this.roundValue(i.value)),9!==a.length)return;r=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(a+a.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),r,i.value);break;case"R":this.rgb[0]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[0]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r));break;case"G":this.rgb[1]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[1]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r));break;case"B":this.rgb[2]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[2]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r));break;case"H":this.hueSlider.value=Number(i.value);break;case"S":this.hsv[1]!==Number(i.value)&&(this.hsv[1]=Number(i.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(i.value)&&(this.hsv[2]=Number(i.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(i.value)}},e.prototype.inputValueChange=function(t,i,n){t[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:t[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(t[0])),this.hsv=t;var r=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(n||r);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(r,i,o)},e.prototype.triggerEvent=function(t,i,n,r){void 0===r&&(r=!1);var o=t.slice(0,7);this.showButtons||r?this.trigger("select",{currentValue:{hex:o,rgba:n},previousValue:{hex:i.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(i))}}):(this.trigger("change",{currentValue:{hex:o,rgba:n},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:t}),this.setProperties(this.enableOpacity?{value:t}:{value:o},!0),this.element.value=o||"#000000")},e.prototype.destroy=function(){var t=this,i=this.getWrapper();s.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(n){t.element.removeAttribute(n)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&z(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),z(i)),this.container=null,this.formElement&&C.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.destroyOtherComp=function(){if(this.isPicker()){for(var i=k(this.hueSlider.element,".e-color-picker").querySelectorAll(".e-numerictextbox"),n=0;n<i.length;n++)Hn(i[n],zr).destroy();this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var r=this.getTooltipInst();r.close(),r.destroy(),this.tooltipEle=null}},e.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},e.prototype.unWireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();C.remove(t,"keydown",this.pickerKeyDown);var i=H("."+V0,this.container);i&&C.remove(i,"keydown",this.ctrlBtnKeyDown),C.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&C.remove(H("."+wm,this.container),"click",this.btnClickHandler),C.remove(H("."+sI,this.container),"click",this.previewHandler)}else C.remove(this.container,"click",this.paletteClickHandler),C.remove(this.container,"keydown",this.paletteKeyDown)},e.prototype.roundValue=function(t){if(!t)return"";"#"!==t[0]&&(t="#"+t);var i=t.length;if(4===i&&(t+="f",i=5),5===i){for(var n="",r=1,o=t.length;r<o;r++)n+=t.charAt(r)+t.charAt(r);t="#"+n,i=9}return 7===i&&(t+="ff"),t},e.prototype.hexToRgb=function(t){if(!t)return[];9!==(t=t.trim()).length&&(t=this.roundValue(t));var i=Number((parseInt(t.slice(-2),16)/255).toFixed(2));t=t.slice(1,7);var n=parseInt(t,16),r=[];return r.push(n>>16&255),r.push(n>>8&255),r.push(255&n),r.push(i),r},e.prototype.rgbToHsv=function(t,i,n,r){if(this.rgb&&!this.rgb.length)return[];t/=255,i/=255,n/=255;var l,o=Math.max(t,i,n),a=Math.min(t,i,n),h=o,d=o-a,p=0===o?0:d/o;if(o===a)l=0;else{switch(o){case t:l=(i-n)/d+(i<n?6:0);break;case i:l=(n-t)/d+2;break;case n:l=(t-i)/d+4}l/=6}var u=[Math.round(360*l),Math.round(1e3*p)/10,Math.round(1e3*h)/10];return c(r)||u.push(r),u},e.prototype.hsvToRgb=function(t,i,n,r){var o,a,l;if(n/=100,0==(i/=100))return o=a=l=n,[Math.round(255*o),Math.round(255*a),Math.round(255*l),r];t/=60;var h=Math.floor(t),d=t-h,p=n*(1-i),u=n*(1-i*d),f=n*(1-i*(1-d));switch(h){case 0:o=n,a=f,l=p;break;case 1:o=u,a=n,l=p;break;case 2:o=p,a=n,l=f;break;case 3:o=p,a=u,l=n;break;case 4:o=f,a=p,l=n;break;default:o=n,a=p,l=u}var g=[Math.round(255*o),Math.round(255*a),Math.round(255*l)];return c(r)||g.push(r),g},e.prototype.rgbToHex=function(t){return t.length?"#"+this.hex(t[0])+this.hex(t[1])+this.hex(t[2])+(c(t[3])?"":0!==t[3]?(Math.round(255*t[3])+65536).toString(16).substr(-2):"00"):""},e.prototype.hex=function(t){return("0"+t.toString(16)).slice(-2)},e.prototype.changeModeSwitcherProp=function(t){var i=H("."+wm,this.container);t?i?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):i&&(this.showButtons?z(H("."+iI,i)):le(i))},e.prototype.changeShowBtnProps=function(t){var i=H("."+wm,this.container);t?(i&&le(i),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?z(H("."+V0,i)):le(i)},e.prototype.changeValueProp=function(t){if(this.isPicker())this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),z(k(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(t),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var i=this.container.querySelector('span[aria-label="'+this.roundValue(t)+'"]');i&&this.addTileSelection(i)}},e.prototype.setInputEleProps=function(){le(H("."+Cm,this.container)),this.createInput()},e.prototype.changeDisabledProp=function(t){this.isPicker()&&(this.hueSlider.enabled=!t,this.opacitySlider.enabled=!t,this.setInputEleProps()),t?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},e.prototype.changeCssClassProps=function(t,i){var n=this.getWrapper(),r=this.getPopupEle();i&&A([n,r],i.split(" ")),t&&M([n,r],t.replace(/\s+/g," ").trim().split(" "))},e.prototype.changeRtlProps=function(t){t?M([this.getWrapper()],"e-rtl"):A([this.getWrapper()],"e-rtl")},e.prototype.changePaletteProps=function(){z(this.container.children[0]),this.container.style.width="",this.createPalette()},e.prototype.changeOpacityProps=function(t){var i=this.getWrapper();t?(A([this.container.parentElement],tP),this.createOpacitySlider(H(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!i.classList.contains(nf)&&!i.classList.contains(Sm)&&this.appendOpacityValue(H(".e-input-container",this.container))):(M([this.container.parentElement],tP),this.opacitySlider.destroy(),le(this.opacitySlider.element),this.opacitySlider=null,!i.classList.contains(nf)&&!i.classList.contains(Sm)&&le(H("."+nP,this.container).parentElement))},e.prototype.onPropertyChanged=function(t,i){var n=this;if(!c(t.value)){var r=this.roundValue(t.value);if(9===r.length)this.element.value=this.roundValue(r).slice(0,7),(o=this.splitBtn&&H("."+oI,this.splitBtn.element))&&(o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(t.value)));else if(this.noColor&&"Palette"===this.mode&&""===this.value){var o;(o=this.splitBtn&&H("."+oI,this.splitBtn.element)).style.backgroundColor=""}else this.value=i.value}if(!this.inline&&c(t.inline)&&(this.splitBtn.setProperties(x0(t,["disabled","enableRtl"])),!this.isPopupOpen()))return this.changeCssClassProps(t.cssClass,i.cssClass),void this.changeRtlProps(t.enableRtl);for(var l=function(f){switch(f){case"inline":t.inline?(h.getWrapper().appendChild(h.container),h.splitBtn.destroy(),z(h.element.nextElementSibling),h.container.children.length||h.createWidget()):(h.destroyOtherComp(),h.unWireEvents(),h.container.innerHTML="",h.createSplitBtn());break;case"cssClass":h.changeCssClassProps(t.cssClass,i.cssClass);var g=t.cssClass.split(" ").concat(i.cssClass.split(" "));g=g.reduce(function(y,b){return y.indexOf(b)<0&&y.push(b),y},[]);var m=0;g.forEach(function(y){0!==m||y!==nf&&y!==Gj&&y!==Im&&y!==eP&&y!==Sm||(H("."+Cm,n.container)&&le(H("."+Cm,n.container)),n.createInput(),m++)});break;case"enableRtl":h.isPicker()&&(h.hueSlider.enableRtl=t.enableRtl,h.enableOpacity&&(h.opacitySlider.enableRtl=t.enableRtl),h.setInputEleProps()),h.changeRtlProps(t.enableRtl);break;case"disabled":h.changeDisabledProp(t.disabled);break;case"value":h.value!==i.value&&h.changeValueProp(t.value);break;case"showButtons":h.changeShowBtnProps(t.showButtons);break;case"mode":"Picker"===t.mode?h.switchToPicker():h.switchToPalette();break;case"modeSwitcher":h.changeModeSwitcherProp(t.modeSwitcher);break;case"columns":case"presetColors":h.isPicker()||h.changePaletteProps();break;case"noColor":t.noColor?"Palette"===h.mode&&!h.modeSwitcher&&h.setNoColor():h.changePaletteProps();break;case"enableOpacity":h.changeOpacityProps(t.enableOpacity)}},h=this,d=0,p=Object.keys(t);d<p.length;d++)l(p[d])},e.prototype.focusIn=function(){this.element.parentElement.focus()},ur([v("#008000ff")],e.prototype,"value",void 0),ur([v("")],e.prototype,"cssClass",void 0),ur([v(!1)],e.prototype,"disabled",void 0),ur([v("Picker")],e.prototype,"mode",void 0),ur([v(!0)],e.prototype,"modeSwitcher",void 0),ur([v(null)],e.prototype,"presetColors",void 0),ur([v(!0)],e.prototype,"showButtons",void 0),ur([v(10)],e.prototype,"columns",void 0),ur([v(!1)],e.prototype,"inline",void 0),ur([v(!1)],e.prototype,"noColor",void 0),ur([v(!1)],e.prototype,"enablePersistence",void 0),ur([v(!0)],e.prototype,"enableOpacity",void 0),ur([v(!1)],e.prototype,"createPopupOnClick",void 0),ur([V()],e.prototype,"select",void 0),ur([V()],e.prototype,"change",void 0),ur([V()],e.prototype,"beforeTileRender",void 0),ur([V()],e.prototype,"beforeOpen",void 0),ur([V()],e.prototype,"open",void 0),ur([V()],e.prototype,"beforeClose",void 0),ur([V()],e.prototype,"beforeModeSwitch",void 0),ur([V()],e.prototype,"onModeSwitch",void 0),ur([V()],e.prototype,"created",void 0),ur([et],e)}(Lt),Vge=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Kr=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Qj="e-input-focus",sP=["title","style","class"],Hs=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.previousValue=null,n.isAngular=!1,n.isHiddenInput=!1,n.isForm=!1,n.inputPreviousValue=null,n.isVue=!1,n.textboxOptions=t,n}return Vge(e,s),e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"floatLabelType":ie.removeFloating(this.textboxWrapper),ie.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":ie.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":ie.setWidth(t.width,this.textboxWrapper.container);break;case"value":var a=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=a,ie.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(c(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&c(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),this.multiline&&!c(this.textarea)?ie.validateInputType(this.textboxWrapper.container,this.textarea):ie.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":ie.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),ie.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":ie.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent();break;case"enableRtl":ie.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":ie.setPlaceholder(this.placeholder,this.respectiveElement),ie.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"locale":this.globalize=new qt(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ie.setPlaceholder(this.placeholder,this.respectiveElement)}},e.prototype.getModuleName=function(){return"textbox"},e.prototype.isBlank=function(t){return!t||/^\s*$/.test(t)},e.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=k(this.element,"form"),c(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var t=R("ej2_instances",this.element),i=this.createElement(this.multiline?"textarea":"input"),n=0;n<this.element.attributes.length;n++)"id"!==(r=this.element.attributes[n].nodeName)&&"class"!==r?(i.setAttribute(r,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML,"name"===r&&this.element.removeAttribute("name")):"class"===r&&i.setAttribute(r,this.element.className.split(" ").filter(function(l){return 0!==l.indexOf("ng-")}).join(" "));this.element.appendChild(i),this.element=i,ke("ej2_instances",t,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),(c(this.textboxOptions)||void 0===this.textboxOptions.value)&&""!==this.element.value&&this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),"text"===this.type&&this.element.setAttribute("role","textbox"),this.globalize=new qt(this.locale),this.l10n=new mi("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",yt("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",yt("textarea"));var a=["placeholder","disabled","value","readonly","type","autocomplete"];for(n=0;n<this.element.attributes.length;n++){var r;this.element.hasAttribute(r=this.element.attributes[n].nodeName)&&sP.indexOf(r)<0&&"id"!==r&&"type"!==r&&"e-mappinguid"!==r&&(this.textarea.setAttribute(r,this.element.attributes[n].nodeValue),a.indexOf(r)<0&&(this.element.removeAttribute(r),n--))}}},e.prototype.checkAttributes=function(t){for(var n=0,r=t?c(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];n<r.length;n++){var o=r[n];if(!c(this.element.getAttribute(o)))switch(o){case"disabled":if(c(this.textboxOptions)||void 0===this.textboxOptions.enabled||t){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!t)}break;case"readonly":if(c(this.textboxOptions)||void 0===this.textboxOptions.readonly||t){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!t)}break;case"placeholder":(c(this.textboxOptions)||void 0===this.textboxOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"autocomplete":(c(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||t)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!t);break;case"value":(c(this.textboxOptions)||void 0===this.textboxOptions.value||t)&&""!==this.element.value&&this.setProperties({value:this.element.value},!t);break;case"type":(c(this.textboxOptions)||void 0===this.textboxOptions.type||t)&&this.setProperties({type:this.element.type},!t)}}},e.prototype.render=function(){var t=this.cssClass;!c(this.cssClass)&&""!==this.cssClass&&(t=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=ie.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:t,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),c(this.value)||(ie.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),c(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:!c(this.textboxOptions)&&void 0!==this.textboxOptions.autocomplete&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,ie.setWidth(this.width,this.textboxWrapper.container),!c(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},e.prototype.updateHTMLAttrToWrapper=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];if(sP.indexOf(n)>-1)if("class"===n){var r=this.getInputValidClassList(this.htmlAttributes[""+n]);""!==r&&M([this.textboxWrapper.container],r.split(" "))}else if("style"===n){var o=this.textboxWrapper.container.getAttribute(n);o=c(o)?this.htmlAttributes[""+n]:o+this.htmlAttributes[""+n],this.textboxWrapper.container.setAttribute(n,o)}else this.textboxWrapper.container.setAttribute(n,this.htmlAttributes[""+n])}},e.prototype.updateHTMLAttrToElement=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];sP.indexOf(n)<0&&(this.multiline&&!c(this.textarea)?this.textarea.setAttribute(n,this.htmlAttributes[""+n]):this.element.setAttribute(n,this.htmlAttributes[""+n]))}},e.prototype.updateCssClass=function(t,i){ie.setCssClass(this.getInputValidClassList(t),[this.textboxWrapper.container],this.getInputValidClassList(i))},e.prototype.getInputValidClassList=function(t){var i=t;return!c(t)&&""!==t&&(i=t.replace(/\s+/g," ").trim()),i},e.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},e.prototype.wireEvents=function(){C.add(this.respectiveElement,"focus",this.focusHandler,this),C.add(this.respectiveElement,"blur",this.focusOutHandler,this),C.add(this.respectiveElement,"input",this.inputHandler,this),C.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&C.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!c(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&C.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},e.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var t=this.textboxWrapper.container.querySelector(".e-float-text");c(t)||(t.classList.add("e-label-top"),t.classList.contains("e-label-bottom")&&t.classList.remove("e-label-bottom"))},e.prototype.resetValue=function(t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=t,this.isProtectedOnChange=i},e.prototype.resetForm=function(){if(this.resetValue(this.isAngular?"":this.initialValue),!c(this.textboxWrapper)){var t=this.textboxWrapper.container.querySelector(".e-float-text");!c(t)&&"Always"!==this.floatLabelType&&(c(this.initialValue)||""===this.initialValue?(t.classList.add("e-label-bottom"),t.classList.remove("e-label-top")):""!==this.initialValue&&(t.classList.add("e-label-top"),t.classList.remove("e-label-bottom")))}},e.prototype.focusHandler=function(t){this.trigger("focus",{container:this.textboxWrapper.container,event:t,value:this.value})},e.prototype.focusOutHandler=function(t){(null!==this.previousValue||null!==this.value||""!==this.respectiveElement.value)&&this.previousValue!==this.value&&this.raiseChangeEvent(t,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:t,value:this.value})},e.prototype.inputHandler=function(t){var n={event:t,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",n),t.stopPropagation()},e.prototype.changeHandler=function(t){this.setProperties({value:this.respectiveElement.value},!0),this.previousValue!=this.value&&this.raiseChangeEvent(t,!0),t.stopPropagation()},e.prototype.raiseChangeEvent=function(t,i){var n={event:t,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:i||!1,isInteracted:i||!1};this.preventChange=!1,this.trigger("change",n),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===E.info.name&&(this.element.value=this.respectiveElement.value)},e.prototype.bindClearEvent=function(){this.showClearButton&&(this.enabled?C.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):C.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},e.prototype.resetInputHandler=function(t){if(t.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&(ie.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:t,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(t,!0),k(this.element,"form"))){var n=this.element,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}},e.prototype.unWireEvents=function(){C.remove(this.respectiveElement,"focus",this.focusHandler),C.remove(this.respectiveElement,"blur",this.focusOutHandler),C.remove(this.respectiveElement,"input",this.inputHandler),C.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&C.remove(this.formElement,"reset",this.resetForm),!c(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&C.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},e.prototype.destroy=function(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(z(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),c(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),z(this.textboxWrapper.container)),this.textboxWrapper=null,ie.destroy(),s.prototype.destroy.call(this)},e.prototype.addIcon=function(t,i){ie.addIcon(t,i,this.textboxWrapper.container,this.respectiveElement,this.createElement)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.addAttributes=function(t){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];"disabled"===r?(this.setProperties({enabled:!1},!0),ie.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===r?(this.setProperties({readonly:!0},!0),ie.setReadonly(this.readonly,this.respectiveElement)):"class"===r?this.respectiveElement.classList.add(t[""+r]):"placeholder"===r?(this.setProperties({placeholder:t[""+r]},!0),ie.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(r,t[""+r])}},e.prototype.removeAttributes=function(t){for(var i=0,n=t;i<n.length;i++){var r=n[i];"disabled"===r?(this.setProperties({enabled:!0},!0),ie.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===r?(this.setProperties({readonly:!1},!0),ie.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===r?(this.setProperties({placeholder:null},!0),ie.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(r)}},e.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&M([this.textboxWrapper.container],[Qj]))},e.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&A([this.textboxWrapper.container],[Qj]))},Kr([v("text")],e.prototype,"type",void 0),Kr([v(!1)],e.prototype,"readonly",void 0),Kr([v(null)],e.prototype,"value",void 0),Kr([v("Never")],e.prototype,"floatLabelType",void 0),Kr([v("")],e.prototype,"cssClass",void 0),Kr([v(null)],e.prototype,"placeholder",void 0),Kr([v("on")],e.prototype,"autocomplete",void 0),Kr([v({})],e.prototype,"htmlAttributes",void 0),Kr([v(!1)],e.prototype,"multiline",void 0),Kr([v(!0)],e.prototype,"enabled",void 0),Kr([v(!1)],e.prototype,"showClearButton",void 0),Kr([v(!1)],e.prototype,"enablePersistence",void 0),Kr([v(null)],e.prototype,"width",void 0),Kr([V()],e.prototype,"created",void 0),Kr([V()],e.prototype,"destroyed",void 0),Kr([V()],e.prototype,"change",void 0),Kr([V()],e.prototype,"blur",void 0),Kr([V()],e.prototype,"focus",void 0),Kr([V()],e.prototype,"input",void 0),Kr([et],e)}(Lt),Me=function(){function s(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return s.prototype.setKey=function(e){return this.key=e,this},s.prototype.using=function(e){return this.dataManager=e,this},s.prototype.execute=function(e,t,i,n){return(e=e||this.dataManager)?e.executeQuery(this,t,i,n):ae.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},s.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):ae.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},s.prototype.clone=function(){var e=new s;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e.lazyLoad=this.lazyLoad.slice(0),e},s.prototype.from=function(e){return this.fromTable=e,this},s.prototype.addParams=function(e,t){return this.params.push("function"==typeof t?{key:e,fn:t}:{key:e,value:t}),this},s.prototype.distinct=function(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this},s.prototype.expand=function(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this},s.prototype.where=function(e,t,i,n,r,o){t=t?t.toLowerCase():null;var a=null;return"string"==typeof e?a=new Et(e,t,i,n,r,o):e instanceof Et&&(a=e),this.queries.push({fn:"onWhere",e:a}),this},s.prototype.search=function(e,t,i,n,r){return"string"==typeof t&&(t=[t]),(!i||"none"===i)&&(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:n,ignoreAccent:r,comparer:ae.fnOperators[i]}}),this},s.prototype.sortBy=function(e,t,i){return this.sortByForeignKey(e,t,i)},s.prototype.sortByForeignKey=function(e,t,i,n){var o,a,r=c(n)?"ascending":n;if("string"==typeof e&&ae.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),t="descending"),(!t||"string"==typeof t)&&(r=t?t.toLowerCase():"ascending",t=ae.fnSort(t)),i){o=s.filterQueries(this.queries,"onSortBy");for(var l=0;l<o.length;l++)if("string"==typeof(a=o[l].e.fieldName)){if(a===e)return this}else if(a instanceof Array)for(var h=0;h<a.length;h++)if(a[h]===e||e.toLowerCase()===a[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:r}}),this},s.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},s.prototype.group=function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this},s.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},s.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},s.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},s.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},s.prototype.select=function(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},s.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},s.prototype.foreignKey=function(e){return this.fKey=e,this},s.prototype.requiresCount=function(){return this.isCountRequired=!0,this},s.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},s.filterQueries=function(e,t){return e.filter(function(i){return i.fn===t})},s.filterQueryLists=function(e,t){for(var i=e.filter(function(o){return-1!==t.indexOf(o.fn)}),n={},r=0;r<i.length;r++)n[i[r].fn]||(n[i[r].fn]=i[r].e);return n},s}(),Et=function(){function s(e,t,i,n,r,o){return void 0===n&&(n=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof e?(this.field=e,this.operator=t.toLowerCase(),this.value=i,this.matchCase=o,this.ignoreCase=n,this.ignoreAccent=r,this.isComplex=!1,this.comparer=ae.fnOperators.processOperator(this.operator)):(e instanceof s&&i instanceof s||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],this.matchCase=e.matchCase,this.ignoreCase=e.ignoreCase,this.ignoreAccent=e.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return s.and=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.combinePredicates([].slice.call(e,0),"and")},s.prototype.and=function(e,t,i,n,r){return s.combine(this,e,t,i,"and",n,r)},s.or=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.combinePredicates([].slice.call(e,0),"or")},s.prototype.or=function(e,t,i,n,r){return s.combine(this,e,t,i,"or",n,r)},s.ornot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.combinePredicates([].slice.call(e,0),"or not")},s.prototype.ornot=function(e,t,i,n,r){return s.combine(this,e,t,i,"ornot",n,r)},s.andnot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.combinePredicates([].slice.call(e,0),"and not")},s.prototype.andnot=function(e,t,i,n,r){return s.combine(this,e,t,i,"andnot",n,r)},s.fromJson=function(e){if(e instanceof Array){for(var t=[],i=0,n=e.length;i<n;i++)t.push(this.fromJSONData(e[i]));return t}return this.fromJSONData(e)},s.prototype.validate=function(e){var i,n,t=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.condition&&-1!==this.condition.indexOf("not")?(this.condition=""===this.condition.split("not")[0]?void 0:this.condition.split("not")[0],!this.comparer.call(this,ae.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,ae.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);n=this.condition&&-1!==this.condition.indexOf("not")?-1!==this.condition.indexOf("and"):"and"===this.condition;for(var r=0;r<t.length;r++)if(r>0&&this.condition&&-1!==this.condition.indexOf("not")&&(t[r].condition=t[r].condition?t[r].condition+"not":"not"),i=t[r].validate(e),n){if(!i)return!1}else if(i)return!0;return n},s.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,matchCase:this.matchCase}},s.combinePredicates=function(e,t){if(1===e.length){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new s(e[0],t,e.slice(1))},s.combine=function(e,t,i,n,r,o,a){return t instanceof s?s[r](e,t):"string"==typeof t?s[r](e,new s(t,i,n,o,a)):ae.throwError("Predicate - "+r+" : invalid arguments")},s.fromJSONData=function(e){for(var t=e.predicates||[],i=t.length,n=[],o=0;o<i;o++)n.push(this.fromJSONData(t[o]));return e.isComplex?new s(n[0],e.condition,n.slice(1)):new s(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent)},s}(),r9={GroupGuid:"{271bbba0-1ee7}"},ae=function(){function s(){}return s.getValue=function(e,t){return"function"==typeof e?e.call(t||{}):e},s.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},s.notEndsWith=function(e,t){return e.slice&&e.slice(-t.length)!==t},s.startsWith=function(e,t){return e.slice(0,t.length)===t},s.notStartsWith=function(e,t){return e.slice(0,t.length)!==t},s.wildCard=function(e,t){var i,n;if(-1!==t.indexOf("(")&&(t=t.split("(").join("[(]")),-1!==t.indexOf(")")&&(t=t.split(")").join("[)]")),-1!==t.indexOf("*")){"*"!==t.charAt(0)&&(t="^"+t),"*"!==t.charAt(t.length-1)&&(t+="$"),i=t.split("*");for(var r=0;r<i.length;r++)i[r]=-1===i[r].indexOf(".")?i[r]+".*":i[r]+"*";t=i.join("")}return(-1!==t.indexOf("%3f")||-1!==t.indexOf("?"))&&(n=-1!==t.indexOf("%3f")?t.split("%3f"):t.split("?"),t=n.join(".")),new RegExp(t,"g").test(e)},s.like=function(e,t){return-1!==t.indexOf("%")&&("%"===t.charAt(0)&&t.lastIndexOf("%")<2?(t=t.substring(1,t.length),s.startsWith(s.toLowerCase(e),s.toLowerCase(t))):"%"===t.charAt(t.length-1)&&t.indexOf("%")>t.length-3?(t=t.substring(0,t.length-1),s.endsWith(s.toLowerCase(e),s.toLowerCase(t))):(t.lastIndexOf("%")!==t.indexOf("%")&&t.lastIndexOf("%")>t.indexOf("%")+1&&(t=t.substring(t.indexOf("%")+1,t.lastIndexOf("%"))),-1!==e.indexOf(t)))},s.fnSort=function(e){return"ascending"===(e=e?s.toLowerCase(e):"ascending")?this.fnAscending:this.fnDescending},s.fnAscending=function(e,t){return c(e)&&c(t)||null==t?-1:"string"==typeof e?e.localeCompare(t):null==e?1:e-t},s.fnDescending=function(e,t){return c(e)&&c(t)?-1:null==t?1:"string"==typeof e?-1*e.localeCompare(t):null==e?-1:t-e},s.extractFields=function(e,t){for(var i={},n=0;n<t.length;n++)i=this.setValue(t[n],this.getObject(t[n],e),i);return i},s.select=function(e,t){for(var i=[],n=0;n<e.length;n++)i.push(this.extractFields(e[n],t));return i},s.group=function(e,t,i,n,r,o,a){n=n||1;var l=e,h="GroupGuid";if(l.GroupGuid===r9[h]){for(var d=function(S){if(c(r))l[S].items=p.group(l[S].items,t,i,l.level+1,null,o,a),l[S].count=l[S].items.length;else{var I,x=r.filter(function(T){return T.key===l[S].key});I=r.indexOf(x[0]),l[S].items=p.group(l[S].items,t,i,l.level+1,r[I].items,o,a),l[S].count=r[I].count}},p=this,u=0;u<l.length;u++)d(u);return l.childLevels+=1,l}var f={},g=[];g.GroupGuid=r9[h],g.level=n,g.childLevels=0,g.records=l;for(var m=function(S){var I=y.getVal(l,S,t);if(c(o)||(I=o(I,t)),!f[I]&&(f[I]={key:I,count:0,items:[],aggregates:{},field:t},g.push(f[I]),!c(r))){var x=r.filter(function(T){return T.key===f[I].key});f[I].count=x[0].count}f[I].count=c(r)?f[I].count+=1:f[I].count,(!a||a&&i.length)&&f[I].items.push(l[S])},y=this,b=0;b<l.length;b++)m(b);if(i&&i.length){var w=function(S){for(var I={},x=void 0,T=i,L=0;L<i.length;L++)if(x=s.aggregates[i[L].type],c(r))x&&(I[T[L].field+" - "+T[L].type]=x(g[S].items,T[L].field));else{var N=r.filter(function(O){return O.key===g[S].key});x&&(I[T[L].field+" - "+T[L].type]=x(N[0].items,T[L].field))}g[S].aggregates=I};for(b=0;b<g.length;b++)w(b)}if(a&&g.length&&i.length)for(b=0;b<g.length;b++)g[b].items=[];return l.length&&g||l},s.buildHierarchy=function(e,t,i,n,r){var o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++)(a[h=this.getObject(e,n[o])]||(a[h]=[])).push(n[o]);for(o=0;o<i.length;o++){var h=this.getObject(r||e,i[o]);i[o][t]=a[h]}},s.getFieldList=function(e,t,i){if(void 0===i&&(i=""),null==t)return this.getFieldList(e,[],i);for(var n=e,o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];"object"!=typeof n[l]||n[l]instanceof Array?t.push(i+l):this.getFieldList(n[l],t,i+l+".")}return t},s.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf(".")){var i=e.charAt(0).toLowerCase()+e.slice(1),n=e.charAt(0).toUpperCase()+e.slice(1);return c(t[e])?c(t[i])?c(t[n])?null:t[n]:t[i]:t[e]}for(var r=t,o=e.split("."),a=0;a<o.length&&null!=r;a++){if(void 0===(r=r[o[a]])){var l=o[a].charAt(0).toUpperCase()+o[a].slice(1);r=t[l]||t[l.charAt(0).toLowerCase()+l.slice(1)]||null}t=r}return r}},s.setValue=function(e,t,i){var a,h,n=e.toString().split("."),r=i||{},o=r,l=n.length;for(a=0;a<l;a++)h=n[a],a+1===l?o[h]=void 0===t?void 0:t:c(o[h])&&(o[h]={}),o=o[h];return r},s.sort=function(e,t,i){if(e.length<=1)return e;var n=parseInt((e.length/2).toString(),10),r=e.slice(0,n),o=e.slice(n);return r=this.sort(r,t,i),o=this.sort(o,t,i),this.merge(r,o,t,i)},s.ignoreDiacritics=function(e){return"string"!=typeof e?e:e.split("").map(function(n){return n in s.diacritics?s.diacritics[n]:n}).join("")},s.merge=function(e,t,i,n){for(var o,r=[];e.length>0||t.length>0;)o=e.length>0&&t.length>0?n?n(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,r.push(o.shift());return r},s.getVal=function(e,t,i){return i?this.getObject(i,e[t]):e[t]},s.toLowerCase=function(e){return e?"string"==typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},s.callAdaptorFunction=function(e,t,i,n){if(t in e){var r=e[t](i,n);c(r)||(i=r)}return i},s.getAddParams=function(e,t,i){var n={};return s.callAdaptorFunction(e,"addParams",{dm:t,query:i,params:i.params,reqParams:n}),n},s.isPlainObject=function(e){return!!e&&e.constructor===Object},s.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch{}return!!e&&"withCredentials"in e},s.getGuid=function(e){var i;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(n,r){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint8Array(1);window.crypto.getRandomValues(o),i=o[0]%16|0}else i=16*Math.random()|0;return"0123456789abcdef"[19===r?3&i|8:i]})},s.isNull=function(e){return null==e},s.getItemFromComparer=function(e,t,i){var n,r,o,a=0,l="string"==typeof s.getVal(e,0,t);if(e.length)for(;c(n)&&a<e.length;)n=s.getVal(e,a,t),o=e[a++];for(;a<e.length;a++)!c(r=s.getVal(e,a,t))&&(l&&(n=+n,r=+r),i(n,r)>0&&(n=r,o=e[a]));return o},s.distinct=function(e,t,i){i=!c(i)&&i;var r,n=[],o={};return e.forEach(function(a,l){(r="object"==typeof e[l]?s.getVal(e,l,t):e[l])in o||(n.push(i?e[l]:r),o[r]=1)}),n},s.processData=function(e,t){var i=this.prepareQuery(e),n=new he(t);e.requiresCounts&&i.requiresCount();var r=n.executeLocal(i),o={result:e.requiresCounts?r.result:r,count:r.count,aggregates:JSON.stringify(r.aggregates)};return e.requiresCounts?o:r},s.prepareQuery=function(e){var t=this,i=new Me;return e.select&&i.select(e.select),e.where&&s.parse.parseJson(e.where).filter(function(o){if(c(o.condition))i.where(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent);else{var a=[];o.field?a.push(new Et(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent)):a=a.concat(t.getPredicate(o.predicates)),"or"===o.condition?i.where(Et.or(a)):"and"===o.condition&&i.where(Et.and(a))}}),e.search&&s.parse.parseJson(e.search).filter(function(o){return i.search(o.key,o.fields,o.operator,o.ignoreCase,o.ignoreAccent)}),e.aggregates&&e.aggregates.filter(function(o){return i.aggregate(o.type,o.field)}),e.sorted&&e.sorted.filter(function(o){return i.sortBy(o.name,o.direction)}),e.skip&&i.skip(e.skip),e.take&&i.take(e.take),e.group&&e.group.filter(function(o){return i.group(o)}),i},s.getPredicate=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];if(n.field)t.push(new Et(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var r=[],o=this.getPredicate(n.predicates),a=0,l=Object.keys(o);a<l.length;a++)r.push(o[l[a]]);t.push("or"===n.condition?Et.or(r):Et.and(r))}}return t},s.serverTimezoneOffset=null,s.timeZoneHandling=!0,s.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},s.aggregates={sum:function(e,t){for(var n,i=0,r="number"!=typeof s.getVal(e,0,t),o=0;o<e.length;o++)n=s.getVal(e,o,t),!isNaN(n)&&null!==n&&(r&&(n=+n),i+=n);return i},average:function(e,t){return s.aggregates.sum(e,t)/e.length},min:function(e,t){var i;return"function"==typeof t&&(i=t,t=null),s.getObject(t,s.getItemFromComparer(e,t,i||s.fnAscending))},max:function(e,t){var i;return"function"==typeof t&&(i=t,t=null),s.getObject(t,s.getItemFromComparer(e,t,i||s.fnDescending))},truecount:function(e,t){return new he(e).executeLocal((new Me).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new he(e).executeLocal((new Me).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},s.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},s.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},s.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},s.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},s.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},s.fnOperators={equal:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?s.toLowerCase(e)===s.toLowerCase(t):e===t},notequal:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),!s.fnOperators.equal(e,t,i)},lessthan:function(e,t,i){return i?s.toLowerCase(e)<s.toLowerCase(t):(c(e)&&(e=void 0),e<t)},greaterthan:function(e,t,i){return i?s.toLowerCase(e)>s.toLowerCase(t):e>t},lessthanorequal:function(e,t,i){return i?s.toLowerCase(e)<=s.toLowerCase(t):(c(e)&&(e=void 0),e<=t)},greaterthanorequal:function(e,t,i){return i?s.toLowerCase(e)>=s.toLowerCase(t):e>=t},contains:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?!c(e)&&!c(t)&&-1!==s.toLowerCase(e).indexOf(s.toLowerCase(t)):!c(e)&&!c(t)&&-1!==e.toString().indexOf(t)},doesnotcontain:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?!c(e)&&!c(t)&&-1===s.toLowerCase(e).indexOf(s.toLowerCase(t)):!c(e)&&!c(t)&&-1===e.toString().indexOf(t)},isnotnull:function(e){return null!=e},isnull:function(e){return null==e},startswith:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?e&&t&&s.startsWith(s.toLowerCase(e),s.toLowerCase(t)):e&&t&&s.startsWith(e,t)},doesnotstartwith:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?e&&t&&s.notStartsWith(s.toLowerCase(e),s.toLowerCase(t)):e&&t&&s.notStartsWith(e,t)},like:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?e&&t&&s.like(s.toLowerCase(e),s.toLowerCase(t)):e&&t&&s.like(e,t)},isempty:function(e){return void 0===e||""===e},isnotempty:function(e){return void 0!==e&&""!==e},wildcard:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?(e||"boolean"==typeof e)&&t&&"object"!=typeof e&&s.wildCard(s.toLowerCase(e),s.toLowerCase(t)):(e||"boolean"==typeof e)&&t&&s.wildCard(e,t)},endswith:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?e&&t&&s.endsWith(s.toLowerCase(e),s.toLowerCase(t)):e&&t&&s.endsWith(e,t)},doesnotendwith:function(e,t,i,n){return n&&(e=s.ignoreDiacritics(e),t=s.ignoreDiacritics(t)),i?e&&t&&s.notEndsWith(s.toLowerCase(e),s.toLowerCase(t)):e&&t&&s.notEndsWith(e,t)},processSymbols:function(e){var t=s.operatorSymbols[e];return t?s.fnOperators[t]:s.throwError("Query - Process Operator : Invalid operator")},processOperator:function(e){return s.fnOperators[e]||s.fnOperators.processSymbols(e)}},s.parse={parseJson:function(e){return"string"==typeof e?e=JSON.parse(e,s.parse.jsonReviver):e instanceof Array?s.parse.iterateAndReviveArray(e):"object"==typeof e&&null!==e&&s.parse.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]&&null!==e[t]?s.parse.iterateAndReviveJson(e[t]):e[t]="string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[t])?s.parse.parseJson(e[t]):s.parse.jsonReviver("",e[t])},iterateAndReviveJson:function(e){for(var t,n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];s.startsWith(o,"__")||("object"==typeof(t=e[o])?t instanceof Array?s.parse.iterateAndReviveArray(t):t&&s.parse.iterateAndReviveJson(t):e[o]=s.parse.jsonReviver(e[o],t))}},jsonReviver:function(e,t){if("string"==typeof t){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),n=s.timeZoneHandling?s.serverTimezoneOffset:null;if(i)return s.dateParse.toTimeZone(new Date(parseInt(i[1],10)),n,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var r=t.indexOf("Z")>-1||t.indexOf("z")>-1,o=t.split(/[^0-9.]/);if(r){if(o[5].indexOf(".")>-1){var a=o[5].split(".");o[5]=a[0],o[6]=new Date(t).getUTCMilliseconds().toString()}else o[6]="00";t=s.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10),parseInt(o[6],10)),s.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),h=parseInt(o[6],10),d=parseInt(o[7],10);if(isNaN(h)&&isNaN(d))return l;t.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-d):l.setHours(l.getHours()+h,l.getMinutes()+d),t=s.dateParse.toTimeZone(l,s.serverTimezoneOffset,!1)}null==s.serverTimezoneOffset&&(t=s.dateParse.addSelfOffset(t))}else if(/^\d{4}-\d{2}-\d{2}$/.test(t))return o=t.split(/[^0-9.]/),new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10))}return t},isJson:function(e){return"string"==typeof e[0]?e:s.parse.parseJson(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,t){return s.isPlainObject(e)?s.parse.jsonReplacer(e,t):e instanceof Array?s.parse.arrayReplacer(e):e instanceof Date?s.parse.jsonReplacer({val:e},t).val:e},jsonReplacer:function(e,t){for(var i,r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];if((i=e[a])instanceof Date){var l=i;null==s.serverTimezoneOffset?e[a]=s.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+36e5*s.serverTimezoneOffset),e[a]=s.dateParse.toTimeZone(s.dateParse.addSelfOffset(l),null).toJSON())}}return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)s.isPlainObject(e[t])?e[t]=s.parse.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=s.parse.jsonReplacer({date:e[t]}).date);return e},jsonDateReplacer:function(e,t){if("value"===e&&t){if("string"==typeof t){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(i)t=s.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var n=t.split(/[^0-9]/);t=s.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),null,!0)}}if(t instanceof Date)return t=s.dateParse.addSelfOffset(t),null===s.serverTimezoneOffset?s.dateParse.toTimeZone(s.dateParse.addSelfOffset(t),null).toJSON():(t=s.dateParse.toTimeZone(t,t.getTimezoneOffset()/60*2-s.serverTimezoneOffset,!1)).toJSON()}return t}},s.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(e,t,i){if(null===t)return e;var n=i?s.dateParse.toUTC(e):e;return new Date(+n-36e5*t)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),n=i>=0?"+":"-",r=function(a){var l=Math.floor(Math.abs(a));return(l<10?"0":"")+l};return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+n+r(i/60)+":"+r(i%60)}},s}(),sd=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),jge={GroupGuid:"{271bbba0-1ee7}"},s9=function(){function s(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=s,this.dataSource=e,this.pvt={}}return s.prototype.processResponse=function(e,t,i,n){return e},s}(),pI=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return sd(e,s),e.prototype.processQuery=function(t,i){for(var a,l,u,n=t.dataSource.json.slice(0),r=n.length,o=!0,h={},d=0,p=[],f=0;f<i.lazyLoad.length;f++)d++,h[i.lazyLoad[f].key]=i.lazyLoad[f].value;var g={};for(f=0;f<i.queries.length;f++)"onPage"!==(l=i.queries[f]).fn&&"onGroup"!==l.fn||!i.lazyLoad.length?(a=this[l.fn].call(this,n,l.e,i),"onAggregates"===l.fn?g[l.e.field+" - "+l.e.type]=a:n=void 0!==a?a:n,("onPage"===l.fn||"onSkip"===l.fn||"onTake"===l.fn||"onRange"===l.fn)&&(o=!1),o&&(r=n.length)):("onGroup"===l.fn&&p.push(l.e),"onPage"===l.fn&&(u=l.e));if(d){var y=this.lazyLoadGroup({query:i,lazyLoad:h,result:n,group:p,page:u});n=y.result,r=y.count}return i.isCountRequired&&(n={result:n,count:r,aggregates:g}),n},e.prototype.lazyLoadGroup=function(t){var i=0,n=this.getAggregate(t.query),r=t.result;if(c(t.lazyLoad.onDemandGroupInfo)){i=(r=ae.group(r,t.group[0].fieldName,n,null,null,t.group[0].comparer,!0)).length;var h=r;t.page&&(r=this.onPage(r,t.page,t.query)),this.formGroupResult(r,h)}else{for(var o=t.lazyLoad.onDemandGroupInfo,a=o.where.length-1;a>=0;a--)r=this.onWhere(r,o.where[a]);t.group.length!==o.level&&(r=ae.group(r,t.group[o.level].fieldName,n,null,null,t.group[0].comparer,!0)),i=r.length,h=r,r=(r=r.slice(o.skip)).slice(0,o.take),t.group.length!==o.level&&this.formGroupResult(r,h)}return{result:r,count:i}},e.prototype.formGroupResult=function(t,i){if(t.length&&i.length){var n="GroupGuid",r="childLevels",o="level",a="records";t[n]=i[n],t[r]=i[r],t[o]=i[o],t[a]=i[a]}return t},e.prototype.getAggregate=function(t){var i=Me.filterQueries(t.queries,"onAggregates"),n=[];if(i.length)for(var r=void 0,o=0;o<i.length;o++)n.push({type:(r=i[o].e).type,field:ae.getValue(r.field,t)});return n},e.prototype.batchRequest=function(t,i,n){var r,o=i.deletedRecords.length;for(r=0;r<i.addedRecords.length;r++)this.insert(t,i.addedRecords[r]);for(r=0;r<i.changedRecords.length;r++)this.update(t,n.key,i.changedRecords[r]);for(r=0;r<o;r++)this.remove(t,n.key,i.deletedRecords[r]);return i},e.prototype.onWhere=function(t,i){return t&&t.length?t.filter(function(n){if(i)return i.validate(n)}):t},e.prototype.onAggregates=function(t,i){var n=ae.aggregates[i.type];return t&&n&&0!==t.length?n(t,i.field):null},e.prototype.onSearch=function(t,i){return t&&t.length?(0===i.fieldNames.length&&ae.getFieldList(t[0],i.fieldNames),t.filter(function(n){for(var r=0;r<i.fieldNames.length;r++)if(i.comparer.call(n,ae.getObject(i.fieldNames[r],n),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):t},e.prototype.onSortBy=function(t,i,n){if(!t||!t.length)return t;var r,o=ae.getValue(i.fieldName,n);if(!o)return t.sort(i.comparer);if(o instanceof Array){for(var a=(o=o.slice(0)).length-1;a>=0;a--)o[a]&&(r=i.comparer,ae.endsWith(o[a]," desc")&&(r=ae.fnSort("descending"),o[a]=o[a].replace(" desc","")),t=ae.sort(t,o[a],r));return t}return ae.sort(t,o,i.comparer)},e.prototype.onGroup=function(t,i,n){if(!t||!t.length)return t;var r=this.getAggregate(n);return ae.group(t,ae.getValue(i.fieldName,n),r,null,null,i.comparer)},e.prototype.onPage=function(t,i,n){var r=ae.getValue(i.pageSize,n),o=(ae.getValue(i.pageIndex,n)-1)*r;return t&&t.length?t.slice(o,o+r):t},e.prototype.onRange=function(t,i){return t&&t.length?t.slice(ae.getValue(i.start),ae.getValue(i.end)):t},e.prototype.onTake=function(t,i){return t&&t.length?t.slice(0,ae.getValue(i.nos)):t},e.prototype.onSkip=function(t,i){return t&&t.length?t.slice(ae.getValue(i.nos)):t},e.prototype.onSelect=function(t,i){return t&&t.length?ae.select(t,ae.getValue(i.fieldNames)):t},e.prototype.insert=function(t,i,n,r,o){return c(o)?t.dataSource.json.push(i):t.dataSource.json.splice(o,0,i)},e.prototype.remove=function(t,i,n,r){var a,o=t.dataSource.json;for("object"==typeof n&&!(n instanceof Date)&&(n=ae.getObject(i,n)),a=0;a<o.length&&ae.getObject(i,o[a])!==n;a++);return a!==o.length?o.splice(a,1):null},e.prototype.update=function(t,i,n,r){var a,l,o=t.dataSource.json;for(c(i)||(l=R(i,n)),a=0;a<o.length&&(c(i)||R(i,o[a])!==l);a++);return a<o.length?zn(o[a],n):null},e}(s9),sa=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return sd(e,s),e.prototype.processQuery=function(t,i,n){var h,d,r=this.getQueryRequest(i),o=Me.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=i.params,l=t.dataSource.url,p=null,u=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?d=((d=ae.getValue((h=o.onPage).pageIndex,i))-1)*(p=ae.getValue(h.pageSize,i)):"onRange"in o&&(d=(h=o.onRange).start,p=h.end-h.start);for(var g=0;g<r.sorts.length;g++)h=ae.getValue(r.sorts[g].e.fieldName,i),f.sorts.push(ae.callAdaptorFunction(this,"onEachSort",{name:h,direction:r.sorts[g].e.direction},i));for(n&&(h=this.getFiltersFrom(n,i))&&f.filters.push(ae.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)),g=0;g<r.filters.length;g++){var m=ae.callAdaptorFunction(this,"onEachWhere",r.filters[g].e.toJson(),i);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!c(r.filters[g].e.key)&&r.filters.length>1&&(m="("+m+")"),f.filters.push(m);for(var b=0,w="object"==typeof f.filters[g]?Object.keys(f.filters[g]):[];b<w.length;b++)ae.isNull(f[S=w[b]])&&delete f[S]}for(g=0;g<r.searches.length;g++)f.searches.push(ae.callAdaptorFunction(this,"onEachSearch",{fields:(h=r.searches[g].e).fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase},i));for(g=0;g<r.groups.length;g++)f.groups.push(ae.getValue(r.groups[g].e.fieldName,i));for(g=0;g<r.aggregates.length;g++)f.aggregates.push({type:(h=r.aggregates[g].e).type,field:ae.getValue(h.field,i)});var I={};if(this.getRequestQuery(u,i,o,f,I),ae.callAdaptorFunction(this,"addParams",{dm:t,query:i,params:a,reqParams:I}),i.lazyLoad.length)for(g=0;g<i.lazyLoad.length;g++)I[i.lazyLoad[g].key]=i.lazyLoad[g].value;for(var T=0,L=Object.keys(I);T<L.length;T++){var S;(ae.isNull(I[S=L[T]])||""===I[S]||0===I[S].length)&&delete I[S]}(!(u.skip in I)||!(u.take in I))&&null!==p&&(I[u.skip]=ae.callAdaptorFunction(this,"onSkip",d,i),I[u.take]=ae.callAdaptorFunction(this,"onTake",p,i));var N=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(I,ae.parse.jsonDateReplacer),url:l,pvtData:N,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(I,i,t),{type:"GET",url:(h=(-1!==t.dataSource.url.indexOf("?")?"&":"/")+h).length?l.replace(/\/*$/,h):l,pvtData:N})},e.prototype.getRequestQuery=function(t,i,n,r,o){var l=o;l[t.from]=i.fromTable,t.apply&&i.distincts.length&&(l[t.apply]="onDistinct"in this?ae.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&t.expand&&(l[t.expand]="onExpand"in this&&"onSelect"in n?ae.callAdaptorFunction(this,"onExpand",{selects:ae.getValue(n.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[t.select]="onSelect"in n&&!i.distincts.length?ae.callAdaptorFunction(this,"onSelect",ae.getValue(n.onSelect.fieldNames,i),i):"",l[t.count]=i.isCountRequired?ae.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[t.search]=r.searches.length?ae.callAdaptorFunction(this,"onSearch",r.searches,i):"",l[t.skip]="onSkip"in n?ae.callAdaptorFunction(this,"onSkip",ae.getValue(n.onSkip.nos,i),i):"",l[t.take]="onTake"in n?ae.callAdaptorFunction(this,"onTake",ae.getValue(n.onTake.nos,i),i):"",l[t.where]=r.filters.length||r.searches.length?ae.callAdaptorFunction(this,"onWhere",r.filters,i):"",l[t.sortBy]=r.sorts.length?ae.callAdaptorFunction(this,"onSortBy",r.sorts,i):"",l[t.group]=r.groups.length?ae.callAdaptorFunction(this,"onGroup",r.groups,i):"",l[t.aggregates]=r.aggregates.length?ae.callAdaptorFunction(this,"onAggregates",r.aggregates,i):"",l.param=[]},e.prototype.convertToQueryString=function(t,i,n){return""},e.prototype.processResponse=function(t,i,n,r,o,a){if(r&&r.getResponseHeader("Content-Type")&&-1!==r.getResponseHeader("Content-Type").indexOf("application/json")){var l=ae.timeZoneHandling;i&&!i.timeZoneHandling&&(ae.timeZoneHandling=!1),t=ae.parse.parseJson(t),ae.timeZoneHandling=l}var h=o,d=h.pvtData||{},p=t?t.groupDs:[];if(r&&r.getResponseHeader("Content-Type")&&-1!==r.getResponseHeader("Content-Type").indexOf("xml"))return n.isCountRequired?{result:[],count:0}:[];var u=JSON.parse(h.data);if(u&&"batch"===u.action&&t&&t.addedRecords)return a.addedRecords=t.addedRecords,a;t&&t.d&&(t=t.d);var f={};t&&"count"in t&&(f.count=t.count),f.result=t&&t.result?t.result:t;var g=!1;if(Array.isArray(t.result)&&t.result.length&&(c(t.result[0].key)||(f.result=this.formRemoteGroupedData(f.result,1,d.groups.length-1)),n&&n.lazyLoad.length&&d.groups.length))for(var w=0;w<n.lazyLoad.length;w++)"onDemandGroupInfo"===n.lazyLoad[w].key&&d.groups.length===n.lazyLoad[w].value.level&&(g=!0);return g||this.getAggregateResult(d,t,f,p,n),ae.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},e.prototype.formRemoteGroupedData=function(t,i,n){for(var r=0;r<t.length;r++)t[r].items.length&&Object.keys(t[r].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(t[r].items,i+1,n-1);var o="GroupGuid",h="records";return t[o]=jge[o],t.level=i,t.childLevels=n,t[h]=t[0].items.length?this.getGroupedRecords(t,!c(t[0].items[h])):[],t},e.prototype.getGroupedRecords=function(t,i){for(var n=[],o=0;o<t.length;o++)if(i)n=n.concat(t[o].items.records);else for(var a=0;a<t[o].items.length;a++)n.push(t[o].items[a]);return n},e.prototype.onGroup=function(t){return this.pvt.groups=t,t},e.prototype.onAggregates=function(t){this.pvt.aggregates=t},e.prototype.batchRequest=function(t,i,n,r,o){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.removeUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(Q({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n[void 0],key:n[void 0]},ae.getAddParams(this,t,r)))}},e.prototype.beforeSend=function(t,i){},e.prototype.insert=function(t,i,n,r){return{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{value:i,table:n,action:"insert"},ae.getAddParams(this,t,r)))}},e.prototype.remove=function(t,i,n,r,o){return{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{key:n,keyColumn:i,table:r,action:"remove"},ae.getAddParams(this,t,o)))}},e.prototype.update=function(t,i,n,r,o){return{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{value:n,action:"update",keyColumn:i,key:ae.getObject(i,n),table:r},ae.getAddParams(this,t,o)))}},e.prototype.getFiltersFrom=function(t,i){var r,n=i.fKey,o=n,a=i.key,l=[];"object"!=typeof t[0]&&(o=null);for(var h=0;h<t.length;h++)r="object"==typeof t[0]?ae.getObject(a||o,t[h]):t[h],l.push(new Et(n,"equal",r));return Et.or(l)},e.prototype.getAggregateResult=function(t,i,n,r,o){var a=i;if(i&&i.result&&(a=i.result),t&&t.aggregates&&t.aggregates.length){var l=t.aggregates,h=void 0,d=a,p={};i.aggregate&&(d=i.aggregate);for(var u=0;u<l.length;u++)(h=ae.aggregates[l[u].type])&&(p[l[u].field+" - "+l[u].type]=h(d,l[u].field));n.aggregates=p}var g=Array.isArray(i.result)&&i.result.length&&!c(i.result[0].key);if(t&&t.groups&&t.groups.length&&!g){var m=t.groups;for(u=0;u<m.length;u++){c(r)||(r=ae.group(r,m[u]));var b=Me.filterQueries(o.queries,"onGroup")[u].e;a=ae.group(a,m[u],t.aggregates,null,r,b.comparer)}n.result=a}return n},e.prototype.getQueryRequest=function(t){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=Me.filterQueries(t.queries,"onSortBy"),i.groups=Me.filterQueries(t.queries,"onGroup"),i.filters=Me.filterQueries(t.queries,"onWhere"),i.searches=Me.filterQueries(t.queries,"onSearch"),i.aggregates=Me.filterQueries(t.queries,"onAggregates"),i},e.prototype.addParams=function(t){var i=t.reqParams;t.params.length&&(i.params={});for(var n=0,r=t.params;n<r.length;n++){var o=r[n];if(i[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[o.key]=o.value,o.fn&&(i[o.key]=o.fn.call(t.query,o.key,t.query,t.dm)),i.params[o.key]=i[o.key]}},e}(s9),Tm=function(s){function e(t){var i=s.call(this)||this;return i.options=Q({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),Q(i.options,t||{}),i}return sd(e,s),e.prototype.getModuleName=function(){return"ODataAdaptor"},e.prototype.onPredicate=function(t,i,n){var o,a,r="",l=t.value,h=typeof l,d=t.field?e.getField(t.field):null;if(l instanceof Date&&(l="datetime'"+ae.parse.replacer(l)+"'"),"string"===h&&(l=l.replace(/'/g,"''"),t.ignoreCase&&(l=l.toLowerCase()),"like"!==t.operator&&(l=encodeURIComponent(l)),"wildcard"!==t.operator&&"like"!==t.operator&&(l="'"+l+"'"),n&&(d="cast("+d+", 'Edm.String')"),ae.parse.isGuid(l)&&(a="guid"),t.ignoreCase&&(a||(d="tolower("+d+")"),l=l.toLowerCase())),"isempty"===t.operator||"isnull"===t.operator||"isnotempty"===t.operator||"isnotnull"===t.operator?(o=-1!==t.operator.indexOf("isnot")?ae.odBiOperator.notequal:ae.odBiOperator.equal,l="isnull"===t.operator||"isnotnull"===t.operator?null:"''"):o=ae.odBiOperator[t.operator],o)return r+=d,r+=o,a&&(r+=a),r+l;if("like"===(o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator[t.operator]:ae.odv4UniOperator[t.operator]))-1!==l.indexOf("%")&&("%"===l.charAt(0)&&l.lastIndexOf("%")<2?(l=l.substring(1,l.length),o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.startswith:ae.odv4UniOperator.startswith):"%"===l.charAt(l.length-1)&&l.indexOf("%")>l.length-3?(l=l.substring(0,l.length-1),o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.endswith:ae.odv4UniOperator.endswith):l.lastIndexOf("%")!==l.indexOf("%")&&l.lastIndexOf("%")>l.indexOf("%")+1?(l=l.substring(l.indexOf("%")+1,l.lastIndexOf("%")),o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.contains:ae.odv4UniOperator.contains):o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.contains:ae.odv4UniOperator.contains),l="'"+(l=encodeURIComponent(l))+"'";else if("wildcard"===o)if(-1!==l.indexOf("*")){var p=l.split("*"),u=void 0,f=0;if(0!==l.indexOf("*")&&-1===p[0].indexOf("%3f")&&-1===p[0].indexOf("?")&&(u="'"+(u=p[0])+"'",r+=(o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.startswith:ae.odv4UniOperator.startswith)+"(",r+=d+",",a&&(r+=a),r+=u+")",f++),l.lastIndexOf("*")!==l.length-1&&-1===p[p.length-1].indexOf("%3f")&&-1===p[p.length-1].indexOf("?")&&(u="'"+(u=p[p.length-1])+"'",f>0&&(r+=" and "),r+=(o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.endswith:ae.odv4UniOperator.endswith)+"(",r+=d+",",a&&(r+=a),r+=u+")",f++),p.length>2)for(var g=1;g<p.length-1;g++)if(-1===p[g].indexOf("%3f")&&-1===p[g].indexOf("?")){if(u="'"+(u=p[g])+"'",f>0&&(r+=" and "),"substringof"===(o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.contains:ae.odv4UniOperator.contains)||"not substringof"===o){var m=u;u=d,d=m}r+=o+"(",r+=d+",",a&&(r+=a),r+=u+")",f++}0===f?(o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.contains:ae.odv4UniOperator.contains,(-1!==l.indexOf("?")||-1!==l.indexOf("%3f"))&&(l=-1!==l.indexOf("?")?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'"):o="wildcard"}else o=c(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?ae.odUniOperator.contains:ae.odv4UniOperator.contains,(-1!==l.indexOf("?")||-1!==l.indexOf("%3f"))&&(l=-1!==l.indexOf("?")?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'";return"substringof"!==o&&"not substringof"!==o||(m=l,l=d,d=m),"wildcard"!==o&&(r+=o+"(",r+=d+",",a&&(r+=a),r+=l+")"),r},e.prototype.addParams=function(t){s.prototype.addParams.call(this,t),delete t.reqParams.params},e.prototype.onComplexPredicate=function(t,i,n){for(var r=[],o=0;o<t.predicates.length;o++)r.push("("+this.onEachWhere(t.predicates[o],i,n)+")");return r.join(" "+t.condition+" ")},e.prototype.onEachWhere=function(t,i,n){return t.isComplex?this.onComplexPredicate(t,i,n):this.onPredicate(t,i,n)},e.prototype.onWhere=function(t){return this.pvt.search&&t.push(this.onEachWhere(this.pvt.search,null,!0)),t.join(" and ")},e.prototype.onEachSearch=function(t){t.fields&&0===t.fields.length&&ae.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],n=0;n<t.fields.length;n++)i.push(new Et(t.fields[n],t.operator,t.key,t.ignoreCase));this.pvt.search=i},e.prototype.onSearch=function(t){return this.pvt.search=Et.or(this.pvt.search),""},e.prototype.onEachSort=function(t){var i=[];if(t.name instanceof Array)for(var n=0;n<t.name.length;n++)i.push(e.getField(t.name[n])+("descending"===t.direction?" desc":""));else i.push(e.getField(t.name)+("descending"===t.direction?" desc":""));return i.join(",")},e.prototype.onSortBy=function(t){return t.reverse().join(",")},e.prototype.onGroup=function(t){return this.pvt.groups=t,[]},e.prototype.onSelect=function(t){for(var i=0;i<t.length;i++)t[i]=e.getField(t[i]);return t.join(",")},e.prototype.onAggregates=function(t){return this.pvt.aggregates=t,""},e.prototype.onCount=function(t){return!0===t?"allpages":""},e.prototype.beforeSend=function(t,i,n){ae.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()?(i.setRequestHeader("Accept",this.options.multipartAccept),i.setRequestHeader("DataServiceVersion","2.0"),i.overrideMimeType("text/plain; charset=x-user-defined")):i.setRequestHeader("Accept",this.options.accept),i.setRequestHeader("DataServiceVersion","2.0"),i.setRequestHeader("MaxDataServiceVersion","2.0")},e.prototype.processResponse=function(t,i,n,r,o,a){var l="odata.metadata";if(o&&"GET"===o.type&&!this.rootUrl&&t[l]){var h=t[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}if(!c(t.d)){var p=n&&n.isCountRequired?t.d.results:t.d,u="__metadata";if(!c(p))for(var f=0;f<p.length;f++)c(p[f][u])||delete p[f][u]}var g=o&&o.pvtData,m=this.processBatchResponse(t,n,r,o,a);if(m)return m;var y=r&&o.getResponseHeader("DataServiceVersion"),b=null,w=y&&parseInt(y,10)||2;if(n&&n.isCountRequired){var S="__count";(t[S]||t["odata.count"])&&(b=t[S]||t["odata.count"]),t.d&&(t=t.d),(t[S]||t["odata.count"])&&(b=t[S]||t["odata.count"])}3===w&&t.value&&(t=t.value),t.d&&(t=t.d),w<3&&t.results&&(t=t.results);var I={};return I.count=b,I.result=t,this.getAggregateResult(g,t,I,null,n),ae.isNull(b)?I.result:{result:I.result,count:I.count,aggregates:I.aggregates}},e.prototype.convertToQueryString=function(t,i,n){var r=[],o="table",a=t[o]||"";delete t[o],n.dataSource.requiresFormat&&(t.$format="json");for(var d=0,p=Object.keys(t);d<p.length;d++){var u=p[d];r.push(u+"="+t[u])}return r=r.join("&"),n.dataSource.url&&-1!==n.dataSource.url.indexOf("?")&&!a?r:r.length?a+"?"+r:a||""},e.prototype.localTimeReplacer=function(t,i){for(var n=0,r=c(i)?[]:Object.keys(i);n<r.length;n++){var o=r[n];i[o]instanceof Date&&(i[o]=ae.dateParse.toLocalTime(i[o]))}return i},e.prototype.insert=function(t,i,n){return{url:(t.dataSource.insertUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},e.prototype.remove=function(t,i,n,r){var o;return o="string"!=typeof n||ae.parse.isGuid(n)?"("+n+")":"('"+n+"')",{type:"DELETE",url:(t.dataSource.removeUrl||t.dataSource.url).replace(/\/*$/,r?"/"+r:"")+o}},e.prototype.update=function(t,i,n,r,o,a){var l;return"PATCH"===this.options.updateType&&!c(a)&&(n=this.compareAndRemove(n,a,i)),l="string"!=typeof n[i]||ae.parse.isGuid(n[i])?"("+n[i]+")":"('"+n[i]+"')",{type:this.options.updateType,url:(t.dataSource.updateUrl||t.dataSource.url).replace(/\/*$/,r?"/"+r:"")+l,data:JSON.stringify(n,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},e.prototype.batchRequest=function(t,i,n,r,o){var a=n.guid=ae.getGuid(this.options.batchPre),l=this.rootUrl?this.rootUrl+"/"+this.options.batch:t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);n.url=this.resourceTableName?this.resourceTableName:n.url;var h={url:n.url,key:n.key,cid:1,cSet:ae.getGuid(this.options.changeSet)},d="--"+a+"\n";return d+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+"\n",this.pvt.changeSet=0,d+=this.generateInsertRequest(i.addedRecords,h,t),d+=this.generateUpdateRequest(i.changedRecords,h,t,o?o.changedRecords:[]),d+=this.generateDeleteRequest(i.deletedRecords,h,t),d+=h.cSet+"--\n",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:d+="--"+a+"--"}},e.prototype.generateDeleteRequest=function(t,i,n){return t?this.generateBodyContent(t,i,{method:"DELETE ",url:function(a,l,h){var d=ae.getObject(h,a[l]);return"number"==typeof d||ae.parse.isGuid(d)?"("+d+")":d instanceof Date?"("+a[l][h].toJSON()+")":"('"+d+"')"},data:function(a,l){return""}},n)+"\n":""},e.prototype.generateInsertRequest=function(t,i,n){return t?this.generateBodyContent(t,i,{method:"POST ",url:function(a,l,h){return""},data:function(a,l){return JSON.stringify(a[l])+"\n\n"}},n):""},e.prototype.generateUpdateRequest=function(t,i,n,r){var o=this;return t?(t.forEach(function(h){return h=o.compareAndRemove(h,r.filter(function(d){return ae.getObject(i.key,d)===ae.getObject(i.key,h)})[0],i.key)}),this.generateBodyContent(t,i,{method:this.options.updateType+" ",url:function(h,d,p){return"number"==typeof h[d][p]||ae.parse.isGuid(h[d][p])?"("+h[d][p]+")":h[d][p]instanceof Date?"("+h[d][p].toJSON()+")":"('"+h[d][p]+"')"},data:function(h,d){return JSON.stringify(h[d])+"\n\n"}},n)):""},e.getField=function(t){return t.replace(/\./g,"/")},e.prototype.generateBodyContent=function(t,i,n,r){for(var o="",a=0;a<t.length;a++)o+="\n"+i.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=n.method,"POST "===n.method?o+=(r.dataSource.insertUrl||r.dataSource.crudUrl||i.url)+n.url(t,a,i.key)+" HTTP/1.1\n":"PUT "===n.method||"PATCH "===n.method?o+=(r.dataSource.updateUrl||r.dataSource.crudUrl||i.url)+n.url(t,a,i.key)+" HTTP/1.1\n":"DELETE "===n.method&&(o+=(r.dataSource.removeUrl||r.dataSource.crudUrl||i.url)+n.url(t,a,i.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",c(t[a]["@odata.etag"])?o+="\n":(o+="If-Match: "+t[a]["@odata.etag"]+"\n\n",delete t[a]["@odata.etag"]),o+=n.data(t,a);return o},e.prototype.processBatchResponse=function(t,i,n,r,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];if(r&&this.options.batch&&ae.endsWith(r.url,this.options.batch)&&"post"===r.type.toLowerCase()){var a=n.getResponseHeader("Content-Type"),l=void 0,h=void 0,d=t+"";if(a=a.substring(a.indexOf("=batchresponse")+1),(d=d.split(a)).length<2)return{};var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(d=d[1]);p&&d.replace(p[0],"");for(var f=(d=d.split(p?p[1]:"")).length;f>-1;f--)!/\bContent-ID:/i.test(d[f])||!/\bHTTP.+201/.test(d[f])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(d[f])[1],10),o.addedRecords[l]&&(h=ae.parse.parseJson(/^\{.+\}/m.exec(d[f])[0]),Q({},o.addedRecords[l],this.processResponse(h))));return o}return null},e.prototype.compareAndRemove=function(t,i,n){var r=this;return c(i)||Object.keys(t).forEach(function(o){o!==n&&"@odata.etag"!==o&&(ae.isPlainObject(t[o])?(r.compareAndRemove(t[o],i[o]),0===Object.keys(t[o]).filter(function(l){return"@odata.etag"!==l}).length&&delete t[o]):(t[o]===i[o]||t[o]&&i[o]&&t[o].valueOf()===i[o].valueOf())&&delete t[o])}),t},e}(sa),qge=function(s){function e(t){var i=s.call(this,t)||this;return i.options=Q({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),Q(i.options,t||{}),i}return sd(e,s),e.prototype.getModuleName=function(){return"ODataV4Adaptor"},e.prototype.onCount=function(t){return!0===t?"true":""},e.prototype.onPredicate=function(t,i,n){var r="",o=t.value,a=o instanceof Date;if(i instanceof Me)for(var l=this.getQueryRequest(i),h=0;h<l.filters.length;h++)l.filters[h].e.key===t.value&&(n=!0);return r=s.prototype.onPredicate.call(this,t,i,n),a&&(r=r.replace(/datetime'(.*)'$/,"$1")),ae.parse.isGuid(o)&&(r=r.replace("guid","").replace(/'/g,"")),r},e.prototype.onEachSearch=function(t){var i=this.pvt.searches||[];i.push(t.key),this.pvt.searches=i},e.prototype.onSearch=function(t){return this.pvt.searches.join(" OR ")},e.prototype.onExpand=function(t){var i=this,n={},r={},o=t.expands.slice(),a=[];return t.selects.filter(function(h){return h.indexOf(".")>-1}).forEach(function(h){var d=h.split(".");if(d[0]in n||(n[d[0]]=[]),2===d.length)n[d[0]].length&&-1!==Object.keys(n).indexOf(d[0])?n[d[0]][0]=-1!==n[d[0]][0].indexOf("$expand")&&-1===n[d[0]][0].indexOf(";$select=")?n[d[0]][0]+";$select="+d[1]:n[d[0]][0]+","+d[1]:n[d[0]].push("$select="+d[1]);else{for(var p="$select="+d[d.length-1],u="",f="",g=1;g<d.length-1;g++)u=u+"$expand="+d[g]+"(",f+=")";var m=u+p+f;if(n[d[0]].length&&-1!==Object.keys(n).indexOf(d[0])&&i.expandQueryIndex(n[d[0]],!0)){var y=i.expandQueryIndex(n[d[0]]);n[d[0]][y]=n[d[0]][y]+m.replace("$expand=",",")}else n[d[0]].push(m)}}),Object.keys(n).forEach(function(h){-1===o.indexOf(h)&&o.push(h)}),o.forEach(function(h){r[h]=h in n?h+"("+n[h].join(";")+")":h}),Object.keys(r).forEach(function(h){return a.push(r[h])}),a.join(",")},e.prototype.expandQueryIndex=function(t,i){for(var n=0;n<t.length;n++)if(-1!==t[n].indexOf("$expand"))return!!i||n;return!i&&0},e.prototype.onDistinct=function(t){return"groupby(("+t.map(function(n){return Tm.getField(n)}).join(",")+"))"},e.prototype.onSelect=function(t){return s.prototype.onSelect.call(this,t.filter(function(i){return-1===i.indexOf(".")}))},e.prototype.beforeSend=function(t,i,n){("POST"===n.type||"PUT"===n.type||"PATCH"===n.type)&&i.setRequestHeader("Prefer","return=representation"),i.setRequestHeader("Accept",this.options.accept)},e.prototype.processResponse=function(t,i,n,r,o,a){var l="@odata.context",h="@context";if(o&&"GET"===o.type&&!this.rootUrl&&(t[l]||t[h])){var d=t[l]?t[l].split("/$metadata#"):t[h].split("/$metadata#");this.rootUrl=d[0],this.resourceTableName=d[1]}var u=o&&o.pvtData,f=s.prototype.processBatchResponse.call(this,t,n,r,o,a);if(f)return f;var g=null,m="@odata.count",y="@count";n&&n.isCountRequired&&(m in t?g=t[m]:y in t&&(g=t[y])),t=c(t.value)?t:t.value;var b={};return b.count=g,b.result=t,this.getAggregateResult(u,t,b,null,n),ae.isNull(g)?b.result:{result:b.result,count:g,aggregates:b.aggregates}},e}(Tm),Wge=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return sd(e,s),e.prototype.getModuleName=function(){return"WebApiAdaptor"},e.prototype.insert=function(t,i,n){return{type:"POST",url:t.dataSource.url,data:JSON.stringify(i)}},e.prototype.remove=function(t,i,n,r){return{type:"DELETE",url:t.dataSource.url+"/"+n,data:JSON.stringify(n)}},e.prototype.update=function(t,i,n,r){return{type:"PUT",url:t.dataSource.url,data:JSON.stringify(n)}},e.prototype.batchRequest=function(t,i,n){var o=n.guid=ae.getGuid(this.options.batchPre),a=t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);n.url=this.resourceTableName?this.resourceTableName:n.url;for(var l=[],d=0,p=i.addedRecords.length;d<p;d++)i.addedRecords.forEach(function(y,b){l.push("--"+o),l.push("Content-Type: application/http; msgtype=request",""),l.push("POST /api/"+(t.dataSource.insertUrl||t.dataSource.crudUrl||n.url)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",y?JSON.stringify(y):"")});for(d=0,p=i.changedRecords.length;d<p;d++)i.changedRecords.forEach(function(y,b){l.push("--"+o),l.push("Content-Type: application/http; msgtype=request",""),l.push("PUT /api/"+(t.dataSource.updateUrl||t.dataSource.crudUrl||n.url)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",y?JSON.stringify(y):"")});var f=function(g,m){i.deletedRecords.forEach(function(y,b){var S,I,x,T;l.push("--"+o),l.push("Content-Type: application/http; msgtype=request",""),l.push("DELETE /api/"+(t.dataSource.removeUrl||t.dataSource.crudUrl||n.url)+(("number"==typeof(T=ae.getObject(x=n.key,(S=i.deletedRecords)[I=g]))||ae.parse.isGuid(T)?"/"+T:T instanceof Date?"/"+S[I][x].toJSON():"/'"+T+"'")+" HTTP/1.1")),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",y?JSON.stringify(y):"")})};for(d=0,p=i.deletedRecords.length;d<p;d++)f(d);return l.push("--"+o+"--",""),{type:"POST",url:a,contentType:"multipart/mixed; boundary="+o,data:l.join("\r\n")}},e.prototype.beforeSend=function(t,i,n){i.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},e.prototype.processResponse=function(t,i,n,r,o,a){var h=o&&o.pvtData,d=null,p={};if(o&&"post"!==o.type.toLowerCase()){var u=r&&o.getResponseHeader("DataServiceVersion"),f=u&&parseInt(u,10)||2;n&&n.isCountRequired&&(ae.isNull(t.Count)||(d=t.Count)),f<3&&t.Items&&(t=t.Items),p.count=d,p.result=t,this.getAggregateResult(h,t,p,null,n)}return p.result=p.result||t,ae.isNull(d)?p.result:{result:p.result,count:p.count,aggregates:p.aggregates}},e}(Tm),o9=function(s){function e(){var t=s.call(this)||this;return ke("beforeSend",sa.prototype.beforeSend,t),t}return sd(e,s),e.prototype.insert=function(t,i,n,r,o){return this.pvt.position=o,this.updateType="add",{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{value:i,table:n,action:"insert"},ae.getAddParams(this,t,r)))}},e.prototype.remove=function(t,i,n,r,o){return s.prototype.remove.call(this,t,i,n),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{key:n,keyColumn:i,table:r,action:"remove"},ae.getAddParams(this,t,o)))}},e.prototype.update=function(t,i,n,r,o){return this.updateType="update",this.updateKey=i,{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{value:n,action:"update",keyColumn:i,key:n[i],table:r},ae.getAddParams(this,t,o)))}},e.prototype.processResponse=function(t,i,n,r,o,a,l){var h;if(t="batch"===(o?JSON.parse(o.data):t).action?ae.parse.parseJson(t):t,"add"===this.updateType&&s.prototype.insert.call(this,i,t,null,null,this.pvt.position),"update"===this.updateType&&s.prototype.update.call(this,i,this.updateKey,t),this.updateType=void 0,t.added)for(h=0;h<t.added.length;h++)s.prototype.insert.call(this,i,t.added[h]);if(t.changed)for(h=0;h<t.changed.length;h++)s.prototype.update.call(this,i,l.key,t.changed[h]);if(t.deleted)for(h=0;h<t.deleted.length;h++)s.prototype.remove.call(this,i,l.key,t.deleted[h]);return t},e.prototype.batchRequest=function(t,i,n,r,o){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(Q({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n.url,key:n.key},ae.getAddParams(this,t,r)))}},e.prototype.addParams=function(t){(new sa).addParams(t)},e}(pI),Uge=function(s){function e(t){var i=s.call(this)||this;return i.options=Q({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),Q(i.options,t||{}),i}return sd(e,s),e.prototype.getModuleName=function(){return"CustomDataAdaptor"},e}(sa),Gge=function(s){function e(t,i,n){var r=s.call(this)||this;r.isCrudAction=!1,r.isInsertAction=!1,c(t)||(r.cacheAdaptor=t),r.pageSize=n,r.guidId=ae.getGuid("cacheAdaptor"),window.localStorage.setItem(r.guidId,JSON.stringify({keys:[],results:[]}));var a=r.guidId;return c(i)||setInterval(function(){for(var l=ae.parse.parseJson(window.localStorage.getItem(a)),h=[],d=0;d<l.results.length;d++){var p=+new Date,u=+new Date(l.results[d].timeStamp);l.results[d].timeStamp=p-u,p-u>i&&h.push(d)}for(d=0;d<h.length;d++)l.results.splice(h[d],1),l.keys.splice(h[d],1);window.localStorage.removeItem(a),window.localStorage.setItem(a,JSON.stringify(l))},i),r}return sd(e,s),e.prototype.generateKey=function(t,i){var n=this.getQueryRequest(i),r=Me.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=t,a="onPage";a in r&&(o+=r[a].pageIndex),n.sorts.forEach(function(u){o+=u.e.direction+u.e.fieldName}),n.groups.forEach(function(u){o+=u.e.fieldName}),n.searches.forEach(function(u){o+=u.e.searchKey});for(var l=0;l<n.filters.length;l++){var h=n.filters[l];if(h.e.isComplex){var d=i.clone();d.queries=[];for(var p=0;p<h.e.predicates.length;p++)d.queries.push({fn:"onWhere",e:h.e.predicates[p],filter:i.queries.filter});o+=h.e.condition+this.generateKey(t,d)}else o+=h.e.field+h.e.operator+h.e.value}return o},e.prototype.processQuery=function(t,i,n){var r=this.generateKey(t.dataSource.url,i),o=ae.parse.parseJson(window.localStorage.getItem(this.guidId)),a=o?o.results[o.keys.indexOf(r)]:null;return null==a||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):a},e.prototype.processResponse=function(t,i,n,r,o,a){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&ae.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(t,i,n,r,o,a);t=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=n?this.generateKey(i.dataSource.url,n):i.dataSource.url,h={},d=(h=ae.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(l);for(-1!==d&&(h.results.splice(d,1),h.keys.splice(d,1)),h.results[h.keys.push(l)-1]={keys:l,result:t.result,timeStamp:new Date,count:t.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),t},e.prototype.beforeSend=function(t,i,n){!c(this.cacheAdaptor.options.batch)&&ae.endsWith(n.url,this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase()&&i.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),t.dataSource.crossDomain||i.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},e.prototype.update=function(t,i,n,r){return this.isCrudAction=!0,this.cacheAdaptor.update(t,i,n,r)},e.prototype.insert=function(t,i,n){return this.isInsertAction=!0,this.cacheAdaptor.insert(t,i,n)},e.prototype.remove=function(t,i,n,r){return this.isCrudAction=!0,this.cacheAdaptor.remove(t,i,n,r)},e.prototype.batchRequest=function(t,i,n){return this.cacheAdaptor.batchRequest(t,i,n)},e}(sa),he=function(){function s(e,t,i){var r,n=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isInitialLoad=!0,!e&&!this.dataSource&&(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?r={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),e.enablePersistence||(e.enablePersistence=!1),e.id||(e.id=""),e.ignoreOnPersist||(e.ignoreOnPersist=[]),r={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof o9||e.adaptor instanceof Uge||e.url),requiresFormat:e.requiresFormat,enablePersistence:e.enablePersistence,id:e.id,ignoreOnPersist:e.ignoreOnPersist}):ae.throwError("DataManager: Invalid arguments"),void 0===r.requiresFormat&&!ae.isCors()&&(r.requiresFormat=!!c(r.crossDomain)||r.crossDomain),void 0===r.dataType&&(r.dataType="json"),this.dataSource=r,this.defaultQuery=t,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),r.url&&r.offline&&!r.json.length?(this.isDataAvailable=!1,this.adaptor=i||new Tm,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new Me),this.ready.then(function(o){n.dataSource.offline=!0,n.isDataAvailable=!0,r.json=o.result,n.adaptor=new pI})):this.adaptor=r.offline?new pI:new Tm,!r.jsonp&&this.adaptor instanceof Tm&&(r.jsonp="callback"),this.adaptor=i||this.adaptor,r.enableCaching&&(this.adaptor=new Gge(this.adaptor,r.timeTillExpiration,r.cachingPageSize)),this}return s.prototype.getPersistedData=function(e){var t=localStorage.getItem(e||this.dataSource.id);return JSON.parse(t)},s.prototype.setPersistData=function(e,t,i){localStorage.setItem(t||this.dataSource.id,JSON.stringify(i||this.persistQuery))},s.prototype.setPersistQuery=function(e){var t=this,i=this.getPersistedData();if(this.isInitialLoad&&i&&Object.keys(i).length){this.persistQuery=i,this.persistQuery.queries=this.persistQuery.queries.filter(function(r){if(t.dataSource.ignoreOnPersist&&t.dataSource.ignoreOnPersist.length&&r.fn&&t.dataSource.ignoreOnPersist.some(function(l){return r.fn===l}))return!1;if("onWhere"===r.fn){var o=r.e;if(o&&o.isComplex&&o.predicates instanceof Array){var a=o.predicates.map(function(l){return new Et(l.field,l.operator,l.value,l.ignoreCase,l.ignoreAccent,l.matchCase)});r.e=new Et(a[0],o.condition,a.slice(1))}}return!0});var n=Q(new Me,this.persistQuery);return this.isInitialLoad=!1,n}return this.persistQuery=e,this.isInitialLoad=!1,e},s.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},s.prototype.executeLocal=function(e){!this.defaultQuery&&!(e instanceof Me)&&ae.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||ae.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(e=this.setPersistQuery(e));var t=this.adaptor.processQuery(this,e=e||this.defaultQuery);if(e.subQuery){var i=e.subQuery.fromTable,n=e.subQuery.lookups,r=e.isCountRequired?t.result:t;n&&n instanceof Array&&ae.buildHierarchy(e.subQuery.fKey,i,r,n,e.subQuery.key);for(var o=0;o<r.length;o++)r[o][i]instanceof Array&&(r[o]=Q({},{},r[o]),r[o][i]=this.adaptor.processResponse(e.subQuery.using(new s(r[o][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)},s.prototype.executeQuery=function(e,t,i,n){var r=this,o="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(e=this.setPersistQuery(e)),"function"==typeof e&&(n=i,i=t,t=e,e=null),e||(e=this.defaultQuery),e instanceof Me||ae.throwError("DataManager - executeQuery() : A query is required to execute");var a=new po,l={query:e};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!c(this.adaptor[o])||this.isCustomDataAdaptor(this.adaptor)){var h=this.adaptor.processQuery(this,e);c(this.adaptor[o])?!c(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,e)):(l=s.getDeferedArgs(e,h,l),a.resolve(l)):this.adaptor[o](h,a,l,e)}else s.nextTick(function(){var d=r.executeLocal(e);l=s.getDeferedArgs(e,d,l),a.resolve(l)});return(t||i)&&a.promise.then(t,i),n&&a.promise.then(n,n),a.promise},s.getDeferedArgs=function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i},s.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},s.prototype.extendRequest=function(e,t,i){return Q({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)},s.prototype.makeRequest=function(e,t,i,n){var r=this,o=!!n.subQuerySelector,a=function(y){i.error=y,t.reject(i)},l=function(y,b,w,S,I,x,T){i.xhr=w,i.count=b?parseInt(b.toString(),10):0,i.result=y,i.request=S,i.aggregates=x,i.actual=I,i.virtualSelectRecords=T,t.resolve(i)},h=function(y,b){var w=new po,S={parent:i};n.subQuery.isChild=!0;var I=r.adaptor.processQuery(r,n.subQuery,y?r.adaptor.processResponse(y):b),x=r.makeRequest(I,w,S,n.subQuery);return o||w.then(function(T){y&&(ae.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,y,T,n.subQuery.key),l(y,T.count,T.xhr))},a),x},p=this.extendRequest(e,function(y,b){if(r.isGraphQLAdaptor(r.adaptor)&&!c(y.errors))return a(y.errors);r.isCustomDataAdaptor(r.adaptor)&&(b=Q({},r.ajaxReqOption,b)),-1===b.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&r.dateParse&&(y=ae.parse.parseJson(y));var w=r.adaptor.processResponse(y,r,n,b.httpRequest,b),S=0,I=null,T=y.virtualSelectRecords;n.isCountRequired&&(S=w.count,I=w.aggregates,w=w.result),n.subQuery?o||h(w,b):l(w,S,b.httpRequest,b.type,y,I,T)},a);if(this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=p,this.adaptor.options.getData({data:p.data,onSuccess:p.onSuccess,onFailure:p.onFailure});else{var u=new bl(p);u.beforeSend=function(){r.beforeSend(u.httpRequest,u)},(p=u.send()).catch(function(y){return!0}),this.requests.push(u)}if(o){var m=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});m&&m.length?Promise.all([p,h(null,m)]).then(function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var w=y[0],S=r.adaptor.processResponse(w[0],r,n,r.requests[0].httpRequest,r.requests[0]),I=0;n.isCountRequired&&(I=S.count,S=S.result);var x=r.adaptor.processResponse(w[1],r,n.subQuery,r.requests[1].httpRequest,r.requests[1]);I=0,n.subQuery.isCountRequired&&(I=x.count,x=x.result),ae.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,S,x,n.subQuery.key),o=!1,l(S,I,r.requests[0].httpRequest)}):o=!1}return p},s.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var n,i=this.dataSource.headers,r=0;i&&r<i.length;r++){n=[];for(var a=0,l=Object.keys(i[r]);a<l.length;a++){var h=l[a];n.push(h),e.setRequestHeader(h,i[r][h])}}},s.prototype.saveChanges=function(e,t,i,n,r){var o=this;i instanceof Me&&(n=i,i=null);var a={url:i,key:t||this.dataSource.key},l=this.adaptor.batchRequest(this,e,a,n||new Me,r),h="doAjaxRequest";if(this.dataSource.offline)return l;if(c(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(l,this.adaptor.options.batchUpdate);var d=new po,p=new bl(l);return p.beforeSend=function(){o.beforeSend(p.httpRequest,p)},p.onSuccess=function(u,f){o.isGraphQLAdaptor(o.adaptor)&&(c(u.errors)||p.onFailure(JSON.stringify(u.errors))),d.resolve(o.adaptor.processResponse(u,o,null,f.httpRequest,f,e,a))},p.onFailure=function(u){d.reject([{error:u}])},p.send().catch(function(u){return!0}),d.promise}return this.adaptor[h](l)},s.prototype.insert=function(e,t,i,n){t instanceof Me&&(i=t,t=null);var r=this.adaptor.insert(this,e,t,i,n),o="doAjaxRequest";return this.dataSource.offline?r:c(this.adaptor[o])?this.doAjaxRequest(r,this.adaptor.options.addRecord):this.adaptor[o](r)},s.prototype.remove=function(e,t,i,n){"object"==typeof t&&(t=ae.getObject(e,t)),i instanceof Me&&(n=i,i=null);var r=this.adaptor.remove(this,e,t,i,n),o="doAjaxRequest";return this.dataSource.offline?r:c(this.adaptor[o])?this.doAjaxRequest(r,this.adaptor.options.deleteRecord):this.adaptor[o](r)},s.prototype.update=function(e,t,i,n,r){i instanceof Me&&(n=i,i=null);var o=this.adaptor.update(this,e,t,i,n,r),a="doAjaxRequest";return this.dataSource.offline?o:c(this.adaptor[a])?this.doAjaxRequest(o,this.adaptor.options.updateRecord):this.adaptor[a](o)},s.prototype.isCustomDataAdaptor=function(e){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},s.prototype.isGraphQLAdaptor=function(e){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},s.prototype.successFunc=function(e,t){if(this.isGraphQLAdaptor(this.adaptor)){var i=JSON.parse(e);c(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(t=Q({},this.ajaxReqOption,t));try{ae.parse.parseJson(e)}catch{e=[]}e=this.adaptor.processResponse(ae.parse.parseJson(e),this,null,t.httpRequest,t),this.ajaxDeffered.resolve(e)},s.prototype.failureFunc=function(e){this.ajaxDeffered.reject([{error:e}])},s.prototype.doAjaxRequest=function(e,t){var i=this;if(e=Q({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.ajaxDeffered=new po,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var n=new bl(e);n.beforeSend=function(){i.beforeSend(n.httpRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch(function(r){return!0})}return this.ajaxDeffered.promise},s.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},s}(),po=function(){return function s(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),ht={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function Ts(s,e){var t={};if(c(s)||"string"==typeof s||"number"==typeof s||!c(s.isHeader))return s;for(var i=0,n=Object.keys(e);i<n.length;i++){var o=e[""+n[i]],a=c(o)||"string"!=typeof o?void 0:R(o,s);c(a)||(t[""+o]=a)}return t}function cI(s){if(s)try{return"function"!=typeof s&&document.querySelector(s)?qe(document.querySelector(s).innerHTML.trim()):qe(s)}catch{return qe(s)}}!function(s){s.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var e={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},t={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:s.defaultMappedFields,ariaAttributes:e,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(B,q,W,j,G){return O(B,r(B,q,W,j,G),null,j)}function r(B,q,W,j,G){var Y=[],U=Q({},t,j);ht=T(U.moduleName);for(var J=S(),$=0;$<q.length;$++)if(!c(q[$])){var ye;U.itemCreating&&"function"==typeof U.itemCreating&&U.itemCreating({dataSource:q,curData:q[$],text:q[$],options:U}),ye=W?x(B,q[$],void 0,null,null,[],null,J,$,j):N(B,q[$],void 0,null,null,j,G),U.itemCreated&&"function"==typeof U.itemCreated&&U.itemCreated({dataSource:q,curData:q[$],text:q[$],item:ye,options:U}),Y.push(ye)}return Y}function o(B,q,W,j,G,Y){var U=Q({},t,W);ht=T(U.moduleName);var ye,J=!Y||"listview"!==Y.getModuleName()&&"multiselect"!==Y.getModuleName()?Q({},s.defaultMappedFields,U.fields):U.fields,$=Q({},e,U.ariaAttributes),fe=[];j&&($.level=j);var Te,Ne,ve=[];q&&q.length&&!c(g(q).item)&&!g(q).item.hasOwnProperty(J.id)&&(ye=S());for(var Ue=0;Ue<q.length;Ue++){var Pe=Ts(q[Ue],J);if(!c(q[Ue])){U.itemCreating&&"function"==typeof U.itemCreating&&U.itemCreating({dataSource:q,curData:q[Ue],text:Pe[J.text],options:U,fields:J});var Ye=q[Ue];U.itemCreating&&"function"==typeof U.itemCreating&&(Pe=Ts(q[Ue],J)),Pe.hasOwnProperty(J.id)&&!c(Pe[J.id])&&(ye=Pe[J.id]);var dt=[];if(U.showCheckBox&&(U.itemNavigable&&(Pe[J.url]||Pe[J.urlAttributes])?fe.push(B("input",{className:ht.check,attrs:{type:"checkbox"}})):dt.push(B("input",{className:ht.check,attrs:{type:"checkbox"}}))),!0===G)U.showIcon&&Pe.hasOwnProperty(J.iconCss)&&!c(Pe[J.iconCss])&&dt.push(B("span",{className:ht.icon+" "+Pe[J.iconCss]})),Ne=(Te=x(B,Ye,Pe,J,U.itemClass,dt,!(!Ye.hasOwnProperty("isHeader")||!Ye.isHeader),ye,Ue,W)).querySelector("."+ht.anchorWrap),U.itemNavigable&&fe.length&&Ii(fe,Te.firstElementChild);else{if((Te=N(B,Ye,Pe,J,U.itemClass,W,Y)).classList.add(ht.level+"-"+$.level),Te.setAttribute("aria-level",$.level.toString()),"presentation"==$.groupItemRole&&Te.removeAttribute("aria-level"),Ne=Te.querySelector("."+ht.anchorWrap),Pe.hasOwnProperty(J.tooltip)&&Te.setAttribute("title",Pe[J.tooltip]),Pe.hasOwnProperty(J.htmlAttributes)&&Pe[J.htmlAttributes]&&m(Te,Pe[J.htmlAttributes]),Pe.hasOwnProperty(J.enabled)&&!1===Pe[J.enabled]&&Te.classList.add(ht.disabled),Pe.hasOwnProperty(J.isVisible)&&!1===Pe[J.isVisible]&&(Te.style.display="none"),Pe.hasOwnProperty(J.imageUrl)&&!c(Pe[J.imageUrl])&&!U.template){var Z={src:Pe[J.imageUrl]};zn(Z,Pe[J.imageAttributes]);var te=B("img",{className:ht.image,attrs:Z});Ne?Ne.insertAdjacentElement("afterbegin",te):Ii([te],Te.firstElementChild)}if(U.showIcon&&Pe.hasOwnProperty(J.iconCss)&&!c(Pe[J.iconCss])&&!U.template){var we=B("div",{className:ht.icon+" "+Pe[J.iconCss]});Ne?Ne.insertAdjacentElement("afterbegin",we):Ii([we],Te.firstElementChild)}dt.length&&Ii(dt,Te.firstElementChild),U.itemNavigable&&fe.length&&Ii(fe,Te.firstElementChild),I(B,Pe,J,0,U,Te,$.level)}Ne&&M([Te],[ht.navigable]),U.itemCreated&&"function"==typeof U.itemCreated&&U.itemCreated({dataSource:q,curData:q[Ue],text:Pe[J.text],item:Te,options:U,fields:J}),fe=[],ve.push(Te)}}return ve}function a(B,q,W,j,G,Y){var U=Q({},t,W);return O(B,o(B,q,W,j,G,Y),U.listClass,W)}function h(B,q){if(q&&B)return Array.prototype.slice.call(q).indexOf(B)}function p(B,q,W){if(void 0===W&&(W=new Me),"Ascending"===B)W.sortBy(q,"ascending",!0);else if("Descending"===B)W.sortBy(q,"descending",!0);else for(var j=0;j<W.queries.length;j++)"onSortBy"===W.queries[j].fn&&W.queries.splice(j,1);return W}function u(B,q){return new he(B).executeLocal(q)}function g(B){for(var W=0;W<B.length;W++)if(!c(B[W]))return{typeof:typeof B[W],item:B[W]};return{typeof:null,item:null}}function m(B,q){var W={};zn(W,q),W.class&&(M([B],W.class.split(" ")),delete W.class),re(B,W)}function y(B){for(var q={},W=B.attributes,j=0;j<W.length;j++)q[W[j].nodeName]=W[j].nodeValue;return q}function S(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function I(B,q,W,j,G,Y,U){var J=q[W.child]||[],$=q[W.hasChildren];if(J.length&&($=!0,Y.classList.add(ht.hasChild),G.processSubChild)){var ye=a(B,J,G,++U);Y.appendChild(ye)}G.expandCollapse&&$&&!G.template&&(Y.firstElementChild.classList.add(ht.iconWrapper),("Left"===G.expandIconPosition?Ii:Le)([B("div",{className:"e-icons "+G.expandIconClass})],Y.querySelector("."+ht.textContent)))}function x(B,q,W,j,G,Y,U,J,$,ye){var Ue,Pe,fe=Q({},t,ye),ve=Q({},e,fe.ariaAttributes),Te=q,Ne=q;"string"!=typeof q&&"number"!=typeof q&&"boolean"!=typeof q&&(Ue=q,Te="boolean"==typeof W[j.text]||"number"==typeof W[j.text]?W[j.text]:W[j.text]||"",Ne=W[j.value]),Pe=c(Ue)||c(W[j.id])||""===W[j.id]?J+"-"+$:J;var rt=B("li",{className:(!0===U?ht.group:ht.li)+" "+(c(G)?"":G),id:Pe,attrs:""!==ve.groupItemRole&&""!==ve.itemRole?{role:!0===U?ve.groupItemRole:ve.itemRole}:{}});return Ue&&W.hasOwnProperty(j.enabled)&&"false"===W[j.enabled].toString()&&rt.classList.add(ht.disabled),U?rt.innerText=Te:(rt.setAttribute("data-value",c(Ne)?"null":Ne),rt.setAttribute("role","option"),Ue&&W.hasOwnProperty(j.htmlAttributes)&&W[j.htmlAttributes]&&m(rt,W[j.htmlAttributes]),Y.length&&!fe.itemNavigable&&Le(Y,rt),Ue&&(W[j.url]||W[j.urlAttributes]&&W[j.urlAttributes].href)?rt.appendChild(L(B,Ue,j,Te,Y,fe.itemNavigable)):(Y.length&&fe.itemNavigable&&Le(Y,rt),rt.appendChild(document.createTextNode(Te)))),rt}function T(B){return{li:"e-"+B+"-item",ul:"e-"+B+"-parent e-ul",group:"e-"+B+"-group-item",icon:"e-"+B+"-icon",text:"e-"+B+"-text",check:"e-"+B+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+B+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+B+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function L(B,q,W,j,G,Y){var $,U=Ts(q,W),J={href:U[W.url]};if(U.hasOwnProperty(W.urlAttributes)&&U[W.urlAttributes]&&(zn(J,U[W.urlAttributes]),J.href=U[W.url]?U[W.url]:U[W.urlAttributes].href),Y){$=B("a",{className:ht.text+" "+ht.url});var ye=B("div",{className:ht.anchorWrap});G&&G.length&&Le(G,ye),ye.appendChild(document.createTextNode(j)),Le([ye],$)}else $=B("a",{className:ht.text+" "+ht.url,innerHTML:j});return m($,J),$}function N(B,q,W,j,G,Y,U){var fe,ve,Te,J=Q({},t,Y),$=Q({},e,J.ariaAttributes),ye=q;"string"!=typeof q&&"number"!=typeof q&&(Te=q,ye=W[j.text]||"",fe=c(W._id)?W[j.id]:W._id,ve=!(!q.hasOwnProperty("isHeader")||!q.isHeader));var Ne=B("li",{className:(!0===ve?ht.group:ht.li)+" "+(c(G)?"":G),attrs:""!==$.groupItemRole&&""!==$.itemRole?{role:!0===ve?$.groupItemRole:$.itemRole}:{}});if(c(fe)?Ne.setAttribute("data-uid",S()):Ne.setAttribute("data-uid",fe),ve&&Y&&Y.groupTemplate){var Ue=cI(Y.groupTemplate);U&&"listview"!==U.getModuleName()?(Pe=Ue(q,U,"groupTemplate",J.groupTemplateID,!!J.isStringTemplate,null,Ne))&&Le(Pe,Ne):Le(Ue(q,U,"groupTemplate",J.groupTemplateID,!!J.isStringTemplate),Ne)}else if(!ve&&Y&&Y.template){var Pe;Ue=cI(Y.template),U&&"listview"!==U.getModuleName()?(Pe=Ue(q,U,"template",J.templateID,!!J.isStringTemplate,null,Ne))&&Le(Pe,Ne):Le(Ue(q,U,"template",J.templateID,!!J.isStringTemplate),Ne)}else{var rt=B("div",{className:ht.textContent,attrs:""!==$.wrapperRole?{role:$.wrapperRole}:{}});if(Te&&(W[j.url]||W[j.urlAttributes]&&W[j.urlAttributes].href))rt.appendChild(L(B,Te,j,ye,null,J.itemNavigable));else{var Ye=B("span",{className:ht.text,attrs:""!==$.itemText?{role:$.itemText}:{}});Y&&Y.enableHtmlSanitizer?Ye.innerText=ye:Ye.innerHTML=ye,rt.appendChild(Ye)}Ne.appendChild(rt)}return Ne}function O(B,q,W,j){var G=Q({},t,j),Y=Q({},e,G.ariaAttributes),U=B("ul",{className:(ht=T(G.moduleName)).ul+" "+(c(W)?"":W),attrs:""!==Y.listRole?{role:Y.listRole}:{}});return Le(q,U),U}s.createList=function i(B,q,W,j,G){var Y=Q({},t,W),U=Q({},e,Y.ariaAttributes),J=g(q).typeof;return"string"===J||"number"===J?n(B,q,j,W,G):a(B,q,W,U.level,j,G)},s.createListFromArray=n,s.createListItemFromArray=r,s.createListItemFromJson=o,s.createListFromJson=a,s.getSiblingLI=function l(B,q,W){if(ht=T(t.moduleName),B&&B.length){var j,G,Y=Array.prototype.slice.call(B);for(j=Y[(G=q?h(q,Y):!0===W?Y.length:-1)+(!0===W?-1:1)];j&&(!wn(j)||j.classList.contains(ht.disabled));)j=Y[G+=!0===W?-1:1];return j}},s.indexOf=h,s.groupDataSource=function d(B,q,W){void 0===W&&(W="None");var j=Q({},s.defaultMappedFields,q),G=(new Me).group(j.groupBy),Y=u(B,G=p(W,"key",G));B=[];for(var U=0;U<Y.length;U++){var J=Y[U].items,$={};$[j.text]=Y[U].key,$.isHeader=!0;var fe=j.text;"id"===fe&&($[fe="text"]=Y[U].key),$._id="group-list-item-"+(Y[U].key?Y[U].key.toString().trim():"undefined"),$.items=J,B.push($);for(var ve=0;ve<J.length;ve++)B.push(J[ve])}return B},s.addSorting=p,s.getDataSource=u,s.createJsonFromElement=function f(B,q){var W=Q({},t,q),j=Q({},s.defaultMappedFields,W.fields),G=B.cloneNode(!0),Y=[];G.classList.add("json-parent");var U=G.querySelectorAll(".json-parent>li");G.classList.remove("json-parent");for(var J=0;J<U.length;J++){for(var $=U[J],ye=$.querySelector("a"),fe=$.querySelector("ul"),ve={},Te=ye?ye.childNodes:$.childNodes,Ne=Object.keys(Te),Ue=0;Ue<Te.length;Ue++)Te[Number(Ne[Ue])].hasChildNodes()||(ve[j.text]=Te[Number(Ne[Ue])].textContent);var Pe=y($);Pe.id?(ve[j.id]=Pe.id,delete Pe.id):ve[j.id]=S(),Object.keys(Pe).length&&(ve[j.htmlAttributes]=Pe),ye&&(Pe=y(ye),Object.keys(Pe).length&&(ve[j.urlAttributes]=Pe)),fe&&(ve[j.child]=f(fe,q)),Y.push(ve)}return Y},s.renderContentTemplate=function b(B,q,W,j,G,Y){for(var ve,U=B("ul",{className:(ht=T(t.moduleName)).ul,attrs:{role:"presentation"}}),J=Q({},t,G),$=Q({},s.defaultMappedFields,j),ye=cI(q),fe=[],Te=S(),Ne=0;Ne<W.length;Ne++){var Ue=Ts(W[Ne],$),Pe=W[Ne],rt=Pe.isHeader;ve="string"==typeof W[Ne]||"number"==typeof W[Ne]?Pe:Ue[$.value],J.itemCreating&&"function"==typeof J.itemCreating&&J.itemCreating({dataSource:W,curData:Pe,text:ve,options:J,fields:$}),J.itemCreating&&"function"==typeof J.itemCreating&&(Ue=Ts(W[Ne],$),ve="string"==typeof W[Ne]||"number"==typeof W[Ne]?Pe:Ue[$.value]);var dt=B("li",{id:Te+"-"+Ne,className:rt?ht.group:ht.li,attrs:{role:"presentation"}});if(rt)dt.innerText="string"==typeof W[Ne]||"number"==typeof W[Ne]?Pe:Ue[$.text];else{var Z=rt?J.groupTemplateID:J.templateID;if(rt)Y&&"listview"!=Y.getModuleName()?(te=ye(Pe,Y,"headerTemplate",Z,!!J.isStringTemplate,null,dt))&&Le(te,dt):Le(ye(Pe,Y,"headerTemplate",Z,!!J.isStringTemplate),dt);else if(Y&&"listview"!==Y.getModuleName()){var te;(te=ye(Pe,Y,"template",Z,!!J.isStringTemplate,null,dt))&&Le(te,dt)}else Le(ye(Pe,Y,"template",Z,!!J.isStringTemplate),dt);dt.setAttribute("data-value",c(ve)?"null":ve),dt.setAttribute("role","option")}J.itemCreated&&"function"==typeof J.itemCreated&&J.itemCreated({dataSource:W,curData:Pe,text:ve,item:dt,options:J,fields:$}),fe.push(dt)}return Le(fe,U),U},s.renderGroupTemplate=function w(B,q,W,j,G,Y){for(var U=cI(B),J=Q({},s.defaultMappedFields,W),$=Q({},t,G),ye=J.groupBy,fe=0,ve=j;fe<ve.length;fe++){var Te=ve[fe],Ne={};if(Ne[""+ye]=Te.textContent,Te.innerHTML="",Y&&"listview"!==Y.getModuleName()){var Ue=U(Ne,Y,"groupTemplate",$.groupTemplateID,!!$.isStringTemplate,null,Te);Ue&&Le(Ue,Te)}else Le(U(Ne,Y,"groupTemplate",$.groupTemplateID,!!$.isStringTemplate),Te)}return j},s.generateId=S,s.generateUL=O,s.generateIcon=function _(B,q,W,j){var G=Q({},t,j);return ht=T(G.moduleName),("Left"===G.expandIconPosition?Ii:Le)([B("div",{className:"e-icons "+G.expandIconClass+" "+(c(W)?"":W)})],q.querySelector("."+ht.textContent)),q}}(ot||(ot={}));var IP,a9=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),yi=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},l9={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},Yge={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},ne={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",container:"e-list-container",icon:"e-icons",backIcon:"e-icon-back",backButton:"e-back-button",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},h9="Template",d9="GroupTemplate",Zge=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return a9(e,s),yi([v("id")],e.prototype,"id",void 0),yi([v("text")],e.prototype,"text",void 0),yi([v("isChecked")],e.prototype,"isChecked",void 0),yi([v("isVisible")],e.prototype,"isVisible",void 0),yi([v("enabled")],e.prototype,"enabled",void 0),yi([v("iconCss")],e.prototype,"iconCss",void 0),yi([v("child")],e.prototype,"child",void 0),yi([v("tooltip")],e.prototype,"tooltip",void 0),yi([v("groupBy")],e.prototype,"groupBy",void 0),yi([v("text")],e.prototype,"sortBy",void 0),yi([v("htmlAttributes")],e.prototype,"htmlAttributes",void 0),yi([v("tableName")],e.prototype,"tableName",void 0),e}(ce),Kge=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.previousSelectedItems=[],n.hiddenItems=[],n.enabledItems=[],n.disabledItems=[],n}return a9(e,s),e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(i.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":c(this.contentContainer)||z(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"sortOrder":case"template":this.enableVirtualization||this.refresh();break;case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}},e.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&re(this.element,this.htmlAttributes)},e.prototype.setCSSClass=function(t){this.cssClass&&M([this.element],this.cssClass.split(" ").filter(function(i){return i})),t&&A([this.element],t.split(" ").filter(function(i){return i}))},e.prototype.setSize=function(){this.element.style.height=oe(this.height),this.element.style.width=oe(this.width),this.isWindow=!this.element.clientHeight},e.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},e.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.enableElement=function(t,i){i?t.classList.remove(ne.disable):t.classList.add(ne.disable)},e.prototype.header=function(t,i,n){if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:$t.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:ne.header});var r=this.createElement("span",{className:ne.headerText,innerHTML:this.headerTitle}),o=this.createElement("div",{className:ne.text,innerHTML:r.outerHTML}),a=this.createElement("div",{className:ne.icon+" "+ne.backIcon+" "+ne.backButton,attrs:{style:"display:none;"}});if(this.headerEle.appendChild(a),this.headerEle.appendChild(o),this.headerTemplate){var l=qe(this.headerTemplate),h=this.createElement("div",{className:ne.headerTemplateText}),d=l({},this,n,this.LISTVIEW_HEADERTEMPLATE_ID,null,null,this.headerEle);d&&Le(d,h),Le([h],this.headerEle),this.isReact&&this.renderReactTemplates()}this.headerTemplate&&this.headerTitle&&o.classList.add("header"),this.element.classList.add("e-has-header"),Ii([this.headerEle],this.element)}else this.headerEle&&(this.showHeader?(this.headerEle.style.display="",o=this.headerEle.querySelector("."+ne.headerText),a=this.headerEle.querySelector("."+ne.backIcon),this.enableHtmlSanitizer&&(t=$t.sanitize(t)),o.innerHTML=t,this.headerTemplate&&i&&(o.parentElement.classList.remove("header"),this.headerEle.querySelector("."+ne.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!i&&(o.parentElement.classList.add("header"),this.headerEle.querySelector("."+ne.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+ne.headerTemplateText).classList.add("header")),a.style.display=!0===i?"":"none"):this.headerEle.style.display="none")},e.prototype.switchView=function(t,i,n){var r=this;if(t&&i){var o=t.style.position,a="hidden"!==this.element.style.overflow?this.element.style.overflow:"";t.style.position="absolute",t.classList.add("e-view");var l=void 0,h=this.animation.duration;this.animation.effect?l=this.enableRtl?Yge[this.animation.effect]:l9[this.animation.effect]:(l=l9.SlideLeft,n=this.enableRtl,h=0),this.element.style.overflow="hidden",this.aniObj.animate(t,{name:!0===n?l[0]:l[1],duration:h,timingFunction:this.animation.easing,end:function(p){t.style.display="none",r.element.style.overflow=a,t.style.position=o,t.classList.remove("e-view")}}),i.style.display="",this.aniObj.animate(i,{name:!0===n?l[2]:l[3],duration:h,timingFunction:this.animation.easing,end:function(){r.trigger("actionComplete")}}),this.curUL=i}},e.prototype.preRender=function(){if(this.template)try{document.querySelectorAll(this.template).length&&this.setProperties({template:document.querySelector(this.template).innerHTML.trim()},!0)}catch{qe(this.template)}this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"listitem",listRole:"group",itemText:"",groupItemRole:"presentation",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:""+this.element.id+h9,groupTemplateID:""+this.element.id+d9,enableHtmlSanitizer:this.enableHtmlSanitizer},this.initialization()},e.prototype.initialization=function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=this.enablePersistence?this.selectedId:[],this.LISTVIEW_TEMPLATE_ID=""+this.element.id+h9,this.LISTVIEW_GROUPTEMPLATE_ID=""+this.element.id+d9,this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new Gi(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},e.prototype.renderCheckbox=function(t){var i=this;if(t.item.classList.contains(ne.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(t.item)){var r,n=void 0;(n=Ra(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:ne.listviewCheckbox})).setAttribute("role","checkbox");var o=n.querySelector("."+ne.checkboxIcon);t.item.classList.add(ne.itemCheckList),t.item.firstElementChild.classList.add(ne.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?(r=Ts(t.curData,this.listBaseOption.fields),this.enablePersistence&&!c(this.selectedId)?-1!=this.selectedId.findIndex(function(l){return l==r[i.listBaseOption.fields.id].toString()})&&this.checkInternally(t,n):r[this.listBaseOption.fields.isChecked]&&this.checkInternally(t,n)):("string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0])&&-1!==this.selectedData.indexOf(t.text)&&this.checkInternally(t,n),n.setAttribute("aria-checked",o.classList.contains(ne.checked)?"true":"false"),n.setAttribute("aria-label","checkbox"),"Left"===this.checkBoxPosition?(n.classList.add(ne.checkboxLeft),t.item.firstElementChild.classList.add(ne.checkboxLeft),t.item.firstElementChild.insertBefore(n,t.item.firstElementChild.childNodes[0])):(n.classList.add(ne.checkboxRight),t.item.firstElementChild.classList.add(ne.checkboxRight),t.item.firstElementChild.appendChild(n)),this.currentLiElements.push(t.item),this.virtualCheckBox="Left"===this.checkBoxPosition?t.item.firstElementChild.children[0]:t.item.firstElementChild.lastElementChild}},e.prototype.checkInternally=function(t,i){t.item.classList.add(ne.selected),i.querySelector("."+ne.checkboxIcon).classList.add(ne.checked),i.setAttribute("aria-checked","true")},e.prototype.checkItem=function(t){this.toggleCheckBase(t,!0)},e.prototype.toggleCheckBase=function(t,i){if(this.showCheckBox){var n=t;if(t instanceof Object&&t.constructor!==HTMLLIElement&&(n=this.getLiFromObjOrElement(t)),!c(n)){var r=n.querySelector("."+ne.checkboxIcon);!0===i?n.classList.add(ne.selected):n.classList.remove(ne.selected),!0===i?r.classList.add(ne.checked):r.classList.remove(ne.checked),r.parentElement.setAttribute("aria-checked",i?"true":"false")}this.setSelectedItemData(n),this.updateSelectedId()}},e.prototype.uncheckItem=function(t){this.toggleCheckBase(t,!1)},e.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},e.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},e.prototype.toggleAllCheckBase=function(t){if(this.showCheckBox){for(var i=0;i<this.liCollection.length;i++){var n=this.liCollection[i].querySelector("."+ne.checkboxIcon);n&&(t?n.classList.contains(ne.checked)||this.checkItem(this.liCollection[i]):n.classList.contains(ne.checked)&&this.uncheckItem(this.liCollection[i]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(t),this.updateSelectedId()}},e.prototype.setCheckbox=function(){if(this.showCheckBox)for(var t=Array.prototype.slice.call(this.element.querySelectorAll("."+ne.listItem)),i={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},n=0;n<t.length;n++)i.item=r=t[n],i.curData=this.getItemData(r),r.querySelector("."+ne.checkboxWrapper)&&this.removeElement(r.querySelector("."+ne.checkboxWrapper)),this.renderCheckbox(i),i.item.classList.contains(ne.selected)&&this.checkInternally(i,i.item.querySelector("."+ne.checkboxWrapper));else{for(t=Array.prototype.slice.call(this.element.querySelectorAll("."+ne.itemCheckList)),n=0;n<t.length;n++){var r;(r=t[n]).classList.remove(ne.selected),r.firstElementChild.classList.remove(ne.checkbox),this.removeElement(r.querySelector("."+ne.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(ne.selected)}},e.prototype.refreshItemHeight=function(){this.virtualizationModule&&this.virtualizationModule.refreshItemHeight()},e.prototype.clickHandler=function(t){var i=t.target;this.targetElement=i;var r,n=i.classList;if(n.contains(ne.backIcon)||n.contains(ne.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var o=k(i.parentNode,"."+ne.listItem);if(null===o&&(o=i),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(o))if(t.target.classList.contains(ne.checkboxIcon)){if(o.classList.add(ne.focused),c(o.querySelector("."+ne.checked))){var a={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:o};this.checkInternally(a,a.item.querySelector("."+ne.checkboxWrapper))}else this.uncheckItem(o),o.classList.add(ne.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(o,t),t){var l=this.selectEventData(o,t);zn(l,{isChecked:o.querySelector("."+ne.checkboxIcon).classList.contains(ne.checked)}),this.trigger("select",l)}}else o.classList.contains(ne.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(o),this.setSelectLI(o,t),o.classList.remove(ne.selected)):(this.setCheckboxLI(o,t),("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName)&&(i.classList.add("e-focused"),this.targetElement=i));else this.setSelectLI(o,t),("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName)&&(i.classList.add("e-focused"),this.targetElement=i);c(r=k(t.target,"li"))||r.classList.contains("e-has-child")&&!t.target.parentElement.classList.contains("e-listview-checkbox")&&r.classList.add(ne.disable)}this.updateSelectedId()},e.prototype.removeElement=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.hoverHandler=function(t){var i=k(t.target.parentNode,"."+ne.listItem);this.setHoverLI(i)},e.prototype.leaveHandler=function(t){this.removeHover()},e.prototype.homeKeyHandler=function(t,i){if(t.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var n=this.curUL.querySelectorAll("."+ne.listItem),r=this.curUL.querySelector("."+ne.focused)||this.curUL.querySelector("."+ne.selected);r&&(r.classList.remove(ne.focused),this.showCheckBox||r.classList.remove(ne.selected));var o=i?n.length-1:0;n[o].classList.contains(ne.hasChild)||this.showCheckBox?n[o].classList.add(ne.focused):this.setSelectLI(n[o],t),n[o]?this.element.setAttribute("aria-activedescendant",n[o].id.toString()):this.element.removeAttribute("aria-activedescendant")}},e.prototype.onArrowKeyDown=function(t,i){var n,r;return!c(this.curUL.querySelector("."+ne.hasChild))||this.showCheckBox?(r=this.curUL.querySelector("."+ne.focused)||this.curUL.querySelector("."+ne.selected),c(n=ot.getSiblingLI(this.curUL.querySelectorAll("."+ne.listItem),r,i))||(r&&(r.classList.remove(ne.focused),this.showCheckBox||r.classList.remove(ne.selected)),n.classList.contains(ne.hasChild)||this.showCheckBox?n.classList.add(ne.focused):this.setSelectLI(n,t))):(r=this.curUL.querySelector("."+ne.selected),n=ot.getSiblingLI(this.curUL.querySelectorAll("."+ne.listItem),r,i),this.setSelectLI(n,t)),n?this.element.setAttribute("aria-activedescendant",n.id.toString()):this.element.removeAttribute("aria-activedescendant"),n},e.prototype.arrowKeyHandler=function(t,i){var n=this;if(t.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var r=this.onArrowKeyDown(t,i),o=this.element.getBoundingClientRect().top,a=this.element.getBoundingClientRect().height,l=this.curUL.querySelector("."+ne.listItem).getBoundingClientRect(),h=void 0,d=void 0;if(this.fields.groupBy&&(d=this.curUL.querySelector("."+ne.groupListItem).getBoundingClientRect()),r){var p=r.getBoundingClientRect().top,u=r.getBoundingClientRect().height;if(i)(h=this.isWindow?p:p-o)<0&&(!0===this.isWindow?window.scroll(0,pageYOffset+h):this.element.scrollTop=this.element.scrollTop+h);else{var f=this.isWindow?window.innerHeight:a;(h=this.isWindow?p+u:p-o+u)>f&&(!0===this.isWindow?window.scroll(0,pageYOffset+(h-f)):this.element.scrollTop=this.element.scrollTop+(h-f))}}else if(this.enableVirtualization&&i&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){n.onArrowKeyDown(t,i),n.onUIScrolled=void 0},h=this.virtualizationModule.listItemHeight,!0===this.isWindow?window.scroll(0,pageYOffset-h):this.element.scrollTop=this.element.scrollTop-h;else if(i)if(this.showHeader&&this.headerEle){var g=d?d.top:l.top,m=this.headerEle.getBoundingClientRect();h=m.top<0?m.height-g:0,!0===this.isWindow?window.scroll(0,pageYOffset-h):this.element.scrollTop=0}else this.fields.groupBy&&(h=this.isWindow?d.top<0?d.top:0:o-l.top+d.height,!0===this.isWindow?window.scroll(0,pageYOffset+h):this.element.scrollTop=this.element.scrollTop-h)}},e.prototype.enterKeyHandler=function(t){if(Object.keys(this.dataSource).length&&this.curUL){var i=!c(this.curUL.querySelector("."+ne.hasChild)),n=this.curUL.querySelector("."+ne.focused);i&&n&&(n.classList.remove(ne.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(n),this.removeHover()),this.setSelectLI(n,t))}},e.prototype.spaceKeyHandler=function(t){if(t.preventDefault(),this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var i=this.curUL.querySelector("."+ne.focused),n=void 0,r=void 0;if(!c(i)&&c(i.querySelector("."+ne.checked))){var o={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:i};n=o.item.querySelector("."+ne.checkboxWrapper),this.checkInternally(o,n),r=n.querySelector("."+ne.checkboxIcon+"."+ne.icon)}else this.uncheckItem(i);var a=this.selectEventData(i,t);zn(a,{isChecked:!!r&&r.classList.contains(ne.checked)}),this.trigger("select",a),this.updateSelectedId()}},e.prototype.keyActionHandler=function(t){switch(t.keyCode){case 36:this.homeKeyHandler(t);break;case 35:this.homeKeyHandler(t,!0);break;case 40:this.arrowKeyHandler(t);break;case 38:this.arrowKeyHandler(t,!0);break;case 13:this.enterKeyHandler(t);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:(c(this.targetElement)||!this.targetElement.classList.contains("e-focused"))&&this.spaceKeyHandler(t)}},e.prototype.swipeActionHandler=function(t){"Right"===t.swipeDirection&&t.velocity>.5&&"touchend"===t.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},e.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+ne.focused);t&&(t.classList.remove(ne.focused),!this.showCheckBox&&!c(this.selectedLI)&&this.selectedLI.classList.add(ne.selected))}},e.prototype.wireEvents=function(){C.add(this.element,"keydown",this.keyActionHandler,this),C.add(this.element,"click",this.clickHandler,this),C.add(this.element,"mouseover",this.hoverHandler,this),C.add(this.element,"mouseout",this.leaveHandler,this),C.add(this.element,"focusout",this.focusout,this),this.touchModule=new hr(this.element,{swipe:this.swipeActionHandler.bind(this)})},e.prototype.unWireEvents=function(){C.remove(this.element,"click",this.clickHandler),C.remove(this.element,"mouseover",this.hoverHandler),C.remove(this.element,"mouseout",this.leaveHandler),C.remove(this.element,"mouseover",this.hoverHandler),C.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy(),this.touchModule=null},e.prototype.removeFocus=function(){for(var i=0,n=this.element.querySelectorAll("."+ne.focused);i<n.length;i++)n[i].classList.remove(ne.focused)},e.prototype.removeHover=function(){var t=this.element.querySelector("."+ne.hover);t&&t.classList.remove(ne.hover)},e.prototype.removeSelect=function(t){if(c(t))for(var n=0,r=this.element.querySelectorAll("."+ne.selected);n<r.length;n++){var o=r[n];this.showCheckBox&&o.querySelector("."+ne.checked)||o.classList.remove(ne.selected)}else t.classList.remove(ne.selected)},e.prototype.isValidLI=function(t){return t&&t.classList.contains(ne.listItem)&&!t.classList.contains(ne.groupListItem)&&!t.classList.contains(ne.disable)},e.prototype.setCheckboxLI=function(t,i){if(this.isValidLI(t)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+ne.focused)&&this.curUL.querySelector("."+ne.focused).classList.remove(ne.focused);var n=t.querySelector("textarea")||t.querySelector("input");t.classList.add(ne.focused),c(i)||i.target===n&&n.classList.add("e-focused");var r=t.querySelector("."+ne.checkboxWrapper),o=r.querySelector("."+ne.checkboxIcon+"."+ne.icon);this.removeHover(),o.classList.contains(ne.checked)?(o.classList.remove(ne.checked),t.classList.remove(ne.selected)):(o.classList.add(ne.checked),t.classList.add(ne.selected)),r.setAttribute("aria-checked",o.classList.contains(ne.checked)?"true":"false");var a=this.selectEventData(t,i);zn(a,{isChecked:o.classList.contains(ne.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(t,i),this.trigger("select",a),this.setSelectedItemData(t),this.renderSubList(t)}},e.prototype.selectEventData=function(t,i){var n=this.getItemData(t),r=Ts(n,this.listBaseOption.fields),a={};return zn(a,!c(n)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:t,text:t&&t.innerText.trim(),data:this.dataSource}:{item:t,text:r&&r[this.listBaseOption.fields.text],data:n}),i&&zn(a,{isInteracted:!0,event:i,cancel:!1,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,t)}),a},e.prototype.setSelectedItemData=function(t){var i=this.getItemData(t),n=Ts(i,this.listBaseOption.fields);this.selectedItems=c(i)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?{item:t,text:n&&n[this.listBaseOption.fields.text],data:i}:{item:t,text:t&&t.innerText.trim(),data:this.dataSource}},e.prototype.setSelectLI=function(t,i){var n=this;if(this.isValidLI(t)&&!t.classList.contains(ne.selected)&&this.enable){this.showCheckBox||this.removeSelect(),t.classList.add(ne.selected),this.removeHover(),this.setSelectedItemData(t),this.enableVirtualization&&this.virtualizationModule.setSelectLI(t,i);var r=this.selectEventData(t,i);this.trigger("select",r,function(o){o.cancel||(n.selectedLI=t,n.renderSubList(t))})}},e.prototype.setHoverLI=function(t){if(this.isValidLI(t)&&!t.classList.contains(ne.hover)&&this.enable){var i=this.element.querySelectorAll("."+ne.hover);i&&i.length&&A(i,ne.hover),(!t.classList.contains(ne.selected)||this.showCheckBox)&&t.classList.add(ne.hover)}},e.prototype.getSubDS=function(){var t=this.curDSLevel;if(t.length){for(var i=this.localData,n=0,r=t;n<r.length;n++){var a={};a[this.fields.id]=r[n],this.curDSJSON=this.findItemFromDS(i,a);var l=Ts(this.curDSJSON,this.listBaseOption.fields);i=this.curDSJSON?l[this.fields.child]:i}return i}return this.localData},e.prototype.getItemData=function(t){var r,i=this.dataSource instanceof he?this.localData:this.dataSource,n=this.getElementUID(t);return r=c(this.element.querySelector("."+ne.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(r,n)},e.prototype.findItemFromDS=function(t,i,n){var o,r=this;return t&&t.length&&i?t.some(function(a){var l=Ts(a,r.listBaseOption.fields);if(!i[r.fields.id]&&!i[r.fields.text]||i[r.fields.id]&&(!c(l[r.fields.id])&&l[r.fields.id].toString())!==i[r.fields.id].toString()||i[r.fields.text]&&l[r.fields.text]!==i[r.fields.text])if("object"!=typeof a&&-1!==t.indexOf(a))o=n?t:a;else if(!c(i[r.fields.id])&&c(l[r.fields.id])){var h=r.element.querySelector('[data-uid="'+i[r.fields.id]+'"]');h&&h.innerText.trim()===l[r.fields.text]&&(o=a)}else l.hasOwnProperty(r.fields.child)&&l[r.fields.child].length&&(o=r.findItemFromDS(l[r.fields.child],i,n));else o=n?t:a;return!!o}):o=t,o},e.prototype.getQuery=function(){var t=[],i=this.query?this.query:new Me;if(!this.query){for(var n=0,r=Object.keys(this.fields.properties);n<r.length;n++){var o=r[n];"tableName"!==o&&this.fields[""+o]&&this.fields[""+o]!==ot.defaultMappedFields[""+o]&&-1===t.indexOf(this.fields[""+o])&&t.push(this.fields[""+o])}i.select(t),this.fields.properties.hasOwnProperty("tableName")&&i.from(this.fields.tableName)}return i},e.prototype.setViewDataSource=function(t){void 0===t&&(t=this.localData);var i=c(this.fields.sortBy)?this.fields.text:this.fields.sortBy,n=ot.addSorting(this.sortOrder,i);this.curViewDS=t&&this.fields.groupBy?ot.groupDataSource("None"!==this.sortOrder?ot.getDataSource(t,n):t,this.listBaseOption.fields,this.sortOrder):t&&"None"!==this.sortOrder?ot.getDataSource(t,n):t},e.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},e.prototype.renderRemoteLists=function(t,i){this.isDestroyed||(this.localData=t.result,i.removeElement(i.contentContainer),this.renderList(),this.trigger("actionComplete",t))},e.prototype.triggerActionFailure=function(t){this.isDestroyed||this.trigger("actionFailure",t)},e.prototype.setLocalData=function(){var t=this;this.trigger("actionBegin");var i=this;if(this.dataSource instanceof he)this.dataSource.ready?this.dataSource.ready.then(function(r){t.isOffline=t.dataSource.dataSource.offline,t.dataSource instanceof he&&t.isOffline&&t.renderRemoteLists(r,i)}).catch(function(r){t.triggerActionFailure(r)}):this.dataSource.executeQuery(this.getQuery()).then(function(r){t.renderRemoteLists(r,i)}).catch(function(r){t.triggerActionFailure(r)});else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var n=this.element.querySelector("ul");n&&(le(n),this.setProperties({dataSource:ot.createJsonFromElement(n)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},e.prototype.reRender=function(){this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header(),this.setLocalData()},e.prototype.resetCurrentList=function(){this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},e.prototype.setAttributes=function(t){for(var i=0;i<t.length;i++){var n=t[i];n.classList.contains("e-list-item")&&(n.setAttribute("id",this.element.id+"_"+n.getAttribute("data-uid")),n.setAttribute("tabindex","-1"))}},e.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=ot.createList(this.createElement,this.curViewDS,this.listBaseOption,null,this),this.liCollection=this.curUL.querySelectorAll("."+ne.listItem),this.setAttributes(this.liCollection)},e.prototype.exceptionEvent=function(t){this.trigger("actionFailure",t)},e.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+ne.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+ne.listItem))},e.prototype.renderSubList=function(t){this.liElement=t;var i=t.getAttribute("data-uid");if(t.classList.contains(ne.hasChild)&&i){var n=k(t.parentNode,"."+ne.parentItem),r=this.element.querySelector("[pid='"+i+"']");if(this.curDSLevel.push(i),this.setViewDataSource(this.getSubDS()),!r){r=ot.createListFromJson(this.createElement,this.curViewDS,this.listBaseOption,this.curDSLevel.length,null,this),this.isReact&&this.renderReactTemplates();var a=r.querySelectorAll("."+ne.listItem);this.setAttributes(a),r.setAttribute("pID",i),r.style.display="none",this.renderIntoDom(r)}if(this.switchView(n,r),this.liCollection=this.curUL.querySelectorAll("."+ne.listItem),this.selectedItems){var l=Ts(this.selectedItems.data,this.listBaseOption.fields);this.header(l[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}},e.prototype.renderIntoDom=function(t){this.contentContainer.appendChild(t)},e.prototype.renderList=function(t){this.setViewDataSource(t),this.enableVirtualization?(Object.keys(this.dataSource).length&&(this.template||this.groupTemplate)&&!this.virtualizationModule.isNgTemplate()&&(this.isReact||this.isVue?("string"==typeof this.template&&(this.listBaseOption.template=null),"string"==typeof this.groupTemplate&&(this.listBaseOption.groupTemplate=null)):(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null),this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule)),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:ne.container}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement),this.isReact&&this.renderReactTemplates())},e.prototype.getElementUID=function(t){var i={};return t instanceof Element?i[this.fields.id]=t.getAttribute("data-uid"):i=t,i},e.prototype.render=function(){this.element.classList.add(ne.root),re(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=zi(this.element,{selector:"."+ne.listItem}),this.renderComplete()},e.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.unWireEvents();var t=[ne.root,ne.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter(function(i){return i}));A([this.element],t),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,this.element.innerHTML="",this.contentContainer=null,this.selectedItems=null,this.selectedLI=null,this.liElement=null,this.targetElement=null,this.currentLiElements=null,this.virtualCheckBox=null,s.prototype.destroy.call(this)},e.prototype.back=function(){var t=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==t&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var i=this.element.querySelector("[data-uid='"+t+"']"),n=this.curUL;i?i=i.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),i=this.curUL);var o=Ts(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(n,i,!0),this.removeFocus();var a=this.element.querySelector("[data-uid='"+t+"']");a.classList.remove(ne.disable),a.classList.add(ne.focused),this.showCheckBox&&a.querySelector("."+ne.checkboxIcon).classList.contains(ne.checked)||a.classList.remove(ne.selected),this.liCollection=this.curUL.querySelectorAll("."+ne.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:$t.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?o:this.headerTitle,!!this.curDSLevel.length,"header")}},e.prototype.selectItem=function(t){this.enableVirtualization?this.virtualizationModule.selectItem(t):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(t)):!0===c(t)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(t))},e.prototype.getLiFromObjOrElement=function(t){var i,n=this.dataSource instanceof he?this.localData:this.dataSource;if(!c(t))if("string"==typeof n[0]||"number"==typeof n[0])if(t instanceof Element){for(var r=t.getAttribute("data-uid").toString(),o=0;o<this.liCollection.length;o++)if(this.liCollection[o].getAttribute("data-uid").toString()===r){i=this.liCollection[o];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+ne.listItem),function(d){return d.innerText.trim()===t.toString()&&(i=d,!0)});else{var a=this.getItemData(t),l=Ts(a,this.listBaseOption.fields);if(a&&(i=this.element.querySelector('[data-uid="'+l[this.fields.id]+'"]'),!this.enableVirtualization&&c(i))){var h=this.element.querySelectorAll("."+ne.listItem);for(o=0;o<h.length;o++)h[o].innerText.trim()===l[this.fields.text]&&(i=h[o])}}return i},e.prototype.selectMultipleItems=function(t){if(!c(t))for(var i=0;i<t.length;i++)c(t[i])||this.selectItem(t[i])},e.prototype.getParentId=function(){var t=[];if(this.isNestedList)for(var i=this.curDSLevel.length-1;i>=0;i--)t.push(this.curDSLevel[i]);return t},e.prototype.updateSelectedId=function(){this.selectedId=[];for(var t=this.curUL.getElementsByClassName(ne.selected),i=0;i<t.length;i++){var n=this.getItemData(t[i]);!c(n)&&n[this.listBaseOption.fields.id]&&this.selectedId.push(n[this.listBaseOption.fields.id])}},e.prototype.getSelectedItems=function(){var t,i=!1;this.selectedId=[];var n=this.dataSource instanceof he?this.localData:this.dataSource;if(this.enableVirtualization&&!i)t=this.virtualizationModule.getSelectedItems(),i=!0;else if(this.showCheckBox&&!i){var r=this.curUL.getElementsByClassName(ne.selected),o=[],a=[];this.selectedId=[];for(var l=[],h=0;h<r.length;h++)if("string"==typeof n[0]||"number"==typeof n[0])o.push(r[h].innerText.trim());else{var d=this.getItemData(r[h]),p=Ts(d,this.listBaseOption.fields);this.isNestedList?l.push({data:d,parentId:this.getParentId()}):a.push(d),p?(o.push(p[this.listBaseOption.fields.text]),this.selectedId.push(p[this.listBaseOption.fields.id])):(o.push(void 0),this.selectedId.push(void 0))}("string"==typeof n[0]||"number"==typeof n[0])&&!i&&(t={item:r,data:n,text:o},i=!0),this.isNestedList&&!i?(t={item:r,data:l,text:o},i=!0):i||(t={item:r,data:a,text:o},i=!0)}else if(!i){var u=this.element.getElementsByClassName(ne.selected)[0];p=Ts(this.getItemData(u),this.listBaseOption.fields),"string"!=typeof n[0]&&"number"!=typeof n[0]||i?i||(c(p)||c(u)?(t=void 0,i=!0):(this.selectedId.push(p[this.listBaseOption.fields.id]),t={text:p[this.listBaseOption.fields.text],item:u,data:this.getItemData(u)},i=!0)):(t=c(u)?void 0:{item:u,data:n,text:u.innerText.trim()},i=!0)}return t},e.prototype.findItem=function(t){return this.getItemData(t)},e.prototype.enableItem=function(t){this.setItemState(t,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(t)},e.prototype.disableItem=function(t){this.setItemState(t,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(t)},e.prototype.setItemState=function(t,i){var n=this.getItemData(t),r=Ts(n,this.listBaseOption.fields);if(n){var o=this.element.querySelector('[data-uid="'+r[this.fields.id]+'"]');i?(o&&o.classList.remove(ne.disable),delete n[this.fields.enabled]):i||(o&&o.classList.add(ne.disable),n[this.fields.enabled]=!1)}},e.prototype.showItem=function(t){this.showHideItem(t,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(t)},e.prototype.hideItem=function(t){this.showHideItem(t,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(t)},e.prototype.showHideItem=function(t,i,n){var r=this.getItemData(t),o=Ts(r,this.listBaseOption.fields);if(r){var a=this.element.querySelector('[data-uid="'+o[this.fields.id]+'"]');a&&(a.style.display=n),i?r[this.fields.isVisible]=!1:delete r[this.fields.isVisible]}},e.prototype.addItem=function(t,i){void 0===i&&(i=void 0),this.addItemInternally(t,i,this.dataSource instanceof he?this.localData:this.dataSource)},e.prototype.addItemInternally=function(t,i,n){if(t instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(t,i,n);else{var r=this.findItemFromDS(n,i),o=void 0;if(r&&((o=Ts(r,this.listBaseOption.fields)[this.fields.child])||(o=[]),o=o.concat(t)),r instanceof Array){for(var l=0;l<t.length;l++){n.push(t[l]),this.setViewDataSource(n);var h=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&h?this.addItemIntoDom(t[l],h,this.curViewDS):this.reRender()}this.liCollection=this.curUL.querySelectorAll("."+ne.listItem)}else r&&(r[this.fields.child]=o,this.addItemInNestedList(r,t))}},e.prototype.addItemInNestedList=function(t,i){var n=t[this.fields.id],r=t[this.fields.child],o=this.element.querySelector("[pid='"+n+"']"),a=this.element.querySelector("[data-uid='"+n+"']"),l=o||(a?k(a,"ul"):null),h=o?r:[t];if(a&&!a.classList.contains(ne.hasChild)){var p=ot.createListItemFromJson(this.createElement,h,this.listBaseOption,null,null,this);this.setAttributes(p),l.insertBefore(p[0],a),z(a)}if(o&&i)for(var u=0;u<i.length;u++)h.push(i[u]),this.addItemIntoDom(i[u],l,h)},e.prototype.addItemIntoDom=function(t,i,n){var r=n.indexOf(t);this.addListItem(t,r,i,n);var o=n[r-1];o&&o.isHeader&&1===o.items.length&&this.addListItem(o,r-1,i,n)},e.prototype.addListItem=function(t,i,n,r){var o=this.getLiFromObjOrElement(r[i+1])||this.getLiFromObjOrElement(r[i+2])||null,a=ot.createListItemFromJson(this.createElement,[t],this.listBaseOption,null,null,this);if(this.setAttributes(a),this.template&&this.isReact&&this.renderReactTemplates(),this.fields.groupBy&&r[i+1]&&r[i+1].isHeader){var l=this.getLiFromObjOrElement(r[i-1]);l&&(o=l.nextElementSibling)}n.insertBefore(a[0],o)},e.prototype.removeItem=function(t){var i=this.dataSource instanceof he?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(t):this.removeItemFromList(t,i)},e.prototype.removeItemFromList=function(t,i){var a,n=this,r=this.curViewDS,o=t instanceof Element?this.getElementUID(t):t;if(a=this.findItemFromDS(i,o,!0)){var l;l=this.findItemFromDS(a,o);var h=r.indexOf(l),d=this.getLiFromObjOrElement(t),p=void 0;this.validateNestedView(d),this.fields.groupBy&&this.curViewDS[h-1]&&r[h-1].isHeader&&1===r[h-1].items.length&&d&&d.previousElementSibling.classList.contains(ne.groupListItem)&&(c(d.nextElementSibling)||d.nextElementSibling&&d.nextElementSibling.classList.contains(ne.groupListItem))&&(p=d.previousElementSibling),d&&z(d),p&&z(p);var u=a.length-1<=0?this.findParent(this.localData,this.fields.id,function(y){return y===l[n.fields.id]},null):null,f=a.indexOf(l);if(a.splice(f,1),this.setViewDataSource(i),u&&u.parent&&Array.isArray(u.parent[this.fields.child])&&u.parent[this.fields.child].length<=0){var g=this.getLiFromObjOrElement(u.parent);if(g){var m=ot.createListItemFromJson(this.createElement,[u.parent],this.listBaseOption,null,null,this);this.setAttributes(m),g.parentElement.insertBefore(m[0],g),g.parentElement.removeChild(g)}}a.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+ne.listItem))}},e.prototype.validateNestedView=function(t){var i=t?t.getAttribute("data-uid").toString().toLowerCase():null;if(i&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some(function(n){return n.toString().toLowerCase()===i});)this.back()},e.prototype.removeMultipleItems=function(t){if(t.length)for(var i=0;i<t.length;i++)this.removeItem(t[i])},e.prototype.findParent=function(t,i,n,r){if(t.hasOwnProperty(i)&&!0===n(t[i]))return Q({},t);for(var o=0;o<Object.keys(t).length;o++)if(t[Object.keys(t)[o]]&&"object"==typeof t[Object.keys(t)[o]]){var a=this.findParent(t[Object.keys(t)[o]],i,n,t);if(null!=a)return a.parent||(a.parent=r),a}return null},e.prototype.getModuleName=function(){return"listview"},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"virtualization"}),t},e.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition","selectedId"])},yi([v("")],e.prototype,"cssClass",void 0),yi([v(!1)],e.prototype,"enableVirtualization",void 0),yi([v({})],e.prototype,"htmlAttributes",void 0),yi([v(!0)],e.prototype,"enable",void 0),yi([v([])],e.prototype,"dataSource",void 0),yi([v()],e.prototype,"query",void 0),yi([Fe(ot.defaultMappedFields,Zge)],e.prototype,"fields",void 0),yi([v({effect:"SlideLeft",duration:400,easing:"ease"})],e.prototype,"animation",void 0),yi([v("None")],e.prototype,"sortOrder",void 0),yi([v(!1)],e.prototype,"showIcon",void 0),yi([v(!1)],e.prototype,"showCheckBox",void 0),yi([v("Left")],e.prototype,"checkBoxPosition",void 0),yi([v("")],e.prototype,"headerTitle",void 0),yi([v(!1)],e.prototype,"showHeader",void 0),yi([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),yi([v("")],e.prototype,"height",void 0),yi([v("")],e.prototype,"width",void 0),yi([v(null)],e.prototype,"template",void 0),yi([v(null)],e.prototype,"headerTemplate",void 0),yi([v(null)],e.prototype,"groupTemplate",void 0),yi([V()],e.prototype,"select",void 0),yi([V()],e.prototype,"actionBegin",void 0),yi([V()],e.prototype,"actionComplete",void 0),yi([V()],e.prototype,"actionFailure",void 0),yi([et],e)}(Lt),c9=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),jn=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},hh="e-other-month",aP="e-other-year",R0="e-calendar",u9="e-device",lP="e-year",hP="e-month",g9="e-decade",m9="e-icons",gr="e-disabled",Cc="e-overlay",dP="e-week-number",Ms="e-selected",oa="e-focused-date",uI="e-month-hide",v9="e-today",fI="e-zoomin",w9="e-calendar-day-header-lg",pP=864e5,S9=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.effect="",n.isPopupClicked=!1,n.isDateSelected=!0,n.isTodayClicked=!1,n.preventChange=!1,n.isAngular=!1,n.previousDates=!1,n}return c9(e,s),e.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new qt(this.locale),(c(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(R0),this.enableRtl&&this.element.classList.add("e-rtl"),E.isDevice&&this.element.classList.add(u9),re(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(R0),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),E.isDevice&&this.calendarElement.classList.add(u9),re(this.calendarElement,{"data-role":"calendar"})),!c(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},e.prototype.rangeValidation=function(t,i){c(t)&&this.setProperties({min:new Date(1900,0,1)},!0),c(i)&&this.setProperties({max:new Date(2099,11,31)},!0)},e.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},e.prototype.validateDate=function(t){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!c(t)&&this.min<=this.max&&t>=this.min&&t<=this.max&&(this.currentDate=new Date(this.checkValue(t)))},e.prototype.setOverlayIndex=function(t,i,n,r){if(r&&!c(i)&&!c(n)&&!c(t)){var o=parseInt(i.style.zIndex,10)?parseInt(i.style.zIndex,10):1e3;n.style.zIndex=(o-1).toString(),t.style.zIndex=o.toString()}},e.prototype.minMaxUpdate=function(t){+this.min<=+this.max?A([this.element],Cc):(this.setProperties({min:this.min},!0),M([this.element],Cc)),this.min=c(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=c(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&t&&+t<=+this.max&&+t>=+this.min?this.currentDate=new Date(this.checkValue(t)):+this.min<=+this.max&&!t&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},e.prototype.createHeader=function(){this.headerElement=this.createElement("div",{className:"e-header"});var r=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),zi(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),re(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),zi(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),"daterangepicker"===this.getModuleName()&&(re(this.previousIcon,{tabIndex:"-1"}),re(this.nextIcon,{tabIndex:"-1"})),re(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),re(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev "+m9})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  "+m9})),r.appendChild(this.previousIcon),r.appendChild(this.nextIcon),this.headerElement.appendChild(r),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},e.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()},e.prototype.getCultureValues=function(){var i,t=[],n="days.stand-alone."+this.dayHeaderFormat.toLowerCase();if(!c(i="en"===this.locale||"en-US"===this.locale?R(n,Zd()):this.getCultureObjects(Fr,""+this.locale)))for(var r=0,o=Object.keys(i);r<o.length;r++)t.push(R(o[r],i));return t},e.prototype.toCapitalize=function(t){return!c(t)&&t.length?t[0].toUpperCase()+t.slice(1):t},e.prototype.createContentHeader=function(){"calendar"===this.getModuleName()?c(this.element.querySelectorAll(".e-content .e-week-header")[0])||z(this.element.querySelectorAll(".e-content .e-week-header")[0]):c(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||z(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var i="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(i+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?M([this.element],""+dP):M([this.calendarElement],""+dP));var n=this.getCultureValues().length>0&&this.getCultureValues()?this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek):null;if(!c(n))for(var r=0;r<=6;r++)i+='<th  class="">'+this.toCapitalize(n[r])+"</th>";this.tableHeadElement.innerHTML=i="<tr>"+i+"</tr>",this.table.appendChild(this.tableHeadElement)},e.prototype.createContentBody=function(){switch("calendar"===this.getModuleName()?c(this.element.querySelectorAll(".e-content tbody")[0])||z(this.element.querySelectorAll(".e-content tbody")[0]):c(this.calendarElement.querySelectorAll(".e-content tbody")[0])||z(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},e.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))},e.prototype.createContentFooter=function(){if(this.showTodayButton){var t=new Date(+this.min),i=new Date(+this.max);this.globalize=new qt(this.locale),this.l10=new mi(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),zi(this.todayElement),this.updateFooter(),M([this.todayElement],["e-btn",v9,"e-flat","e-primary","e-css"]),(!(+new Date(t.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(i.setHours(0,0,0,0)))||this.todayDisabled)&&M([this.todayElement],gr),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(gr)||C.add(this.todayElement,"click",this.todayButtonClick,this)}},e.prototype.wireEvents=function(t,i,n,r){C.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=Q(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new St(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new St(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},e.prototype.dateWireEvents=function(t,i,n,r){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=Q(this.defaultKeyConfigs,n),this.serverModuleName=r},e.prototype.todayButtonClick=function(t,i,n){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(i)),n):this.navigateTo("Month",new Date(this.checkValue(i)),n))},e.prototype.resetCalendar=function(){this.calendarElement&&z(this.calendarElement),this.tableBodyElement&&z(this.tableBodyElement),this.table&&z(this.table),this.tableHeadElement&&z(this.tableHeadElement),this.nextIcon&&z(this.nextIcon),this.previousIcon&&z(this.previousIcon),this.footer&&z(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},e.prototype.keyActionHandle=function(t,i,n){var o,r=this.tableBodyElement.querySelector("tr td.e-focused-date");o=n?c(r)||+i!==parseInt(r.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):r:this.tableBodyElement.querySelector("tr td.e-selected");var a=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=a===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",t.action){case"moveLeft":this.keyboardNavigate(-1,a,t,this.max,this.min),t.preventDefault();break;case"moveRight":this.keyboardNavigate(1,a,t,this.max,this.min),t.preventDefault();break;case"moveUp":this.keyboardNavigate(0===a?-7:-4,a,t,this.max,this.min),t.preventDefault();break;case"moveDown":this.keyboardNavigate(0===a?7:4,a,t,this.max,this.min),t.preventDefault();break;case"select":if(t.target===this.todayElement)this.todayButtonClick(t,i);else{var d=c(r)?o:r;if(!c(d)&&!d.classList.contains(gr))if(h){var p=new Date(parseInt(""+d.id,0));this.selectDate(t,p,d)}else this.contentClick(null,--a,d,i)}break;case"controlUp":this.title(),t.preventDefault();break;case"controlDown":(!c(r)&&!h||!c(o)&&!h)&&this.contentClick(null,--a,r||o,i),t.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),z(this.tableBodyElement),0===a?this.renderMonths(t):1===a?this.renderYears(t):this.renderDecades(t),t.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,a),z(this.tableBodyElement),0===a?this.renderMonths(t):1===a?this.renderYears(t):this.renderDecades(t),t.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),t.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),t.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),t.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),t.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),t.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),t.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()},e.prototype.keyboardNavigate=function(t,i,n,r,o){var a=new Date(this.checkValue(this.currentDate));switch(i){case 2:this.addYears(this.currentDate,t),this.isMonthYearRange(this.currentDate)?(z(this.tableBodyElement),this.renderDecades(n)):this.currentDate=a;break;case 1:this.addMonths(this.currentDate,t),this.isMonthYearRange(this.currentDate)?(z(this.tableBodyElement),this.renderYears(n)):this.currentDate=a;break;case 0:this.addDay(this.currentDate,t,n,r,o),this.isMinMaxRange(this.currentDate)?(z(this.tableBodyElement),this.renderMonths(n)):this.currentDate=a}},e.prototype.preRender=function(t){var i=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(n){i.triggerNavigate(n)}},e.prototype.minMaxDate=function(t){var i=new Date(new Date(+t).setHours(0,0,0,0)),n=new Date(new Date(+this.min).setHours(0,0,0,0)),r=new Date(new Date(+this.max).setHours(0,0,0,0));return(+i==+n||+i==+r)&&(+t<+this.min&&(t=new Date(+this.min)),+t>+this.max&&(t=new Date(+this.max))),t},e.prototype.renderMonths=function(t,i,n){var o,r=this.weekNumber?8:7;o="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,i,null,null,n,t):this.islamicModule.islamicRenderDays(this.currentDate,i),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(o,r,hP,t,i):this.islamicModule.islamicRenderTemplate(o,r,hP,t,i)},e.prototype.renderDays=function(t,i,n,r,o,a){var u,l=[],d=o?new Date(+t):this.getDate(new Date,this.timezone),p=new Date(this.checkValue(t)),f=p.getMonth();this.titleUpdate(t,"days");var g=p;for(p=new Date(g.getFullYear(),g.getMonth(),0,g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds());p.getDay()!==this.firstDayOfWeek;)this.setStartDate(p,-1*pP);for(var m=0;m<42;++m){var y=this.createElement("td",{className:"e-cell"}),b=this.createElement("span");if(m%7==0&&this.weekNumber){var w="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,S=new Date(p.getFullYear(),p.getMonth(),p.getDate()+w);b.textContent=""+this.getWeek(S),y.appendChild(b),M([y],""+dP),l.push(y)}u=new Date(+p),p=this.minMaxDate(p);var I={type:"dateTime",skeleton:"full"},x=this.globalize.parseDate(this.globalize.formatDate(p,I),I),T=this.dayCell(p),L=this.globalize.formatDate(p,{type:"date",skeleton:"full"}),N=this.createElement("span");N.textContent=this.globalize.formatDate(p,{format:"d",type:"date",skeleton:"yMd"});var O=this.min>p||this.max<p;O?(M([T],gr),M([T],Cc)):N.setAttribute("title",""+L),f!==p.getMonth()&&M([T],hh),(0===p.getDay()||6===p.getDay())&&M([T],"e-weekend"),T.appendChild(N),this.renderDayCellArgs={date:p,isDisabled:!1,element:T,isOutOfRange:O};var _=this.renderDayCellArgs;if(this.renderDayCellEvent(_),_.isDisabled){var B=new Date(this.checkValue(i)),q=new Date(this.checkValue(_.date));if(n){if(!c(r)&&r.length>0)for(var W=0;W<r.length;W++)+new Date(this.globalize.formatDate(_.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(r[W],{type:"date",skeleton:"yMd"}))&&(r.splice(W,1),W=-1)}else B&&+B==+q&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!T.classList.contains(Ms)&&(M([T],gr),M([T],Cc),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var Y=T.classList.contains(hh),U=T.classList.contains(gr);U||C.add(T,"click",this.clickHandler,this);var J=void 0;if(!c(a)&&"click"===a.type&&(J=a.currentTarget),!n||c(r)||U)!U&&this.getDateVal(p,i)&&M([T],Ms);else{for(var $=0;$<r.length;$++){var fe={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if((this.globalize.formatDate(p,fe)===this.globalize.formatDate(r[$],fe)&&this.getDateVal(p,r[$])||this.getDateVal(p,i))&&M([T],Ms),!c(J)&&J.innerText===T.innerText&&this.previousDates&&T.classList.contains(Ms)&&J.classList.contains(Ms)){A([T],Ms),this.previousDates=!1;for(var ve=this.copyValues(r),Te=0;Te<ve.length;Te++){var Ue={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(x,Ue)===this.globalize.formatDate(ve[Te],Ue)&&(W=ve.indexOf(ve[Te]),ve.splice(W,1),r.splice(W,1))}this.setProperties({values:ve},!0)}else this.updateFocus(Y,U,p,T,t)}r.length<=0&&this.updateFocus(Y,U,p,T,t)}this.updateFocus(Y,U,p,T,t),!c(x)&&x.getFullYear()===d.getFullYear()&&x.getMonth()===d.getMonth()&&x.getDate()===d.getDate()&&M([T],v9),l.push(this.renderDayCellArgs.element),this.addDay(p=new Date(+u),1,null,this.max,this.min)}return l},e.prototype.updateFocus=function(t,i,n,r,o){o.getDate()!==n.getDate()||t||i?(o>=this.max&&parseInt(r.id,0)===+this.max&&!t&&!i&&M([r],oa),o<=this.min&&parseInt(r.id,0)===+this.min&&!t&&!i&&M([r],oa)):M([r],oa)},e.prototype.renderYears=function(t,i){this.removeTableHeadElement();var r=[],o=c(i),a=new Date(this.checkValue(this.currentDate)),l=a.getMonth(),h=a.getFullYear(),d=a,p=d.getFullYear(),u=new Date(this.checkValue(this.min)).getFullYear(),f=new Date(this.checkValue(this.min)).getMonth(),g=new Date(this.checkValue(this.max)).getFullYear(),m=new Date(this.checkValue(this.max)).getMonth();d.setMonth(0),this.titleUpdate(this.currentDate,"months"),d.setDate(1);for(var y=0;y<12;++y){var b=this.dayCell(d),w=this.createElement("span"),S=i&&i.getMonth()===d.getMonth(),I=i&&i.getFullYear()===h&&S;w.textContent=this.toCapitalize(this.globalize.formatDate(d,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(p<u||y<f&&p===u)||this.max&&(p>g||y>m&&p>=g)?M([b],gr):!o&&I?M([b],Ms):d.getMonth()===l&&this.currentDate.getMonth()===l&&M([b],oa),d.setDate(1),d.setMonth(d.getMonth()+1),b.classList.contains(gr)||C.add(b,"click",this.clickHandler,this),b.appendChild(w),r.push(b)}this.renderTemplate(r,4,lP,t,i)},e.prototype.renderDecades=function(t,i){this.removeTableHeadElement();var o=[],a=new Date(this.checkValue(this.currentDate));a.setMonth(0),a.setDate(1);var l=a.getFullYear(),h=new Date(a.setFullYear(l-l%10)),d=new Date(a.setFullYear(l-l%10+9)),p=h.getFullYear(),u=d.getFullYear(),f=this.globalize.formatDate(h,{format:null,type:"dateTime",skeleton:"y"}),g=this.globalize.formatDate(d,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=f+" - "+g;for(var y=new Date(l-l%10-1,0,1).getFullYear(),b=0;b<12;++b){var w=y+b;a.setFullYear(w);var S=this.dayCell(a),I=this.createElement("span");I.textContent=this.globalize.formatDate(a,{format:null,type:"dateTime",skeleton:"y"}),w<p||w>u?(M([S],aP),!c(i)&&a.getFullYear()===i.getFullYear()&&M([S],Ms),(w<new Date(this.checkValue(this.min)).getFullYear()||w>new Date(this.checkValue(this.max)).getFullYear())&&M([S],gr)):w<new Date(this.checkValue(this.min)).getFullYear()||w>new Date(this.checkValue(this.max)).getFullYear()?M([S],gr):c(i)||a.getFullYear()!==i.getFullYear()?a.getFullYear()===this.currentDate.getFullYear()&&!S.classList.contains(gr)&&M([S],oa):M([S],Ms),S.classList.contains(gr)||C.add(S,"click",this.clickHandler,this),S.appendChild(I),o.push(S)}this.renderTemplate(o,4,"e-decade",t,i)},e.prototype.dayCell=function(t){var o,n={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},r=this.globalize.parseDate(this.globalize.formatDate(t,n),n);c(r)||(o=r.valueOf());var a={className:"e-cell",attrs:{id:""+yt(""+o),"aria-selected":"false"}};return this.createElement("td",a)},e.prototype.firstDay=function(t){var i="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+hh):this.tableBodyElement.querySelectorAll("td:not(."+aP);if(i.length)for(var n=0;n<i.length;n++)if(!i[n].classList.contains(gr)){t=new Date(parseInt(i[n].id,0));break}return t},e.prototype.lastDay=function(t,i){var n=new Date(t.getFullYear(),t.getMonth()+1,0);if(2!==i){var r=Math.abs(n.getTimezoneOffset()-this.firstDay(t).getTimezoneOffset());return r&&n.setHours(this.firstDay(t).getHours()+r/60),this.findLastDay(n)}return this.findLastDay(this.firstDay(n))},e.prototype.checkDateValue=function(t){return!c(t)&&t instanceof Date&&!isNaN(+t)?t:null},e.prototype.findLastDay=function(t){var i="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+aP):this.tableBodyElement.querySelectorAll("td:not(."+hh);if(i.length)for(var n=i.length-1;n>=0;n--)if(!i[n].classList.contains(gr)){t=new Date(parseInt(i[n].id,0));break}return t},e.prototype.removeTableHeadElement=function(){"calendar"===this.getModuleName()?c(this.element.querySelectorAll(".e-content table thead")[0])||z(this.tableHeadElement):c(this.calendarElement.querySelectorAll(".e-content table thead")[0])||z(this.tableHeadElement)},e.prototype.renderTemplate=function(t,i,n,r,o){var l,a=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),A([this.contentElement,this.headerElement],[hP,g9,lP]),M([this.contentElement,this.headerElement],[n]);for(var u=i,f=0,g=0;g<t.length/i;++g){for(l=this.createElement("tr"),f=0+f;f<u;f++)!t[f].classList.contains("e-week-number")&&!c(t[f].children[0])&&(M([t[f].children[0]],["e-day"]),zi(t[f].children[0],{duration:600,isCenterRipple:!0})),l.appendChild(t[f]),this.weekNumber&&7===f&&t[7].classList.contains(hh)&&M([l],uI),!this.weekNumber&&6===f&&t[6].classList.contains(hh)&&M([l],uI),this.weekNumber?41===f&&t[41].classList.contains(hh)&&M([l],uI):35===f&&t[35].classList.contains(hh)&&M([l],uI);u+=i,f+=0,this.tableBodyElement.appendChild(l)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(a!==this.getViewNumber(this.currentView())||0===a&&a!==this.getViewNumber(this.currentView()))&&this.navigateHandler(r),this.setAriaActiveDescendant()},e.prototype.clickHandler=function(t,i){this.clickEventEmitter(t);var n=t.currentTarget,r=this.getViewNumber(this.currentView());n.classList.contains(hh)?this.contentClick(t,0,null,i):r===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===r?this.contentClick(t,1,null,i):n.classList.contains(hh)||0!==r?this.contentClick(t,0,n,i):this.selectDate(t,this.getIdValue(t,null),null),"calendar"===this.getModuleName()&&this.table.focus()},e.prototype.clickEventEmitter=function(t){t.preventDefault()},e.prototype.contentClick=function(t,i,n,r){var o=this.getViewNumber(this.currentView()),a=this.getIdValue(t,n);switch(i){case 0:o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(z(this.tableBodyElement),this.currentDate=a,this.effect=fI,this.renderMonths(t)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(a.getMonth()),a.getMonth()>0&&this.currentDate.getMonth()!==a.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(a.getFullYear())):this.currentDate=a,this.effect=fI,z(this.tableBodyElement),this.renderMonths(t));break;case 1:if(o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(t,a,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(a.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var l=this.islamicModule.getIslamicDate(a);this.currentDate=this.islamicModule.toGregorian(l.year,l.month,1)}this.effect=fI,z(this.tableBodyElement),this.renderYears(t)}}},e.prototype.switchView=function(t,i,n,r){switch(t){case 0:z(this.tableBodyElement),this.renderMonths(i,null,r);break;case 1:z(this.tableBodyElement),this.renderYears(i);break;case 2:z(this.tableBodyElement),this.renderDecades(i)}},e.prototype.getModuleName=function(){return"calendar"},e.prototype.requiredModules=function(){var t=[];return this&&t.push({args:[this],member:"islamic"}),t},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.onPropertyChanged=function(t,i,n,r){this.effect="";for(var o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];switch(l){case"enableRtl":t.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===l?{min:this.checkDateValue(new Date(this.checkValue(t.min)))}:{max:this.checkDateValue(new Date(this.checkValue(t.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&z(this.tableBodyElement),this.minMaxUpdate(),n&&this.validateValues(n,r),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(z(this.todayElement),z(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(A([this.todayElement],gr),z(this.todayElement),z(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new qt(this.locale),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":t.showTodayButton?this.createContentFooter():!c(this.todayElement)&&!c(this.footer)&&(z(this.todayElement),z(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:t.showTodayButton},!0)}}},e.prototype.validateValues=function(t,i){if(t&&!c(i)&&i.length>0){for(var n=this.copyValues(i),r=0;r<n.length;r++){var l,a="Gregorian"===this.calendarMode?"gregorian":"islamic";l=this.globalize.formatDate(n[r],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});var p=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:a}),g=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:a});(+new Date(l)<+new Date(p)||+new Date(l)>+new Date(g))&&(n.splice(r,1),r=-1)}this.setProperties({values:n},!0)}},e.prototype.setValueUpdate=function(){c(this.tableBodyElement)||(z(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},e.prototype.copyValues=function(t){var i=[];if(!c(t)&&t.length>0)for(var n=0;n<t.length;n++)i.push(new Date(+t[n]));return i},e.prototype.titleUpdate=function(t,i){var r,o,n=new qt(this.locale),a="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(r=n.formatDate(t,{type:"dateTime",skeleton:"yMMMM",calendar:a}),o=n.formatDate(t,{format:null,type:"dateTime",skeleton:"y",calendar:a})):(r=n.formatDate(t,{type:"dateTime",format:"MMMM y",calendar:a}),o=n.formatDate(t,{type:"dateTime",format:"y",calendar:a})),i){case"days":this.headerTitleElement.textContent=this.toCapitalize(r);break;case"months":this.headerTitleElement.textContent=o}},e.prototype.setActiveDescendant=function(){var t,o,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected"),r="Gregorian"===this.calendarMode?"gregorian":"islamic",a=this.currentView();return o=this.globalize.formatDate(this.currentDate,"Month"===a?{type:"date",skeleton:"full",calendar:r}:"Year"===a?"islamic"!==r?{type:"date",skeleton:"yMMMM",calendar:r}:{type:"date",skeleton:"GyMMM",calendar:r}:{format:null,type:"date",skeleton:"y",calendar:r}),(n||i)&&(c(n)||n.setAttribute("aria-selected","true"),(i||n).setAttribute("aria-label",o),t=(i||n).getAttribute("id")),t},e.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},e.prototype.destroy=function(){("calendar"===this.getModuleName()&&this.element||this.calendarElement&&this.element)&&A([this.element],[R0]),"calendar"===this.getModuleName()&&this.element&&(c(this.headerTitleElement)||C.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&C.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),c(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),this.todayElement=null,this.tableBodyElement=null,this.renderDayCellArgs=null,this.headerElement=null,this.nextIcon=null,this.table=null,this.tableHeadElement=null,this.previousIcon=null,this.headerTitleElement=null,this.footer=null,this.contentElement=null,s.prototype.destroy.call(this)},e.prototype.title=function(t){var i=this.getViewNumber(this.currentView());this.effect=fI,this.switchView(++i,t)},e.prototype.getViewNumber=function(t){return"Month"===t?0:"Year"===t?1:2},e.prototype.navigateTitle=function(t){t.preventDefault(),this.title(t),"calendar"===this.getModuleName()&&this.table.focus()},e.prototype.previous=function(){this.effect="";var t=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(t);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(t);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(t)}},e.prototype.navigatePrevious=function(t){!E.isDevice&&t.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(t),"calendar"===this.getModuleName()&&this.table.focus()},e.prototype.next=function(){this.effect="";var t=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(t);break;case"Year":this.addYears(this.currentDate,1),this.switchView(t);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(t)}},e.prototype.navigateNext=function(t){!E.isDevice&&t.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(t),"calendar"===this.getModuleName()&&this.table.focus()},e.prototype.navigateTo=function(t,i,n){+i>=+this.min&&+i<=+this.max&&(this.currentDate=i),+i<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+i>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(t)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(t))&&(t=this.depth),this.switchView(this.getViewNumber(t),null,null,n)},e.prototype.currentView=function(){return!c(this.contentElement)&&this.contentElement.classList.contains(lP)?"Year":!c(this.contentElement)&&this.contentElement.classList.contains(g9)?"Decade":"Month"},e.prototype.getDateVal=function(t,i){return!c(i)&&t.getDate()===i.getDate()&&t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()},e.prototype.getCultureObjects=function(t,i){var n=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),r=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return R("Gregorian"===this.calendarMode?"main."+this.locale+n:"main."+this.locale+r,t)},e.prototype.getWeek=function(t){var i=new Date(this.checkValue(t)).valueOf(),n=new Date(t.getFullYear(),0,1).valueOf();return Math.ceil((i-n+pP)/pP/7)},e.prototype.setStartDate=function(t,i){var n=t.getTimezoneOffset(),r=new Date(t.getTime()+i),o=r.getTimezoneOffset()-n;t.setTime(r.getTime()+6e4*o)},e.prototype.addMonths=function(t,i){if("Gregorian"===this.calendarMode){var n=t.getDate();t.setDate(1),t.setMonth(t.getMonth()+i),t.setDate(Math.min(n,this.getMaxDays(t)))}else{var r=this.islamicModule.getIslamicDate(t);this.currentDate=this.islamicModule.toGregorian(r.year,r.month+i,1)}},e.prototype.addYears=function(t,i){if("Gregorian"===this.calendarMode){var n=t.getDate();t.setDate(1),t.setFullYear(t.getFullYear()+i),t.setDate(Math.min(n,this.getMaxDays(t)))}else{var r=this.islamicModule.getIslamicDate(t);this.currentDate=this.islamicModule.toGregorian(r.year+i,r.month,1)}},e.prototype.getIdValue=function(t,i){var o={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},a=this.globalize.formatDate(new Date(parseInt(""+(t?t.currentTarget:i).getAttribute("id"),0)),o),l=this.globalize.parseDate(a,o),h=l.valueOf()-l.valueOf()%1e3;return new Date(h)},e.prototype.adjustLongHeaderSize=function(){A([this.element],w9),"Wide"===this.dayHeaderFormat&&M(["calendar"===this.getModuleName()?this.element:this.calendarElement],w9)},e.prototype.selectDate=function(t,i,n,r,o){var a=n||t.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,i.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,i);else{if(r&&!this.checkPresentDate(i,o)){var l=this.copyValues(o);!c(o)&&l.length>0?(l.push(new Date(this.checkValue(i))),this.setProperties({values:l},!0),this.setProperties({value:o[o.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(i))]},!0)}else this.setProperties({value:new Date(this.checkValue(i))},!0);this.currentDate=new Date(this.checkValue(i))}var h=k(a,"."+R0);if(c(h)&&(h=this.tableBodyElement),!r&&!c(h.querySelector("."+Ms))&&A([h.querySelector("."+Ms)],Ms),!r&&!c(h.querySelector("."+oa))&&A([h.querySelector("."+oa)],oa),r){l=this.copyValues(o);for(var d=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),p=0;p<d.length;p++){var u=h.querySelectorAll("td."+oa)[0],f=h.querySelectorAll("td."+Ms)[0];d[p]===u&&A([d[p]],oa),d[p]===f&&!this.checkPresentDate(new Date(parseInt(f.getAttribute("id").split("_")[0],10)),o)&&A([d[p]],Ms)}if(a.classList.contains(Ms)){A([a],Ms);for(var g=0;g<l.length;g++){var y={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(i,y)===this.globalize.formatDate(l[g],y)&&(p=l.indexOf(l[g]),l.splice(p,1),M([a],oa))}this.setProperties({values:l},!0)}else M([a],Ms)}else M([a],Ms);this.isDateSelected=!0},e.prototype.checkPresentDate=function(t,i){var n=!1;if(!c(i))for(var r=0;r<i.length;r++){var o="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(t,{format:null,type:"date",skeleton:"short",calendar:o})===this.globalize.formatDate(i[r],{format:null,type:"date",skeleton:"short",calendar:o})&&(n=!0)}return n},e.prototype.setAriaActiveDescendant=function(){re(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},e.prototype.previousIconHandler=function(t){t?c(this.previousIcon)||(C.remove(this.previousIcon,"click",this.navigatePreviousHandler),M([this.previousIcon],""+gr),M([this.previousIcon],""+Cc),this.previousIcon.setAttribute("aria-disabled","true")):(C.add(this.previousIcon,"click",this.navigatePreviousHandler),A([this.previousIcon],""+gr),A([this.previousIcon],""+Cc),this.previousIcon.setAttribute("aria-disabled","false"))},e.prototype.renderDayCellEvent=function(t){Q(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",t)},e.prototype.navigatedEvent=function(t){Q(this.navigatedArgs,{name:"navigated",event:t}),this.trigger("navigated",this.navigatedArgs)},e.prototype.triggerNavigate=function(t){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(t)},e.prototype.nextIconHandler=function(t){t?c(this.previousIcon)||(C.remove(this.nextIcon,"click",this.navigateNextHandler),M([this.nextIcon],gr),M([this.nextIcon],Cc),this.nextIcon.setAttribute("aria-disabled","true")):(C.add(this.nextIcon,"click",this.navigateNextHandler),A([this.nextIcon],gr),A([this.nextIcon],Cc),this.nextIcon.setAttribute("aria-disabled","false"))},e.prototype.compare=function(t,i,n){var o,a,r=i.getFullYear();return o=r,a=0,n&&(o=(r-=r%n)-r%n+n-1),t.getFullYear()>o?a=1:t.getFullYear()<r&&(a=-1),a},e.prototype.isMinMaxRange=function(t){return+t>=+this.min&&+t<=+this.max},e.prototype.isMonthYearRange=function(t){if("Gregorian"===this.calendarMode)return t.getMonth()>=this.min.getMonth()&&t.getFullYear()>=this.min.getFullYear()&&t.getMonth()<=this.max.getMonth()&&t.getFullYear()<=this.max.getFullYear();var i=this.islamicModule.getIslamicDate(t);return i.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&i.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&i.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&i.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},e.prototype.compareYear=function(t,i){return this.compare(t,i,0)},e.prototype.compareDecade=function(t,i){return this.compare(t,i,10)},e.prototype.shiftArray=function(t,i){return t.slice(i).concat(t.slice(0,i))},e.prototype.addDay=function(t,i,n,r,o){var a=i,l=new Date(+t);if(!c(this.tableBodyElement)&&!c(n)){for(;this.findNextTD(new Date(+t),a,r,o);)a+=i;var h=new Date(l.setDate(l.getDate()+a));a=+h>+r||+h<+o?a===i?i-i:i:a}t.setDate(t.getDate()+a)},e.prototype.findNextTD=function(t,i,n,r){var o=new Date(t.setDate(t.getDate()+i)),a=[],l=!1;if(a=(!c(o)&&o.getMonth())===(!c(this.currentDate)&&this.currentDate.getMonth())?("Gregorian"===this.calendarMode?this.renderDays(o):this.islamicModule.islamicRenderDays(this.currentDate,o)).filter(function(p){return p.classList.contains(gr)}):this.tableBodyElement.querySelectorAll("td."+gr),+o<=+n&&+o>=+r&&a.length)for(var d=0;d<a.length&&!(l=+o==+new Date(parseInt(a[d].id,0)));d++);return l},e.prototype.getMaxDays=function(t){var i,n=new Date(this.checkValue(t));i=28;for(var r=n.getMonth();n.getMonth()===r;)++i,n.setDate(i);return i-1},e.prototype.setDateDecade=function(t,i){t.setFullYear(i),this.setProperties({value:new Date(this.checkValue(t))},!0)},e.prototype.setDateYear=function(t,i){t.setFullYear(i.getFullYear(),i.getMonth(),t.getDate()),i.getMonth()!==t.getMonth()&&(t.setDate(0),this.currentDate=new Date(this.checkValue(i))),this.setProperties({value:new Date(this.checkValue(t))},!0)},e.prototype.compareMonth=function(t,i){return t.getFullYear()>i.getFullYear()?1:t.getFullYear()<i.getFullYear()?-1:t.getMonth()===i.getMonth()?0:t.getMonth()>i.getMonth()?1:-1},e.prototype.checkValue=function(t){return t instanceof Date?t.toUTCString():""+t},e.prototype.checkView=function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},e.prototype.getDate=function(t,i){return i&&(t=new Date(t.toLocaleString("en-US",{timeZone:i}))),t},jn([v(new Date(1900,0,1))],e.prototype,"min",void 0),jn([v(!0)],e.prototype,"enabled",void 0),jn([v(null)],e.prototype,"cssClass",void 0),jn([v(new Date(2099,11,31))],e.prototype,"max",void 0),jn([v(null)],e.prototype,"firstDayOfWeek",void 0),jn([v("Gregorian")],e.prototype,"calendarMode",void 0),jn([v("Month")],e.prototype,"start",void 0),jn([v("Month")],e.prototype,"depth",void 0),jn([v(!1)],e.prototype,"weekNumber",void 0),jn([v("FirstDay")],e.prototype,"weekRule",void 0),jn([v(!0)],e.prototype,"showTodayButton",void 0),jn([v("Short")],e.prototype,"dayHeaderFormat",void 0),jn([v(!1)],e.prototype,"enablePersistence",void 0),jn([v(null)],e.prototype,"keyConfigs",void 0),jn([v(null)],e.prototype,"serverTimezoneOffset",void 0),jn([V()],e.prototype,"created",void 0),jn([V()],e.prototype,"destroyed",void 0),jn([V()],e.prototype,"navigated",void 0),jn([V()],e.prototype,"renderDayCell",void 0),jn([et],e)}(Lt),vme=function(s){function e(t,i){return s.call(this,t,i)||this}return c9(e,s),e.prototype.render=function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&om("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!c(this.values)&&this.values.length>0){for(var t=[],i=[],n=0;n<this.values.length;n++)-1===t.indexOf(+this.values[n])&&(t.push(+this.values[n]),i.push(this.values[n]));this.setProperties({values:i},!0);for(var r=0;r<this.values.length;r++)if(!this.checkDateValue(this.values[r]))if("string"==typeof this.values[r]&&this.checkDateValue(new Date(this.checkValue(this.values[r])))){var o=new Date(this.checkValue(this.values[r]));this.values.splice(r,1),this.values.splice(r,0,o)}else this.values.splice(r,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),s.prototype.render.call(this),"calendar"===this.getModuleName()){var a=k(this.element,"form");a&&C.add(a,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},e.prototype.setEnable=function(t){t?A([this.element],gr):M([this.element],gr)},e.prototype.setClass=function(t,i){c(i)||(i=i.replace(/\s+/g," ").trim()),c(t)||(t=t.replace(/\s+/g," ").trim()),!c(i)&&""!==i&&A([this.element],i.split(" ")),c(t)||M([this.element],t.split(" "))},e.prototype.isDayLightSaving=function(){var t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(i,t)},e.prototype.setTimeZone=function(t){if(!c(this.serverTimezoneOffset)&&this.value){var r=t+(new Date).getTimezoneOffset()/60;r=this.isDayLightSaving()?r--:r,this.value=new Date(this.value.getTime()+60*r*60*1e3)}},e.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},e.prototype.validateDate=function(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),s.prototype.validateDate.call(this,this.value),!c(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},e.prototype.minMaxUpdate=function(){"calendar"===this.getModuleName()&&(!c(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!c(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||c(this.value)?s.prototype.minMaxUpdate.call(this,this.value):!c(this.value)&&this.value<this.min&&this.min<=this.max?s.prototype.minMaxUpdate.call(this,this.min):!c(this.value)&&this.value>this.max&&this.min<=this.max&&s.prototype.minMaxUpdate.call(this,this.max)},e.prototype.generateTodayVal=function(t){var i=new Date;return c(this.timezone)||(i=s.prototype.getDate.call(this,i,this.timezone)),t&&c(this.timezone)?(i.setHours(t.getHours()),i.setMinutes(t.getMinutes()),i.setSeconds(t.getSeconds()),i.setMilliseconds(t.getMilliseconds())):i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0),i},e.prototype.todayButtonClick=function(t){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=t,this.isMultiSelection){var n=this.copyValues(this.values);s.prototype.checkPresentDate.call(this,i,this.values)||(n.push(i),this.setProperties({values:n}))}s.prototype.todayButtonClick.call(this,t,new Date(+this.value))}},e.prototype.keyActionHandle=function(t){s.prototype.keyActionHandle.call(this,t,this.value,this.isMultiSelection)},e.prototype.preRender=function(){var t=this;this.changeHandler=function(i){t.triggerChange(i)},this.checkView(),s.prototype.preRender.call(this,this.value)},e.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,s.prototype.createContent.call(this)},e.prototype.minMaxDate=function(t){return s.prototype.minMaxDate.call(this,t)},e.prototype.renderMonths=function(t,i,n){s.prototype.renderMonths.call(this,t,this.value,n)},e.prototype.renderDays=function(t,i,n,r,o,a){var l=s.prototype.renderDays.call(this,t,this.value,this.isMultiSelection,this.values,o,a);return this.isMultiSelection&&s.prototype.validateValues.call(this,this.isMultiSelection,this.values),l},e.prototype.renderYears=function(t){"Gregorian"===this.calendarMode?s.prototype.renderYears.call(this,t,this.value):this.islamicModule.islamicRenderYears(t,this.value)},e.prototype.renderDecades=function(t){"Gregorian"===this.calendarMode?s.prototype.renderDecades.call(this,t,this.value):this.islamicModule.islamicRenderDecade(t,this.value)},e.prototype.renderTemplate=function(t,i,n,r){"Gregorian"===this.calendarMode?s.prototype.renderTemplate.call(this,t,i,n,r,this.value):this.islamicModule.islamicRenderTemplate(t,i,n,r,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()},e.prototype.clickHandler=function(t){var i=t.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(hh))if(this.isMultiSelection){var n=this.copyValues(this.values);-1===n.toString().indexOf(this.getIdValue(t,null).toString())?(n.push(this.getIdValue(t,null)),this.setProperties({values:n},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(t,null)},!0);var r=this.currentView();s.prototype.clickHandler.call(this,t,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!c(this.tableBodyElement.querySelectorAll("."+oa)[0])&&"Year"===r&&this.tableBodyElement.querySelectorAll("."+oa)[0].classList.remove(oa)},e.prototype.switchView=function(t,i,n,r){s.prototype.switchView.call(this,t,i,this.isMultiSelection,r)},e.prototype.getModuleName=function(){return s.prototype.getModuleName.call(this),"calendar"},e.prototype.getPersistData=function(){return s.prototype.getPersistData.call(this),this.addOnPersist(["value","values"])},e.prototype.onPropertyChanged=function(t,i){this.effect="",this.rangeValidation(this.min,this.max);for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"value":this.isDateSelected&&("string"==typeof t.value?this.setProperties({value:new Date(this.checkValue(t.value))},!0):t.value=new Date(this.checkValue(t.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof t.values||"number"==typeof t.values)this.setProperties({values:null},!0);else{for(var a=this.copyValues(this.values),l=0;l<a.length;l++){var h=a[l];this.checkDateValue(h)&&!s.prototype.checkPresentDate.call(this,h,a)&&a.push(h)}this.setProperties({values:a},!0),this.values.length>0&&this.setProperties({value:t.values[t.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:t.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(t.cssClass,i.cssClass);break;default:s.prototype.onPropertyChanged.call(this,t,i,this.isMultiSelection,this.values)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},e.prototype.destroy=function(){if(s.prototype.destroy.call(this),"calendar"===this.getModuleName()){var t=k(this.element,"form");t&&C.remove(t,"reset",this.formResetHandler.bind(this))}},e.prototype.navigateTo=function(t,i,n){this.minMaxUpdate(),s.prototype.navigateTo.call(this,t,i,n)},e.prototype.currentView=function(){return s.prototype.currentView.call(this)},e.prototype.addDate=function(t){if("string"!=typeof t&&"number"!=typeof t){var i=this.copyValues(this.values);if("object"==typeof t&&t.length>0)for(var n=t,r=0;r<n.length;r++)this.checkDateValue(n[r])&&!s.prototype.checkPresentDate.call(this,n[r],i)&&(!c(i)&&i.length>0?i.push(n[r]):i=[new Date(+n[r])]);else this.checkDateValue(t)&&!s.prototype.checkPresentDate.call(this,t,i)&&(!c(i)&&i.length>0?i.push(t):i=[new Date(+t)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},e.prototype.removeDate=function(t){if("string"!=typeof t&&"number"!=typeof t&&!c(this.values)&&this.values.length>0){var i=this.copyValues(this.values);if("object"==typeof t&&t.length>0)for(var n=t,r=0;r<n.length;r++)for(var o=0;o<i.length;o++)+i[o]==+n[r]&&i.splice(o,1);else for(o=0;o<i.length;o++)+i[o]==+t&&i.splice(o,1);this.setProperties({values:i},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},e.prototype.setTodayDate=function(t){var i=new Date(+t);this.setProperties({value:i},!0),s.prototype.todayButtonClick.call(this,null,i,!0)},e.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),s.prototype.setValueUpdate.call(this)},e.prototype.selectDate=function(t,i,n){s.prototype.selectDate.call(this,t,i,n,this.isMultiSelection,this.values),this.isMultiSelection&&!c(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(t)},e.prototype.changeEvent=function(t){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},e.prototype.triggerChange=function(t){!c(this.todayButtonEvent)&&this.isTodayClicked&&(t=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=t||null,this.changedArgs.isInteracted=!c(t),c(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||(c(this.value)||c(this.previousDate))&&(null!==this.previousDate||isNaN(+this.value))?!c(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(t),this.previousValues=this.values.length):this.changeEvent(t)},jn([v(null)],e.prototype,"value",void 0),jn([v(null)],e.prototype,"values",void 0),jn([v(!1)],e.prototype,"isMultiSelection",void 0),jn([V()],e.prototype,"change",void 0),jn([et],e)}(S9),Eme=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),tn=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},mI="e-datepicker",T9="e-popup-wrapper",uP="e-input-focus",M9="e-error",vI="e-active",E9="e-date-overflow",yI="e-selected",fP="e-non-edit",D9=["title","class","style"],B0=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.isDateIconClicked=!1,n.isAltKeyPressed=!1,n.isInteracted=!0,n.invalidValueString=null,n.checkPreviousValue=null,n.maskedDateValue="",n.isAngular=!1,n.preventChange=!1,n.isIconClicked=!1,n.isDynamicValueChanged=!1,n.moduleName=n.getModuleName(),n.isFocused=!1,n.isBlur=!1,n.datepickerOptions=t,n}return Eme(e,s),e.prototype.render=function(){this.initialize(),this.bindEvents(),"Auto"===this.floatLabelType&&ie.calculateWidth(this.inputElement,this.inputWrapper.container),!c(this.inputWrapper.buttons[0])&&!c(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!c(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},e.prototype.setTimeZone=function(t){if(!c(this.serverTimezoneOffset)&&this.value){var r=t+(new Date).getTimezoneOffset()/60;r=this.isDayLightSaving()?r--:r,this.value=new Date(this.value.getTime()+60*r*60*1e3),this.updateInput()}},e.prototype.isDayLightSaving=function(){var t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,i)},e.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):re(this.inputElement,{readonly:""}),this.updateIconState()},e.prototype.updateIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&A([this.inputWrapper.container],[fP]):""===this.inputElement.value?A([this.inputWrapper.container],[fP]):M([this.inputWrapper.container],[fP])},e.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),!this.enableMask||this.value||!this.maskedDateValue||"Always"!==this.floatLabelType&&this.floatLabelType&&this.placeholder?this.enableMask||this.updateInput(!0):(this.updateInput(!0),this.updateInputValue(this.maskedDateValue)),this.previousElementValue=this.inputElement.value,this.previousDate=c(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},e.prototype.createInput=function(){if("datepicker"===this.getModuleName()){var i={placeholder:this.placeholder};this.globalize=new qt(this.locale),this.l10n=new mi("datepicker",i,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.fullScreenMode&&E.isDevice&&(this.cssClass="e-popup-expand");var n=this.cssClass;!c(this.cssClass)&&""!==this.cssClass&&(n=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=ie.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:!this.enableMask,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:n,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),re(this.inputElement,{"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"}),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),ie.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),M([this.inputWrapper.container],"e-date-wrapper")},e.prototype.updateInput=function(t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),this.value&&!this.isCalendar()&&this.disabledDates(t,i),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(s.prototype.validateDate.call(this),this.minMaxUpdates(),s.prototype.minMaxUpdate.call(this)),!c(this.value)){var r=this.value,o=void 0,a=c(this.formatString)?this.dateTimeFormat:this.formatString;o="datetimepicker"===this.getModuleName()?this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:a,type:"dateTime",skeleton:"yMd"}:{format:a,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),(+r<=+this.max&&+r>=+this.min||!this.strictMode&&(+r>=+this.max||!+this.value||!+this.value||+r<=+this.min))&&this.updateInputValue(o)}c(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&c(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},e.prototype.minMaxUpdates=function(){!c(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!c(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},e.prototype.checkStringValue=function(t){var i=null,n=null,r=null;if("datetimepicker"===this.getModuleName()){var o=new qt(this.locale);"Gregorian"===this.calendarMode?(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},r={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},r={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return c(i=this.checkDateValue(this.globalize.parseDate(t,n)))&&"datetimepicker"===this.getModuleName()&&(i=this.checkDateValue(this.globalize.parseDate(t,r))),i},e.prototype.checkInvalidValue=function(t){if(!(t instanceof Date||c(t))){var i=null,n=t;if("number"==typeof t&&(n=t.toString()),"datetimepicker"===this.getModuleName()){var a=new qt(this.locale);a.getDatePattern({skeleton:"yMd"})}var l=!1;if("string"!=typeof n)n=null,l=!0;else if("string"==typeof n&&(n=n.trim()),!(i=this.checkStringValue(n))){var d=null;d=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(n)&&!d.test(n)||/^[a-zA-Z0-9- ]*$/.test(n)||isNaN(+new Date(this.checkValue(n)))?l=!0:i=new Date(n)}l?(this.strictMode||(this.invalidValueString=n),this.setProperties({value:null},!0)):this.setProperties({value:i},!0)}},e.prototype.bindInputEvent=function(){(!c(this.formatString)||this.enableMask)&&(this.enableMask||-1===this.formatString.indexOf("y")?C.add(this.inputElement,"input",this.inputHandler,this):C.remove(this.inputElement,"input",this.inputHandler))},e.prototype.bindEvents=function(){C.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),C.add(this.inputElement,"mouseup",this.mouseUpHandler,this),C.add(this.inputElement,"focus",this.inputFocusHandler,this),C.add(this.inputElement,"blur",this.inputBlurHandler,this),this.enableMask&&C.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),C.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&C.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&C.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=Q(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new St(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},e.prototype.keydownHandler=function(t){switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&("Delete"!==t.code&&t.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:t}))}},e.prototype.unBindEvents=function(){c(this.inputWrapper)||C.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),C.remove(this.inputElement,"mouseup",this.mouseUpHandler),C.remove(this.inputElement,"focus",this.inputFocusHandler),C.remove(this.inputElement,"blur",this.inputBlurHandler),C.remove(this.inputElement,"change",this.inputChangeHandler),this.enableMask&&C.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&C.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&C.remove(this.formElement,"reset",this.resetFormHandler)},e.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var t=this.inputElement.getAttribute("value");("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(t="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(t),this.errorClass())}},e.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=c(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},e.prototype.inputChangeHandler=function(t){this.enabled&&t.stopPropagation()},e.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&C.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},e.prototype.resetHandler=function(t){this.enabled&&(t.preventDefault(),this.clear(t))},e.prototype.mouseUpHandler=function(t){this.enableMask&&(t.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},e.prototype.clear=function(t){if(this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),this.trigger("cleared",{event:t}),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(t),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),k(this.element,"form")){var n=this.element,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}},e.prototype.preventEventBubbling=function(t){t.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},e.prototype.updateInputValue=function(t){ie.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.dateIconHandler=function(t){this.enabled&&(this.isIconClicked=!0,E.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),t.preventDefault(),this.readonly||(this.isCalendar()?this.hide(t):(this.isDateIconClicked=!0,this.show(null,t),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),M([this.inputWrapper.container],[uP]),M(this.inputWrapper.buttons,vI))),this.isIconClicked=!1)},e.prototype.updateHtmlAttributeToWrapper=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];if(!c(this.htmlAttributes[""+n])&&D9.indexOf(n)>-1)if("class"===n){var r=this.htmlAttributes[""+n].replace(/\s+/g," ").trim();""!==r&&M([this.inputWrapper.container],r.split(" "))}else if("style"===n){var o=this.inputWrapper.container.getAttribute(n);c(o)?o=this.htmlAttributes[""+n]:";"===o.charAt(o.length-1)?o+=this.htmlAttributes[""+n]:o=o+";"+this.htmlAttributes[""+n],this.inputWrapper.container.setAttribute(n,o)}else this.inputWrapper.container.setAttribute(n,this.htmlAttributes[""+n])}},e.prototype.updateHtmlAttributeToElement=function(){if(!c(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];D9.indexOf(n)<0&&this.inputElement.setAttribute(n,this.htmlAttributes[""+n])}},e.prototype.updateCssClass=function(t,i){c(i)||(i=i.replace(/\s+/g," ").trim()),c(t)||(t=t.replace(/\s+/g," ").trim()),ie.setCssClass(t,[this.inputWrapper.container],i),this.popupWrapper&&ie.setCssClass(t,[this.popupWrapper],i)},e.prototype.calendarKeyActionHandle=function(t){switch(t.action){case"escape":this.isCalendar()?this.hide(t):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,t),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(t)}},e.prototype.inputFocusHandler=function(){if(this.isFocused=!0,this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&("Auto"===this.floatLabelType||"Never"===this.floatLabelType||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length);var t={model:this};this.isDateIconClicked=!1,this.trigger("focus",t),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},e.prototype.inputHandler=function(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},e.prototype.inputBlurHandler=function(t){this.enabled&&(this.strictModeUpdate(),""===this.inputElement.value&&c(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.isBlur=!0,this.updateInput(!1,!0),this.isBlur=!1,this.popupUpdate(),this.changeTrigger(t),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&this.inputElement.value===this.maskedDateValue&&!this.value&&("Auto"===this.floatLabelType||"Never"===this.floatLabelType||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(t),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=Q(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new St(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1)},e.prototype.documentHandler=function(t){!c(this.popupObj)&&!c(this.inputWrapper)&&(this.inputWrapper.container.contains(t.target)&&"mousedown"!==t.type||this.popupObj.element&&this.popupObj.element.contains(t.target))&&"touchstart"!==t.type&&t.preventDefault();var i=t.target;k(i,".e-datepicker.e-popup-wrapper")||c(this.inputWrapper)||k(i,".e-input-group")===this.inputWrapper.container||i.classList.contains("e-day")?k(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!c(t.target.parentElement)&&t.target.parentElement.classList.contains("e-selected")&&k(i,".e-content")&&k(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())||k(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+s.prototype.generateTodayVal.call(this,this.value))&&this.hide(t):(this.hide(t),this.focusOut())},e.prototype.inputKeyActionHandle=function(t){var i=this.currentView();switch(t.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(t),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(t),"datepicker"===this.getModuleName()&&this.show(null,t);break;case"escape":this.hide(t);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(t),this.errorClass(),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(t),this.isCalendar()&&(t.preventDefault(),t.stopPropagation());break;case"tab":case"shiftTab":var n=this.inputElement.selectionStart,r=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var o=this.inputElement.value.length;(0===n&&r===o||r!==o&&"tab"===t.action||0!==n&&"shiftTab"===t.action)&&t.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:t}),n=this.inputElement.selectionStart,r=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(t),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=n,this.inputElement.selectionEnd=r),this.hide(t);break;default:this.defaultAction(t),"select"===t.action&&i===this.depth&&this.hide(t)}},e.prototype.defaultAction=function(t){this.previousDate=!c(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(s.prototype.keyActionHandle.call(this,t),this.isCalendar()&&re(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},e.prototype.popupUpdate=function(){if((c(this.value)&&!c(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+yI).length>0&&A(this.popupObj.element.querySelectorAll("."+yI),[yI]),!c(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var t=new Date(this.checkValue(this.value));s.prototype.navigateTo.call(this,"Month",t)}},e.prototype.strictModeUpdate=function(){var t,r,o;t="datetimepicker"===this.getModuleName()?c(this.formatString)?this.dateTimeFormat:this.formatString:c(this.formatString)?this.formatString:this.formatString.replace("dd","d"),c(t)||t.split("M").length-1<3&&(t=t.replace("MM","M")),r="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:c(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:c(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:t,type:"dateTime",skeleton:"yMd"}:{format:t,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?o=this.checkDateValue(this.globalize.parseDate(this.inputElement.value,r))?this.globalize.parseDate(this.inputElement.value.toLocaleUpperCase(),r):this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(o=!c(o=this.globalize.parseDate(this.inputElement.value,r))&&isNaN(+o)?null:o,!c(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&o.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&o&&o.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&o?(this.updateInputValue(this.globalize.formatDate(o,r)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:o},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:o},!0),this.strictMode&&!o&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),c(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))},e.prototype.createCalendar=function(){var t=this;this.popupWrapper=this.createElement("div",{className:mI+" "+T9}),c(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),E.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=mI+" e-date-modal",document.body.className+=" "+E9,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new dr(this.popupWrapper,{content:this.calendarElement,relateTo:E.isDevice?document.body:this.inputWrapper.container,position:E.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:E.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){E.isDevice&&t.fullScreenMode&&(t.iconRight=parseInt(window.getComputedStyle(t.calendarElement.querySelector(".e-header.e-month .e-prev")).marginRight,10)>16,t.touchModule=new hr(t.calendarElement.querySelector(".e-content.e-month"),{swipe:t.CalendarSwipeHandler.bind(t)}),C.add(t.calendarElement.querySelector(".e-content.e-month"),"touchstart",t.TouchStartHandler,t)),"datetimepicker"!==t.getModuleName()&&document.activeElement!==t.inputElement&&(t.defaultKeyConfigs=Q(t.defaultKeyConfigs,t.keyConfigs),t.calendarElement.children[1].firstElementChild.focus(),t.calendarKeyboardModules=new St(t.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:t.calendarKeyActionHandle.bind(t),keyConfigs:t.defaultKeyConfigs}),t.calendarKeyboardModules=new St(t.inputWrapper.container.children[t.index],{eventName:"keydown",keyAction:t.calendarKeyActionHandle.bind(t),keyConfigs:t.defaultKeyConfigs}))},close:function(){t.isDateIconClicked&&t.inputWrapper.container.children[t.index].focus(),t.value&&t.disabledDates(),t.popupObj&&t.popupObj.destroy(),t.resetCalendar(),z(t.popupWrapper),t.popupObj=t.popupWrapper=null,t.preventArgs=null,t.calendarKeyboardModules=null,t.setAriaAttributes()},targetExitViewport:function(){E.isDevice||t.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},e.prototype.CalendarSwipeHandler=function(t){var i=0;if(this.iconRight)switch(t.swipeDirection){case"Left":i=1;break;case"Right":i=-1}else switch(t.swipeDirection){case"Up":i=1;break;case"Down":i=-1}this.touchStart&&(1===i?this.navigateNext(t):-1===i&&this.navigatePrevious(t),this.touchStart=!1)},e.prototype.TouchStartHandler=function(t){this.touchStart=!0},e.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},e.prototype.modelHeader=function(){var t,i=this.createElement("div",{className:"e-model-header"}),n=this.createElement("h1",{className:"e-model-year"}),r=this.createElement("div"),o=this.createElement("span",{className:"e-model-day"}),a=this.createElement("span",{className:"e-model-month"});if(t="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},n.textContent=""+this.globalize.formatDate(this.value||new Date,t),t="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},o.textContent=this.globalize.formatDate(this.value||new Date,t)+", ",t="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},a.textContent=""+this.globalize.formatDate(this.value||new Date,t),this.fullScreenMode){var l=this.createElement("span",{className:"e-popup-close"});C.add(l,"mousedown touchstart",this.modelCloseHandler,this);var h=this.calendarElement.querySelector("button.e-today");r.classList.add("e-day-wrapper"),h.classList.add("e-outline"),i.appendChild(l),i.appendChild(h)}this.fullScreenMode||i.appendChild(n),r.appendChild(o),r.appendChild(a),i.appendChild(r),this.calendarElement.insertBefore(i,this.calendarElement.firstElementChild)},e.prototype.modelCloseHandler=function(t){this.hide()},e.prototype.changeTrigger=function(t){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=t||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!c(t),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)},e.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},e.prototype.changeEvent=function(t){!this.isIconClicked&&!this.isBlur&&this.selectCalendar(t),(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())?(this.changedArgs.event=t||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(t),this.previousElementValue=this.inputElement.value,this.errorClass()):t&&this.hide(t)},e.prototype.requiredModules=function(){var t=[];return this&&t.push({args:[this],member:"islamic"}),this.enableMask&&t.push({args:[this],member:"MaskedDateTime"}),t},e.prototype.selectCalendar=function(t){var i,n;n="datetimepicker"===this.getModuleName()&&c(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&(i="datetimepicker"===this.getModuleName()?this.globalize.formatDate(this.changedArgs.value,"Gregorian"===this.calendarMode?{format:n,type:"dateTime",skeleton:"yMd"}:{format:n,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(this.changedArgs.value,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),c(i)||(this.updateInputValue(i),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},e.prototype.isCalendar=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+T9))},e.prototype.setWidth=function(t){this.inputWrapper.container.style.width="number"==typeof t?oe(this.width):"string"==typeof t?t.match(/px|%|em/)?this.width:oe(this.width):"100%"},e.prototype.show=function(t,i){var n=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var r=!0,o=void 0;c(this.value)||+this.value>=+new Date(this.checkValue(this.min))&&+this.value<=+new Date(this.checkValue(this.max))?o=this.value||null:(o=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(s.prototype.render.call(this),this.setProperties({value:o||null},!0),this.previousDate=o,this.createCalendar()),E.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){r=!1},popup:this.popupObj,event:i||null,cancel:!1,appendTo:E.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,function(l){(n.preventArgs=l,r&&!n.preventArgs.cancel)?(M(n.inputWrapper.buttons,vI),n.preventArgs.appendTo.appendChild(n.popupWrapper),n.popupObj.refreshPosition(n.inputElement),n.popupObj.show(new Gi({name:"FadeIn",duration:E.isDevice?0:300}),1e3===n.zIndex?n.element:null),s.prototype.setOverlayIndex.call(n,n.mobilePopupWrapper,n.popupObj.element,n.modal,E.isDevice),n.setAriaAttributes()):(n.popupObj.destroy(),n.popupWrapper=n.popupObj=null);!c(n.inputElement)&&""===n.inputElement.value&&!c(n.tableBodyElement)&&n.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(M([n.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),A(n.tableBodyElement.querySelectorAll("td.e-selected"),yI)),C.add(document,"mousedown touchstart",n.documentHandler,n)})}},e.prototype.hide=function(t){var i=this;if(c(this.popupWrapper))E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var n=!0;this.preventArgs={preventDefault:function(){n=!1},popup:this.popupObj,event:t||null,cancel:!1},A(this.inputWrapper.buttons,vI),A([document.body],E9);var r=this.preventArgs;this.isCalendar()?this.trigger("close",r,function(o){i.closeEventCallback(n,o)}):this.closeEventCallback(n,r)}},e.prototype.closeEventCallback=function(t,i){this.preventArgs=i,this.isCalendar()&&t&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),A(this.inputWrapper.buttons,vI)),this.setAriaAttributes(),E.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),E.isDevice&&!c(this.mobilePopupWrapper)&&t&&(c(this.preventArgs)||!this.preventArgs.cancel)&&(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null),C.remove(document,"mousedown touchstart",this.documentHandler),E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},e.prototype.focusIn=function(t){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),M([this.inputWrapper.container],[uP]))},e.prototype.focusOut=function(){document.activeElement===this.inputElement&&(A([this.inputWrapper.container],[uP]),this.inputElement.blur())},e.prototype.currentView=function(){var t;return this.calendarElement&&(t=s.prototype.currentView.call(this)),t},e.prototype.navigateTo=function(t,i){this.calendarElement&&s.prototype.navigateTo.call(this,t,i)},e.prototype.destroy=function(){this.unBindEvents(),s.prototype.destroy.call(this),c(this.keyboardModules)||this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&s.prototype.destroy.call(this),this.inputElement&&(ie.removeAttributes({"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),c(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),C.remove(this.inputElement,"blur",this.inputBlurHandler),C.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&z(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(c(this.inputWrapper)||this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),A([this.inputElement],["e-input"])),A([this.element],[mI]),c(this.inputWrapper)||z(this.inputWrapper.container)),this.formElement&&C.remove(this.formElement,"reset",this.resetFormHandler),this.inputWrapper=null,this.keyboardModules=null},e.prototype.ensureInputAttribute=function(){for(var t=[],i=0;i<this.inputElement.attributes.length;i++)t[i]=this.inputElement.attributes[i].name;for(i=0;i<t.length;i++)c(this.inputElementCopy.getAttribute(t[i]))?("value"===t[i].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(t[i])):("value"===t[i].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(t[i])),this.inputElement.setAttribute(t[i],this.inputElementCopy.getAttribute(t[i])))},e.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),A([this.inputElementCopy],[mI,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=k(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=yt("ej2-datetimepicker"),null!==this.ngTag&&re(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=yt("ej2-datepicker"),null!==this.ngTag&&re(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),s.prototype.preRender.call(this)},e.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},e.prototype.validationAttribute=function(t,i){var n=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");i.setAttribute("name",n),t.removeAttribute("name");for(var r=["required","aria-required","form"],o=0;o<r.length;o++)if(!c(t.getAttribute(r[o]))){var a=t.getAttribute(r[o]);i.setAttribute(r[o],a),t.removeAttribute(r[o])}},e.prototype.checkFormat=function(){var t=new qt(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||c(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{var i=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?t.getDatePattern({skeleton:i,type:"dateTime"}):t.getDatePattern({skeleton:i,type:"date"})}else this.formatString=null},e.prototype.checkHtmlAttributes=function(t){this.globalize=new qt(this.locale),this.checkFormat(),this.checkView();var n,i=t?c(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];n="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:c(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:c(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var r=0,o=i;r<o.length;r++){var a=o[r];if(!c(this.inputElement.getAttribute(a)))switch(a){case"disabled":if(c(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||t){var l=!("disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a));this.setProperties({enabled:l},!t)}break;case"readonly":if(c(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||t){var h="readonly"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:h},!t)}break;case"placeholder":(c(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||t)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!t);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(a));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(a));break;case"value":if(c(this.datepickerOptions)||void 0===this.datepickerOptions.value||t){var d=this.inputElement.getAttribute(a);this.setProperties(ke(a,this.globalize.parseDate(d,n),{}),!t)}break;case"min":if(+this.min==+new Date(1900,0,1)||t){var p=this.inputElement.getAttribute(a);this.setProperties(ke(a,this.globalize.parseDate(p),{}),!t)}break;case"max":if(+this.max==+new Date(2099,11,31)||t){var u=this.inputElement.getAttribute(a);this.setProperties(ke(a,this.globalize.parseDate(u),{}),!t)}break;case"type":"text"!==this.inputElement.getAttribute(a)&&this.inputElement.setAttribute("type","text")}}},e.prototype.getModuleName=function(){return"datepicker"},e.prototype.disabledDates=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var o=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),a=this.previousDate;this.minMaxUpdates(),(!t||t&&!c(this.renderDayCell))&&s.prototype.render.call(this),this.previousDate=a;var d,h='*[id^="/id"]'.replace("/id",""+(o&&+o));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+o)&&this.setProperties({value:o},!0),!c(this.calendarElement)&&!c(this.calendarElement.querySelectorAll(h)[0])&&this.calendarElement.querySelectorAll(h)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),d="datetimepicker"===this.getModuleName()?this.globalize.formatDate(o,"Gregorian"===this.calendarMode?{format:c(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:c(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(o,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.popupObj||(this.updateInputValue(d),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime",isBlur:i})))},e.prototype.setAriaAttributes=function(){this.isCalendar()?(ie.addAttributes({"aria-expanded":"true"},this.inputElement),re(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),this.value&&re(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(ie.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant"))},e.prototype.errorClass=function(){var t='*[id^="/id"]'.replace("/id",""+ +this.value),i=this.calendarElement&&this.calendarElement.querySelectorAll(t)[0]&&this.calendarElement.querySelectorAll(t)[0].classList.contains("e-disabled");!(c(this.value)||c(this.min)||c(this.max)||new Date(this.value).setMilliseconds(0)>=new Date(this.min).setMilliseconds(0)&&new Date(this.value).setMilliseconds(0)<=new Date(this.max).setMilliseconds(0))||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&c(this.value)||i?(M([this.inputWrapper.container],M9),re(this.inputElement,{"aria-invalid":"true"})):c(this.inputWrapper)||(A([this.inputWrapper.container],M9),re(this.inputElement,{"aria-invalid":"false"}))},e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,this.previousElementValue=this.inputElement.value,c(this.value)&&(this.updateInputValue(this.enableMask?this.maskedDateValue:""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":ie.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":ie.setReadonly(this.readonly,this.inputElement);break;case"enabled":ie.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new qt(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ie.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":ie.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&s.prototype.onPropertyChanged.call(this,t,i);break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"showClearButton":ie.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width),ie.calculateWidth(this.inputElement,this.inputWrapper.container),!c(this.inputWrapper.buttons[0])&&!c(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=t.floatLabelType,ie.removeFloating(this.inputWrapper),ie.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!c(this.inputWrapper.buttons[0])&&!c(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&s.prototype.onPropertyChanged.call(this,t,i)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},tn([v(null)],e.prototype,"width",void 0),tn([v(null)],e.prototype,"value",void 0),tn([v(null)],e.prototype,"cssClass",void 0),tn([v(!1)],e.prototype,"strictMode",void 0),tn([v(null)],e.prototype,"format",void 0),tn([v(!0)],e.prototype,"enabled",void 0),tn([v(!1)],e.prototype,"fullScreenMode",void 0),tn([v({})],e.prototype,"htmlAttributes",void 0),tn([v(null)],e.prototype,"values",void 0),tn([v(!1)],e.prototype,"isMultiSelection",void 0),tn([v(!0)],e.prototype,"showClearButton",void 0),tn([v(!0)],e.prototype,"allowEdit",void 0),tn([v(null)],e.prototype,"keyConfigs",void 0),tn([v(!1)],e.prototype,"enablePersistence",void 0),tn([v(1e3)],e.prototype,"zIndex",void 0),tn([v(!1)],e.prototype,"readonly",void 0),tn([v(null)],e.prototype,"placeholder",void 0),tn([v("Never")],e.prototype,"floatLabelType",void 0),tn([v(null)],e.prototype,"serverTimezoneOffset",void 0),tn([v(!1)],e.prototype,"openOnFocus",void 0),tn([v(!1)],e.prototype,"enableMask",void 0),tn([v({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),tn([V()],e.prototype,"open",void 0),tn([V()],e.prototype,"cleared",void 0),tn([V()],e.prototype,"close",void 0),tn([V()],e.prototype,"blur",void 0),tn([V()],e.prototype,"focus",void 0),tn([V()],e.prototype,"created",void 0),tn([V()],e.prototype,"destroyed",void 0),tn([et],e)}(vme);(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),function(s){s.createListItems=function e(t,i,n,r,o,a){var l,h=6e4*a,d=[],p=[];l=+i.setMilliseconds(0);for(var u=+n.setMilliseconds(0);u>=l;)p.push(l),d.push(r.formatDate(new Date(l),{format:o,type:"time"})),l+=h;return{collection:p,list:ot.createList(t,d,null,!0)}}}(IP||(IP={}));var mve=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Si=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},wve=(new Date).getDate(),Sve=(new Date).getMonth(),Cve=(new Date).getFullYear(),Ive=(new Date).getHours(),xve=(new Date).getMinutes(),Tve=(new Date).getSeconds(),Mve=(new Date).getMilliseconds(),q0="e-datetimepicker",K9="e-datetimepopup-wrapper",J9="e-popup",W0="e-input-focus",eq="e-icon-anim",xP="e-disabled",tq="e-error",Tc="e-active",TP="e-hover",Mc="e-list-item",nq="e-time-overflow",TI=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.valueWithMinutes=null,n.scrollInvoked=!1,n.moduleName=n.getModuleName(),n.dateTimeOptions=t,n}return mve(e,s),e.prototype.focusHandler=function(){this.enabled&&M([this.inputWrapper.container],W0)},e.prototype.focusIn=function(){s.prototype.focusIn.call(this)},e.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),A([this.inputWrapper.container],[W0]))},e.prototype.blurHandler=function(t){if(this.enabled){if(this.isTimePopupOpen()&&this.isPreventBlur)return void this.inputElement.focus();A([this.inputWrapper.container],W0);var i={model:this};this.isTimePopupOpen()&&this.hide(t),this.trigger("blur",i)}},e.prototype.destroy=function(){this.popupObject&&this.popupObject.element.classList.contains(J9)&&(this.popupObject.destroy(),z(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],c(this.rippleFn)||this.rippleFn()),this.inputElement&&ie.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.isCalendar()&&(this.popupWrapper&&z(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),this.liCollections=null,this.rippleFn=null,this.selectedElement=null,this.listTag=null,this.timeIcon=null,this.popupObject=null,this.preventArgs=null,this.keyboardModule=null,s.prototype.destroy.call(this)},e.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,!c(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),s.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1),this.l10n=new mi("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),s.prototype.render.call(this),this.createInputElement(),s.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(!0),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"===this.floatLabelType||!this.floatLabelType||!this.placeholder)&&ie.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),"Auto"===this.floatLabelType&&ie.calculateWidth(this.inputElement,this.inputWrapper.container),!c(this.inputWrapper.buttons[0])&&!c(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},e.prototype.setValue=function(t){if(void 0===t&&(t=!1),this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var i=this.validateMinMaxRange(this.initValue);ie.setValue(this.getFormattedValue(i),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:i},!0)}else c(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,s.prototype.updateInput.call(this,t)},e.prototype.validateMinMaxRange=function(t){var i=t;return this.isDateObject(t)?i=this.validateValue(t):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(i),i},e.prototype.checkValidState=function(t){this.isValidState=!0,this.strictMode||(+t>+this.max||+t<+this.min)&&(this.isValidState=!1),this.checkErrorState()},e.prototype.checkErrorState=function(){this.isValidState?A([this.inputWrapper.container],tq):M([this.inputWrapper.container],tq),re(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},e.prototype.validateValue=function(t){var i=t;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),i=this.max):+t<+this.min?i=this.min:+t>+this.max&&(i=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),i=t),i},e.prototype.disablePopupButton=function(t){t?(M([this.inputWrapper.buttons[0],this.timeIcon],xP),this.hide()):A([this.inputWrapper.buttons[0],this.timeIcon],xP)},e.prototype.getFormattedValue=function(t){var i;return c(t)?null:(i="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(t,i))},e.prototype.isDateObject=function(t){return!c(t)&&!isNaN(+t)},e.prototype.createInputElement=function(){A([this.inputElement],"e-datepicker"),A([this.inputWrapper.container],"e-date-wrapper"),M([this.inputWrapper.container],"e-datetime-wrapper"),M([this.inputElement],q0),this.renderTimeIcon()},e.prototype.renderTimeIcon=function(){this.timeIcon=ie.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)},e.prototype.bindInputEvents=function(){C.add(this.timeIcon,"mousedown",this.timeHandler,this),C.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),C.add(this.inputElement,"blur",this.blurHandler,this),C.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=Q(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new St(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},e.prototype.unBindInputEvents=function(){C.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),C.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(C.remove(this.inputElement,"blur",this.blurHandler),C.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},e.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?R("timeFormats.short",Zd()):this.getCultureTimeObject(Fr,""+this.locale):this.timeFormat},e.prototype.cldrDateTimeFormat=function(){var n=new qt(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?n+" "+this.getCldrFormat("time"):this.formatString},e.prototype.getCldrFormat=function(t){return"en"===this.locale||"en-US"===this.locale?R("timeFormats.short",Zd()):this.getCultureTimeObject(Fr,""+this.locale)},e.prototype.isNullOrEmpty=function(t){return!!(c(t)||"string"==typeof t&&""===t.trim())},e.prototype.getCultureTimeObject=function(t,i){return R("Gregorian"===this.calendarMode?"main."+this.locale+".dates.calendars.gregorian.timeFormats.short":"main."+this.locale+".dates.calendars.islamic.timeFormats.short",t)},e.prototype.timeHandler=function(t){this.enabled&&(this.isIconClicked=!0,E.isDevice&&this.inputElement.setAttribute("readonly",""),t.currentTarget===this.timeIcon&&t.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&s.prototype.hide.call(this,t),this.isTimePopupOpen()?this.closePopup(t):(this.inputElement.focus(),this.popupCreation("time",t),M([this.inputWrapper.container],[W0]))),this.isIconClicked=!1)},e.prototype.dateHandler=function(t){this.enabled&&(t.currentTarget===this.inputWrapper.buttons[0]&&t.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(t),c(this.popupWrapper)||this.popupCreation("date",t)))},e.prototype.show=function(t,i){this.enabled&&this.readonly||!this.enabled||("time"!==t||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(i),s.prototype.show.call(this),this.popupCreation("date",i)):(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)))},e.prototype.toggle=function(t){this.isDatePopupOpen()?(s.prototype.hide.call(this,t),this.show("time",null)):this.isTimePopupOpen()?(this.hide(t),s.prototype.show.call(this,null,t),this.popupCreation("date",null)):this.show(null,t)},e.prototype.listCreation=function(){var t;t=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var i=c(this.value)?""!==this.inputElement.value?t:new Date:this.value;this.valueWithMinutes=i,this.listWrapper=F("div",{className:"e-content",attrs:{tabindex:"0"}});var n=this.startTime(i),r=this.endTime(i),o=IP.createListItems(this.createElement,n,r,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=o.collection,this.listTag=o.list,re(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),Le([o.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=zi(this.listWrapper,{duration:300,selector:"."+Mc}),this.liCollections=this.listWrapper.querySelectorAll("."+Mc)},e.prototype.popupCreation=function(t,i){E.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===t?!this.readonly&&this.popupWrapper&&(M([this.popupWrapper],K9),re(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=F("div",{className:q0+" "+J9,attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),c(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!c(this.step)&&this.step>0&&(this.listCreation(),Le([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(i),(!E.isDevice||E.isDevice&&!this.fullScreenMode)&&this.popupObject.refreshPosition(this.inputElement),E.isDevice&&this.fullScreenMode&&(this.dateTimeWrapper.style.left="0px"))},e.prototype.openPopup=function(t){var i=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:t||null},this.trigger("open",this.preventArgs,function(r){if(i.preventArgs=r,!i.preventArgs.cancel&&!i.readonly){i.popupObject.show(new Gi({name:"FadeIn",duration:100}),1e3===i.zIndex?i.element:null),M([i.inputWrapper.container],[eq]),re(i.inputElement,{"aria-expanded":"true"}),re(i.inputElement,{"aria-owns":i.inputElement.id+"_options"}),C.add(document,"mousedown touchstart",i.documentClickHandler,i)}})},e.prototype.documentClickHandler=function(t){var i=t.target;!c(this.popupObject)&&(this.inputWrapper.container.contains(i)&&"mousedown"!==t.type||this.popupObject.element&&this.popupObject.element.contains(i))&&"touchstart"!==t.type&&t.preventDefault(),k(i,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||i===this.inputElement||i===this.timeIcon||c(this.inputWrapper)||i===this.inputWrapper.container?i!==this.inputElement&&(E.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(E.isIE||"edge"===E.info.name)&&i===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(t),this.focusOut())},e.prototype.isTimePopupOpen=function(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+q0))},e.prototype.isDatePopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+K9))},e.prototype.renderPopup=function(){var t=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),E.isDevice&&(this.timeModal=F("div"),this.timeModal.className=q0+" e-time-modal",document.body.className+=" "+nq,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new dr(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:E.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:E.isDevice?document.body:this.inputWrapper.container,position:E.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:function(){t.dateTimeWrapper.style.visibility="visible",M([t.timeIcon],Tc),E.isDevice||(t.timekeyConfigure=Q(t.timekeyConfigure,t.keyConfigs),t.inputEvent=new St(t.inputWrapper.container,{keyAction:t.timeKeyActionHandle.bind(t),keyConfigs:t.timekeyConfigure,eventName:"keydown"}))},close:function(){A([t.timeIcon],Tc),t.unWireTimeListEvents(),t.inputElement.removeAttribute("aria-activedescendant"),le(t.popupObject.element),t.popupObject.destroy(),t.dateTimeWrapper.innerHTML="",t.listWrapper=t.dateTimeWrapper=void 0,t.inputEvent&&t.inputEvent.destroy()},targetExitViewport:function(){E.isDevice||t.hide()}}),E.isDevice&&this.fullScreenMode?(this.popupObject.element.style.display="flex",this.popupObject.element.style.maxHeight="100%",this.popupObject.element.style.width="100%"):this.popupObject.element.style.maxHeight="250px",E.isDevice&&this.fullScreenMode){var n=F("div",{className:"e-datetime-mob-popup-wrap"}),r=this.createElement("div",{className:"e-model-header"}),o=this.createElement("span",{className:"e-model-title"});o.textContent="Select time";var a=this.createElement("span",{className:"e-popup-close"});C.add(a,"mousedown touchstart",this.dateTimeCloseHandler,this);var l=this.dateTimeWrapper.querySelector(".e-content");r.appendChild(a),r.appendChild(o),n.appendChild(r),n.appendChild(l),this.dateTimeWrapper.insertBefore(n,this.dateTimeWrapper.firstElementChild)}},e.prototype.dateTimeCloseHandler=function(t){this.hide()},e.prototype.setDimension=function(t){return"number"==typeof t?t=oe(t):"string"==typeof t||(t="100%"),t},e.prototype.setPopupWidth=function(){var t=this.setDimension(this.width);return t.indexOf("%")>-1&&(t=(this.containerStyle.width*parseFloat(t)/100).toString()+"px"),t},e.prototype.wireTimeListEvents=function(){C.add(this.listWrapper,"click",this.onMouseClick,this),E.isDevice||(C.add(this.listWrapper,"mouseover",this.onMouseOver,this),C.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},e.prototype.unWireTimeListEvents=function(){this.listWrapper&&(C.remove(this.listWrapper,"click",this.onMouseClick),C.remove(document,"mousedown touchstart",this.documentClickHandler),E.isDevice||(C.add(this.listWrapper,"mouseover",this.onMouseOver,this),C.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},e.prototype.onMouseOver=function(t){var i=k(t.target,"."+Mc);this.setTimeHover(i,TP)},e.prototype.onMouseLeave=function(){this.removeTimeHover(TP)},e.prototype.setTimeHover=function(t,i){this.enabled&&this.isValidLI(t)&&!t.classList.contains(i)&&(this.removeTimeHover(i),M([t],i))},e.prototype.getPopupHeight=function(){var t=parseInt("250px",10),i=this.dateTimeWrapper.getBoundingClientRect().height;return E.isDevice&&this.fullScreenMode?i:i>t?t:i},e.prototype.changeEvent=function(t){s.prototype.changeEvent.call(this,t),(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},e.prototype.updateValue=function(t){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:t||null,isInteracted:!c(t),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},e.prototype.setTimeScrollPosition=function(){var t=this.selectedElement;c(t)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(t)},e.prototype.findScrollTop=function(t){var i=this.getPopupHeight(),n=t.nextElementSibling,r=n?n.offsetTop:t.offsetTop,o=t.getBoundingClientRect().height;r+t.offsetTop>i?E.isDevice&&this.fullScreenMode?this.dateTimeWrapper.querySelector(".e-content").scrollTop=n?r-(i/2+o/2):r:this.dateTimeWrapper.scrollTop=n?r-(i/2+o/2):r:this.dateTimeWrapper.scrollTop=0},e.prototype.setScrollTo=function(){var t,i=this.dateTimeWrapper.querySelectorAll("."+Mc);if(i.length>=0){this.scrollInvoked=!0;var n=this.timeCollections[0],r=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();t=i[Math.round((r-n)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;c(t)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(t)},e.prototype.setInputValue=function(t){if("date"===t)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var i=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));ie.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},e.prototype.getFullDateTime=function(){var t;return t=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(t)},e.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},e.prototype.combineDateTime=function(t){if(this.isDateObject(t)){var i=this.previousDate.getDate(),n=this.previousDate.getMonth(),r=this.previousDate.getFullYear(),o=t.getHours(),a=t.getMinutes(),l=t.getSeconds();return new Date(r,n,i,o,a,l)}return this.previousDate},e.prototype.onMouseClick=function(t){var n=this.selectedElement=k(t.target,"."+Mc);n&&n.classList.contains(Mc)&&(this.timeValue=n.getAttribute("data-value"),this.hide(t)),this.setSelection(n,t)},e.prototype.setSelection=function(t,i){if(this.isValidLI(t)&&!t.classList.contains(Tc)){this.selectedElement=t;var n=Array.prototype.slice.call(this.liCollections).indexOf(t);this.activeIndex=n,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),M([this.selectedElement],Tc),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(i)}},e.prototype.setTimeActiveClass=function(){var t=c(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!c(t)){var i=t.querySelectorAll("."+Mc);if(i.length)for(var n=0;n<i.length;n++)if(this.timeCollections[n]===+this.valueWithMinutes){i[n].setAttribute("aria-selected","true"),this.selectedElement=i[n],this.activeIndex=n,this.setTimeActiveDescendant();break}}},e.prototype.setTimeActiveDescendant=function(){!c(this.selectedElement)&&this.value?re(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},e.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),c(this.selectedElement)||(M([this.selectedElement],Tc),this.selectedElement.setAttribute("aria-selected","true"))},e.prototype.removeTimeSelection=function(){if(this.removeTimeHover(TP),!c(this.dateTimeWrapper)){var t=this.dateTimeWrapper.querySelectorAll("."+Tc);t.length&&(A(t,Tc),t[0].removeAttribute("aria-selected"))}},e.prototype.removeTimeHover=function(t){var i=this.getTimeHoverItem(t);i&&i.length&&A(i,t)},e.prototype.getTimeHoverItem=function(t){var n,i=c(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return c(i)||(n=i.querySelectorAll("."+t)),n},e.prototype.isValidLI=function(t){return t&&t.classList.contains(Mc)&&!t.classList.contains(xP)},e.prototype.calculateStartEnd=function(t,i,n){var r=t.getDate(),o=t.getMonth(),a=t.getFullYear(),l=t.getHours(),h=t.getMinutes(),d=t.getSeconds(),p=t.getMilliseconds();return i?"starttime"===n?new Date(a,o,r,0,0,0):new Date(a,o,r,23,59,59):new Date(a,o,r,l,h,d,p)},e.prototype.startTime=function(t){var i,n,r=this.min,o=null===t?new Date:t;return+o.getDate()==+r.getDate()&&+o.getMonth()==+r.getMonth()&&+o.getFullYear()==+r.getFullYear()||+new Date(o.getFullYear(),o.getMonth(),o.getDate())<=+new Date(r.getFullYear(),r.getMonth(),r.getDate())?(n=!1,i=this.min):+o<+this.max&&+o>+this.min?(n=!0,i=o):+o>=+this.max&&(n=!0,i=this.max),this.calculateStartEnd(i,n,"starttime")},e.prototype.endTime=function(t){var i,n,r=this.max,o=null===t?new Date:t;return+o.getDate()==+r.getDate()&&+o.getMonth()==+r.getMonth()&&+o.getFullYear()==+r.getFullYear()||+new Date(o.getUTCFullYear(),o.getMonth(),o.getDate())>=+new Date(r.getFullYear(),r.getMonth(),r.getDate())?(n=!1,i=this.max):+o<+this.max&&+o>+this.min?(n=!0,i=o):+o<=+this.min&&(n=!0,i=this.min),this.calculateStartEnd(i,n,"endtime")},e.prototype.hide=function(t){var i=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:t||null};var n=this.preventArgs;c(this.popupObj)?this.trigger("close",n,function(r){i.dateTimeCloseEventCallback(t,r)}):this.dateTimeCloseEventCallback(t,n)}else E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},e.prototype.dateTimeCloseEventCallback=function(t,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?s.prototype.hide.call(this,t):this.isTimePopupOpen()&&(this.closePopup(t),A([document.body],nq),E.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),E.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},e.prototype.closePopup=function(t){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new Gi({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove(eq),re(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),C.remove(document,"mousedown touchstart",this.documentClickHandler))},e.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),s.prototype.preRender.call(this),A([this.inputElementCopy],[q0])},e.prototype.getProperty=function(t,i){this.setProperties("min"===i?{min:this.validateValue(t.min)}:{max:this.validateValue(t.max)},!0)},e.prototype.checkAttributes=function(t){for(var n,r=0,o=t?c(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];r<o.length;r++){var a=o[r];if(!c(this.inputElement.getAttribute(a)))switch(a){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(a));break;case"step":this.step=parseInt(this.inputElement.getAttribute(a),10);break;case"readonly":if(c(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||t){var l="disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:l},!t)}break;case"placeholder":(c(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||t)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!t);break;case"min":(c(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||t)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({min:n},!t));break;case"disabled":if(c(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||t){var h=!("disabled"===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a));this.setProperties({enabled:h},!t)}break;case"value":(c(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||t)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({value:n},!t));break;case"max":(c(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||t)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({max:n},!t))}}},e.prototype.requiredModules=function(){var t=[];return this&&t.push({args:[this],member:"islamic"}),this.enableMask&&t.push(this.maskedDateModule()),t},e.prototype.maskedDateModule=function(){return{args:[this],member:"MaskedDateTime"}},e.prototype.getTimeActiveElement=function(){return c(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+Tc)},e.prototype.createDateObj=function(t){return t instanceof Date?t:null},e.prototype.getDateObject=function(t){if(!this.isNullOrEmpty(t)){var i=this.createDateObj(t),n=this.valueWithMinutes,r=!c(n);if(this.checkDateValue(i)){var o=r?n.getDate():wve,a=r?n.getMonth():Sve,l=r?n.getFullYear():Cve,h=r?n.getHours():Ive,d=r?n.getMinutes():xve,p=r?n.getSeconds():Tve,u=r?n.getMilliseconds():Mve;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(l,a,o,i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(l,a,o,h,d,p,u)}}return null},e.prototype.findNextTimeElement=function(t){var i=this.inputElement.value,n=c(this.valueWithMinutes)?this.createDateObj(i):this.getDateObject(this.valueWithMinutes),r=null,o=this.liCollections.length;if(!c(this.activeIndex)||!c(this.checkDateValue(n))){if("home"===t.action)r=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===t.action)r=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===t.action){for(var a=0;a<o;a++)if(+n<this.timeCollections[a]){r=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}}else for(a=o-1;a>=0;a--)if(+n>this.timeCollections[a]){r=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(c(r)?null:new Date(r))}},e.prototype.setTimeValue=function(t,i){var n,r,o=this.validateMinMaxRange(i),a=this.createDateObj(o);return this.getFormattedValue(a)!==(c(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=c(a)?null:a,r=new Date(+this.valueWithMinutes)):(this.strictMode&&(t=a),this.valueWithMinutes=this.checkDateValue(t),r=new Date(+this.valueWithMinutes)),n=this.globalize.formatDate(r,"Gregorian"===this.calendarMode?{format:c(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:c(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&c(r),ie.setValue(n,this.inputElement,this.floatLabelType,this.showClearButton),r},e.prototype.timeElementValue=function(t){if(!c(this.checkDateValue(t))&&!this.isNullOrEmpty(t)){var i=t instanceof Date?t:this.getDateObject(t);return this.setTimeValue(i,t)}return null},e.prototype.timeKeyHandler=function(t){if(!(c(this.step)||this.step<=0)){var i=this.timeCollections.length;if(c(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(c(this.value)&&c(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(t));else{var n=void 0;if(t.keyCode>=37&&t.keyCode<=40){var r=40===t.keyCode||39===t.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=this.activeIndex===i?0:this.activeIndex,this.activeIndex=r=this.activeIndex<0?i-1:this.activeIndex,n=c(this.timeCollections[r])?this.timeCollections[0]:this.timeCollections[r]}else"home"===t.action?(this.activeIndex=0,n=this.timeCollections[0]):"end"===t.action&&(this.activeIndex=i-1,n=this.timeCollections[i-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(n))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),this.isTimePopupOpen()&&null!==this.selectedElement&&(!t||"click"!==t.type)&&this.setTimeScrollPosition()}},e.prototype.timeKeyActionHandle=function(t){if(this.enabled)switch("right"!==t.action&&"left"!==t.action&&"tab"!==t.action&&t.preventDefault(),t.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(t);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(t),this.hide(t),M([this.inputWrapper.container],W0),this.isNavigate=!1,t.stopPropagation();break;case"escape":this.hide(t);break;default:this.isNavigate=!1}},e.prototype.inputKeyAction=function(t){"altDownArrow"===t.action&&(this.strictModeUpdate(),this.updateInput(),this.toggle(t))},e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,t.value=this.validateValue(t.value),ie.setValue(this.enableMask?this.maskedDateValue:this.getFormattedValue(t.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=t.value,this.setProperties({value:t.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(t,o),this.updateInput();break;case"enableRtl":ie.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":c(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),c(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),ie.setCssClass(t.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&ie.setCssClass(t.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new qt(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ie.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),s.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:t.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||ie.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":ie.setPlaceholder(t.placeholder,this.inputElement);break;case"enabled":ie.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width),ie.calculateWidth(this.inputElement,this.inputWrapper.container),!c(this.inputWrapper.buttons[0])&&!c(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":ie.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,ie.removeFloating(this.inputWrapper),ie.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!c(this.inputWrapper.buttons[0])&&!c(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(t.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(t.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),ie.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",ie.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:s.prototype.onPropertyChanged.call(this,t,i)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},e.prototype.getModuleName=function(){return"datetimepicker"},e.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=c(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},Si([v(null)],e.prototype,"timeFormat",void 0),Si([v(30)],e.prototype,"step",void 0),Si([v(null)],e.prototype,"scrollTo",void 0),Si([v(1e3)],e.prototype,"zIndex",void 0),Si([v(null)],e.prototype,"value",void 0),Si([v(null)],e.prototype,"keyConfigs",void 0),Si([v({})],e.prototype,"htmlAttributes",void 0),Si([v(!1)],e.prototype,"enablePersistence",void 0),Si([v(!0)],e.prototype,"allowEdit",void 0),Si([v(!1)],e.prototype,"isMultiSelection",void 0),Si([v(null)],e.prototype,"values",void 0),Si([v(!0)],e.prototype,"showClearButton",void 0),Si([v(null)],e.prototype,"placeholder",void 0),Si([v(!1)],e.prototype,"strictMode",void 0),Si([v(!1)],e.prototype,"fullScreenMode",void 0),Si([v(null)],e.prototype,"serverTimezoneOffset",void 0),Si([v(new Date(1900,0,1))],e.prototype,"min",void 0),Si([v(new Date(2099,11,31))],e.prototype,"max",void 0),Si([v(null)],e.prototype,"firstDayOfWeek",void 0),Si([v("Gregorian")],e.prototype,"calendarMode",void 0),Si([v("Month")],e.prototype,"start",void 0),Si([v("Month")],e.prototype,"depth",void 0),Si([v(!1)],e.prototype,"weekNumber",void 0),Si([v(!0)],e.prototype,"showTodayButton",void 0),Si([v("Short")],e.prototype,"dayHeaderFormat",void 0),Si([v(!1)],e.prototype,"openOnFocus",void 0),Si([v(!1)],e.prototype,"enableMask",void 0),Si([v({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),Si([V()],e.prototype,"open",void 0),Si([V()],e.prototype,"close",void 0),Si([V()],e.prototype,"cleared",void 0),Si([V()],e.prototype,"blur",void 0),Si([V()],e.prototype,"focus",void 0),Si([V()],e.prototype,"created",void 0),Si([V()],e.prototype,"destroyed",void 0),Si([et],e)}(B0),Nve=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),lq=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Ec="e-rtl",Dc="e-overlay",G0="e-nav-arrow",Y0="e-nav-right-arrow",EI="e-nav-left-arrow",hf="e-scroll-nav",MP="e-scroll-right-nav",hq="e-scroll-left-nav",dq="e-scroll-device",DI="e-scroll-overlay",EP="e-scroll-right-overlay",DP="e-scroll-left-overlay",kI=function(s){function e(t,i){return s.call(this,t,i)||this}return Nve(e,s),e.prototype.preRender=function(){this.browser=E.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=E.isDevice,this.customStep=!0;var t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=yt("hscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add(Ec)},e.prototype.render=function(){this.touchModule=new hr(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),C.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(dq),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},e.prototype.setScrollState=function(){c(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},e.prototype.initialize=function(){var t=this.createElement("div",{className:"e-hscroll-content"}),i=this.createElement("div",{className:"e-hscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)t.appendChild(a[o]);i.appendChild(t),n.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=t},e.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},e.prototype.getModuleName=function(){return"hScroll"},e.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove(dq),t.classList.remove(Ec);var i=me(".e-"+t.id+"_nav."+hf,t),n=me("."+DI,t);[].slice.call(n).forEach(function(l){z(l)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++)t.appendChild(o[r]);this.uniqueId&&this.element.removeAttribute("id"),z(this.scrollEle),i.length>0&&(z(i[0]),c(i[1])||z(i[1])),C.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,s.prototype.destroy.call(this)},e.prototype.disable=function(t){var i=me(".e-scroll-nav:not(."+Dc+")",this.element);t?this.element.classList.add(Dc):this.element.classList.remove(Dc),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",t?"-1":"0")})},e.prototype.createOverlay=function(t){var i=t.id.concat("_nav"),n=this.createElement("div",{className:DI+" "+EP}),r="e-"+t.id.concat("_nav "+hf+" "+MP),o=this.createElement("div",{id:i.concat("_right"),className:r}),a=this.createElement("div",{className:Y0+" "+G0+" e-icons"});o.appendChild(a);var l=this.createElement("div",{className:DI+" "+DP});this.ieCheck&&o.classList.add("e-ie-align"),t.appendChild(n),t.appendChild(o),t.insertBefore(l,t.firstChild),this.eventBinding([o])},e.prototype.createNavIcon=function(t){var i=t.id.concat("_nav"),n="e-"+t.id.concat("_nav "+hf+" "+MP),r={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:n,attrs:r});o.setAttribute("aria-disabled","false");var a=this.createElement("div",{className:Y0+" "+G0+" e-icons"}),l="e-"+t.id.concat("_nav "+hf+" "+hq),h={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},d=this.createElement("div",{className:l+" "+Dc,attrs:h});d.setAttribute("aria-disabled","true");var p=this.createElement("div",{className:EI+" "+G0+" e-icons"});d.appendChild(p),o.appendChild(a),t.appendChild(o),t.insertBefore(d,t.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),d.classList.add("e-ie-align")),this.eventBinding([o,d])},e.prototype.onKeyPress=function(t){var i=this;"Enter"===t.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,t.target,!0)},100))},e.prototype.onKeyUp=function(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))},e.prototype.eventBinding=function(t){var i=this;[].slice.call(t).forEach(function(n){new hr(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(r){r.preventDefault()}),C.add(n,"click",i.clickEventHandler,i)})},e.prototype.repeatScroll=function(){clearInterval(this.timeout)},e.prototype.tabHoldHandler=function(t){var i=this,n=t.originalEvent.target;n=this.contains(n,hf)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},e.prototype.contains=function(t,i){return t.classList.contains(i)},e.prototype.eleScrolling=function(t,i,n){var r=this.element,o=i.classList;o.contains(hf)&&(o=i.querySelector("."+G0).classList),this.contains(r,Ec)&&this.browserCheck&&(t=-t),!this.contains(r,Ec)||this.browserCheck||this.ieCheck?o.contains(Y0)?this.frameScrollRequest(t,"add",n):this.frameScrollRequest(t,"",n):o.contains(EI)?this.frameScrollRequest(t,"add",n):this.frameScrollRequest(t,"",n)},e.prototype.clickEventHandler=function(t){this.eleScrolling(this.scrollStep,t.target,!1)},e.prototype.swipeHandler=function(t){var n,i=this.scrollEle;n=t.velocity<=1?t.distanceX/(10*t.velocity):t.distanceX/t.velocity;var r=.5,o=function(){var a=Math.sin(r);a<=0?window.cancelAnimationFrame(a):("Left"===t.swipeDirection?i.scrollLeft+=n*a:"Right"===t.swipeDirection&&(i.scrollLeft-=n*a),r-=.5,window.requestAnimationFrame(o))};o()},e.prototype.scrollUpdating=function(t,i){"add"===i?this.scrollEle.scrollLeft+=t:this.scrollEle.scrollLeft-=t,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},e.prototype.frameScrollRequest=function(t,i,n){var r=this;if(n)this.scrollUpdating(t,i);else{this.customStep||[].slice.call(me("."+DI,this.element)).forEach(function(l){t-=l.offsetWidth});var a=function(){var l,h;r.contains(r.element,Ec)&&r.browserCheck?(l=-t,h=-10):(l=t,h=10),l<10?window.cancelAnimationFrame(h):(r.scrollUpdating(h,i),t-=h,window.requestAnimationFrame(a))};a()}},e.prototype.touchHandler=function(t){var i=this.scrollEle,n=t.distanceX;this.ieCheck&&this.contains(this.element,Ec)&&(n=-n),"Left"===t.scrollDirection?i.scrollLeft=i.scrollLeft+n:"Right"===t.scrollDirection&&(i.scrollLeft=i.scrollLeft-n)},e.prototype.arrowDisabling=function(t,i){if(this.isDevice){var r=(c(t)?i:t).querySelector("."+G0);c(t)?ze(r,[Y0],[EI]):ze(r,[EI],[Y0])}else t&&i&&(t.classList.add(Dc),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),i.classList.remove(Dc),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()},e.prototype.scrollHandler=function(t){var i=t.target,n=i.offsetWidth,o=this.element.querySelector("."+hq),a=this.element.querySelector("."+MP),l=this.element.querySelector("."+DP),h=this.element.querySelector("."+EP),d=i.scrollLeft;if(d<=0&&(d=-d),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(l=this.element.querySelector("."+EP),h=this.element.querySelector("."+DP)),l.style.width=d<40?d+"px":"40px",h.style.width=i.scrollWidth-Math.ceil(n+d)<40?i.scrollWidth-Math.ceil(n+d)+"px":"40px"),0===d)this.arrowDisabling(o,a);else if(Math.ceil(n+d+.1)>=i.scrollWidth)this.arrowDisabling(a,o);else{var p=this.element.querySelector("."+hf+"."+Dc);p&&(p.classList.remove(Dc),p.setAttribute("aria-disabled","false"),p.setAttribute("tabindex","0"))}},e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add(Ec):this.element.classList.remove(Ec)}},lq([v(null)],e.prototype,"scrollStep",void 0),lq([et],e)}(Lt),Bve=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),cq=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},AI="e-rtl",kc="e-overlay",Q0="e-nav-arrow",LI="e-nav-up-arrow",X0="e-nav-down-arrow",df="e-scroll-nav",uq="e-scroll-up-nav",kP="e-scroll-down-nav",fq="e-scroll-device",VI="e-scroll-overlay",gq="e-scroll-up-overlay",mq="e-scroll-down-overlay",km=function(s){function e(t,i){return s.call(this,t,i)||this}return Bve(e,s),e.prototype.preRender=function(){this.browser=E.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=E.isDevice,this.customStep=!0;var t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=yt("vscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add(AI)},e.prototype.render=function(){this.touchModule=new hr(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),C.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(fq),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),C.add(this.element,"wheel",this.wheelEventHandler,this)},e.prototype.setScrollState=function(){c(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},e.prototype.initialize=function(){var t=F("div",{className:"e-vscroll-content"}),i=F("div",{className:"e-vscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)t.appendChild(a[o]);i.appendChild(t),n.appendChild(i),i.style.overflow="hidden",this.scrollEle=i,this.scrollItems=t},e.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},e.prototype.getModuleName=function(){return"vScroll"},e.prototype.destroy=function(){var t=this.element;t.style.display="",A([this.element],["e-vscroll",fq,AI]);var i=me(".e-"+t.id+"_nav."+df,t),n=me("."+VI,t);[].slice.call(n).forEach(function(l){z(l)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++)t.appendChild(o[r]);this.uniqueId&&this.element.removeAttribute("id"),z(this.scrollEle),i.length>0&&(z(i[0]),c(i[1])||z(i[1])),C.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,s.prototype.destroy.call(this)},e.prototype.disable=function(t){var i=me(".e-scroll-nav:not(."+kc+")",this.element);t?this.element.classList.add(kc):this.element.classList.remove(kc),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",t?"-1":"0")})},e.prototype.createOverlayElement=function(t){var i=t.id.concat("_nav"),n=F("div",{className:VI+" "+mq}),r="e-"+t.id.concat("_nav "+df+" "+kP),o=F("div",{id:i.concat("down"),className:r}),a=F("div",{className:X0+" "+Q0+" e-icons"});o.appendChild(a);var l=F("div",{className:VI+" "+gq});this.ieCheck&&o.classList.add("e-ie-align"),t.appendChild(n),t.appendChild(o),t.insertBefore(l,t.firstChild),this.eventBinding([o])},e.prototype.createNavIcon=function(t){var i=t.id.concat("_nav"),n="e-"+t.id.concat("_nav "+df+" "+kP),r=F("div",{id:i.concat("_down"),className:n});r.setAttribute("aria-disabled","false");var o=F("div",{className:X0+" "+Q0+" e-icons"}),a="e-"+t.id.concat("_nav "+df+" "+uq),l=F("div",{id:i.concat("_up"),className:a+" "+kc});l.setAttribute("aria-disabled","true");var h=F("div",{className:LI+" "+Q0+" e-icons"});l.appendChild(h),r.appendChild(o),r.setAttribute("tabindex","0"),t.appendChild(r),t.insertBefore(l,t.firstChild),this.ieCheck&&(r.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([r,l])},e.prototype.onKeyPress=function(t){var i=this;"Enter"===t.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,t.target,!0)},100))},e.prototype.onKeyUp=function(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))},e.prototype.eventBinding=function(t){var i=this;[].slice.call(t).forEach(function(n){new hr(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(r){r.preventDefault()}),C.add(n,"click",i.clickEventHandler,i)})},e.prototype.repeatScroll=function(){clearInterval(this.timeout)},e.prototype.tabHoldHandler=function(t){var i=this,n=t.originalEvent.target;n=this.contains(n,df)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},e.prototype.contains=function(t,i){return t.classList.contains(i)},e.prototype.eleScrolling=function(t,i,n){var r=i.classList;r.contains(df)&&(r=i.querySelector("."+Q0).classList),r.contains(X0)?this.frameScrollRequest(t,"add",n):r.contains(LI)&&this.frameScrollRequest(t,"",n)},e.prototype.clickEventHandler=function(t){this.eleScrolling(this.scrollStep,t.target,!1)},e.prototype.wheelEventHandler=function(t){t.preventDefault(),this.frameScrollRequest(this.scrollStep,t.deltaY>0?"add":"",!1)},e.prototype.swipeHandler=function(t){var n,i=this.scrollEle;n=t.velocity<=1?t.distanceY/(10*t.velocity):t.distanceY/t.velocity;var r=.5,o=function(){var a=Math.sin(r);a<=0?window.cancelAnimationFrame(a):("Up"===t.swipeDirection?i.scrollTop+=n*a:"Down"===t.swipeDirection&&(i.scrollTop-=n*a),r-=.02,window.requestAnimationFrame(o))};o()},e.prototype.scrollUpdating=function(t,i){"add"===i?this.scrollEle.scrollTop+=t:this.scrollEle.scrollTop-=t},e.prototype.frameScrollRequest=function(t,i,n){var r=this;if(n)this.scrollUpdating(t,i);else{this.customStep||[].slice.call(me("."+VI,this.element)).forEach(function(l){t-=l.offsetHeight});var a=function(){t<10?window.cancelAnimationFrame(10):(r.scrollUpdating(10,i),t-=10,window.requestAnimationFrame(a))};a()}},e.prototype.touchHandler=function(t){var i=this.scrollEle,n=t.distanceY;"Up"===t.scrollDirection?i.scrollTop=i.scrollTop+n:"Down"===t.scrollDirection&&(i.scrollTop=i.scrollTop-n)},e.prototype.arrowDisabling=function(t,i){if(this.isDevice){var r=(c(t)?i:t).querySelector("."+Q0);c(t)?ze(r,[X0],[LI]):ze(r,[LI],[X0])}else t.classList.add(kc),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),i.classList.remove(kc),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()},e.prototype.scrollEventHandler=function(t){var i=t.target,n=i.offsetHeight,r=this.element.querySelector("."+uq),o=this.element.querySelector("."+kP),a=this.element.querySelector("."+gq),l=this.element.querySelector("."+mq),h=i.scrollTop;if(h<=0&&(h=-h),this.isDevice&&(a.style.height=h<40?h+"px":"40px",l.style.height=i.scrollHeight-Math.ceil(n+h)<40?i.scrollHeight-Math.ceil(n+h)+"px":"40px"),0===h)this.arrowDisabling(r,o);else if(Math.ceil(n+h+.1)>=i.scrollHeight)this.arrowDisabling(o,r);else{var d=this.element.querySelector("."+df+"."+kc);d&&(d.classList.remove(kc),d.setAttribute("aria-disabled","false"),d.setAttribute("tabindex","0"))}},e.prototype.onPropertyChanged=function(t,i){for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add(AI):this.element.classList.remove(AI)}},cq([v(null)],e.prototype,"scrollStep",void 0),cq([et],e)}(Lt);function op(s,e,t,i,n,r){var o,a,l=e.parentElement;if("vscroll"===i?(o=r||e.getBoundingClientRect().height,a=t.getBoundingClientRect().height):(o=e.getBoundingClientRect().width,a=t.getBoundingClientRect().width),o<a)return yq(s,e,t,i,n,r);if(l){var h=l.getBoundingClientRect().width;return h<o&&"hscroll"===i?(a=h,e.style.maxWidth=h+"px",yq(s,e,t,i,n,r)):t}return t}function yq(s,e,t,i,n,r){var o=s("div",{className:"e-menu-"+i});return e.appendChild(o),o.appendChild(t),r?(o.style.overflow="hidden",o.style.height=r+"px"):(o.style.maxHeight=e.style.maxHeight,e.style.overflow="hidden"),"vscroll"===i?new km({enableRtl:n},o).scrollStep=H(".e-"+i+"-bar",e).offsetHeight/2:new kI({enableRtl:n},o).scrollStep=H(".e-"+i+"-bar",e).offsetWidth,o}function Am(s,e,t){if(s){var i=H(".e-menu-parent",e);i?(!t||t===i)&&(s.destroy(),e.parentElement.appendChild(i),z(e)):(s.destroy(),z(e))}}var PI=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),xi=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},NI="enter",AP="escape",vr="e-focused",FI="e-menu-header",kn="e-selected",RI="e-separator",Lm="uparrow",ph="downarrow",pf="leftarrow",ap="rightarrow",Vm="home",OI="end",BI="tab",bq="e-caret",Pm="e-menu-item",LP="e-disabled",zI="e-menu-hide",wq="e-icons",Nm="e-menu-popup",Cq=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return PI(e,s),xi([v("id")],e.prototype,"itemId",void 0),xi([v("parentId")],e.prototype,"parentId",void 0),xi([v("text")],e.prototype,"text",void 0),xi([v("iconCss")],e.prototype,"iconCss",void 0),xi([v("url")],e.prototype,"url",void 0),xi([v("separator")],e.prototype,"separator",void 0),xi([v("items")],e.prototype,"children",void 0),e}(ce),HI=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return PI(e,s),xi([v(null)],e.prototype,"iconCss",void 0),xi([v("")],e.prototype,"id",void 0),xi([v(!1)],e.prototype,"separator",void 0),xi([Sn([],e)],e.prototype,"items",void 0),xi([v("")],e.prototype,"text",void 0),xi([v("")],e.prototype,"url",void 0),e}(ce),qve=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return PI(e,s),xi([v("SlideDown")],e.prototype,"effect",void 0),xi([v(400)],e.prototype,"duration",void 0),xi([v("ease")],e.prototype,"easing",void 0),e}(ce),Iq=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.navIdx=[],n.animation=new Gi({}),n.isTapHold=!1,n.tempItem=[],n.showSubMenuOn="Auto",n}return PI(e,s),e.prototype.preRender=function(){if(!this.isMenu){var t=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){t=this.createElement("ul",{id:yt(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var i=R("ej2_instances",this.element);A([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=t,ke("ej2_instances",i,this.element)}else{t=this.createElement("ul",{id:yt(this.getModuleName())}),Le([].slice.call(this.element.cloneNode(!0).children),t);var n=this.element.nextElementSibling;n?this.element.parentElement.insertBefore(t,n):this.element.parentElement.appendChild(t),this.clonedElement=t}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var r=this.element,o=R("ej2_instances",r),a=(t=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),l=0,h=r.attributes.length;l<h;l++)t.setAttribute(r.attributes[l].nodeName,r.attributes[l].nodeValue);r.parentNode.insertBefore(a,r),z(r),a.appendChild(r=t),ke("ej2_instances",o,r),this.clonedElement=a,this.element=r,this.element.id||(this.element.id=yt(this.getModuleName()))}},e.prototype.render=function(){var t=this;this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();var i=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(function(){op(t.createElement,i,t.element,"hscroll",t.enableRtl)})},e.prototype.initialize=function(){var t=this.getWrapper();t||(t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(t,this.element):document.body.appendChild(t)),this.cssClass&&M([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&t.classList.add("e-rtl"),t.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(t)),this.defaultOption=this.showItemOnClick},e.prototype.renderItems=function(){if(!this.items.length){var t=ot.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:t},!0),X()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var i=this.createItems(this.items);if(Le(Array.prototype.slice.call(i.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){var n=this.getWrapper();this.element.classList.contains("e-vertical")?op(this.createElement,n,this.element,"vscroll",this.enableRtl):op(this.createElement,n,this.element,"hscroll",this.enableRtl)}},e.prototype.wireEvents=function(){var t=this.getWrapper();if(this.target){for(var i=void 0,n=me(this.target),r=0,o=n.length;r<o;r++)i=n[r],this.isMenu?C.add(i,"click",this.menuHeaderClickHandler,this):E.isIos?new hr(i,{tapHold:this.touchHandler.bind(this)}):C.add(i,"contextmenu",this.cmenuHandler,this);if(this.targetElement=i,!this.isMenu){C.add(this.targetElement,"mousewheel DOMMouseScroll",this.scrollHandler,this);for(var a=0,l=um(this.targetElement);a<l.length;a++)C.add(l[a],"mousewheel DOMMouseScroll",this.scrollHandler,this)}}E.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),C.add(this.isMenu?document:t,"mouseover",this.delegateMoverHandler,this),C.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),C.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(t),this.rippleFn=zi(t,{selector:"."+Pm})},e.prototype.wireKeyboardEvent=function(t){var i={downarrow:ph,uparrow:Lm,enter:NI,leftarrow:pf,rightarrow:ap,escape:AP};this.isMenu&&(i.home=Vm,i.end=OI,i.tab=BI),new St(t,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:i})},e.prototype.mouseDownHandler=function(t){k(t.target,".e-"+this.getModuleName()+"-wrapper")!==this.getWrapper()&&!k(t.target,".e-"+this.getModuleName()+"-popup")&&this.closeMenu(this.isMenu?null:this.navIdx.length,t)},e.prototype.keyHandler=function(t){(38===t.keyCode||40===t.keyCode)&&t.target&&(t.target.classList.contains("e-contextmenu")||t.target.classList.contains("e-menu-item"))&&t.preventDefault()},e.prototype.keyBoardHandler=function(t){var i="",n=t.target,r=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(t.preventDefault(),this.enableScrolling&&13===t.keyCode&&n.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([vr,kn],[k(n,".e-"+this.getModuleName()+"-wrapper")]),r)switch(t.action){case ap:i=ap,t.action=ph;break;case pf:i=pf,t.action=Lm;break;case ph:i=ph,t.action=ap;break;case Lm:i=Lm,t.action=""}else if(this.enableRtl)switch(t.action){case pf:r=!0,i=pf,t.action=ap;break;case ap:r=!0,i=ap,t.action=pf}switch(t.action){case ph:case Lm:case OI:case Vm:case BI:this.upDownKeyHandler(t);break;case ap:this.rightEnterKeyHandler(t);break;case pf:this.leftEscKeyHandler(t);break;case NI:this.hamburgerMode&&"SPAN"===n.tagName&&n.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):this.rightEnterKeyHandler(t);break;case AP:this.leftEscKeyHandler(t)}r&&(t.action=i)},e.prototype.upDownKeyHandler=function(t){var i=this.getUlByNavIdx(),n=t.action===ph||t.action===Vm||t.action===BI?0:i.childElementCount-1,r=n,o=this.getLIByClass(i,vr);o&&(t.action!==OI&&t.action!==Vm&&(r=this.getIdx(i,o)),o.classList.remove(vr),t.action!==OI&&t.action!==Vm&&(t.action===ph?r++:r--,r===(t.action===ph?i.childElementCount:-1)&&(r=n))),r=this.isValidLI(i.children[r],r,t.action),i.children[r].classList.add(vr),i.children[r].focus()},e.prototype.isValidLI=function(t,i,n){var r=this.getUlByNavIdx(),o=n===ph||n===Vm||n===BI?0:r.childElementCount-1;return(t.classList.contains(RI)||t.classList.contains(LP)||t.classList.contains(zI))&&(n===ph&&i===r.childElementCount-1||n===Lm&&0===i?i=o:n===ph||n===ap?i++:i--),((t=r.children[i]).classList.contains(RI)||t.classList.contains(LP)||t.classList.contains(zI))&&(i=this.isValidLI(t,i,n)),i},e.prototype.getUlByNavIdx=function(t){var i=this;if(void 0===t&&(t=this.navIdx.length),this.isMenu){var n=[this.getWrapper()].concat([].slice.call(me("."+Nm))),r=[];return me("."+Nm).forEach(function(a){i.element.id===a.id.split("-")[2]&&r.push(a)}),c(n=[this.getWrapper()].concat([].slice.call(r))[t])?null:H(".e-menu-parent",n)}return this.getWrapper().children[t]},e.prototype.rightEnterKeyHandler=function(t){var n=this.getUlByNavIdx(),r=this.getLIByClass(n,vr);if(r){var o=this.getIdx(n,r),a=this.navIdx.concat(o),l=this.getItem(a);l.items.length?(this.navIdx.push(o),this.keyType="right",this.action=t.action,this.openMenu(r,l,-1,-1,t)):t.action===NI&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([kn],[this.getWrapper()]):r.classList.remove(vr),r.classList.add(kn),this.trigger("select",{element:r,item:l,event:t}),this.closeMenu(null,t))}},e.prototype.leftEscKeyHandler=function(t){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,t)):t.action===AP&&this.closeMenu(null,t)},e.prototype.scrollHandler=function(t){this.closeMenu(null,t)},e.prototype.touchHandler=function(t){this.isTapHold=!0,this.cmenuHandler(t.originalEvent)},e.prototype.cmenuHandler=function(t){t.preventDefault(),this.currentTarget=t.target,this.isCMenu=!0,this.pageX=t.changedTouches?t.changedTouches[0].pageX+1:t.pageX+1,this.pageY=t.changedTouches?t.changedTouches[0].pageY+1:t.pageY+1,this.closeMenu(null,t),this.isCMenu&&(this.canOpen(t.target)&&this.openMenu(null,null,this.pageY,this.pageX,t),this.isCMenu=!1)},e.prototype.closeMenu=function(t,i,n){var r=this;if(void 0===t&&(t=0),void 0===i&&(i=null),this.isMenuVisible()){var a,d,o=void 0,l=this.getWrapper(),p=this.getPopups(),u=!1,f=this.isMenu?p.length+1:l.childElementCount,g=this.isMenu&&1!==f?H(".e-ul",p[f-2]):me(".e-menu-parent",l)[f-1];if(this.isMenu&&g.classList.contains("e-menu")&&((o=this.getLIByClass(g,kn))&&o.classList.remove(kn),u=!0),!u){var m=i&&i.target&&this.getLI(i.target);this.cli=m||g.children[0],a=this.navIdx.length?this.getItem(this.navIdx):null,this.trigger("beforeClose",{element:g,parentItem:a,items:d=a?a.items:this.items,event:i,cancel:!1,isFocused:!0},function(y){var b,I,S="",x=!y.cancel;(x||r.isCMenu)&&(r.isMenu?(b=k(g,"."+Nm),r.hamburgerMode&&(b.parentElement.style.minHeight="",k(g,".e-menu-item").setAttribute("aria-expanded","false")),r.unWireKeyboardEvent(b),Am(Hn(b.children[0],km),b.children[0]),(I=Hn(b,dr)).hide(),S=b.id,I.destroy(),z(b)):r.toggleAnimation(g,!1),r.trigger("onClose",{element:g,parentItem:a,items:d}),r.navIdx.pop(),r.isMenu||(C.remove(g,"keydown",r.keyHandler),"right"===r.keyType&&(r.keyType=""))),r.updateReactTemplate();var T,L,N,O=r.getWrapper()&&r.getUlByNavIdx();r.isCMenu&&(r.canOpen(i.target)&&r.openMenu(null,null,r.pageY,r.pageX,i),r.isCMenu=!1),r.isMenu&&O&&S.length?(T=new RegExp("(.*)-ej2menu-"+r.element.id+"-popup").exec(S)[1],L=O.querySelector('[id="'+T+'"]'),N=m&&O.querySelector('[id="'+m.id+'"]')):O&&(L=O.querySelector(".e-menu-item.e-selected"),N=m&&O.querySelector('[id="'+m.id+'"]'));var _=m&&m.querySelectorAll(".e-menu-item");if(x&&r.hamburgerMode&&t&&!_.length)r.afterCloseMenu(i);else if(x&&!r.hamburgerMode&&L&&!N&&"left"!==r.keyType&&(r.navIdx.length||!r.isMenu&&0===r.navIdx.length)){var B=i&&i.target.classList.contains("e-vscroll")?k(i.target,".e-menu-wrapper"):null;B?(B=B.querySelector(".e-menu-item"),(r.showItemOnClick||B&&r.getIndex(B.id,!0).length<=r.navIdx.length)&&r.closeMenu(r.navIdx[r.navIdx.length-1],i,!0)):r.closeMenu(r.navIdx[r.navIdx.length-1],i)}else if(x&&!n&&!t&&(r.hamburgerMode&&r.navIdx.length||1===r.navIdx.length&&m&&O!==m.parentElement))r.closeMenu(null,i);else if(x&&c(t)&&r.navIdx.length)r.closeMenu(null,i);else if(!x||r.isMenu||t||0!==r.navIdx.length||r.isMenusClosed)if(x&&r.isMenu&&i&&i.target&&0!==r.navIdx.length&&k(i.target,".e-menu-parent.e-control"))r.closeMenu(0,i);else if(x&&!r.isMenu&&me(".e-menu-parent",l)[t-1]&&3===i.which)r.closeMenu(null,i);else{if(!x||"right"!==r.keyType&&"click"!==r.keyType){var q=r.getUlByNavIdx(),W=r.getLIByClass(q,kn);if(W&&(W.setAttribute("aria-expanded","false"),W.classList.remove(kn),(y.isFocused&&m||"left"===r.keyType)&&(W.classList.add(vr),(!i.target||!i.target.classList.contains("e-edit-template"))&&W.focus())),!x&&r.hamburgerMode&&m&&"false"===m.getAttribute("aria-expanded")&&"true"===m.getAttribute("aria-haspopup")){k(m,".e-menu-parent.e-control")?r.navIdx=[]:r.navIdx.pop(),r.navIdx.push(r.cliIdx);var j=r.getItem(r.navIdx);m.setAttribute("aria-expanded","true"),r.openMenu(m,j,-1,-1,i)}}else r.afterCloseMenu(i);r.navIdx.length<1&&("Hover"===r.showSubMenuOn||"Click"===r.showSubMenuOn)&&(r.showItemOnClick=r.defaultOption,r.showSubMenuOn="Auto")}else r.isMenusClosed=!0,r.closeMenu(0,i);r.removeStateWrapper()})}}},e.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&0===this.navIdx.length){var t=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=t,this.renderReactTemplates()}},e.prototype.getMenuItemModel=function(t,i){if(c(t))return null;c(i)&&(i=0);var n=this.getFields(i);return{text:t[n.text],id:t[n.id],items:t[n.child],separator:t[n.separator],iconCss:t[n.iconCss],url:t[n.url]}},e.prototype.getPopups=function(){var t=this,i=[];return[].slice.call(document.querySelectorAll("."+Nm)).forEach(function(n){!c(n.querySelector("."+Pm))&&t.getIndex(n.querySelector("."+Pm).id,!0).length&&i.push(n)}),i},e.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&wn(this.element).valueOf()},e.prototype.canOpen=function(t){var i=!0;if(this.filter){i=!1;for(var n=this.filter.split(" "),r=0,o=n.length;r<o;r++)if(k(t,"."+n[r])){i=!0;break}}return i},e.prototype.openMenu=function(t,i,n,r,o,a){var l=this;void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=null),void 0===a&&(a=this.targetElement);var h=this.getWrapper();this.lItem=t;var d=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,c(n)&&(n=-1),c(r)&&(r=-1),t){if(this.uList=this.createItems(i[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&E.isDevice){h.lastChild.style.display="none";var p={text:i[this.getField("text")].toString(),iconCss:wq+" e-previous"},u=new HI(this.items[0],"items",p,!0),f=this.createItems([u]).children[0];f.classList.add(FI),this.uList.insertBefore(f,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+Nm,id:t.id+"-ej2menu-"+d+"-popup"}),this.hamburgerMode?(n=t.offsetHeight,t.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,t,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,t):(this.cssClass&&M([this.popupWrapper],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.popupObj.hide()),this.hamburgerMode||this.showItemOnClick||!this.hoverDelay?this.triggerBeforeOpen(t,this.uList,i,o,0,0,"menu"):(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){l.triggerBeforeOpen(t,l.uList,i,o,0,0,"menu")},this.hoverDelay))):(this.uList.style.zIndex=this.element.style.zIndex,h.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){l.triggerBeforeOpen(t,l.uList,i,o,n,r,"none")},this.hoverDelay)):this.triggerBeforeOpen(t,this.uList,i,o,n,r,"none"))}else if(this.uList=this.element,this.uList.style.zIndex=ed(a||this.element).toString(),c(o)){var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!1);var m=this.copyObject(g,{});m.target=m.srcElement=a,m.currentTarget=a,this.triggerBeforeOpen(t,this.uList,i,m,n,r,"none")}else this.triggerBeforeOpen(t,this.uList,i,o,n,r,"none")},e.prototype.copyObject=function(t,i){for(var n in t)i[""+n]=t[""+n];return i},e.prototype.calculateIndentSize=function(t,i){var n=getComputedStyle(i),r=parseInt(n.textIndent,10);this.navIdx.length<2&&!i.classList.contains("e-blankicon")?r*=2:r+=r/4,t.style.textIndent=r+"px";var o=t.querySelectorAll(".e-blankicon");if(o&&o.length)for(var a=t.querySelector(".e-menu-icon"),l=getComputedStyle(a),h=parseInt(l.marginRight,10)+a.offsetWidth+r,d=0;d<o.length;d++)o[d].style.textIndent=h+"px"},e.prototype.generatePopup=function(t,i,n,r){var o=this,a=new dr(t,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:n,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:r||this.enableRtl?"none":"flip",Y:"fit"},position:r&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:i,open:function(){var l=H(".e-menu-vscroll",a.element);l&&(l.style.height="inherit",l.style.maxHeight="");var h=H(".e-ul",a.element);a.element.style.maxHeight="",h.focus(),o.triggerOpen(h)}});return a},e.prototype.createHeaderContainer=function(t){t=t||this.getWrapper();var i=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),n=this.enableHtmlSanitizer?$t.sanitize(this.title):this.title,r=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:n}),o=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});i.appendChild(r),i.appendChild(o),t.insertBefore(i,this.element)},e.prototype.openHamburgerMenu=function(t){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,t,0,0,"hamburger")},e.prototype.closeHamburgerMenu=function(t){var i=this;this.trigger("beforeClose",{element:this.element,parentItem:null,event:t,items:this.items,cancel:!1},function(r){r.cancel||(i.closeMenu(null,t),i.element.classList.add("e-hide-menu"),i.trigger("onClose",{element:i.element,parentItem:null,items:i.items}))})},e.prototype.callFit=function(t,i,n,r,o){return iV(t,null,{X:i,Y:n},{top:r,left:o})},e.prototype.triggerBeforeOpen=function(t,i,n,r,o,a,l){var h=this,d=t?n[this.getField("children",this.navIdx.length-1)]:this.items,u=l;this.trigger("beforeOpen",{element:i,items:d,parentItem:n,event:r,cancel:!1,top:o,left:a,showSubMenuOn:"Auto"},function(f){switch(u){case"menu":h.hamburgerMode||("Auto"!==f.showSubMenuOn&&(h.showItemOnClick=!h.defaultOption,h.showSubMenuOn=f.showSubMenuOn),h.top=f.top,h.left=f.left),h.popupWrapper.style.display="block",h.hamburgerMode||(h.popupWrapper.style.maxHeight=h.popupWrapper.getBoundingClientRect().height+"px",h.enableScrolling&&op(h.createElement,h.popupWrapper,h.uList,"vscroll",h.enableRtl),h.checkScrollOffset(r)),h.hamburgerMode||h.left||h.top?(h.popupObj.collision={X:"none",Y:"none"},h.popupWrapper.style.display=""):(h.popupObj.refreshPosition(h.lItem,!0),h.left=parseInt(h.popupWrapper.style.left,10),h.top=parseInt(h.popupWrapper.style.top,10),h.enableRtl&&(h.left=h.isNestedOrVertical?h.left-h.popupWrapper.offsetWidth-h.lItem.parentElement.offsetWidth+2:h.left-h.popupWrapper.offsetWidth+h.lItem.offsetWidth),h.template&&(h.isReact||h.isAngular)?requestAnimationFrame(function(){h.collision(),h.popupWrapper.style.display=""}):(h.collision(),h.popupWrapper.style.display=""));break;case"none":h.top=f.top,h.left=f.left;break;case"hamburger":f.cancel||(h.element.classList.remove("e-hide-menu"),h.triggerOpen(h.element))}if("hamburger"!==u&&(f.cancel?(h.isMenu?(h.popupObj.destroy(),z(h.popupWrapper)):i.className.indexOf("e-ul")>-1&&z(i),h.navIdx.pop()):h.isMenu?h.hamburgerMode?(h.popupWrapper.style.top=h.top+"px",h.popupWrapper.style.left="0px",h.toggleAnimation(h.popupWrapper)):(h.setBlankIconStyle(h.popupWrapper),h.wireKeyboardEvent(h.popupWrapper),zi(h.popupWrapper,{selector:"."+Pm}),h.popupWrapper.style.left=h.left+"px",h.popupWrapper.style.top=h.top+"px",h.popupObj.show("None"!==h.animationSettings.effect?{name:h.animationSettings.effect,duration:h.animationSettings.duration,timingFunction:h.animationSettings.easing}:null,h.lItem)):(h.setBlankIconStyle(h.uList),h.setPosition(h.lItem,h.uList,h.top,h.left),h.toggleAnimation(h.uList))),"right"===h.keyType){var m=h.getUlByNavIdx();t.classList.remove(vr),h.isMenu&&1===h.navIdx.length&&h.removeLIStateByClass([kn],[h.getWrapper()]),t.classList.add(kn),h.action===NI&&h.trigger("select",{element:t,item:n,event:r}),t.focus(),m=h.getUlByNavIdx();var b=h.isValidLI(m.children[0],0,h.action);m.children[b].classList.add(vr),m.children[b].focus()}})},e.prototype.collision=function(){var t;if(t=rh(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(t.indexOf("right")>-1||t.indexOf("left")>-1)){this.popupObj.collision.X="none";var i=k(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?kr(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-i+2}((t=rh(this.popupWrapper,null,this.left,this.top)).indexOf("left")>-1||t.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"},e.prototype.setBlankIconStyle=function(t){var i=[].slice.call(t.getElementsByClassName("e-blankicon"));if(i.length){var n=t.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)");if(n){var r=n.querySelector(".e-menu-icon");if(r){var o=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},a=getComputedStyle(r),l=parseInt(a.fontSize,10);parseInt(a.width,10)&&parseInt(a.width,10)>l&&(l=parseInt(a.width,10));var h=l+parseInt(a[o.margin],10)+parseInt(getComputedStyle(n)[o.padding],10)+"px";i.forEach(function(d){d.style[o.padding]=h})}}}},e.prototype.checkScrollOffset=function(t){var i=this.getWrapper();if(i.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var n=c(t)?this.element:k(t.target,"."+Pm),r=H(".e-hscroll-bar",i);r.scrollLeft>n.offsetLeft&&(r.scrollLeft-=r.scrollLeft-n.offsetLeft);var o=r.scrollLeft+r.offsetWidth,a=n.offsetLeft+n.offsetWidth;o<a&&(r.scrollLeft+=a-o)}},e.prototype.setPosition=function(t,i,n,r){var o="px";if(this.toggleVisiblity(i),i===this.element||r>-1&&n>-1){if((a=rh(i,null,r,n)).indexOf("right")>-1&&(r-=i.offsetWidth),a.indexOf("bottom")>-1&&(n=(l=this.callFit(i,!1,!0,n,r)).top-20)<0){var h=pageYOffset+document.documentElement.clientHeight-i.getBoundingClientRect().height;h>-1&&(n=h)}(a=rh(i,null,r,n)).indexOf("left")>-1&&(r=(l=this.callFit(i,!0,!1,n,r)).left)}else if(E.isDevice)n=Number(this.element.style.top.replace(o,"")),r=Number(this.element.style.left.replace(o,""));else{var l;r=(l=kr(t,this.enableRtl?"left":"right","top")).left;var a,p=(a=rh(i,null,this.enableRtl?r-i.offsetWidth:r,n=l.top)).indexOf("left")>-1||a.indexOf("right")>-1;p&&(r=(l=kr(t,this.enableRtl?"right":"left","top")).left),(this.enableRtl||p)&&(r=this.enableRtl&&p?r:r-i.offsetWidth),a.indexOf("bottom")>-1&&(n=(l=this.callFit(i,!1,!0,n,r)).top)}this.toggleVisiblity(i,!1),i.style.top=n+o,i.style.left=r+o},e.prototype.toggleVisiblity=function(t,i){void 0===i&&(i=!0),t.style.visibility=i?"hidden":"",t.style.display=i?"block":"none"},e.prototype.createItems=function(t){var i=this,n=this.navIdx?this.navIdx.length:0,r=this.getFields(n),o=this.hasField(t,this.getField("iconCss",n)),a={showIcon:o,moduleName:"menu",fields:r,template:this.template,itemNavigable:!0,itemCreating:function(h){h.curData[h.fields[r.id]]||(h.curData[h.fields[r.id]]=yt("menuitem")),c(h.curData.htmlAttributes)&&(h.curData.htmlAttributes={}),Object.assign(h.curData.htmlAttributes,{role:"menuitem",tabindex:"-1"}),i.isMenu&&!h.curData[i.getField("separator",n)]&&(h.curData.htmlAttributes["aria-label"]=h.curData[h.fields.text]?h.curData[h.fields.text]:h.curData[h.fields.id]),""===h.curData[h.fields[r.iconCss]]&&(h.curData[h.fields[r.iconCss]]=null)},itemCreated:function(h){if(h.curData[i.getField("separator",n)]&&(h.item.classList.add(RI),h.item.setAttribute("role","separator")),o&&!h.curData[h.fields.iconCss]&&!h.curData[i.getField("separator",n)]&&h.item.classList.add("e-blankicon"),h.curData[h.fields.child]&&h.curData[h.fields.child].length){var d=i.createElement("span",{className:wq+" "+bq});h.item.appendChild(d),h.item.setAttribute("aria-haspopup","true"),h.item.setAttribute("aria-expanded","false"),h.item.classList.add("e-menu-caret-icon")}i.isMenu&&i.template&&(h.item.setAttribute("id",h.curData[h.fields.id].toString()),h.item.removeAttribute("data-uid"),h.item.classList.contains("e-level-1")&&h.item.classList.remove("e-level-1"),h.item.classList.contains("e-has-child")&&h.item.classList.remove("e-has-child"),h.item.removeAttribute("aria-level")),i.trigger("beforeItemRender",{item:h.curData,element:h.item})}};this.setProperties({items:this.items},!0),this.isMenu&&(a.templateID=this.element.id+"Template");var l=ot.createList(this.createElement,t,a,!this.template,this);return l.setAttribute("tabindex","0"),l.setAttribute("role",this.isMenu?"menu":"menubar"),l},e.prototype.moverHandler=function(t){var i=t.target;this.liTrgt=i;var n=this.getLI(i),r=n?k(n,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),o=this.getWrapper(),a=new RegExp("-ej2menu-(.*)-popup"),h=!1;if(r){if((""!==r.id?a.exec(r.id)[1]:r.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([vr,kn],[this.getWrapper()]),!this.navIdx.length)return;h=!0}n&&k(n,".e-"+this.getModuleName()+"-wrapper")&&!h?(this.removeLIStateByClass([vr],this.isMenu?[r].concat(this.getPopups()):[r]),this.removeLIStateByClass([vr],this.isMenu?[o].concat(this.getPopups()):[o]),n.classList.add(vr),this.showItemOnClick||this.clickHandler(t)):this.isMenu&&this.showItemOnClick&&!h&&this.removeLIStateByClass([vr],[r].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||i.parentElement===r||k(i,".e-"+this.getModuleName()+"-popup")||n&&(!n||this.getIndex(n.id,!0).length)||"Hover"===this.showSubMenuOn?h&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t)):(this.removeLIStateByClass([vr],[r]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},e.prototype.removeStateWrapper=function(){if(this.liTrgt){var t=k(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&t&&this.removeLIStateByClass([vr,kn],[t])}},e.prototype.removeLIStateByClass=function(t,i){for(var n,r=function(a){t.forEach(function(l){(n=H("."+l,i[a]))&&n.classList.remove(l)})},o=0;o<i.length;o++)r(o)},e.prototype.getField=function(t,i){void 0===i&&(i=0);var n=this.fields[""+t];return"string"==typeof n?n:n[i]?n[i].toString():n[n.length-1].toString()},e.prototype.getFields=function(t){return void 0===t&&(t=0),{id:this.getField("itemId",t),iconCss:this.getField("iconCss",t),text:this.getField("text",t),url:this.getField("url",t),child:this.getField("children",t),separator:this.getField("separator",t)}},e.prototype.hasField=function(t,i){for(var n=0,r=t.length;n<r;n++)if(t[n][""+i])return!0;return!1},e.prototype.menuHeaderClickHandler=function(t){k(t.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.className.indexOf("e-hide-menu")>-1?this.openHamburgerMenu(t):this.closeHamburgerMenu(t))},e.prototype.clickHandler=function(t){if(this.isTapHold)this.isTapHold=!1;else{var i=this.getWrapper(),n=t.target,r=this.cli=this.getLI(n),o=new RegExp("-ej2menu-(.*)-popup"),a=r?k(r,".e-"+this.getModuleName()+"-wrapper"):null,l=r&&a&&(this.isMenu?this.getIndex(r.id,!0).length>0:i.firstElementChild.id===a.firstElementChild.id);if(E.isDevice&&this.isMenu&&(this.removeLIStateByClass([vr],[i].concat(this.getPopups())),this.mouseDownHandler(t)),r&&a&&this.isMenu){var h=a.id?o.exec(a.id)[1]:a.querySelector(".e-menu-parent").id;if(this.element.id!==h)return}if(l&&"click"===t.type&&!r.classList.contains(FI)){this.setLISelected(r);var d=this.getIndex(r.id,!0),p=this.getItem(d);this.trigger("select",{element:r,item:p,event:t})}if(l&&("mouseover"===t.type||E.isDevice||this.showItemOnClick)){var f=void 0;if(r.classList.contains(FI))this.toggleAnimation(f=i.children[this.navIdx.length-1]),(g=this.getLIByClass(f,kn))&&g.classList.remove(kn),z(r.parentNode),this.navIdx.pop();else if(!r.classList.contains(RI)){this.showSubMenu=!0;var m=r.parentNode;if(this.cliIdx=this.getIdx(m,r),this.isMenu||!E.isDevice){var g,y=this.isMenu?Array.prototype.indexOf.call([i].concat(this.getPopups()),k(m,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(i,m);this.navIdx[y]===this.cliIdx&&(this.showSubMenu=!1),y===this.navIdx.length||"mouseover"===t.type&&!this.showSubMenu||((g=this.getLIByClass(m,kn))&&g.classList.remove(kn),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(r),this.closeMenu(y+1,t),this.showItemOnClick&&this.setLISelected(r))}this.isClosed||this.afterCloseMenu(t),this.isClosed=!1}}else if(this.isMenu&&"DIV"===n.tagName&&this.navIdx.length&&k(n,".e-menu-vscroll")){var b=k(n,"."+Nm),w=Array.prototype.indexOf.call(this.getPopups(),b)+1;w<this.navIdx.length&&(this.closeMenu(w+1,t),b&&this.removeLIStateByClass([vr,kn],[b]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===n.tagName&&n.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):("UL"!==n.tagName||(this.isMenu?n.parentElement.classList.contains("e-menu-wrapper")&&!this.getIndex(n.querySelector("."+Pm).id,!0).length:n.parentElement!==i))&&(r||this.removeLIStateByClass([kn],[i]),(!r||!r.querySelector("."+bq))&&this.closeMenu(null,t))}},e.prototype.afterCloseMenu=function(t){var i;if(this.showSubMenu){i=k(this.showItemOnClick&&0===this.navIdx.length?t.target:this.element,".e-menu-parent.e-control");var n=this.navIdx.concat(this.cliIdx),r=this.getItem(n);if(r&&r[this.getField("children",n.length-1)]&&r[this.getField("children",n.length-1)].length?(("mouseover"===t.type||E.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&i||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,r,null,null,t))):"mouseover"!==t.type&&this.closeMenu(null,t),!i){var o=this.getUlByNavIdx(),a=this.getLIByClass(o,kn);a&&(a.setAttribute("aria-expanded","false"),a.classList.remove(kn))}}this.keyType=""},e.prototype.setLISelected=function(t){var i=this.getLIByClass(t.parentElement,kn);i&&i.classList.remove(kn),this.isMenu||t.classList.remove(vr),t.classList.add(kn)},e.prototype.getLIByClass=function(t,i){for(var n=0,r=t.children.length;n<r;n++)if(t.children[n].classList.contains(i))return t.children[n];return null},e.prototype.getItemIndex=function(t,i){return this.getIndex("string"==typeof t?t:t.id,!1!==i)},e.prototype.setItem=function(t,i,n){var o=this.getIndex(n?i||t.id:i||t.text,n),a=this.getItem(o);Object.assign(a,t)},e.prototype.getItem=function(t){var i=(t=t.slice()).pop();return this.getItems(t)[i]},e.prototype.getItems=function(t){for(var i=this.items,n=0;n<t.length;n++)i=i[t[n]][this.getField("children",n)];return i},e.prototype.setItems=function(t,i){var n=this.getItems(i);n.splice(0,n.length);for(var r=0;r<t.length;r++)n.splice(r,0,t[r])},e.prototype.getIdx=function(t,i,n){void 0===n&&(n=!0);var r=Array.prototype.indexOf.call(t.children,i);return n&&t.children[0].classList.contains(FI)&&r--,r},e.prototype.getLI=function(t){return"LI"===t.tagName&&t.classList.contains("e-menu-item")?t:k(t,"li.e-menu-item")},e.prototype.updateItemsByNavIdx=function(){for(var t=this.items,i=0,n=0;n<this.navIdx.length&&(t=t[n].items);n++){i++;var r=this.getUlByNavIdx(i);if(!r)break;this.updateItem(r,t)}},e.prototype.removeChildElement=function(t){for(;t.firstElementChild;)t.removeChild(t.firstElementChild);return t},e.prototype.onPropertyChanged=function(t,i){for(var n=this,r=this.getWrapper(),o=function(p){switch(p){case"cssClass":i.cssClass&&A([r],i.cssClass.split(" ")),t.cssClass&&M([r],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":r.classList.toggle("e-rtl");break;case"showItemOnClick":a.unWireEvents(),a.showItemOnClick=t.showItemOnClick,a.wireEvents();break;case"enableScrolling":if(t.enableScrolling){var u;a.element.classList.contains("e-vertical")?op(a.createElement,r,a.element,"vscroll",a.enableRtl):op(a.createElement,r,a.element,"hscroll",a.enableRtl),a.getPopups().forEach(function(I){u=H(".e-ul",I),op(n.createElement,I,u,"vscroll",n.enableRtl)})}else{var f=r.children[0];a.element.classList.contains("e-vertical")?Am(Hn(f,km),f):Am(Hn(f,kI),f),r.style.overflow="",r.appendChild(a.element),a.getPopups().forEach(function(I){Am(Hn(f=I.children[0],km),f),I.style.overflow=""})}break;case"items":var g=void 0,m=void 0,y=void 0;if(a.isReact&&a.template&&a.clearTemplate(["template"]),Object.keys(i.items).length)for(var S=Object.keys(t.items),b=0;b<S.length;b++)(m=a.getChangedItemIndex(t,[],Number(S[b]))).length<=a.getWrapper().children.length&&(g=m.pop(),y=a.getItems(m),a.insertAfter([y[g]],y[g].text),a.removeItem(y,m,g),a.setItems(y,m)),m.length=0;else{if(a.updateItem(a.element,a.items),a.enableScrolling&&a.element.parentElement.classList.contains("e-custom-scroll")&&(a.element.classList.contains("e-vertical")?op(a.createElement,r,a.element,"vscroll",a.enableRtl):op(a.createElement,r,a.element,"hscroll",a.enableRtl)),!a.hamburgerMode){b=1;for(var w=r.childElementCount;b<w;b++)z(r.lastElementChild)}a.navIdx=[]}}},a=this,l=0,h=Object.keys(t);l<h.length;l++)o(h[l])},e.prototype.updateItem=function(t,i){if(X()&&!this.isMenu)t=this.removeChildElement(t);else{if(this.enableScrolling){var r=this.getWrapper().children[0];this.element.classList.contains("e-vertical")?Am(Hn(r,km),r):Am(Hn(r,kI),r)}t.innerHTML=""}[].slice.call(this.createItems(i).children).forEach(function(a){t.appendChild(a)})},e.prototype.getChangedItemIndex=function(t,i,n){i.push(n);var r=Object.keys(t.items[n]).pop();if("items"===r){var o=t.items[n],a=Object.keys(o.items).pop();a&&this.getChangedItemIndex(o,i,Number(a))}else"isParentArray"===r&&i.length>1&&i.pop();return i},e.prototype.removeItem=function(t,i,n){t.splice(n,1);var r=this.getWrapper().children;i.length<r.length&&z(r[i.length].children[n])},e.prototype.unWireEvents=function(t){void 0===t&&(t=this.target);var i=this.getWrapper();if(t){for(var n=void 0,r=void 0,o=me(t),a=0,l=o.length;a<l;a++)n=o[a],this.isMenu?C.remove(n,"click",this.menuHeaderClickHandler):E.isIos?(r=Hn(n,hr))&&r.destroy():C.remove(n,"contextmenu",this.cmenuHandler);if(!this.isMenu){C.remove(this.targetElement,"mousewheel DOMMouseScroll",this.scrollHandler);for(var h=0,d=um(this.targetElement);h<d.length;h++)C.remove(d[h],"mousewheel DOMMouseScroll",this.scrollHandler)}}E.isDevice||(C.remove(this.isMenu?document:i,"mouseover",this.delegateMoverHandler),C.remove(document,"mousedown",this.delegateMouseDownHandler)),C.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(i),this.rippleFn()},e.prototype.unWireKeyboardEvent=function(t){var i=Hn(t,St);i&&i.destroy()},e.prototype.toggleAnimation=function(t,i){var r,o,n=this;void 0===i&&(i=!0),"None"!==this.animationSettings.effect&&i?this.animation.animate(t,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(a){n.hamburgerMode?(o=a.element.parentElement,a.element.style.position="absolute",r=o.offsetHeight,a.element.style.maxHeight=a.element.offsetHeight+"px",o.style.maxHeight=""):(a.element.style.display="block",a.element.style.maxHeight=a.element.getBoundingClientRect().height+"px")},progress:function(a){n.hamburgerMode&&(o.style.minHeight=r+a.element.offsetHeight+"px")},end:function(a){n.hamburgerMode?(a.element.style.position="",a.element.style.maxHeight="",o.style.minHeight="",a.element.style.top="0px",a.element.children[0].focus(),n.triggerOpen(a.element.children[0])):n.end(a.element,i)}}):this.end(t,i)},e.prototype.triggerOpen=function(t){var i=this.navIdx.length?this.getItem(this.navIdx):null;this.trigger("onOpen",{element:t,parentItem:i,items:i?i.items:this.items}),this.isMenu||C.add(t,"keydown",this.keyHandler,this)},e.prototype.end=function(t,i){if(i)if(t.style.display="block",t.style.maxHeight="",this.triggerOpen(t),t.querySelector("."+vr))t.querySelector("."+vr).focus();else{var n=this.getWrapper().children[this.getIdx(this.getWrapper(),t)-1];this.currentTarget&&(this.currentTarget.classList.contains("e-numerictextbox")||this.currentTarget.classList.contains("e-textbox")||"INPUT"===this.currentTarget.tagName)||(n?n.querySelector("."+kn).focus():this.element.focus())}else if(t===this.element){var r=this.getLIByClass(this.element,vr);r&&r.classList.remove(vr);var o=this.getLIByClass(this.element,kn);o&&o.classList.remove(kn),t.style.display="none"}else z(t)},e.prototype.getPersistData=function(){return""},e.prototype.getWrapper=function(){return k(this.element,".e-"+this.getModuleName()+"-wrapper")},e.prototype.getIndex=function(t,i,n,r,o,a){var l;void 0===n&&(n=this.items),void 0===r&&(r=[]),void 0===o&&(o=!1),void 0===a&&(a=0),a=o?a+1:0;for(var h=0,d=n.length;h<d;h++){if(l=n[h],(i?l[this.getField("itemId",a)]:l[this.getField("text",a)])===t){r.push(h);break}if(l[this.getField("children",a)]&&l[this.getField("children",a)].length){if(-1!==(r=this.getIndex(t,i,l[this.getField("children",a)],r,!0,a))[r.length-1]){r.unshift(h);break}h!==d-1&&r.pop()}else h===d-1&&r.push(-1)}return o||-1!==r[0]?r:[]},e.prototype.enableItems=function(t,i,n){void 0===i&&(i=!0);for(var r,o,a,h,l=LP,d=0;d<t.length;d++){if(a=this.getIndex(t[d],n),this.navIdx.length){if(1!==a.length){h=!1;for(var p=0,u=a.length-1;p<u;p++)if(a[p]!==this.navIdx[p]){h=!0;break}if(h)continue}}else if(1!==a.length)continue;o=a.pop(),(r=this.getUlByNavIdx(a.length))&&!c(o)&&(i?this.isMenu?(r.children[o].classList.remove(l),r.children[o].removeAttribute("aria-disabled")):E.isDevice&&!r.classList.contains("e-contextmenu")?r.children[o+1].classList.remove(l):r.children[o].classList.remove(l):this.isMenu?(r.children[o].classList.add(l),r.children[o].setAttribute("aria-disabled","true")):E.isDevice&&!r.classList.contains("e-contextmenu")?r.children[o+1].classList.add(l):r.children[o].classList.add(l))}},e.prototype.showItems=function(t,i){this.showHideItems(t,!1,i)},e.prototype.hideItems=function(t,i){this.showHideItems(t,!0,i)},e.prototype.showHideItems=function(t,i,n){for(var r,o,a,l=0;l<t.length;l++)o=(a=this.getIndex(t[l],n)).pop(),(r=this.getUlByNavIdx(a.length))&&(i&&(n?r.children[o].id:r.children[o].textContent)===t[l]?r.children[o].classList.add(zI):r.children[o].classList.remove(zI))},e.prototype.removeItems=function(t,i){for(var n,r,o,a=0;a<t.length;a++)n=(r=this.getIndex(t[a],i)).pop(),o=this.getItems(r),c(n)||this.removeItem(o,r,n)},e.prototype.insertAfter=function(t,i,n){this.insertItems(t,i,n)},e.prototype.insertBefore=function(t,i,n){this.insertItems(t,i,n,!1)},e.prototype.insertItems=function(t,i,n,r){void 0===r&&(r=!0);for(var o,a,l,h,d,p=0;p<t.length;p++){a=(l=this.getIndex(i,n)).pop(),h=this.getItems(l),d=new HI(h[0],"items",t[p],!0),h.splice(r?a+1:a,0,d);var u=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(!c(a)&&l.length<u.length){a=r?a+1:a,o=this.createItems(h).children[a];var f=this.isMenu?H(".e-menu-parent",u[l.length]):u[l.length];f.insertBefore(o,f.children[a])}}},e.prototype.removeAttributes=function(){var t=this;["top","left","display","z-index"].forEach(function(i){t.element.style.removeProperty(i)}),["role","tabindex","class","style"].forEach(function(i){"class"===i&&t.element.classList.contains("e-menu-parent")&&t.element.classList.remove("e-menu-parent"),(-1===["class","style"].indexOf(i)||!t.element.getAttribute(i))&&t.element.removeAttribute(i),t.isMenu&&"class"===i&&t.element.classList.contains("e-vertical")&&t.element.classList.remove("e-vertical")})},e.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),X()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t),this.clonedElement=null;else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)M([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==t?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),X()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",Le([].slice.call(this.clonedElement.children),this.element),z(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(z(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):z(t),s.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}this.rippleFn=null},xi([V()],e.prototype,"beforeItemRender",void 0),xi([V()],e.prototype,"beforeOpen",void 0),xi([V()],e.prototype,"onOpen",void 0),xi([V()],e.prototype,"beforeClose",void 0),xi([V()],e.prototype,"onClose",void 0),xi([V()],e.prototype,"select",void 0),xi([V()],e.prototype,"created",void 0),xi([v("")],e.prototype,"cssClass",void 0),xi([v(0)],e.prototype,"hoverDelay",void 0),xi([v(!1)],e.prototype,"showItemOnClick",void 0),xi([v("")],e.prototype,"target",void 0),xi([v("")],e.prototype,"filter",void 0),xi([v(null)],e.prototype,"template",void 0),xi([v(!1)],e.prototype,"enableScrolling",void 0),xi([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),xi([Fe({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Cq)],e.prototype,"fields",void 0),xi([Sn([],HI)],e.prototype,"items",void 0),xi([Fe({duration:400,easing:"ease",effect:"SlideDown"},qve)],e.prototype,"animationSettings",void 0),xi([et],e)}(Lt),xq=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ji=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},VP="e-vertical",In="e-toolbar-items",$n="e-toolbar-item",ld="e-rtl",er="e-separator",_I="e-popup-up-icon",Z0="e-popup-down-icon",Tq="e-popup-open",Mq="e-template",Po="e-overlay",Eq="e-toolbar-text",PP="e-popup-text",ch="e-overflow-show",jI="e-overflow-hide",la="e-hor-nav",Dq="e-scroll-nav",kq="e-toolbar-center",uh="e-tbar-pos",Aq="e-hscroll-bar",K0="e-toolbar-pop",lp="e-toolbar-popup",J0="e-nav-active",$0="e-ignore",NP="e-popup-alone",hp="e-hidden",Lq="e-toolbar-multirow",Vq="e-multirow-pos",FP="e-multirow-separator",RP="e-extended-separator",Pq="e-extended-toolbar",qI="e-toolbar-extended",OP="e-tbar-extended",Jve=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return xq(e,s),ji([v("")],e.prototype,"id",void 0),ji([v("")],e.prototype,"text",void 0),ji([v("auto")],e.prototype,"width",void 0),ji([v("")],e.prototype,"cssClass",void 0),ji([v(!1)],e.prototype,"showAlwaysInPopup",void 0),ji([v(!1)],e.prototype,"disabled",void 0),ji([v("")],e.prototype,"prefixIcon",void 0),ji([v("")],e.prototype,"suffixIcon",void 0),ji([v(!0)],e.prototype,"visible",void 0),ji([v("None")],e.prototype,"overflow",void 0),ji([v("")],e.prototype,"template",void 0),ji([v("Button")],e.prototype,"type",void 0),ji([v("Both")],e.prototype,"showTextOn",void 0),ji([v(null)],e.prototype,"htmlAttributes",void 0),ji([v("")],e.prototype,"tooltipText",void 0),ji([v("Left")],e.prototype,"align",void 0),ji([V()],e.prototype,"click",void 0),ji([v(-1)],e.prototype,"tabIndex",void 0),e}(ce),tr=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.resizeContext=n.resize.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return xq(e,s),e.prototype.destroy=function(){var t=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(n){!c(n)&&!c(n.ej2_instances)&&!c(n.ej2_instances[0])&&!n.ej2_instances[0].isDestroyed&&n.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(n){c(t.element.querySelector(n))||(document.body.appendChild(t.element.querySelector(n)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),z(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&A([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach(function(n){return t.element.removeAttribute(n)}),s.prototype.destroy.call(this)},e.prototype.preRender=function(){var t={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",t),this.enableCollision=t.enableCollision,this.scrollStep=t.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(VP),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,ld)},e.prototype.wireEvents=function(){C.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()},e.prototype.wireKeyboardEvent=function(){this.keyModule=new St(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),C.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},e.prototype.updateTabIndex=function(t){var i=this.element.querySelector("."+$n+":not(."+Po+" ):not(."+er+" ):not(."+hp+" )");if(!c(i)&&!c(i.firstElementChild)){var n=i.firstElementChild.getAttribute("data-tabindex");n&&"-1"===n&&"INPUT"!==i.firstElementChild.tagName&&i.firstElementChild.setAttribute("tabindex",t)}},e.prototype.unwireKeyboardEvent=function(){this.keyModule&&(C.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},e.prototype.docKeyDown=function(t){if("INPUT"!==t.target.tagName){var i=!c(this.popObj)&&wn(this.popObj.element)&&"Extended"!==this.overflowMode;9===t.keyCode&&!0===t.target.classList.contains("e-hor-nav")&&i&&this.popObj.hide({name:"FadeOut",duration:100}),(40===t.keyCode||38===t.keyCode||35===t.keyCode||36===t.keyCode)&&t.preventDefault()}},e.prototype.unwireEvents=function(){C.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),C.remove(document,"scroll",this.docEvent),C.remove(document,"click",this.docEvent)},e.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},e.prototype.docEvent=function(t){var i=k(t.target,".e-popup");this.popObj&&wn(this.popObj.element)&&!i&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},e.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,uh),this.scrollModule.destroy(),this.scrollModule=null)},e.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+$n)).forEach(function(i){z(i)}),this.tbarAlign){var t=this.element.querySelector("."+In);[].slice.call(t.children).forEach(function(i){z(i)}),this.tbarAlign=!1,this.remove(t,uh)}this.clearProperty()},e.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,ld),this.destroyScroll()),this.remove(this.element,OP),this.remove(this.element,Pq);var t=this.element.querySelector(".e-toolbar-multirow");t&&this.remove(t,Lq),this.popObj&&this.popupRefresh(this.popObj.element,!0)},e.prototype.add=function(t,i){t.classList.add(i)},e.prototype.remove=function(t,i){t.classList.remove(i)},e.prototype.elementFocus=function(t){var i=t.firstElementChild;i?(i.focus(),this.activeEleSwitch(t)):t.focus()},e.prototype.clstElement=function(t,i){return t&&this.popObj&&wn(this.popObj.element)?this.popObj.element.querySelector("."+$n):this.element===i||t?this.element.querySelector("."+$n+":not(."+Po+" ):not(."+er+" ):not(."+hp+" )"):k(i,"."+$n)},e.prototype.keyHandling=function(t,i,n,r,o){var p,u,a=this.popObj,l=this.element,h={name:"FadeOut",duration:100},d="moveUp"===i.action?"previous":"next";switch(i.action){case"moveRight":if(this.isVertical)return;l===n?this.elementFocus(t):r||this.eleFocus(t,"next");break;case"moveLeft":if(this.isVertical)return;r||this.eleFocus(t,"previous");break;case"home":case"end":if(t){var f=k(t,".e-popup"),g=this.element.querySelector("."+qI);"Extended"===this.overflowMode&&g&&g.classList.contains("e-popup-open")&&(f="end"===i.action?g:null),f?wn(this.popObj.element)&&(u=[].slice.call(f.children),p="home"===i.action?this.focusFirstVisibleEle(u):this.focusLastVisibleEle(u)):(u=this.element.querySelectorAll("."+In+" ."+$n+":not(."+er+")"),p="home"===i.action?this.focusFirstVisibleEle(u):this.focusLastVisibleEle(u)),p&&this.elementFocus(p)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(t,"moveUp"===i.action?"previous":"next");else if(a&&k(n,".e-popup")){var m=a.element,y=m.firstElementChild;"previous"===d&&y===t?m.lastElementChild.firstChild.focus():"next"===d&&m.lastElementChild===t?y.firstChild.focus():this.eleFocus(t,d)}else"moveDown"===i.action&&a&&wn(a.element)&&this.elementFocus(t);break;case"tab":if(!o&&!r){var b=t.firstElementChild;l===n&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(b),b.focus()))}break;case"popupClose":a&&"Extended"!==this.overflowMode&&a.hide(h);break;case"popupOpen":if(!r)return;a&&!wn(a.element)?(a.element.style.top=l.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(h)}},e.prototype.keyActionHandler=function(t){var i=t.target;if("INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!this.element.classList.contains(Po)){t.preventDefault();var n=i.classList.contains(la),r=i.classList.contains(Dq),o=this.clstElement(n,i);(o||r)&&this.keyHandling(o,t,i,n,r)}},e.prototype.disable=function(t){var i=this.element;t?i.classList.add(Po):i.classList.remove(Po),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(t),this.popObj&&(wn(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),i.querySelector("#"+i.id+"_nav").setAttribute("tabindex",t?"-1":"0"))},e.prototype.eleContains=function(t){return t.classList.contains(er)||t.classList.contains(Po)||t.getAttribute("disabled")||t.classList.contains(hp)||!wn(t)||!t.classList.contains($n)},e.prototype.focusFirstVisibleEle=function(t){for(var n=0;n<t.length;){var r=t[parseInt(n.toString(),10)];if(!r.classList.contains(hp)&&!r.classList.contains(Po))return r;n++}},e.prototype.focusLastVisibleEle=function(t){for(var n=t.length-1;n>=0;){var r=t[parseInt(n.toString(),10)];if(!r.classList.contains(hp)&&!r.classList.contains(Po))return r;n--}},e.prototype.eleFocus=function(t,i){var n=Object(t)[i+"ElementSibling"];if(n){if(this.eleContains(n))return void this.eleFocus(n,i);this.elementFocus(n)}else if(this.tbarAlign){var o=Object(t.parentElement)[i+"ElementSibling"];if(!c(o)&&0===o.children.length&&(o=Object(o)[i+"ElementSibling"]),!c(o)&&o.children.length>0)if("next"===i){var a=o.querySelector("."+$n);this.eleContains(a)?this.eleFocus(a,i):(a.firstElementChild.focus(),this.activeEleSwitch(a))}else this.eleContains(a=o.lastElementChild)?this.eleFocus(a,i):this.elementFocus(a)}else if(!c(t)){var l=this.element.querySelectorAll("."+In+" ."+$n+":not(."+er+"):not(."+Po+"):not(."+hp+")");"next"===i&&l?this.elementFocus(l[0]):"previous"===i&&l&&this.elementFocus(l[l.length-1])}},e.prototype.clickHandler=function(t){var i=this,n=t.target,r=this.element,o=!c(k(n,"."+K0)),a=n.classList,l=k(n,"."+la);l||(l=n),!r.children[0].classList.contains("e-hscroll")&&!r.children[0].classList.contains("e-vscroll")&&a.contains(la)&&(a=n.querySelector(".e-icons").classList),(a.contains(_I)||a.contains(Z0))&&this.popupClickHandler(r,l,ld);var h,d=k(t.target,"."+$n);if(!c(d)&&!d.classList.contains(Po)||l.classList.contains(la)){d&&(h=this.items[this.tbarEle.indexOf(d)]);var u={originalEvent:t,item:h};h&&!c(h.click)&&this.trigger("items["+this.tbarEle.indexOf(d)+"].click",u),u.cancel||this.trigger("clicked",u,function(f){!c(i.popObj)&&o&&!f.cancel&&"Popup"===i.overflowMode&&f.item&&"Input"!==f.item.type&&i.popObj.hide({name:"FadeOut",duration:100})})}},e.prototype.popupClickHandler=function(t,i,n){var r=this.popObj;wn(r.element)?(i.classList.remove(J0),r.hide({name:"FadeOut",duration:100})):(t.classList.contains(n)&&(r.enableRtl=!0,r.position={X:"left",Y:"top"}),0===r.offsetX&&!t.classList.contains(n)&&(r.enableRtl=!1,r.position={X:"right",Y:"top"}),r.dataBind(),r.refreshPosition(),r.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(r.element.style.minHeight="0px"),i.classList.add(J0),r.show({name:"FadeIn",duration:100}))},e.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){var t=oe(this.width),i=oe(this.height);("msie"!==E.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&ge(this.element,{height:i}),ge(this.element,{width:t}),re(this.element,{role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&M([this.element],this.cssClass.split(" "))},e.prototype.renderControl=function(){var t=this.element;this.trgtEle=t.children.length>0?t.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},e.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},e.prototype.itemsAlign=function(t,i){var n,r;this.tbarEle||(this.tbarEle=[]);for(var o=0;o<t.length;o++)n=this.renderSubComponent(t[parseInt(o.toString(),10)],o),-1===this.tbarEle.indexOf(n)&&this.tbarEle.push(n),this.tbarAlign||this.tbarItemAlign(t[parseInt(o.toString(),10)],i,o),(r=i.querySelector(".e-toolbar-"+t[parseInt(o.toString(),10)].align.toLowerCase()))?(t[parseInt(o.toString(),10)].showAlwaysInPopup&&"Show"!==t[parseInt(o.toString(),10)].overflow||this.tbarAlgEle[(t[parseInt(o.toString(),10)].align+"s").toLowerCase()].push(n),r.appendChild(n)):i.appendChild(n);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())},e.prototype.changeOrientation=function(){var t=this.element;this.isVertical?(t.classList.remove(VP),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(t.style.height=this.height),t.setAttribute("aria-orientation","horizontal")):(t.classList.add(VP),this.isVertical=!0,t.setAttribute("aria-orientation","vertical"),ge(this.element,{height:oe(this.height),width:oe(this.width)})),this.destroyMode(),this.refreshOverflow()},e.prototype.initScroll=function(t,i){!this.scrollModule&&this.checkOverflow(t,i[0])&&(this.tbarAlign&&this.element.querySelector("."+In+" ."+kq).removeAttribute("style"),this.scrollModule=this.isVertical?new km({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]):new kI({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]),this.cssClass&&M([i[0]],this.cssClass.split(" ")),this.remove(this.scrollModule.element,uh),ge(this.element,{overflow:"hidden"}))},e.prototype.itemWidthCal=function(t){var r,i=this,n=0;return[].slice.call(me("."+$n,t)).forEach(function(o){wn(o)&&(r=window.getComputedStyle(o),n+=i.isVertical?o.offsetHeight:o.offsetWidth,n+=parseFloat(i.isVertical?r.marginTop:r.marginRight),n+=parseFloat(i.isVertical?r.marginBottom:r.marginLeft))}),n},e.prototype.getScrollCntEle=function(t){return t.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")},e.prototype.checkOverflow=function(t,i){if(c(t)||c(i)||!wn(t))return!1;var n=this.isVertical?t.offsetHeight:t.offsetWidth,r=this.isVertical?i.offsetHeight:i.offsetWidth;(this.tbarAlign||this.scrollModule||n===r)&&(r=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(i):i));var o=t.querySelector("."+la),a=t.querySelector("."+Dq),l=0;return o?l=this.isVertical?o.offsetHeight:o.offsetWidth:a&&(l=this.isVertical?2*a.offsetHeight:2*a.offsetWidth),r>n-l},e.prototype.refreshOverflow=function(){this.resize()},e.prototype.toolbarAlign=function(t){this.tbarAlign&&(this.add(t,uh),this.itemPositioning())},e.prototype.renderOverflowMode=function(){var t=this.element,i=t.querySelector("."+In),n=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===E.info.name&&"auto"===this.height&&(t.style.height=""),this.overflowMode){case"Scrollable":c(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(In)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(t,i)||n)&&this.setOverflowAttributes(t),this.toolbarAlign(i);break;case"MultiRow":this.add(i,Lq),this.checkOverflow(t,i)&&this.tbarAlign&&(this.removePositioning(),this.add(i,Vq)),"hidden"===t.style.overflow&&(t.style.overflow=""),("msie"===E.info.name||"auto"!==t.style.height)&&(t.style.height="auto");break;case"Extended":this.add(this.element,Pq),(this.checkOverflow(t,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t)),this.toolbarAlign(i)}},e.prototype.setOverflowAttributes=function(t){this.createPopupEle(t,[].slice.call(me("."+In+" ."+$n,t))),re(this.element.querySelector("."+la),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},e.prototype.separator=function(){var t=this.element,i=[].slice.call(t.querySelectorAll("."+er)),n=t.querySelector("."+FP),r=t.querySelector("."+RP),o="MultiRow"===this.overflowMode?n:r;null!==o&&("MultiRow"===this.overflowMode?o.classList.remove(FP):"Extended"===this.overflowMode&&o.classList.remove(RP));for(var a=0;a<=i.length-1;a++)i[parseInt(a.toString(),10)].offsetLeft<30&&0!==i[parseInt(a.toString(),10)].offsetLeft&&("MultiRow"===this.overflowMode?i[parseInt(a.toString(),10)].classList.add(FP):"Extended"===this.overflowMode&&i[parseInt(a.toString(),10)].classList.add(RP))},e.prototype.createPopupEle=function(t,i){var n=t.querySelector("."+la),r=this.isVertical;n||this.createPopupIcon(t),n=t.querySelector("."+la);var a=(r?t.offsetHeight:t.offsetWidth)-(r?n.offsetHeight:n.offsetWidth);this.element.classList.remove("e-rtl"),ge(this.element,{direction:"initial"}),this.checkPriority(t,i,a,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},e.prototype.pushingPoppedEle=function(t,i,n,r,o){var a=t.element,l=[].slice.call(me("."+lp,a.querySelector("."+In))),h=me("."+ch,n),d=0,p=0;l.forEach(function(m,y){h=me("."+ch,n),m.classList.contains(ch)&&h.length>0?t.tbResize&&h.length>y?(n.insertBefore(m,h[parseInt(y.toString(),10)]),++p):(n.insertBefore(m,n.children[h.length]),++p):m.classList.contains(ch)||t.tbResize&&m.classList.contains(jI)&&n.children.length>0&&0===h.length?(n.insertBefore(m,n.firstChild),++p):m.classList.contains(jI)?i.push(m):t.tbResize?(n.insertBefore(m,n.childNodes[d+p]),++d):n.appendChild(m),m.classList.contains(er)?ge(m,{display:"",height:o+"px"}):ge(m,{display:"",height:r+"px"})}),i.forEach(function(m){n.appendChild(m)});for(var u=me("."+$n,a.querySelector("."+In)),f=u.length-1;f>=0;f--){var g=u[parseInt(f.toString(),10)];if(!g.classList.contains(er)||"Extended"===this.overflowMode)break;ge(g,{display:"none"})}},e.prototype.createPopup=function(){var i,n,t=this.element;"Extended"===this.overflowMode&&(n=t.querySelector("."+er+":not(."+lp+")"),i="auto"===t.style.height||""===t.style.height?null:n.offsetHeight);var a,r=t.querySelector("."+$n+":not(."+er+"):not(."+lp+")"),o="auto"===t.style.height||""===t.style.height?null:r&&r.offsetHeight;if(H("#"+t.id+"_popup."+K0,t))a=H("#"+t.id+"_popup."+K0,t);else{var h=this.createElement("div",{id:t.id+"_popup",className:K0+" "+qI}),d=this.createElement("div",{id:t.id+"_popup",className:K0});a="Extended"===this.overflowMode?h:d}this.pushingPoppedEle(this,[],a,o,i),this.popupInit(t,a)},e.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},e.prototype.popupInit=function(t,i){if(this.popObj){var a=this.popObj.element;ge(a,{maxHeight:"",display:"block"}),ge(a,{maxHeight:a.offsetHeight+"px",display:""})}else{t.appendChild(i),this.cssClass&&M([i],this.cssClass.split(" ")),ge(this.element,{overflow:""});var n=window.getComputedStyle(this.element),r=new dr(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.overflowMode&&(r.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),r.offsetX=0),r.appendTo(i),C.add(document,"scroll",this.docEvent.bind(this)),C.add(document,"click ",this.docEvent.bind(this)),r.element.style.maxHeight=r.element.offsetHeight+"px",this.isVertical&&(r.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector("."+la);o.classList.add(J0),ze(o.firstElementChild,[_I],[Z0]),this.element.querySelector("."+qI).classList.add(Tq)}else r.hide();this.popObj=r}},e.prototype.tbarPopupHandler=function(t){"Extended"===this.overflowMode&&(t?this.add(this.element,OP):this.remove(this.element,OP))},e.prototype.popupOpen=function(t){var i=this.popObj;this.isVertical||(i.offsetY=this.getElementOffsetY(),i.dataBind());var n=this.popObj.element,r=this.popObj.element.parentElement,o=r.querySelector("."+la);o.setAttribute("aria-expanded","true"),ge(i.element,{height:"auto",maxHeight:""}),i.element.style.maxHeight=i.element.offsetHeight+"px","Extended"===this.overflowMode&&(i.element.style.minHeight="");var a=n.offsetTop+n.offsetHeight+kr(r).top,l=o.firstElementChild;o.classList.add(J0),ze(l,[_I],[Z0]),this.tbarPopupHandler(!0);var h=c(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+h<a&&this.element.offsetTop<n.offsetHeight){var d=n.offsetHeight-(a-window.innerHeight-h+5);i.height=d+"px";for(var p=0;p<=n.childElementCount;p++){var u=n.children[parseInt(p.toString(),10)];if(u.offsetTop+u.offsetHeight>d){d=u.offsetTop;break}}ge(i.element,{maxHeight:d+"px"})}else if(this.isVertical){var f=this.element.getBoundingClientRect();ge(i.element,{maxHeight:f.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(i){var g=n.getBoundingClientRect();g.right>document.documentElement.clientWidth&&g.width>r.getBoundingClientRect().width&&(i.collision={Y:"none"},i.dataBind()),i.refreshPosition()}},e.prototype.popupClose=function(t){var n=this.element.querySelector("."+la);n.setAttribute("aria-expanded","false");var r=n.firstElementChild;n.classList.remove(J0),ze(r,[Z0],[_I]),this.tbarPopupHandler(!1)},e.prototype.checkPriority=function(t,i,n,r){for(var h,o=this.popupPriCount>0,l=n,p=0,u=0,f=0,g=function(T,L){var N=!1;return L.forEach(function(O){T.classList.contains(O)&&(N=!0)}),N},m=i.length-1;m>=0;m--){var y=void 0,b=window.getComputedStyle(i[parseInt(m.toString(),10)]);this.isVertical?(y=parseFloat(b.marginTop),y+=parseFloat(b.marginBottom)):(y=parseFloat(b.marginRight),y+=parseFloat(b.marginLeft));var w=i[parseInt(m.toString(),10)]===this.tbarEle[0];w&&(this.tbarEleMrgn=y),h=this.isVertical?i[parseInt(m.toString(),10)].offsetHeight:i[parseInt(m.toString(),10)].offsetWidth;var S=w?h+y:h;if(g(i[parseInt(m.toString(),10)],[NP])&&o&&(i[parseInt(m.toString(),10)].classList.add(lp),ge(i[parseInt(m.toString(),10)],this.isVertical?{display:"none",minHeight:S+"px"}:{display:"none",minWidth:S+"px"}),f++),this.isVertical?i[parseInt(m.toString(),10)].offsetTop+i[parseInt(m.toString(),10)].offsetHeight+y>n:i[parseInt(m.toString(),10)].offsetLeft+i[parseInt(m.toString(),10)].offsetWidth+y>n){if(i[parseInt(m.toString(),10)].classList.contains(er)){if("Extended"===this.overflowMode)g(I=i[parseInt(m.toString(),10)],[er,$0])&&(i[parseInt(m.toString(),10)].classList.add(lp),f++),u++;else if("Popup"===this.overflowMode){var I;p>0&&u===f&&g(I=i[m+u+(p-1)],[er,$0])&&ge(I,{display:"none"}),p++,u=0,f=0}}else u++;i[parseInt(m.toString(),10)].classList.contains(ch)&&r||g(i[parseInt(m.toString(),10)],[er,$0])?n-=(this.isVertical?i[parseInt(m.toString(),10)].offsetHeight:i[parseInt(m.toString(),10)].offsetWidth)+y:(i[parseInt(m.toString(),10)].classList.add(lp),ge(i[parseInt(m.toString(),10)],this.isVertical?{display:"none",minHeight:S+"px"}:{display:"none",minWidth:S+"px"}),f++)}}if(r){var x=me("."+$n+":not(."+lp+")",this.element);this.checkPriority(t,x,l,!1)}},e.prototype.createPopupIcon=function(t){var i=t.id.concat("_nav"),n="e-"+t.id.concat("_nav e-hor-nav"),r=this.createElement("div",{id:i,className:n="Extended"===this.overflowMode?n+" e-expended-nav":n});("msie"===E.info.name||"edge"===E.info.name)&&r.classList.add("e-ie-align");var o=this.createElement("div",{className:Z0+" e-icons"});r.appendChild(o),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),t.appendChild(r)},e.prototype.tbarPriRef=function(t,i,n,r,o,a,l,h){var d=h,u="."+$n+":not(."+er+"):not(."+ch+")",f=me("."+lp+":not(."+ch+")",this.popObj.element).length,g=function(I,x){return I.classList.contains(x)};if(0===me(u,t).length){var m=t.children[i-(i-n)-1],y=!c(m)&&g(m,$0);if(!c(m)&&g(m,er)&&!wn(m)||y){m.style.display="inherit";var w=m.offsetWidth+2*parseFloat(window.getComputedStyle(m).marginRight),S=m.previousElementSibling;a+w<l||o?(t.insertBefore(r,t.children[i+d-(i-n)]),c(S)||(S.style.display="")):S.classList.contains(er)&&(S.style.display="none"),m.style.display=""}else t.insertBefore(r,t.children[i+d-(i-n)])}else t.insertBefore(r,t.children[i+d-f])},e.prototype.popupRefresh=function(t,i){var n=this,r=this.element,o=this.isVertical,a=r.querySelector("."+In),l=r.querySelector("."+la);if(!c(l)){var h;a.removeAttribute("style"),t.style.display="block",h=o?r.offsetHeight-(l.offsetHeight+a.offsetHeight):r.offsetWidth-(l.offsetWidth+a.offsetWidth);var d=0;[].slice.call(t.children).forEach(function(p){d+=n.popupEleWidth(p),ge(p,{position:""})}),h+(o?l.offsetHeight:l.offsetWidth)>d&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(h,t,i),t.style.display="",0===t.children.length&&l&&this.popObj&&(z(l),l=null,this.popObj.destroy(),z(this.popObj.element),this.popObj=null)}},e.prototype.ignoreEleFetch=function(t,i){var n=[].slice.call(i.querySelectorAll("."+$0)),r=[],o=0;return n.length>0?(n.forEach(function(a){r.push([].slice.call(i.children).indexOf(a))}),r.forEach(function(a){a<=t&&o++}),o):0},e.prototype.checkPopupRefresh=function(t,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var r=t.offsetWidth-t.querySelector("."+la).offsetWidth,o=t.querySelector("."+In).offsetWidth;return i.style.removeProperty("display"),r>n+o},e.prototype.popupEleWidth=function(t){t.style.position="absolute";var i=this.isVertical?t.offsetHeight:t.offsetWidth,n=t.querySelector(".e-tbar-btn-text");if(t.classList.contains("e-tbtn-align")||t.classList.contains(PP)){var r=t.children[0];!c(n)&&t.classList.contains(PP)?n.style.display="none":!c(n)&&t.classList.contains(Eq)&&(n.style.display="block"),r.style.minWidth="0%",i=parseFloat(this.isVertical?t.style.minHeight:t.style.minWidth),r.style.minWidth="",r.style.minHeight="",c(n)||(n.style.display="")}return i},e.prototype.popupEleRefresh=function(t,i,n){for(var a,l,r=this.popupPriCount>0,o=this.tbarEle,h=this.element.querySelector("."+In),d=0,p=function(w){if(w.classList.contains(NP)&&r&&!n)return"continue";var S=u.popupEleWidth(w);if(w===u.tbarEle[0]&&(S+=u.tbarEleMrgn),w.style.position="",!(S<t||n))return"break";if(ge(w,{minWidth:"",height:"",minHeight:""}),w.classList.contains(jI)||w.classList.remove(lp),l=u.tbarEle.indexOf(w),u.tbarAlign){var I=u.items[parseInt(l.toString(),10)].align;l=u.tbarAlgEle[(I+"s").toLowerCase()].indexOf(w),o=u.tbarAlgEle[(I+"s").toLowerCase()],h=u.element.querySelector("."+In+" .e-toolbar-"+I.toLowerCase())}var x=0;"Extended"!==u.overflowMode&&o.slice(0,l).forEach(function(T){(T.classList.contains(ch)||T.classList.contains(er))&&(T.classList.contains(er)&&(T.style.display="",t-=T.offsetWidth),x++)}),d=u.ignoreEleFetch(l,h),w.classList.contains(ch)?(u.tbarPriRef(h,l,x,w,n,S,t,d),t-=w.offsetWidth):0===l?(h.insertBefore(w,h.firstChild),t-=w.offsetWidth):(a=me("."+ch,u.popObj.element).length,h.insertBefore(w,h.children[l+d-a]),t-=w.offsetWidth),w.style.height=""},u=this,f=0,g=[].slice.call(i.children);f<g.length&&"break"!==p(g[f]);f++);this.checkOverflow(this.element,this.element.getElementsByClassName(In)[0])&&!n&&this.renderOverflowMode()},e.prototype.removePositioning=function(){var t=this.element.querySelector("."+In);if(!c(t)&&t.classList.contains(uh)){this.remove(t,uh);var i=[].slice.call(t.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},e.prototype.refreshPositioning=function(){var t=this.element.querySelector("."+In);this.add(t,uh),this.itemPositioning()},e.prototype.itemPositioning=function(){var i,t=this.element.querySelector("."+In);if(!c(t)&&t.classList.contains(uh)){var r,n=this.element.querySelector("."+la);r=[].slice.call(this.scrollModule?t.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:t.childNodes),i=this.isVertical?r[0].offsetHeight+r[2].offsetHeight:r[0].offsetWidth+r[2].offsetWidth;var a=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){a-=this.isVertical?n.offsetHeight:n.offsetWidth;var l=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";r[2].removeAttribute("style"),this.isVertical?this.enableRtl?r[2].style.top=l:r[2].style.bottom=l:this.enableRtl?r[2].style.left=l:r[2].style.right=l}if(!(a<=i)){var h=(a-i-(this.isVertical?r[1].offsetHeight:r[1].offsetWidth))/2;r[1].removeAttribute("style");var d=(this.isVertical?r[0].offsetHeight:r[0].offsetWidth)+h+"px";this.isVertical?this.enableRtl?r[1].style.marginBottom=d:r[1].style.marginTop=d:this.enableRtl?r[1].style.marginRight=d:r[1].style.marginLeft=d}}},e.prototype.tbarItemAlign=function(t,i,n){var r=this;if(!t.showAlwaysInPopup||"Show"===t.overflow){var o=[];if(o.push(this.createElement("div",{className:"e-toolbar-left"})),o.push(this.createElement("div",{className:kq})),o.push(this.createElement("div",{className:"e-toolbar-right"})),0===n&&"Left"!==t.align)o.forEach(function(h){i.appendChild(h)}),this.tbarAlign=!0,this.add(i,uh);else if("Left"!==t.align){var l=o[0];[].slice.call(i.childNodes).forEach(function(h){r.tbarAlgEle.lefts.push(h),l.appendChild(h)}),i.appendChild(l),i.appendChild(o[1]),i.appendChild(o[2]),this.tbarAlign=!0,this.add(i,uh)}}},e.prototype.ctrlTemplate=function(){var t=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,In),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(n){"DIV"===n.tagName&&(t.tbarEle.push(n),c(n.firstElementChild)||n.firstElementChild.setAttribute("aria-disabled","false"),t.add(n,$n))})},e.prototype.renderItems=function(){var t=this.element,i=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(t&&i.length>0){var n=void 0;t&&t.children.length>0&&(n=t.querySelector("."+In)),n||(n=this.createElement("div",{className:In})),this.itemsAlign(i,n),t.appendChild(n)}},e.prototype.setAttr=function(t,i){for(var r,n=Object.keys(t),o=0;o<n.length;o++)"class"===(r=n[parseInt(o.toString(),10)])?this.add(i,t[""+r]):i.setAttribute(r,t[""+r])},e.prototype.enableItems=function(t,i){var o,n=t,r=n.length;c(i)&&(i=!0);var a=function(p,u){p?(u.classList.remove(Po),c(u.firstElementChild)||u.firstElementChild.setAttribute("aria-disabled","false")):(u.classList.add(Po),c(u.firstElementChild)||u.firstElementChild.setAttribute("aria-disabled","true"))};if(!c(r)&&r>=1){for(var l=0,h=[].slice.call(n);l<r;l++){var d=h[parseInt(l.toString(),10)];if("number"==typeof d){if(c(o=this.getElementByIndex(d)))return;n[parseInt(l.toString(),10)]=o}else o=d;a(i,o)}i?A(n,Po):M(n,Po)}else{if("number"==typeof n){if(c(o=this.getElementByIndex(n)))return}else o=t;a(i,o)}},e.prototype.getElementByIndex=function(t){return this.tbarEle[parseInt(t.toString(),10)]?this.tbarEle[parseInt(t.toString(),10)]:null},e.prototype.addItems=function(t,i){var n;this.extendedOpen();var r=this.element.querySelector("."+In);if(c(r))this.itemsRerender(t);else{var o,a="Left";c(i)&&(i=0),t.forEach(function(f){!c(f.align)&&"Left"!==f.align&&"Left"===a&&(a=f.align)});for(var l=0,h=t;l<h.length;l++){var d=h[l];if(c(d.type)&&(d.type="Button"),n=me("."+$n,this.element),d.align=a,o=this.renderSubComponent(d,i),this.tbarEle.length>=i&&n.length>=0){c(this.scrollModule)&&this.destroyMode();var p="L"===d.align[0]?0:"C"===d.align[0]?1:2,u=void 0;this.tbarAlign||"Left"===a?this.tbarAlign?((u=k(n[0],"."+In).children[parseInt(p.toString(),10)]).insertBefore(o,u.children[parseInt(i.toString(),10)]),this.tbarAlgEle[(d.align+"s").toLowerCase()].splice(i,0,o),this.refreshPositioning()):0===n.length?(n=me("."+In,this.element))[0].appendChild(o):n[0].parentNode.insertBefore(o,n[parseInt(i.toString(),10)]):(this.tbarItemAlign(d,r,1),this.tbarAlign=!0,(u=k(n[0],"."+In).children[parseInt(p.toString(),10)]).appendChild(o),this.tbarAlgEle[(d.align+"s").toLowerCase()].push(o),this.refreshPositioning()),this.items.splice(i,0,d),d.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(i,0,o),i++,this.offsetWid=r.offsetWidth}}r.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},e.prototype.removeItems=function(t){var n,i=t,r=[].slice.call(me("."+$n,this.element));if("number"==typeof i)n=parseInt(t.toString(),10),this.removeItemByIndex(n,r);else if(i&&i.length>1)for(var o=0,a=[].slice.call(i);o<a.length;o++)n=this.tbarEle.indexOf(a[o]),this.removeItemByIndex(n,r),r=me("."+$n,this.element);else n=r.indexOf(i&&i.length&&1===i.length?i[0]:t),this.removeItemByIndex(n,r);this.resize()},e.prototype.removeItemByIndex=function(t,i){if(this.tbarEle[parseInt(t.toString(),10)]&&i[parseInt(t.toString(),10)]){var n=this.tbarEle.indexOf(i[parseInt(t.toString(),10)]);if(this.tbarAlign){var r=this.tbarAlgEle[(this.items[parseInt(n.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(n.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(n.toString(),10)].align+"s").toLowerCase()].splice(parseInt(r.toString(),10),1)}this.isReact&&this.clearTemplate();var o=i[parseInt(t.toString(),10)].querySelector(".e-control.e-btn");!c(o)&&!c(o.ej2_instances[0])&&!o.ej2_instances[0].isDestroyed&&o.ej2_instances[0].destroy(),z(i[parseInt(t.toString(),10)]),this.items.splice(n,1),this.tbarEle.splice(n,1)}},e.prototype.templateRender=function(t,i,n,r){var l,a=t;if("object"==typeof t&&(l="function"==typeof a.appendTo),"string"!=typeof t&&l)"Input"===n.type&&((u=this.createElement("input")).id=n.id?n.id:yt("tbr-ipt"),i.appendChild(u),a.appendTo(u));else{var d,h=void 0,p=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);d="string"==typeof t?t.trim():t;try{if("object"!=typeof t||c(t.tagName))if("string"==typeof t&&p.test(d))i.innerHTML=d;else if(document.querySelectorAll(d).length){var u,f=(u=document.querySelector(d)).outerHTML.trim();i.appendChild(u),u.style.display="",c(f)||this.tempId.push(d)}else h=qe(d);else i.appendChild(t)}catch{h=qe(d)}var g=void 0;c(h)||(g=h({},this,"template",this.element.id+r+"_template",this.isStringTemplate)),!c(g)&&g.length>0&&[].slice.call(g).forEach(function(y){c(y.tagName)||(y.style.display=""),i.appendChild(y)})}this.add(i,Mq),this.tbarEle.push(i)},e.prototype.buttonRendering=function(t,i){var n=this.createElement("button",{className:"e-tbar-btn"});n.setAttribute("type","button");var o,a,r=t.text;n.id=t.id?t.id:yt("e-tbr-btn");var l=this.createElement("span",{className:"e-tbar-btn-text"});r?(l.innerHTML=this.enableHtmlSanitizer?$t.sanitize(r):r,n.appendChild(l),n.classList.add("e-tbtn-txt")):this.add(i,"e-tbtn-align"),(t.prefixIcon||t.suffixIcon)&&(t.prefixIcon&&t.suffixIcon||t.prefixIcon?(o=t.prefixIcon+" e-icons",a="Left"):(o=t.suffixIcon+" e-icons",a="Right"));var h=new li({iconCss:o,iconPosition:a});return h.createElement=this.createElement,h.appendTo(n),t.width&&ge(n,{width:oe(t.width)}),n},e.prototype.renderSubComponent=function(t,i){var n,r=this.createElement("div",{className:$n}),o=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?$t.sanitize(t.tooltipText):t.tooltipText});if(this.tbarEle||(this.tbarEle=[]),t.htmlAttributes&&this.setAttr(t.htmlAttributes,r),t.tooltipText&&r.setAttribute("title",o.textContent),t.cssClass&&(r.className=r.className+" "+t.cssClass),t.template)this.templateRender(t.template,r,t,i);else switch(t.type){case"Button":(n=this.buttonRendering(t,r)).setAttribute("tabindex",c(t.tabIndex)?"-1":t.tabIndex.toString()),n.setAttribute("data-tabindex",c(t.tabIndex)?"-1":t.tabIndex.toString()),n.setAttribute("aria-label",t.text||t.tooltipText),n.setAttribute("aria-disabled","false"),r.appendChild(n),r.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(r,er)}if(t.showTextOn){var a=t.showTextOn;"Toolbar"===a?(this.add(r,Eq),this.add(r,"e-tbtn-align")):"Overflow"===a&&this.add(r,PP)}if(t.overflow){var l=t.overflow;"Show"===l?this.add(r,ch):"Hide"===l&&(r.classList.contains(er)||this.add(r,jI))}return"Show"!==t.overflow&&t.showAlwaysInPopup&&!r.classList.contains(er)&&(this.add(r,NP),this.popupPriCount++),t.disabled&&this.add(r,Po),!1===t.visible&&this.add(r,hp),r},e.prototype.getDataTabindex=function(t){return c(t.getAttribute("data-tabindex"))?"-1":t.getAttribute("data-tabindex")},e.prototype.itemClick=function(t){this.activeEleSwitch(t.currentTarget)},e.prototype.activeEleSwitch=function(t){this.activeEleRemove(t.firstElementChild),this.activeEle.focus()},e.prototype.activeEleRemove=function(t){c(this.activeEle)||this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),this.activeEle=t,"-1"===this.getDataTabindex(this.activeEle)&&(c(this.trgtEle)&&!t.parentElement.classList.contains(Mq)?(this.updateTabIndex("-1"),t.removeAttribute("tabindex")):this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)))},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.getModuleName=function(){return"toolbar"},e.prototype.itemsRerender=function(t){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=t,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},e.prototype.resize=function(){var t=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var i=this.checkOverflow(t,t.getElementsByClassName(In)[0]);if(!i){this.destroyScroll();var n=t.querySelector("."+In);c(n)||(this.remove(n,Vq),this.tbarAlign&&this.add(n,uh))}if(!i||!this.scrollModule||this.offsetWid!==t.offsetWidth){if((this.offsetWid>t.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var r=window.getComputedStyle(this.element);this.popObj.width=parseFloat(r.width)+2*parseFloat(r.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+Aq)&&(this.scrollStep=this.element.querySelector("."+Aq).offsetWidth),this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator()}},e.prototype.extendedOpen=function(){var t=this.element.querySelector("."+qI);"Extended"===this.overflowMode&&t&&(this.isExtendedOpen=t.classList.contains(Tq))},e.prototype.updateHideEleTabIndex=function(t,i,n,r,o){n&&(r=o.indexOf(t));for(var a=o[++r];a;){if(!this.eleContains(a)){var h=a.firstElementChild.getAttribute("data-tabindex");i&&"-1"===h?a.firstElementChild.setAttribute("tabindex","0"):h!==a.firstElementChild.getAttribute("tabindex")&&a.firstElementChild.setAttribute("tabindex",h);break}a=o[++r]}},e.prototype.onPropertyChanged=function(t,i){var n=this.element;this.extendedOpen();for(var o=0,a=Object.keys(t);o<a.length;o++)switch(a[o]){case"items":if(t.items instanceof Array&&i.items instanceof Array)this.itemsRerender(t.items);else for(var h=Object.keys(t.items),d=0;d<h.length;d++){var p=parseInt(Object.keys(t.items)[parseInt(d.toString(),10)],10),u=Object.keys(t.items[parseInt(p.toString(),10)])[0],f=Object(t.items[parseInt(p.toString(),10)])[""+u];if("function"!=typeof f){if(this.tbarAlign||"align"===u){this.refresh(),this.trigger("created");break}var m="overflow"===u&&0!==this.popupPriCount;("showAlwaysInPopup"===u&&!f||this.items[parseInt(p.toString(),10)].showAlwaysInPopup&&m)&&--this.popupPriCount,c(this.scrollModule)&&this.destroyMode();var y=[].slice.call(me("."+In+" ."+$n,n));this.isReact&&this.items[parseInt(p.toString(),10)].template&&this.clearTemplate(),z(y[parseInt(p.toString(),10)]),this.tbarEle.splice(p,1),this.addItems([this.items[parseInt(p.toString(),10)]],p),this.items.splice(p,1),this.items[parseInt(p.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}}break;case"width":ge(n,{width:oe(t.width)}),this.refreshOverflow();break;case"height":ge(this.element,{height:oe(t.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(n,ld),this.refreshOverflow();break;case"enableRtl":t.enableRtl?this.add(n,ld):this.remove(n,ld),c(this.scrollModule)||(t.enableRtl?this.add(this.scrollModule.element,ld):this.remove(this.scrollModule.element,ld)),c(this.popObj)||(t.enableRtl?this.add(this.popObj.element,ld):this.remove(this.popObj.element,ld)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":i.cssClass&&A([this.element],i.cssClass.split(" ")),t.cssClass&&M([this.element],t.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),t.allowKeyboard&&this.wireKeyboardEvent()}},e.prototype.hideItem=function(t,i){var o,n="object"==typeof t,r=t;if(n||!c(r)){var a=[].slice.call(me("."+$n,this.element));n?o=t:this.tbarEle[parseInt(r.toString(),10)]&&(o=[].slice.call(me("."+$n,this.element))[parseInt(r.toString(),10)]),o&&(i?(o.classList.add(hp),o.classList.contains(er)||(c(o.firstElementChild.getAttribute("tabindex"))||"-1"!==o.firstElementChild.getAttribute("tabindex"))&&this.updateHideEleTabIndex(o,i,n,r,a)):(o.classList.remove(hp),o.classList.contains(er)||this.updateHideEleTabIndex(o,i,n,r,a)),this.refreshOverflow())}},ji([Sn([],Jve)],e.prototype,"items",void 0),ji([v("auto")],e.prototype,"width",void 0),ji([v("auto")],e.prototype,"height",void 0),ji([v("")],e.prototype,"cssClass",void 0),ji([v("Scrollable")],e.prototype,"overflowMode",void 0),ji([v()],e.prototype,"scrollStep",void 0),ji([v(!0)],e.prototype,"enableCollision",void 0),ji([v(!0)],e.prototype,"enableHtmlSanitizer",void 0),ji([v(!0)],e.prototype,"allowKeyboard",void 0),ji([V()],e.prototype,"clicked",void 0),ji([V()],e.prototype,"created",void 0),ji([V()],e.prototype,"destroyed",void 0),ji([V()],e.prototype,"beforeCreate",void 0),ji([et],e)}(Lt),WI=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),on=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},UI="e-acrdn-root",cf="e-accordion",Ha="e-acrdn-item",Nq="e-item-focus",eb="e-hide",vs="e-acrdn-header",tb="e-acrdn-header-content",Al="e-acrdn-panel",Ac="e-acrdn-content",ib="e-toggle-icon",Fq="e-expand-icon",BP="e-rtl",zP="e-content-hide",HP="e-select",nb="e-selected",rb="e-active",Fm="e-overlay",GI="e-toggle-animation",fh="e-expand-state",Rq="e-accordion-container",Oq=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return WI(e,s),on([v("SlideDown")],e.prototype,"effect",void 0),on([v(400)],e.prototype,"duration",void 0),on([v("linear")],e.prototype,"easing",void 0),e}(ce),nye=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return WI(e,s),on([Fe({effect:"SlideUp",duration:400,easing:"linear"},Oq)],e.prototype,"collapse",void 0),on([Fe({effect:"SlideDown",duration:400,easing:"linear"},Oq)],e.prototype,"expand",void 0),e}(ce),rye=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return WI(e,s),on([v(null)],e.prototype,"content",void 0),on([v(null)],e.prototype,"header",void 0),on([v(null)],e.prototype,"cssClass",void 0),on([v(null)],e.prototype,"iconCss",void 0),on([v(!1)],e.prototype,"expanded",void 0),on([v(!0)],e.prototype,"visible",void 0),on([v(!1)],e.prototype,"disabled",void 0),on([v()],e.prototype,"id",void 0),e}(ce),sye=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},n}return WI(e,s),e.prototype.destroy=function(){(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate();var t=this.element;if(s.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(t.children).forEach(function(i){t.removeChild(i)}),this.trgtEle){for(this.trgtEle=null;this.ctrlTem.firstElementChild;)t.appendChild(this.ctrlTem.firstElementChild);this.ctrlTem=null}t.classList.remove(UI),t.removeAttribute("style"),this.element.removeAttribute("data-ripple"),!this.isNested&&wl&&this.removeRippleEffect()},e.prototype.preRender=function(){var t=k(this.element,"."+Al);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),t&&t.firstElementChild&&t.firstElementChild.firstElementChild?t.firstElementChild.firstElementChild.classList.contains(cf)&&(t.classList.add("e-nested"),this.isNested=!0):this.element.classList.add(UI),this.enableRtl&&this.add(this.element,BP)},e.prototype.add=function(t,i){t.classList.add(i)},e.prototype.remove=function(t,i){t.classList.remove(i)},e.prototype.render=function(){this.initializeHeaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){var t=oe(this.width),i=oe(this.height);ge(this.element,{width:t,height:i}),c(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices)},e.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?H("div",this.element):null,this.renderItems(),this.initItemExpand()},e.prototype.wireFocusEvents=function(){for(var i=0,n=[].slice.call(this.element.querySelectorAll("."+Ha));i<n.length;i++){var r=n[i],o=r.querySelector("."+vs);r.childElementCount>0&&o&&(C.clearEvents(o),C.add(o,"focus",this.focusIn,this),C.add(o,"blur",this.focusOut,this))}},e.prototype.unwireEvents=function(){C.remove(this.element,"click",this.clickHandler),c(this.keyModule)||this.keyModule.destroy()},e.prototype.wireEvents=function(){C.add(this.element,"click",this.clickHandler,this),!this.isNested&&!this.isDestroy&&(this.removeRippleEffect=zi(this.element,{selector:"."+vs})),this.isNested||(this.keyModule=new St(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},e.prototype.templateParser=function(t){if(t)try{return"function"!=typeof t&&document.querySelectorAll(t).length?qe(document.querySelector(t).innerHTML.trim()):qe(t)}catch{return qe(t)}},e.prototype.initializeHeaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},e.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},e.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},e.prototype.getItemTemplate=function(){return this.itemTemplateFn},e.prototype.focusIn=function(t){t.target.parentElement.classList.add(Nq)},e.prototype.focusOut=function(t){t.target.parentElement.classList.remove(Nq)},e.prototype.ctrlTemplate=function(){this.ctrlTem=this.element.cloneNode(!0);var i=H("."+Rq,this.element),n=[];[].slice.call(i?i.children:this.element.children).forEach(function(r){n.push({header:r.childElementCount>0&&r.children[0]?r.children[0]:"",content:r.childElementCount>1&&r.children[1]?r.children[1]:""}),r.parentNode.removeChild(r)}),i&&this.element.removeChild(i),this.setProperties({items:n},!0)},e.prototype.toggleIconGenerate=function(){var t=this.createElement("div",{className:ib}),i=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return t.appendChild(i),t},e.prototype.initItemExpand=function(){var t=this.initExpand.length;if(0!==t){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[t-1]);else for(var i=0;i<t;i++)this.expandItem(!0,this.initExpand[parseInt(i.toString(),10)]);this.isReact&&this.renderReactTemplates()}},e.prototype.renderItems=function(){var n,r,t=this,i=this.element;if(c(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach(function(a,l){r=t.renderInnerItem(a,l),i.appendChild(r),r.childElementCount>0&&(C.add(r.querySelector("."+vs),"focus",t.focusIn,t),C.add(r.querySelector("."+vs),"blur",t.focusOut,t))});else{var o=this.items;i&&o.length>0&&o.forEach(function(a,l){n=t.renderInnerItem(a,l),i.appendChild(n),n.childElementCount>0&&(C.add(n.querySelector("."+vs),"focus",t.focusIn,t),C.add(n.querySelector("."+vs),"blur",t.focusOut,t))})}this.isReact&&this.renderReactTemplates()},e.prototype.clickHandler=function(t){var o,i=t.target,n=this.getItems(),r={};if(k(i,"."+cf)===this.element){i.classList.add("e-target");var p,l=k(i,"."+Ha),h=k(i,"."+vs),d=k(i,"."+Al);l&&(c(h)||c(d))&&(h=l.children[0],d=l.children[1]),h&&(o=H("."+ib,h)),h?p=k(h,"."+Ha):d&&(p=k(d,"."+Ha));var u=this.getIndexByItem(l);p&&(r.item=n[this.getIndexByItem(p)]),r.originalEvent=t,!(!c(o)&&l.childElementCount<=1)||!c(d)&&c(H("."+vs+" ."+ib,p))||(l.appendChild(this.contentRendering(u)),this.ariaAttrUpdate(l)),this.afterContentRender(i,r,l,h,d,p),this.isReact&&this.renderReactTemplates()}},e.prototype.afterContentRender=function(t,i,n,r,o,a){var l=this,h=[];this.trigger("clicked",i);var d=o&&!c(H(".e-target",o)),p="."+Al+" ."+cf,u=o&&!c(H("."+cf,o))&&c(k(t,p)),f=o&&c(H("."+cf,o))||k(t,"."+cf)!==this.element;if(d=d&&(u||f),t.classList.remove("e-target"),!(t.classList.contains(Al)||t.classList.contains(Ac)||d)){var g=this.element.querySelector("."+Rq);[].slice.call(g?g.children:this.element.children).forEach(function(O){O.classList.contains(rb)&&h.push(O)});var y=[].slice.call(this.element.querySelectorAll("."+Ha+" [e-animate]"));if(y.length>0)for(var b=0,w=y;b<w.length;b++)h.push(w[b].parentElement);var I=-1!==h.indexOf(a)&&"true"===o.getAttribute("e-animate"),x=!1;if(!c(n)&&!c(r)){var T=H("."+Al,n),N=k(n,"."+UI).querySelector("."+fh);if(c(T))return;x=N===n,!wn(T)||I&&!a.classList.contains(nb)?(h.length>0&&"Single"===this.expandMode&&!I&&h.forEach(function(O){l.collapse(H("."+Al,O)),O.classList.remove(fh)}),this.expand(T)):this.collapse(T),!c(N)&&!x&&N.classList.remove(fh)}}},e.prototype.eleMoveFocus=function(t,i,n){var r,o=k(n,"."+Ha);n===i?r=("moveUp"===t?n.lastElementChild:n).querySelector("."+vs):n.classList.contains(vs)&&(o="moveUp"===t?o.previousElementSibling:o.nextElementSibling)&&(r=H("."+vs,o)),r&&r.focus()},e.prototype.keyActionHandler=function(t){var i=t.target;if(!c(k(t.target,vs))||i.classList.contains(cf)||i.classList.contains(vs)){var a,o=this.element;switch(t.action){case"moveUp":case"moveDown":this.eleMoveFocus(t.action,o,i);break;case"space":case"enter":!c(a=i.nextElementSibling)&&a.classList.contains(Al)?"true"!==a.getAttribute("e-animate")&&i.click():i.click(),t.preventDefault();break;case"home":case"end":("home"===t.action?o.firstElementChild.children[0]:o.lastElementChild.children[0]).focus(),t.preventDefault()}}},e.prototype.headerEleGenerate=function(){var t=this.createElement("div",{className:vs,id:yt("acrdn_header")});return re(t,{tabindex:"0",role:"button","aria-disabled":"false","aria-expanded":"false"}),t},e.prototype.renderInnerItem=function(t,i){var n=this.createElement("div",{className:Ha,id:t.id||yt("acrdn_item")});if(this.headerTemplate){var r=this.headerEleGenerate(),o=this.createElement("div",{className:tb});return r.appendChild(o),Le(this.getHeaderTemplate()(t,this,"headerTemplate",this.element.id+"_headerTemplate",!1),o),n.appendChild(r),r.appendChild(this.toggleIconGenerate()),this.add(n,HP),n}t.header&&this.angularnativeCondiCheck(t,"header")&&(this.enableHtmlSanitizer&&"string"==typeof t.header&&(t.header=$t.sanitize(t.header)),r=this.headerEleGenerate(),o=this.createElement("div",{className:tb}),r.appendChild(o),r.appendChild(this.fetchElement(o,t.header,i,!0)),n.appendChild(r));var a=H("."+vs,n);if(t.expanded&&!c(i)&&!this.enablePersistence&&-1===this.initExpand.indexOf(i)&&this.initExpand.push(i),t.cssClass&&M([n],t.cssClass.split(" ")),t.disabled&&M([n],Fm),!1===t.visible&&M([n],eb),t.iconCss){var l=this.createElement("div",{className:"e-acrdn-header-icon"}),h=this.createElement("span",{className:t.iconCss+" e-icons"});l.appendChild(h),c(a)?((a=this.headerEleGenerate()).appendChild(l),n.appendChild(a)):a.insertBefore(l,a.childNodes[0])}if(t.content&&this.angularnativeCondiCheck(t,"content")){var d=this.toggleIconGenerate();c(a)&&(a=this.headerEleGenerate(),n.appendChild(a)),a.appendChild(d),this.add(n,HP)}return n},e.prototype.angularnativeCondiCheck=function(t,i){var r="content"===i?t.content:t.header;if(this.isAngular&&!c(r.elementRef)){var o=r.elementRef.nativeElement.data;if(c(o)||""===o||-1===o.indexOf("bindings="))return!0;var a=JSON.parse(r.elementRef.nativeElement.data.replace("bindings=",""));return!(!c(a)&&"false"===a["ng-reflect-ng-if"])}return!0},e.prototype.fetchElement=function(t,i,n,r){var o,a,h;try{if(document.querySelectorAll(i).length&&"Button"!==i){var l=document.querySelector(i);a=l.outerHTML.trim(),t.appendChild(l),l.style.display=""}else o=qe(i)}catch{"string"==typeof i?t.innerHTML=$t.sanitize(i):!c(this.trgtEle)&&i instanceof HTMLElement?(t.appendChild(i),t.firstElementChild.style.display=""):o=qe(i)}if(!c(o)){this.isReact&&this.renderReactTemplates();var d=void 0,p=void 0;t.classList.contains(tb)?(d=this.element.id+n+"_header",p="header"):t.classList.contains(Ac)&&(d=this.element.id+n+"_content",p="content"),h=o({},this,p,d,this.isStringTemplate)}return c(h)||!(h.length>0)||c(h[0].tagName)&&1===h.length?0===t.childElementCount&&(t.innerHTML=$t.sanitize(i)):[].slice.call(h).forEach(function(u){c(u.tagName)||(u.style.display=""),t.appendChild(u)}),c(a)||-1===this.templateEle.indexOf(i)&&this.templateEle.push(i),t},e.prototype.ariaAttrUpdate=function(t){var i=H("."+vs,t),n=H("."+Al,t);i.setAttribute("aria-controls",n.id),n.setAttribute("aria-labelledby",i.id),n.setAttribute("role","region")},e.prototype.contentRendering=function(t){var i=this.createElement("div",{className:Al+" "+zP,id:yt("acrdn_panel")});re(i,{"aria-hidden":"true"});var n=this.createElement("div",{className:Ac});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),Le(this.getItemTemplate()(this.dataSource[parseInt(t.toString(),10)],this,"itemTemplate",this.element.id+"_itemTemplate",!1),n),i.appendChild(n)):(this.enableHtmlSanitizer&&typeof this.items[parseInt(t.toString(),10)].content&&(this.items[parseInt(t.toString(),10)].content=$t.sanitize(this.items[parseInt(t.toString(),10)].content)),i.appendChild(this.fetchElement(n,this.items[parseInt(t.toString(),10)].content,t,!1))),i},e.prototype.expand=function(t){var i=this,n=this.getItems(),r=k(t,"."+Ha);if(!(c(t)||wn(t)&&"true"!==t.getAttribute("e-animate")||r.classList.contains(Fm))){var a=k(r,"."+UI).querySelector("."+fh),l={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},h=H("."+ib,r).firstElementChild,d={element:r,item:n[this.getIndexByItem(r)],index:this.getIndexByItem(r),content:r.querySelector("."+Al),isExpanded:!0};this.trigger("expanding",d,function(p){p.cancel||(h.classList.add(GI),i.expandedItemsPush(r),c(a)||a.classList.remove(fh),r.classList.add(fh),"None"===l.name?(i.expandProgress("begin",h,t,r,p),i.expandProgress("end",h,t,r,p)):i.expandAnimation(l.name,h,t,r,l,p))})}},e.prototype.expandAnimation=function(t,i,n,r,o,a){var h,l=this;this.lastActiveItemId=r.id,"SlideDown"===t?(o.begin=function(){l.expandProgress("begin",i,n,r,a),n.style.position="absolute",h=r.offsetHeight,n.style.maxHeight=n.offsetHeight+"px",r.style.maxHeight=""},o.progress=function(){r.style.minHeight=h+n.offsetHeight+"px"},o.end=function(){ge(n,{position:"",maxHeight:""}),r.style.minHeight="",l.expandProgress("end",i,n,r,a)}):(o.begin=function(){l.expandProgress("begin",i,n,r,a)},o.end=function(){l.expandProgress("end",i,n,r,a)}),new Gi(o).animate(n)},e.prototype.expandProgress=function(t,i,n,r,o){this.remove(n,zP),this.add(r,nb),this.add(i,Fq),"end"===t&&(this.add(r,rb),n.setAttribute("aria-hidden","false"),re(n.previousElementSibling,{"aria-expanded":"true"}),i.classList.remove(GI),this.trigger("expanded",o))},e.prototype.expandedItemsPush=function(t){var i=this.getIndexByItem(t);if(-1===this.expandedIndices.indexOf(i)){var n=[].slice.call(this.expandedIndices);n.push(i),this.setProperties({expandedIndices:n},!0)}},e.prototype.getIndexByItem=function(t){var i=this.getItemElements();return[].slice.call(i).indexOf(t)},e.prototype.getItemElements=function(){var t=[];return[].slice.call(this.element.children).forEach(function(n){n.classList.contains(Ha)&&t.push(n)}),t},e.prototype.expandedItemsPop=function(t){var i=this.getIndexByItem(t),n=[].slice.call(this.expandedIndices);n.splice(n.indexOf(i),1),this.setProperties({expandedIndices:n},!0)},e.prototype.collapse=function(t){var i=this,n=this.getItems(),r=k(t,"."+Ha);if(!c(t)&&wn(t)&&!r.classList.contains(Fm)){var o={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},a=H("."+ib,r).firstElementChild,l={element:r,item:n[this.getIndexByItem(r)],index:this.getIndexByItem(r),content:r.querySelector("."+Al),isExpanded:!1};this.trigger("expanding",l,function(h){h.cancel||(i.expandedItemsPop(r),r.classList.remove(fh),a.classList.add(GI),"None"===o.name?(i.collapseProgress("begin",a,t,r,h),i.collapseProgress("end",a,t,r,h)):i.collapseAnimation(o.name,t,r,a,o,h))})}},e.prototype.collapseAnimation=function(t,i,n,r,o,a){var h,d,p,u,l=this;this.lastActiveItemId=n.id,"SlideUp"===t?(o.begin=function(){n.style.minHeight=(p=n.offsetHeight)+"px",i.style.position="absolute",h=n.offsetHeight,i.style.maxHeight=(d=i.offsetHeight)+"px",l.collapseProgress("begin",r,i,n,a)},o.progress=function(){(u=h-(d-i.offsetHeight))<p&&(n.style.minHeight=u+"px")},o.end=function(){i.style.display="none",l.collapseProgress("end",r,i,n,a),n.style.minHeight="",ge(i,{position:"",maxHeight:"",display:""})}):(o.begin=function(){l.collapseProgress("begin",r,i,n,a)},o.end=function(){l.collapseProgress("end",r,i,n,a)}),new Gi(o).animate(i)},e.prototype.collapseProgress=function(t,i,n,r,o){this.remove(i,Fq),this.remove(r,nb),"end"===t&&(this.add(n,zP),i.classList.remove(GI),this.remove(r,rb),n.setAttribute("aria-hidden","true"),re(n.previousElementSibling,{"aria-expanded":"false"}),this.trigger("expanded",o))},e.prototype.getModuleName=function(){return"accordion"},e.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},e.prototype.addItem=function(t,i){var n=this,r=this.element,o=this.getItemElements(),a=this.getItems();c(i)&&(i=a.length),r.childElementCount>=i&&(t instanceof Array?t:[t]).forEach(function(h,d){var p=i+d;a.splice(p,0,h);var u=n.renderInnerItem(h,p);r.childElementCount===p?r.appendChild(u):r.insertBefore(u,o[parseInt(p.toString(),10)]),C.add(u.querySelector("."+vs),"focus",n.focusIn,n),C.add(u.querySelector("."+vs),"blur",n.focusOut,n),n.expandedIndices=[],n.expandedItemRefresh(r),h&&h.expanded&&n.expandItem(!0,p)}),this.isReact&&this.renderReactTemplates()},e.prototype.expandedItemRefresh=function(t){var i=this,n=this.getItemElements();[].slice.call(n).forEach(function(r){r.classList.contains(nb)&&i.expandedItemsPush(r)})},e.prototype.removeItem=function(t){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],t);var n=this.getItemElements()[parseInt(t.toString(),10)],r=this.getItems();c(n)||(this.restoreContent(t),z(n),r.splice(t,1),this.expandedIndices=[],this.expandedItemRefresh(this.element))},e.prototype.select=function(t){var n=this.getItemElements()[parseInt(t.toString(),10)];c(n)||c(H("."+vs,n))||n.children[0].focus()},e.prototype.hideItem=function(t,i){var r=this.getItemElements()[parseInt(t.toString(),10)];c(r)||(c(i)&&(i=!0),i?this.add(r,eb):this.remove(r,eb))},e.prototype.enableItem=function(t,i){var r=this.getItemElements()[parseInt(t.toString(),10)];if(!c(r)){var o=r.firstElementChild;i?(this.remove(r,Fm),re(o,{tabindex:"0","aria-disabled":"false"}),o.focus()):(r.classList.contains(rb)&&(this.expandItem(!1,t),this.eleMoveFocus("movedown",this.element,o)),this.add(r,Fm),o.setAttribute("aria-disabled","true"),o.removeAttribute("tabindex"))}},e.prototype.expandItem=function(t,i){var n=this,r=this.getItemElements();if(c(i))if("Single"===this.expandMode&&t)this.itemExpand(t,o=r[r.length-1],this.getIndexByItem(o));else{var a=H("#"+this.lastActiveItemId,this.element);[].slice.call(r).forEach(function(h){n.itemExpand(t,h,n.getIndexByItem(h)),h.classList.remove(fh)});var l=H("."+fh,this.element);l&&l.classList.remove(fh),a&&a.classList.add(fh)}else{var o;if(c(o=r[parseInt(i.toString(),10)])||!o.classList.contains(HP)||o.classList.contains(rb)&&t)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(t,o,i)}},e.prototype.itemExpand=function(t,i,n){var r=i.children[1];i.classList.contains(Fm)||(c(r)&&t?(r=this.contentRendering(n),i.appendChild(r),this.ariaAttrUpdate(i),this.expand(r)):c(r)||(t?this.expand(r):this.collapse(r)),this.isReact&&this.renderReactTemplates())},e.prototype.destroyItems=function(){this.restoreContent(null),(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+Ha)).forEach(function(t){z(t)})},e.prototype.restoreContent=function(t){var i;i=c(t)?this.element:this.element.querySelectorAll("."+Ha)[parseInt(t.toString(),10)],this.templateEle.forEach(function(n){c(i.querySelector(n))||(document.body.appendChild(i.querySelector(n)).style.display="none")})},e.prototype.updateItem=function(t,i){if(!c(t)){var n=this.getItems(),r=n[parseInt(i.toString(),10)];n.splice(i,1),this.restoreContent(i);var o=H("."+tb,t),a=H("."+Ac,t);(this.isReact||this.isAngular)&&(this.clearAccordionTemplate(o,"header",tb),this.clearAccordionTemplate(a,"content",Ac)),z(t),this.addItem(r,i)}},e.prototype.setTemplate=function(t,i,n){i.innerHTML="",this.templateCompile(i,t,n),this.isReact&&this.renderReactTemplates()},e.prototype.templateCompile=function(t,i,n){var r=this.createElement("div");this.fetchElement(r,i,n,!1),0!==r.childNodes.length&&[].slice.call(r.childNodes).forEach(function(o){t.appendChild(o)})},e.prototype.clearAccordionTemplate=function(t,i,n){if(this.registeredTemplate&&this.registeredTemplate[""+i]){for(var r=this.registeredTemplate,o=0;o<r[""+i].length;o++)if(!c(l=k(r[""+i][parseInt(o.toString(),10)].rootNodes[0].containerInfo,"."+n))&&l===t){this.clearTemplate([i],[r[""+i][parseInt(o.toString(),10)]]);break}}else if(this.portals&&this.portals.length>0){var h=this.portals;for(o=0;o<h.length;o++){var l;if(!c(l=k(h[parseInt(o.toString(),10)].containerInfo,"."+n))&&l===t){this.clearTemplate([i],o);break}}}},e.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},e.prototype.onPropertyChanged=function(t,i){for(var n=this.element,r=!1,o=0,a=Object.keys(t);o<a.length;o++)switch(a[o]){case"items":if(t.items instanceof Array&&i.items instanceof Array)r=!0;else for(var h=Object.keys(t.items),d=0;d<h.length;d++)for(var p=parseInt(Object.keys(t.items)[parseInt(d.toString(),10)],10),u=Object.keys(t.items[parseInt(p.toString(),10)]),f=0;f<u.length;f++){var g=me("."+Ha,this.element)[parseInt(p.toString(),10)],m=Object(i.items[parseInt(p.toString(),10)])[""+u[parseInt(f.toString(),10)]],y=Object(t.items[parseInt(p.toString(),10)])[""+u[parseInt(f.toString(),10)]],b=u[parseInt(f.toString(),10)],w=H("."+Ac,g);if(("header"===b||"iconCss"===b||"expanded"===b||"content"===b&&""===m)&&this.updateItem(g,p),"cssClass"===u[parseInt(f.toString(),10)]&&!c(g)&&(m&&A([g],m.split(" ")),y&&M([g],y.split(" "))),"visible"===u[parseInt(f.toString(),10)]&&!c(g)&&(!1===Object(t.items[parseInt(p.toString(),10)])[""+u[parseInt(f.toString(),10)]]?g.classList.add(eb):g.classList.remove(eb)),"disabled"===u[parseInt(f.toString(),10)]&&!c(g)&&this.enableItem(p,!y),"content"===u[parseInt(f.toString(),10)]&&!c(g)&&2===g.children.length)if("function"==typeof y){(this.isAngular||this.isReact)&&this.clearAccordionTemplate(w,u[parseInt(f.toString(),10)],Ac);var S=g.querySelector("."+Ac);S.innerHTML="",this.setTemplate(y,S,p)}else g.classList.contains(nb)&&this.expandItem(!1,p),z(g.querySelector("."+Al))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),r=!0;break;case"headerTemplate":this.initializeHeaderTemplate(),r=!0;break;case"itemTemplate":this.initializeItemTemplate(),r=!0;break;case"enableRtl":t.enableRtl?this.add(n,BP):this.remove(n,BP);break;case"height":ge(this.element,{height:oe(t.height)});break;case"width":ge(this.element,{width:oe(t.width)});break;case"expandMode":"Single"===t.expandMode&&this.expandedIndices.length>1&&this.expandItem(!1)}r&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},on([Sn([],rye)],e.prototype,"items",void 0),on([v([])],e.prototype,"dataSource",void 0),on([v()],e.prototype,"itemTemplate",void 0),on([v()],e.prototype,"headerTemplate",void 0),on([v("100%")],e.prototype,"width",void 0),on([v("auto")],e.prototype,"height",void 0),on([v([])],e.prototype,"expandedIndices",void 0),on([v("Multiple")],e.prototype,"expandMode",void 0),on([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),on([Fe({},nye)],e.prototype,"animation",void 0),on([V()],e.prototype,"clicked",void 0),on([V()],e.prototype,"expanding",void 0),on([V()],e.prototype,"expanded",void 0),on([V()],e.prototype,"created",void 0),on([V()],e.prototype,"destroyed",void 0),on([et],e)}(Lt),oye=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),YI=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},dp=function(s){function e(t,i){return s.call(this,t,i)||this}return oye(e,s),e.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||yt("ej2-contextmenu"),s.prototype.preRender.call(this)},e.prototype.initialize=function(){s.prototype.initialize.call(this),re(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=ed(this.element).toString()},e.prototype.open=function(t,i,n){s.prototype.openMenu.call(this,null,null,t,i,null,n)},e.prototype.close=function(){s.prototype.closeMenu.call(this)},e.prototype.onPropertyChanged=function(t,i){s.prototype.onPropertyChanged.call(this,t,i);for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}},e.prototype.getModuleName=function(){return"contextmenu"},YI([v("")],e.prototype,"target",void 0),YI([v("")],e.prototype,"filter",void 0),YI([Sn([],HI)],e.prototype,"items",void 0),YI([et],e)}(Iq),aye=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),pp=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},gh="e-vertical",_P="e-hamburger",hye=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.tempItems=[],n}return aye(e,s),e.prototype.getModuleName=function(){return"menu"},e.prototype.preRender=function(){if(this.isMenu=!0,this.element.id=this.element.id||yt("ej2-menu"),this.template){try{"function"!=typeof this.template&&document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch{}this.updateMenuItems(this.items)}else this.updateMenuItems(this.items);s.prototype.preRender.call(this)},e.prototype.initialize=function(){s.prototype.initialize.call(this),re(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(gh),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(gh),this.element.setAttribute("aria-orientation","vertical")):E.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add(_P),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))},e.prototype.updateMenuItems=function(t){this.tempItems=t,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]},e.prototype.onPropertyChanged=function(t,i){for(var n=this,r=0,o=Object.keys(t);r<o.length;r++)switch(o[r]){case"orientation":"Vertical"===t.orientation?(this.element.classList.add(gh),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(gh),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(gh),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(gh),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(i.items).length||this.updateMenuItems(t.items);break;case"hamburgerMode":this.element.previousElementSibling||s.prototype.createHeaderContainer.call(this),t.hamburgerMode?(this.element.parentElement.classList.add(_P),[].slice.call(this.element.getElementsByClassName("e-blankicon")).forEach(function(l){l.style[n.enableRtl?"paddingRight":"paddingLeft"]=""})):(this.element.parentElement.classList.remove(_P),"Vertical"===this.orientation&&this.setBlankIconStyle(this.element)),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(gh),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(gh):this.element.previousElementSibling.classList.remove(gh),this.element.classList[t.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(t.title=this.enableHtmlSanitizer?$t.sanitize(t.title):t.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=t.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(i.target),this.wireEvents(),"Horizontal"===this.orientation&&(t.target?this.element.previousElementSibling.classList.add(gh):(this.element.previousElementSibling||s.prototype.createHeaderContainer.call(this),this.element.previousElementSibling.classList.remove(gh)),this.element.classList.add("e-hide-menu")))}s.prototype.onPropertyChanged.call(this,t,i)},e.prototype.createMenuItems=function(t){var i,n,r=this.items,o=this.getField("parentId");if(t[""+o]){for(i=this.getIndex(t[""+o].toString(),!0),n=0;n<i.length;n++)r[i[n]].items||(r[i[n]].items=[]),r=r[i[n]].items;r.push(t)}else this.items.push(t)},e.prototype.open=function(){s.prototype.openHamburgerMenu.call(this)},e.prototype.close=function(){s.prototype.closeHamburgerMenu.call(this)},pp([v("Horizontal")],e.prototype,"orientation",void 0),pp([v("")],e.prototype,"target",void 0),pp([v(null)],e.prototype,"template",void 0),pp([v(!1)],e.prototype,"enableScrolling",void 0),pp([v(!1)],e.prototype,"hamburgerMode",void 0),pp([v("Menu")],e.prototype,"title",void 0),pp([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),pp([Fe({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Cq)],e.prototype,"fields",void 0),pp([et],e)}(Iq),sb=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ft=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Lc="e-tab",js="e-tab-header",pi="e-content",QI="e-nested",ir="e-item",jP="e-template",qP="e-rtl",Li="e-active",Vc="e-disable",pn="e-hidden",WP="e-focused",UP="e-icons",GP="e-icon",Bq="e-icon-tab",YP="e-close-icon",XI="e-close-show",ob="e-tab-text",ZI="e-indicator",Ll="e-tab-wrap",KI="e-text-wrap",zq="e-tab-icon",ha="e-toolbar-items",Yt="e-toolbar-item",Hq="e-toolbar-pop",cp="e-toolbar-popup",JI="e-progress",QP="e-overlay",XP="e-vertical-tab",ZP="e-vertical",_q="e-vertical-left",jq="e-vertical-right",qq="e-horizontal-bottom",KP="e-fill-mode",Wq="tabitem_",JP="e-reorder-active-item",Uq=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return sb(e,s),Ft([v("SlideLeftIn")],e.prototype,"effect",void 0),Ft([v(600)],e.prototype,"duration",void 0),Ft([v("ease")],e.prototype,"easing",void 0),e}(ce),yye=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return sb(e,s),Ft([Fe({effect:"SlideLeftIn",duration:600,easing:"ease"},Uq)],e.prototype,"previous",void 0),Ft([Fe({effect:"SlideRightIn",duration:600,easing:"ease"},Uq)],e.prototype,"next",void 0),e}(ce),bye=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return sb(e,s),Ft([v("")],e.prototype,"text",void 0),Ft([v("")],e.prototype,"iconCss",void 0),Ft([v("left")],e.prototype,"iconPosition",void 0),e}(ce),wye=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return sb(e,s),Ft([Fe({},bye)],e.prototype,"header",void 0),Ft([v(null)],e.prototype,"headerTemplate",void 0),Ft([v("")],e.prototype,"content",void 0),Ft([v("")],e.prototype,"cssClass",void 0),Ft([v(!1)],e.prototype,"disabled",void 0),Ft([v(!0)],e.prototype,"visible",void 0),Ft([v()],e.prototype,"id",void 0),Ft([v(-1)],e.prototype,"tabIndex",void 0),e}(ce),$I=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.show={},n.hide={},n.maxHeight=0,n.title="Close",n.isInteracted=!1,n.lastIndex=0,n.isAdd=!1,n.isIconAlone=!1,n.draggableItems=[],n.resizeContext=n.refreshActiveTabBorder.bind(n),n.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},n}return sb(e,s),e.prototype.destroy=function(){if((this.isReact||this.isAngular)&&this.clearTemplate(),c(this.tbObj)||(this.tbObj.destroy(),this.tbObj=null),this.unWireEvents(),this.element.removeAttribute("aria-disabled"),this.expTemplateContent(),this.isTemplate){var t=H(".e-tab > ."+pi,this.element);this.element.classList.remove(jP),c(t)||(t.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)le(this.element.firstElementChild);if(this.btnCls&&(this.btnCls=null),this.hdrEle=null,this.cntEle=null,this.tbItems=null,this.tbItem=null,this.tbPop=null,this.prevItem=null,this.popEle=null,this.bdrLine=null,this.content=null,this.dragItem=null,this.cloneElement=null,this.draggingItems=[],this.draggableItems&&this.draggableItems.length>0){for(var i=0;i<this.draggableItems.length;i++)this.draggableItems[i].destroy(),this.draggableItems[i]=null;this.draggableItems=[]}s.prototype.destroy.call(this),this.trigger("destroyed")},e.prototype.refresh=function(){this.isReact&&this.clearTemplate(),s.prototype.refresh.call(this),this.isReact&&this.renderReactTemplates()},e.prototype.preRender=function(){var t=k(this.element,"."+pi);this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],this.allowDragAndDrop&&(this.dragArea=c(this.dragArea)?"#"+this.element.id+" ."+js:this.dragArea),c(t)||(t.parentElement.classList.add(QI),this.isNested=!0);var i=E.info.name,n="msie"===i?"e-ie":"edge"===i?"e-edge":"safari"===i?"e-safari":"";ge(this.element,{width:oe(this.width),height:oe(this.height)}),this.setCssClass(this.element,this.cssClass,!0),re(this.element,{"aria-disabled":"false"}),this.setCssClass(this.element,n,!0),this.updatePopAnimationConfig()},e.prototype.render=function(){this.btnCls=this.createElement("span",{className:UP+" "+YP,attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:t7(),this.renderContainer(),this.wireEvents(),this.initRender=!1},e.prototype.renderContainer=function(){var t=this.element;if(this.items.forEach(function(r,o){c(r.id)&&!c(r.setProperties)&&r.setProperties({id:Wq+o.toString()},!0)}),this.items.length>0&&0===t.children.length)t.appendChild(this.createElement("div",{className:pi})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:js})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,t.classList.add(jP);var i=t.querySelector("."+js);i&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,i)}if(!c(H("."+js,this.element))&&!c(H("."+pi,this.element))){if(this.renderHeader(),this.tbItems=H("."+js+" ."+ha,this.element),c(this.tbItems)||zi(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),me("."+Yt,this.element).length>0){this.tbItems=H("."+js+" ."+ha,this.element),this.bdrLine=this.createElement("div",{className:ZI+" "+pn+" e-ignore"});var n=H("."+this.scrCntClass,this.tbItems);c(n)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):n.insertBefore(this.bdrLine,n.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}this.setRTL(this.enableRtl)}},e.prototype.renderHeader=function(){var t=this,i=this.headerPlacement,n=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains(js)&&this.setProperties({headerPlacement:"Bottom"},!0);for(var r=this.hdrEle.children.length,o=[],a=0;a<r;a++)o.push(this.hdrEle.children.item(a));if(r>0){var l=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(l),o.forEach(function(d,p){t.lastIndex=p;var u={className:ir,id:ir+t.tabId+"_"+p},f=t.createElement("span",{className:ob,attrs:{role:"presentation"}}).outerHTML,g=t.createElement("div",{className:KI,innerHTML:f+t.btnCls.outerHTML}).outerHTML,m=t.createElement("div",{className:Ll,innerHTML:g,attrs:{role:"tab",tabIndex:"-1","aria-selected":"false","aria-controls":pi+t.tabId+"_"+p,"aria-disabled":"false"}});m.querySelector("."+ob).appendChild(d),l.appendChild(t.createElement("div",u)),me("."+ir,l)[p].appendChild(m)})}}else n=this.parseObject(this.items,0);this.tbObj=new tr({width:"Left"===i||"Right"===i?"auto":"100%",height:"Left"===i||"Right"===i?"100%":"auto",overflowMode:this.overflowMode,items:0!==n.length?n:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer,cssClass:this.cssClass}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),re(this.hdrEle,{role:"tablist"}),c(this.element.getAttribute("aria-label"))?c(this.element.getAttribute("aria-labelledby"))||(this.hdrEle.setAttribute("aria-labelledby",this.element.getAttribute("aria-labelledby")),this.element.removeAttribute("aria-labelledby")):(this.hdrEle.setAttribute("aria-label",this.element.getAttribute("aria-label")),this.element.removeAttribute("aria-label")),this.setCloseButton(this.showCloseButton);var h=this.tbObj.element.querySelector("."+ha);c(h)||(c(h.id)||""===h.id)&&(h.id=this.element.id+"_tab_header_items")},e.prototype.renderContent=function(){this.cntEle=H("."+pi,this.element);var t=me("."+Yt,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";for(var i=this.cntEle.children,n=0;n<t.length;n++)i.length-1>=n&&(M([i.item(n)],ir),re(i.item(n),{role:"tabpanel","aria-labelledby":ir+this.tabId+"_"+n}),i.item(n).id=pi+this.tabId+"_"+n)}},e.prototype.reRenderItems=function(){this.renderContainer(),c(this.cntEle)||(this.touchModule=new hr(this.cntEle,{swipe:this.swipeHandler.bind(this)}))},e.prototype.parseObject=function(t,i){var n=this,r=me(".e-tab-header ."+Yt,this.element),o=this.lastIndex;if(!this.isReplace&&r.length>0){var a=[];r.forEach(function(p){a.push(n.getIndexFromEle(p.id))}),o=Math.max.apply(Math,a)}var h,l=[],d=[];return t.forEach(function(p,u){var f=c(p.header)||c(p.header.iconPosition)?"":p.header.iconPosition,g=c(p.header)||c(p.header.iconCss)?"":p.header.iconCss;if(c(p.headerTemplate)&&(c(p.header)||c(p.header.text)||0===p.header.text.length&&""===g))d.push(u);else{var y,m=p.headerTemplate||p.header.text;"string"==typeof m&&n.enableHtmlSanitizer&&(m=$t.sanitize(m)),n.isReplace&&!c(n.tbId)&&""!==n.tbId?(y=parseInt(n.tbId.substring(n.tbId.lastIndexOf("_")+1),10),n.tbId=""):y=i+u,n.lastIndex=0===r.length?u:n.isReplace?y:o+1+u;var b=p.disabled?" "+Vc+" "+QP:"",w=!1===p.visible?" "+pn:"";h=n.createElement("div",{className:ob,attrs:{role:"presentation"}});var S=m instanceof Object?m.outerHTML:m,I=!c(S)&&""!==S;c(m.tagName)?n.headerTextCompile(h,m,u):h.appendChild(m);var T=n.createElement("span",{className:UP+" "+zq+" "+GP+"-"+f+" "+g}),L=n.createElement("div",{className:KI});L.appendChild(h),""!==m&&void 0!==m&&""!==g?("left"===f||"top"===f?L.insertBefore(T,L.firstElementChild):L.appendChild(T),n.isIconAlone=!1):(""===g?h:T)===T&&(z(h),L.appendChild(T),n.isIconAlone=!0);var N=c(p.tabIndex)?"-1":p.tabIndex.toString(),O=p.disabled?{}:{tabIndex:N,"data-tabindex":N,role:"tab","aria-selected":"false","aria-disabled":"false"};L.appendChild(n.btnCls.cloneNode(!0));var _=n.createElement("div",{className:Ll,attrs:O});_.appendChild(L),n.itemIndexArray===[]?n.itemIndexArray.push(ir+n.tabId+"_"+n.lastIndex):n.itemIndexArray.splice(i+u,0,ir+n.tabId+"_"+n.lastIndex);var q={htmlAttributes:{id:ir+n.tabId+"_"+n.lastIndex,"data-id":p.id},template:_};q.cssClass=(void 0!==p.cssClass?p.cssClass:" ")+" "+b+" "+w+" "+(""!==g?"e-i"+f:"")+" "+(I?"":GP),("top"===f||"bottom"===f)&&n.element.classList.add("e-vertical-icon"),l.push(q),u++}}),this.isAdd||d.forEach(function(p){n.items.splice(p,1)}),this.isIconAlone?this.element.classList.add(Bq):this.element.classList.remove(Bq),l},e.prototype.removeActiveClass=function(){var t=this.getTabHeader();if(t){var i=me("."+Yt+"."+Li,t);[].slice.call(i).forEach(function(n){return n.classList.remove(Li)}),[].slice.call(i).forEach(function(n){return n.firstElementChild.setAttribute("aria-selected","false")})}},e.prototype.checkPopupOverflow=function(t){this.tbPop=H("."+Hq,this.element);var i=H(".e-hor-nav",this.element),n=H("."+ha,this.element),r=n.lastChild,o=!1;return(!this.isVertical()&&(this.enableRtl&&i.offsetLeft+i.offsetWidth>n.offsetLeft||!this.enableRtl&&i.offsetLeft<n.offsetWidth)||this.isVertical()&&i.offsetTop<r.offsetTop+r.offsetHeight)&&(o=!0),o&&(t.classList.add(cp),this.tbPop.insertBefore(t,me("."+cp,this.tbPop)[0])),!0},e.prototype.popupHandler=function(t){var i=t.querySelector(".e-ripple-element");c(i)||(i.outerHTML="",t.querySelector("."+Ll).classList.remove("e-ripple")),this.tbItem=me("."+ha+" ."+Yt,this.hdrEle);var n=this.tbItem[this.tbItem.length-1];return 0!==this.tbItem.length&&(t.classList.remove(cp),t.removeAttribute("style"),this.tbItems.appendChild(t),this.actEleId=t.id,this.checkPopupOverflow(n)&&this.checkPopupOverflow(this.tbItems.lastChild.previousElementSibling),this.isPopup=!0),me("."+Yt,this.tbItems).length-1},e.prototype.setCloseButton=function(t){var i=H("."+js,this.element);!0===t?i.classList.add(XI):i.classList.remove(XI),this.tbObj.refreshOverflow(),this.refreshActiveTabBorder()},e.prototype.prevCtnAnimation=function(t,i){return this.enableRtl||this.element.classList.contains(qP),this.isPopup||t<=i?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null},e.prototype.triggerPrevAnimation=function(t,i){var n=this,r=this.prevCtnAnimation(i,this.selectedItem);c(r)?t.classList.remove(Li):(r.begin=function(){ge(t,{position:"absolute"}),t.classList.add(JI),t.classList.add("e-view")},r.end=function(){t.style.display="none",t.classList.remove(Li),t.classList.remove(JI),t.classList.remove("e-view"),ge(t,{display:"",position:""}),0===t.childNodes.length&&!n.isTemplate&&z(t)},new Gi(r).animate(t))},e.prototype.triggerAnimation=function(t,i){var o,n=this,r=this.prevIndex;[].slice.call(this.element.querySelector("."+pi).children).forEach(function(y){y.id===n.prevActiveEle&&(o=y)});var l=this.tbItem[r],h=this.getTrgContent(this.cntEle,this.extIndex(t));if(c(o)&&!c(l)){var d=this.extIndex(l.id);o=this.getTrgContent(this.cntEle,d)}c(h)||(this.prevActiveEle=h.id);var p=c(this.animation)||this.animation.next==={}||this.animation.previous==={}||c(this.animation.next.effect)||c(this.animation.previous.effect)||"None"==this.animation.previous.effect||"None"==this.animation.next.effect;if(this.initRender||!1===i||this.animation==={}||p)o&&o!==h&&o.classList.remove(Li);else{var f,u=H("."+pi,this.element);if(this.prevIndex>this.selectedItem&&!this.isPopup){var g=this.animation.previous.effect;f={name:"None"===g?"":"SlideLeftIn"!==g?g:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){var m=this.animation.next.effect;f={name:"None"===m?"":"SlideRightIn"!==m?m:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}f.progress=function(){u.classList.add(JI),n.setActiveBorder()},f.end=function(){u.classList.remove(JI),h.classList.add(Li)},!this.initRender&&!c(o)&&this.triggerPrevAnimation(o,r),this.isPopup=!1,""===f.name?h.classList.add(Li):new Gi(f).animate(h)}},e.prototype.keyPressed=function(t){var i=k(t,"."+js+" ."+Yt),n=this.getEleIndex(i);!c(this.popEle)&&t.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):t.classList.contains("e-scroll-nav")?t.click():!c(i)&&!1===i.classList.contains(Li)&&(this.selectTab(n,null,!0),c(this.popEle)||this.popObj.hide(this.hide))},e.prototype.getTabHeader=function(){if(!c(this.element)){var t=[].slice.call(this.element.children).filter(function(n){return n.classList.contains(js)});if(t.length>0)return t[0];var i=[].slice.call(this.element.children).filter(function(n){return!n.classList.contains("blazor-template")})[0];return i?[].slice.call(i.children).filter(function(n){return n.classList.contains(js)})[0]:void 0}},e.prototype.getEleIndex=function(t){return Array.prototype.indexOf.call(me("."+Yt,this.getTabHeader()),t)},e.prototype.extIndex=function(t){return t.replace(ir+this.tabId+"_","")},e.prototype.expTemplateContent=function(){var t=this;this.templateEle.forEach(function(i){c(t.element.querySelector(i))||(document.body.appendChild(t.element.querySelector(i)).style.display="none")})},e.prototype.templateCompile=function(t,i,n){var r=this.createElement("div");this.compileElement(r,i,"content",n),0!==r.childNodes.length&&t.appendChild(r),this.isReact&&this.renderReactTemplates()},e.prototype.compileElement=function(t,i,n,r){var o,a;"string"==typeof i?(i=i.trim(),this.isVue?o=qe($t.sanitize(i)):t.innerHTML=$t.sanitize(i)):o=qe(i),c(o)||(a=o({},this,n)),!c(o)&&a.length>0&&[].slice.call(a).forEach(function(l){t.appendChild(l)})},e.prototype.headerTextCompile=function(t,i,n){this.compileElement(t,i,"headerTemplate",n)},e.prototype.getContent=function(t,i,n,r){var o;if("string"==typeof(i=c(i)?"":i)||c(i.innerHTML))if("string"==typeof i&&this.enableHtmlSanitizer&&(i=$t.sanitize(i)),"."===i[0]||"#"===i[0])if(document.querySelectorAll(i).length){var a=document.querySelector(i);o=a.outerHTML.trim(),"clone"===n?t.appendChild(a.cloneNode(!0)):(t.appendChild(a),a.style.display="")}else this.templateCompile(t,i,r);else this.templateCompile(t,i,r);else t.appendChild(i);c(o)||-1===this.templateEle.indexOf(i.toString())&&this.templateEle.push(i.toString())},e.prototype.getTrgContent=function(t,i){return this.element.classList.contains(QI)?H("."+QI+"> ."+pi+" > #"+pi+this.tabId+"_"+i,this.element):this.findEle(t.children,pi+this.tabId+"_"+i)},e.prototype.findEle=function(t,i){for(var n,r=0;r<t.length;r++)if(t[r].id===i){n=t[r];break}return n},e.prototype.isVertical=function(){var t="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=t?"e-vscroll-content":"e-hscroll-content",t},e.prototype.addVerticalClass=function(){if(this.isVertical()){var t="Left"===this.headerPlacement?_q:jq;M([this.hdrEle],[ZP,t]),this.element.classList.contains(QI)?M([this.hdrEle],[XP,t]):M([this.element],[XP,t])}"Bottom"===this.headerPlacement&&M([this.hdrEle],[qq])},e.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},e.prototype.changeOrientation=function(t){this.setOrientation(t,this.hdrEle);var i=this.hdrEle.querySelector("."+Li),n=!!this.hdrEle.classList.contains(ZP);A([this.element],[XP]),A([this.hdrEle],[ZP,_q,jq]),n!==this.isVertical()&&(this.changeToolbarOrientation(),!c(i)&&i.classList.contains(cp)&&this.popupHandler(i)),this.addVerticalClass(),this.setActiveBorder(),this.focusItem()},e.prototype.focusItem=function(){var t=H(" #"+ir+this.tabId+"_"+this.selectedItem,this.hdrEle);c(t)||t.firstElementChild.focus()},e.prototype.changeToolbarOrientation=function(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()},e.prototype.setOrientation=function(t,i){var n=Array.prototype.indexOf.call(this.element.children,i),r=Array.prototype.indexOf.call(this.element.children,this.element.querySelector("."+pi));"Bottom"===t&&r>n?this.element.appendChild(i):(A([i],[qq]),this.element.insertBefore(i,H("."+pi,this.element)))},e.prototype.setCssClass=function(t,i,n){if(""!==i)for(var r=i.split(" "),o=0;o<r.length;o++)n?t.classList.add(r[o]):t.classList.remove(r[o])},e.prototype.setContentHeight=function(t){if(this.element.classList.contains(KP)&&A([this.element],[KP]),!c(this.cntEle)){var i=this.getTabHeader();if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||ge(this.cntEle,{height:this.element.clientHeight-i.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)M([this.element],[KP]),ge(this.element,{height:"100%"}),this.cntEle.style.height="calc(100% - "+this.hdrEle.offsetHeight+"px)";else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate)for(var n=me("."+pi+" > ."+ir,this.element),r=0;r<n.length;r++)n[r].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(n[r])),n[r].style.removeProperty("display"),n[r].style.removeProperty("visibility");else{this.cntEle=H("."+pi,this.element),!0===t&&this.cntEle.appendChild(this.createElement("div",{id:pi+this.tabId+"_0",className:ir+" "+Li,attrs:{role:"tabpanel","aria-labelledby":ir+this.tabId+"_0"}}));var o=this.cntEle.children.item(0);for(r=0;r<this.items.length;r++)for(this.getContent(o,this.items[r].content,"clone",r),this.maxHeight=Math.max(this.maxHeight,this.getHeight(o));o.firstChild;)o.removeChild(o.firstChild);this.isReact&&this.clearTemplate(["content"]),this.templateEle=[],this.getContent(o,this.items[0].content,"render",0),this.prevIndex!==this.selectedItem&&o.classList.remove(Li)}ge(this.cntEle,{height:this.maxHeight+"px"})}else ge(this.cntEle,{height:"auto"})}},e.prototype.getHeight=function(t){var i=window.getComputedStyle(t);return t.offsetHeight+parseFloat(i.getPropertyValue("padding-top"))+parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("margin-top"))+parseFloat(i.getPropertyValue("margin-bottom"))},e.prototype.setActiveBorder=function(){var t=this.getTabHeader(),i=H("."+Yt+"."+Li,t);if(!c(i)){this.reorderActiveTab?t&&t.classList.remove(JP):(i.classList.contains(cp)&&!this.bdrLine.classList.contains(pn)&&this.bdrLine.classList.add(pn),t&&!t.classList.contains(JP)&&t.classList.add(JP));var n=k(i,"."+Lc);if(this.element===n){this.tbItems=H("."+ha,t);var r=H("."+ZI,t),o=H("."+ha+" ."+this.scrCntClass,t);if(this.isVertical())ge(r,{left:"",right:""}),ge(r,0!==(c(o)?this.tbItems.offsetHeight:o.offsetHeight)?{top:i.offsetTop+"px",height:i.offsetHeight+"px"}:{top:0,height:0});else{ge(r,"MultiRow"===this.overflowMode?{top:("Bottom"===this.headerPlacement?i.offsetTop:i.offsetHeight+i.offsetTop)+"px",height:""}:{top:"",height:""});var h=c(o)?this.tbItems.offsetWidth:o.offsetWidth;ge(r,0!==h?{left:i.offsetLeft+"px",right:h-(i.offsetLeft+i.offsetWidth)+"px"}:{left:"auto",right:"auto"})}!c(this.bdrLine)&&!i.classList.contains(cp)&&this.bdrLine.classList.remove(pn)}}},e.prototype.setActive=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.tbItem=me("."+Yt,this.getTabHeader());var r=this.tbItem[t];if(!(t<0||isNaN(t)||0===this.tbItem.length)){if(t>=0&&!i&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:t},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),r.classList.contains(Li))return void this.setActiveBorder();this.isTemplate||re(r.firstElementChild,{"aria-controls":pi+this.tabId+"_"+t});var o=r.id;this.removeActiveClass(),r.classList.add(Li),r.firstElementChild.setAttribute("aria-selected","true");var a=Number(this.extIndex(o));if(c(this.prevActiveEle)&&(this.prevActiveEle=pi+this.tabId+"_"+a),this.isTemplate){if(H("."+pi,this.element).children.length>0){var l=this.findEle(H("."+pi,this.element).children,pi+this.tabId+"_"+a);c(l)||l.classList.add(Li),this.triggerAnimation(o,this.enableAnimation)}}else{this.cntEle=H(".e-tab > ."+pi,this.element);var h=this.getTrgContent(this.cntEle,this.extIndex(o));if(c(h)){this.cntEle.appendChild(this.createElement("div",{id:pi+this.tabId+"_"+this.extIndex(o),className:ir+" "+Li,attrs:{role:"tabpanel","aria-labelledby":ir+this.tabId+"_"+this.extIndex(o)}}));var d=this.getTrgContent(this.cntEle,this.extIndex(o)),p=Array.prototype.indexOf.call(this.itemIndexArray,o);this.getContent(d,this.items[p].content,"render",p)}else h.classList.add(Li);this.triggerAnimation(o,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(r),!this.initRender&&!i){r.firstElementChild.focus();var u={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:r,selectedIndex:t,selectedContent:H("#"+pi+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:n};this.trigger("selected",u)}}},e.prototype.setItems=function(t){this.isReplace=!0,this.tbItems=H("."+ha,this.getTabHeader()),this.tbObj.items=this.parseObject(t,0),this.tbObj.dataBind(),this.isReplace=!1},e.prototype.setRTL=function(t){this.tbObj.enableRtl=t,this.tbObj.dataBind(),this.setCssClass(this.element,qP,t),this.refreshActiveBorder()},e.prototype.refreshActiveBorder=function(){c(this.bdrLine)||this.bdrLine.classList.add(pn),this.setActiveBorder()},e.prototype.showPopup=function(t){var i=H(".e-popup.e-toolbar-pop",this.hdrEle);if(i.classList.contains("e-popup-close")){var n=i&&i.ej2_instances[0];n.position.X="Left"===this.headerPlacement?"left":"right",n.dataBind(),n.show(t)}},e.prototype.bindDraggable=function(){var t=this;if(this.allowDragAndDrop){var i=this.element.querySelector("."+js);i&&i.querySelectorAll("."+Yt).forEach(function(r){t.initializeDrag(r)})}},e.prototype.wireEvents=function(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),C.add(this.element,"mouseover",this.hoverHandler,this),C.add(this.element,"keydown",this.spaceKeyDown,this),c(this.cntEle)||(this.touchModule=new hr(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new St(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new St(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},e.prototype.unWireEvents=function(){c(this.keyModule)||this.keyModule.destroy(),c(this.tabKeyModule)||this.tabKeyModule.destroy(),!c(this.cntEle)&&!c(this.touchModule)&&(this.touchModule.destroy(),this.touchModule=null),window.removeEventListener("resize",this.resizeContext),C.remove(this.element,"mouseover",this.hoverHandler),C.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove(qP),this.element.classList.remove(WP)},e.prototype.clickHandler=function(t){this.element.classList.remove(WP);var i=t.originalEvent.target,n=k(i,"."+Yt),r=this.getEleIndex(n);i.classList.contains(YP)?this.removeTab(r):this.isVertical()&&k(i,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,!c(n)&&r!==this.selectedItem&&this.selectTab(r,t.originalEvent,!0))},e.prototype.swipeHandler=function(t){if(!(t.velocity<3&&c(t.originalEvent.changedTouches))){this.isNested&&this.element.setAttribute("data-swipe","true");var i=this.element.querySelector('[data-swipe="true"]');if(i)return void i.removeAttribute("data-swipe");if(this.isSwipeed=!0,"Right"===t.swipeDirection&&0!==this.selectedItem){for(var n=this.selectedItem-1;n>=0;n--)if(!this.tbItem[n].classList.contains(pn)){this.selectTab(n,null,!0);break}}else if("Left"===t.swipeDirection&&this.selectedItem!==me("."+Yt,this.element).length-1)for(var r=this.selectedItem+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains(pn)){this.selectTab(r,null,!0);break}this.isSwipeed=!1}},e.prototype.spaceKeyDown=function(t){(32===t.keyCode&&32===t.which||35===t.keyCode&&35===t.which)&&(c(k(t.target,"."+js))||t.preventDefault())},e.prototype.keyHandler=function(t){if(!this.element.classList.contains(Vc)){this.element.classList.add(WP);var i=t.target,n=this.getTabHeader(),r=H("."+Li,n);this.popEle=H("."+Hq,n),c(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]);var o=k(document.activeElement,"."+Yt),a=k(i,"."+Yt);switch(t.action){case"space":case"enter":if(i.parentElement.classList.contains(Vc))return;if("enter"===t.action&&i.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(i);break;case"tab":case"shiftTab":i.classList.contains(Ll)&&!1===k(i,"."+Yt).classList.contains(Li)&&i.setAttribute("tabindex",i.getAttribute("data-tabindex")),this.popObj&&wn(this.popObj.element)&&this.popObj.hide(this.hide),!c(r)&&"-1"===r.children.item(0).getAttribute("tabindex")&&r.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":c(o)||this.refreshItemVisibility(o);break;case"openPopup":t.preventDefault(),!c(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(!0===this.showCloseButton&&!c(a)){var l=a.nextSibling;!c(l)&&l.classList.contains(Yt)&&l.firstElementChild.focus(),this.removeTab(this.getEleIndex(a))}this.setActiveBorder()}}},e.prototype.refreshItemVisibility=function(t){var i=H("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!c(i)){var n=H(".e-hscroll-bar",this.tbItems);n.removeAttribute("tabindex");var r=n.scrollLeft,o=r+n.offsetWidth,a=t.offsetLeft,l=t.offsetWidth,h=t.offsetLeft+t.offsetWidth;r<a&&o<h?n.scrollLeft=r+(l-(o-a)):r>a&&o>h&&(n.scrollLeft=r-(l-(h-r)))}},e.prototype.getIndexFromEle=function(t){return parseInt(t.substring(t.lastIndexOf("_")+1),10)},e.prototype.hoverHandler=function(t){var i=t.target;!c(i.classList)&&i.classList.contains(YP)&&i.setAttribute("title",new mi("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))},e.prototype.evalOnPropertyChangeItems=function(t,i){if(t.items instanceof Array&&i.items instanceof Array)if(this.lastIndex=0,c(this.tbObj))this.reRenderItems();else{(this.isReact||this.isAngular)&&this.clearTemplate(),this.setItems(t.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];for(var x=H(".e-tab > ."+pi,this.element);x.firstElementChild;)z(x.firstElementChild);this.select(this.selectedItem),this.draggableItems=[],this.bindDraggable()}else for(var n=Object.keys(t.items),r=0;r<n.length;r++)for(var o=parseInt(Object.keys(t.items)[r],10),a=Object.keys(t.items[o]),l=0;l<a.length;l++){var u,h=Object(i.items[o])[a[l]],d=Object(t.items[o])[a[l]],p=this.element.querySelectorAll("."+Yt)[o];u=p&&!c(p.id)&&""!==p.id?this.getIndexFromEle(p.id):o;var f=H("."+ha+" #"+ir+this.tabId+"_"+u,this.element),g=H("."+pi+" #"+pi+this.tabId+"_"+u,this.element);if("header"===a[l]||"headerTemplate"===a[l]){var m=c(this.items[o].header)||c(this.items[o].header.iconCss)?"":this.items[o].header.iconCss,y=this.items[o].headerTemplate||this.items[o].header.text;if("headerTemplate"===a[l]&&this.clearTabTemplate(f,a[l],Yt),""===y&&""===m)this.removeTab(o);else{this.tbId=p.id;var b=[];b.push(this.items[o]),this.items.splice(o,1),this.itemIndexArray.splice(o,1),this.tbObj.items.splice(o,1);var w=f.classList.contains(pn);z(f),this.isReplace=!0,this.addTab(b,o),w&&this.hideTab(o),this.isReplace=!1}}if("content"===a[l]&&!c(g))if("string"!=typeof d&&!c(d.innerHTML)||"."!==d[0]&&"#"!==d[0]||!d.length)""===d&&"#"===h[0]?(document.body.appendChild(this.element.querySelector(h)).style.display="none",g.innerHTML=d):this.isAngular||this.isReact?(this.clearTabTemplate(g,a[l],ir),g.innerHTML="",this.templateCompile(g,d,o)):"function"!=typeof d&&(g.innerHTML=d);else{var I=document.querySelector(d);g.appendChild(I),I.style.display=""}"cssClass"===a[l]&&(c(f)||(f.classList.remove(h),f.classList.add(d)),c(g)||(g.classList.remove(h),g.classList.add(d))),"disabled"===a[l]&&this.enableTab(o,!0!==d),"visible"===a[l]&&this.hideTab(o,!0!==d)}},e.prototype.clearTabTemplate=function(t,i,n){if(this.registeredTemplate&&this.registeredTemplate[i]){for(var r=this.registeredTemplate,o=0;o<r[i].length;o++)if(!c(l=k(r[i][o].rootNodes[0],"."+n))&&l===t){this.clearTemplate([i],[r[i][o]]);break}}else if(this.portals&&this.portals.length>0){var h=this.portals;for(o=0;o<h.length;o++){var l;if(!c(l=k(h[o].containerInfo,"."+n))&&l===t){this.clearTemplate([i],o);break}}}},e.prototype.initializeDrag=function(t){var i=this,n=new Sl(t,{dragArea:this.dragArea,dragTarget:"."+Yt,clone:!0,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:function(r){var a,l,o=i.getEleIndex(i.dragItem),h={draggedItem:i.dragItem,event:r.event,target:r.target,droppedItem:r.target.closest("."+Yt),clonedElement:i.cloneElement,index:o};if(c(r.target.closest("."+Lc))||r.target.closest("."+Lc).isEqualNode(i.element)||i.dragArea==="."+js){if(r.target.closest(i.dragArea)||"Popup"===i.overflowMode?(document.body.style.cursor="",i.dragItem.querySelector("."+Ll).style.visibility="hidden",i.cloneElement.classList.contains(pn)&&A([i.cloneElement],pn)):(document.body.style.cursor="not-allowed",M([i.cloneElement],pn),i.dragItem.classList.contains(pn)&&A([i.dragItem],pn),i.dragItem.querySelector("."+Ll).style.visibility="visible"),"Scrollable"===i.overflowMode&&!c(i.element.querySelector(".e-hscroll"))){var d=i.element.querySelector(".e-scroll-right-nav"),p=i.element.querySelector(".e-scroll-left-nav"),u=i.element.querySelector(".e-hscroll-bar");!c(d)&&Math.abs(d.offsetWidth/2+d.offsetLeft)>i.cloneElement.offsetLeft+i.cloneElement.offsetWidth&&(u.scrollLeft-=10),!c(p)&&Math.abs(p.offsetLeft+p.offsetWidth-i.cloneElement.offsetLeft)>p.offsetWidth/2&&(u.scrollLeft+=10)}i.cloneElement.style.pointerEvents="none",l=k(r.target,"."+Yt+".e-draggable");var f=0;"Scrollable"===i.overflowMode&&!c(i.element.querySelector(".e-hscroll"))&&(f=i.element.querySelector(".e-hscroll-content").offsetWidth),null!=l&&!l.isSameNode(i.dragItem)&&l.closest("."+Lc).isSameNode(i.dragItem.closest("."+Lc))&&((a=i.getEleIndex(l))<o&&Math.abs(l.offsetLeft+l.offsetWidth-i.cloneElement.offsetLeft)>l.offsetWidth/2&&i.dragAction(l,o,a),a>o&&Math.abs(l.offsetWidth/2)+l.offsetLeft-f<i.cloneElement.offsetLeft+i.cloneElement.offsetWidth&&i.dragAction(l,o,a)),i.droppedIndex=i.getEleIndex(i.dragItem),i.trigger("dragging",h)}else i.trigger("dragging",h)},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(n)},e.prototype.helper=function(t){return this.cloneElement=this.createElement("div"),t.element&&(this.cloneElement=t.element.cloneNode(!0),M([this.cloneElement],"e-tab-clone-element"),this.element.querySelector("."+js).classList.contains(XI)&&M([this.cloneElement],XI),A([this.cloneElement.querySelector("."+Ll)],"e-ripple"),c(this.cloneElement.querySelector(".e-ripple-element"))||le(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement},e.prototype.itemDragStart=function(t){var i=this;this.draggingItems=this.items.map(function(r){return r}),this.dragItem=t.element;var n={draggedItem:t.element,event:t.event,target:t.target,droppedItem:null,index:this.getEleIndex(this.dragItem),clonedElement:this.cloneElement,cancel:!1};this.trigger("onDragStart",n,function(r){if(r.cancel){var o=t.element.ej2_instances[0];c(o)||o.intDestroy(t.event),z(i.cloneElement)}else i.removeActiveClass(),M([i.tbItems.querySelector("."+ZI)],pn),i.dragItem.querySelector("."+Ll).style.visibility="hidden"})},e.prototype.dragAction=function(t,i,n){if(this.items.length>0){var r=this.draggingItems[i];this.draggingItems.splice(i,1),this.draggingItems.splice(n,0,r)}if("MultiRow"===this.overflowMode&&t.parentNode.insertBefore(this.dragItem,t.nextElementSibling),i>n)if(this.dragItem.parentElement.isSameNode(t.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,t);else if("Extended"===this.overflowMode)if(t.isSameNode(t.parentElement.lastChild)){var o=this.dragItem.parentNode;t.parentNode.insertBefore(this.dragItem,t),o.insertBefore(t.parentElement.lastChild,o.childNodes[0])}else this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t);else{var a=t.parentElement.lastChild;t.isSameNode(a)?(o=this.dragItem.parentNode,t.parentNode.insertBefore(this.dragItem,t),o.insertBefore(a,o.childNodes[0])):(this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t))}i<n&&(this.dragItem.parentElement.isSameNode(t.parentElement)?this.dragItem.parentNode.insertBefore(this.dragItem,t.nextElementSibling):"Extended"===this.overflowMode?(this.dragItem.parentElement.appendChild(t.parentElement.firstElementChild),t.parentNode.insertBefore(this.dragItem,t.nextSibling)):(this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t)))},e.prototype.itemDragStop=function(t){var i=this;z(this.cloneElement),this.cloneElement=null,this.dragItem.querySelector("."+Ll).style.visibility="visible",document.body.style.cursor="",this.trigger("dragged",{draggedItem:this.dragItem,event:t.event,target:t.target,droppedItem:this.tbItem[this.droppedIndex],clonedElement:null,index:this.droppedIndex,cancel:!1},function(r){r.cancel?i.refresh():i.items.length>0&&i.draggingItems.length>0?(i.items=i.draggingItems,i.selectedItem=i.droppedIndex,i.refresh()):(i.dragItem.querySelector("."+Ll).style.visibility="",A([i.tbItems.querySelector("."+ZI)],pn),i.selectTab(i.droppedIndex,null,!0))}),this.dragItem=null},e.prototype.enableTab=function(t,i){var n=me("."+Yt,this.element)[t];c(n)||(!0===i?(n.classList.remove(Vc,QP),n.firstElementChild.setAttribute("tabindex",n.firstElementChild.getAttribute("data-tabindex"))):(n.classList.add(Vc,QP),n.firstElementChild.removeAttribute("tabindex"),n.classList.contains(Li)&&this.select(t+1)),c(this.items[t])||(this.items[t].disabled=!i,this.dataBind()),n.firstElementChild.setAttribute("aria-disabled",!0===i?"false":"true"))},e.prototype.addTab=function(t,i){var n=this,r={addedItems:t,cancel:!1};this.isReplace?this.addingTabContent(t,i):this.trigger("adding",r,function(o){o.cancel||n.addingTabContent(t,i)}),this.isReact&&this.renderReactTemplates()},e.prototype.addingTabContent=function(t,i){var n=this,r=0;if(this.hdrEle=H("."+js,this.element),c(this.hdrEle))this.items=t,this.reRenderItems(),this.bindDraggable();else{var o=me(".e-tab-header ."+Yt,this.element).length;if(0!==o&&(r=this.lastIndex+1),c(i)&&(i=o-1),o<i||i<0||isNaN(i))return;0===o&&!c(this.hdrEle)&&(this.hdrEle.style.display=""),c(this.bdrLine)||this.bdrLine.classList.add(pn),this.tbItems=H("."+ha,this.getTabHeader()),this.isAdd=!0;var a=this.parseObject(t,i);this.isAdd=!1;var h,l=0;t.forEach(function(d,p){if(h=d.headerTemplate||d.header.text,c(d.headerTemplate||d.header)||c(h)||0===h.length&&!c(d.header)&&c(d.header.iconCss)||(a[p]&&(c(d.id)&&(d.id=ir+n.tabId+"_"+Wq+(r+p).toString()),a[p].htmlAttributes["data-id"]=d.id),n.items.splice(i+l,0,d),l++),n.isTemplate&&!c(d.header)&&!c(d.header.text)){var u=r+p,f=n.createElement("div",{id:pi+n.tabId+"_"+u,className:ir,attrs:{role:"tabpanel","aria-labelledby":ir+"_"+u}});n.cntEle.insertBefore(f,n.cntEle.children[i+p]);var g=n.getTrgContent(n.cntEle,u.toString());n.getContent(g,d.content,"render",i)}}),this.tbObj.addItems(a,i),this.isReplace||this.trigger("added",{addedItems:t}),this.selectedItem===i?this.select(i):(this.setActiveBorder(),this.tbItem=me("."+Yt,this.getTabHeader())),this.bindDraggable()}},e.prototype.removeTab=function(t){var i=this,n=me("."+Yt,this.element)[t];c(n)||this.trigger("removing",{removedItem:n,removedIndex:t,cancel:!1},function(o){if(!o.cancel){var a=H("#"+ir+i.tabId+"_"+i.extIndex(n.id),H("."+ha,i.element));c(a)||i.clearTabTemplate(a,"headerTemplate",Yt),i.tbObj.removeItems(t),i.allowDragAndDrop&&t!==Array.prototype.indexOf.call(i.itemIndexArray,n.id)&&(t=Array.prototype.indexOf.call(i.itemIndexArray,n.id));var l=i.itemIndexArray.indexOf(n.id);i.items.splice(l,1),i.itemIndexArray.splice(l,1),i.refreshActiveBorder();var h=H("#"+pi+i.tabId+"_"+i.extIndex(n.id),H("."+pi,i.element));c(h)||(i.clearTabTemplate(h,"content",ir),z(h)),i.trigger("removed",o),i.draggableItems&&i.draggableItems.length>0&&(i.draggableItems[t].destroy(),i.draggableItems[t]=null,i.draggableItems.splice(t,1)),n.classList.contains(Li)?(t=t>me("."+Yt+":not(."+cp+")",i.element).length-1?t-1:t,i.enableAnimation=!1,i.selectedItem=t,i.select(t)):t!==i.selectedItem&&(t<i.selectedItem&&(t=i.itemIndexArray.indexOf(i.tbItem[i.selectedItem].id),i.setProperties({selectedItem:t>-1?t:i.selectedItem},!0),i.prevIndex=i.selectedItem),i.tbItem=me("."+Yt,i.getTabHeader())),0===me("."+Yt,i.element).length&&(i.hdrEle.style.display="none"),i.enableAnimation=!0}})},e.prototype.hideTab=function(t,i){var n,r=me("."+Yt,this.element)[t];if(!c(r)){if(c(i)&&(i=!0),this.bdrLine.classList.add(pn),!0===i)if(r.classList.add(pn),0!==(n=me("."+Yt+":not(."+pn+")",this.tbItems)).length&&r.classList.contains(Li)){if(0!==t)for(var o=t-1;o>=0;o--){if(!this.tbItem[o].classList.contains(pn)){this.select(o);break}if(0===o)for(var a=t+1;a<this.tbItem.length;a++)if(!this.tbItem[a].classList.contains(pn)){this.select(a);break}}else for(a=t+1;a<this.tbItem.length;a++)if(!this.tbItem[a].classList.contains(pn)){this.select(a);break}}else 0===n.length&&this.element.classList.add(pn);else this.element.classList.remove(pn),n=me("."+Yt+":not(."+pn+")",this.tbItems),r.classList.remove(pn),0===n.length&&this.select(t);this.setActiveBorder(),r.setAttribute("aria-hidden",""+i),"Popup"===this.overflowMode&&this.tbObj&&this.tbObj.refreshOverflow()}},e.prototype.selectTab=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this.isInteracted=n,this.select(t,i)},e.prototype.select=function(t,i){var n=this,r=this.getTabHeader();this.tbItems=H("."+ha,r),this.tbItem=me("."+Yt,r),this.content=H("."+pi,this.element),this.prevItem=this.tbItem[this.prevIndex],c(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);var o=this.tbItem[t];c(o)?this.selectedID="0":this.selectingID=this.extIndex(o.id),!c(this.prevItem)&&!this.prevItem.classList.contains(Vc)&&this.prevItem.children.item(0).setAttribute("tabindex",this.prevItem.firstElementChild.getAttribute("tabindex"));var a={event:i,previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:c(this.content)?null:H("#"+pi+this.tabId+"_"+this.selectedID,this.content),selectingItem:o,selectingIndex:t,selectingContent:c(this.content)?null:H("#"+pi+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:this.isInteracted,cancel:!1};this.initRender?this.selectingContent(t,this.isInteracted):this.trigger("selecting",a,function(l){l.cancel||n.selectingContent(t,n.isInteracted)}),this.isInteracted=!1},e.prototype.selectingContent=function(t,i){if("number"==typeof t){if(!c(this.tbItem[t])&&(this.tbItem[t].classList.contains(Vc)||this.tbItem[t].classList.contains(pn)))for(var n=t+1;n<this.items.length;n++){if(!1===this.items[n].disabled&&!0===this.items[n].visible){t=n;break}t=0}if(this.tbItem.length>t&&t>=0&&!isNaN(t))if(this.prevIndex=this.selectedItem,this.prevItem=this.tbItem[this.prevIndex],this.tbItem[t].classList.contains(cp)&&this.reorderActiveTab){if(this.setActive(this.popupHandler(this.tbItem[t]),null,i),!c(this.items)&&this.items.length>0&&this.allowDragAndDrop){this.tbItem=me("."+ha+" ."+Yt,this.hdrEle);var r=this.items[t];this.items.splice(t,1),this.items.splice(this.tbItem.length-1,0,r);var o=this.itemIndexArray[t];this.itemIndexArray.splice(t,1),this.itemIndexArray.splice(this.tbItem.length-1,0,o)}}else this.setActive(t,null,i);else this.setActive(0,null,i)}else t instanceof HTMLElement&&this.setActive(this.getEleIndex(t),null,i)},e.prototype.getItemIndex=function(t){for(var i,n=0;n<this.tbItem.length;n++)if(t===this.tbItem[n].getAttribute("data-id")){i=n;break}return i},e.prototype.disable=function(t){this.setCssClass(this.element,Vc,t),this.element.setAttribute("aria-disabled",""+t)},e.prototype.getPersistData=function(){return this.addOnPersist(["selectedItem","actEleId"])},e.prototype.getModuleName=function(){return"tab"},e.prototype.onPropertyChanged=function(t,i){for(var n=this,r=0,o=Object.keys(t);r<o.length;r++)switch(o[r]){case"width":ge(this.element,{width:oe(t.width)});break;case"height":ge(this.element,{height:oe(t.height)}),this.setContentHeight(!1);break;case"cssClass":var l=this.element.querySelector("."+js);""===i.cssClass||c(i.cssClass)?(this.setCssClass(this.element,t.cssClass,!0),c(l)||this.setCssClass(l,t.cssClass,!0)):(this.setCssClass(this.element,i.cssClass,!1),this.setCssClass(this.element,t.cssClass,!0),c(l)||(this.setCssClass(l,i.cssClass,!1),this.setCssClass(l,t.cssClass,!0)));break;case"items":this.evalOnPropertyChangeItems(t,i);break;case"showCloseButton":this.setCloseButton(t.showCloseButton);break;case"reorderActiveTab":this.refreshActiveTabBorder();break;case"selectedItem":this.selectedItem=i.selectedItem,this.select(t.selectedItem);break;case"headerPlacement":this.changeOrientation(t.headerPlacement);break;case"enableRtl":this.setRTL(t.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=t.overflowMode,this.tbObj.dataBind(),this.refreshActiveTabBorder();break;case"heightAdjustMode":this.setContentHeight(!1),this.select(this.selectedItem);break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep);break;case"allowDragAndDrop":this.bindDraggable();break;case"dragArea":this.allowDragAndDrop&&(this.draggableItems.forEach(function(h){h.dragArea=n.dragArea}),this.refresh())}},e.prototype.refreshActiveTab=function(){if(this.isReact&&this.isTemplate&&this.clearTemplate(),this.isTemplate){var b=this.element.querySelector("."+ha),w=this.element.querySelector("."+Yt+"."+Li),S=this.getIndexFromEle(w.id),I=w.innerText,x=this.element.querySelector("."+pi).querySelector("."+Li).children[0],T=x.innerHTML;z(w),z(x);var L={className:Yt+" "+jP+" "+Li,id:ir+this.tabId+"_"+S},N=this.createElement("span",{className:ob,innerHTML:I,attrs:{role:"presentation"}}).outerHTML,O=this.createElement("div",{className:KI,innerHTML:N+this.btnCls.outerHTML}).outerHTML,d=w.firstElementChild.getAttribute("data-tabindex"),_=this.createElement("div",{className:Ll,innerHTML:O,attrs:{tabIndex:d,"data-tabindex":d,role:"tab","aria-controls":pi+this.tabId+"_"+S,"aria-selected":"true","aria-disabled":"false"}});b.insertBefore(this.createElement("div",L),b.children[S+1]),this.element.querySelector("."+Yt+"."+Li).appendChild(_);var f=this.createElement("div",{innerHTML:T});this.element.querySelector("."+pi).querySelector("."+Li).appendChild(f)}else if(this.element.querySelector("."+Yt+"."+Li)){z(this.element.querySelector("."+Yt+"."+Li).children[0]),z(this.element.querySelector("."+pi).querySelector("."+Li).children[0]);var t=this.items[this.selectedItem],i=c(t.header)||c(t.header.iconPosition)?"":t.header.iconPosition,n=c(t.header)||c(t.header.iconCss)?"":t.header.iconCss,r=t.headerTemplate||t.header.text,o=this.createElement("div",{className:ob,attrs:{role:"presentation"}});c(r.tagName)?this.headerTextCompile(o,r,this.selectedItem):o.appendChild(r);var l=this.createElement("span",{className:UP+" "+zq+" "+GP+"-"+i+" "+n}),h=this.createElement("div",{className:KI});h.appendChild(o),""!==r&&void 0!==r&&""!==n?("left"===i||"top"===i?h.insertBefore(l,h.firstElementChild):h.appendChild(l),this.isIconAlone=!1):(""===n?o:l)===l&&(z(o),h.appendChild(l),this.isIconAlone=!0),d=c(t.tabIndex)?"-1":t.tabIndex.toString();var p=t.disabled?{}:{tabIndex:d,"data-tabindex":d,role:"tab","aria-selected":"true","aria-disabled":"false"};h.appendChild(this.btnCls.cloneNode(!0));var u=this.createElement("div",{className:Ll,attrs:p});u.appendChild(h),("top"===i||"bottom"===i)&&this.element.classList.add("e-vertical-icon"),this.element.querySelector("."+Yt+"."+Li).appendChild(u),f=this.createElement("div");var g=t.content,m=void 0;if("string"==typeof g||c(g.innerHTML))if("string"==typeof g&&this.enableHtmlSanitizer&&(g=$t.sanitize(g)),"."===g[0]||"#"===g[0])if(document.querySelectorAll(g).length){var y=document.querySelector(g);m=y.outerHTML.trim(),f.appendChild(y),y.style.display=""}else this.compileElement(f,g,"content",this.selectedItem);else this.compileElement(f,g,"content",this.selectedItem);else f.appendChild(g);c(m)||-1===this.templateEle.indexOf(g.toString())&&this.templateEle.push(g.toString()),this.element.querySelector(".e-item."+Li).appendChild(f)}this.isReact&&this.renderReactTemplates()},e.prototype.refreshActiveTabBorder=function(){var t=H("."+Yt+"."+cp+"."+Li,this.element);!c(t)&&this.reorderActiveTab&&this.select(this.getEleIndex(t)),this.refreshActiveBorder()},Ft([Sn([],wye)],e.prototype,"items",void 0),Ft([v("100%")],e.prototype,"width",void 0),Ft([v("auto")],e.prototype,"height",void 0),Ft([v("")],e.prototype,"cssClass",void 0),Ft([v(0)],e.prototype,"selectedItem",void 0),Ft([v("Top")],e.prototype,"headerPlacement",void 0),Ft([v("Content")],e.prototype,"heightAdjustMode",void 0),Ft([v("Scrollable")],e.prototype,"overflowMode",void 0),Ft([v("Dynamic")],e.prototype,"loadOn",void 0),Ft([v(!1)],e.prototype,"enablePersistence",void 0),Ft([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),Ft([v(!1)],e.prototype,"showCloseButton",void 0),Ft([v(!0)],e.prototype,"reorderActiveTab",void 0),Ft([v()],e.prototype,"scrollStep",void 0),Ft([v()],e.prototype,"dragArea",void 0),Ft([v(!1)],e.prototype,"allowDragAndDrop",void 0),Ft([Fe({},yye)],e.prototype,"animation",void 0),Ft([V()],e.prototype,"created",void 0),Ft([V()],e.prototype,"adding",void 0),Ft([V()],e.prototype,"added",void 0),Ft([V()],e.prototype,"selecting",void 0),Ft([V()],e.prototype,"selected",void 0),Ft([V()],e.prototype,"removing",void 0),Ft([V()],e.prototype,"removed",void 0),Ft([V()],e.prototype,"onDragStart",void 0),Ft([V()],e.prototype,"dragging",void 0),Ft([V()],e.prototype,"dragged",void 0),Ft([V()],e.prototype,"destroyed",void 0),Ft([et],e)}(Lt),ex=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),it=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Vl="e-treeview",Gq="e-control",$r="e-icon-collapsible",Vi="e-icon-expandable",mt="e-list-item",uf="e-list-text",si="e-list-parent",tx="e-hover",da="e-active",$P="e-icons-spinner",up="e-process",qn="e-icons",es="e-text-content",ix="e-input",Yq="e-input-group",nx="e-tree-input",eN="e-editing",Xq="e-interaction",Zq="e-droppable",tN="e-dragging",ab="e-sibling",rx="e-drop-in",lb="e-drop-next",iN="e-drop-out",nN="e-no-drop",fp="e-fullrow",Rm="e-selected",sx="e-expanded",Kq="e-node-collapsed",Jq="e-disable",qs="e-check",Pl="e-stop",_a="e-checkbox-wrapper",gp="e-frame",$q="e-ripple",ff="e-node-focus",eW="e-list-img",ox="e-animation-active",tW="e-disabled",Om="e-prevent",iW={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},Lye=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return ex(e,s),it([v("child")],e.prototype,"child",void 0),it([v([])],e.prototype,"dataSource",void 0),it([v("expanded")],e.prototype,"expanded",void 0),it([v("hasChildren")],e.prototype,"hasChildren",void 0),it([v("htmlAttributes")],e.prototype,"htmlAttributes",void 0),it([v("iconCss")],e.prototype,"iconCss",void 0),it([v("id")],e.prototype,"id",void 0),it([v("imageUrl")],e.prototype,"imageUrl",void 0),it([v("isChecked")],e.prototype,"isChecked",void 0),it([v("parentID")],e.prototype,"parentID",void 0),it([v(null)],e.prototype,"query",void 0),it([v("selectable")],e.prototype,"selectable",void 0),it([v("selected")],e.prototype,"selected",void 0),it([v(null)],e.prototype,"tableName",void 0),it([v("text")],e.prototype,"text",void 0),it([v("tooltip")],e.prototype,"tooltip",void 0),it([v("navigateUrl")],e.prototype,"navigateUrl",void 0),e}(ce),nW=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return ex(e,s),it([v("SlideDown")],e.prototype,"effect",void 0),it([v(400)],e.prototype,"duration",void 0),it([v("linear")],e.prototype,"easing",void 0),e}(ce),Vye=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return ex(e,s),it([Fe({effect:"SlideUp",duration:400,easing:"linear"},nW)],e.prototype,"collapse",void 0),it([Fe({effect:"SlideDown",duration:400,easing:"linear"},nW)],e.prototype,"expand",void 0),e}(ce),rN=function(s){function e(i,n){var r=s.call(this,i,n)||this;return r.isRefreshed=!1,r.preventExpand=!1,r.checkedElement=[],r.disableNode=[],r.validArr=[],r.validNodes=[],r.expandChildren=[],r.isFieldChange=!1,r.changeDataSource=!1,r.hasTemplate=!1,r.isFirstRender=!1,r.isNodeDropped=!1,r.isInteracted=!1,r.isRightClick=!1,r.mouseDownStatus=!1,r}var t;return ex(e,s),t=e,e.prototype.getModuleName=function(){return"treeview"},e.prototype.preRender=function(){var i=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:Vi,ariaAttributes:iW,expandIconPosition:"Left",itemCreated:function(n){i.beforeNodeCreate(n)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new Gi({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),c(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),c(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),c(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},e.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},e.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},e.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},e.prototype.setDisabledMode=function(){this.disabled?this.element.classList.add(tW):this.element.classList.remove(tW)},e.prototype.setEnableRtl=function(){(this.enableRtl?M:A)([this.element],"e-rtl")},e.prototype.setRipple=function(){this.rippleFn=zi(this.element,{selector:"."+fp+",."+es,ignore:"."+es+" > ."+qn+",."+Yq+",."+ix+", ."+_a}),this.rippleIconFn=zi(this.element,{selector:"."+es+" > ."+qn,isCenterRipple:!0})},e.prototype.setFullRow=function(i){(i?M:A)([this.element],"e-fullrow-wrap")},e.prototype.setMultiSelect=function(i){var n=H("."+si,this.element);i?n.setAttribute("aria-multiselectable","true"):n.removeAttribute("aria-multiselectable")},e.prototype.templateComplier=function(i){if(i){this.hasTemplate=!0,this.element.classList.add(Xq);try{return"function"!=typeof i&&document.querySelectorAll(i).length?qe(document.querySelector(i).innerHTML.trim()):qe(i)}catch{return qe(i)}}this.element.classList.remove(Xq)},e.prototype.setDataBinding=function(i){var n=this;this.treeList.push("false"),this.fields.dataSource instanceof he?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(r){n.isOffline=n.fields.dataSource.dataSource.offline,n.fields.dataSource instanceof he&&n.isOffline&&(n.treeList.pop(),n.treeData=r.result,n.isNumberTypeId=n.getType(),n.setRootData(),n.renderItems(!0),0===n.treeList.length&&!n.isLoaded&&n.finalize())}).catch(function(r){n.trigger("actionFailure",{error:r})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(r){n.treeList.pop(),n.treeData=r.result,n.isNumberTypeId=n.getType(),n.setRootData(),i&&(n.changeDataSource=!0),n.renderItems(!0),n.changeDataSource=!1,0===n.treeList.length&&!n.isLoaded&&n.finalize()}).catch(function(r){n.trigger("actionFailure",{error:r})})):(this.treeList.pop(),c(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0===this.treeList.length&&!this.isLoaded&&this.finalize()},e.prototype.getQuery=function(i,n){void 0===n&&(n=null);var o,r=[];if(i.query)o=i.query.clone();else{o=new Me;for(var a=this.getActualProperties(i),l=0,h=Object.keys(a);l<h.length;l++){var d=h[l];"dataSource"!==d&&"tableName"!==d&&"child"!==d&&i[d]&&"url"!==d&&-1===r.indexOf(i[d])&&r.push(i[d])}o.select(r),a.hasOwnProperty("tableName")&&o.from(i.tableName)}return ot.addSorting(this.sortOrder,i.text,o),!c(n)&&!c(i.parentID)&&o.where(i.parentID,"equal",this.isNumberTypeId?parseFloat(n):n),o},e.prototype.getType=function(){return!!this.treeData[0]&&"number"==typeof R(this.fields.id,this.treeData[0])},e.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var i=this.getChildNodes(this.treeData,void 0,!0);this.rootData=c(i)?[]:i}else this.rootData=this.treeData},e.prototype.renderItems=function(i){this.listBaseOption.ariaAttributes.level=1;var n=this.getSortedData(this.rootData);this.ulElement=ot.createList(this.createElement,i?this.rootData:n,this.listBaseOption),this.element.appendChild(this.ulElement);var r=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var o=0;o<r.length;)this.renderChildNodes(r[o],!0,null,!0),o++;(1===me("."+si,this.element).length&&r&&0!==r.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},e.prototype.updateCheckedStateFromDS=function(i){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){for(var n=this.fields,r=new he(this.treeData).executeLocal((new Me).where(n.isChecked,"equal",!0,!1)),o=0;o<r.length;o++){var a=r[o][this.fields.id]?r[o][this.fields.id].toString():null;if(r[o][this.fields.parentID]&&r[o][this.fields.parentID].toString(),-1===this.checkedNodes.indexOf(a)&&!this.isLoaded&&this.checkedNodes.push(a),r[o][this.fields.hasChildren])for(var h=r[o][this.fields.id],d=new he(this.treeData).executeLocal((new Me).where(n.parentID,"equal",h,!1)),p=0;p<d.length;p++){var u=d[p][this.fields.id]?d[p][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(u)&&this.autoCheck&&this.checkedNodes.push(u)}}for(o=0;o<this.checkedNodes.length;o++){var f=this.fields,g=new he(this.treeData).executeLocal((new Me).where(f.id,"equal",this.checkedNodes[o],!0));if(g[0]&&this.autoCheck&&(this.getCheckedNodeDetails(f,g),this.checkIndeterminateState(g[0])),g.length>0){var m=g[0][this.fields.id]?g[0][this.fields.id].toString():null;this.checkedNodes.indexOf(m)>-1&&-1===this.validNodes.indexOf(m)&&this.validNodes.push(m)}for(var y=new he(this.treeData).executeLocal((new Me).where(f.parentID,"equal",this.checkedNodes[o],!0)),b=0;b<y.length;b++)m=y[b][this.fields.id]?y[b][this.fields.id].toString():null,-1===this.checkedNodes.indexOf(m)&&this.autoCheck&&this.checkedNodes.push(m),this.checkedNodes.indexOf(m)>-1&&-1===this.validNodes.indexOf(m)&&this.validNodes.push(m)}}else if(2===this.dataType||this.fields.dataSource instanceof he&&this.isOffline){for(b=0;b<this.treeData.length;b++){var w=this.treeData[b][this.fields.id]?this.treeData[b][this.fields.id].toString():"";this.treeData[b][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(w)&&this.checkedNodes.push(w),this.checkedNodes.indexOf(w)>-1&&-1===this.validNodes.indexOf(w)&&this.validNodes.push(w);var S=R(this.fields.child.toString(),this.treeData[b]);S&&this.updateChildCheckState(S,this.treeData[b])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},e.prototype.getCheckedNodeDetails=function(i,n){var r=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,o=0,a=this.element.querySelector('[data-uid="'+n[0][this.fields.id]+'"]'),l=this.element.querySelector('[data-uid="'+n[0][this.fields.parentID]+'"]');if(a||l)l&&(H("."+qs,l)||this.changeState(l,"indeterminate",null,!0,!0));else{-1===this.parentNodeCheck.indexOf(r)&&this.parentNodeCheck.push(r);for(var d=this.getChildNodes(this.treeData,r),p=0;p<d.length;p++){var u=d[p][this.fields.id]?d[p][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&o++,o===d.length&&-1===this.checkedNodes.indexOf(r)&&this.checkedNodes.push(r)}var f=new he(this.treeData).executeLocal((new Me).where(i.id,"equal",r,!0));this.getCheckedNodeDetails(i,f)}},e.prototype.updateParentCheckState=function(){for(var n,i=me("."+Pl,this.element),r=0;r<i.length;r++){var o=k(i[r],"."+mt),a=o.getAttribute("data-uid").toString(),l=0;if(n=1===this.dataType?new he(this.treeData).executeLocal((new Me).where(this.fields.parentID,"equal",a,!0)):this.getChildNodes(this.treeData,a)){for(var h=0;h<n.length;h++){var d=n[h][this.fields.id].toString();-1!==this.checkedNodes.indexOf(d)&&l++}if(l===n.length){var p=o.getAttribute("data-uid");-1===this.checkedNodes.indexOf(p)&&this.checkedNodes.push(p),this.changeState(o,"check",null,!0,!0)}else 0===l&&0===this.checkedNodes.length&&this.changeState(o,"uncheck",null,!0,!0)}}},e.prototype.checkIndeterminateState=function(i){var n;(n=this.element.querySelector(1===this.dataType?'[data-uid="'+i[this.fields.parentID]+'"]':'[data-uid="'+i[this.fields.id]+'"]'))?"true"!==n.querySelector("."+_a).getAttribute("aria-checked")&&this.changeState(n,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(i[this.fields.id].toString())&&this.parentNodeCheck.push(i[this.fields.id].toString())},e.prototype.updateChildCheckState=function(i,n){for(var r=0,o=n[this.fields.id]?n[this.fields.id].toString():"",a=0;a<i.length;a++){var l=i[a][this.fields.id]?i[a][this.fields.id].toString():"";i[a][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(l)&&this.autoCheck&&this.checkedNodes.push(l),-1!==this.checkedNodes.indexOf(l)&&this.autoCheck&&r++,this.checkedNodes.indexOf(l)>-1&&-1===this.validNodes.indexOf(l)&&this.validNodes.push(l);var h=R(this.fields.child.toString(),i[a]);h&&h.length&&(-1===this.parentCheckData.indexOf(n)&&this.parentCheckData.push(n),this.updateChildCheckState(h,i[a])),r===i.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o)}if(0!==r&&this.autoCheck){this.checkIndeterminateState(n);for(var d=0;d<this.parentCheckData.length;d++)n!==this.parentCheckData[d]&&this.parentCheckData[d]&&this.checkIndeterminateState(this.parentCheckData[d])}this.parentCheckData=[]},e.prototype.beforeNodeCreate=function(i){if(this.showCheckBox){var n=Ra(this.createElement,!0,{cssClass:this.touchClass});n.setAttribute("role","checkbox"),n.setAttribute("aria-label","checkbox");var r=H("div."+qn,i.item),o=i.item.getAttribute("data-uid");i.item.childNodes[0].insertBefore(n,i.item.childNodes[0].childNodes[c(r)?0:1]);var a=R(i.fields.isChecked,i.curData);this.checkedNodes.indexOf(o)>-1?(H("."+gp,n).classList.add(qs),n.setAttribute("aria-checked","true"),this.addCheck(i.item)):c(a)||"true"!==a.toString()?n.setAttribute("aria-checked","false"):(H("."+gp,n).classList.add(qs),n.setAttribute("aria-checked","true"),this.addCheck(i.item));var l=H("."+gp,n);C.add(l,"mousedown",this.frameMouseHandler,this),C.add(l,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(i.item),this.allowMultiSelection&&!i.item.classList.contains(Rm)&&i.item.setAttribute("aria-selected","false");var h=i.fields;if(this.addActionClass(i,h.selected,Rm),this.addActionClass(i,h.expanded,sx),i.item.setAttribute("tabindex","-1"),C.add(i.item,"focus",this.focusIn,this),!c(this.nodeTemplateFn)){var d=i.item.querySelector("."+uf),p=i.item.getAttribute("data-uid");d.innerHTML="",this.renderNodeTemplate(i.curData,d,p)}this.isRefreshed||(this.trigger("drawNode",{node:i.item,nodeData:i.curData,text:i.text}),!1===i.curData[this.fields.selectable]&&!this.showCheckBox&&(i.item.classList.add(Om),i.item.firstElementChild.setAttribute("style","cursor: not-allowed")))},e.prototype.frameMouseHandler=function(i){Qu(i,H(".e-ripple-container",i.target.parentElement))},e.prototype.addActionClass=function(i,n,r){var a=R(n,i.curData);!c(a)&&"false"!==a.toString()&&i.item.classList.add(r)},e.prototype.getDataType=function(i,n){if(this.fields.dataSource instanceof he){for(var r=0;r<i.length;r++)if(this.isOffline){if("string"==typeof n.child&&c(R(n.child,i[r]))&&!c(R(n.parentID,i[r])))return 1}else if("string"==typeof n.child&&c(R(n.child,i[r])))return 1;return 2}r=0;for(var o=i.length;r<o;r++){if("string"==typeof n.child&&!c(R(n.child,i[r])))return 2;if(!c(R(n.parentID,i[r]))||!c(R(n.hasChildren,i[r])))return 1}return 1},e.prototype.getGroupedData=function(i,n){for(var r=(new Me).group(n),o=ot.getDataSource(i,r),a=[],l=0;l<o.length;l++)a.push(o[l].items);return a},e.prototype.getSortedData=function(i){return i&&"None"!==this.sortOrder&&(i=ot.getDataSource(i,ot.addSorting(this.sortOrder,this.fields.text))),i},e.prototype.finalizeNode=function(i){for(var n=me("."+eW,i),r=0;r<n.length;r++)n[r].setAttribute("alt",eW);if(this.isLoaded){for(var o=me("."+Rm,i),a=0;a<o.length;a++){this.selectNode(o[a],null);break}A(o,Rm)}for(var l=me("."+mt+":not(."+sx+")",i),h=0;h<l.length;h++){var d=H("div."+qn,l[h]);d&&d.classList.contains(Vi)&&this.disableExpandAttr(l[h])}var p=me("."+sx,i);if(!this.isInitalExpand)for(a=0;a<p.length;a++)this.renderChildNodes(p[a]);A(p,sx),this.updateList(),this.isLoaded&&this.updateCheckedProp()},e.prototype.updateCheckedProp=function(){if(this.showCheckBox){var i=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:i},!0)}},e.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var i=me("li",this.element),r=0;r<i.length;r++)i[r].classList.contains(mt)&&(H("."+si,i[r])?this.ensureParentCheckState(i[r]):this.ensureChildCheckState(i[r]));else{var o=me("."+Pl,this.element);for(r=0;r<o.length;r++)o[r].classList.remove(Pl)}},e.prototype.ensureParentCheckState=function(i){if(!c(i)){if(i.classList.contains(Vl))return;var n=i;i.classList.contains(mt)&&(n=H("."+si,i));var r=me("."+qs,n),o=me("."+Pl,n),a=me("."+mt,n),l=i.getElementsByClassName(_a)[0];a.length===r.length?this.changeState(l,"check",null,!0,!0):r.length>0||o.length>0?this.changeState(l,"indeterminate",null,!0,!0):0===r.length&&this.changeState(l,"uncheck",null,!0,!0);var h=k(i,"."+si);if(!c(h)){var d=k(h,"."+mt);this.ensureParentCheckState(d)}}},e.prototype.ensureChildCheckState=function(i,n){if(!c(i)){var r=H("."+si,i),o=void 0;if(!c(r)){o=me("."+_a,r);for(var a=i.getElementsByClassName(gp)[0].classList.contains(qs),l=i.getElementsByClassName(gp)[0].classList.contains(Pl),h=r.querySelectorAll("li"),p=void r.parentElement.getAttribute("aria-expanded"),u=0;u<o.length;u++){var f=h[u].getAttribute("data-uid");if(c(this.currentLoadData)||c(R(this.fields.isChecked,this.currentLoadData[u]))){var g=o[u].getElementsByClassName(gp)[0].classList.contains(qs);a||g&&!this.isLoaded||-1!==this.checkedNodes.indexOf(f)&&this.isLoaded&&(l||a)?p="check":h[u].classList.contains("e-has-child")&&!Oe(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&-1!==this.parentNodeCheck.indexOf(f)||1===this.dataType&&!Oe(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&-1!==this.parentNodeCheck.indexOf(f)?(p="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(f),1)):p="uncheck"}else p=R(this.fields.isChecked,this.currentLoadData[u])?"check":"uncheck",-1!==this.ele&&(p=a?"check":"uncheck"),"uncheck"===p&&!Oe(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(f)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(f),1),p="indeterminate");this.changeState(o[u],p,n,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},e.prototype.doCheckBoxAction=function(i,n){if(me("."+mt,this.element),c(i)){var g=me("."+_a,this.element);if(this.loadOnDemand)for(var m=0;m<g.length;m++)this.updateFieldChecked(g[m],n),this.changeState(g[m],n?"check":"uncheck",null,null,null,n);else for(m=0;m<g.length;m++)this.updateFieldChecked(g[m],n),this.changeState(g[m],n?"check":"uncheck")}else for(var o=i.length;o>=0;o--){var a;if(c(a=this.getElement(1===i.length?i[o-1]:i[o]))){var l=void 0;if(""!==(l=i[o-i.length]?i[o-i.length].toString():i[o]?i[o].toString():null)&&n&&l)this.setValidCheckedNode(l),this.dynamicCheckState(l,n);else if(-1!==this.checkedNodes.indexOf(l)&&""!==l&&!n){this.checkedNodes.splice(this.checkedNodes.indexOf(l),1);var h=this.getChildNodes(this.treeData,l);if(h){for(var d=0;d<h.length;d++){var p=h[d][this.fields.id]?h[d][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(p)){this.checkedNodes.splice(this.checkedNodes.indexOf(p),1);var u=this.element.querySelector('[data-uid="'+p+'"]');u&&this.changeState(u,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(l)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)}l&&this.dynamicCheckState(l,n),this.updateField(this.treeData,this.fields,l,"isChecked",null)}}else{var f=H("."+si+" ."+_a,a);this.validateCheckNode(f,!n,a,null)}}if(i)for(var y=0;y<i.length;y++)l=i[y]?i[y].toString():"",n||this.updateField(this.treeData,this.fields,l,"isChecked",null);this.autoCheck&&this.updateParentCheckState()},e.prototype.updateFieldChecked=function(i,n){var r=k(i,"."+mt),o=r.getAttribute("data-uid");"true"===this.getNodeData(r).isChecked&&!n&&this.updateField(this.treeData,this.fields,o,"isChecked",null)},e.prototype.dynamicCheckState=function(i,n){if(1===this.dataType){var r=0,o=new he(this.treeData).executeLocal((new Me).where(this.fields.id,"equal",i,!0));if(o[0]){var a=o[0][this.fields.id]?o[0][this.fields.id].toString():null,l=o[0][this.fields.parentID]?o[0][this.fields.parentID].toString():null,p=((h=this.element.querySelector('[data-uid="'+l+'"]'))&&H("."+Pl,h),h?H("."+qs,h):null),u=this.element.querySelector('[data-uid="'+a+'"]'),f=this.getChildNodes(this.treeData,l);if(f)for(var g=0;g<f.length;g++){var m=f[g][this.fields.id]?f[g][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(m)&&r++}-1!==this.checkedNodes.indexOf(i)&&h&&a===i&&this.autoCheck?this.changeState(h,"indeterminate",null):-1===this.checkedNodes.indexOf(i)&&u&&a===i&&!n?this.changeState(u,"uncheck",null):-1!==this.checkedNodes.indexOf(i)&&u&&a===i&&n?this.changeState(u,"check",null):-1===this.checkedNodes.indexOf(i)&&!u&&h&&a===i&&this.autoCheck&&0!==r?this.changeState(h,"indeterminate",null):-1===this.checkedNodes.indexOf(i)&&!u&&h&&a===i&&this.autoCheck&&0===r?this.changeState(h,"uncheck",null):!u&&!h&&a===i&&this.autoCheck&&this.updateIndeterminate(i,n)}}else if(2===this.dataType||this.fields.dataSource instanceof he&&this.isOffline){a=void 0;var h=void 0;for(p=void 0,g=0;g<this.treeData.length;g++){a=this.treeData[g][this.fields.id]?this.treeData[g][this.fields.id].toString():"",p=(h=this.element.querySelector('[data-uid="'+a+'"]'))?H("."+qs,h):null,-1===this.checkedNodes.indexOf(a)&&h&&p&&!n&&this.changeState(h,"uncheck",null);var y=R(this.fields.child.toString(),this.treeData[g]);y&&this.updateChildIndeterminate(y,a,i,n,a)}}},e.prototype.updateIndeterminate=function(i,n){var a,r=this.getTreeData(i),o=0;1===this.dataType&&(a=r[0][this.fields.parentID]?r[0][this.fields.parentID].toString():null);var l=this.getChildNodes(this.treeData,a);if(l)for(var h=0;h<l.length;h++){var d=l[h][this.fields.id]?l[h][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(d)&&o++}var p=this.element.querySelector('[data-uid="'+a+'"]');p&&n||!n&&p&&-1===this.parentNodeCheck.indexOf(a)&&0!==o?this.changeState(p,"indeterminate",null):!n&&p&&-1===this.parentNodeCheck.indexOf(a)&&0===o?this.changeState(p,"uncheck",null):p||(n||-1!==this.checkedNodes.indexOf(a)||-1===this.parentNodeCheck.indexOf(a)?(n&&-1===this.checkedNodes.indexOf(a)&&-1===this.parentNodeCheck.indexOf(a)||!n&&-1!==this.checkedNodes.indexOf(a)&&-1===this.parentNodeCheck.indexOf(a)&&0!==o)&&this.parentNodeCheck.push(a):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1),this.updateIndeterminate(a,n),-1!==this.checkedNodes.indexOf(a)&&!n&&this.checkedNodes.splice(this.checkedNodes.indexOf(a),1))},e.prototype.updateChildIndeterminate=function(i,n,r,o,a){for(var l=0,h=0;h<i.length;h++){var d=i[h][this.fields.id]?i[h][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(d)&&l++;var p=this.element.querySelector('[data-uid="'+n+'"]'),u=p?H("."+Pl,p):null,f=p?H("."+qs,p):null,g=this.element.querySelector('[data-uid="'+d+'"]'),m=g?H("."+qs,g):null;if(-1!==this.checkedNodes.indexOf(r)&&p&&d===r&&this.autoCheck)this.changeState(p,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(r)||!p||g||d!==r||o){if(-1===this.checkedNodes.indexOf(r)&&g&&d===r&&!o)this.changeState(g,"uncheck",null);else if(-1===this.checkedNodes.indexOf(r)&&u&&d===r&&this.autoCheck&&0===l&&!o)u.classList.remove(Pl);else if(-1===this.checkedNodes.indexOf(r)&&!g&&f&&d===r&&0===l)this.changeState(p,"uncheck",null);else if(-1===this.checkedNodes.indexOf(d)&&g&&m&&0===l)this.changeState(g,"uncheck",null);else if(!g&&!p&&d===r||-1!==this.parentNodeCheck.indexOf(n)&&this.autoCheck){var y=this.element.querySelector('[data-uid="'+a+'"]');o&&0!==l?this.changeState(y,"indeterminate",null):o&&l===i.length&&-1===this.checkedNodes.indexOf(n)?this.checkedNodes.push(n):!o&&0===l&&-1!==this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(n)),-1===this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.push(n)}}else this.changeState(p,this.autoCheck?"uncheck":0!==l?"indeterminate":"uncheck",null);var b=R(this.fields.child.toString(),i[h]);b&&this.updateChildIndeterminate(b,d,r,o,a)}},e.prototype.changeState=function(i,n,r,o,a,l){var d,h=this,p=k(i,"."+mt);i===p&&(i=H("."+_a,p)),o?this.nodeCheckAction(i,n,p,d,r,o,a,l):(this.checkActionNodes=[],d=this.getCheckEvent(p,n,r),this.trigger("nodeChecking",d,function(u){u.cancel||h.nodeCheckAction(i,n,p,u,r,o,a,l)}))},e.prototype.nodeCheckAction=function(i,n,r,o,a,l,h,d){var p,u=i.getElementsByClassName(gp)[0];if("check"!==n||u.classList.contains(qs)?"uncheck"===n&&(u.classList.contains(qs)||u.classList.contains(Pl))?(A([u],[qs,Pl]),this.removeCheck(r),p="false"):"indeterminate"===n&&this.autoCheck&&(u.classList.remove(qs),u.classList.add(Pl),this.removeCheck(r),p="mixed"):(u.classList.remove(Pl),u.classList.add(qs),this.addCheck(r),p="true"),c(p="check"===n?"true":"uncheck"===n?"false":p)||i.setAttribute("aria-checked",p),h){var f=[].concat([],this.checkActionNodes);o=this.getCheckEvent(r,n,a),Oe(l)&&(o.data=f)}void 0!==d&&this.ensureStateChange(r,d),l||c(p)||(i.setAttribute("aria-checked",p),o.data[0].checked=p,this.trigger("nodeChecked",o),this.checkActionNodes=[])},e.prototype.addCheck=function(i){var n=i.getAttribute("data-uid");!c(n)&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n)},e.prototype.removeCheck=function(i){var n=this.checkedNodes.indexOf(i.getAttribute("data-uid"));n>-1&&this.checkedNodes.splice(n,1)},e.prototype.getCheckEvent=function(i,n,r){this.checkActionNodes.push(this.getNodeData(i));var o=this.checkActionNodes;return{action:n,cancel:!1,isInteracted:!c(r),node:i,data:o}},e.prototype.finalize=function(){var i=H("."+si,this.element);if(!c(i)){i.setAttribute("role",iW.treeRole),this.setMultiSelect(this.allowMultiSelection);var n=H("."+mt,this.element);n&&(n.setAttribute("tabindex","0"),this.updateIdAttr(null,n)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}},e.prototype.setTextWrap=function(){(this.allowTextWrap?M:A)([this.element],"e-text-wrap"),E.isIE&&(this.allowTextWrap?M:A)([this.element],"e-ie-wrap")},e.prototype.updateWrap=function(i){if(this.fullRowSelect)for(var n=i?me("."+mt,i):this.liList,r=n.length,o=0;o<r;o++)this.calculateWrap(n[o])},e.prototype.calculateWrap=function(i){var n=H("."+fp,i);n&&n.nextElementSibling&&(n.style.height=this.allowTextWrap?n.nextElementSibling.offsetHeight+"px":"")},e.prototype.doExpandAction=function(){var i=this.expandedNodes;if(this.isInitalExpand&&i.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof he)this.expandGivenNodes(i);else{for(var n=0;n<i.length;n++){var r=H('[data-uid="'+i[n]+'"]',this.element);if(c(r))i[n]&&-1===this.expandChildren.indexOf(i[n])&&this.expandChildren.push(i[n].toString());else{var o=H("."+Vi,H("."+es,r));c(o)||this.expandAction(r,o,null)}}this.afterFinalized()}else this.afterFinalized()},e.prototype.expandGivenNodes=function(i){var n=this;this.expandCallback(i[this.index],function(){n.index++,n.index<i.length?n.expandGivenNodes(i):n.afterFinalized()})},e.prototype.expandCallback=function(i,n){var r=H('[data-uid="'+i+'"]',this.element);if(c(r))n();else{var o=H("."+Vi,H("."+es,r));c(o)?n():this.expandAction(r,o,null,!1,n)}},e.prototype.afterFinalized=function(){this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,this.isLoaded&&!this.isFieldChange||this.isNodeDropped||this.trigger("dataBound",{data:this.treeData}),this.isLoaded=!0,this.isNodeDropped=!1},e.prototype.doSelectionAction=function(){var i=me("."+Rm,this.element),n=this.selectedNodes;if(n.length>0){this.setProperties({selectedNodes:[]},!0);for(var r=0;r<n.length;r++){var o=H('[data-uid="'+n[r]+'"]',this.element);if(o&&!o.classList.contains("e-active")?this.selectNode(o,null,!0):this.selectedNodes.push(n[r]),!this.allowMultiSelection)break}}else this.selectGivenNodes(i);A(i,Rm)},e.prototype.selectGivenNodes=function(i){for(var n=0;n<i.length&&(i[n].classList.contains("e-disable")||this.selectNode(i[n],null,!0),this.allowMultiSelection);n++);},e.prototype.clickHandler=function(i){var n=E.isDevice&&!E.isIos?document.elementFromPoint(i.originalEvent.changedTouches[0].clientX,i.originalEvent.changedTouches[0].clientY):i.originalEvent.target;if(C.remove(this.element,"contextmenu",this.preventContextMenu),n&&!this.dragStartAction){var r=n.classList,o=k(n,"."+mt);if(!o||o.classList.contains(Om)&&!r.contains(Vi)&&!r.contains($r))return;if(3!==i.originalEvent.which){var a=H(".e-ripple-element",o),l=H("."+qn,o);if(this.removeHover(),this.setFocusElement(o),this.showCheckBox&&!o.classList.contains("e-disable")){var h=k(n,"."+_a);if(!c(h)){var d=H("."+gp,h);return this.validateCheckNode(h,d.classList.contains(qs),o,i.originalEvent),void this.triggerClickEvent(i.originalEvent,o)}}r.contains(Vi)?this.expandAction(o,n,i):r.contains($r)?this.collapseNode(o,n,i):a&&l?l.classList.contains($q)&&l.classList.contains(Vi)?this.expandAction(o,l,i):l.classList.contains($q)&&l.classList.contains($r)?this.collapseNode(o,l,i):!r.contains(si)&&!r.contains(mt)&&this.toggleSelect(o,i.originalEvent,!1):!r.contains(si)&&!r.contains(mt)&&this.toggleSelect(o,i.originalEvent,!1)}3===i.originalEvent.which&&(this.isRightClick=!0),this.triggerClickEvent(i.originalEvent,o)}},e.prototype.nodeCheckedEvent=function(i,n,r){k(i,"."+mt);var a=this.getCheckEvent(i,n?"uncheck":"check",r);a.data=a.data.splice(0,a.data.length-1),this.trigger("nodeChecked",a)},e.prototype.triggerClickEvent=function(i,n){this.trigger("nodeClicked",{event:i,node:n})},e.prototype.expandNode=function(i,n,r){var o=this;if(this.renderReactTemplates(),n.classList.contains($P)&&this.hideSpinner(n),this.initialRender||n.classList.add("interaction"),!0!==r||!0===r&&i.classList.contains("e-expanded")){if(!0!==this.preventExpand){A([n],Vi),M([n],$r);var a=0,l=0,h=this,d=H("."+si,i),p=i;this.setHeight(p,d);var u=H("."+mt+"."+da,i);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(d,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(g){p.style.overflow="hidden",!c(u)&&u instanceof HTMLElement&&u.classList.add(ox),a=p.offsetHeight,l=H("."+es,i).offsetHeight},progress:function(g){g.element.style.display="block",h.animateHeight(g,a,l)},end:function(g){g.element.style.display="block",!c(u)&&u instanceof HTMLElement&&u.classList.remove(ox),o.expandedNode(p,d,n)}}):this.expandedNode(p,d,n)}}else H("."+si,i).style.display="none",this.fields.dataSource instanceof he&&(this.preventExpand=!1);this.initialRender&&n.classList.add("interaction")},e.prototype.expandedNode=function(i,n,r){n.style.display="block",i.style.display="block",i.style.overflow="",i.style.height="",A([r],up),this.addExpand(i),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(i),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(i,null),this.expandArgs.isInteracted=this.isInteracted,this.trigger("nodeExpanded",this.expandArgs))},e.prototype.addExpand=function(i){i.setAttribute("aria-expanded","true"),A([i],Kq);var n=i.getAttribute("data-uid");!c(n)&&-1===this.expandedNodes.indexOf(n)&&this.expandedNodes.push(n)},e.prototype.collapseNode=function(i,n,r){var a,o=this;n.classList.contains(up)||(M([n],up),this.isLoaded?(a=this.getExpandEvent(i,r),this.isInteracted=a.isInteracted,this.trigger("nodeCollapsing",a,function(l){l.cancel?A([n],up):o.nodeCollapseAction(i,n,l)})):this.nodeCollapseAction(i,n,a))},e.prototype.nodeCollapseAction=function(i,n,r){var o=this;A([n],$r),M([n],Vi);var a=0,l=0,h=this,d=H("."+si,i),p=i,u=H("."+mt+"."+da,i);this.isAnimate?this.aniObj.animate(d,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(f){p.style.overflow="hidden",!c(u)&&u instanceof HTMLElement&&u.classList.add(ox),a=H("."+es,i).offsetHeight,l=p.offsetHeight},progress:function(f){h.animateHeight(f,a,l)},end:function(f){f.element.style.display="none",!c(u)&&u instanceof HTMLElement&&u.classList.remove(ox),o.collapsedNode(p,d,n,r)}}):this.collapsedNode(p,d,n,r)},e.prototype.collapsedNode=function(i,n,r,o){n.style.display="none",i.style.overflow="",i.style.height="",A([r],up),this.removeExpand(i),this.isLoaded&&((o=this.getExpandEvent(i,null)).isInteracted=this.isInteracted,this.trigger("nodeCollapsed",o))},e.prototype.removeExpand=function(i,n){n?i.removeAttribute("aria-expanded"):this.disableExpandAttr(i);var r=this.expandedNodes.indexOf(i.getAttribute("data-uid"));r>-1&&this.expandedNodes.splice(r,1)},e.prototype.disableExpandAttr=function(i){i.setAttribute("aria-expanded","false"),M([i],Kq)},e.prototype.setHeight=function(i,n){n.style.display="block",n.style.visibility="hidden",i.style.height=i.offsetHeight+"px",n.style.display="none",n.style.visibility=""},e.prototype.animateHeight=function(i,n,r){i.element.parentElement.style.height=(i.duration-i.timeStamp)/i.duration*(r-n)+n+"px"},e.prototype.renderChildNodes=function(i,n,r,o){var h,a=this,l=H("div."+qn,i);if(!c(l))if(this.showSpinner(l),this.fields.dataSource instanceof he){var d=this.parents(i,"."+si).length,p=this.getChildFields(this.fields,d,1);if(c(p)||c(p.dataSource))return z(l),void this.removeExpand(i,!0);this.treeList.push("false"),this.fields.dataSource instanceof he&&this.isOffline?(this.treeList.pop(),h=this.getChildNodes(this.treeData,i.getAttribute("data-uid")),this.loadChild(h,p,l,i,n,r,o)):p.dataSource.executeQuery(this.getQuery(p,i.getAttribute("data-uid"))).then(function(u){a.treeList.pop(),h=u.result,1===a.dataType&&(a.dataType=2),a.loadChild(h,p,l,i,n,r,o)}).catch(function(u){a.trigger("actionFailure",{error:u})})}else{if(h=this.getChildNodes(this.treeData,i.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(h),c(h)||0===h.length)return z(l),void this.removeExpand(i,!0);this.listBaseOption.ariaAttributes.level=parseFloat(i.getAttribute("aria-level"))+1,i.appendChild(ot.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(i,l,o),this.setSelectionForChildNodes(h),this.ensureCheckNode(i),this.finalizeNode(i),this.disableTreeNodes(h),this.renderSubChild(i,n,o)}},e.prototype.loadChild=function(i,n,r,o,a,l,h){if(this.currentLoadData=i,c(i)||0===i.length)z(r),this.removeExpand(o,!0);else{if(this.updateListProp(n),this.fields.dataSource instanceof he&&!this.isOffline){var d=o.getAttribute("data-uid");ke("child",i,this.getNodeObject(d))}this.listBaseOption.ariaAttributes.level=parseFloat(o.getAttribute("aria-level"))+1,o.appendChild(ot.createList(this.createElement,i,this.listBaseOption)),this.expandNode(o,r,h),this.setSelectionForChildNodes(i),this.ensureCheckNode(o),this.finalizeNode(o),this.disableTreeNodes(i),this.renderSubChild(o,a,h)}l&&l(),0===this.treeList.length&&!this.isLoaded&&this.finalize()},e.prototype.disableTreeNodes=function(i){for(var n=0;n<i.length;){var r=i[n][this.fields.id]?i[n][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(r)&&this.doDisableAction([r]),n++}},e.prototype.setSelectionForChildNodes=function(i){var n;for(n=0;n<i.length;n++){var r=i[n][this.fields.id]?i[n][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(r)&&this.doSelectionAction()}},e.prototype.ensureCheckNode=function(i){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(i.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(i),this.ensureParentCheckState(i))),this.currentLoadData=null},e.prototype.getFields=function(i,n,r){return n===r?i:this.getFields(this.getChildMapper(i),n,r+1)},e.prototype.getChildFields=function(i,n,r){return n===r?this.getChildMapper(i):this.getChildFields(this.getChildMapper(i),n,r+1)},e.prototype.getChildMapper=function(i){return"string"==typeof i.child||c(i.child)?i:i.child},e.prototype.getChildNodes=function(i,n,r){var a,o=this;if(void 0===r&&(r=!1),c(i))return a;if(1===this.dataType)return this.getChildGroup(this.groupedData,n,r);if("string"==typeof this.fields.child){var l=i.findIndex(function(f){return f[o.fields.id]&&f[o.fields.id].toString()===n});if(-1!==l)return R(this.fields.child,i[l]);if(-1===l)for(var h=0,d=i.length;h<d;h++){var p=R(this.fields.child,i[h]),u=c(p)?-1:p.findIndex(function(f){return f[o.fields.id]&&f[o.fields.id].toString()===n});if(-1!==u)return R(this.fields.child,p[u]);if(!c(p)&&void 0!==(a=this.getChildNodes(p,n)))break}}return a},e.prototype.getChildGroup=function(i,n,r){var o;if(c(i))return o;for(var a=0,l=i.length;a<l;a++){if(c(i[a][0])||c(R(this.fields.parentID,i[a][0])))return r?i[a]:[];if(R(this.fields.parentID,i[a][0]).toString()===n)return i[a]}return o},e.prototype.renderSubChild=function(i,n,r){if(n)for(var o=me("."+Vi,i),a=0,l=o.length;a<l;a++){var h=o[a];if(i.querySelector(".e-icons")!==o[a]){var d=k(h,"."+mt);this.expandArgs=this.getExpandEvent(d,null),!0!==r&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(d,n,null,r)}}},e.prototype.toggleSelect=function(i,n,r){i.classList.contains("e-disable")||(this.allowMultiSelection&&(n&&n.ctrlKey||r)&&this.isActive(i)?this.unselectNode(i,n):this.selectNode(i,n,r))},e.prototype.isActive=function(i){return!!i.classList.contains(da)},e.prototype.selectNode=function(i,n,r){var a,o=this;c(i)||!this.allowMultiSelection&&this.isActive(i)&&!c(n)?this.setFocusElement(i):this.isLoaded?(a=this.getSelectEvent(i,"select",n),this.trigger("nodeSelecting",a,function(l){!l.cancel&&!l.node.classList.contains(Om)&&o.nodeSelectAction(i,n,l,r)})):this.nodeSelectAction(i,n,a,r)},e.prototype.nodeSelectAction=function(i,n,r,o){if((!this.allowMultiSelection||!o&&(!n||n&&!n.ctrlKey))&&this.removeSelectAll(),this.allowMultiSelection&&n&&n.shiftKey){this.startNode||(this.startNode=i);var a=this.liList.indexOf(this.startNode),l=this.liList.indexOf(i);if(a>l){var h=a;a=l,l=h}for(var d=a;d<=l;d++){var p=this.liList[d];wn(p)&&!p.classList.contains("e-disable")&&this.addSelect(p)}}else this.startNode=i,this.addSelect(i);this.isLoaded&&(r.nodeData=this.getNodeData(i),this.trigger("nodeSelected",r),this.isRightClick=!1),this.isRightClick=!1},e.prototype.unselectNode=function(i,n){var o,r=this;this.isLoaded?(o=this.getSelectEvent(i,"un-select",n),this.trigger("nodeSelecting",o,function(a){a.cancel||r.nodeUnselectAction(i,a)})):this.nodeUnselectAction(i,o)},e.prototype.nodeUnselectAction=function(i,n){this.removeSelect(i),this.setFocusElement(i),this.isLoaded&&(n.nodeData=this.getNodeData(i),this.trigger("nodeSelected",n))},e.prototype.setFocusElement=function(i){if(!c(i)){var n=this.getFocusedNode();n&&(A([n],ff),n.setAttribute("tabindex","-1")),M([i],ff),i.setAttribute("tabindex","0"),C.add(i,"blur",this.focusOut,this),this.updateIdAttr(n,i)}},e.prototype.addSelect=function(i){i.setAttribute("aria-selected","true"),M([i],da);var n=i.getAttribute("data-uid");!c(n)&&-1===this.selectedNodes.indexOf(n)&&this.selectedNodes.push(n)},e.prototype.removeSelect=function(i){this.allowMultiSelection?i.setAttribute("aria-selected","false"):i.removeAttribute("aria-selected"),A([i],da);var n=this.selectedNodes.indexOf(i.getAttribute("data-uid"));n>-1&&this.selectedNodes.splice(n,1)},e.prototype.removeSelectAll=function(){for(var i=this.element.querySelectorAll("."+da),n=0,r=i;n<r.length;n++){var o=r[n];this.allowMultiSelection?o.setAttribute("aria-selected","false"):o.removeAttribute("aria-selected")}A(i,da),this.setProperties({selectedNodes:[]},!0)},e.prototype.getSelectEvent=function(i,n,r){var o=this.getNodeData(i);return{action:n,cancel:!1,isInteracted:!c(r),node:i,nodeData:o}},e.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?E.isDevice?"Click":"DblClick":this.expandOn},e.prototype.expandHandler=function(i){var n=i.originalEvent.target;!n||n.classList.contains(ix)||n.classList.contains(Vl)||n.classList.contains(si)||n.classList.contains(mt)||n.classList.contains(qn)||this.showCheckBox&&k(n,"."+_a)||this.expandCollapseAction(k(n,"."+mt),i)},e.prototype.expandCollapseAction=function(i,n){var r=H("div."+qn,i);if(r&&!r.classList.contains(up)){var o=r.classList;o.contains(Vi)?this.expandAction(i,r,n):o.contains($r)&&this.collapseNode(i,r,n)}},e.prototype.expandAction=function(i,n,r,o,a){var l=this;n.classList.contains(up)||(M([n],up),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(i,r),this.isInteracted=this.expandArgs.isInteracted,this.trigger("nodeExpanding",this.expandArgs,function(h){h.cancel?A([n],up):l.nodeExpandAction(i,n,o,a)})):this.nodeExpandAction(i,n,o,a))},e.prototype.nodeExpandAction=function(i,n,r,o){var a=H("."+si,i);if(a&&"UL"===a.nodeName)this.expandNode(i,n);else{this.isFirstRender=!0,this.renderChildNodes(i,r,o);for(var l=me("."+mt,i),h=0;h<l.length;h++){var d=this.getId(l[h]);if(-1!==this.expandChildren.indexOf(d)&&void 0!==this.expandChildren){var p=H("."+Vi,H("."+es,l[h]));c(p)||this.expandAction(l[h],p,null),this.expandChildren.splice(this.expandChildren.indexOf(d),1)}}}},e.prototype.keyActionHandler=function(i){var n=this,r=i.target,o=this.getFocusedNode();if(r&&r.classList.contains(ix)){var a=r;"enter"===i.action?a.blur():"escape"===i.action&&(a.value=this.oldText,a.blur())}else i.preventDefault(),this.trigger("keyPress",{cancel:!1,event:i,node:o},function(h){if(!h.cancel)switch(i.action){case"space":n.showCheckBox?n.checkNode(i):n.toggleSelect(o,i);break;case"moveRight":n.openNode(!n.enableRtl,i);break;case"moveLeft":n.openNode(!!n.enableRtl,i);break;case"shiftDown":n.shiftKeySelect(!0,i);break;case"moveDown":case"ctrlDown":case"csDown":n.navigateNode(!0);break;case"shiftUp":n.shiftKeySelect(!1,i);break;case"moveUp":case"ctrlUp":case"csUp":n.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":n.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":n.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":n.toggleSelect(o,i);break;case"f2":n.allowEditing&&!o.classList.contains("e-disable")&&n.createTextbox(o,i);break;case"ctrlA":if(n.allowMultiSelection){var d=me("."+mt+":not(."+da+")",n.element);n.selectGivenNodes(d)}}})},e.prototype.navigateToFocus=function(i){var n=this.getFocusedNode().querySelector("."+es),r=n.getBoundingClientRect(),o=this.getScrollParent(this.element);if(!c(o)){var a=o.getBoundingClientRect();r.bottom>a.bottom?o.scrollTop+=r.bottom-a.bottom:r.top<a.top&&(o.scrollTop-=a.top-r.top)}this.isVisibleInViewport(n)||n.scrollIntoView(i)},e.prototype.isVisibleInViewport=function(i){var n=i.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)},e.prototype.getScrollParent=function(i){return c(i)?null:i.scrollHeight>i.clientHeight?i:this.getScrollParent(i.parentElement)},e.prototype.shiftKeySelect=function(i,n){if(this.allowMultiSelection){var r=this.getFocusedNode(),o=i?this.getNextNode(r):this.getPrevNode(r);this.removeHover(),this.setFocusElement(o),this.toggleSelect(o,n,!1),this.navigateToFocus(!i)}else this.navigateNode(i)},e.prototype.checkNode=function(i){var n=this.getFocusedNode(),r=H("."+_a,n),o=H(" ."+gp,r).classList.contains(qs);n.classList.contains("e-disable")||0==n.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(r,o,n,i)},e.prototype.validateCheckNode=function(i,n,r,o){var a=this,l=k(i,"."+mt);this.checkActionNodes=[];var h=n?"false":"true";c(h)||i.setAttribute("aria-checked",h);var d=this.getCheckEvent(l,n?"uncheck":"check",o);this.trigger("nodeChecking",d,function(p){p.cancel||a.nodeCheckingAction(i,n,r,p,o)})},e.prototype.nodeCheckingAction=function(i,n,r,o,a){if(-1===this.checkedElement.indexOf(r.getAttribute("data-uid"))&&(this.checkedElement.push(r.getAttribute("data-uid")),this.autoCheck)){var l=this.getChildNodes(this.treeData,r.getAttribute("data-uid"));null!==l?this.allCheckNode(l,this.checkedElement,null,null,!1):l=null}if(this.changeState(i,n?"uncheck":"check",a,!0),this.autoCheck){this.ensureChildCheckState(r),this.ensureParentCheckState(k(k(r,"."+si),"."+mt));var h=void 0;"check"===o.action?h=!0:"uncheck"===o.action&&(h=!1),this.ensureStateChange(r,h)}this.nodeCheckedEvent(i,n,a)},e.prototype.ensureStateChange=function(i,n){var r=H("."+si,i),o=i.getAttribute("data-uid"),a=this.fields;if(1===this.dataType&&this.autoCheck)for(var l=new he(this.treeData).executeLocal((new Me).where(a.parentID,"equal",o,!0)),h=0;h<l.length;h++){var d=l[h][this.fields.id]?l[h][this.fields.id].toString():null,p=l[h][this.fields.isChecked]?l[h][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(d)){this.checkedNodes.push(d);var u=this.getChildNodes(this.treeData,d);this.getChildItems(u,n),-1!==this.parentNodeCheck.indexOf(d)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1)}else if(-1===this.checkedNodes.indexOf(o)&&null===r&&-1!==this.checkedNodes.indexOf(d)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(d),1),"true"===p&&this.updateField(this.treeData,this.fields,d,"isChecked",null),-1===this.checkedNodes.indexOf(o)&&null===r||-1!==this.parentNodeCheck.indexOf(d)){var f=this.getChildNodes(this.treeData,d);this.getChildItems(f,n),-1!==this.parentNodeCheck.indexOf(d)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1)}}else u=this.getChildNodes(this.treeData,d),this.getChildItems(u,n)}else if(1!==this.dataType||this.autoCheck)(u=this.getChildNodes(this.treeData,o))&&this.childStateChange(u,o,r,n);else if(n)for(h=0;h<this.treeData.length;h++){var y=this.treeData[h][this.fields.id]?this.treeData[h][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(y)&&this.checkedNodes.push(y)}else{var g=new he(this.treeData).executeLocal((new Me).where(a.isChecked,"equal",!0,!1));for(h=0;h<g.length;h++){var m=g[h][this.fields.id]?g[h][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(m)&&this.checkedNodes.splice(this.checkedNodes.indexOf(m),1),this.updateField(this.treeData,this.fields,m,"isChecked",null)}this.checkedNodes=[]}},e.prototype.getChildItems=function(i,n){for(var r=0;r<i.length;r++){var o=i[r][this.fields.id]?i[r][this.fields.id].toString():null,a=i[r][this.fields.isChecked]?i[r][this.fields.isChecked].toString():null;-1!==this.checkedNodes.indexOf(o)&&!n&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),-1===this.checkedNodes.indexOf(o)&&n&&this.checkedNodes.push(o),"true"===a&&!n&&this.updateField(this.treeData,this.fields,o,"isChecked",null);var l=this.getChildNodes(this.treeData,o);l.length>0&&this.getChildItems(l,n)}},e.prototype.childStateChange=function(i,n,r,o){for(var a=0;a<i.length;a++){var l=i[a][this.fields.id]?i[a][this.fields.id].toString():"",h=i[a][this.fields.isChecked]?i[a][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(l)?(this.checkedNodes.push(l),-1!==this.parentNodeCheck.indexOf(l)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)):-1===this.checkedNodes.indexOf(n)&&-1!==this.checkedNodes.indexOf(l)&&!o&&(this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),"true"===h&&this.updateField(this.treeData,this.fields,l,"isChecked",null)):this.autoCheck||(o?-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l):(-1!==this.checkedNodes.indexOf(l)&&this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),this.updateField(this.treeData,this.fields,l,"isChecked",null),this.checkedNodes=[]));var d=this.getChildNodes([i[a]],l);d&&this.childStateChange(d,n,r,o)}},e.prototype.allCheckNode=function(i,n,r,o,a){if(i)for(var l=0;l<i.length;l++){var h=R(this.fields.id,i[l]),d=this.element.querySelector('[data-uid="'+h+'"]');!1!==a&&-1===this.checkedElement.indexOf(h.toString())&&(null===d&&!c(i[l][this.fields.isChecked])&&-1===n.indexOf(h.toString())||0===o||2===r)&&(!1!==i[l][this.fields.isChecked]||2===r?n.push(h.toString()):o=null,o=!1!==i[l][this.fields.isChecked]||2===r?0:null),-1===n.indexOf(h.toString())&&c(r)&&n.push(h.toString());var p=R(this.fields.child.toString(),i[l]);if(!0===R(this.fields.hasChildren,i[l])||p){var f,u=R(this.fields.id,i[l]);(f=1===this.dataType?this.getChildNodes(this.treeData,u.toString()):p)&&(c(a)?this.allCheckNode(f,n,r,o):this.allCheckNode(f,n,r,o,a),o=null)}o=null}},e.prototype.openNode=function(i,n){var r=this.getFocusedNode(),o=H("div."+qn,r);if(i){if(!o)return;o.classList.contains(Vi)?this.expandAction(r,o,n):this.focusNextNode(r,!0)}else if(o&&o.classList.contains($r))this.collapseNode(r,o,n);else{var a=k(k(r,"."+si),"."+mt);if(!a)return;a.classList.contains("e-disable")||(this.setFocus(r,a),this.navigateToFocus(!0))}},e.prototype.navigateNode=function(i){var n=this.getFocusedNode();this.focusNextNode(n,i)},e.prototype.navigateRootNode=function(i){var n=this.getFocusedNode(),r=i?this.getRootNode():this.getEndNode();r.classList.contains("e-disable")||(this.setFocus(n,r),this.navigateToFocus(i))},e.prototype.getFocusedNode=function(){var i,n=H("."+mt+'[tabindex="0"]',this.element);return c(n)&&(i=H("."+mt,this.element)),c(n)?c(i)?this.element.firstElementChild:i:n},e.prototype.focusNextNode=function(i,n){var r=n?this.getNextNode(i):this.getPrevNode(i);if(this.setFocus(i,r),this.navigateToFocus(!n),r.classList.contains("e-disable")){var o=r.lastChild;null==r.previousSibling&&r.classList.contains("e-level-1")?this.focusNextNode(r,!0):null==r.nextSibling&&r.classList.contains("e-node-collapsed")||null==r.nextSibling&&o.classList.contains(es)?this.focusNextNode(r,!1):this.focusNextNode(r,n)}},e.prototype.getNextNode=function(i){var r,n=this.liList.indexOf(i);do{if(n++,c(r=this.liList[n]))return i}while(!wn(r));return r},e.prototype.getPrevNode=function(i){var r,n=this.liList.indexOf(i);do{if(n--,c(r=this.liList[n]))return i}while(!wn(r));return r},e.prototype.getRootNode=function(){var n,i=0;do{n=this.liList[i],i++}while(!wn(n));return n},e.prototype.getEndNode=function(){var n,i=this.liList.length-1;do{n=this.liList[i],i--}while(!wn(n));return n},e.prototype.setFocus=function(i,n){A([i],ff),i.setAttribute("tabindex","-1"),!n.classList.contains("e-disable")&&!n.classList.contains(Om)&&(M([n],ff),n.setAttribute("tabindex","0"),n.focus(),C.add(n,"blur",this.focusOut,this),this.updateIdAttr(i,n))},e.prototype.updateIdAttr=function(i,n){this.element.removeAttribute("aria-activedescendant"),i&&i.removeAttribute("id"),n.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},e.prototype.focusIn=function(){if(!this.mouseDownStatus){var i=this.getFocusedNode();i.setAttribute("tabindex","0"),M([i],ff),C.add(i,"blur",this.focusOut,this)}this.mouseDownStatus=!1},e.prototype.focusOut=function(i){var n=this.getFocusedNode();i.target==n&&(A([n],ff),C.remove(n,"blur",this.focusOut))},e.prototype.onMouseOver=function(i){var n=i.target,r=n.classList,o=k(n,"."+mt);!o||r.contains(si)||r.contains(mt)?this.removeHover():o&&!o.classList.contains("e-disable")&&this.setHover(o)},e.prototype.setHover=function(i){!i.classList.contains(tx)&&!i.classList.contains(Om)&&(this.removeHover(),M([i],tx))},e.prototype.onMouseLeave=function(i){this.removeHover()},e.prototype.removeHover=function(){var i=me("."+tx,this.element);i&&i.length&&A(i,tx)},e.prototype.getNodeData=function(i,n){if(!c(i)&&i.classList.contains(mt)&&!c(k(i,"."+Gq))&&k(i,"."+Gq).classList.contains(Vl)){var r=i.getAttribute("data-uid"),o=this.getText(i,n),a=k(i.parentNode,"."+mt),l=a?a.getAttribute("data-uid"):null,h=i.classList.contains(da),d=!i.classList.contains(Om),p="true"===i.getAttribute("aria-expanded"),u=null!==i.getAttribute("aria-expanded")||null!=(H("."+Vi,i)||H("."+$r,i)),f=null,g=H("."+_a,i);return this.showCheckBox&&g&&(f=g.getAttribute("aria-checked")),{id:r,text:o,parentID:l,selected:h,selectable:d,expanded:p,isChecked:f,hasChildren:u}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},e.prototype.getText=function(i,n){if(n){var r=this.getNodeObject(i.getAttribute("data-uid")),o=parseFloat(i.getAttribute("aria-level"));return R(this.getFields(this.fields,o,1).text,r)}return H("."+uf,i).textContent},e.prototype.getExpandEvent=function(i,n){var r=this.getNodeData(i);return{cancel:!1,isInteracted:!c(n),node:i,nodeData:r,event:n}},e.prototype.renderNodeTemplate=function(i,n,r){var o=this.nodeTemplateFn(i,this,"nodeTemplate"+r,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,n,this.root);o&&Le(o=Array.prototype.slice.call(o),n)},e.prototype.destroyTemplate=function(i){this.clearTemplate(["nodeTemplate"+i.getAttribute("data-uid")])},e.prototype.reRenderNodes=function(){this.updateListProp(this.fields),E.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",c(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},e.prototype.setCssClass=function(i,n){!c(i)&&""!==i&&A([this.element],i.split(" ")),!c(n)&&""!==n&&M([this.element],n.split(" "))},e.prototype.editingHandler=function(i){var n=i.target;if(!(!n||n.classList.contains(Vl)||n.classList.contains(si)||n.classList.contains(mt)||n.classList.contains(qn)||n.classList.contains(ix)||n.classList.contains(Yq))){var r=k(n,"."+mt);this.createTextbox(r,i)}},e.prototype.createTextbox=function(i,n){var r=this,o=H("."+nx,this.element);o&&o.blur();var a=H("."+uf,i);this.updateOldText(i);var l=this.createElement("input",{className:nx,attrs:{value:this.oldText}}),h=this.getEditEvent(i,null,l.outerHTML);this.trigger("nodeEditing",h,function(d){if(!d.cancel){var u="width:"+(a.offsetWidth+5)+"px";M([i],eN),c(r.nodeTemplateFn)||r.destroyTemplate(i),r.isReact?setTimeout(function(){r.renderTextBox(h,a,u)},5):r.renderTextBox(h,a,u)}})},e.prototype.renderTextBox=function(i,n,r){n.innerHTML=i.innerHtml;var o=H("."+nx,n);this.inputObj=ie.createInput({element:o,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",r),o.focus(),o.setSelectionRange(0,o.value.length),this.wireInputEvents(o)},e.prototype.updateOldText=function(i){var n=i.getAttribute("data-uid");this.editData=this.getNodeObject(n);var r=parseFloat(i.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,r,1),this.oldText=R(this.editFields.text,this.editData)},e.prototype.inputFocusOut=function(i){if(H("."+nx,this.element)){var n=i.target,r=n.value,o=k(n,"."+uf),a=k(n,"."+mt);z(this.inputObj.container),this.fields.dataSource instanceof he&&!this.isOffline?this.crudOperation("update",null,a,r,null,null,!0):this.appendNewText(a,o,r,!0)}},e.prototype.appendNewText=function(i,n,r,o){var a=this,l=this.getEditEvent(i,r,null);this.trigger("nodeEdited",l,function(h){a.updateText(i,n,r=h.cancel?h.oldText:h.newText,o),h.oldText!==r&&a.triggerEvent("nodeEdited",[a.getNode(i)])})},e.prototype.updateText=function(i,n,r,o){var a=ke(this.editFields.text,r,this.editData);if(c(this.nodeTemplateFn))this.enableHtmlSanitizer?n.innerText=r:n.innerHTML=r;else{n.innerText="";var l=i.getAttribute("data-uid");this.renderNodeTemplate(a,n,l),this.renderReactTemplates()}o&&(A([i],eN),i.focus(),C.add(i,"blur",this.focusOut,this),M([i],ff)),this.allowTextWrap&&this.calculateWrap(i)},e.prototype.getElement=function(i){return c(i)?null:"string"==typeof i?this.element.querySelector('[data-uid="'+i+'"]'):"object"==typeof i?y6(i):null},e.prototype.getId=function(i){return c(i)?null:"string"==typeof i?i:"object"==typeof i?y6(i).getAttribute("data-uid"):null},e.prototype.getEditEvent=function(i,n,r){return{cancel:!1,newText:n,node:i,nodeData:this.getNodeData(i),oldText:this.oldText,innerHtml:r}},e.prototype.getNodeObject=function(i){var n;if(c(i))return n;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,i);for(var r=0,o=this.treeData.length;r<o;r++){var a=R(this.fields.id,this.treeData[r]);if(!c(this.treeData[r])&&!c(a)&&a.toString()===i)return this.treeData[r]}return n},e.prototype.getChildNodeObject=function(i,n,r){var o;if(c(i))return o;for(var a=0,l=i.length;a<l;a++){var h=R(n.id,i[a]);if(i[a]&&h&&h.toString()===r)return i[a];if("string"!=typeof n.child||c(R(n.child,i[a]))){if(this.fields.dataSource instanceof he&&!c(R("child",i[a]))&&void 0!==(o=this.getChildNodeObject(R("child",i[a]),this.getChildMapper(n),r)))break}else{var d=R(n.child,i[a]);if(void 0!==(o=this.getChildNodeObject(d,this.getChildMapper(n),r)))break}}return o},e.prototype.setDragAndDrop=function(i){i&&!this.disabled?this.initializeDrag():this.destroyDrag()},e.prototype.initializeDrag=function(){var n,i=this,r=this;this.dragObj=new Sl(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+es,enableTapHold:!0,tapHoldThreshold:100,helper:function(o){i.dragTarget=o.sender.target;var a=k(i.dragTarget,"."+Vl),l=k(i.dragTarget,"."+es);if(i.dragLi=k(i.dragTarget,"."+mt),i.fullRowSelect&&!l&&i.dragTarget.classList.contains(fp)&&(l=i.dragTarget.nextElementSibling),!i.dragTarget||!o.element.isSameNode(a)||!l||i.dragTarget.classList.contains(Vl)||i.dragTarget.classList.contains(si)||i.dragTarget.classList.contains(mt)||i.dragLi.classList.contains("e-disable"))return!1;var h=l.cloneNode(!0);if(c(H("div."+qn,h))){var d=r.createElement("div",{className:qn+" "+Vi});h.insertBefore(d,h.children[0])}(n=r.createElement("div",{className:"e-drag-item "+Vl+" "+i.cssClass+" "+(i.enableRtl?"e-rtl":"")})).appendChild(h);var u=i.selectedNodes.length;if(u>1&&i.allowMultiSelection&&i.dragLi.classList.contains(da)){var f=r.createElement("span",{className:"e-drop-count",innerHTML:""+u});n.appendChild(f)}return document.body.appendChild(n),document.body.style.cursor="",i.dragData=i.getNodeData(i.dragLi),n},dragStart:function(o){M([i.element],tN);var l,a=k(o.target,".e-list-item");a&&(l=parseInt(a.getAttribute("aria-level"),10));var h=i.getDragEvent(o.event,i,null,o.target,null,n,l);h.draggedNode.classList.contains(eN)?(i.dragObj.intDestroy(o.event),i.dragCancelAction(n)):i.trigger("nodeDragStart",h,function(d){d.cancel?(i.dragObj.intDestroy(o.event),i.dragCancelAction(n)):i.dragStartAction=!0})},drag:function(o){i.dragObj.setProperties({cursorAt:{top:!c(o.event.targetTouches)||E.isDevice?60:-20}}),i.dragAction(o,n)},dragStop:function(o){A([i.element],tN),i.removeVirtualEle();var a=o.target,h=k(a,"."+Zq);(!a||!h)&&(z(o.helper),document.body.style.cursor="");var p,d=k(a,".e-list-item");d&&(p=parseInt(d.getAttribute("aria-level"),10));var u=i.getDragEvent(o.event,i,a,a,null,o.helper,p);u.preventTargetExpand=!1,i.trigger("nodeDragStop",u,function(f){i.dragParent=f.draggedParentNode,i.preventExpand=f.preventTargetExpand,f.cancel&&(o.helper.parentNode&&z(o.helper),document.body.style.cursor=""),i.dragStartAction=!1})}}),this.dropObj=new m1(this.element,{out:function(o){!c(o)&&!o.target.classList.contains(ab)&&i.dropObj.dragData.default&&i.dropObj.dragData.default.helper.classList.contains(Vl)&&(document.body.style.cursor="not-allowed")},over:function(o){document.body.style.cursor=""},drop:function(o){i.dropAction(o)}})},e.prototype.dragCancelAction=function(i){z(i),A([this.element],tN),this.dragStartAction=!1},e.prototype.dragAction=function(i,n){var r=k(i.target,"."+Zq),o=k(i.target,"."+es),a=H("div."+qn,n);A([a],[rx,lb,iN,nN]),this.removeVirtualEle(),document.body.style.cursor="";var l=i.target.classList;if(this.fullRowSelect&&!o&&!c(l)&&l.contains(fp)&&(o=i.target.nextElementSibling),r){var h=k(i.target,"."+mt),d=k(i.target,"."+_a),p=k(i.target,"."+$r),u=k(i.target,"."+Vi);if(!r.classList.contains(Vl)||o&&!h.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,h))if(this.hasTemplate&&h){var f=H(this.fullRowSelect?"."+fp:"."+es,h);i&&!u&&!p&&i.event.offsetY<7&&!d||u&&i.event.offsetY<5||p&&i.event.offsetX<3?this.appendIndicator(h,a,this.fullRowSelect?1:0):i&&!u&&!p&&!d&&f&&i.event.offsetY>f.offsetHeight-10||u&&i.event.offsetY>19||p&&i.event.offsetX>19?this.appendIndicator(h,a,this.fullRowSelect?2:1):M([a],rx)}else h&&i&&!u&&!p&&i.event.offsetY<7&&!d||u&&i.event.offsetY<5||p&&i.event.offsetX<3?this.appendIndicator(h,a,this.fullRowSelect?1:0):h&&i&&!u&&!p&&i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-10&&!d||u&&i.event.offsetY>19||p&&i.event.offsetX>19?this.appendIndicator(h,a,this.fullRowSelect?2:1):M([a],rx);else"LI"!==i.target.nodeName||h.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,h)?i.target.classList.contains(ab)?M([a],lb):M([a],iN):(M([a],lb),this.renderVirtualEle(i))}else M([a],nN),document.body.style.cursor="not-allowed";var y,m=k(i.target,".e-list-item");m&&(y=parseInt(m.getAttribute("aria-level"),10));var b=this.getDragEvent(i.event,this,i.target,i.target,null,n,y);b.dropIndicator&&A([a],b.dropIndicator),this.trigger("nodeDragging",b),b.dropIndicator&&M([a],b.dropIndicator)},e.prototype.appendIndicator=function(i,n,r){M([n],lb);var o=this.createElement("div",{className:ab});i.insertBefore(o,i.children[r])},e.prototype.dropAction=function(i){var o,a,h,n=i.event.offsetY,r=i.target,l=!1,d=[],p=[];h=i.dragData.draggable;for(var u=0;u<h.ej2_instances.length;u++)if(h.ej2_instances[u]instanceof t){o=h.ej2_instances[u];break}if(o&&o.dragTarget){var g=k(o.dragTarget,"."+mt),m=k(r,"."+mt);if(p.push(g),null==m&&r.classList.contains(Vl)&&(m=r.firstElementChild),z(i.droppedElement),document.body.style.cursor="",!m||m.isSameNode(g)||this.isDescendant(g,m))return void(this.fields.dataSource instanceof he||(this.preventExpand=!1));if(o.allowMultiSelection&&g.classList.contains(da)){var y=me("."+da,o.element);if(p=y,i.target.offsetHeight<=33&&n>i.target.offsetHeight-10&&n>6)for(var b=y.length-1;b>=0;b--)m.isSameNode(y[b])||this.isDescendant(y[b],m)||this.appendNode(r,y[b],m,i,o,n);else for(var w=0;w<y.length;w++)m.isSameNode(y[w])||this.isDescendant(y[w],m)||this.appendNode(r,y[w],m,i,o,n)}else this.appendNode(r,g,m,i,o,n);a=parseInt(g.getAttribute("aria-level"),10),l=!0}this.fields.dataSource instanceof he||(this.preventExpand=!1);for(var S=0;S<p.length;S++)d.push(this.getNode(p[S]));this.trigger("nodeDropped",this.getDragEvent(i.event,o,r,i.target,i.dragData.draggedElement,null,a,l)),o.element.id!==this.element.id&&(o.triggerEvent("nodeDropped",d),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent("nodeDropped",d)},e.prototype.appendNode=function(i,n,r,o,a,l){var h=k(i,"."+_a),d=k(o.target,"."+$r),p=k(o.target,"."+Vi);n.classList.contains("e-disable")||h||!(p&&o.event.offsetY<5||d&&o.event.offsetX<3||p&&o.event.offsetY>19||d&&o.event.offsetX>19||!p&&!d)?this.dropAsChildNode(n,r,a,null,o,l,!0):"LI"===i.nodeName?this.dropAsSiblingNode(n,r,o,a):i.firstElementChild&&i.classList.contains(Vl)?"UL"===i.firstElementChild.nodeName&&this.dropAsSiblingNode(n,r,o,a):i.classList.contains("e-icon-collapsible")||i.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(n,r,o,a):this.dropAsChildNode(n,r,a,null,o,l)},e.prototype.dropAsSiblingNode=function(i,n,r,o){var d,a=k(n,"."+si),l=k(i,"."+si),h=k(l,"."+mt);if(r.target.offsetHeight>0&&r.event.offsetY>r.target.offsetHeight-2?d=!1:r.event.offsetY<2?d=!0:(r.target.classList.contains("e-icon-expandable")||r.target.classList.contains("e-icon-collapsible"))&&(r.event.offsetY<5||r.event.offsetX<3?d=!0:(r.event.offsetY>15||r.event.offsetX>17)&&(d=!1)),r.target.classList.contains("e-icon-expandable")||r.target.classList.contains("e-icon-collapsible")){var p=r.target.closest("li");a.insertBefore(i,d?p:p.nextElementSibling)}else a.insertBefore(i,d?r.target:r.target.nextElementSibling);this.moveData(i,n,a,d,o),this.updateElement(l,h),this.updateAriaLevel(i),o.element.id===this.element.id?this.updateList():(o.updateInstance(),this.updateInstance())},e.prototype.dropAsChildNode=function(i,n,r,o,a,l,h){var f,d=k(i,"."+si),p=k(d,"."+mt),u=k(n,"."+si);if(a&&a.target&&(f=H(this.fullRowSelect?"."+fp:"."+es,n)),a&&l<7&&!h)u.insertBefore(i,n),this.moveData(i,n,u,!0,r);else if(a&&a.target.offsetHeight>0&&l>a.target.offsetHeight-10&&!h&&!this.hasTemplate)u.insertBefore(i,n.nextElementSibling),this.moveData(i,n,u,!1,r);else if(this.hasTemplate&&f&&l>f.offsetHeight-10&&!h)u.insertBefore(i,n.nextElementSibling),this.moveData(i,n,u,!1,r);else{var g=this.expandParent(n),m=g.childNodes[o];g.insertBefore(i,m),this.moveData(i,m,g,!0,r)}this.updateElement(d,p),this.updateAriaLevel(i),r.element.id===this.element.id?this.updateList():(r.updateInstance(),this.updateInstance())},e.prototype.moveData=function(i,n,r,o,a){var l=k(r,"."+mt),h=this.getId(i),d=a.updateChildField(a.treeData,a.fields,h,null,null,!0),p=this.getId(n),u=this.getDataPos(this.treeData,this.fields,p),f=this.getId(l);if(1===this.dataType){this.updateField(this.treeData,this.fields,f,"hasChildren",!0);var g=c(u)?this.treeData.length:o?u:u+1;if(c(f)&&!this.hasPid)delete d[0][this.fields.parentID];else{var m=this.isNumberTypeId?parseFloat(f):f;ke(this.fields.parentID,m,d[0])}if(this.treeData.splice(g,0,d[0]),a.element.id!==this.element.id){var y=a.removeChildNodes(h);g++;for(var b=0,w=y.length;b<w;b++)this.treeData.splice(g,0,y[b]),g++;a.groupedData=a.getGroupedData(a.treeData,a.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,f,d,o?u:u+1)},e.prototype.expandParent=function(i){var n=H("div."+qn,i);n&&n.classList.contains(Vi)&&!0!==this.preventExpand&&this.expandAction(i,n,null);var r=H("."+si,i);if(!0===this.preventExpand&&!r&&n&&this.renderChildNodes(i),!c(r=H("."+si,i))&&!0===this.preventExpand&&(r.style.display="none"),!c(r)&&!1===this.preventExpand&&(r.style.display="block"),c(r)&&!0===this.preventExpand&&(c(n)&&ot.generateIcon(this.createElement,i,Vi,this.listBaseOption),(o=H("div."+qn,i))&&o.classList.add("e-icon-expandable"),r=ot.generateUL(this.createElement,[],null,this.listBaseOption),i.appendChild(r),o?A([o],$r):ot.generateIcon(this.createElement,i,Vi,this.listBaseOption),i.setAttribute("aria-expanded","false"),r.style.display="none"),c(r)){var o,a=this.expandArgs;(c(a)||"nodeExpanding"!=a.name)&&this.trigger("nodeExpanding",this.getExpandEvent(i,null)),c(n)&&ot.generateIcon(this.createElement,i,$r,this.listBaseOption),(o=H("div."+qn,i))||(ot.generateIcon(this.createElement,i,$r,this.listBaseOption),o=H("div."+qn,i)),A([o],Vi),r=ot.generateUL(this.createElement,[],null,this.listBaseOption),i.appendChild(r),this.addExpand(i),this.trigger("nodeExpanded",this.getExpandEvent(i,null))}return r},e.prototype.updateElement=function(i,n){if(n&&0===i.childElementCount){var r=H("div."+qn,n);z(i),z(r);var o=this.getId(n);this.updateField(this.treeData,this.fields,o,"hasChildren",!1),this.removeExpand(n,!0)}},e.prototype.updateAriaLevel=function(i){var n=this.parents(i,"."+si).length;i.setAttribute("aria-level",""+n),this.updateChildAriaLevel(H("."+si,i),n+1)},e.prototype.updateChildAriaLevel=function(i,n){if(!c(i))for(var r=i.childNodes,o=0,a=r.length;o<a;o++){var l=r[o];l.setAttribute("aria-level",""+n),this.updateChildAriaLevel(H("."+si,l),n+1)}},e.prototype.renderVirtualEle=function(i){var n;i.event.offsetY>i.target.offsetHeight-2?n=!1:i.event.offsetY<2&&(n=!0);var r=this.createElement("div",{className:ab});i.target.insertBefore(r,i.target.children[this.fullRowSelect?n?1:2:n?0:1])},e.prototype.removeVirtualEle=function(){var i=H("."+ab);i&&z(i)},e.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},e.prototype.getDragEvent=function(i,n,r,o,a,l,h,d){var p=r?k(r,"."+mt):null,u=p?this.getNodeData(p):null,f=n?n.dragLi:a,g=n?n.dragData:null,m=r?this.parents(r,"."+mt):null,y=n.dragLi.parentElement,b=n.dragLi?k(y,"."+mt):null,w=null,S=null,I=[lb,rx,iN,nN],x=null,T=!0===d?f:p,L=T?k(T,".e-list-parent"):null,N=0,O=null;if(b=n.dragLi&&null===b?k(y,"."+Vl):b,b=!0===d?this.dragParent:b,l)for(;N<4;){if(H("."+qn,l).classList.contains(I[N])){x=I[N];break}N++}if(L){var _=0;for(N=0;N<L.childElementCount;N++){if(_=!0!==d&&L.children[N]===f&&p!==f?++_:_,!0!==d&&L.children[N].classList.contains("e-hover")){S=i.offsetY>=23?N+1:N;break}if(L.children[N]===T){S=N;break}}S=0!==_?--S:S,O="e-drop-in"==x?"Inside":i.offsetY<7?"Before":"After"}if(r&&(w=0===m.length?null:r.classList.contains(mt)?m[0]:m[1]),p===f&&(w=p),r&&o.offsetHeight<=33&&i.offsetY<o.offsetHeight-10&&i.offsetY>6&&(w=p,!0!==d)){h=++h;var B=w?H(".e-list-parent",w):null;if(S=B?B.children.length:0,!(this.fields.dataSource instanceof he)&&null===B&&w){var q=w.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,w.getAttribute("data-uid").toString()):null;S=q?q.length:0}}return{cancel:!1,clonedNode:l,event:i,draggedNode:f,draggedNodeData:g,droppedNode:p,droppedNodeData:u,dropIndex:S,dropLevel:h,draggedParentNode:b,dropTarget:w,dropIndicator:x,target:o,position:O}},e.prototype.addFullRow=function(i){var n=this.liList.length;if(i)for(var r=0;r<n;r++)this.createFullRow(this.liList[r]);else for(r=0;r<n;r++)z(H("."+fp,this.liList[r]))},e.prototype.createFullRow=function(i){var n=this.createElement("div",{className:fp});i.insertBefore(n,i.childNodes[0])},e.prototype.addMultiSelect=function(i){if(i)for(var r=0,o=me("."+mt+':not([aria-selected="true"])',this.element);r<o.length;r++)o[r].setAttribute("aria-selected","false");else for(var l=0,h=me("."+mt+'[aria-selected="false"]',this.element);l<h.length;l++)h[l].removeAttribute("aria-selected")},e.prototype.collapseByLevel=function(i,n,r){if(n>0&&!c(i))for(var o=this.getVisibleNodes(r,i.childNodes),a=0,l=o.length;a<l;a++){var h=o[a],d=H("."+$r,H("."+es,h));c(d)||this.collapseNode(h,d,null),this.collapseByLevel(H("."+si,h),n-1,r)}},e.prototype.collapseAllNodes=function(i){for(var n=this.getVisibleNodes(i,me("."+$r,this.element)),r=0,o=n.length;r<o;r++){var a=n[r],l=k(a,"."+mt);this.collapseNode(l,a,null)}},e.prototype.expandByLevel=function(i,n,r){if(n>0&&!c(i))for(var o=this.getVisibleNodes(r,i.childNodes),a=0,l=o.length;a<l;a++){var h=o[a],d=H("."+Vi,H("."+es,h));c(d)||this.expandAction(h,d,null),this.expandByLevel(H("."+si,h),n-1,r)}},e.prototype.expandAllNodes=function(i){for(var n=this.getVisibleNodes(i,me("."+Vi,this.element)),r=0,o=n.length;r<o;r++){var a=n[r],l=k(a,"."+mt);this.expandAction(l,a,null,!0)}},e.prototype.getVisibleNodes=function(i,n){var r=Array.prototype.slice.call(n);if(i)for(var o=0;o<r.length;o++)wn(r[o])||(r.splice(o,1),o--);return r},e.prototype.removeNode=function(i){var n=k(i,"."+si),r=k(n,"."+mt);c(this.nodeTemplateFn)||this.destroyTemplate(i),z(i),this.updateElement(n,r),this.removeData(i)},e.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},e.prototype.updateList=function(){this.liList=Array.prototype.slice.call(me("."+mt,this.element))},e.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var i=me("."+da,this.element);this.selectGivenNodes(i)},e.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var i=me('[aria-expanded="true"]',this.element),n=0,r=i.length;n<r;n++)this.addExpand(i[n])},e.prototype.removeData=function(i){if(1===this.dataType){var n=new he(this.treeData),r=this.getId(i),o={},a=this.isNumberTypeId?parseFloat(r):r;o[this.fields.id]=a,n.remove(this.fields.id,o),this.removeChildNodes(r)}else r=this.getId(i),this.updateChildField(this.treeData,this.fields,r,null,null,!0)},e.prototype.removeChildNodes=function(i){var n=this.getChildGroup(this.groupedData,i,!1),r=[];if(n)for(var o=0,a=n.length;o<a;o++){var l=new he(this.treeData),h=R(this.fields.id,n[o]).toString(),d={},p=this.isNumberTypeId?parseFloat(h):h;d[this.fields.id]=p;var u=l.remove(this.fields.id,d);r.push(u[0]),this.removeChildNodes(h)}return r},e.prototype.doGivenAction=function(i,n,r){for(var o=0,a=i.length;o<a;o++){var l=this.getElement(i[o]);if(!c(l)){var h=H("."+n,H("."+es,l));c(h)||(r?this.expandAction(l,h,null):this.collapseNode(l,h,null))}}},e.prototype.addGivenNodes=function(i,n,r,o,a){if(0!==i.length){var l=this.getSortedData(i),h=n?parseFloat(n.getAttribute("aria-level"))+1:1;o&&this.updateMapper(h);var u,f,g,d=ot.createListItemFromJson(this.createElement,l,this.listBaseOption,h),p=this.getId(n);if(c(n)||(f=H("div."+qn,n)),1===this.dataType&&f&&f.classList.contains(Vi)&&!c(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),1!==this.dataType&&(this.addChildData(this.treeData,this.fields,p,i,r),this.isFirstRender=!1),u=(g=a||(n?this.expandParent(n):H("."+si,this.element))).childNodes[r],!this.isFirstRender||1===this.dataType){var m=this.expandArgs;if(u||"None"===this.sortOrder){for(var y=0;y<d.length;y++)g.insertBefore(d[y],u);1!==this.dataType||c(n)||c(this.element.offsetParent)||this.element.offsetParent.parentElement.classList.contains("e-filemanager")||(this.preventExpand=!1,(b=H("div."+qn,n))&&b.classList.contains(Vi)&&(c(m)||"nodeExpanding"!=m.name)&&this.expandAction(n,b,null))}if(!u&&("Ascending"===this.sortOrder||"Descending"===this.sortOrder))if(0===g.childNodes.length){for(y=0;y<d.length;y++)g.insertBefore(d[y],u);var b;1!==this.dataType||c(n)||c(this.element.offsetParent)||this.element.offsetParent.parentElement.classList.contains("e-filemanager")||(this.preventExpand=!1,(b=H("div."+qn,n))&&b.classList.contains(Vi)&&(c(m)||"nodeExpanding"!=m.name)&&this.expandAction(n,b,null))}else{var w=g.childNodes;for(y=0;y<d.length;y++)for(var S=0;S<w.length;S++){if("Ascending"===this.sortOrder?w[S].textContent.toUpperCase()>d[y].innerText.toUpperCase():w[S].textContent.toUpperCase()<d[y].innerText.toUpperCase()){g.insertBefore(d[y],w[S]);break}g.insertBefore(d[y],w[w.length])}}}if(1===this.dataType){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);var x=this.getId(u),T=c(x)?this.treeData.length:this.getDataPos(this.treeData,this.fields,x);for(S=0;S<i.length;S++){if(!c(p)){var L=this.isNumberTypeId?parseFloat(p):p;ke(this.fields.parentID,L,i[S])}this.treeData.splice(T,0,i[S]),T++}}this.finalizeNode(g)}},e.prototype.updateMapper=function(i){var n=1===i?this.fields:this.getChildFields(this.fields,i-1,1);this.updateListProp(n)},e.prototype.updateListProp=function(i){var n=this.getActualProperties(i);this.listBaseOption.fields=n,this.listBaseOption.fields.url=n.hasOwnProperty("navigateUrl")?n.navigateUrl:"navigateUrl"},e.prototype.getDataPos=function(i,n,r){for(var o=null,a=0,l=i.length;a<l;a++){var h=R(n.id,i[a]);if(i[a]&&h&&h.toString()===r)return a;if("string"!=typeof n.child||c(R(n.child,i[a]))){if(this.fields.dataSource instanceof he&&!c(R("child",i[a]))){var p=R("child",i[a]);if(null!==(o=this.getDataPos(p,this.getChildMapper(n),r)))break}}else{var d=R(n.child,i[a]);if(null!==(o=this.getDataPos(d,this.getChildMapper(n),r)))break}}return o},e.prototype.addChildData=function(i,n,r,o,a){var l;if(c(r)){a=c(a)?i.length:a;for(var h=0,d=o.length;h<d;h++)i.splice(a,0,o[h]),a++;return l}for(var p=0,u=i.length;p<u;p++){var f=R(n.id,i[p]);if(i[p]&&f&&f.toString()===r){if("string"==typeof n.child&&i[p].hasOwnProperty(n.child)&&null!==i[p][n.child]||this.fields.dataSource instanceof he&&i[p].hasOwnProperty("child"))for(c(m=R("string"==typeof n.child?n.child:"child",i[p]))&&(m=[]),a=c(a)?m.length:a,h=0,d=o.length;h<d;h++)m.splice(a,0,o[h]),a++;else i[p]["string"==typeof n.child?n.child:"child"]=o;return!0}if("string"!=typeof n.child||c(R(n.child,i[p]))){if(this.fields.dataSource instanceof he&&!c(R("child",i[p]))){var m=R("child",i[p]);if(void 0!==(l=this.addChildData(m,this.getChildMapper(n),r,o,a)))break}}else{var y=R(n.child,i[p]);if(void 0!==(l=this.addChildData(y,this.getChildMapper(n),r,o,a)))break}}return l},e.prototype.doDisableAction=function(i){var n=this.nodeType(i),r=this.checkValidId(n);this.validArr=[];for(var o=0,a=r.length;o<a;o++){var l=r[o][this.fields.id].toString();l&&-1===this.disableNode.indexOf(l)&&this.disableNode.push(l);var h=this.getElement(l);h&&(h.setAttribute("aria-disabled","true"),M([h],Jq))}},e.prototype.doEnableAction=function(i){for(var n=this.nodeType(i),r=0,o=n.length;r<o;r++){var a=this.getElement(n[r]),l=n[r];l&&-1!==this.disableNode.indexOf(l)&&this.disableNode.splice(this.disableNode.indexOf(l),1),a&&(a.removeAttribute("aria-disabled"),A([a],Jq))}},e.prototype.nodeType=function(i){for(var n=[],r=0,o=i.length;r<o;r++){var a=void 0;"string"==typeof i[r]?a=i[r]?i[r].toString():null:"object"==typeof i[r]&&(a=i[r]?i[r].getAttribute("data-uid").toString():null),-1==n.indexOf(a)&&n.push(a)}return n},e.prototype.checkValidId=function(i){var n=this;if(1===this.dataType)this.validArr=this.treeData.filter(function(l){return-1!==i.indexOf(l[n.fields.id]?l[n.fields.id].toString():null)});else if(2===this.dataType)for(var r=0;r<this.treeData.length;r++){var o=this.treeData[r][this.fields.id]?this.treeData[r][this.fields.id].toString():null;-1!==i.indexOf(o)&&this.validArr.push(this.treeData[r]);var a=R(this.fields.child.toString(),this.treeData[r]);a&&this.filterNestedChild(a,i)}return this.validArr},e.prototype.filterNestedChild=function(i,n){for(var r=0;r<i.length;r++){var o=i[r][this.fields.id]?i[r][this.fields.id].toString():null;-1!==n.indexOf(o)&&this.validArr.push(i[r]);var a=R(this.fields.child.toString(),i[r]);a&&this.filterNestedChild(a,n)}},e.prototype.setTouchClass=function(){var i=k(this.element,".e-bigger");this.touchClass=c(i)?"":"e-small"},e.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var i=this.selectedNodes,n=0,r=i.length;n<r;n++)this.updateField(this.treeData,this.fields,i[n],"selected",!0);for(var o=this.expandedNodes,a=0,l=o.length;a<l;a++)this.updateField(this.treeData,this.fields,o[a],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var h=this.checkedNodes,d=0;for(l=h.length;d<l;d++)this.updateField(this.treeData,this.fields,h[d],"isChecked",!0)}},e.prototype.removeField=function(i,n,r){if(!c(i)&&!c(n))for(var o=0,a=i.length;o<a;o++){for(var l=0;l<r.length;l++){var h=this.getMapperProp(n,r[l]);c(i[o][h])||delete i[o][h]}"string"!=typeof n.child||c(R(n.child,i[o]))?this.fields.dataSource instanceof he&&!c(R("child",i[o]))&&this.removeField(R("child",i[o]),this.getChildMapper(n),r):this.removeField(R(n.child,i[o]),this.getChildMapper(n),r)}},e.prototype.getMapperProp=function(i,n){switch(n){case"selected":return c(i.selected)?"selected":i.selected;case"expanded":return c(i.expanded)?"expanded":i.expanded;case"isChecked":return c(i.isChecked)?"isChecked":i.isChecked;case"hasChildren":return c(i.hasChildren)?"hasChildren":i.hasChildren;default:return n}},e.prototype.updateField=function(i,n,r,o,a){if(!c(r))if(1===this.dataType){var l=this.isNumberTypeId?parseFloat(r):r,h=new he(this.treeData).executeLocal((new Me).where(n.id,"equal",l,!1));ke(this.getMapperProp(n,o),a,h[0])}else this.updateChildField(i,n,r,o,a)},e.prototype.updateChildField=function(i,n,r,o,a,l){var h;if(c(i))return h;for(var d=0,p=i.length;d<p;d++){var u=R(n.id,i[d]);if(i[d]&&u&&u.toString()===r)return l?h=i.splice(d,1):(ke(this.getMapperProp(n,o),a,i[d]),h=[]),h;if("string"!=typeof n.child||c(R(n.child,i[d]))){if(this.fields.dataSource instanceof he&&!c(R("child",i[d]))){var g=R("child",i[d]);if(void 0!==(h=this.updateChildField(g,this.getChildMapper(n),r,o,a,l)))break}}else{var f=R(n.child,i[d]);if(void 0!==(h=this.updateChildField(f,this.getChildMapper(n),r,o,a,l)))break}}return h},e.prototype.triggerEvent=function(i,n){if(this.renderReactTemplates(),"addNodes"===i){for(var r=[],o=0;o<n.length;o++)r.push(this.getNode(this.getElement(c(n[o][this.fields.id])?R(this.fields.id,n[o]).toString():null)));n=r}this.trigger("dataSourceChanged",{data:this.treeData,action:i,nodeData:n})},e.prototype.wireInputEvents=function(i){C.add(i,"blur",this.inputFocusOut,this)},e.prototype.wireEditingEvents=function(i){var n=this;if(i&&!this.disabled){var r=this;this.touchEditObj=new hr(this.element,{tap:function(o){n.isDoubleTapped(o)&&2===o.tapCount&&(o.originalEvent.preventDefault(),r.editingHandler(o.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},e.prototype.wireClickEvent=function(i){if(i){var n=this;this.touchClickObj=new hr(this.element,{tap:function(r){n.clickHandler(r)}})}else this.touchClickObj&&this.touchClickObj.destroy()},e.prototype.wireExpandOnEvent=function(i){var n=this;if(i){var r=this;this.touchExpandObj=new hr(this.element,{tap:function(o){("Click"===n.expandOnType||"DblClick"===n.expandOnType&&n.isDoubleTapped(o)&&2===o.tapCount)&&3!==o.originalEvent.which&&r.expandHandler(o)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},e.prototype.mouseDownHandler=function(i){this.mouseDownStatus=!0,(i.shiftKey||i.ctrlKey)&&i.preventDefault(),i.ctrlKey&&this.allowMultiSelection&&C.add(this.element,"contextmenu",this.preventContextMenu,this)},e.prototype.preventContextMenu=function(i){i.preventDefault()},e.prototype.wireEvents=function(){C.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),C.add(this.element,"mouseover",this.onMouseOver,this),C.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new St(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.unWireEvents=function(){C.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),C.remove(this.element,"mouseover",this.onMouseOver),C.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},e.prototype.parents=function(i,n){for(var r=[],o=i.parentNode;!c(o);)Uu(o,n)&&r.push(o),o=o.parentNode;return r},e.prototype.isDoubleTapped=function(i){var r,n=i.originalEvent.target;return n&&i.tapCount&&(1===i.tapCount?this.firstTap=k(n,"."+mt):2===i.tapCount&&(r=k(n,"."+mt))),this.firstTap===r},e.prototype.isDescendant=function(i,n){for(var r=n.parentNode;!c(r);){if(r===i)return!0;r=r.parentNode}return!1},e.prototype.showSpinner=function(i){M([i],$P),ao({target:i,width:E.isDevice?16:14},this.createElement),En(i)},e.prototype.hideSpinner=function(i){pr(i),i.innerHTML="",A([i],$P)},e.prototype.setCheckedNodes=function(i){i=JSON.parse(JSON.stringify(i)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(i),i.length>0&&this.checkAll(i)},e.prototype.setValidCheckedNode=function(i){if(1===this.dataType){var n=this.fields,r=new he(this.treeData).executeLocal((new Me).where(n.id,"equal",i,!0));if(r[0]&&(this.setChildCheckState(r,i,r[0]),this.autoCheck)){for(var o=r[0][this.fields.parentID]?r[0][this.fields.parentID].toString():null,a=this.getChildNodes(this.treeData,o),l=0,h=0;h<a.length;h++){var d=a[h][this.fields.id].toString();-1!==this.checkedNodes.indexOf(d)&&l++}l===a.length&&-1===this.checkedNodes.indexOf(o)&&o&&this.checkedNodes.push(o)}}else if(2===this.dataType)for(var p=0;p<this.treeData.length;p++){if((this.treeData[p][this.fields.id]?this.treeData[p][this.fields.id].toString():"")===i&&-1===this.checkedNodes.indexOf(i)){this.checkedNodes.push(i);break}var f=R(this.fields.child.toString(),this.treeData[p]);f&&this.setChildCheckState(f,i,this.treeData[p])}},e.prototype.setChildCheckState=function(i,n,r){var o,a=0;if(1===this.dataType){r&&(o=r[this.fields.id]?r[this.fields.id].toString():null);for(var l=0;l<i.length;l++){var h=i[l][this.fields.id]?i[l][this.fields.id].toString():null;r&&o&&this.autoCheck&&-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(h)&&this.checkedNodes.push(h),h===n&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n),(d=this.getChildNodes(this.treeData,h))&&this.setChildCheckState(d,n,r)}}else for(r&&(o=r[this.fields.id]?r[this.fields.id].toString():""),l=0;l<i.length;l++){var d,p=i[l][this.fields.id]?i[l][this.fields.id].toString():"";r&&o&&this.autoCheck&&-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(p)&&this.checkedNodes.push(p),p===n&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n),(d=R(this.fields.child.toString(),i[l]))&&this.setChildCheckState(d,n,i[l]),-1!==this.checkedNodes.indexOf(p)&&this.autoCheck&&a++,a===i.length&&-1===this.checkedNodes.indexOf(o)&&this.autoCheck&&this.checkedNodes.push(o)}},e.prototype.setIndeterminate=function(i){for(var n=0;n<i.length;n++)this.setValidCheckedNode(i[n])},e.prototype.updatePosition=function(i,n,r,o){if(1===this.dataType){var a=this.getDataPos(this.treeData,this.fields,i);if(this.treeData.splice(a,1,n),r){this.removeChildNodes(i);for(var l=0;l<o.length;l++)this.treeData.splice(a,0,o[l]),a++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,i,[n],void 0)},e.prototype.updateChildPosition=function(i,n,r,o,a){for(var l,h=0,d=i.length;h<d;h++){var p=R(n.id,i[h]);if(i[h]&&p&&p.toString()===r)return i[h]=o[0],!0;if("string"!=typeof n.child||c(R(n.child,i[h]))){if(this.fields.dataSource instanceof he&&!c(R("child",i[h]))){var f=R("child",i[h]);if(void 0!==(l=this.updateChildPosition(f,this.getChildMapper(n),r,o,a)))break}}else{var u=R(n.child,i[h]);if(void 0!==(l=this.updateChildPosition(u,this.getChildMapper(n),r,o,a)))break}}return l},e.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},e.prototype.crudOperation=function(i,n,r,o,a,l,h){var m,d=this,p=this.fields.dataSource,u=[],f=this.getQuery(this.fields),g=this.fields.id,y={addedRecords:[],deletedRecords:[],changedRecords:[]},b=[];n?b=this.nodeType(n):r&&("string"==typeof r?b[0]=r.toString():"object"==typeof r&&(b[0]=r.getAttribute("data-uid").toString()));for(var w=0,S=b.length;w<S;w++)if(!c(this.getElement(b[w]))){var x=this.getNodeObject(b[w]);u.push(x)}switch(i){case"delete":1==n.length?m=p.remove(g,u[0],f.fromTable,f):(y.deletedRecords=u,m=p.saveChanges(y,g,f.fromTable,f)),m.then(function(L){return d.deleteSuccess(b)}).catch(function(L){return d.dmFailure(L)});break;case"update":u[0][this.fields.text]=o,(m=p.update(g,u[0],f.fromTable,f)).then(function(L){return d.editSucess(r,o,h)}).catch(function(L){return d.dmFailure(L,r,h)});break;case"insert":if(1==a.length)m=p.insert(a[0],f.fromTable,f);else{var T=[];for(w=0,S=a.length;w<S;w++)T.push(a[w]);y.addedRecords=T,m=p.saveChanges(y,g,f.fromTable,f)}m.then(function(L){var N=d.getElement(r);d.addSuccess(a,N,l),d.preventExpand=!1}).catch(function(L){return d.dmFailure(L)})}},e.prototype.deleteSuccess=function(i){for(var n=[],r=0,o=i.length;r<o;r++){var a=this.getElement(i[r]);n.push(this.getNode(a)),!c(a)&&this.removeNode(a)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent("removeNode",n)},e.prototype.editSucess=function(i,n,r){var o=this.getElement(i),a=H("."+uf,o);this.appendNewText(o,a,n,r)},e.prototype.addSuccess=function(i,n,r){var o,a=n?n.querySelector("."+qn):null,l=this;n&&a&&a.classList.contains(Vi)&&null===n.querySelector("."+si)?l.renderChildNodes(n,null,function(){o=n.querySelector("."+si),l.addGivenNodes(i,n,r,!0,o),l.triggerEvent("addNodes",i)}):(this.addGivenNodes(i,n,r,!0),this.triggerEvent("addNodes",i))},e.prototype.dmFailure=function(i,n,r){n&&this.updatePreviousText(n,r),this.trigger("actionFailure",{error:i})},e.prototype.updatePreviousText=function(i,n){var r=this.getElement(i),o=H("."+uf,r);this.updateText(r,o,this.oldText,n)},e.prototype.getHierarchicalParentId=function(i,n,r){var o=this,a=n.findIndex(function(d){return d[o.fields.id]&&d[o.fields.id].toString()===i});if(-1==a)for(var l=0;l<n.length;l++){var h=R(this.fields.child.toString(),n[l]);if(!c(h)){if(-1!=(a=h.findIndex(function(d){return d[o.fields.id]&&d[o.fields.id].toString()===i}))){r.push(n[l][this.fields.id].toString()),this.getHierarchicalParentId(n[l][this.fields.id].toString(),this.treeData,r);break}this.getHierarchicalParentId(i,h,r)}}return r},e.prototype.onPropertyChanged=function(i,n){for(var r=0,o=Object.keys(i);r<o.length;r++)switch(o[r]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var l=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(l,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=n.checkedNodes,this.setCheckedNodes(i.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=i.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(n.cssClass,i.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:c(i.expandedNodes)?[]:i.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"!==this.expandOnType&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var h=this.element.querySelectorAll("li"),d=0;d<h.length;)"true"!==h[d].getAttribute("aria-expanded")&&this.renderChildNodes(h[d],!0,null,!0),d++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:i.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:i.fullRowNavigable},!0),this.listBaseOption.itemNavigable=i.fullRowNavigable,this.reRenderNodes()}},e.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),s.prototype.destroy.call(this)},e.prototype.addNodes=function(i,n,r,o){if(!c(i)){i=JSON.parse(JSON.stringify(i));var a=this.getElement(n);if(this.preventExpand=o,this.fields.dataSource instanceof he)this.isOffline?this.addSuccess(i,a,r):this.crudOperation("insert",null,n,null,i,r,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(i,a,r);else{if(a)this.addGivenNodes(i,a,r);else{i=this.getSortedData(i);for(var l=0;l<i.length;l++){var h=R(this.fields.parentID,i[l]);a=h&&this.getElement(h.toString()),this.addGivenNodes([i[l]],a,r)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&a&&this.ensureParentCheckState(a),this.fields.dataSource instanceof he||(this.preventExpand=!1,this.triggerEvent("addNodes",i))}},e.prototype.beginEdit=function(i){var n=this.getElement(i);c(n)||this.disabled||this.createTextbox(n,null)},e.prototype.checkAll=function(i){this.showCheckBox&&this.doCheckBoxAction(i,!0)},e.prototype.collapseAll=function(i,n,r){c(i)?n>0?this.collapseByLevel(H("."+si,this.element),n,r):this.collapseAllNodes(r):this.doGivenAction(i,$r,!1)},e.prototype.disableNodes=function(i){c(i)||this.doDisableAction(i)},e.prototype.enableNodes=function(i){c(i)||this.doEnableAction(i)},e.prototype.ensureVisible=function(i){var n=[];if(1==this.dataType)for(var r=this.getTreeData(i);0!=r.length&&!c(r[0][this.fields.parentID]);)n.push(r[0][this.fields.parentID].toString()),r=this.getTreeData(r[0][this.fields.parentID].toString());else 2==this.dataType&&(n=this.getHierarchicalParentId(i,this.treeData,n).reverse());this.expandAll(n);var o=this.getElement(i);if(!c(o)){if("object"==typeof i){var a=this.parents(o,"."+mt);this.expandAll(a)}setTimeout(function(){o.scrollIntoView({behavior:"smooth"})},450)}},e.prototype.expandAll=function(i,n,r){c(i)?n>0?this.expandByLevel(H("."+si,this.element),n,r):this.expandAllNodes(r):this.doGivenAction(i,Vi,!0)},e.prototype.getAllCheckedNodes=function(){return this.checkedNodes},e.prototype.getDisabledNodes=function(){return this.disableNode},e.prototype.getNode=function(i){var n=this.getElement(i);return this.getNodeData(n,!0)},e.prototype.getTreeData=function(i){var n=this.getId(i);if(this.updatePersistProp(),c(n))return this.treeData;var r=this.getNodeObject(n);return c(r)?[]:[r]},e.prototype.moveNodes=function(i,n,r,o){var a=this.getElement(n),l=[];if(!c(a)){for(var h=0;h<i.length;h++){var d=this.getElement(i[h]);l.push(this.getNode(d)),!(c(d)||a.isSameNode(d)||this.isDescendant(d,a))&&(this.preventExpand=o,this.dropAsChildNode(d,a,this,r))}this.fields.dataSource instanceof he||(this.preventExpand=!1),this.triggerEvent("moveNodes",l)}},e.prototype.refreshNode=function(i,n){if(!c(i)&&!c(n)){var r,o=!1;1==this.dataType&&n.length>1?o=!0:2==this.dataType&&1===n.length&&(c(R(this.fields.child.toString(),n[0]))||(o=!0));var h,d,l=this.getElement(i);if(r=l?l.getAttribute("data-uid"):i?i.toString():null,this.refreshData=this.getNodeObject(r),n=JSON.parse(JSON.stringify(n)),1==this.dataType&&o){for(var p=0;p<n.length;p++)if(c(n[p][this.fields.parentID])){d=n[p],n.splice(p,1);break}h=Q({},this.refreshData,d)}else h=Q({},this.refreshData,n[0]);if(c(l))return void this.updatePosition(r,h,o,n);this.isRefreshed=!0;var u=parseFloat(l.getAttribute("aria-level")),f=ot.createListItemFromJson(this.createElement,[h],this.listBaseOption,u),g=H("."+si,l),m=R(this.fields.child.toString(),h);if(o&&g||o&&!c(m)){var y=l.parentElement,b=Array.prototype.indexOf.call(y.childNodes,l);le(l),y.insertBefore(f[0],y.childNodes[b]),this.updatePosition(r,h,o,n),o&&g&&this.expandAll([r])}else{var w=H("."+es,l),S=H("."+es,f[0]),I=H("div."+qn,w),x=H("div."+qn,S);I&&x&&(x.classList.contains(Vi)&&I.classList.contains($r)?(A([x],Vi),M([x],$r)):x.classList.contains($r)&&I.classList.contains(Vi)?(A([x],$r),M([x],Vi)):I.classList.contains("interaction")&&M([x],"interaction")),le(w);var T=H("."+fp,l);T.parentNode.insertBefore(S,T.nextSibling),this.updatePosition(r,h,o,n)}if(l=this.getElement(i),h[this.fields.tooltip]&&l.setAttribute("title",h[this.fields.tooltip]),h.hasOwnProperty(this.fields.htmlAttributes)&&h[this.fields.htmlAttributes]){var L={};zn(L,h[this.fields.htmlAttributes]),L.class?(M([l],L.class.split(" ")),delete L.class):re(l,L)}-1!==this.selectedNodes.indexOf(r)&&(l.setAttribute("aria-selected","true"),M([l],da)),this.isRefreshed=!1,this.triggerEvent("refreshNode",[this.getNode(l)])}},e.prototype.removeNodes=function(i){c(i)||(this.fields.dataSource instanceof he&&!this.isOffline?this.crudOperation("delete",i):this.deleteSuccess(i))},e.prototype.updateNode=function(i,n){var r=this;if(!c(i)&&!c(n)&&this.allowEditing){var o=this.getElement(i);if(!c(o)){var a=H("."+uf,o);this.updateOldText(o);var l=this.getEditEvent(o,null,null);this.trigger("nodeEditing",l,function(h){h.cancel||(r.fields.dataSource instanceof he&&!r.isOffline?r.crudOperation("update",null,i,n,null,null,!1):r.appendNewText(o,a,n,!1))})}}},e.prototype.uncheckAll=function(i){this.showCheckBox&&this.doCheckBoxAction(i,!1)},it([v(!1)],e.prototype,"allowDragAndDrop",void 0),it([v(!1)],e.prototype,"allowEditing",void 0),it([v(!1)],e.prototype,"allowMultiSelection",void 0),it([v(!1)],e.prototype,"allowTextWrap",void 0),it([Fe({},Vye)],e.prototype,"animation",void 0),it([v()],e.prototype,"checkedNodes",void 0),it([v("")],e.prototype,"cssClass",void 0),it([v(!1)],e.prototype,"disabled",void 0),it([v(null)],e.prototype,"dragArea",void 0),it([v(!1)],e.prototype,"enableHtmlSanitizer",void 0),it([v(!1)],e.prototype,"enablePersistence",void 0),it([v()],e.prototype,"expandedNodes",void 0),it([v("Auto")],e.prototype,"expandOn",void 0),it([Fe({},Lye)],e.prototype,"fields",void 0),it([v(!0)],e.prototype,"fullRowSelect",void 0),it([v(!0)],e.prototype,"loadOnDemand",void 0),it([v()],e.prototype,"locale",void 0),it([v()],e.prototype,"nodeTemplate",void 0),it([v()],e.prototype,"selectedNodes",void 0),it([v("None")],e.prototype,"sortOrder",void 0),it([v(!1)],e.prototype,"showCheckBox",void 0),it([v(!0)],e.prototype,"autoCheck",void 0),it([v(!1)],e.prototype,"fullRowNavigable",void 0),it([V()],e.prototype,"actionFailure",void 0),it([V()],e.prototype,"created",void 0),it([V()],e.prototype,"dataBound",void 0),it([V()],e.prototype,"dataSourceChanged",void 0),it([V()],e.prototype,"drawNode",void 0),it([V()],e.prototype,"destroyed",void 0),it([V()],e.prototype,"keyPress",void 0),it([V()],e.prototype,"nodeChecked",void 0),it([V()],e.prototype,"nodeChecking",void 0),it([V()],e.prototype,"nodeClicked",void 0),it([V()],e.prototype,"nodeCollapsed",void 0),it([V()],e.prototype,"nodeCollapsing",void 0),it([V()],e.prototype,"nodeDragging",void 0),it([V()],e.prototype,"nodeDragStart",void 0),it([V()],e.prototype,"nodeDragStop",void 0),it([V()],e.prototype,"nodeDropped",void 0),it([V()],e.prototype,"nodeEdited",void 0),it([V()],e.prototype,"nodeEditing",void 0),it([V()],e.prototype,"nodeExpanded",void 0),it([V()],e.prototype,"nodeExpanding",void 0),it([V()],e.prototype,"nodeSelected",void 0),it([V()],e.prototype,"nodeSelecting",void 0),t=it([et],e)}(Lt),hd="",SN="",vp=[],vx="";function yf(s,e,t,i,n,r,o){var a=e;i=i??!0;var l={item:null,index:null};if(s&&s.length){var h=s.length,d=i?s.toLocaleLowerCase():s;d=function Xye(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(d);for(var p=function(m,y){var S,b=y[m],w=void 0;if(e&&n){var I=b,x=r.text.split(".");n.filter(function(T){Array.prototype.slice.call(x).forEach(function(L){("object"===o&&!T.isHeader&&-1!==I.textContent.toString().indexOf(T[L])&&I.getAttribute("data-value")===T[r.value].toString()||"string"===o&&-1!==I.textContent.toString().indexOf(T))&&(S="object"===o?T[L]:T)})})}if(w=n&&S?(i?S.toLocaleLowerCase():S).replace(/^\s+|\s+$/g,""):(i?b.textContent.toLocaleLowerCase():b.textContent).replace(/^\s+|\s+$/g,""),"Equal"===t&&w===d||"StartsWith"===t&&w.substr(0,h)===d||"EndsWith"===t&&w.substr(w.length-d.length)===d||"Contains"===t&&new RegExp(d,"g").test(w))return l.item=b,l.index=m,{value:{item:b,index:m}}},u=0,f=a;u<f.length;u++){var g=p(u,f);if("object"==typeof g)return g.value}return l}return l}var kW=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),An=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},yx=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return kW(e,s),An([v()],e.prototype,"text",void 0),An([v()],e.prototype,"value",void 0),An([v()],e.prototype,"iconCss",void 0),An([v()],e.prototype,"groupBy",void 0),An([v()],e.prototype,"htmlAttributes",void 0),e}(ce),pe_root="e-dropdownbase",pe_li="e-list-item",pe_group="e-list-group-item",bx=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.preventChange=!1,n.isAngular=!1,n.isPreventChange=!1,n.isDynamicDataChange=!1,n.addedNewItem=!1,n}return kW(e,s),e.prototype.getPropObject=function(t,i,n){var r=new Object,o=new Object;r[t]=i[t],o[t]=n[t];var l=new Object;return l.newProperty=r,l.oldProperty=o,l},e.prototype.getValueByText=function(t,i,n){var r=null;return c(this.listData)||(r=this.checkValueCase(t,!!i,n)),r},e.prototype.checkValueCase=function(t,i,n,r){var o=this,a=null;r&&(a=t);var l=this.listData,h=this.fields,d=this.typeOfData(l).typeof;if("string"===d||"number"===d||"boolean"===d)for(var p=0,u=l;p<u.length;p++){var f=u[p];c(f)||(n?a=this.checkingAccent(String(f),t,i):i?this.checkIgnoreCase(String(f),t)&&(a=this.getItemValue(String(f),t,i)):this.checkNonIgnoreCase(String(f),t)&&(a=this.getItemValue(String(f),t,i,r)))}else if(i)l.filter(function(m){!c(R(h.value,m))&&o.checkIgnoreCase(R(h.text,m).toString(),t)&&(a=R(h.value,m))});else if(r){var g=null;g=a,l.filter(function(m){var y=R(h.value,m);!c(y)&&!c(a)&&y.toString()===g.toString()&&(a=R(h.text,m))})}else l.filter(function(m){o.checkNonIgnoreCase(R(h.text,m),t)&&(a=R(h.value,m))});return a},e.prototype.checkingAccent=function(t,i,n){var r=ae.ignoreDiacritics(String(t)),o=ae.ignoreDiacritics(i.toString()),a=null;return n?this.checkIgnoreCase(r,o)&&(a=this.getItemValue(String(t),i,n)):this.checkNonIgnoreCase(String(t),i)&&(a=this.getItemValue(String(t),i,n)),a},e.prototype.checkIgnoreCase=function(t,i){return String(t).toLowerCase()===i.toString().toLowerCase()},e.prototype.checkNonIgnoreCase=function(t,i){return String(t)===i.toString()},e.prototype.getItemValue=function(t,i,n,r){var l=this.typeOfData(this.listData).typeof;return r?t.toString():n?"string"===l?String(t):this.getFormattedValue(String(t)):"string"===l?i:this.getFormattedValue(i)},e.prototype.templateCompiler=function(t){var i=!1;if("function"!=typeof t&&t)try{i=!!me(t,document).length}catch{i=!1}return i},e.prototype.l10nUpdate=function(t){var i="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){var n=t?this.actionFailureTemplate:this.noRecordsTemplate,o=t?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="";var a=this.templateCompiler(n),l=t?"actionFailureTemplate":"noRecordsTemplate",h=qe("function"!=typeof n&&a?H(n,document).innerHTML.trim():n)({},this,l,o,this.isStringTemplate,null,i);if(h&&h.length>0)for(var d=0;d<h.length;d++)"listbox"===this.getModuleName()&&"noRecordsTemplate"===l?"#text"===h[d].nodeName?((p=this.createElement("li")).textContent=h[d].textContent,p.classList.add("e-list-nrt"),p.setAttribute("role","option"),i.appendChild(p)):(h[d].classList.add("e-list-nr-template"),i.appendChild(h[d])):i.appendChild(h[d]);this.renderReactTemplates()}else{var f=new mi(this.getLocaleName(),{},this.locale);this.l10n=""!==f.getConstant("actionFailureTemplate")?f:new mi("listbox"===this.getModuleName()?"listbox":"mention"===this.getModuleName()?"mention":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var p,g=this.l10n.getConstant(t?"actionFailureTemplate":"noRecordsTemplate");"listbox"===this.getModuleName()?((p=this.createElement("li")).textContent=g,i.appendChild(p),p.classList.add("e-list-nrt"),p.setAttribute("role","option")):c(i)||(i.innerHTML=g)}},e.prototype.getLocaleName=function(){return"drop-down-base"},e.prototype.getTextByValue=function(t){return this.checkValueCase(t,!1,!1,!0)},e.prototype.getFormattedValue=function(t){if(this.listData&&this.listData.length){var i;if(i=this.typeOfData(this.properties.allowCustomValue&&this.properties.value&&this.properties.value instanceof Array&&this.properties.value.length>0?this.properties.value:this.listData),"number"==typeof R(this.fields.value?this.fields.value:"value",i.item)||"number"===i.typeof)return parseFloat(t);if("boolean"==typeof R(this.fields.value?this.fields.value:"value",i.item)||"boolean"===i.typeof)return"true"===t||""+t=="true"}return t},e.prototype.setEnableRtl=function(){c(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?M(this.enableRtlElements,"e-rtl"):A(this.enableRtlElements,"e-rtl"))},e.prototype.initialize=function(t){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var i=ot.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(i,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!c(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query,t)},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.updateDataAttribute=function(t){for(var i=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],n={},r=0;r<this.element.attributes.length;r++)-1===i.indexOf(this.element.attributes[r].name)&&("dropdownlist"!==this.getModuleName()||"readonly"!==this.element.attributes[r].name)&&(n[this.element.attributes[r].name]=this.element.getAttribute(this.element.attributes[r].name));Q(n,t,n),this.setProperties({htmlAttributes:n},!0)},e.prototype.renderItemsBySelect=function(){var t=this.element,i={value:"value",text:"text"},n=[],r=t.querySelectorAll("select>optgroup"),o=t.querySelectorAll("select>option");if(this.getJSONfromOption(n,o,i),r.length){for(var a=0;a<r.length;a++){var l=r[a],h={};h[i.text]=l.label,h.isHeader=!0;var d=l.querySelectorAll("option");n.push(h),this.getJSONfromOption(n,d,i)}t.querySelectorAll("select>option")}this.updateFields(i.text,i.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(n,i)},e.prototype.updateFields=function(t,i,n,r,o){var a={fields:{text:t,value:i,groupBy:c(n)?this.fields&&this.fields.groupBy:n,htmlAttributes:c(r)?this.fields&&this.fields.htmlAttributes:r,iconCss:c(o)?this.fields&&this.fields.iconCss:o}};this.setProperties(a,!0)},e.prototype.getJSONfromOption=function(t,i,n){for(var r=0,o=i;r<o.length;r++){var a=o[r],l={};l[n.text]=a.innerText,l[n.value]=c(a.getAttribute(n.value))?a.innerText:a.getAttribute(n.value),t.push(l)}},e.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.displayTemplateId=this.element.id+"DisplayTemplate",this.spinnerTemplateId=this.element.id+"SpinnerTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},e.prototype.setListData=function(t,i,n,r){var a,o=this;i=i||this.fields,this.isActive=!0;var l={cancel:!1,data:t,query:n};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",l,function(h){if(!h.cancel)if(o.showSpinner(),t instanceof he){if(o.isRequested=!0,o.isDataFetched)return void o.emptyDataRequest(i);h.data.executeQuery(o.getQuery(h.query)).then(function(f){o.isPreventChange=!(!o.isAngular||!o.preventChange)||o.isPreventChange,o.trigger("actionComplete",f,function(g){if(!g.cancel){var m=g.result;0===m.length&&(o.isDataFetched=!0),a=o.renderItems(m,i),o.onActionComplete(a,m,g),o.groupTemplate&&o.renderGroupTemplate(a),o.isRequested=!1,o.bindChildItems(m,a,i,g)}})}).catch(function(f){o.isRequested=!1,o.onActionFailure(f),o.hideSpinner()})}else{var d=new he(h.data),u={cancel:!1,result:o.getQuery(h.query).executeLocal(d)};o.isPreventChange=!(!o.isAngular||!o.preventChange)||o.isPreventChange,o.trigger("actionComplete",u,function(f){f.cancel||(a=o.renderItems(f.result,i),o.onActionComplete(a,f.result,r),o.groupTemplate&&o.renderGroupTemplate(a),o.bindChildItems(f.result,a,i),setTimeout(function(){"multiselect"===o.getModuleName()&&null!=o.itemTemplate&&a.childElementCount>0&&(a.children[0].childElementCount>0||o.fields.groupBy&&a.children[1]&&a.children[1].childElementCount>0)&&o.updateDataList()}))})}})},e.prototype.bindChildItems=function(t,i,n,r){var o=this;t.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){Le(o.remainingItems(o.sortedData,n),i),o.liCollections=o.list.querySelectorAll("."+pe_li),o.updateListValues(),o.raiseDataBound(t,r)},0):this.raiseDataBound(t,r)},e.prototype.updateListValues=function(){},e.prototype.findListElement=function(t,i,n,r){var o=null;if(t)for(var a=[].slice.call(t.querySelectorAll(i)),l=0;l<a.length;l++)if(a[l].getAttribute(n)===r+""){o=a[l];break}return o},e.prototype.raiseDataBound=function(t,i){this.hideSpinner(),this.trigger("dataBound",{items:t,e:i})},e.prototype.remainingItems=function(t,i){var n=new he(t).executeLocal((new Me).skip(100));if(this.itemTemplate){var r=this.templateListItem(n,i);return[].slice.call(r.childNodes)}var o=this.typeOfData(n).typeof;return"string"===o||"number"===o||"boolean"===o?ot.createListItemFromArray(this.createElement,n,!0,this.listOption(n,i),this):ot.createListItemFromJson(this.createElement,n,this.listOption(n,i),1,!0,this)},e.prototype.emptyDataRequest=function(t){var i=[];this.onActionComplete(this.renderItems(i,t),i),this.isRequested=!1,this.hideSpinner()},e.prototype.showSpinner=function(){},e.prototype.hideSpinner=function(){},e.prototype.onActionFailure=function(t){this.liCollections=[],this.trigger("actionFailure",t),this.l10nUpdate(!0),c(this.list)||M([this.list],"e-nodata")},e.prototype.onActionComplete=function(t,i,n){if(this.listData=i,"listbox"!==this.getModuleName()&&t.setAttribute("tabindex","0"),this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.fixedHeaderElement=c(this.fixedHeaderElement)?this.fixedHeaderElement:null,"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(var r=0;r<t.childElementCount;r++)t.children[r].classList.contains("e-list-group-item")&&(c(t.children[r].innerHTML)||""==t.children[r].innerHTML)&&M([t.children[r]],"e-hide-group-header");c(this.list)||(this.list.innerHTML="",this.list.appendChild(t),this.liCollections=this.list.querySelectorAll("."+pe_li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent))},e.prototype.postRender=function(t,i,n){var r=t.querySelector("."+pe_li),o=t.querySelector(".e-active");r&&!o&&r.classList.add("e-item-focus"),i.length<=0?(this.l10nUpdate(),M([t],"e-nodata")):t.classList.remove("e-nodata")},e.prototype.getQuery=function(t){return t||(this.query?this.query:new Me)},e.prototype.renderGroupTemplate=function(t){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+pe_group)){var i=this.dataSource,n={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},r=t.querySelectorAll("."+pe_group),o=this.templateCompiler(this.groupTemplate);if("function"!=typeof this.groupTemplate&&o){var a=H(this.groupTemplate,document).innerHTML.trim(),l=ot.renderGroupTemplate(a,i,this.fields.properties,r,n,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else if(l=ot.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,r,n,this),this.isGroupChecking)for(h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]});this.renderReactTemplates()}},e.prototype.createListItems=function(t,i){t&&i.groupBy||this.element.querySelector("optgroup")?(i.groupBy&&("None"!==this.sortOrder&&(t=this.getSortedDataSource(t)),t=ot.groupDataSource(t,i.properties,this.sortOrder)),M([this.list],"e-dd-group")):t=this.getSortedDataSource(t);var n=this.listOption(t,i),r=t.length>100?new he(t).executeLocal((new Me).take(100)):t;return this.sortedData=t,ot.createList(this.createElement,"autocomplete"===this.getModuleName()?r:t,n,!0,this)},e.prototype.listOption=function(t,i){var n=!c(i.iconCss),r=c(i.properties)?i:i.properties;return Q({},null!==i.text||null!==i.value?{fields:r,showIcon:n,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},i,!0)},e.prototype.setFloatingHeader=function(t){!c(this.list)&&!this.list.classList.contains("e-nodata")&&(c(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),!c(this.list)&&!this.list.querySelector("li").classList.contains(pe_group)&&(this.fixedHeaderElement.style.display="none"),!c(this.fixedHeaderElement)&&!c(this.list)&&Ii([this.fixedHeaderElement],this.list),this.setFixedHeader()),!c(this.fixedHeaderElement)&&"0"===this.fixedHeaderElement.style.zIndex&&this.setFixedHeader(),this.scrollStop(t))},e.prototype.scrollStop=function(t){for(var i=c(t)?this.list:t.target,n=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),r=Math.round(i.scrollTop/n),o=this.list.querySelectorAll("li:not(.e-hide-listitem)"),a=r;a>-1;a--){if(!c(o[a])&&o[a].classList.contains(pe_group)){this.fixedHeaderElement.innerHTML=o[a].innerHTML,this.fixedHeaderElement.style.top=i.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},e.prototype.getValidLi=function(){return this.liCollections[0]},e.prototype.renderItems=function(t,i){var n;if(this.itemTemplate&&t){var r=t;r&&i.groupBy?("None"!==this.sortOrder&&(r=this.getSortedDataSource(r)),r=ot.groupDataSource(r,i.properties,this.sortOrder)):r=this.getSortedDataSource(r),this.sortedData=r;var o=r.length>100?new he(r).executeLocal((new Me).take(100)):r;n=this.templateListItem("autocomplete"===this.getModuleName()?o:r,i)}else n=this.createListItems(t,i);return n},e.prototype.templateListItem=function(t,i){var n=this.listOption(t,i);n.templateID=this.itemTemplateId,n.isStringTemplate=this.isStringTemplate;var r=this.templateCompiler(this.itemTemplate);if("function"!=typeof this.itemTemplate&&r){var o=H(this.itemTemplate,document).innerHTML.trim();return ot.renderContentTemplate(this.createElement,o,t,i.properties,n,this)}return ot.renderContentTemplate(this.createElement,this.itemTemplate,t,i.properties,n,this)},e.prototype.typeOfData=function(t){for(var n=0;!c(t)&&n<t.length;n++)if(!c(t[n])&&!c("string"==typeof t[n]||"number"==typeof t[n]||"boolean"==typeof t[n]?t[n]:R(this.fields.value?this.fields.value:"value",t[n])))return{typeof:typeof t[n],item:t[n]};return{typeof:null,item:null}},e.prototype.setFixedHeader=function(){c(this.list)||(this.list.parentElement.style.display="block");var t=0;if(this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(t))&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10)),!c(this.liCollections)){var a=this.getValidLi().offsetWidth-t;this.fixedHeaderElement.style.width=a.toString()+"px"}ge(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+pe_group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=l.innerHTML},e.prototype.getSortedDataSource=function(t){if(t&&"None"!==this.sortOrder){var i=this.fields.text?this.fields.text:"text";("string"===this.typeOfData(t).typeof||"number"===this.typeOfData(t).typeof||"boolean"===this.typeOfData(t).typeof)&&(i=""),t=ot.getDataSource(t,ot.addSorting(this.sortOrder,i))}return t},e.prototype.getIndexByValue=function(t){for(var i,n=this.getItems(),r=0;r<n.length;r++)if(!c(t)&&n[r].getAttribute("data-value")===t.toString()){i=r;break}return i},e.prototype.dispatchEvent=function(t,i){var n=document.createEvent("HTMLEvents");n.initEvent(i,!1,!0),t&&t.dispatchEvent(n)},e.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")},e.prototype.resetList=function(t,i,n,r){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(t instanceof Array?t.length>0:!c(t))&&this.selectData&&this.selectData.length>0&&(t=this.selectData),t="combobox"===this.getModuleName()&&this.selectData&&t instanceof Array&&t.length<this.selectData.length&&this.addedNewItem?this.selectData:t,this.addedNewItem=!1,this.setListData(t,i,n,r))},e.prototype.updateSelectElementData=function(t){t&&c(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},e.prototype.updateSelection=function(){},e.prototype.renderList=function(){this.render()},e.prototype.updateDataSource=function(t){this.resetList(this.dataSource)},e.prototype.setUpdateInitial=function(t,i){this.isDataFetched=!1;for(var n={},r=0;t.length>r;r++)i[t[r]]&&"fields"===t[r]?(this.setFields(),n[t[r]]=i[t[r]]):i[t[r]]&&(n[t[r]]=i[t[r]]);Object.keys(n).length>0&&(-1===Object.keys(n).indexOf("dataSource")&&(n.dataSource=this.dataSource),this.updateDataSource(n))},e.prototype.onPropertyChanged=function(t,i){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t),this.setUpdateInitial(["sortOrder","itemTemplate"],t);for(var n=0,r=Object.keys(t);n<r.length;n++)switch(r[n]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var a=this.ulElement.querySelector("."+pe_group);this.fixedHeaderElement.innerHTML=a.innerHTML}break;case"locale":this.list&&!c(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0),this.setZIndex()}},e.prototype.render=function(t,i){this.list="listbox"===this.getModuleName()?this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}):this.createElement("div",{className:"e-content"}),this.list.classList.add(pe_root),this.setFields(),this.rippleFun=zi(this.list,{duration:300,selector:"."+pe_li});var r=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!c(r))&&!this.isGroupChecking&&C.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),A([this.element],pe_root),this.element.style.display="none";var o=this.createElement("div");this.element.parentElement.insertBefore(o,this.element),o.appendChild(this.element),o.appendChild(this.list)}this.setEnableRtl(),i||this.initialize(t)},e.prototype.getModuleName=function(){return"dropdownbase"},e.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+pe_li)},e.prototype.addItem=function(t,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&c(i)){var n=[].slice.call(this.listData);n.push(t),n=this.getSortedDataSource(n),this.fields.groupBy&&(n=ot.groupDataSource(n,this.fields.properties,this.sortOrder)),i=n.indexOf(t)}var a,r=this.getItems().length,o=this.list.querySelector(".e-active");t=t instanceof Array?t:[t],a=c(i)||i<0||i>r-1?r:i;var l=this.fields;t&&l.groupBy&&(t=ot.groupDataSource(t,l.properties));for(var h=[],d=0;d<t.length;d++){var p=t[d],u=p.isHeader,f=this.createElement("li",{className:u?pe_group:pe_li,id:"option-add-"+d}),g=p instanceof Object?R(l.text,p):p;if(u&&(f.innerText=g),this.itemTemplate&&!u){var m=this.templateCompiler(this.itemTemplate),b=qe("function"!=typeof this.itemTemplate&&m?H(this.itemTemplate,document).innerHTML.trim():this.itemTemplate)(p,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,f);b&&Le(b,f)}else u||f.appendChild(document.createTextNode(g));f.setAttribute("data-value",p instanceof Object?R(l.value,p):p),f.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:f}),h.push(f),this.listData.push(p),"None"===this.sortOrder&&c(i)&&0===a&&(a=null),this.updateActionCompleteData(f,p,a),this.trigger("beforeItemRender",{element:f,item:p})}if(0===r&&c(this.list.querySelector("ul")))c(this.list)||(this.list.innerHTML="",this.list.classList.remove("e-nodata"),c(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=h,!c(h)&&!c(this.ulElement)&&Le(h,this.ulElement),this.updateAddItemList(this.list,r);else{"listbox"===this.getModuleName()&&0===r&&(this.ulElement.innerHTML="");var w=[];for(d=0;d<t.length;d++){for(var S=this.ulElement.querySelectorAll(".e-list-group-item"),I=0;I<S.length;I++)w[I]=S[I].innerText;if(w.indexOf(h[d].innerText)>-1&&l.groupBy){for(I=0;I<S.length;I++)if(w[I]===h[d].innerText){this.ulElement.insertBefore(h[d+1],"None"===this.sortOrder?S[I+1]:this.ulElement.childNodes[i]),d+=1;break}}else this.liCollections[a]?this.liCollections[a].parentNode.insertBefore(h[d],this.liCollections[a]):this.ulElement.appendChild(h[d]);var x=[].slice.call(this.liCollections);x.splice(a,0,h[d]),this.liCollections=x,a+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}"listbox"===this.getModuleName()&&this.isReact&&this.renderReactTemplates(),(o||0===i)&&this.updateSelection(),this.addedNewItem=!0},e.prototype.validationAttribute=function(t,i){var n=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");i.setAttribute("name",n),t.removeAttribute("name");for(var r=["required","aria-required","form"],o=0;o<r.length;o++)if(t.getAttribute(r[o])){var a=t.getAttribute(r[o]);i.setAttribute(r[o],a),t.removeAttribute(r[o])}},e.prototype.setZIndex=function(){},e.prototype.updateActionCompleteData=function(t,i,n){},e.prototype.updateAddItemList=function(t,i){},e.prototype.updateDataList=function(){},e.prototype.getDataByValue=function(t){if(!c(this.listData)){var i=this.typeOfData(this.listData).typeof;if("string"===i||"number"===i||"boolean"===i){for(var n=0,r=this.listData;n<r.length;n++)if(!c(o=r[n])&&o===t)return o}else for(var a=0,l=this.listData;a<l.length;a++){var o;if(!c(o=l[a])&&R(this.fields.value?this.fields.value:"value",o)===t)return o}}return null},e.prototype.destroy=function(){document.body.contains(this.list)&&(C.remove(this.list,"scroll",this.setFloatingHeader),c(this.rippleFun)||this.rippleFun(),z(this.list)),this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.rippleFun=null,s.prototype.destroy.call(this)},An([Fe({text:null,value:null,iconCss:null,groupBy:null},yx)],e.prototype,"fields",void 0),An([v(null)],e.prototype,"itemTemplate",void 0),An([v(null)],e.prototype,"groupTemplate",void 0),An([v("No records found")],e.prototype,"noRecordsTemplate",void 0),An([v("Request failed")],e.prototype,"actionFailureTemplate",void 0),An([v("None")],e.prototype,"sortOrder",void 0),An([v([])],e.prototype,"dataSource",void 0),An([v(null)],e.prototype,"query",void 0),An([v("StartsWith")],e.prototype,"filterType",void 0),An([v(!0)],e.prototype,"ignoreCase",void 0),An([v(1e3)],e.prototype,"zIndex",void 0),An([v(!1)],e.prototype,"ignoreAccent",void 0),An([v()],e.prototype,"locale",void 0),An([V()],e.prototype,"actionBegin",void 0),An([V()],e.prototype,"actionComplete",void 0),An([V()],e.prototype,"actionFailure",void 0),An([V()],e.prototype,"select",void 0),An([V()],e.prototype,"dataBound",void 0),An([V()],e.prototype,"created",void 0),An([V()],e.prototype,"destroyed",void 0),An([et],e)}(Lt),a0e=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),cn=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Je={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:pe_li,disable:"e-disabled",base:pe_root,focus:"e-item-focus",input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},l0e={container:null,buttons:[]},yh=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.isListSearched=!1,n.preventChange=!1,n.isAngular=!1,n}return a0e(e,s),e.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),s.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},e.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},e.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},e.prototype.renderList=function(t,i){s.prototype.render.call(this,t,i),this.unWireListEvents(),this.wireListEvents()},e.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var t=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?ze(t,["e-label-top"],["e-label-bottom"]):ze(t,["e-label-bottom"],["e-label-top"])}},e.prototype.resetHandler=function(t){t.preventDefault(),this.clearAll(t)},e.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!c(this.ulElement)){var t=this.ulElement.querySelector("."+Je.li);t&&t.classList.add(Je.focus)}},e.prototype.clearAll=function(t,i){this.previousItemData=c(this.itemData)?null:this.itemData,(c(i)||!c(i)&&(c(i.dataSource)||!(i.dataSource instanceof he)&&0===i.dataSource.length))&&(this.isActive=!0,this.resetSelection(i));var n=this.getItemData();this.previousValue!==n.value&&this.onChangeEvent(t)},e.prototype.resetSelection=function(t){this.list&&(c(t)||!c(t.dataSource)&&(t.dataSource instanceof he||0!==t.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!c(this.actionCompleteData.ulElement)&&!c(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(t.dataSource))),c(this.hiddenElement)||(this.hiddenElement.innerHTML=""),c(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(z(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},e.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var n=i[t];if("class"===n){var r=this.htmlAttributes[""+n].replace(/\s+/g," ").trim();""!==r&&M([this.inputWrapper.container],r.split(" "))}else if("disabled"===n&&"disabled"===this.htmlAttributes[""+n])this.enabled=!1,this.setEnable();else if("readonly"!==n||c(this.htmlAttributes[""+n]))if("style"===n)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+n]);else if("aria-label"===n)"autocomplete"===this.getModuleName()||"combobox"===this.getModuleName()?this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+n]):this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+n]);else{var o=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&o.push("tabindex"),["name","required"].indexOf(n)>-1||0===n.indexOf("data")?this.hiddenElement.setAttribute(n,this.htmlAttributes[""+n]):o.indexOf(n)>-1?"placeholder"===n?ie.setPlaceholder(this.htmlAttributes[""+n],this.inputElement):this.inputElement.setAttribute(n,this.htmlAttributes[""+n]):this.inputWrapper.container.setAttribute(n,this.htmlAttributes[""+n])}else this.readonly=!0,this.dataBind()}("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},e.prototype.setEnableRtl=function(){ie.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},e.prototype.setEnable=function(){ie.setEnabled(this.enabled,this.inputElement),this.enabled?(A([this.inputWrapper.container],Je.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),M([this.inputWrapper.container],Je.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"drop-down-list"},e.prototype.preventTabIndex=function(t){"dropdownlist"===this.getModuleName()&&(t.tabIndex=-1)},e.prototype.targetElement=function(){return c(this.inputWrapper)?null:this.inputWrapper.container},e.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},e.prototype.getElementByText=function(t){return this.getElementByValue(this.getValueByText(t))},e.prototype.getElementByValue=function(t){for(var i,r=0,o=this.getItems();r<o.length;r++){var a=o[r];if(this.getFormattedValue(a.getAttribute("data-value"))===t){i=a;break}}return i},e.prototype.initValue=function(){this.renderList(),this.dataSource instanceof he?this.initRemoteRender=!0:this.updateValues()},e.prototype.updateValues=function(){if(c(this.value))if(this.text&&c(this.value)){var t=this.getElementByText(this.text);if(c(t))return void this.setProperties({text:null});this.setSelection(t,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),ie.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onBlurHandler=function(t){if(this.enabled){var i=t.relatedTarget,n=t.target,r=this.isPreventBlur;if(this.isPreventBlur=!1,r&&!this.isDocumentClick&&this.isPopupOpen&&(!c(n)||!this.isFilterLayout()&&c(i)))return void("dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus());if(this.isDocumentClick||!c(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(Je.mobileFilter))return void(this.beforePopupOpen||(this.isDocumentClick=!1));("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&n.classList.contains(Je.inputFocus))||c(i)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&n!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(t),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)}},e.prototype.focusOutAction=function(t){this.isInteracted=!1,this.focusOut(t),this.onFocusOut()},e.prototype.onFocusOut=function(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&M([this.inputWrapper.clearButton],Je.clearIconHide),this.trigger("blur"))},e.prototype.onFocus=function(t){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!t,event:t})),this.updateIconState()},e.prototype.resetValueHandler=function(t){var i=k(this.inputElement,"form");if(i&&t.target===i){var n=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=n}},e.prototype.wireEvent=function(){C.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),C.add(this.inputWrapper.container,"focus",this.focusIn,this),C.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},e.prototype.bindCommonEvent=function(){C.add(this.targetElement(),"blur",this.onBlurHandler,this);var t=k(this.inputElement,"form");t&&C.add(t,"reset",this.resetValueHandler,this),this.keyboardModule=new St(this.targetElement(),E.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},e.prototype.bindClearEvent=function(){this.showClearButton&&C.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},e.prototype.unBindCommonEvent=function(){!c(this.inputWrapper)&&this.targetElement()&&C.remove(this.targetElement(),"blur",this.onBlurHandler);var t=this.inputElement&&k(this.inputElement,"form");t&&C.remove(t,"reset",this.resetValueHandler),E.isDevice||this.keyboardModule.destroy(),this.showClearButton&&C.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},e.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?M([this.inputWrapper.clearButton],Je.clearIconHide):A([this.inputWrapper.clearButton],Je.clearIconHide))},e.prototype.wireListEvents=function(){c(this.list)||(C.add(this.list,"click",this.onMouseClick,this),C.add(this.list,"mouseover",this.onMouseOver,this),C.add(this.list,"mouseout",this.onMouseLeave,this))},e.prototype.onSearch=function(t){32!==t.charCode&&13!==t.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=t,this.onServerIncrementalSearch(t))},e.prototype.onServerIncrementalSearch=function(t){!this.isRequested&&!c(this.list)&&!c(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(t)},e.prototype.onMouseClick=function(t){var n=k(t.target,"."+pe_li);this.isValidLI(n)&&(this.setSelection(n,t),E.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100,t))},e.prototype.onMouseOver=function(t){var i=k(t.target,"."+pe_li);this.setHover(i)},e.prototype.setHover=function(t){this.enabled&&this.isValidLI(t)&&!t.classList.contains("e-hover")&&(this.removeHover(),M([t],"e-hover"))},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.removeHover=function(){if(this.list){var t=this.list.querySelectorAll(".e-hover");t&&t.length&&A(t,"e-hover")}},e.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&"option"===t.getAttribute("role")},e.prototype.incrementalSearch=function(t){if(this.liCollections.length>0){var i=function Qye(s,e,t,i,n){var r;if(hd+=String.fromCharCode(s),setTimeout(function(){hd=""},1e3),hd=i?hd.toLowerCase():hd,vx===n&&SN===hd){for(var o=0;o<vp.length;o++)if(vp[o].classList.contains("e-active")){r=o;break}return vp[r+=1]?vp[r]:vp[0]}var a=e,l=hd.length,d=void 0;o=t=t?t+1:0,vp=[];do{o===a.length&&(o=-1),d=a[r=-1===o?0:o],(i?d.innerText.toLowerCase():d.innerText).substr(0,l)===hd&&vp.push(a[r]),o++}while(o!==t);return SN=hd,vx=n,vp[0]}(t.charCode,this.liCollections,this.activeIndex,!0,this.element.id);c(i)||(this.setSelection(i,t),this.setScrollPosition())}},e.prototype.hideSpinner=function(){c(this.spinnerElement)||(pr(this.spinnerElement),A([this.spinnerElement],Je.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.showSpinner=function(){c(this.spinnerElement)&&(this.spinnerElement=E.isDevice&&!c(this.filterInputObj)&&this.filterInputObj.buttons[1]||!c(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],M([this.spinnerElement],Je.disableIcon),ao({target:this.spinnerElement,width:E.isDevice?"16px":"14px"},this.createElement),En(this.spinnerElement))},e.prototype.keyActionHandler=function(t){if(this.enabled){var i="pageUp"===t.action||"pageDown"===t.action,n="dropdownlist"!==this.getModuleName()&&("home"===t.action||"end"===t.action);this.isEscapeKey="escape"===t.action,this.isTabKey=!this.isPopupOpen&&"tab"===t.action;var r="down"===t.action||"up"===t.action||"pageUp"===t.action||"pageDown"===t.action||"home"===t.action||"end"===t.action;if((!(this.isEditTextBox()||i||n)||this.isPopupOpen)&&!this.readonly){var o="tab"===t.action||"close"===t.action;if(c(this.list)&&!this.isRequested&&!o&&"escape"!==t.action&&(this.searchKeyEvent=t,this.renderList(t)),c(this.list)||!c(this.liCollections)&&r&&0===this.liCollections.length||this.isRequested)return;switch((o&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===t.action)&&t.preventDefault(),this.isSelected="escape"!==t.action&&this.isSelected,this.isTyped=!r&&"escape"!==t.action&&this.isTyped,t.action){case"down":case"up":this.updateUpDownAction(t);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),t),t.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),t),t.preventDefault();break;case"home":case"end":this.updateHomeEndAction(t);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup(t);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(t),this.focusDropDown(t);break;case"enter":this.selectCurrentItem(t);break;case"tab":this.selectCurrentValueOnTab(t);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))}}}},e.prototype.updateUpDownAction=function(t){var i=this.list.querySelector("."+Je.focus);if(this.isSelectFocusItem(i))this.setSelection(i,t);else if(!c(this.liCollections)){var n="down"===t.action?this.activeIndex+1:this.activeIndex-1,r=0;"autocomplete"===this.getModuleName()&&(r="down"===t.action&&c(this.activeIndex)?0:this.liCollections.length-1,n=n<0?this.liCollections.length-1:n===this.liCollections.length?0:n);var o=void 0;("autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&this.isPopupOpen)&&(o=c(this.activeIndex)?this.liCollections[r]:this.liCollections[n]),c(o)||this.setSelection(o,t)}t.preventDefault()},e.prototype.updateHomeEndAction=function(t){if("dropdownlist"===this.getModuleName()){var i;if(i="home"===t.action?0:this.getItems().length-1,t.preventDefault(),this.activeIndex===i)return;this.setSelection(this.liCollections[i],t)}},e.prototype.selectCurrentValueOnTab=function(t){"autocomplete"===this.getModuleName()?this.selectCurrentItem(t):this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))},e.prototype.mobileKeyActionHandler=function(t){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0===this.list&&!this.isRequested&&(this.searchKeyEvent=t,this.renderList()),c(this.list)||!c(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===t.action&&this.selectCurrentItem(t)}},e.prototype.selectCurrentItem=function(t){if(this.isPopupOpen){var i=this.list.querySelector("."+Je.focus);i&&(this.setSelection(i,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.hidePopup(t),this.focusDropDown(t)}else this.showPopup()},e.prototype.isSelectFocusItem=function(t){return!c(t)},e.prototype.getPageCount=function(){var t=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(t,10))},e.prototype.pageUpSelection=function(t,i){this.setSelection(t>=0?this.liCollections[t+1]:this.liCollections[0],i)},e.prototype.pageDownSelection=function(t,i){var n=this.getItems();this.setSelection(t<=n.length?this.liCollections[t-1]:this.liCollections[n.length-1],i)},e.prototype.unWireEvent=function(){c(this.inputWrapper)||(C.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),C.remove(this.inputWrapper.container,"keypress",this.onSearch),C.remove(this.inputWrapper.container,"focus",this.focusIn)),this.unBindCommonEvent()},e.prototype.unWireListEvents=function(){this.list&&(C.remove(this.list,"click",this.onMouseClick),C.remove(this.list,"mouseover",this.onMouseOver),C.remove(this.list,"mouseout",this.onMouseLeave))},e.prototype.checkSelector=function(t){return'[id="'+t.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},e.prototype.onDocumentClick=function(t){var i=t.target;if(!c(this.popupObj)&&k(i,this.checkSelector(this.popupObj.element.id))||c(this.inputWrapper)||this.inputWrapper.container.contains(t.target))i!==this.inputElement&&(!this.allowFiltering||i!==this.filterInput)&&("combobox"!==this.getModuleName()||this.allowFiltering||!E.isDevice||i!==this.inputWrapper.buttons[0])&&(this.isPreventBlur=(E.isIE||"edge"===E.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),t.preventDefault());else if(this.inputWrapper.container.classList.contains(Je.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var n=this.isRequested;this.isInteracted=!1,this.hidePopup(t),n||(this.onFocusOut(),this.inputWrapper.container.classList.remove(Je.inputFocus))}},e.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(Je.inputFocus))},e.prototype.focusDropDown=function(t){!this.initial&&this.isFilterLayout()&&this.focusIn(t)},e.prototype.dropDownClick=function(t){if(3!==t.which&&2!==t.button&&!this.targetElement().classList.contains(Je.disable)&&this.inputWrapper.clearButton!==t.target){var i=t.target;if(i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&"combobox"!==this.getModuleName()&&t.preventDefault(),this.readonly)this.focusIn(t);else{this.isPopupOpen?(this.hidePopup(t),this.isFilterLayout()&&this.focusDropDown(t)):(this.focusIn(t),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(t));var n=this,r=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){n.cloneElements(),n.isSecondClick=!0},r)}}},e.prototype.cloneElements=function(){if(this.list){var t=this.list.querySelector("ul");t&&(t=t.cloneNode?t.cloneNode(!0):t,this.actionCompleteData.ulElement=t)}},e.prototype.updateSelectedItem=function(t,i,n,r){var o=this;this.removeSelection(),t.classList.add("e-active"),this.removeHover();var a="null"!==t.getAttribute("data-value")?this.getFormattedValue(t.getAttribute("data-value")):null,l=this.getDataByValue(a);if(this.initial||n||c(i))this.selectEventCallback(t,i,n,l,a),r&&this.setSelectOptions(t,i);else{var h=this.detachChanges(l);this.isSelected=!0,this.trigger("select",{e:i,item:t,itemData:h,isInteracted:!!i,cancel:!1},function(p){p.cancel?t.classList.remove("e-active"):(o.selectEventCallback(t,i,n,l,a),r&&o.setSelectOptions(t,i))})}},e.prototype.selectEventCallback=function(t,i,n,r,o){this.previousItemData=c(this.itemData)?null:this.itemData,this.itemData!=r&&(this.previousValue=c(this.itemData)?null:"object"==typeof this.itemData?this.checkFieldValue(this.itemData,this.fields.value.split(".")):this.itemData),this.item=t,this.itemData=r;var a=this.list.querySelector(".e-item-focus");a&&A([a],"e-item-focus"),t.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(o)},e.prototype.activeItem=function(t){this.isValidLI(t)&&!t.classList.contains("e-active")&&(this.removeSelection(),t.classList.add("e-active"),this.removeHover(),t.setAttribute("aria-selected","true"))},e.prototype.setValue=function(t){var i=this.getItemData();ie.setValue(null===i.value?null:i.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():!c(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(z(this.valueTempElement),this.inputElement.style.display="block");var n=Je.clearIcon,o=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+n);return this.isFiltering()&&o&&o.style.removeProperty("visibility"),this.previousValue===i.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},e.prototype.setSelection=function(t,i){this.isValidLI(t)&&(!t.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&t.classList.contains("e-active"))?this.updateSelectedItem(t,i,!1,!0):this.setSelectOptions(t,i)},e.prototype.setSelectOptions=function(t,i){this.list&&this.removeHover(),this.previousSelectedLI=c(this.selectedLI)?null:this.selectedLI,this.selectedLI=t,!this.setValue(i)&&((!this.isPopupOpen&&!c(t)||this.isPopupOpen&&!c(i)&&("keydown"!==i.type||"keydown"===i.type&&"enter"===i.action))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.isPopupOpen&&!c(this.selectedLI)&&null!==this.itemData&&(!i||"click"!==i.type)&&this.setScrollPosition(i),"mozilla"!==E.info.name&&this.targetElement()&&(re(this.targetElement(),{"aria-describedby":""!==this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),!this.isPopupOpen||c(this.ulElement)||c(this.ulElement.getElementsByClassName("e-item-focus")[0])?this.isPopupOpen&&!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-active")[0])&&re(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):re(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.dropdownCompiler=function(t){var i=!1;if("function"!=typeof t&&t)try{i=!!document.querySelectorAll(t).length}catch{i=!1}return i},e.prototype.setValueTemplate=function(){this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(z(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:Je.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var i=this.dropdownCompiler(this.valueTemplate),n=qe("function"!=typeof this.valueTemplate&&i?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);n&&n.length>0&&Le(n,this.valueTempElement),this.renderReactTemplates()},e.prototype.removeSelection=function(){if(this.list){var t=this.list.querySelectorAll(".e-active");t.length&&(A(t,"e-active"),t[0].removeAttribute("aria-selected"))}},e.prototype.getItemData=function(){var i,n,r,t=this.fields;return c(i=this.itemData)||(n=R(t.value,i),r=R(t.text,i)),{value:c(i)||Oe(n)?i:n,text:c(i)||Oe(n)?i:r}},e.prototype.onChangeEvent=function(t){var i=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:i.text,value:i.value},!0),this.detachChangeEvent(t)},e.prototype.detachChanges=function(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):t},e.prototype.detachChangeEvent=function(t){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=c(this.text)?"":this.text,!this.initial){var n,i=this.detachChanges(this.itemData);n="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var r={e:t,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:n,isInteracted:!!t,value:this.value,element:this.element,event:t};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",r)}(c(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&A([this.inputWrapper.container],"e-valid-input")},e.prototype.setHiddenValue=function(){if(c(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option"))(t=this.hiddenElement.querySelector("option")).textContent=this.text,t.setAttribute("value",this.value.toString());else if(!c(this.hiddenElement)){var t;this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",(t=this.hiddenElement.querySelector("option")).setAttribute("value",this.value.toString())}},e.prototype.onFilterUp=function(t){if(t.ctrlKey&&86===t.keyCode||!this.isValidKey&&40!==t.keyCode&&38!==t.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,t.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(t)),this.preventAltUp=!1,"autocomplete"===this.getModuleName()&&!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-item-focus")[0])&&re(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),t.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(t),"autocomplete"===this.getModuleName()&&this.hidePopup())),t.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(t)}},e.prototype.onFilterDown=function(t){switch(t.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,t.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&t.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},e.prototype.removeFillSelection=function(){if(this.isInteracted){var t=this.getSelectionPoints();this.inputElement.setSelectionRange(t.end,t.end)}},e.prototype.getQuery=function(t){var i;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){i=t?t.clone():this.query?this.query.clone():new Me;var n=""===this.typedString?"contains":this.filterType,r=this.typeOfData(this.dataSource).typeof;i.where((this.dataSource instanceof he||"string"!==r)&&"number"!==r&&this.fields.text?this.fields.text:"",n,this.typedString,this.ignoreCase,this.ignoreAccent)}else i=t?t.clone():this.query?this.query.clone():new Me;return i},e.prototype.getSelectionPoints=function(){var t=this.inputElement;return{start:Math.abs(t.selectionStart),end:Math.abs(t.selectionEnd)}},e.prototype.searchLists=function(t){var i=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+Je.clearIcon)&&(this.filterInput.parentElement.querySelector("."+Je.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){var r={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(o,a,l){r.cancel||(i.isCustomFilter=!0,i.filteringAction(o,a,l))},baseEventArgs:t,cancel:!1};this.trigger("filtering",r,function(o){!o.cancel&&!i.isCustomFilter&&!o.preventDefaultAction&&i.filteringAction(i.dataSource,null,i.fields)})}},e.prototype.filter=function(t,i,n){this.isCustomFilter=!0,this.filteringAction(t,i,n)},e.prototype.filteringAction=function(t,i,n){c(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,i=""===this.filterInput.value.trim()?null:i,this.resetList(t,n,i)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!c(this.actionCompleteData.ulElement)&&!c(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,!c(this.itemData)&&"dropdownlist"===this.getModuleName()&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())},e.prototype.setSearchBox=function(t){if(this.isFiltering()){var i=t.querySelector("."+Je.filterParent)?t.querySelector("."+Je.filterParent):this.createElement("span",{className:Je.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Je.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var n=!1;return E.isDevice&&(n=!0),this.filterInputObj=ie.createInput({element:this.filterInput,buttons:n?[Je.backIcon,Je.filterBarClearIcon]:[Je.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),c(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?M([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&M([this.filterInputObj.container],"e-filled")),Le([this.filterInputObj.container],i),Ii([i],t),re(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+Je.clearIcon),!E.isDevice&&this.clearIconElement&&(C.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new St(this.filterInput,E.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),C.add(this.filterInput,"input",this.onInput,this),C.add(this.filterInput,"keyup",this.onFilterUp,this),C.add(this.filterInput,"keydown",this.onFilterDown,this),C.add(this.filterInput,"blur",this.onBlurHandler,this),C.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return l0e},e.prototype.onInput=function(t){this.isValidKey=!0,"combobox"===this.getModuleName()&&this.updateIconState(),E.isDevice&&"mozilla"===E.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(t))},e.prototype.pasteHandler=function(t){var i=this;setTimeout(function(){i.typedString=i.filterInput.value,i.searchLists(t)})},e.prototype.onActionFailure=function(t){s.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},e.prototype.onActionComplete=function(t,i,n,r){var o=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var a=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(s.prototype.onActionComplete.call(this,t,i,n),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!c(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!c(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,c(t)||re(t,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initRemoteRender=!1,this.value&&this.dataSource instanceof he){var l=c(this.fields.value)?this.fields.text:this.fields.value,h=this.fields.value.split(".");i.some(function(p){return c(p[l])&&h.length>1?o.checkFieldValue(p,h)===o.value:p[l]===o.value})?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new Et(l,"equal",this.value))).then(function(p){p.result.length>0&&o.addItem(p.result,i.length),o.updateValues()})}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||c(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof he||!c(this.dataSource)&&!c(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){o.updateActionCompleteDataValues(t,i)},0):this.updateActionCompleteDataValues(t,i)),this.addNewItem(i,a),c(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup(n)}},e.prototype.checkFieldValue=function(t,i){var n=t;return i.forEach(function(r){n=n[r]}),n},e.prototype.updateActionCompleteDataValues=function(t,i){this.actionCompleteData={ulElement:t.cloneNode(!0),list:i,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},e.prototype.addNewItem=function(t,i){var n=this;if(!c(this.itemData)&&!c(i)){var r=this.getItemData().value;t.some(function(a){return("string"==typeof a||"number"==typeof a)&&a===r||R(n.fields.value,a)===r})||this.addItem(this.itemData)}},e.prototype.updateActionCompleteData=function(t,i,n){var r=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){r.actionCompleteDataUpdate(t,i,n)},0):this.actionCompleteDataUpdate(t,i,n))},e.prototype.actionCompleteDataUpdate=function(t,i,n){null!==n?this.actionCompleteData.ulElement.insertBefore(t.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[n]):this.actionCompleteData.ulElement.appendChild(t.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(i)<0&&this.actionCompleteData.list.push(i)},e.prototype.focusIndexItem=function(){var t=this.getItemData().value;this.activeIndex=this.getIndexByValue(t);var i=this.findListElement(this.list,"li","data-value",t);this.selectedLI=i,this.activeItem(i),this.removeFocus()},e.prototype.updateSelection=function(){var t=this.list.querySelector(".e-active");t?(this.setProperties({index:this.getIndexByValue(t.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+pe_li).classList.add(Je.focus))},e.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+Je.focus);t&&t.length&&A(t,Je.focus)},e.prototype.renderPopup=function(t){var i=this;this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},function(r){if(r.cancel)i.beforePopupOpen=!1;else{var o=i.createElement("div",{id:i.element.id+"_popup",className:"e-ddl e-popup "+(null!==i.cssClass?i.cssClass:"")}),a=i.setSearchBox(o);if(i.listHeight=oe(i.popupHeight),i.headerTemplate&&i.setHeaderTemplate(o),Le([i.list],o),i.footerTemplate&&i.setFooterTemplate(o),document.body.appendChild(o),o.style.visibility="hidden","auto"!==i.popupHeight){if(i.searchBoxHeight=0,c(a.container)||(i.searchBoxHeight=a.container.parentElement.getBoundingClientRect().height,i.listHeight=(parseInt(i.listHeight,10)-i.searchBoxHeight).toString()+"px"),i.headerTemplate){i.header=i.header?i.header:o.querySelector(".e-ddl-header");var l=Math.round(i.header.getBoundingClientRect().height);i.listHeight=(parseInt(i.listHeight,10)-(l+i.searchBoxHeight)).toString()+"px"}i.footerTemplate&&(i.footer=i.footer?i.footer:o.querySelector(".e-ddl-footer"),l=Math.round(i.footer.getBoundingClientRect().height),i.listHeight=(parseInt(i.listHeight,10)-(l+i.searchBoxHeight)).toString()+"px"),i.list.style.maxHeight=(parseInt(i.listHeight,10)-2).toString()+"px",o.style.maxHeight=oe(i.popupHeight)}else o.style.height="auto";var h=0,d=void 0;if(!c(i.selectedLI)&&!c(i.activeIndex)&&i.activeIndex>=0?i.setScrollPosition():i.list.scrollTop=0,E.isDevice&&!i.allowFiltering&&("dropdownlist"===i.getModuleName()||i.isDropDownClick&&"combobox"===i.getModuleName())){h=i.getOffsetValue(o);var p=i.isEmptyList()?i.list:i.liCollections[0];c(i.inputElement)||(d=-(parseInt(getComputedStyle(p).textIndent,10)-parseInt(getComputedStyle(i.inputElement).paddingLeft,10)+parseInt(getComputedStyle(i.inputElement.parentElement).borderLeftWidth,10)))}i.getFocusElement(),i.createPopup(o,h,d),i.checkCollision(o),E.isDevice&&(i.popupObj.element.classList.add(Je.device),("dropdownlist"===i.getModuleName()||"combobox"===i.getModuleName()&&!i.allowFiltering&&i.isDropDownClick)&&(i.popupObj.collision={X:"fit",Y:"fit"}),i.isFilterLayout()&&(i.popupObj.element.classList.add(Je.mobileFilter),i.popupObj.position={X:0,Y:0},i.popupObj.dataBind(),re(i.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),M([document.body,i.popupObj.element],Je.popupFullScreen),i.setSearchBoxPosition(),i.backIconElement=a.container.querySelector(".e-back-icon"),i.clearIconElement=a.container.querySelector("."+Je.clearIcon),C.add(i.backIconElement,"click",i.clickOnBackIcon,i),C.add(i.clearIconElement,"click",i.clearText,i))),o.style.visibility="visible",M([o],"e-popup-close");for(var f=0,g=i.popupObj.getScrollableParent(i.inputWrapper.container);f<g.length;f++)C.add(g[f],"scroll",i.scrollHandler,i);c(i.list)||(i.unWireListEvents(),i.wireListEvents()),i.selectedElementID=i.selectedLI?i.selectedLI.id:null,re(i.targetElement(),{"aria-expanded":"true","aria-owns":i.inputElement.id+"_options"}),i.inputElement.setAttribute("aria-expanded","true"),M([i.isFiltering()?i.filterInput.parentElement:i.inputWrapper.container],[Je.inputFocus]),i.beforePopupOpen=!0,i.trigger("open",{popup:i.popupObj,event:t,cancel:!1,animation:{name:"FadeIn",duration:100}},function(I){I.cancel?(i.beforePopupOpen=!1,i.destroyPopup()):(c(i.inputWrapper)||M([i.inputWrapper.container],[Je.iconAnimation]),i.renderReactTemplates(),c(i.popupObj)||i.popupObj.show(new Gi(I.animation),1e3===i.zIndex?i.element:null))})}})},e.prototype.checkCollision=function(t){(!E.isDevice||E.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(rh(t).length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px"),this.popupObj.resolveCollision())},e.prototype.getOffsetValue=function(t){var i=getComputedStyle(t),n=parseInt(i.borderTopWidth,10),r=parseInt(i.borderBottomWidth,10);return this.setPopupPosition(n+r)},e.prototype.createPopup=function(t,i,n){var r=this;this.popupObj=new dr(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:n,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){r.isDocumentClick||r.focusDropDown(),r.isReact&&r.clearTemplate(["headerTemplate","footerTemplate"]),r.isNotSearchList=!1,r.isDocumentClick=!1,r.destroyPopup(),r.isFiltering()&&r.actionCompleteData.list&&r.actionCompleteData.list[0]&&(r.isActive=!0,r.onActionComplete(r.actionCompleteData.ulElement,r.actionCompleteData.list,null,!0))},open:function(){C.add(document,"mousedown",r.onDocumentClick,r),r.isPopupOpen=!0;var o=r.actionCompleteData&&r.actionCompleteData.ulElement&&r.actionCompleteData.ulElement.querySelector("li"),a=r.list.querySelector("ul li");c(r.ulElement)||c(r.ulElement.getElementsByClassName("e-item-focus")[0])?!c(r.ulElement)&&!c(r.ulElement.getElementsByClassName("e-active")[0])&&re(r.targetElement(),{"aria-activedescendant":r.ulElement.getElementsByClassName("e-active")[0].id}):re(r.targetElement(),{"aria-activedescendant":r.ulElement.getElementsByClassName("e-item-focus")[0].id}),r.isFiltering()&&r.itemTemplate&&r.element.tagName===r.getNgDirective()&&o&&a&&o.textContent!==a.textContent&&"EJS-COMBOBOX"!==r.element.tagName&&r.cloneElements(),r.isFilterLayout()&&(A([r.inputWrapper.container],[Je.inputFocus]),r.isFilterFocus=!0,r.filterInput.focus(),r.inputWrapper.clearButton&&M([r.inputWrapper.clearButton],Je.clearIconHide)),r.activeStateChange()},targetExitViewport:function(){E.isDevice||r.hidePopup()}})},e.prototype.isEmptyList=function(){return!c(this.liCollections)&&0===this.liCollections.length},e.prototype.getFocusElement=function(){},e.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},e.prototype.scrollHandler=function(){E.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},e.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-t+"px",this.list.style.height=window.innerHeight-t+"px";var i=this.filterInput.parentElement.querySelector("."+Je.clearIcon);z(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},e.prototype.setPopupPosition=function(t){var i,n=t,r=this.list.querySelector("."+Je.focus)||this.selectedLI,o=this.isEmptyList()?this.list:this.liCollections[0],a=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=o.getBoundingClientRect().height,h=this.list.offsetHeight/2,d=c(r)?o.offsetTop:r.offsetTop;if(a.offsetTop-h<d&&!c(this.liCollections)&&this.liCollections.length>0&&!c(r)){var u=this.list.offsetHeight/l,f=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(u-(this.liCollections.length-this.activeIndex))*l-n+f,this.list.scrollTop=r.offsetTop}else d>h?(i=h-l/2,this.list.scrollTop=d-h+l/2):i=d;return-(i=i+l+n-(l-this.inputWrapper.container.offsetHeight)/2)},e.prototype.setWidth=function(){var t=oe(this.popupWidth);if(t.indexOf("%")>-1&&(t=(this.inputWrapper.container.offsetWidth*parseFloat(t)/100).toString()+"px"),E.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var n=this.isEmptyList()?this.list:this.liCollections[0];t=parseInt(t,10)+2*(parseInt(getComputedStyle(n).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return t},e.prototype.scrollBottom=function(t){if(!c(this.selectedLI)){var i=this.list.offsetHeight,n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+n-i;r=t?r+2*parseInt(getComputedStyle(this.list).paddingTop,10):r;var o=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!c(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===this.activeIndex?this.list.scrollTop=0:(n>i||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=r)}},e.prototype.scrollTop=function(){if(!c(this.selectedLI)){var t=this.selectedLI.offsetTop-this.list.scrollTop;t=this.fields.groupBy&&!c(this.fixedHeaderElement)?t-this.fixedHeaderElement.offsetHeight:t;var i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:t<0?this.list.scrollTop=this.list.scrollTop+t:i>0&&this.list.offsetHeight>i||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!c(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},e.prototype.isEditTextBox=function(){return!1},e.prototype.isFiltering=function(){return this.allowFiltering},e.prototype.isPopupButton=function(){return!0},e.prototype.setScrollPosition=function(t){if(c(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},e.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null)},e.prototype.setEleWidth=function(t){c(t)||("number"==typeof t?this.inputWrapper.container.style.width=oe(t):"string"==typeof t&&(this.inputWrapper.container.style.width=t.match(/px|%|em/)?t:oe(t)))},e.prototype.closePopup=function(t,i){var n=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){C.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var o=0,a=this.popupObj.getScrollableParent(this.inputWrapper.container);o<a.length;o++)C.remove(a[o],"scroll",this.scrollHandler);E.isDevice&&this.isFilterLayout()&&A([document.body,this.popupObj.element],Je.popupFullScreen),this.isFilterLayout()&&(E.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&C.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(C.remove(this.backIconElement,"click",this.clickOnBackIcon),C.remove(this.clearIconElement,"click",this.clearText)),c(this.filterInput)||(C.remove(this.filterInput,"input",this.onInput),C.remove(this.filterInput,"keyup",this.onFilterUp),C.remove(this.filterInput,"keydown",this.onFilterDown),C.remove(this.filterInput,"blur",this.onBlurHandler),C.remove(this.filterInput,"paste",this.pasteHandler)),this.filterInput=null),re(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(Je.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:t||0},event:i||null},function(u){if(!c(n.popupObj)&&!c(n.popupObj.element.querySelector(".e-fixed-head"))){var f=n.popupObj.element.querySelector(".e-fixed-head");f.parentNode.removeChild(f),n.fixedHeaderElement=null}u.cancel||("autocomplete"===n.getModuleName()&&n.rippleFun(),n.isPopupOpen?n.popupObj.hide(new Gi(u.animation)):n.destroyPopup())})}},e.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj&&(this.popupObj.destroy(),z(this.popupObj.element))},e.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},e.prototype.render=function(){"INPUT"===this.element.tagName?(this.inputElement=this.element,c(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),c(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var t=this.cssClass;!c(this.cssClass)&&""!==this.cssClass&&(t=this.cssClass.replace(/\s+/g," ").trim()),!c(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=ie.createInput({element:this.inputElement,buttons:this.isPopupButton()?[Je.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:Je.hiddenElement}}),Ii([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=oe(this.width),this.inputWrapper.container.classList.add("e-ddl"),"Auto"===this.floatLabelType&&ie.calculateWidth(this.inputElement,this.inputWrapper.container),!c(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var i=this.element.getAttribute("id")?this.element.getAttribute("id"):yt("ej2_dropdownlist");if(this.element.id=i,this.hiddenElement.id=i+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),"autocomplete"===this.getModuleName()||"combobox"===this.getModuleName()?this.inputElement.setAttribute("aria-label",this.getModuleName()):re(this.targetElement(),{"aria-label":this.getModuleName()}),re(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var n=this.element;this.value=n.options[n.selectedIndex].value,this.text=c(this.value)?null:n.options[n.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(o){o.stopImmediatePropagation()},this.inputElement.onchange=function(o){o.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),c(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var r=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!c(this.element.id)&&""!==this.element.id&&!c(r)&&(r.id="label_"+this.element.id.replace(/ /g,"_"),re(this.inputElement,{"aria-labelledby":r.id})),this.renderComplete()},e.prototype.setFooterTemplate=function(t){this.footer?this.isReact?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),M([this.footer],Je.footer));var n=this.dropdownCompiler(this.footerTemplate),r=qe("function"!=typeof this.footerTemplate&&n?H(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);r&&r.length>0&&Le(r,this.footer),Le([this.footer],t)},e.prototype.setHeaderTemplate=function(t){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),M([this.header],Je.header));var n=this.dropdownCompiler(this.headerTemplate),r=qe("function"!=typeof this.headerTemplate&&n?H(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);r&&r.length&&Le(r,this.header);var o=t.querySelector("div.e-content");t.insertBefore(this.header,o)},e.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},e.prototype.setOldText=function(t){this.text=t},e.prototype.setOldValue=function(t){this.value=t},e.prototype.refreshPopup=function(){!c(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&(!E.isDevice||!this.isFilterLayout())||"autocomplete"===this.getModuleName())&&(A([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},e.prototype.checkData=function(t){t.dataSource&&!c(Object.keys(t.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&t.dataSource instanceof he)&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var i=-1!==Object.keys(t).indexOf("value")&&c(t.value),n=-1!==Object.keys(t).indexOf("text")&&c(t.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(i||n)&&(this.itemData=null),this.allowFiltering&&t.dataSource&&!c(Object.keys(t.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&t.query&&!c(Object.keys(t.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},e.prototype.updateDataSource=function(t){(""!==this.inputElement.value||!c(t)&&(c(t.dataSource)||!(t.dataSource instanceof he)&&0===t.dataSource.length))&&this.clearAll(null,t),this.fields.groupBy&&t.fields&&!this.isGroupChecking&&this.list&&(C.remove(this.list,"scroll",this.setFloatingHeader),C.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!c(t)&&(c(t.dataSource)||!(t.dataSource instanceof he)&&0===t.dataSource.length))||t.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},e.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var t=this.getItemData();this.setProperties({text:t.text,value:t.value})},e.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&ie.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onPropertyChanged=function(t,i){var n=this;"dropdownlist"===this.getModuleName()&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var r=function(d){switch(d){case"query":case"dataSource":break;case"htmlAttributes":o.setHTMLAttributes();break;case"width":o.setEleWidth(t.width),ie.calculateWidth(o.inputElement,o.inputWrapper.container);break;case"placeholder":ie.setPlaceholder(t.placeholder,o.inputElement);break;case"filterBarPlaceholder":o.filterInput&&ie.setPlaceholder(t.filterBarPlaceholder,o.filterInput);break;case"readonly":"dropdownlist"!==o.getModuleName()&&ie.setReadonly(t.readonly,o.inputElement),o.setReadOnly();break;case"cssClass":o.setCssClass(t.cssClass,i.cssClass),ie.calculateWidth(o.inputElement,o.inputWrapper.container);break;case"enableRtl":o.setEnableRtl();break;case"enabled":o.setEnable();break;case"text":if(null===t.text){o.clearAll();break}if(o.list||(o.dataSource instanceof he&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender){var p=o.getElementByText(t.text);if(!o.checkValidLi(p))if(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100)o.setSelectionData(t.text,i.text,"text");else if(t.text&&o.dataSource instanceof he){var u=o.getItems().length,f=c(o.fields.text)?o.fields.value:o.fields.text;o.typedString="",o.dataSource.executeQuery(o.getQuery(o.query).where(new Et(f,"equal",t.text))).then(function(w){w.result.length>0?(n.addItem(w.result,u),n.updateValues()):n.setOldText(i.text)})}else"autocomplete"===o.getModuleName()?o.setInputValue(t,i):o.setOldText(i.text);o.updateInputFields()}break;case"value":if(null===t.value){o.clearAll();break}if(o.notify("beforeValueChange",{newProp:t}),o.list||(o.dataSource instanceof he&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender){var g=o.getElementByValue(t.value);if(!o.checkValidLi(g))if(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100)o.setSelectionData(t.value,i.value,"value");else if(t.value&&o.dataSource instanceof he){var m=o.getItems().length;f=c(o.fields.value)?o.fields.text:o.fields.value,o.typedString="",o.dataSource.executeQuery(o.getQuery(o.query).where(new Et(f,"equal",t.value))).then(function(S){S.result.length>0?(n.addItem(S.result,m),n.updateValues()):n.setOldValue(i.value)})}else"autocomplete"===o.getModuleName()?o.setInputValue(t,i):o.setOldValue(i.value);o.updateInputFields(),o.preventChange=o.isAngular&&o.preventChange?!o.preventChange:o.preventChange}break;case"index":if(null===t.index){o.clearAll();break}o.list||(o.dataSource instanceof he&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender&&o.liCollections&&(o.checkValidLi(o.liCollections[t.index])||(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100?o.setSelectionData(t.index,i.index,"index"):o.index=i.index),o.updateInputFields());break;case"footerTemplate":o.popupObj&&o.setFooterTemplate(o.popupObj.element);break;case"headerTemplate":o.popupObj&&o.setHeaderTemplate(o.popupObj.element);break;case"valueTemplate":!c(o.itemData)&&null!==o.valueTemplate&&o.setValueTemplate();break;case"allowFiltering":o.allowFiltering&&(o.actionCompleteData={ulElement:o.ulElement,list:o.listData,isUpdated:!0},o.actionData=o.actionCompleteData,o.updateSelectElementData(o.allowFiltering));break;case"floatLabelType":ie.removeFloating(o.inputWrapper),ie.addFloating(o.inputElement,t.floatLabelType,o.placeholder,o.createElement),!c(o.inputWrapper.buttons[0])&&o.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==o.floatLabelType&&o.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":ie.setClearButton(t.showClearButton,o.inputElement,o.inputWrapper,null,o.createElement),o.bindClearEvent();break;default:var b=o.getPropObject(d,t,i);s.prototype.onPropertyChanged.call(o,b.newProperty,b.oldProperty)}},o=this,a=0,l=Object.keys(t);a<l.length;a++)r(l[a])},e.prototype.checkValidLi=function(t){return!!this.isValidLI(t)&&(this.setSelection(t,null),!0)},e.prototype.setSelectionData=function(t,i,n){var o,r=this;this.updateListValues=function(){"text"===n?(o=r.getElementByText(t),r.checkValidLi(o)||r.setOldText(i)):"value"===n?(o=r.getElementByValue(t),r.checkValidLi(o)||r.setOldValue(i)):"index"===n&&(r.checkValidLi(o=r.liCollections[t])||(r.index=i))}},e.prototype.setReadOnly=function(){this.readonly?M([this.inputWrapper.container],["e-readonly"]):A([this.inputWrapper.container],["e-readonly"])},e.prototype.setInputValue=function(t,i){},e.prototype.setCssClass=function(t,i){c(i)||(i=i.replace(/\s+/g," ").trim()),c(t)||(t=t.replace(/\s+/g," ").trim()),ie.setCssClass(t,[this.inputWrapper.container],i),this.popupObj&&ie.setCssClass(t,[this.popupObj.element],i)},e.prototype.getModuleName=function(){return"dropdownlist"},e.prototype.showPopup=function(t){if(this.enabled){if(this.isFiltering()&&this.dataSource instanceof he&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(c(this.list)||!Oe(this.list)&&(this.list.classList.contains("e-nodata")||this.list.querySelectorAll("."+pe_li).length<=0))&&this.renderList(t),this.invokeRenderPopup(t)}},e.prototype.invokeRenderPopup=function(t){if(E.isDevice&&this.isFilterLayout()){var i=this;window.onpopstate=function(){i.hidePopup()},history.pushState({},"")}!c(this.list)&&(!c(this.list.children[0])||this.list.classList.contains("e-nodata"))&&this.renderPopup(t)},e.prototype.renderHightSearch=function(){},e.prototype.hidePopup=function(t){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(c(this.inputElement)||ie.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,c(this.index))this.resetSelection();else{var i=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||i,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup(0,t);var n=this.getItemData(),r=!c(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||r&&this.inputElement.value!==n.text)&&(this.isSelectCustom=!1,this.clearAll(t))},e.prototype.focusIn=function(t){if(this.enabled&&!this.targetElement().classList.contains(Je.disable)){var i=!1;this.preventFocus&&E.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,i=!0),i||this.targetElement().focus(),M([this.inputWrapper.container],[Je.inputFocus]),this.onFocus(t),"Auto"===this.floatLabelType&&ie.calculateWidth(this.inputElement,this.inputWrapper.container)}},e.prototype.focusOut=function(t){this.enabled&&(this.isTyped=!0,this.hidePopup(t),this.targetElement()&&this.targetElement().blur(),A([this.inputWrapper.container],[Je.inputFocus]),"Auto"===this.floatLabelType&&""===this.inputElement.value&&ie.calculateWidth(this.inputElement,this.inputWrapper.container))},e.prototype.destroy=function(){if(this.isActive=!1,function Zye(s){vx===s&&(vx="",SN="",hd="",vp=[])}(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var t=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<t.length;i++)this.inputElement.removeAttribute(t[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),ie.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),z(this.inputWrapper.container),this.hiddenElement=null,this.inputWrapper=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.popupObj=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.inputWrapper=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,s.prototype.destroy.call(this)}},e.prototype.getItems=function(){return this.list||(this.dataSource instanceof he&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?s.prototype.getItems.call(this):[]},e.prototype.getDataByValue=function(t){return s.prototype.getDataByValue.call(this,t)},e.prototype.clear=function(){this.value=null},cn([v(null)],e.prototype,"cssClass",void 0),cn([v("100%")],e.prototype,"width",void 0),cn([v(!0)],e.prototype,"enabled",void 0),cn([v(!1)],e.prototype,"enablePersistence",void 0),cn([v("300px")],e.prototype,"popupHeight",void 0),cn([v("100%")],e.prototype,"popupWidth",void 0),cn([v(null)],e.prototype,"placeholder",void 0),cn([v(null)],e.prototype,"filterBarPlaceholder",void 0),cn([v({})],e.prototype,"htmlAttributes",void 0),cn([v(null)],e.prototype,"query",void 0),cn([v(null)],e.prototype,"valueTemplate",void 0),cn([v(null)],e.prototype,"headerTemplate",void 0),cn([v(null)],e.prototype,"footerTemplate",void 0),cn([v(!1)],e.prototype,"allowFiltering",void 0),cn([v(!1)],e.prototype,"readonly",void 0),cn([v(null)],e.prototype,"text",void 0),cn([v(null)],e.prototype,"value",void 0),cn([v(null)],e.prototype,"index",void 0),cn([v("Never")],e.prototype,"floatLabelType",void 0),cn([v(!1)],e.prototype,"showClearButton",void 0),cn([V()],e.prototype,"filtering",void 0),cn([V()],e.prototype,"change",void 0),cn([V()],e.prototype,"beforeOpen",void 0),cn([V()],e.prototype,"open",void 0),cn([V()],e.prototype,"close",void 0),cn([V()],e.prototype,"blur",void 0),cn([V()],e.prototype,"focus",void 0),cn([et],e)}(bx),T0e=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),nr=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},UW="e-atc-spinner-icon";Je.root="e-combobox";var xb,M0e={container:null,buttons:[]},yp=function(s){function e(t,i){return s.call(this,t,i)||this}return T0e(e,s),e.prototype.preRender=function(){s.prototype.preRender.call(this)},e.prototype.getLocaleName=function(){return"combo-box"},e.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(C.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),C.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),c(this.inputWrapper.buttons[0])||C.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),C.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(C.add(this.inputElement,"input",this.onInput,this),C.add(this.inputElement,"keyup",this.onFilterUp,this),C.add(this.inputElement,"keydown",this.onFilterDown,this),C.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()},e.prototype.preventBlur=function(t){(!this.allowFiltering&&document.activeElement!==this.inputElement&&!document.activeElement.classList.contains(Je.input)&&E.isDevice||!E.isDevice)&&t.preventDefault()},e.prototype.onBlurHandler=function(t){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;!c(this.listData)&&!c(i)&&i!==this.text&&this.customValue(t),s.prototype.onBlurHandler.call(this,t)},e.prototype.targetElement=function(){return this.inputElement},e.prototype.setOldText=function(t){ie.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},e.prototype.setOldValue=function(t){this.valueMuteChange(this.allowCustom?this.value:null),this.removeSelection(),this.setHiddenValue()},e.prototype.valueMuteChange=function(t){var i=c(t)?null:t.toString();ie.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:t,text:t,index:null},!0),this.activeIndex=this.index;var n=this.fields,r={};r[n.text]=c(t)?null:t.toString(),r[n.value]=c(t)?null:t.toString(),this.itemData=r,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},e.prototype.updateValues=function(){if(c(this.value))if(this.text&&c(this.value)){var t;(t=this.getElementByText(this.text))?this.setSelection(t,null):(ie.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else(t=this.getElementByValue(this.value))?this.setSelection(t,null):this.valueMuteChange(this.allowCustom?this.value:null);this.setHiddenValue(),ie.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?A([this.inputWrapper.clearButton],Je.clearIconHide):M([this.inputWrapper.clearButton],Je.clearIconHide))},e.prototype.getAriaAttributes=function(){return{role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocapitalize:"off",spellcheck:"false"}},e.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(s.prototype.searchLists.call(this,t),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+Je.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+Je.li)),this.incrementalSearch(t))},e.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},e.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:M0e},e.prototype.onActionComplete=function(t,i,n,r){var o=this;s.prototype.onActionComplete.call(this,t,i,n),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&setTimeout(function(){o.inlineSearch()})},e.prototype.getFocusElement=function(){var t=this.isSelectCustom?{text:""}:this.getItemData(),i=c(this.list)?this.list:this.list.querySelector("."+Je.selected);if(t.text===this.inputElement.value&&!c(i))return i;if((E.isDevice&&!this.isDropDownClick||!E.isDevice)&&!c(this.liCollections)&&this.liCollections.length>0){var r=this.inputElement.value,o=this.sortedData,a=this.typeOfData(o).typeof,h=yf(r,this.liCollections,this.filterType,!0,o,this.fields,a).item;if(c(h))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var d=this.getIndexByValue(h.getAttribute("data-value"))-1,p=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);isNaN(p)||"autocomplete"===this.getModuleName()||(this.removeFocus(),this.list.scrollTop=d*p+(this.fields.groupBy?this.liCollections[0].offsetHeight:0),M([h],Je.focus))}return h}return null},e.prototype.setValue=function(t){return t&&"keydown"===t.type&&"enter"===t.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&t&&"keydown"===t.type&&"enter"!==t.action?(this.preventAutoFill=!1,this.inlineSearch(t),!1):s.prototype.setValue.call(this,t)},e.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var t=this.getItemData();this.allowCustom&&c(t.value)&&c(t.text)||this.setProperties({value:t.value},!this.allowCustom)},e.prototype.showSpinner=function(){c(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||ie.appendSpan("e-input-group-icon "+UW,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,M([this.spinnerElement],Je.disableIcon),ao({target:this.spinnerElement,width:E.isDevice?"16px":"14px"},this.createElement),En(this.spinnerElement))},e.prototype.hideSpinner=function(){c(this.spinnerElement)||(pr(this.spinnerElement),A([this.spinnerElement],Je.disableIcon),this.spinnerElement.classList.contains(UW)?z(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.setAutoFill=function(t,i){if(i||this.setHoverList(t),this.autofill&&!this.preventAutoFill){var n=this.getTextByValue(t.getAttribute("data-value")).toString(),r=this.getFormattedValue(t.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===r?this.updateSelectedItem(t,null,!0):(this.updateSelectedItem(t,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(t.getAttribute("data-value")))),this.isAndroidAutoFill(n)||this.setAutoFillSelection(n,i)}},e.prototype.isAndroidAutoFill=function(t){if(E.isAndroid){var i=this.getSelectionPoints(),n=this.prevSelectPoints.end,r=i.end,o=this.prevSelectPoints.start,a=i.start;return 0!==n&&(n===t.length&&o===t.length||o>a&&n>r||n===r&&o===a)}return!1},e.prototype.clearAll=function(t,i){(c(i)||!c(i)&&c(i.dataSource))&&s.prototype.clearAll.call(this,t),this.isFiltering()&&!c(t)&&t.target===this.inputWrapper.clearButton&&this.searchLists(t)},e.prototype.isSelectFocusItem=function(t){return!c(t)},e.prototype.inlineSearch=function(t){var i=t&&("down"===t.action||"up"===t.action||"home"===t.action||"end"===t.action||"pageUp"===t.action||"pageDown"===t.action),n=i?this.liCollections[this.activeIndex]:this.getFocusElement();if(c(n))if(""===this.inputElement.value){if(this.activeIndex=null,!c(this.list)){this.list.scrollTop=0;var o=this.list.querySelector("."+Je.li);this.setHoverList(o)}}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!i){var r=this.getFormattedValue(n.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(r),this.activeIndex=c(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(n,i)}},e.prototype.incrementalSearch=function(t){this.showPopup(t),c(this.listData)||(this.inlineSearch(t),t.preventDefault())},e.prototype.setAutoFillSelection=function(t,i){void 0===i&&(i=!1);var n=this.getSelectionPoints(),r=this.inputElement.value.substr(0,n.start);if(r&&r.toLowerCase()===t.substr(0,n.start).toLowerCase()){var o=r+t.substr(r.length,t.length);ie.setValue(o,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(n.start,this.inputElement.value.length)}else i&&(ie.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},e.prototype.getValueByText=function(t){return s.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},e.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(C.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),C.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),c(this.inputWrapper.buttons[0])||C.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(C.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(C.remove(this.inputElement,"input",this.onInput),C.remove(this.inputElement,"keyup",this.onFilterUp),C.remove(this.inputElement,"keydown",this.onFilterDown),C.remove(this.inputElement,"paste",this.pasteHandler))),this.unBindCommonEvent()},e.prototype.setSelection=function(t,i){s.prototype.setSelection.call(this,t,i),!c(t)&&!this.autofill&&!this.isDropDownClick&&this.removeFocus()},e.prototype.selectCurrentItem=function(t){var i;this.isPopupOpen&&((i=this.list.querySelector(this.isSelected?"."+Je.selected:"."+Je.focus))&&(this.setSelection(i,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t))),"enter"===t.action&&""===this.inputElement.value.trim()?this.clearAll(t):this.isTyped&&!this.isSelected&&c(i)&&this.customValue(t),this.hidePopup(t)},e.prototype.setHoverList=function(t){this.removeSelection(),this.isValidLI(t)&&!t.classList.contains(Je.selected)&&(this.removeFocus(),t.classList.add(Je.focus))},e.prototype.targetFocus=function(t){E.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(t),ie.calculateWidth(this.inputElement,this.inputWrapper.container)},e.prototype.dropDownClick=function(t){t.preventDefault(),E.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),s.prototype.dropDownClick.call(this,t)},e.prototype.customValue=function(t){var i=this,n=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var a=this.value;if(c(n)){var l=""===this.inputElement.value?null:this.inputElement.value,h={text:l,item:{}};this.initial?this.updateCustomValueCallback(l,h,a):this.trigger("customValueSpecifier",h,function(d){i.updateCustomValueCallback(l,d,a,t)})}else this.isSelectCustom=!1,this.setProperties({value:n}),a!==this.value&&this.onChangeEvent(t)}else this.allowCustom&&(this.isSelectCustom=!0);else{var r=this.previousValue,o=this.value;this.setProperties({value:n}),c(this.value)&&ie.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&r===this.value&&o!==this.value&&this.onChangeEvent(null)}},e.prototype.updateCustomValueCallback=function(t,i,n,r){var o=this.fields,a=i.item,l={};a&&R(o.text,a)&&R(o.value,a)?l=a:(ke(o.text,t,l),ke(o.value,t,l)),this.itemData=l;var h={text:R(o.text,this.itemData),value:R(o.value,this.itemData),index:null};this.setProperties(h,!0),this.setSelection(null,null),this.isSelectCustom=!0,n!==this.value&&this.onChangeEvent(r)},e.prototype.onPropertyChanged=function(t,i){"combobox"===this.getModuleName()&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];switch(o){case"readonly":ie.setReadonly(this.readonly,this.inputElement),this.readonly?(C.remove(this.inputElement,"input",this.onInput),C.remove(this.inputElement,"keyup",this.onFilterUp),C.remove(this.inputElement,"keydown",this.onFilterDown)):(C.add(this.inputElement,"input",this.onInput,this),C.add(this.inputElement,"keyup",this.onFilterUp,this),C.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&c(this.list)&&s.prototype.renderList.call(this);break;case"allowCustom":break;default:var a=this.getPropObject(o,t,i);s.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty),this.isFiltering()&&"dataSource"===o&&c(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&s.prototype.renderList.call(this)}}},e.prototype.render=function(){s.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&c(this.list)&&s.prototype.renderList.call(this),this.renderComplete()},e.prototype.getModuleName=function(){return"combobox"},e.prototype.addItem=function(t,i){s.prototype.addItem.call(this,t,i)},e.prototype.filter=function(t,i,n){s.prototype.filter.call(this,t,i,n)},e.prototype.showPopup=function(t){s.prototype.showPopup.call(this,t)},e.prototype.hidePopup=function(t){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!c(this.listData)){var n=this.isEscapeKey;this.isEscapeKey&&(ie.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var r=this.isSelectCustom?{text:""}:this.getItemData(),o=c(this.list)?null:this.list.querySelector("."+Je.selected);if(this.inputElement&&r.text===this.inputElement.value&&!c(o))return this.isSelected&&(this.onChangeEvent(t),this.isSelectCustom=!1),void s.prototype.hidePopup.call(this,t);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var a=this.sortedData,l=this.typeOfData(a).typeof,h=yf(this.inputElement.value,this.liCollections,"Equal",!0,a,this.fields,l);this.selectedLI=h.item,c(h.index)&&(h.index=yf(this.inputElement.value,this.liCollections,"StartsWith",!0,a,this.fields,l).index),this.activeIndex=h.index,c(this.selectedLI)?n&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}!this.isEscapeKey&&this.isTyped&&!this.isInteracted&&this.customValue(t)}c(this.listData)&&this.allowCustom&&!c(i)&&i!==this.value&&this.customValue(),s.prototype.hidePopup.call(this,t)},e.prototype.focusIn=function(){this.enabled&&(E.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),s.prototype.focusIn.call(this))},e.prototype.clear=function(){this.value=null},e.prototype.focusOut=function(t){s.prototype.focusOut.call(this,t)},e.prototype.getItems=function(){return s.prototype.getItems.call(this)},e.prototype.getDataByValue=function(t){return s.prototype.getDataByValue.call(this,t)},e.prototype.renderHightSearch=function(){},nr([v(!1)],e.prototype,"autofill",void 0),nr([v(!0)],e.prototype,"allowCustom",void 0),nr([v({})],e.prototype,"htmlAttributes",void 0),nr([v(!1)],e.prototype,"allowFiltering",void 0),nr([v(null)],e.prototype,"query",void 0),nr([v(null)],e.prototype,"index",void 0),nr([v(!0)],e.prototype,"showClearButton",void 0),nr([v(!1)],e.prototype,"enableRtl",void 0),nr([V()],e.prototype,"customValueSpecifier",void 0),nr([V()],e.prototype,"filtering",void 0),nr([v(null)],e.prototype,"valueTemplate",void 0),nr([v("Never")],e.prototype,"floatLabelType",void 0),nr([v(null)],e.prototype,"filterBarPlaceholder",void 0),nr([v(null)],e.prototype,"cssClass",void 0),nr([v(null)],e.prototype,"headerTemplate",void 0),nr([v(null)],e.prototype,"footerTemplate",void 0),nr([v(null)],e.prototype,"placeholder",void 0),nr([v("100%")],e.prototype,"width",void 0),nr([v("300px")],e.prototype,"popupHeight",void 0),nr([v("100%")],e.prototype,"popupWidth",void 0),nr([v(!1)],e.prototype,"readonly",void 0),nr([v(null)],e.prototype,"text",void 0),nr([v(null)],e.prototype,"value",void 0),nr([et],e)}(yh);Je.root="e-autocomplete",Je.icon="e-input-group-icon e-ddl-icon e-search-icon",new Int16Array(286),new Uint8Array(286),new Int16Array(30),new Uint8Array(30),function(s){var i;(i=s.ForceEncoding||(s.ForceEncoding={}))[i.None=0]="None",i[i.Ascii=1]="Ascii",i[i.Unicode=2]="Unicode"}(xb||(xb={})),oo(function(s){return'<span class="e-fe-text">'+s.name+"</span>"}),oo(function(s){return'<span class="e-fe-size">'+s.size+"</span>"});var Kp=new qt;function SS(s,e,t){if(c(e)||""===e)return"";var i,n;switch(s){case"Color":var r=e;i=r.length>7?r.slice(0,-2):r;break;case"Date":i=Kp.formatDate(e,{format:n=t.format,type:s,skeleton:X()?"d":"yMd"});break;case"DateRange":var o=e;i=Kp.formatDate(o[0],{format:n=t.format,type:s,skeleton:X()?"d":"yMd"})+" - "+Kp.formatDate(o[1],{format:n,type:s,skeleton:X()?"d":"yMd"});break;case"DateTime":i=c(n=t.format)||""===n?Kp.formatDate(e,{format:n,type:s,skeleton:X()?"d":"yMd"})+" "+Kp.formatDate(e,{format:n,type:s,skeleton:X()?"t":"hm"}):Kp.formatDate(e,{format:n,type:s,skeleton:X()?"d":"yMd"});break;case"Time":i=Kp.formatDate(e,{format:n=t.format,type:s,skeleton:X()?"t":"hm"});break;case"Numeric":n=c(t.format)?"n2":t.format;var a=c(e)?null:"number"==typeof e?e:Kp.parseNumber(e);i=Kp.formatNumber(a,{format:n});break;default:i=e.toString()}return i}function mK(s,e){if(c(e)||""===e)return e;if("Date"!==s&&"Time"!==s&&"DateTime"!==s||"string"!=typeof e){if("DateRange"===s)if("object"==typeof e&&"string"==typeof e[0])e=[new Date(e[0]),new Date(e[1])];else if("string"==typeof e){var t=e.split("-");e=[new Date(t[0]),new Date(t[1])]}}else e=new Date(e);return e}var VK,gE="set-focus",Fke=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),vK=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Rke=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Fke(e,s),vK([v("")],e.prototype,"title",void 0),vK([v(null)],e.prototype,"model",void 0),e}(ce),yK={AutoComplete:"auto-complete",Color:"color-picker",ComboBox:"combo-box",DateRange:"date-range-picker",MultiSelect:"multi-select",RTE:"rte",Slider:"slider",Time:"time-picker"},bK={Click:{editAreaClick:"Click to edit"},DblClick:{editAreaDoubleClick:"Double click to edit"},EditIconClick:{editAreaClick:"Click to edit"}},wK="e-inplaceeditor",_B="e-inplaceeditor-tip",jB="e-editable-value-wrapper",SK="e-editable-inline",mE="e-editable-component",qB="e-editable-error",iy="e-editable-elements",vE="e-editable-open",CK="e-btn-save",IK="e-btn-cancel",xK="e-rte-spin-wrap",TK="e-control-overlay",yE="e-disable",Cu="e-hide",WB="e-rtl",ny="e-error",bE="e-loading",Xke=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),fi=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ry=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.needsID=!0,n}return Xke(e,s),e.prototype.initializeValue=function(){this.initRender=!0,this.isTemplate=!1,this.isVue=!1,this.isExtModule=!1,this.submitBtn=void 0,this.cancelBtn=void 0,this.isClearTarget=!1,this.btnElements=void 0,this.dataManager=void 0,this.oldValue=void 0,this.divComponents=["RTE","Slider"],this.clearComponents=["AutoComplete","Mask","Text"],this.dateType=["Date","DateTime","Time"],this.inputDataEle=["Date","DateTime","DateRange","Time","Numeric"],this.dropDownEle=["AutoComplete","ComboBox","DropDownList","MultiSelect"],this.moduleList=["AutoComplete","Color","ComboBox","DateRange","MultiSelect","RTE","Slider","Time"]},e.prototype.preRender=function(){this.initializeValue(),this.onScrollResizeHandler=this.scrollResizeHandler.bind(this),c(this.model)&&this.setProperties({model:{}},!0),this.titleEle=this.createElement("div",{className:"e-editable-title"}),!c(this.popupSettings.model)&&this.popupSettings.model.afterOpen&&(this.afterOpenEvent=this.popupSettings.model.afterOpen)},e.prototype.render=function(){c(this.element.getAttribute("tabindex"))&&this.element.setAttribute("tabindex","0"),this.checkIsTemplate(),this.disable(this.disabled),this.updateAdaptor(),this.appendValueElement(),this.updateValue(),"Never"===this.textOption?this.renderValue(this.checkValue(SS(this.type,this.value,this.model))):this.renderInitialValue(),this.wireEvents(),this.setRtl(this.enableRtl),this.enableEditor(this.enableEditMode,!0),this.setClass("add",this.cssClass),this.renderComplete()},e.prototype.setClass=function(t,i){if(!this.isEmpty(i))for(var n=i.split(" "),r=0;r<n.length;r++)""!==n[r].trim()&&("add"===t?M([this.element],[n[r]]):A([this.element],[n[r]]))},e.prototype.appendValueElement=function(){this.valueWrap=this.createElement("div",{id:this.element.id+"_wrap",className:jB}),X()||(this.element.innerHTML=""),this.valueEle=this.createElement("span",{className:"e-editable-value"}),this.editIcon=this.createElement("span",{className:"e-editable-overlay-icon e-icons",attrs:{title:this.getLocale({editIcon:"Click to edit"},"editIcon")}}),this.valueWrap.appendChild(this.valueEle),this.valueWrap.appendChild(this.editIcon),this.element.appendChild(this.valueWrap)},e.prototype.renderInitialValue=function(){!(["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1)||c(this.value)||this.isEmpty(this.value.toString())||c(this.model.fields)||c(this.model.dataSource)?this.renderValue(this.checkValue(SS(this.type,this.value,this.model))):(this.renderValue(this.getLocale({loadingText:"Loading..."},"loadingText")),this.valueWrap.classList.add(bE),ao({target:this.valueWrap,width:10}),En(this.valueWrap),this.getInitFieldMapValue())},e.prototype.getInitFieldMapValue=function(){var t=this,i=this.model,n=i.fields.text,r=i.fields.value,o=c(i.query)?new Me:i.query;i.dataSource instanceof he?i.dataSource.executeQuery(this.getInitQuery(i,o)).then(function(a){t.updateInitValue(n,r,a.result)}):this.updateInitValue(n,r,new he(i.dataSource).executeLocal(this.getInitQuery(i,o)))},e.prototype.getInitQuery=function(t,i){var n,r=t.fields.value,o=this.value;if("MultiSelect"!==this.type||"object"!=typeof this.value)n=new Et(r,"equal",this.value);else for(var a=0,l=0,h=o;l<h.length;l++){var d=h[l];n=0===a?n=new Et(r,"equal",d):n.or(r,"equal",d),a++}return i.where(n)},e.prototype.updateInitValue=function(t,i,n){if(!(n.length<=0)){if(1===n.length)this.valueEle.innerHTML=this.checkValue(R(c(t)?i:t,n[0]));else{for(var r=[],o=0,a=n;o<a.length;o++){var l=a[o];r.push(R(c(t)?i:t,l))}this.valueEle.innerHTML=this.checkValue(r.toString())}pr(this.valueWrap),this.valueWrap.classList.remove(bE)}},e.prototype.renderValue=function(t){this.enableHtmlSanitizer&&"RTE"!==this.type&&"MultiSelect"!==this.type?this.valueEle.innerText=t:this.valueEle.innerHTML=this.enableHtmlParse?t:function Nke(s){for(var e=[],t=s.length-1;t>=0;t--)e.unshift(["&#",s[t].charCodeAt(0),";"].join(""));return e.join("")}(t),"Color"===this.type&&ge(this.valueEle,{color:t}),"Inline"===this.mode&&this.isEditorOpen()&&A([this.valueWrap],[Cu])},e.prototype.isEditorOpen=function(){return!(this.isVue&&(this.enableEditMode||!c(this.valueWrap)&&!this.valueWrap.classList.contains(Cu)&&!this.valueWrap.classList.contains("e-tooltip")))},e.prototype.renderEditor=function(){if(this.prevValue=this.value,this.beginEditArgs={mode:this.mode,cancelFocus:!1,cancel:!1},this.trigger("beginEdit",this.beginEditArgs),!this.beginEditArgs.cancel){var t=void 0,i=H("."+jB,this.element);if("EditIconClick"!==this.editableOn&&i.parentElement.removeAttribute("title"),!this.valueWrap.classList.contains(vE)){if("Inline"===this.mode)M([this.valueWrap],[Cu]),this.inlineWrapper=this.createElement("div",{className:SK}),this.element.appendChild(this.inlineWrapper),["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1?this.checkRemoteData(this.model):this.renderAndOpen();else{!c(this.popupSettings.model)&&this.popupSettings.model.afterOpen&&(this.popupSettings.model.afterOpen=this.afterOpenHandler.bind(this));var n=this.createElement("div",{className:"e-editable-popup"});this.isEmpty(this.popupSettings.title)||(this.titleEle.innerHTML=this.popupSettings.title,n.appendChild(this.titleEle)),t={content:n,opensOn:"Custom",enableRtl:this.enableRtl,cssClass:_B,afterOpen:this.afterOpenHandler.bind(this)},n.appendChild(this.renderControl(document.body)),Q(t,this.popupSettings.model,t,!0),this.tipObj=new za(t),this.tipObj.appendTo(i),this.tipObj.open(i)}"Ignore"!==this.actionOnBlur&&this.wireDocEvent(),M([this.valueWrap],[vE]),this.setProperties({enableEditMode:!0},!0),this.isReact&&this.renderReactTemplates()}}},e.prototype.renderAndOpen=function(){this.renderControl(this.inlineWrapper),this.afterOpenHandler(null)},e.prototype.checkRemoteData=function(t){var i=this;t.dataSource instanceof he?(t.dataBound=function(){i.afterOpenHandler(null)},this.renderControl(this.inlineWrapper),(c(t.value)&&c(this.value)||t.value===this.value&&!c(t.value)&&0===t.value.length)&&this.showDropDownPopup()):this.renderAndOpen()},e.prototype.showDropDownPopup=function(){"DropDownList"===this.type?(this.model.allowFiltering||this.componentObj.focusIn(),this.componentObj.showPopup()):this.isExtModule&&this.notify("MultiSelect"===this.type?gE:"show-popup",{})},e.prototype.setAttribute=function(t,i){var n=this.name&&0!==this.name.length?this.name:this.element.id;i.forEach(function(r){t.setAttribute(r,"id"===r?n+"_editor":n)})},e.prototype.renderControl=function(t){var i;this.containerEle=this.createElement("div",{className:"e-editable-wrapper"}),this.loader=this.createElement("div",{className:"e-editable-loading"}),this.formEle=this.createElement("form",{className:"e-editable-form"});var n=this.createElement("div",{className:"e-component-group"}),r=this.createElement("div",{className:mE});return t.appendChild(this.containerEle),this.loadSpinner(),this.containerEle.appendChild(this.formEle),this.formEle.appendChild(n),this.isTemplate?this.appendTemplate(r,this.template):(Array.prototype.indexOf.call(this.divComponents,this.type)>-1?(i=this.createElement("div"),this.setAttribute(i,["id"])):(i=this.createElement("input"),this.setAttribute(i,["id","name"])),this.componentRoot=i,r.appendChild(i),r.appendChild(this.loader)),n.appendChild(r),n.appendChild(this.createElement("div",{className:qB})),this.appendButtons(this.formEle),this.isTemplate||this.renderComponent(i),this.removeSpinner(),this.submitOnEnter&&this.wireEditorKeyDownEvent(this.containerEle),this.containerEle},e.prototype.appendButtons=function(t){this.showButtons&&t&&(this.btnElements=this.renderButtons(),t.appendChild(this.btnElements),this.wireBtnEvents())},e.prototype.renderButtons=function(){var t=this.createElement("div",{className:"e-editable-action-buttons"}),i=c(this.saveButton.content)||0===this.saveButton.content.length?"":" e-primary";return this.submitBtn=this.createButtons({constant:"save",type:"submit",container:t,title:{save:"Save"},model:this.saveButton,className:CK+i}),this.cancelBtn=this.createButtons({type:"button",constant:"cancel",title:{cancel:"Cancel"},container:t,model:this.cancelButton,className:IK}),t},e.prototype.createButtons=function(t){var i=void 0;if(Object.keys(t.model).length>0){var n=this.createElement("button",{className:t.className,attrs:{type:t.type,title:"save"==t.constant?c(this.saveButton.content)?this.getLocale(t.title,t.constant):this.saveButton.content:c(this.cancelButton.content)?this.getLocale(t.title,t.constant):this.cancelButton.content}});t.container.appendChild(n),i=new li(t.model,n)}return i},e.prototype.renderComponent=function(t){var i;if(this.isExtModule=Array.prototype.indexOf.call(this.moduleList,this.type)>-1,i=c(this.model.cssClass)?iy:this.model.cssClass.indexOf(iy)<0?""===this.model.cssClass?iy:this.model.cssClass+" "+iy:this.model.cssClass,Q(this.model,this.model,{cssClass:i,enableRtl:this.enableRtl,locale:this.locale,change:this.changeHandler.bind(this)}),c(this.value)||this.updateModelValue(!1),this.isExtModule)this.notify("render",{module:yK[this.type],target:t,type:this.type});else{switch(c(this.model.showClearButton)&&!X()&&(this.model.showClearButton=!0),this.type){case"Date":this.componentObj=new B0(this.model);break;case"DateTime":this.componentObj=new TI(this.model);break;case"DropDownList":this.componentObj=new yh(this.model);break;case"Mask":this.componentObj=new kj(this.model);break;case"Numeric":if(this.model.value){var n=new RegExp("[eE][-+]?([0-9]+)");this.model.value=n.test(this.model.value)?this.model.value:this.model.value.toString().replace(/[`~!@#$%^&*()_|\=?;:'",<>\{\}\[\]\\\/]/gi,"")}this.componentObj=new zr(this.model);break;case"Text":this.componentObj=new Hs(this.model)}this.componentObj.appendTo(t)}},e.prototype.updateAdaptor=function(){switch(this.adaptor){case"UrlAdaptor":this.dataAdaptor=new sa;break;case"WebApiAdaptor":this.dataAdaptor=new Wge;break;case"ODataV4Adaptor":this.dataAdaptor=new qge}},e.prototype.loadSpinner=function(t){M([this.loader],["e-show"]),"validate"!==t||"RTE"!==this.type&&"Color"!==this.type&&"Slider"!==this.type?this.spinObj={target:this.loader,width:E.isDevice?"16px":"14px"}:(M([this.loader],[xK]),M([this.getEditElement()],[TK]),this.spinObj={target:this.loader}),this.formEle&&M([this.formEle],[bE]),this.btnElements&&M([this.btnElements],[Cu]),ge(this.loader,{width:"100%"}),ao(this.spinObj),En(this.spinObj.target)},e.prototype.removeSpinner=function(t){this.loader.removeAttribute("style"),pr(this.spinObj.target),z(this.spinObj.target.firstChild),"submit"===t&&("RTE"===this.type||"Color"===this.type||"Slider"===this.type)&&(A([this.loader],[xK]),A([this.getEditElement()],[TK])),this.formEle&&A([this.formEle],[bE]),this.btnElements&&A([this.btnElements],[Cu]),A([this.loader],["e-show"])},e.prototype.getEditElement=function(){return H("."+iy,this.formEle)},e.prototype.getLocale=function(t,i){return new mi("inplace-editor",t,this.locale).getConstant(i)},e.prototype.checkValue=function(t){return this.isEmpty(t)?this.emptyText:t},e.prototype.extendModelValue=function(t){var i=this.model;Q(i,{value:t}),this.setProperties({model:i},!0)},e.prototype.updateValue=function(){this.oldValue=this.value,this.enableHtmlSanitizer&&"string"==typeof this.value&&(this.oldValue=this.sanitizeHelper(this.value)),c(this.value)||(this.setProperties({value:mK(this.type,this.oldValue)},!0),this.extendModelValue(mK(this.type,this.oldValue)))},e.prototype.updateModelValue=function(t){this.model.value="MultiSelect"!==this.type||this.isEmpty(this.value)?t?this.oldValue:this.value:t?this.oldValue.slice():this.value.slice()},e.prototype.setValue=function(){this.isExtModule?this.notify("update",{type:this.type}):this.componentObj&&("Numeric"===this.type&&null===this.componentObj.value&&this.componentObj.setProperties({value:null},!0),this.setProperties({value:this.componentObj.value},!0),this.extendModelValue(this.componentObj.value))},e.prototype.getDropDownsValue=function(t){var i;return Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1&&"MultiSelect"!==this.type?i=t?H(".e-"+this.type.toLocaleLowerCase(),this.containerEle).value:this.value.toString():"MultiSelect"===this.type&&(this.notify("access-value",{type:this.type}),i=t?this.printValue:this.value.join()),i},e.prototype.getSendValue=function(){return this.isEmpty(this.value)?"":Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1?this.getDropDownsValue(!1):Array.prototype.indexOf.call(this.dateType,this.type)>-1?this.value.toISOString():"DateRange"===this.type?this.value[0].toISOString()+" - "+this.value[1].toISOString():this.value.toString()},e.prototype.getRenderValue=function(){return"Mask"===this.type&&0!==this.componentObj.value.length?this.componentObj.getMaskedValue():Array.prototype.indexOf.call(this.inputDataEle,this.type)>-1?this.componentRoot.value:Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1?this.getDropDownsValue(!0):SS(this.type,this.value,this.model)},e.prototype.setRtl=function(t){t?M([this.element],[WB]):A([this.element],[WB])},e.prototype.setFocus=function(){this.isTemplate||(this.isExtModule?this.notify(gE,{}):this.componentObj.element.focus())},e.prototype.removeEditor=function(t){if(X()&&!this.isStringTemplate&&function Cl(s,e,t){var i=document.getElementById(s);if(i)for(var n=i.getElementsByClassName("blazor-inner-template"),r=0;r<n.length;r++){var o;o=c(t)?n[parseInt(r.toString(),10)].getAttribute("data-templateId"):n[parseInt(t.toString(),10)].getAttribute("data-templateId");var a=document.getElementById(o);if(a)for(var l=a.childNodes.length,h=0;h<l;h++)c(t)?n[parseInt(r.toString(),10)].appendChild(a.childNodes[0]):(n[parseInt(t.toString(),10)].appendChild(a.childNodes[0]),r=n.length)}}(this.element.id+"template"),this.tipObj&&this.formEle&&k(this.formEle,"."+_B).classList.add(Cu),this.unWireDocEvent(),this.destroyComponents(),this.formEle=void 0,c(H("."+SK,this.element))?this.tipObj&&("MultiSelect"===this.type&&(C.remove(this.containerEle,"mousedown",this.popMouseDown),C.remove(this.containerEle,"click",this.popClickHandler)),this.tipObj.close(),this.tipObj.destroy(),this.tipObj=void 0):(z(this.inlineWrapper),this.inlineWrapper=void 0),this.containerEle=void 0,A([this.valueWrap],[vE,Cu]),t||this.setProperties({enableEditMode:!1},!0),"EditIconClick"!==this.editableOn){var n="DblClick"===this.editableOn?"editAreaDoubleClick":"editAreaClick";c(this.valueWrap.parentElement)||this.valueWrap.parentElement.setAttribute("title",this.getLocale(bK[this.editableOn],n))}this.isReact&&this.clearTemplate()},e.prototype.destroyComponents=function(){this.showButtons&&this.destroyButtons(),this.isExtModule?this.notify("destroy-modules",{}):(this.templateEle&&(document.body.appendChild(this.templateEle),this.templateEle.style.display="none",this.templateEle=void 0),c(this.componentObj)||(this.componentObj.destroy(),this.componentObj=void 0)),this.formValidate&&(this.formValidate=void 0),this.submitOnEnter&&this.containerEle&&this.unWireEditorKeyDownEvent(this.containerEle)},e.prototype.destroyButtons=function(){c(this.submitBtn)||(C.remove(this.submitBtn.element,"mousedown",this.submitHandler),C.remove(this.submitBtn.element,"click",this.submitPrevent),C.remove(this.submitBtn.element,"keydown",this.btnKeyDownHandler),this.submitBtn.destroy(),this.submitBtn=void 0),c(this.cancelBtn)||(C.remove(this.cancelBtn.element,"mouseup",this.cancelBtnClick),C.remove(this.cancelBtn.element,"keydown",this.btnKeyDownHandler),this.cancelBtn.destroy(),this.cancelBtn=void 0),this.btnElements=void 0},e.prototype.getQuery=function(t){var i=new Me;return Object.keys(t).forEach(function(n){i.addParams(n,t[n])}),i},e.prototype.sendValue=function(){var t=this,i={data:{name:this.name,primaryKey:this.primaryKey,value:this.getSendValue()}};this.trigger("actionBegin",i,function(n){n.cancel?(t.removeSpinner("submit"),"Popup"===t.mode&&t.updateArrow()):(t.isEmpty(t.url)||t.isEmpty(t.primaryKey)||!t.initRender&&(t.initRender||t.prevValue===t.value)?t.triggerSuccess({data:{},value:n.data.value}):(t.dataManager=new he({url:t.url,adaptor:t.dataAdaptor}),"UrlAdaptor"===t.adaptor?t.dataManager.executeQuery(t.getQuery(n.data),t.successHandler.bind(t),t.failureHandler.bind(t)):t.dataManager.insert(n.data).then(function(a){return t.successHandler(a)}).catch(function(a){return t.failureHandler(a)})),t.dataManager=void 0)})},e.prototype.isEmpty=function(t){return!(!c(t)&&0!==t.length)},e.prototype.checkIsTemplate=function(){this.isTemplate=!c(this.template)&&""!==this.template},e.prototype.templateCompile=function(t,i){var n;"string"==typeof i&&(i=i.trim());var r=qe(i);if(!c(r)){var o=!(X()&&"function"!=typeof i&&!this.isStringTemplate&&0===i.indexOf("<div>Blazor"))||this.isStringTemplate;n=r({},this,"template",this.element.id+"template",o)}!c(r)&&n.length>0&&([].slice.call(n).forEach(function(a){t.appendChild(a)}),X()&&!this.isStringTemplate&&"function"!=typeof i&&0===i.indexOf("<div>Blazor")&&function cc(s,e,t,i,n){X()&&(window.sfBlazor.updateTemplate(e,Xh[""+s],s,t,n),!1!==i&&(Xh[""+s]=[]))}(this.element.id+"template","Template",this))},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var i=$t.beforeSanitize();Q(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i,function(r){i.cancel&&!c(i.helper)?t=i.helper(t):i.cancel||(t=$t.serializeValue(i,t))})}return t},e.prototype.appendTemplate=function(t,i){i="string"==typeof i?this.sanitizeHelper(i):i,this.setProperties({template:i},!0),"function"==typeof i?this.templateCompile(t,i):"string"==typeof i||c(i.innerHTML)?"."!==i[0]&&"#"!==i[0]||!document.querySelectorAll(i).length?this.templateCompile(t,i):(this.templateEle=document.querySelector(i),t.appendChild(this.templateEle),this.templateEle.style.display=""):(this.templateEle=i,t.appendChild(this.templateEle))},e.prototype.disable=function(t){t?M([this.element],[yE]):A([this.element],[yE])},e.prototype.enableEditor=function(t,i){i&&!t||(t?this.renderEditor():this.cancelHandler("cancel"))},e.prototype.checkValidation=function(t,i){var r,n=this;if(this.validationRules){var o=Object.keys(this.validationRules),a=Object.keys(this.validationRules[o[0]]).length;a="validateHidden"in this.validationRules[o[0]]?a-1:a;var l=0;this.formValidate=new Aj(this.formEle,{rules:this.validationRules,validationBegin:function(h){if("RTE"===n.type){var d=document.createElement("div");d.innerHTML=h.value,h.value=d.innerText}},validationComplete:function(h){l+=1,r={errorMessage:h.message,data:{name:n.name,primaryKey:n.primaryKey,value:n.checkValue(n.getSendValue())}},n.trigger("validating",r,function(d){"failure"===h.status?(h.errorElement.innerText=d.errorMessage,n.toggleErrorClass(!0)):n.toggleErrorClass(!1),!c(t)&&t&&(a===l||"failure"===h.status)&&(t=!1,n.afterValidation(i),l=0)})},customPlacement:function(h,d){n.formEle&&H("."+qB,n.formEle).appendChild(d)}}),l=0,this.formValidate.validate()}else""!==this.template?(r={errorMessage:"",data:{name:this.name,primaryKey:this.primaryKey,value:this.checkValue(this.getSendValue())}},this.trigger("validating",r,function(h){h.errorMessage?(H("."+qB,n.formEle).innerHTML=h.errorMessage,n.toggleErrorClass(!0)):n.toggleErrorClass(!1),n.afterValidation(i)})):this.afterValidation(i)},e.prototype.afterValidation=function(t){!this.formEle.classList.contains(ny)&&t&&(this.loadSpinner("validate"),"Popup"===this.mode&&this.updateArrow(),this.sendValue())},e.prototype.toggleErrorClass=function(t){if(!c(this.formEle)){var i=H(".e-input-group",this.formEle);o=ny,a=t?"add":"remove",[].slice.call([this.formEle,i]).forEach(function(l){l&&("add"===a?M([l],[o]):A([l],[o]))})}var o,a},e.prototype.updateArrow=function(){var t=this.tipObj.tipPointerPosition;this.tipObj.tipPointerPosition="Middle"===t?"Auto":"Middle",this.tipObj.tipPointerPosition=t,this.tipObj.dataBind()},e.prototype.triggerSuccess=function(t){var i=this,n=t.value;this.trigger("actionSuccess",t,function(r){i.oldValue=n,i.removeSpinner("submit"),r.cancel||i.renderValue(i.checkValue(r.value!==n?r.value:i.getRenderValue())),r.cancel&&"Inline"===i.mode&&A([i.valueWrap],[Cu]),i.removeEditor()})},e.prototype.triggerEndEdit=function(t){var i=this;this.trigger("endEdit",{cancel:!1,mode:this.mode,action:t},function(r){r.cancel||(i.formEle&&i.formEle.classList.contains(ny)&&(i.updateModelValue(!0),i.setProperties({value:i.oldValue},!0)),i.removeEditor())})},e.prototype.wireEvents=function(){this.wireEditEvent(this.editableOn),C.add(this.editIcon,"click",this.clickHandler,this),C.add(this.element,"keydown",this.valueKeyDownHandler,this),document.addEventListener("scroll",this.onScrollResizeHandler),window.addEventListener("resize",this.onScrollResizeHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&C.add(this.element,"mousedown",this.mouseDownHandler,this)},e.prototype.wireDocEvent=function(){C.add(document,"mousedown",this.docClickHandler,this)},e.prototype.wireEditEvent=function(t){"EditIconClick"!==t&&(this.element.setAttribute("title",this.getLocale(bK[t],"Click"===t?"editAreaClick":"editAreaDoubleClick")),E.isDevice&&E.isIos&&"DblClick"===t?this.touchModule=new hr(this.valueWrap,{tap:this.doubleTapHandler.bind(this)}):C.add(this.valueWrap,t.toLowerCase(),this.clickHandler,this))},e.prototype.wireEditorKeyDownEvent=function(t){C.add(t,"keydown",this.enterKeyDownHandler,this)},e.prototype.wireBtnEvents=function(){c(this.submitBtn)||(C.add(this.submitBtn.element,"mousedown",this.submitHandler,this),C.add(this.submitBtn.element,"click",this.submitPrevent,this),C.add(this.submitBtn.element,"keydown",this.btnKeyDownHandler,this)),c(this.cancelBtn)||(C.add(this.cancelBtn.element,"mouseup",this.cancelBtnClick,this),C.add(this.cancelBtn.element,"keydown",this.btnKeyDownHandler,this))},e.prototype.cancelBtnClick=function(t){this.cancelHandler("cancel"),this.trigger("cancelClick",t)},e.prototype.unWireEvents=function(){this.unWireEditEvent(this.editableOn),C.remove(this.editIcon,"click",this.clickHandler),document.removeEventListener("scroll",this.onScrollResizeHandler),window.removeEventListener("resize",this.onScrollResizeHandler),C.remove(this.element,"keydown",this.valueKeyDownHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&C.remove(this.element,"mousedown",this.mouseDownHandler)},e.prototype.unWireDocEvent=function(){C.remove(document,"mousedown",this.docClickHandler)},e.prototype.unWireEditEvent=function(t){"EditIconClick"!==t&&(this.element.removeAttribute("title"),E.isDevice&&E.isIos&&"DblClick"===t?(this.touchModule.destroy(),this.touchModule=void 0):C.remove(this.valueWrap,t.toLowerCase(),this.clickHandler))},e.prototype.unWireEditorKeyDownEvent=function(t){C.remove(t,"keydown",this.enterKeyDownHandler)},e.prototype.submitPrevent=function(t){t.preventDefault()},e.prototype.btnKeyDownHandler=function(t){var i=t.target;(13===t.keyCode&&13===t.which||32===t.keyCode&&32===t.which)&&(i.classList.contains(CK)?this.save():i.classList.contains(IK)&&this.cancelHandler("cancel")),9===t.keyCode&&!1===t.shiftKey&&(c(t.target.nextElementSibling)||"BUTTON"!==t.target.nextElementSibling.tagName)&&("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel"))},e.prototype.afterOpenHandler=function(t){"Popup"===this.mode&&"MultiSelect"===this.type&&(C.add(this.containerEle,"mousedown",this.popMouseDown,this),C.add(this.containerEle,"click",this.popClickHandler,this)),"Popup"===this.mode&&!this.isEmpty(this.titleEle.innerHTML)&&t.element.classList.add("e-editable-tip-title"),"RTE"===this.type?(this.rteModule.refresh(),this.setAttribute(H(".e-richtexteditor textarea",this.containerEle),["name"])):"Slider"===this.type&&(this.sliderModule.refresh(),this.setAttribute(H(".e-slider-input",this.containerEle),["name"])),this.beginEditArgs.cancelFocus||("Inline"===this.mode&&["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1&&this.model.dataSource instanceof he?this.showDropDownPopup():this.setFocus()),this.afterOpenEvent&&(this.tipObj.setProperties({afterOpen:this.afterOpenEvent},!0),this.tipObj.trigger("afterOpen",t))},e.prototype.popMouseDown=function(t){var i=t.target.classList;i.contains("e-chips-close")&&!i.contains("e-close-hooker")&&this.updateArrow()},e.prototype.doubleTapHandler=function(t){t.tapCount>1&&this.clickHandler(t.originalEvent)},e.prototype.clickHandler=function(t){"EditIconClick"!==this.editableOn&&t.stopPropagation(),this.renderEditor()},e.prototype.submitHandler=function(t){t.preventDefault(),this.save(),this.trigger("submitClick",t)},e.prototype.cancelHandler=function(t){this.triggerEndEdit(t)},e.prototype.popClickHandler=function(t){var i=H("."+jB,this.element);t.target.classList.contains("e-chips-close")&&this.tipObj.refresh(i)},e.prototype.successHandler=function(t){this.initRender=!1;var i={data:t,value:this.getSendValue()};this.triggerSuccess(i)},e.prototype.failureHandler=function(t){var i=this,n={data:t,value:this.getSendValue()};this.trigger("actionFailure",n,function(r){i.removeSpinner("submit"),"Popup"===i.mode&&i.updateArrow()})},e.prototype.enterKeyDownHandler=function(t){!k(t.target,"."+mE+" .e-richtexteditor")&&!t.currentTarget.getElementsByTagName("textarea")[0]&&(13===t.keyCode&&13===t.which&&k(t.target,"."+mE)?(this.save(),this.trigger("submitClick",t)):27===t.keyCode&&27===t.which&&this.cancelHandler("cancel"))},e.prototype.valueKeyDownHandler=function(t){9===t.keyCode&&!0===t.shiftKey&&"BUTTON"!==t.target.tagName&&("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel")),13===t.keyCode&&13===t.which&&t.target.classList.contains(wK)&&!this.valueWrap.classList.contains(vE)&&!this.element.classList.contains(yE)&&(t.preventDefault(),this.renderEditor())},e.prototype.mouseDownHandler=function(t){t.target.classList.contains("e-clear-icon")&&(this.isClearTarget=!0)},e.prototype.scrollResizeHandler=function(){"Popup"===this.mode&&this.tipObj&&!E.isDevice&&this.triggerEndEdit("cancel")},e.prototype.docClickHandler=function(t){var i=t.target;if(this.isClearTarget)this.isClearTarget=!1;else{var n=k(i,"."+wK),r=k(i,"."+_B),o=k(i,"."+iy),a=k(i,".e-rte-elements");!c(n)&&n.isEqualNode(this.element)||!c(r)&&this.tipObj&&r.id.indexOf(this.valueWrap.id)>-1||!c(o)||!c(a)||i.classList.contains("e-chips-close")||("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel"))}},e.prototype.changeHandler=function(t){var i={previousValue:void 0===this.compPrevValue?this.value:this.compPrevValue,value:t.value};("AutoComplete"===this.type||"ComboBox"===this.type||"DropDownList"===this.type)&&(i.itemData=t.itemData,i.previousItemData=t.previousItemData),this.compPrevValue=i.value,this.trigger("change",i)},e.prototype.validate=function(){this.checkValidation(!0,!1)},e.prototype.save=function(){var t=this;this.formEle&&(this.element.focus(),this.editEle=H("."+mE,this.formEle),H("."+ny,this.editEle),this.isTemplate||this.setValue(),this.trigger("endEdit",{cancel:!1,mode:this.mode,action:"submit"},function(r){r.cancel||t.checkValidation(!0,!0)}))},e.prototype.destroy=function(){var t=this;for(this.removeEditor(X()),this.isExtModule&&this.notify("destroy",{}),this.unWireEvents(),[yE,WB].forEach(function(n){A([t.element],[n])});this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild);X()&&this.isServerRendered||s.prototype.destroy.call(this),this.isReact&&this.clearTemplate()},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.requiredModules=function(){var t=[];return t.push({member:yK[this.type],args:[this]}),t},e.prototype.getModuleName=function(){return"inplaceeditor"},e.prototype.onPropertyChanged=function(t,i){if(!this.validationRules||c(this.element.querySelectorAll("."+ny))||!(this.element.querySelectorAll("."+ny).length>0)){if(this.isEditorOpen()){var r="enableEditMode"in t;r&&i.enableEditMode&&!t.enableEditMode||!r&&this.enableEditMode?this.triggerEndEdit("cancel"):this.removeEditor()}for(var o=0,a=Object.keys(t);o<a.length;o++)switch(a[o]){case"showButtons":t.showButtons?this.appendButtons(this.formEle):this.destroyButtons();break;case"value":this.updateValue(),"Never"===this.textOption?this.renderValue(this.checkValue(SS(this.type,this.value,this.model))):this.renderInitialValue();break;case"emptyText":"Never"===this.textOption?this.renderValue(this.checkValue(SS(this.type,this.value,this.model))):this.renderInitialValue();break;case"template":this.checkIsTemplate();break;case"disabled":this.disable(t.disabled);break;case"enableRtl":this.setRtl(t.enableRtl);break;case"cssClass":this.setClass("remove",i.cssClass),this.setClass("add",t.cssClass);break;case"mode":this.enableEditor(this.enableEditMode);break;case"enableEditMode":this.enableEditor(t.enableEditMode);break;case"editableOn":this.unWireEditEvent(i.editableOn),"EditIconClick"!==t.editableOn&&this.wireEditEvent(t.editableOn)}}},fi([v("")],e.prototype,"name",void 0),fi([v(null)],e.prototype,"value",void 0),fi([v("")],e.prototype,"template",void 0),fi([v(!0)],e.prototype,"enableHtmlSanitizer",void 0),fi([v(!0)],e.prototype,"enableHtmlParse",void 0),fi([v("")],e.prototype,"cssClass",void 0),fi([v("")],e.prototype,"primaryKey",void 0),fi([v("Empty")],e.prototype,"emptyText",void 0),fi([v("")],e.prototype,"url",void 0),fi([v("Popup")],e.prototype,"mode",void 0),fi([v("UrlAdaptor")],e.prototype,"adaptor",void 0),fi([v("Text")],e.prototype,"type",void 0),fi([v("Click")],e.prototype,"editableOn",void 0),fi([v("Never")],e.prototype,"textOption",void 0),fi([v("Submit")],e.prototype,"actionOnBlur",void 0),fi([v(!1)],e.prototype,"enablePersistence",void 0),fi([v(!1)],e.prototype,"disabled",void 0),fi([v(!0)],e.prototype,"showButtons",void 0),fi([v(!1)],e.prototype,"enableEditMode",void 0),fi([v(!0)],e.prototype,"submitOnEnter",void 0),fi([Fe({},Rke)],e.prototype,"popupSettings",void 0),fi([v(null)],e.prototype,"model",void 0),fi([v({iconCss:"e-icons e-save-icon"})],e.prototype,"saveButton",void 0),fi([v({iconCss:"e-icons e-cancel-icon"})],e.prototype,"cancelButton",void 0),fi([v(null)],e.prototype,"validationRules",void 0),fi([V()],e.prototype,"created",void 0),fi([V()],e.prototype,"beforeSanitizeHtml",void 0),fi([V()],e.prototype,"actionBegin",void 0),fi([V()],e.prototype,"actionSuccess",void 0),fi([V()],e.prototype,"actionFailure",void 0),fi([V()],e.prototype,"validating",void 0),fi([V()],e.prototype,"beginEdit",void 0),fi([V()],e.prototype,"endEdit",void 0),fi([V()],e.prototype,"change",void 0),fi([V()],e.prototype,"submitClick",void 0),fi([V()],e.prototype,"cancelClick",void 0),fi([V()],e.prototype,"destroyed",void 0),fi([et],e)}(Lt),CS=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ci=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Ia="e-toast",sy="e-toast-container",EK="e-toast-title",DK="e-toast-full-width",kK="e-toast-content",wE="e-toast-message",SE="e-toast-progress",GB="e-toast-close-icon",YB="e-rtl",$ke=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return CS(e,s),Ci([v("Left")],e.prototype,"X",void 0),Ci([v("Top")],e.prototype,"Y",void 0),e}(ce),eAe=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return CS(e,s),Ci([v(null)],e.prototype,"model",void 0),Ci([v(null)],e.prototype,"click",void 0),e}(ce),AK=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return CS(e,s),Ci([v("FadeIn")],e.prototype,"effect",void 0),Ci([v(600)],e.prototype,"duration",void 0),Ci([v("ease")],e.prototype,"easing",void 0),e}(ce),tAe=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return CS(e,s),Ci([Fe({effect:"FadeIn",duration:600,easing:"ease"},AK)],e.prototype,"show",void 0),Ci([Fe({effect:"FadeOut",duration:600,easing:"ease"},AK)],e.prototype,"hide",void 0),e}(ce),LK=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.toastCollection=[],n.needsID=!0,n}return CS(e,s),e.prototype.getModuleName=function(){return"toast"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.hide("All"),this.element.classList.remove(sy),ge(this.element,{position:"","z-index":""}),!c(this.refElement)&&!c(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.element,this.refElement),z(this.refElement),this.refElement=void 0),this.isBlazorServer()||s.prototype.destroy.call(this)},e.prototype.preRender=function(){this.isDevice=E.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px"),c(this.target)&&(this.target=document.body),this.enableRtl&&!this.isBlazorServer()&&this.element.classList.add(YB)},e.prototype.render=function(){this.progressObj=[],this.intervalId=[],this.contentTemplate=null,this.toastTemplate=null,this.renderComplete(),this.initRenderClass=this.element.className},e.prototype.show=function(t){var i;if(c(t)||(this.templateChanges(t),i=JSON.parse(JSON.stringify(t)),Q(this,this,t)),c(this.toastContainer)){this.toastContainer=this.getContainer();var n="string"==typeof this.target?document.querySelector(this.target):"object"==typeof this.target?this.target:document.body;if(c(n))return;"BODY"===n.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",n.style.position="relative"),this.setPositioning(this.position),n.appendChild(this.toastContainer)}this.isBlazorServer()&&this.element.classList.contains("e-control")?this.isToastModel(t):(this.toastEle=this.createElement("div",{className:Ia,id:yt("toast")}),this.setWidthHeight(),this.setCSSClass(this.cssClass),c(this.template)||""===this.template?this.personalizeToast():this.templateRendering(),this.setProgress(),this.setCloseButton(),this.setAria(),this.appendToTarget(t),this.isDevice&&screen.width<768&&new hr(this.toastEle,{swipe:this.swipeHandler.bind(this)}),c(i)||(Q(i,{element:[this.toastEle]},!0),this.toastCollection.push(i)),this.isReact&&this.renderReactTemplates())},e.prototype.showToast=function(t,i){this.toastEle=this.element.querySelector("#"+t),this.show(i)},e.prototype.isToastModel=function(t){this.toastContainer=this.element,this.setPositioning(this.position),c(this.element.lastElementChild)||this.setProgress(),this.setAria(),this.appendToTarget(t)},e.prototype.swipeHandler=function(t){var i=k(t.originalEvent.target,"."+Ia+":not(."+sy+")"),n=this.animation.hide.effect;c(i)||("Right"===t.swipeDirection?(this.animation.hide.effect="SlideRightOut",this.hideToast("swipe",i)):"Left"===t.swipeDirection&&(this.animation.hide.effect="SlideLeftOut",this.hideToast("swipe",i)),this.animation.hide.effect=n)},e.prototype.templateChanges=function(t){!Oe(t.content)&&!c(this.contentTemplate)&&this.content!==t.content&&this.clearContentTemplate(),!Oe(t.template)&&!c(this.toastTemplate)&&this.template!==t.template&&this.clearToastTemplate()},e.prototype.setCSSClass=function(t){if(t){var i=-1!==t.indexOf(",")?",":" ";ze(this.toastEle,t.split(i),[]),this.toastContainer&&ze(this.toastContainer,t.split(i),[])}},e.prototype.setWidthHeight=function(){"300px"===this.width?this.toastEle.style.width=oe(this.width):"100%"===this.width?this.toastContainer.classList.add(DK):(this.toastEle.style.width=oe(this.width),this.toastContainer.classList.remove(DK)),this.toastEle.style.height=oe(this.height)},e.prototype.templateRendering=function(){this.fetchEle(this.toastEle,this.template,"template")},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var i=$t.beforeSanitize();Q(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!c(i.helper)?t=i.helper(t):i.cancel||(t=$t.serializeValue(i,t))}return t},e.prototype.hide=function(t){this.hideToast("",t)},e.prototype.hideToast=function(t,i){if(!c(this.toastContainer)&&0!==this.toastContainer.childElementCount){if("string"==typeof i&&"All"===i){for(var n=0;n<this.toastContainer.childElementCount;n++)this.destroyToast(this.toastContainer.children[n],t);return}c(i)&&(i=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(i,t)}},e.prototype.fetchEle=function(t,i,n){var r,o,a,l;if(i="string"==typeof i?this.sanitizeHelper(i):i,l=t.classList.contains(EK)?this.element.id+"title":t.classList.contains(kK)?this.element.id+"content":this.element.id+"template",!c(o="content"===n?this.contentTemplate:this.toastTemplate))return t.appendChild(o.cloneNode(!0)),t;try{if("function"!=typeof i&&document.querySelectorAll(i).length>0){var h=null;"title"!==n&&(h=document.querySelector(i),t.appendChild(h),h.style.display="");var d=c(h)?o:h.cloneNode(!0);"content"===n?this.contentTemplate=d:this.toastTemplate=d}else r=qe(i)}catch{r=qe(i)}return c(r)||(a=this.isBlazorServer()?r({},this,n,l,!0):r({},this,n,null,!0)),c(a)||!(a.length>0)||c(a[0].tagName)&&1===a.length?"function"!=typeof i&&0===t.childElementCount&&(t.innerHTML=i):[].slice.call(a).forEach(function(u){c(u.tagName)||(u.style.display=""),t.appendChild(u)}),t},e.prototype.clearProgress=function(t){c(this.intervalId[t])||(clearInterval(this.intervalId[t]),delete this.intervalId[t]),c(this.progressObj[t])||(clearInterval(this.progressObj[t].intervalId),delete this.progressObj[t])},e.prototype.removeToastContainer=function(t){t&&this.toastContainer.classList.contains("e-toast-util")&&z(this.toastContainer)},e.prototype.clearContainerPos=function(t){var i=this;this.isBlazorServer()?this.toastContainer=null:(this.customPosition?(ge(this.toastContainer,{left:"",top:""}),this.removeToastContainer(t),this.toastContainer=null,this.customPosition=!1):([Ia+"-top-left",Ia+"-top-right",Ia+"-bottom-left",Ia+"-bottom-right",Ia+"-bottom-center",Ia+"-top-center",Ia+"-full-width"].forEach(function(n){!c(i.toastContainer)&&i.toastContainer.classList.contains(n)&&i.toastContainer.classList.remove(n)}),this.removeToastContainer(t),this.toastContainer=null),c(this.contentTemplate)||this.clearContentTemplate(),c(this.toastTemplate)||this.clearToastTemplate())},e.prototype.clearContentTemplate=function(){this.contentTemplate.style.display="none",document.body.appendChild(this.contentTemplate),this.contentTemplate=null},e.prototype.clearToastTemplate=function(){this.toastTemplate.style.display="none",document.body.appendChild(this.toastTemplate),this.toastTemplate=null},e.prototype.isBlazorServer=function(){return X()&&this.isServerRendered},e.prototype.destroyToast=function(t,i){for(var r,n=this,o=0;o<this.toastCollection.length;o++)this.toastCollection[o].element[0]===t&&(r=this.toastCollection[o],this.toastCollection.splice(o,1));var a={options:this,cancel:!1,type:i,element:t,toastContainer:this.toastContainer},l=this.animation.hide,h={duration:l.duration,name:l.effect,timingFunction:l.easing},d=parseInt(t.id.split("toast_")[1],10),p=this.isBlazorServer()?{options:r,toastContainer:this.toastContainer}:{options:r,toastContainer:this.toastContainer,toastObj:this};this.trigger("beforeClose",a,function(u){u.cancel||(!c(n.progressObj[d])&&!c(t.querySelector("."+SE))&&(n.progressObj[d].progressEle.style.width="0%"),h.end=function(){n.clearProgress(d),(!n.isBlazorServer()||c(r))&&z(t),n.trigger("close",p),0===n.toastContainer.childElementCount&&n.clearContainerPos(!0),l=null,h=null},new Gi(h).animate(t))})},e.prototype.personalizeToast=function(){this.setIcon(),this.setTitle(),this.setContent(),this.actionButtons()},e.prototype.setAria=function(){re(this.toastEle,{role:"alert"})},e.prototype.setPositioning=function(t){this.isBlazorServer()||(isNaN(parseFloat(t.X))&&isNaN(parseFloat(t.Y))?this.toastContainer.classList.add(Ia+"-"+t.Y.toString().toLowerCase()+"-"+t.X.toString().toLowerCase()):(this.customPosition=!0,ge(this.toastContainer,{left:oe(t.X),top:oe(t.Y)})))},e.prototype.setCloseButton=function(){if(this.showCloseButton){this.l10n=new mi("toast",{close:"Close"},this.locale),this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("close"),n=this.createElement("div",{className:GB+" e-icons ",attrs:{tabindex:"0","aria-label":i,role:"button"}});this.toastEle.classList.add("e-toast-header-close-icon"),this.toastEle.appendChild(n)}},e.prototype.setProgress=function(){if(this.timeOut>0){var t=parseInt(this.toastEle.id.split("toast_")[1],10);this.intervalId[t]=window.setTimeout(this.destroyToast.bind(this,this.toastEle),this.timeOut),this.progressObj[t]={hideEta:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[t].maxHideTime=parseFloat(this.timeOut+""),this.progressObj[t].hideEta=(new Date).getTime()+this.progressObj[t].maxHideTime,this.progressObj[t].element=this.toastEle,this.extendedTimeout>0&&(C.add(this.toastEle,"mouseover",this.toastHoverAction.bind(this,t)),C.add(this.toastEle,"mouseleave",this.delayedToastProgress.bind(this,t)),this.progressObj[t].timeOutId=this.intervalId[t]),this.showProgressBar&&(this.progressBarEle=this.createElement("div",{className:SE}),this.toastEle.insertBefore(this.progressBarEle,this.toastEle.children[0]),this.progressObj[t].intervalId=setInterval(this.updateProgressBar.bind(this,this.progressObj[t]),10),this.progressObj[t].progressEle=this.progressBarEle)}},e.prototype.toastHoverAction=function(t){clearTimeout(this.progressObj[t].timeOutId),clearInterval(this.progressObj[t].intervalId),this.progressObj[t].hideEta=0,c(this.progressObj[t].element.querySelector("."+SE))||(this.progressObj[t].progressEle.style.width="0%")},e.prototype.delayedToastProgress=function(t){var i=this.progressObj[t],n=i.element;i.timeOutId=window.setTimeout(this.destroyToast.bind(this,n),this.extendedTimeout),i.maxHideTime=parseFloat(this.extendedTimeout+""),i.hideEta=(new Date).getTime()+i.maxHideTime,c(n.querySelector("."+SE))||(i.intervalId=setInterval(this.updateProgressBar.bind(this,i),10))},e.prototype.updateProgressBar=function(t){var i=(t.hideEta-(new Date).getTime())/t.maxHideTime*100;t.progressEle.style.width=(i="Ltr"===this.progressDirection?100-i:i)+"%"},e.prototype.setIcon=function(){if(!c(this.icon)&&0!==this.icon.length){var t=this.createElement("div",{className:"e-toast-icon e-icons "+this.icon});this.toastEle.classList.add("e-toast-header-icon"),this.toastEle.appendChild(t)}},e.prototype.setTitle=function(){if(!c(this.title)){var t=this.createElement("div",{className:EK});t=this.fetchEle(t,this.title,"title");var i=this.createElement("div",{className:wE});i.appendChild(t),this.toastEle.appendChild(i)}},e.prototype.setContent=function(){var t=this.createElement("div",{className:kK}),i=this.element;if(c(this.content)||""===this.content){var n=""!==this.element.innerHTML.replace(/\s/g,"");if((i.children.length>0||n)&&(!i.firstElementChild||!i.firstElementChild.classList.contains(Ia))){this.innerEle=document.createDocumentFragment();for(var r=this.createElement("div");0!==i.childNodes.length;)this.innerEle.appendChild(this.element.childNodes[0]);t.appendChild(this.innerEle),[].slice.call(t.children).forEach(function(o){r.appendChild(o.cloneNode(!0))}),this.content=r,this.appendMessageContainer(t)}}else"object"!=typeof this.content||c(this.content.tagName)?(t=this.fetchEle(t,this.content,"content"),this.appendMessageContainer(t)):(t.appendChild(this.content),this.content=this.content.cloneNode(!0),this.appendMessageContainer(t))},e.prototype.appendMessageContainer=function(t){if(this.toastEle.querySelectorAll("."+wE).length>0)this.toastEle.querySelector("."+wE).appendChild(t);else{var i=this.createElement("div",{className:wE});i.appendChild(t),this.toastEle.appendChild(i)}},e.prototype.actionButtons=function(){var t=this,i=this.createElement("div",{className:"e-toast-actions"});[].slice.call(this.buttons).forEach(function(n){if(!c(n.model)){var r=t.createElement("button");r.setAttribute("type","button"),(c(n.model.cssClass)||0===n.model.cssClass.length)&&(n.model.cssClass="e-primary "+t.cssClass),r.classList.add("e-small"),new li(n.model,r),!c(n.click)&&"function"==typeof n.click&&C.add(r,"click",n.click),i.appendChild(r)}}),i.childElementCount>0&&this.appendMessageContainer(i)},e.prototype.appendToTarget=function(t){var i=this,n=this.isBlazorServer()?{options:t,element:this.toastEle,cancel:!1}:{options:t,toastObj:this,element:this.toastEle,cancel:!1};this.trigger("beforeOpen",n,function(r){if(r.cancel){if(i.isBlazorServer()){var o=parseInt(i.toastEle.id.split("toast_")[1],10);i.clearProgress(o),z(i.toastEle),0===i.toastContainer.childElementCount&&i.clearContainerPos()}}else i.isBlazorServer()||(i.toastEle.style.display="none"),i.newestOnTop&&0!==i.toastContainer.childElementCount?i.toastContainer.insertBefore(i.toastEle,i.toastContainer.children[0]):i.isBlazorServer()||i.toastContainer.appendChild(i.toastEle),A([i.toastEle],"e-blazor-toast-hidden"),C.add(i.toastEle,"click",i.clickHandler,i),C.add(i.toastEle,"keydown",i.keyDownHandler,i),i.toastContainer.style.zIndex=ed(i.toastContainer)+"",i.displayToast(i.toastEle,t)})},e.prototype.clickHandler=function(t){var i=this;this.isBlazorServer()||t.stopPropagation();var n=t.target,r=k(n,"."+Ia),o=this.isBlazorServer()?{element:r,cancel:!1,clickToClose:!1,originalEvent:t}:{element:r,cancel:!1,clickToClose:!1,originalEvent:t,toastObj:this},a=n.classList.contains(GB);this.trigger("click",o,function(l){(a&&!l.cancel||l.clickToClose)&&i.destroyToast(r,"click")})},e.prototype.keyDownHandler=function(t){if(t.target.classList.contains(GB)&&(13===t.keyCode||32===t.keyCode)){var n=k(t.target,"."+Ia);this.destroyToast(n,"key")}},e.prototype.displayToast=function(t,i){var n=this,r=this.animation.show,o={duration:r.duration,name:r.effect,timingFunction:r.easing},a=this.isBlazorServer()?{options:i,element:this.toastEle}:{options:i,toastObj:this,element:this.toastEle};o.begin=function(){t.style.display=""},o.end=function(){n.trigger("open",a)},new Gi(o).animate(t)},e.prototype.getContainer=function(){return this.element.classList.add(sy),this.element},e.prototype.onPropertyChanged=function(t,i){for(var n=this.element,r=0,o=Object.keys(t);r<o.length;r++)"enableRtl"===o[r]&&(t.enableRtl?n.classList.add(YB):n.classList.remove(YB))},Ci([v("300px")],e.prototype,"width",void 0),Ci([v("auto")],e.prototype,"height",void 0),Ci([v(null)],e.prototype,"title",void 0),Ci([v(null)],e.prototype,"content",void 0),Ci([v(!0)],e.prototype,"enableHtmlSanitizer",void 0),Ci([v(null)],e.prototype,"icon",void 0),Ci([v(null)],e.prototype,"cssClass",void 0),Ci([v(null)],e.prototype,"template",void 0),Ci([v(!0)],e.prototype,"newestOnTop",void 0),Ci([v(!1)],e.prototype,"showCloseButton",void 0),Ci([v(!1)],e.prototype,"showProgressBar",void 0),Ci([v(5e3)],e.prototype,"timeOut",void 0),Ci([v("Rtl")],e.prototype,"progressDirection",void 0),Ci([v(1e3)],e.prototype,"extendedTimeout",void 0),Ci([Fe({},tAe)],e.prototype,"animation",void 0),Ci([Fe({},$ke)],e.prototype,"position",void 0),Ci([Sn([{}],eAe)],e.prototype,"buttons",void 0),Ci([v(null)],e.prototype,"target",void 0),Ci([V()],e.prototype,"created",void 0),Ci([V()],e.prototype,"beforeSanitizeHtml",void 0),Ci([V()],e.prototype,"destroyed",void 0),Ci([V()],e.prototype,"open",void 0),Ci([V()],e.prototype,"beforeOpen",void 0),Ci([V()],e.prototype,"beforeClose",void 0),Ci([V()],e.prototype,"close",void 0),Ci([V()],e.prototype,"click",void 0),Ci([et],e)}(Lt);!function(s){s.show=function e(t,i,n){var r,o;if(document.querySelector("."+sy)?r=document.querySelector("."+sy):(r=F("div",{className:Ia+" "+sy+" e-toast-util"}),document.body.appendChild(r)),"string"==typeof t){var a=void 0,l=void 0;if(c(i))a="",l="";else switch(i){case"Warning":a="e-toast-warning",l="e-toast-warning-icon";break;case"Success":a="e-toast-success",l="e-toast-success-icon";break;case"Error":a="e-toast-danger",l="e-toast-error-icon";break;case"Information":a="e-toast-info",l="e-toast-info-icon"}o={content:t,cssClass:a,icon:l,timeOut:c(n)?5e3:n}}else o=t;var h=new LK(o);return h.appendTo(r),h.show(),h}}(VK||(VK={}));var xE=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ie=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},i2=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return xE(e,s),Ie([v(0)],e.prototype,"x",void 0),Ie([v(0)],e.prototype,"y",void 0),Ie([v(0)],e.prototype,"width",void 0),Ie([v(0)],e.prototype,"height",void 0),Ie([v(0)],e.prototype,"left",void 0),Ie([v(0)],e.prototype,"top",void 0),Ie([v(0)],e.prototype,"right",void 0),Ie([v(0)],e.prototype,"bottom",void 0),Ie([Fe({x:0,y:0},Ei)],e.prototype,"location",void 0),Ie([Fe(new nn(0,0),nn)],e.prototype,"size",void 0),e}(ce),PK=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return xE(e,s),Ie([v(!1)],e.prototype,"isBold",void 0),Ie([v(!1)],e.prototype,"isItalic",void 0),Ie([v(!1)],e.prototype,"isUnderline",void 0),Ie([v(!1)],e.prototype,"isStrikeout",void 0),e}(ce),TE=function(s){function e(t,i,n,r){return s.call(this,t,i,n,r)||this}return xE(e,s),Ie([v("")],e.prototype,"id",void 0),Ie([v("Rectangle")],e.prototype,"shapeAnnotationType",void 0),Ie([v(null)],e.prototype,"formFieldAnnotationType",void 0),Ie([v("")],e.prototype,"measureType",void 0),Ie([v("")],e.prototype,"author",void 0),Ie([v("")],e.prototype,"modifiedDate",void 0),Ie([v("")],e.prototype,"subject",void 0),Ie([v("")],e.prototype,"notes",void 0),Ie([v(!1)],e.prototype,"isCommentLock",void 0),Ie([v("black")],e.prototype,"strokeColor",void 0),Ie([v("#ffffff00")],e.prototype,"fillColor",void 0),Ie([v("#ffffff00")],e.prototype,"stampFillColor",void 0),Ie([v("black")],e.prototype,"stampStrokeColor",void 0),Ie([v("")],e.prototype,"data",void 0),Ie([v(1)],e.prototype,"opacity",void 0),Ie([v(1)],e.prototype,"thickness",void 0),Ie([v("")],e.prototype,"borderStyle",void 0),Ie([v("")],e.prototype,"borderDashArray",void 0),Ie([v(0)],e.prototype,"rotateAngle",void 0),Ie([v(!1)],e.prototype,"isCloudShape",void 0),Ie([v(0)],e.prototype,"cloudIntensity",void 0),Ie([v(40)],e.prototype,"leaderHeight",void 0),Ie([v(null)],e.prototype,"lineHeadStart",void 0),Ie([v(null)],e.prototype,"lineHeadEnd",void 0),Ie([v([])],e.prototype,"vertexPoints",void 0),Ie([v(null)],e.prototype,"sourcePoint",void 0),Ie([v("None")],e.prototype,"sourceDecoraterShapes",void 0),Ie([v("None")],e.prototype,"taregetDecoraterShapes",void 0),Ie([v(null)],e.prototype,"targetPoint",void 0),Ie([v([])],e.prototype,"segments",void 0),Ie([Fe({x:0,y:0},i2)],e.prototype,"bounds",void 0),Ie([v(0)],e.prototype,"pageIndex",void 0),Ie([v(-1)],e.prototype,"zIndex",void 0),Ie([v(null)],e.prototype,"wrapper",void 0),Ie([v(!1)],e.prototype,"isDynamicStamp",void 0),Ie([v("")],e.prototype,"dynamicText",void 0),Ie([v("")],e.prototype,"annotName",void 0),Ie([v({})],e.prototype,"review",void 0),Ie([v([])],e.prototype,"comments",void 0),Ie([v("#000")],e.prototype,"fontColor",void 0),Ie([v(16)],e.prototype,"fontSize",void 0),Ie([v("Helvetica")],e.prototype,"fontFamily",void 0),Ie([v("None")],e.prototype,"fontStyle",void 0),Ie([v(!1)],e.prototype,"enableShapeLabel",void 0),Ie([v("label")],e.prototype,"labelContent",void 0),Ie([v("#ffffff00")],e.prototype,"labelFillColor",void 0),Ie([v(15)],e.prototype,"labelMaxLength",void 0),Ie([v(1)],e.prototype,"labelOpacity",void 0),Ie([v("")],e.prototype,"annotationSelectorSettings",void 0),Ie([v("#ffffff00")],e.prototype,"labelBorderColor",void 0),Ie([v("left")],e.prototype,"textAlign",void 0),Ie([v("")],e.prototype,"signatureName",void 0),Ie([v(0)],e.prototype,"minHeight",void 0),Ie([v(0)],e.prototype,"minWidth",void 0),Ie([v(0)],e.prototype,"maxHeight",void 0),Ie([v(0)],e.prototype,"maxWidth",void 0),Ie([v(!1)],e.prototype,"isLock",void 0),Ie([v("UI Drawn Annotation")],e.prototype,"annotationAddMode",void 0),Ie([v("")],e.prototype,"annotationSettings",void 0),Ie([v(16)],e.prototype,"previousFontSize",void 0),Ie([Fe({isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1},PK)],e.prototype,"font",void 0),Ie([Fe({x:0,y:0},i2)],e.prototype,"labelBounds",void 0),Ie([v(null)],e.prototype,"customData",void 0),Ie([v(["None"])],e.prototype,"allowedInteractions",void 0),Ie([v(!0)],e.prototype,"isPrint",void 0),Ie([v(!1)],e.prototype,"isReadonly",void 0),Ie([v(0)],e.prototype,"pageRotation",void 0),Ie([v(!1)],e.prototype,"isAddAnnotationProgrammatically",void 0),e}(ce),ME=function(s){function e(t,i,n,r){return s.call(this,t,i,n,r)||this}return xE(e,s),Ie([v("")],e.prototype,"id",void 0),Ie([v("")],e.prototype,"signatureType",void 0),Ie([v("")],e.prototype,"name",void 0),Ie([v("")],e.prototype,"value",void 0),Ie([v(null)],e.prototype,"formFieldAnnotationType",void 0),Ie([v("#daeaf7ff")],e.prototype,"backgroundColor",void 0),Ie([v("black")],e.prototype,"color",void 0),Ie([v("#303030")],e.prototype,"borderColor",void 0),Ie([v("")],e.prototype,"tooltip",void 0),Ie([v(1)],e.prototype,"opacity",void 0),Ie([v(1)],e.prototype,"thickness",void 0),Ie([v(0)],e.prototype,"rotateAngle",void 0),Ie([Fe({x:0,y:0},i2)],e.prototype,"bounds",void 0),Ie([v(0)],e.prototype,"pageIndex",void 0),Ie([v(1)],e.prototype,"pageNumber",void 0),Ie([v(-1)],e.prototype,"zIndex",void 0),Ie([v(null)],e.prototype,"wrapper",void 0),Ie([v(16)],e.prototype,"fontSize",void 0),Ie([v("Helvetica")],e.prototype,"fontFamily",void 0),Ie([v("None")],e.prototype,"fontStyle",void 0),Ie([v("left")],e.prototype,"alignment",void 0),Ie([v(0)],e.prototype,"minHeight",void 0),Ie([v(0)],e.prototype,"minWidth",void 0),Ie([v(0)],e.prototype,"maxHeight",void 0),Ie([v(0)],e.prototype,"maxWidth",void 0),Ie([v(0)],e.prototype,"maxLength",void 0),Ie([v("visible")],e.prototype,"visibility",void 0),Ie([v(!0)],e.prototype,"isPrint",void 0),Ie([v(!1)],e.prototype,"isReadonly",void 0),Ie([v(!1)],e.prototype,"isChecked",void 0),Ie([v(!1)],e.prototype,"isSelected",void 0),Ie([v(!1)],e.prototype,"isRequired",void 0),Ie([v(!1)],e.prototype,"isMultiline",void 0),Ie([v(!1)],e.prototype,"isTransparent",void 0),Ie([v(!1)],e.prototype,"insertSpaces",void 0),Ie([v("")],e.prototype,"options",void 0),Ie([v()],e.prototype,"signatureIndicatorSettings",void 0),Ie([Fe({isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1},PK)],e.prototype,"font",void 0),Ie([v()],e.prototype,"selectedIndex",void 0),e}(ce),oAe=function(){function s(){this.pageIdTemp=0,this.zIndexTemp=-1,this.childNodesTemp=[],this.objects=[],this.zIndexTemp=-1,this.pageIdTemp=0}return Object.defineProperty(s.prototype,"pageId",{get:function(){return this.pageIdTemp},set:function(e){this.pageIdTemp=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"zIndex",{get:function(){return this.zIndexTemp},set:function(e){this.zIndexTemp=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"objects",{get:function(){return this.childNodesTemp},set:function(e){this.childNodesTemp=e},enumerable:!0,configurable:!0}),s}(),aAe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jp=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Tu=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return aAe(e,s),e.prototype.init=function(t){var i=new Yu;if(i.measureChildren=!1,i.children=[],this.formFields&&this.formFields.length>0)for(var n=0;n<this.formFields.length;n++){var r=t.pdfViewer.nameTable[this.formFields[parseInt(n.toString(),10)].id];i.children.push(r.wrapper)}else if(this.annotations)for(n=0;n<this.annotations.length;n++)c(this.annotations[parseInt(n.toString(),10)])||(r=t.pdfViewer.nameTable[this.annotations[parseInt(n.toString(),10)].id],i.children.push(r.wrapper));return this.wrapper=i,i},Jp([v(null)],e.prototype,"wrapper",void 0),Jp([Sn([],TE)],e.prototype,"annotations",void 0),Jp([Sn([],ME)],e.prototype,"formFields",void 0),Jp([v()],e.prototype,"width",void 0),Jp([v()],e.prototype,"height",void 0),Jp([v(0)],e.prototype,"rotateAngle",void 0),Jp([v(0)],e.prototype,"offsetX",void 0),Jp([v(0)],e.prototype,"offsetY",void 0),Jp([Fe({x:.5,y:.5},Ei)],e.prototype,"pivot",void 0),e}(ce);function xa(s){return"Line"===s.shapeAnnotationType||"LineWidthArrowHead"===s.shapeAnnotationType||"Distance"===s.shapeAnnotationType||"Polygon"===s.shapeAnnotationType}function hl(s,e){s&&e&&(s.formFieldAnnotationType?-1!==s.id.indexOf("diagram_helper")?(e.style.fill="transparent",e.style.strokeWidth=1,e.style.strokeDashArray=s.borderDashArray):(e.style.fill="transparent",e.style.strokeWidth=0):(e.style.fill=("#ffffff00"===s.fillColor?"transparent":s.fillColor)||"white",e.style.strokeColor=s.strokeColor?s.strokeColor:s.borderColor,e.style.color=s.strokeColor?s.strokeColor:s.borderColor,e.style.strokeWidth=s.thickness,("Image"===s.shapeAnnotationType||"SignatureText"===s.shapeAnnotationType||"SignatureImage"===s.shapeAnnotationType)&&(e.style.strokeWidth=0),e.style.strokeDashArray=s.borderDashArray,e.style.opacity=s.opacity))}function EE(s){for(var e=0,t=0;t<s.length-1;t++)e+=Ei.findLength(s[parseInt(t.toString(),10)],s[t+1]);return e}function DE(s,e){var t={width:s.actualSize.width,height:s.actualSize.height,x:s.offsetX-s.actualSize.width*s.pivot.x+.5,y:s.offsetY-s.actualSize.height*s.pivot.y+.5,angle:s.rotateAngle+s.parentTransform,fill:s.style.fill,stroke:s.style.strokeColor,pivotX:s.pivot.x,pivotY:s.pivot.y,strokeWidth:1,opacity:s.style.opacity,dashArray:s.style.strokeDashArray||"",visible:s.visible,id:s.id};return e&&(t.x+=e.tx,t.y+=e.ty),t}function st(s,e,t){var i={};if(s){t=s.propName;var a=[],l=[];if((a=a.concat(Object.keys(s.properties||s))).push("version"),t){var h=function lAe(s){return void 0!==s&&"string"==typeof s&&(s=R(s,window)),s}(e);l=h?h(t):[],a=a.concat(l)}for(var d=function dAe(s){switch(s){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}(t),p=0,u=a=a.concat(d);p<u.length;p++){var f=u[p];"historyManager"!==f&&("wrapper"!==f?s[f]&&s.hasOwnProperty("observers")||(i[""+f]=s[""+f]instanceof Array?hAe(-1===d.indexOf(f)&&s[""+t]?s[""+t][""+f]:s[""+f],e,f):!(s[""+f]instanceof Array)&&s[""+f]instanceof HTMLElement?s[""+f].cloneNode(!0).innerHtml:!(s[""+f]instanceof Array)&&s[""+f]instanceof Object?st(-1===d.indexOf(f)&&s[""+t]?s[""+t][""+f]:s[""+f]):s[""+f]):s[""+f]&&(i[""+f]={actualSize:{width:s[""+f].actualSize.width,height:s[""+f].actualSize.height},offsetX:s[""+f].offsetX,offsetY:s[""+f].offsetY}))}}return i}function hAe(s,e,t){var i;if(s){i=[];for(var n=0;n<s.length;n++)s[parseInt(n.toString(),10)]instanceof Array?i.push(s[parseInt(n.toString(),10)]):s[parseInt(n.toString(),10)]instanceof Object?i.push(st(s[parseInt(n.toString(),10)],e,t)):i.push(s[parseInt(n.toString(),10)])}return i}function kE(s,e){var t=s.vertexPoints.slice(0);return t&&t.length>0&&(s.sourcePoint=t[0],s.targetPoint=t[t.length-1]),t}function NK(s,e,t){var i=new $i,n=function cAe(s,e){for(var i,t="",n=[],r=0;r<e.length;)n.push({x:e[parseInt(r.toString(),10)].x,y:e[parseInt(r.toString(),10)].y}),r++;n=RK(s,n);for(var o=0;o<n.length;o++)i=n[parseInt(o.toString(),10)],0===o&&(t="M"+i.x+" "+i.y),o>0&&(t+=" L"+i.x+" "+i.y);return t}(s,e);return i=$i.toBounds(e),t.width=i.width,t.height=i.height,t.offsetX=i.x+t.width/2,t.offsetY=i.y+t.height/2,t.data=n,s.wrapper&&(s.wrapper.offsetX=t.offsetX,s.wrapper.offsetY=t.offsetY,s.wrapper.width=i.width,s.wrapper.height=i.height),t}function n2(s,e,t,i,n){e.offsetX=t.x,e.offsetY=t.y;var l,r=Ei.findAngle(t,i),o=function SAe(s){return CAe[s]}(n?s.sourceDecoraterShapes:s.taregetDecoraterShapes),a=0;l="LineWidthArrowHead"===s.shapeAnnotationType?new nn(12*(a=s.thickness),12*a):new nn(2*(a=s.thickness<=5?5:s.thickness),2*a),e.transform=Zh.Self,hl(s,e),e.style.fill="tranparent"!==s.fillColor?s.fillColor:"white",e.rotateAngle=r,e.data=o,e.canMeasurePath=!0,e.width=l.width,e.height=l.height,"Butt"===s.sourceDecoraterShapes&&(e.width=l.width-10,e.height=l.height+10)}function FK(s,e,t,i){var n=new Rs;return n2(s,n,e,t,i),n}function RK(s,e){return e[0]=OK(s,e,!0),e[e.length-1]=OK(s,e,!1),e}function OK(s,e,t){var n,r,i={x:0,y:0},o=e.length,a=Ei.distancePoints(n=t?e[0]:e[o-1],r=t?e[1]:e[o-2]);a=0===a?1:a;var l=s.thickness;return i.x=Math.round(n.x+l*(r.x-n.x)/a),i.y=Math.round(n.y+l*(r.y-n.y)/a),Ei.adjustPoint(i,r,!0,.5)}function BK(s,e,t){for(var i,n=0;n<s.wrapper.children.length;n++){var r=s.wrapper.children[parseInt(n.toString(),10)];r&&!c(r.content)&&(i=t.calculatePerimeter(s),r.content=i,r.childNodes[0].text=r.content,r.refreshTextElement())}return i}function zK(s){if(s.wrapper&&s.wrapper.children)for(var e=0;e<s.wrapper.children.length;e++){var t=s.wrapper.children[parseInt(e.toString(),10)];t&&!c(t.content)&&(t.content=s.notes,t.childNodes[0].text=t.content,t.refreshTextElement())}}function HK(s){var t,i,e="";for(e="M"+s[0].x+" "+s[0].y,i=1;i<s.length;i++)e+="L"+(t=s[parseInt(i.toString(),10)]).x+" "+t.y;return e+"Z"}function _K(s,e){var t=new Ss;return hl(s,t),t.style.fill="transparent",t.id=ta(),t.horizontalAlignment="Center",t.rotateValue={y:10,angle:e},t.verticalAlignment="Top",t.relativeMode="Object",t.setOffsetWithRespectToBounds(.5,.5,"Absolute"),t.style.textWrapping="NoWrap",t}function AE(s,e,t,i){var n=new Rs;n.offsetX=e.x,n.offsetY=e.y;var r=Ei.findAngle(e,t),o={x:(e.x+t.x)/2,y:(e.y+t.y)/2},a=en();rn(a,0-r,o.x,o.y);var l=We(a,e),h={x:l.x,y:l.y-s.leaderHeight};rn(a=en(),r,n.offsetX,n.offsetY),l=We(a,h);var d={x:e.x,y:e.y};n.offsetX=d.x,n.offsetY=d.y,n.transform=Zh.Self;var p="M"+e.x+","+e.y+",L"+l.x+","+l.y+"Z",u=new nn(0,s.leaderHeight);return n.pivot.x=.5,i?(n.id="leader2_"+ta(),n.pivot.y=0):(n.id="leader1_"+ta(),n.pivot.y=1),hl(s,n),n.rotateAngle=r,n.data=p,n.canMeasurePath=!0,n.width=u.width,n.height=u.height,n}function bAe(s,e){var t=s.vertexPoints;if(!c(t))for(var i=0;i<t.length-1;i++){var n=t[parseInt(i.toString(),10)],r=t[i+1],o=$i.toBounds([n,r]);if(o.Inflate(10),o.containsPoint(e)){var a=wAe(e,n,r),d=S7({x1:n.x,x2:r.x,y1:n.y,y2:r.y},{x1:e.x,x2:a.x,y1:e.y,y2:a.y});if(d.enabled){var p=Ei.findLength(e,d.intersectPt);if(Math.abs(p)<10)return!0}else{var u=$i.toBounds([e,e]);if(u.Inflate(3),u.containsPoint(n)||u.containsPoint(r))return!0}if(Ei.equals(e,a))return!0}}return!1}function wAe(s,e,t){var i;i=Ei.findLength(e,s)>Ei.findLength(t,s)?t:e;var o=Ei.findAngle(e,t),a=Ei.findAngle(i,s),l=Ei.findLength(i,s),h=a+2*(o-a);return{x:i.x+l*Math.cos(h*Math.PI/180),y:i.y+l*Math.sin(h*Math.PI/180)}}var CAe={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Butt:"M0,0 L0,90"},IAe=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),xAe=function(s){function e(t){var i=s.call(this)||this;return i.templateFn=i.templateCompiler(t),i}return IAe(e,s),e.prototype.templateCompiler=function(t){if(t)try{return"function"!=typeof t&&document.querySelectorAll(t).length?qe(document.querySelector(t).innerHTML.trim()):qe(t)}catch{return qe(t)}},e.prototype.getNodeTemplate=function(){return this.templateFn},e}(Fa),TAe=function(){function s(e){this.isDynamicStamps=!1,this.pdfViewer=e,this.renderer=new zce("this.pdfViewer.element.id",!1),this.svgRenderer=new Hce}return s.prototype.renderLabels=function(e){var t=e.annotations;if(t)for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)];this.initObject(n)}},s.prototype.createNewZindexTable=function(e){var t=new oAe;return this.pdfViewer.zIndex++,t.pageId=this.pdfViewer.zIndex,this.pdfViewer.zIndexTable.push(t),t},s.prototype.getPageTable=function(e){var t;if(void 0!==this.pdfViewer.zIndexTable.length){for(var i=!0,n=0;n<this.pdfViewer.zIndexTable.length;n++)if(this.pdfViewer.zIndexTable[parseInt(n.toString(),10)].pageId===e){i=!1,t=this.pdfViewer.zIndexTable[parseInt(n.toString(),10)];break}i&&((t=this.createNewZindexTable(e)).pageId=e)}else t=this.createNewZindexTable(e);return t},s.prototype.setZIndex=function(e,t){if(void 0!==t.pageIndex){var i=this.getPageTable(t.pageIndex);if(-1===t.zIndex)i.zIndex++,t.zIndex=i.zIndex,i.objects.push(t);else{var r=i.objects.length;t.zIndex=r++,i.objects.push(t)}}},s.prototype.initObject=function(e){return this.setZIndex(this.pdfViewer.zIndex,e),function xce(){var s="measureElement";if(window[s])window[s].usageCount+=1;else{var i,e=o0("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=o0("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t),i=o0("img",{}),e.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(n);var r=document.createElementNS("http://www.w3.org/2000/svg","path");n.appendChild(r),document.createTextNode("");var a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.appendChild(a),window[s]=e,window[s].usageCount=1,document.body.appendChild(e)}}(),xa(e)?(this.initLine(e),e.wrapper.measure(new nn(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize)):this.initNode(e),this.pdfViewer.nameTable[e.id]=e,e.formFieldAnnotationType&&this.nodePropertyChange(e,{bounds:{width:e.bounds.width,height:e.bounds.height}}),e},s.prototype.initNode=function(e){var i,t=this.initContainer(e);t.children||(t.children=[]),i||(i=this.init(e,t)),t.rotateAngle=e.rotateAngle,t.measure(new nn(e.wrapper.width,e.wrapper.height)),t.arrange(t.desiredSize),this.isDynamicStamps&&(this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(e,null,"dynamicStamp"),this.isDynamicStamps=!1)},s.prototype.init=function(e,t){var i;i=new Fa;var a=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.findAnnotationSettings(e):{},l=0,h=0,d=0,p=0;(a.minWidth||a.maxWidth||a.minHeight||a.maxHeight)&&(l=a.maxHeight?a.maxHeight:2e3,h=a.maxWidth?a.maxWidth:2e3,d=a.minHeight?a.minHeight:0,p=a.minWidth?a.minWidth:0);var u=!1;return(d||p||l||h)&&(u=!0),(i=e.formFieldAnnotationType?this.initFormFields(e,i,t):this.initAnnotationObject(e,void 0,i,t,!1,void 0,u,l,h,p,d)).id=e.id+"_content",i.relativeMode="Object","Stamp"!==e.shapeAnnotationType&&(void 0!==e.bounds.width&&(i.width=e.bounds.width,u&&(i.width<p||i.width>h)&&(i.width<p&&(i.width=p),i.width>h&&(i.width=h))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,u&&(i.height<d||i.width>l)&&(i.height<d&&(i.height=d),i.height>l&&(i.height=l))),hl(e,i),this.pdfViewer.viewerBase.drawSignatureWithTool&&"SignatureText"===e.shapeAnnotationType&&(i.style.strokeWidth=0)),i.isRectElement=!0,i.verticalAlignment="Stretch",i},s.prototype.initFormFields=function(e,t,i){switch(e.formFieldAnnotationType){case"Textbox":case"PasswordField":case"Checkbox":case"RadioButton":case"DropdownList":case"ListBox":case"SignatureField":case"InitialField":(t=new xAe).id=e.id+"_content",i.children.push(t)}return t},s.prototype.initAnnotationObject=function(e,t,i,n,r,o,a,l,h,d,p){switch(e.shapeAnnotationType){case"Ellipse":(t=new Rs).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",n.children.push(i=t),e.enableShapeLabel&&((u=this.textElement(e)).content=e.labelContent,u.style.color=e.fontColor,u.style.strokeColor=e.labelBorderColor,u.style.fill=e.labelFillColor,u.style.fontSize=e.fontSize,u.style.fontFamily=e.fontFamily,u.style.opacity=e.labelOpacity,n.children.push(u));break;case"Path":(t=new Rs).data=e.data,n.children.push(i=t);break;case"HandWrittenSignature":case"Ink":(t=new Rs).data=e.data,t.style.strokeColor=e.strokeColor,t.style.strokeWidth=e.thickness,t.style.opacity=e.opacity,n.children.push(i=t);break;case"Polygon":(t=new Rs).data=HK(e.vertexPoints),n.children.push(i=t);break;case"Stamp":if(r=!0,this.isDynamicStamps=!0,e&&e.annotationAddMode&&("Existing Annotation"===e.annotationAddMode||"Imported Annotation"===e.annotationAddMode)&&(e.bounds.width=e.bounds.width-20,e.bounds.height=e.bounds.height-20),e.isDynamicStamp){n.horizontalAlignment="Left",(i=o=new Fa).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i);var f=this.textElement(e);(f=new Ss).style.fontFamily="Helvetica",f.style.fontSize=14,f.style.italic=!0,f.style.bold=!0,f.style.color=e.fillColor,f.rotateValue=void 0,f.content=e.dynamicText,f.relativeMode="Point",f.margin.left=10,f.margin.bottom=-7,f.setOffsetWithRespectToBounds(0,.57,null),f.relativeMode="Point",n.children.push(f),(g=new Rs).id=ta()+"_stamp",g.data=e.data,g.width=e.bounds.width,a&&e.bounds.width>h&&(g.width=h,e.bounds.width=h),g.height=e.bounds.height/2,a&&e.bounds.height>l&&(g.height=l/2,e.bounds.height=l/2),g.rotateValue=void 0,g.margin.left=10,g.margin.bottom=-5,g.relativeMode="Point",g.setOffsetWithRespectToBounds(0,.1,null);var m=g;g.style.fill=e.fillColor,g.style.strokeColor=e.strokeColor,g.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.style.opacity=e.opacity,n.children.push(m)}else{var g;n.horizontalAlignment="Left",(i=o=new Fa).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i),(g=new Rs).id=ta()+"_stamp",g.data=e.data,g.width=e.bounds.width,a&&e.bounds.width>h&&(g.width=h,e.bounds.width=h),g.height=e.bounds.height,a&&e.bounds.height>l&&(g.height=l,e.bounds.height=l),g.minWidth=g.width/2,g.minHeight=g.height/2,m=g,g.style.fill=e.fillColor,g.style.strokeColor=e.strokeColor,g.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.minWidth=g.width/2,i.minHeight=g.height/2,i.style.opacity=e.opacity,n.children.push(m),n.minHeight=i.minHeight+20,n.minWidth=i.minWidth+20}break;case"Image":case"SignatureImage":var y=new mL;y.source=e.data,(i=y).style.strokeWidth=0,n.children.push(i);break;case"Rectangle":var u;o=new Fa,n.children.push(i=o),e.enableShapeLabel&&((u=this.textElement(e)).content=e.labelContent,u.style.color=e.fontColor,u.style.strokeColor=e.labelBorderColor,u.style.fill=e.labelFillColor,u.style.fontSize=e.fontSize,u.style.fontFamily=e.fontFamily,u.style.opacity=e.labelOpacity,n.children.push(u));break;case"Perimeter":(t=new Rs).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,hl(e,t),n.children.push(i),(o=new Fa).id="perimeter_"+ta(),o.height=.2,o.width=.2,o.transform=Zh.Self,o.horizontalAlignment="Stretch",this.setNodePosition(o,e),o.rotateAngle=e.rotateAngle,hl(e,o),n.children.push(o);var b=this.textElement(e);(b=new Ss).content=b.content=EE([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]).toString(),b.rotateValue={y:-10,angle:e.rotateAngle},n.children.push(b);break;case"Radius":(t=new Rs).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,hl(e,t),n.children.push(i),(o=new Fa).id="radius_"+ta(),o.height=.2,o.width=e.bounds.width/2,o.transform=Zh.Self,this.setNodePosition(o,e),o.rotateAngle=e.rotateAngle,hl(e,o),n.children.push(o);var w=this.textElement(e);e.enableShapeLabel&&(w.style.color=e.fontColor,w.style.strokeColor=e.labelBorderColor,w.style.fill=e.labelFillColor,w.style.fontSize=e.fontSize,w.style.fontFamily=e.fontFamily,w.style.opacity=e.labelOpacity),EE([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]),w.content=!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?e.notes:this.pdfViewer.annotation.measureAnnotationModule.setConversion(e.bounds.width/2*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,e),w.rotateValue={y:-10,x:e.bounds.width/4,angle:e.rotateAngle},n.children.push(w);break;case"StickyNotes":var I=new mL;I.source=e.data,I.width=e.bounds.width,I.height=e.bounds.height,I.style.strokeColor=e.strokeColor,I.style.strokeWidth=0,n.children.push(i=I);break;case"SignatureText":var x=new Fa;x.style.strokeWidth=0,(i=x).style.strokeWidth=0,n.style.strokeWidth=0,n.children.push(i);var T=this.textElement(e);T.style.fontFamily=e.fontFamily,T.style.fontSize=e.fontSize,T.style.textAlign="Left",T.rotateValue=void 0,T.content=e.data,T.style.strokeWidth=0,n.children.push(T);break;case"FreeText":var L=new Fa;n.children.push(i=L);var N=this.textElement(e);(N=new Ss).style.fontFamily=e.fontFamily,N.style.fontSize=e.fontSize,N.style.textAlign="Left","center"===e.textAlign.toLowerCase()?N.style.textAlign="Center":"right"===e.textAlign.toLowerCase()?N.style.textAlign="Right":"justify"===e.textAlign.toLowerCase()&&(N.style.textAlign="Justify"),N.style.color=e.fontColor,N.style.bold=e.font.isBold,N.style.italic=e.font.isItalic,!0===e.font.isUnderline?N.style.textDecoration="Underline":!0===e.font.isStrikeout&&(N.style.textDecoration="LineThrough"),N.rotateValue=void 0,N.content=e.dynamicText,N.style.opacity=e.opacity,N.margin.left=4,N.margin.top=e.fontSize/16*5,N.style.textWrapping=this.pdfViewer.freeTextSettings.enableAutoFit?"Wrap":"WrapWithOverflow",N.relativeMode="Point",N.setOffsetWithRespectToBounds(0,0,null),N.relativeMode="Point",n.children.push(N)}return i.id=e.id+"_content",i.relativeMode="Object",r||(void 0!==e.bounds.width&&(i.width=e.bounds.width,a&&(i.width<d||i.width>h)&&(i.width<d&&(i.width=d),i.width>h&&(i.width=h))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,a&&(i.height<p||i.width>l)&&(i.height<p&&(i.height=p),i.height>l&&(i.height=l))),hl(e,i)),i.isRectElement=!0,i.verticalAlignment="Stretch",i},s.prototype.textElement=function(e){var t=new Ss;return hl(e,t),t.horizontalAlignment="Center",t.verticalAlignment="SignatureText"===e.shapeAnnotationType?"Center":"Top",t.relativeMode="Object",t.setOffsetWithRespectToBounds(.5,.5,"Absolute"),t},s.prototype.setNodePosition=function(e,t){if("Perimeter"===t.shapeAnnotationType)e.offsetX=t.bounds.x+t.bounds.width/2,e.offsetY=t.bounds.y+t.bounds.height/2;else if("Radius"===t.shapeAnnotationType){var i={x:t.bounds.x+t.bounds.width/2+t.bounds.width/4,y:t.bounds.y+t.bounds.height/2},n={x:t.bounds.x+t.bounds.width/2,y:t.bounds.y+t.bounds.height/2},r=en();rn(r,t.rotateAngle,n.x,n.y);var o=We(r,i),a={x:o.x,y:o.y};e.offsetX=a.x,e.offsetY=a.y,e.width=t.bounds.width/2}},s.prototype.initContainer=function(e){e.id||(e.id=ta());var t=new g7;return t.id=e.id,t.offsetX=e.bounds.x+.5*e.bounds.width,t.offsetY=e.bounds.y+.5*e.bounds.height,t.style.fill="transparent",t.style.strokeColor="transparent",t.rotateAngle=e.rotateAngle,e.wrapper=t,t},s.prototype.initLine=function(e){e.id||(e.id=ta());var t=new g7,i=new Rs;i.id=e.id+"_path";var n=new Rs,r=new Rs;if(e.vertexPoints.length){e.sourcePoint=e.vertexPoints[0],e.targetPoint=e.vertexPoints[e.vertexPoints.length-1];for(var o=0;o<e.vertexPoints.length;o++)0!==o&&o!==e.vertexPoints.length-1&&e.segments.push(e.vertexPoints[parseInt(o.toString(),10)])}i=function uAe(s,e){var t;return t=kE(s),e.staticSize=!0,hl(s,e=NK(s,t,e)),e}(e,i);var a=[];a=kE(e);var l=[],h=[];if("Distance"===e.shapeAnnotationType&&(l=function yAe(s,e){var t=[],i=AE(s,e[0],e[1]);return t.push(i),i=AE(s,e[1],e[0],!0),t.push(i),t}(e,a),h=function fAe(s,e,t,i){var n=[],r=Ei.findAngle(e[0],e[1]),o=_K(s,r);return o.content=!i.enableImportAnnotationMeasurement&&s.notes&&""!==s.notes?s.notes:t.setConversion(EE([e[0],e[1]])*t.pixelToPointFactor,s),o.rotateValue={y:-10,angle:r},!0===s.enableShapeLabel&&(o.style.strokeColor=s.labelBorderColor,o.style.fill=s.labelFillColor,o.style.fontSize=s.fontSize,o.style.color=s.fontColor,o.style.fontFamily=s.fontFamily),n.push(o),n}(e,a,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType)&&"Perimeter"===e.measureType&&(h=function vAe(s,e,t,i){var n=[],r=Ei.findAngle(e[0],e[1]),o=_K(s,r);return o.content=!i.enableImportAnnotationMeasurement&&s.notes&&""!==s.notes?s.notes:t.calculatePerimeter(s),!0===s.enableShapeLabel&&(o.style.strokeColor=s.labelBorderColor,o.style.fill=s.labelFillColor,o.style.fontSize=s.fontSize,o.style.color=s.fontColor,o.style.fontFamily=s.fontFamily),o.rotateValue={y:-10,angle:r},n.push(o),n}(e,a,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),!0===e.enableShapeLabel&&"Distance"!==e.shapeAnnotationType&&"Perimeter"!==e.measureType){var d=Ei.findAngle(a[0],a[1]),p=this.textElement(e);p.id=ta(),p.content=!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?e.notes:e.labelContent,p.style.strokeColor=e.labelBorderColor,p.style.fill=e.labelFillColor,p.style.fontSize=e.fontSize,p.style.color=e.fontColor,p.style.fontFamily=e.fontFamily,p.style.opacity=e.labelOpacity,p.rotateValue={y:-10,angle:d},h.push(p)}a=RK(e,a);var u=$i.toBounds(a);t.width=u.width,t.height=u.height,t.offsetX=u.x+t.pivot.x*u.width,t.offsetY=u.y+t.pivot.y*u.height;var f=e.vertexPoints;if(("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType)&&(n=FK(e,a[0],f[1],!0),r=FK(e,a[a.length-1],f[f.length-2],!1)),n.id=e.id+"_srcDec",r.id=e.id+"_tarDec",i.style.fill="transparent",t.style.strokeColor="transparent",t.style.fill="transparent",t.style.strokeWidth=0,t.children=[],hl(e,i),t.children.push(i),l.length>0)for(o=0;o<l.length;o++)t.children.push(l[parseInt(o.toString(),10)]);if(h.length>0)for(o=0;o<h.length;o++)t.children.push(h[parseInt(o.toString(),10)]);return t.children.push(n),t.children.push(r),"LineWidthArrowHead"===e.shapeAnnotationType&&(t.children[1].width=12*e.thickness,t.children[1].height=12*e.thickness,t.children[2].width=12*e.thickness,t.children[2].height=12*e.thickness),t.id=e.id,t.offsetX=i.offsetX,t.offsetY=i.offsetY,t.width=i.width,t.height=i.height,a=kE(e),e.wrapper=t,t},s.prototype.add=function(e){var t=this.pdfViewer.allowServerDataBinding;return this.pdfViewer.enableServerDataBinding(!1),e.formFieldAnnotationType&&this.pdfViewer.formDesignerModule?(e=new ME(this.pdfViewer,"formFields",e,!0),e=this.initObject(e),this.pdfViewer.formFields.push(e)):(e=new TE(this.pdfViewer,"annotations",e,!0),e=this.initObject(e),this.pdfViewer.annotations.push(e)),this.pdfViewer.enableServerDataBinding(t,!0),e},s.prototype.remove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);for(var i=e.pageIndex,n=0;n<this.pdfViewer.annotations.length;n++){var r=this.pdfViewer.annotations[parseInt(n.toString(),10)];if(r.id&&(r.id===e.id||r.id.split("_")[0]===e.id)||r.wrapper&&r.wrapper.id===e.id){this.pdfViewer.annotations.splice(n,1);for(var o=this.getPageObjects(e.pageIndex),a=0;a<o.length;a++)o[parseInt(a.toString(),10)].id===e.id&&(o.splice(a,1),"Path"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.refreshCanvasDiagramLayer(void 0,i,e.id):this.pdfViewer.renderDrawing(void 0,i))}}for(n=0;n<this.pdfViewer.formFields.length;n++)if((l=this.pdfViewer.formFields[parseInt(n.toString(),10)]).id===e.id||l.wrapper.id===e.id)for(this.pdfViewer.formFields.splice(n,1),this.pdfViewer.formDesignerModule&&e.formFieldAnnotationType&&this.pdfViewer.formFieldCollection.splice(n,1),o=this.getPageObjects(e.pageIndex),a=0;a<o.length;a++){if(o[parseInt(a.toString(),10)].id===e.id){o.splice(a,1);break}o[parseInt(a.toString(),10)]&&o[parseInt(a.toString(),10)].id&&-1!==o[parseInt(a.toString(),10)].id.indexOf(e.id)&&o.splice(a,1)}if("Textbox"===e.formFieldAnnotationType||"Checkbox"===e.formFieldAnnotationType||"RadioButton"===e.formFieldAnnotationType||"PasswordField"===e.formFieldAnnotationType||"DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType||"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType)for(n=0;n<this.pdfViewer.formFieldCollections.length;n++){var l;(l=this.pdfViewer.formFieldCollections[n]).id===e.id&&this.pdfViewer.formFieldCollections.splice(n,1)}if("Textbox"===e.formFieldAnnotationType||"Checkbox"===e.formFieldAnnotationType||"RadioButton"===e.formFieldAnnotationType||"PasswordField"===e.formFieldAnnotationType||"DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType||"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){var h=document.getElementById("form_field_"+e.id+"_content_html_element");h&&(h.remove(),this.pdfViewer.renderDrawing(void 0,i),this.pdfViewer.fireFormFieldRemoveEvent("formFieldRemove",{name:e.name,id:e.id,value:e.value,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color,backgroundColor:e.backgroundColor,alignment:e.alignment,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:e.rotateAngle,tooltip:e.tooltip,options:e.options,isChecked:e.isChecked,isSelected:e.isSelected},e.pageIndex),this.pdfViewer.formDesignerModule.removeFieldsFromAnnotationCollections(e.id))}this.pdfViewer.enableServerDataBinding(t,!0)},s.prototype.getPageObjects=function(e){return this.getPageTable(e).objects},s.prototype.refreshCanvasDiagramLayer=function(e,t,i){if(e||(e=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t)),e){var n=this.pdfViewer.viewerBase.getZoomFactor(),r=e.width/n,o=e.height/n,a=e.getContext("2d");a.lineCap="round",a.lineJoin="round",n<1&&(a.lineWidth=a.lineWidth/n);var h=n*this.pdfViewer.viewerBase.getWindowDevicePixelRatio();!E.isDevice||E.isDevice&&n<=.7?a.setTransform(h,0,0,h,0,0):a.setTransform(n,0,0,n,0,0),a.clearRect(0,0,r,o);for(var d=this.getPageObjects(t),p=0;p<d.length;p++){var u=void 0;e.id===this.pdfViewer.element.id+"_print_annotation_layer_"+t?d[parseInt(p.toString(),10)].isPrint&&(c(u=this.pdfViewer.nameTable[d[parseInt(p.toString(),10)].id].wrapper)||w7(e,[u],this.renderer)):w7(e,[u=this.pdfViewer.nameTable[d[p].id].wrapper],this.renderer)}}},s.prototype.clearHighlighter=function(e){var t=this.getAdornerLayerSvg(this.pdfViewer.element.id+e+"_diagramAdornerLayer",e);if(t){var i=t.getElementById(t.id+"_highlighter");i&&i.parentNode.removeChild(i)}},s.prototype.getSelectorElement=function(e,t){var i=null,n=this.getAdornerLayerSvg(e,t);return n&&(i=n.getElementById(e+t+"_SelectorElement")),i},s.prototype.getAdornerLayerSvg=function(e,t){var i=null,n=Gu(e+t+"_diagramAdornerLayer");return n&&(i=n.getElementsByClassName("e-adorner-layer"+t)[0]),i},s.prototype.clearSelectorLayer=function(e){var t=this.getAdornerLayerSvg(this.pdfViewer.element.id,e);if(t){var i=t.getElementById(this.pdfViewer.adornerSvgLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter(e);for(var n=this.getSelectorElement(this.pdfViewer.element.id,e).childNodes,r=void 0,o=n.length;o>0;o--)(r=n[o-1]).parentNode.removeChild(r)}},s.prototype.renderSelector=function(e,t,i,n){if(!i||n){var r=new nn,o=this.pdfViewer.selectedItems;if(this.clearSelectorLayer(e),o.wrapper){o.wrapper.measure(r);var a=this.pdfViewer.viewerBase.getZoomFactor();o.wrapper.arrange(o.wrapper.desiredSize),o.width=o.wrapper.actualSize.width,o.height=o.wrapper.actualSize.height,o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY,1===o.annotations.length&&(o.rotateAngle=o.annotations[0].rotateAngle,o.wrapper.rotateAngle=o.annotations[0].rotateAngle);var h=void 0;if(o.formFields.length)for(var d=0;d<o.formFields.length;d++){var p=o.formFields[parseInt(d.toString(),10)];(h=this.getSelectorElement(this.pdfViewer.element.id,e))&&p.pageIndex===e&&this.pdfViewer.designerMode&&this.renderResizeHandle(p.wrapper.children[0],h,o.thumbsConstraints,a,void 0,void 0,void 0,!1,!0,null,null,t),!this.pdfViewer.formDesignerModule||!p.formFieldAnnotationType||this.pdfViewer.viewerBase.isFormFieldSelect||this.pdfViewer.viewerBase.isFormFieldMouseDown||this.pdfViewer.viewerBase.isFormFieldMouseMove||(this.pdfViewer.viewerBase.isFormFieldSelect=!0,this.pdfViewer.fireFormFieldSelectEvent("formFieldSelect",{name:p.name,id:p.id,value:p.value,fontFamily:p.fontFamily,fontSize:p.fontSize,fontStyle:p.fontStyle,color:p.color,backgroundColor:p.backgroundColor,alignment:p.alignment,isReadonly:p.isReadonly,visibility:p.visibility,maxLength:p.maxLength,isRequired:p.isRequired,isPrint:p.isPrint,rotation:p.rotateAngle,tooltip:p.tooltip,options:p.options,isChecked:p.isChecked,isSelected:p.isSelected},p.pageIndex,this.pdfViewer.formDesignerModule.isProgrammaticSelection))}if(o.annotations.length)for(var f=0;f<o.annotations.length;f++)p=o.annotations[parseInt(f.toString(),10)],(h=this.getSelectorElement(this.pdfViewer.element.id,e))&&p.pageIndex===e&&("Distance"===p.shapeAnnotationType||"Line"===p.shapeAnnotationType||"LineWidthArrowHead"===p.shapeAnnotationType||"Polygon"===p.shapeAnnotationType?this.renderEndPointHandle(p,h,o.thumbsConstraints,{scale:a,tx:0,ty:0},void 0,void 0,!0,t):"StickyNotes"===p.shapeAnnotationType?this.renderResizeHandle(p.wrapper.children[0],h,o.thumbsConstraints,a,void 0,void 0,void 0,!1,!0,null,null,t):"Stamp"!==this.pdfViewer.tool&&this.renderResizeHandle(p.wrapper.children[0],h,o.thumbsConstraints,a,void 0,void 0,void 0,"Stamp"===p.shapeAnnotationType,!1,"Path"===p.shapeAnnotationType||"SignatureField"===p.formFieldAnnotationType||"InitialField"===p.formFieldAnnotationType,"FreeText"===p.shapeAnnotationType||"HandWrittenSignature"===p.shapeAnnotationType||"SignatureImage"===p.shapeAnnotationType||"Image"===p.shapeAnnotationType||"SignatureText"===p.shapeAnnotationType,t),!this.pdfViewer.viewerBase.isNewSignatureAdded&&("HandWrittenSignature"===p.shapeAnnotationType||"SignatureText"===p.shapeAnnotationType||"SignatureImage"===p.shapeAnnotationType)&&this.pdfViewer.annotationModule.selectSignature(p.signatureName,p.pageIndex,p),!this.pdfViewer.formDesignerModule||!p.formFieldAnnotationType||this.pdfViewer.viewerBase.isFormFieldSelect||this.pdfViewer.viewerBase.isFormFieldMouseDown||this.pdfViewer.viewerBase.isFormFieldMouseMove||(this.pdfViewer.viewerBase.isFormFieldSelect=!0,this.pdfViewer.fireFormFieldSelectEvent("formFieldSelect",{value:p.value,fontFamily:p.fontFamily,fontSize:p.fontSize,fontStyle:p.fontStyle,color:p.color,backgroundColor:p.backgroundColor,alignment:p.alignment,isReadonly:p.isReadonly,visibility:p.visibility,maxLength:p.maxLength,isRequired:p.isRequired,isPrint:p.isPrint,rotation:p.rotateAngle,tooltip:p.tooltip,options:p.options,isChecked:p.isChecked,isSelected:p.isSelected},p.pageIndex,this.pdfViewer.formDesignerModule.isProgrammaticSelection)),""!==p.annotName&&"SignatureText"!==p.annotName&&i&&p===i&&!p.formFieldAnnotationType&&!this.pdfViewer.viewerBase.isAddComment&&!this.pdfViewer.viewerBase.isAnnotationSelect&&!this.pdfViewer.viewerBase.isAnnotationMouseDown&&!this.pdfViewer.viewerBase.isAnnotationMouseMove&&!this.pdfViewer.viewerBase.isInkAdded&&!this.pdfViewer.viewerBase.isNewStamp&&(this.pdfViewer.viewerBase.isAnnotationSelect=!0,this.pdfViewer.annotationModule.annotationSelect(p.annotName,p.pageIndex,p)))}}},s.prototype.rotate=function(e,t,i,n){if(e)if(i=i||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof Tu){e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var o=[];o=o.concat(e.annotations),this.rotateObjects(e,o,t,i,null,n)}else this.rotateObjects(e,[e],t,i)},s.prototype.rotateObjects=function(e,t,i,n,r,o){n=n||{};var a=en();rn(a,i,n.x,n.y);for(var l=0,h=t;l<h.length;l++){var d=h[l];if(d instanceof TE){if(!1!==r||e!==d){d.rotateAngle+=i,d.rotateAngle=(d.rotateAngle+360)%360;var p=We(a,{x:d.wrapper.offsetX,y:d.wrapper.offsetY});d.wrapper.offsetX=p.x,d.wrapper.offsetY=p.y,this.nodePropertyChange(d,{rotateAngle:d.rotateAngle})}this.renderSelector(d.pageIndex,o)}}},s.prototype.getParentSvg=function(e,t,i){return e&&e.id&&t&&"selector"===t?this.pdfViewer.adornerSvgLayer:i},s.prototype.renderBorder=function(e,t,i,n,r,o,a,l){var d=DE(e,n);if(n=n||{scale:1,tx:0,ty:0},l){d.x*=n.scale,d.y*=n.scale,d.width*=n.scale,d.height*=n.scale;var p=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;if(i&&"object"!=typeof i&&""!==i){var u=JSON.parse(i);d.stroke=""===u.selectionBorderColor?"black":u.selectionBorderColor,d.strokeWidth=1===i.selectionBorderThickness?1:u.selectionBorderThickness,(g=0===u.selectorLineDashArray.length?[6,3]:u.selectorLineDashArray).length>2&&(g=[g[0],g[1]]),d.dashArray=g.toString()}else this.getBorderSelector(p,d)}else{var g;if(d.x*=n.scale,d.y*=n.scale,d.width*=n.scale,d.height*=n.scale,d.fill="transparent",p=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType,i&&"object"!=typeof i&&""!==i)u=JSON.parse(i),d.stroke=""===u.selectionBorderColor?"black":u.selectionBorderColor,d.strokeWidth=1===i.selectionBorderThickness?1:u.selectionBorderThickness,(g=0===u.selectorLineDashArray.length?[6,3]:u.selectorLineDashArray).length>2&&(g=[g[0],g[1]]),d.dashArray=g.toString();else if(!this.pdfViewer.designerMode)if("HandWrittenSignature"===p||"SignatureText"===p||"SignatureImage"===p||"Ink"===p){e.id.split("_");var y=this.pdfViewer.viewerBase.checkSignatureFormField(e.id);this.getSignBorder(p,d,y)}else this.getBorderSelector(p,d);d.class="e-pv-diagram-border",a&&(d.class+=" e-diagram-lane"),d.id="borderRect",d.id="borderRect",r||(d.class+=" e-disabled"),o&&(d.class+=" e-thick-border"),d.cornerRadius=0}var b=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,d,this.pdfViewer.element.id,void 0,!0,b)},s.prototype.getSignBorder=function(e,t,i){if(i||"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)if("Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)n=c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor,t.stroke=n,r=c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=r,(o=c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(o=[o[0],o[1]]),t.dashArray=o.toString();else{var a=this.pdfViewer.annotationSelectorSettings;t.stroke=n=""===a.selectionBorderColor?"black":a.selectionBorderColor,t.strokeWidth=1===a.selectionBorderThickness?1:a.selectionBorderThickness,(o=0===a.selectorLineDashArray.length?[6,3]:a.selectorLineDashArray).length>2&&(o=[o[0],o[1]]),t.dashArray=o.toString()}else{var n=c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=n;var o,r=c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=r,(o=c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(o=[o[0],o[1]]),t.dashArray=o.toString()}},s.prototype.getBorderSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings,n=c(i.selectionBorderColor)||""===i.selectionBorderColor?"black":i.selectionBorderColor;t.stroke=n,t.strokeWidth=c(i.selectionBorderThickness)||1===i.selectionBorderThickness?1:i.selectionBorderThickness;var r=c(i.selectorLineDashArray)||0===i.selectorLineDashArray.length?[6,3]:i.selectorLineDashArray;if(r.length>2&&(r=[r[0],r[1]]),t.dashArray=r.toString(),"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var o=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=o;var a=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var l=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;l.length>2&&(l=[l[0],l[1]]),t.dashArray=l.toString()}else if("Textbox"!==e&&"Checkbox"!==e&&"RadioButton"!==e&&"SignatureField"!==e&&"InitialField"!==e&&"DropdownList"!==e&&"ListBox"!==e&&"PasswordField"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings){if("Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings){var p=c(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=p,a=c(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=a;var u=c(this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray;u.length>2&&(u=[u[0],u[1]]),t.dashArray=u.toString()}else if("Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings){var f=c(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=f,a=c(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=a;var g=c(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray;g.length>2&&(g=[g[0],g[1]]),t.dashArray=g.toString()}else if("FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){var m=c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=m,a=c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=a;var y=c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray;y.length>2&&(y=[y[0],y[1]]),t.dashArray=y.toString()}else if("StickyNotes"===e&&this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){var b=c(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=b,a=c(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=a;var w=c(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray.length?[6,3]:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray;w.length>2&&(w=[w[0],w[1]]),t.dashArray=w.toString()}else if("Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings){var S=c(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=S,a=c(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=a;var I=c(this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray;I.length>2&&(I=[I[0],I[1]]),t.dashArray=I.toString()}}else{var h=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=h;a=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var d=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;d.length>2&&(d=[d[0],d[1]]),t.dashArray=d.toString()}},s.prototype.renderCircularHandle=function(e,t,i,n,r,o,a,l,h,d,p,u,f,g){var m=t,y={x:i,y:n};if(l=l||{scale:1,tx:0,ty:0},0!==m.rotateAngle||0!==m.parentTransform){var b=en();rn(b,m.rotateAngle+m.parentTransform,m.offsetX,m.offsetY),y=We(b,y)}var S,w=DE(m);this.getResizerColors(S=this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType:this.pdfViewer.selectedItems.formFields.length>0?this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType:this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType,w,g,l),this.getShapeSize(S,w,g,l),w.strokeWidth=1,void 0!==u&&(w.id="segmentEnd_"+u),w.centerX=(y.x+l.tx)*l.scale,w.centerY=(y.y+l.ty)*l.scale,w.angle=0,w.id=e,w.visible=o,w.class=f,w.opacity=1,h&&(w.class+=" e-connected"),d&&(w.visible=!1),w.x=y.x*l.scale-w.width/2,w.y=y.y*l.scale-w.height/2;var I=this.getParentSvg(t,"selector");"Square"===this.getShape(S,g)?this.svgRenderer.drawRectangle(r,w,e,void 0,!0,I):"Circle"===this.getShape(S,g)&&this.svgRenderer.drawCircle(r,w,1)},s.prototype.getShapeSize=function(e,t,i,n){if(i&&"object"!=typeof i&&""!==i){var r=JSON.parse(i);t.radius=(c(r.resizerSize)||8===r.resizerSize?8:r.resizerSize)/2,t.width=(c(r.resizerSize)||8===r.resizerSize?8:r.resizerSize)*n.scale,t.height=(c(r.resizerSize)||8===r.resizerSize?8:r.resizerSize)*n.scale}else t.radius=(c((r=this.pdfViewer.annotationSelectorSettings).resizerSize)||8===r.resizerSize?8:r.resizerSize)/2,t.width=(c(r.resizerSize)||8===r.resizerSize?8:r.resizerSize)*n.scale,t.height=(c(r.resizerSize)||8===r.resizerSize?8:r.resizerSize)*n.scale,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*n.scale):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*n.scale):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*n.scale):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*n.scale):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*n.scale):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*n.scale):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*n.scale):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*n.scale):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*n.scale):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*n.scale):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*n.scale):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.radius=(c(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*n.scale):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.radius=(c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*n.scale):(t.radius=(c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)/2,t.width=(c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*n.scale)},s.prototype.getShape=function(e,t){var i,n;return t&&"object"!=typeof t&&""!==t?i=c((n=JSON.parse(t)).resizerShape)||"Square"===n.resizerShape?"Square":n.resizerShape:(i=c((n=this.pdfViewer.annotationSelectorSettings).resizerShape)||"Square"===n.resizerShape?"Square":n.resizerShape,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=c(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?i=c(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?i=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?i=c(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?i=c(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape:"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?i=c(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?i=c(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?i=c(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?i=c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape:("HandWrittenSignature"===e||"SignatureText"===e||"SignatureImage"===e)&&this.pdfViewer.handWrittenSignatureSettings&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?i=c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape:"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?i=c(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape:"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?i=c(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape:"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?i=c(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape:"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)),i},s.prototype.getResizerColors=function(e,t,i,n){if(i&&"object"!=typeof i&&""!==i){var r=JSON.parse(i);t.stroke=c(r.resizerBorderColor)||"black"===r.resizerBorderColor?"black":r.resizerBorderColor,t.fill=c(r.resizerFillColor)||"#FF4081"===r.resizerFillColor?"#FF4081":r.resizerFillColor}else t.stroke=c((r=this.pdfViewer.annotationSelectorSettings).resizerBorderColor)||"black"===r.resizerBorderColor?"black":r.resizerBorderColor,t.fill=c(r.resizerFillColor)||"#FF4081"===r.resizerFillColor?"#FF4081":r.resizerFillColor,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.stroke=c(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.stroke=c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor):(t.stroke=c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor,t.fill=c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)},s.prototype.renderRotateThumb=function(e,t,i,n,r){new Rs;var a,d=e.offsetX-e.actualSize.width*e.pivot.x+e.pivot.x*e.actualSize.width,p=e.offsetY-e.actualSize.height*e.pivot.y;if(a={x:d=(d+i.tx)*i.scale,y:(p=(p+i.ty)*i.scale)-25},0!==e.rotateAngle||0!==e.parentTransform){var u=en();rn(u,e.rotateAngle+e.parentTransform,(i.tx+e.offsetX)*i.scale,(i.ty+e.offsetY)*i.scale),a=We(u,a)}var f=DE(e);f.stroke="black",f.strokeWidth=1,f.opacity=1,f.fill="#FF4081",f.centerX=a.x,f.centerY=a.y,f.radius=4,f.angle=0,f.visible=!0,f.class="e-diagram-rotate-handle",f.id="rotateThumb",this.svgRenderer.drawCircle(t,f,ws.Rotate,{"aria-label":"Thumb to rotate the selected object"});var g=t.querySelector("#"+f.id);g&&g.setAttribute("role","separator")},s.prototype.renderResizeHandle=function(e,t,i,n,r,o,a,l,h,d,p,u){var f=e.offsetX-e.actualSize.width*e.pivot.x,g=e.offsetY-e.actualSize.height*e.pivot.y,m=e.actualSize.height,y=e.actualSize.width,b={scale:n,tx:0,ty:0};l&&(this.renderPivotLine(e,t,b),this.renderRotateThumb(e,t,b)),p&&(l=!0),this.renderBorder(e,t,u,b,o,a,!0,h);var w=e.actualSize.width*n,S=e.actualSize.height*n,I=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType,x=!1;if(!this.pdfViewer.formDesignerModule){var T=this.pdfViewer.selectedItems.annotations[0],L=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(T);(this.pdfViewer.annotationModule.checkIsLockSettings(T)||T.annotationSettings.isLock)&&this.getAllowedInteractions(L)&&(x=!0)}var O=this.getResizerLocation(I,u);(O<1||O>3)&&(O=3);var _=!1;this.pdfViewer.selectedItems.annotations[0]&&("Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Radius"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)&&(_=!0),!this.pdfViewer.viewerBase.checkSignatureFormField(e.id)&&!a&&!h&&!d&&!x&&((l||_&&w>=40&&S>=40&&(1===O||3===O))&&(this.renderCircularHandle("resizeNorthWest",e,f,g,t,!0,i&ws.ResizeNorthWest,b,void 0,r,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-pv-diagram-resize-handle e-northwest",u),this.renderCircularHandle("resizeNorthEast",e,f+y,g,t,!0,i&ws.ResizeNorthEast,b,void 0,r,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-pv-diagram-resize-handle e-northeast",u),this.renderCircularHandle("resizeSouthWest",e,f,g+m,t,!0,i&ws.ResizeSouthWest,b,void 0,r,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-pv-diagram-resize-handle e-southwest",u),this.renderCircularHandle("resizeSouthEast",e,f+y,g+m,t,!0,i&ws.ResizeSouthEast,b,void 0,r,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-pv-diagram-resize-handle e-southeast",u)),(!l&&!_||_&&(2===O||3===O||!(w>=40&&S>=40)&&1===O))&&(this.renderCircularHandle("resizeNorth",e,f+y/2,g,t,!0,i&ws.ResizeNorth,b,void 0,r,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",u),this.renderCircularHandle("resizeSouth",e,f+y/2,g+m,t,!0,i&ws.ResizeSouth,b,void 0,r,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",u),this.renderCircularHandle("resizeWest",e,f,g+m/2,t,!0,i&ws.ResizeWest,b,void 0,r,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",u),this.renderCircularHandle("resizeEast",e,f+y,g+m/2,t,!0,i&ws.ResizeEast,b,void 0,r,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",u))),("Textbox"===I||"Checkbox"===I||"RadioButton"===I||"SignatureField"===I||"InitialField"===I||"DropdownList"===I||"ListBox"===I||"PasswordField"===I)&&(this.renderCircularHandle("resizeNorth",e,f+y/2,g,t,!0,i&ws.ResizeNorth,b,void 0,r,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",u),this.renderCircularHandle("resizeSouth",e,f+y/2,g+m,t,!0,i&ws.ResizeSouth,b,void 0,r,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",u),this.renderCircularHandle("resizeWest",e,f,g+m/2,t,!0,i&ws.ResizeWest,b,void 0,r,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",u),this.renderCircularHandle("resizeEast",e,f+y,g+m/2,t,!0,i&ws.ResizeEast,b,void 0,r,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",u))},s.prototype.getAllowedInteractions=function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if("None"!==e[0]&&"Resize"===e[parseInt(t.toString(),10)])return!1;return!0},s.prototype.getResizerLocation=function(e,t){var i,n;return t&&"object"!=typeof t&&""!==t?i=c((n=JSON.parse(t)).resizerLocation)||3===n.resizerLocation?3:n.resizerLocation:(i=c((n=this.pdfViewer.annotationSelectorSettings).resizerLocation)||3===n.resizerLocation?3:n.resizerLocation,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=c(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?i=c(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?i=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?i=c(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?i=c(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation:"Distance"===e?i=c(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?i=c(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?i=c(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?i=c(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation:"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation):i=c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation),i},s.prototype.renderPivotLine=function(e,t,i,n,r){var o=e,l=!0;r&&(l=!1);var h=DE(o,i);h.fill="None",h.stroke="black",h.strokeWidth=1,h.dashArray="2,3",h.visible=l;var d=i.scale;h.x*=d,h.y*=d,h.width*=d,h.height*=d,h.id="pivotLine",h.class="e-diagram-pivot-line";var u={x:o.actualSize.width*o.pivot.x*d,y:0};h.startPoint={x:o.actualSize.width*o.pivot.x*d,y:-20},h.endPoint=u,this.svgRenderer.drawLine(t,h)},s.prototype.renderEndPointHandle=function(e,t,i,n,r,o,a,l){n=n||{tx:0,ty:0,scale:1};var u,h=e.sourcePoint,d=e.targetPoint,p=e.wrapper;for(u=0;u<e.vertexPoints.length;u++){var f=e.vertexPoints[parseInt(u.toString(),10)];this.renderCircularHandle("segementThumb_"+(u+1),p,f.x,f.y,t,!0,i&ws.ConnectorSource,n,r,null,null,u,null,l)}var g=0;if("Distance"===e.shapeAnnotationType)for(u=0;u<e.wrapper.children.length;u++){f=e.wrapper.children[parseInt(u.toString(),10)];var m=void 0,y=Ei.findAngle(e.sourcePoint,e.targetPoint);if(f.id.indexOf("leader")>-1){var b=e.wrapper.children[0].bounds.center;0===g?(m={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},b=h):(m={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},b=d);var w=en();rn(w,y,b.x,b.y);var S=We(w,{x:m.x,y:m.y});this.renderCircularHandle("leaderThumb_"+(u+1),p,S.x,S.y,t,!0,i&ws.ConnectorSource,n,r,null,null,u,null,l),g++}}},s.prototype.initSelectorWrapper=function(){this.pdfViewer.selectedItems.init(this)},s.prototype.select=function(e,t,i,n){for(var r=this.pdfViewer.selectedItems,o=0;o<e.length;o++){var a=this.pdfViewer.nameTable[e[o]];if(a.formFieldAnnotationType&&this.pdfViewer.designerMode)r.formFields.push(a),this.initSelectorWrapper(),r.wrapper.children.push(a.wrapper),this.renderSelector(a.pageIndex,t,a,!0);else if(a&&!a.formFieldAnnotationType&&!(a instanceof Tu)&&a.wrapper.visible&&this.pdfViewer.annotationModule){var l=void 0;a.annotationSettings?(l=a.annotationSettings).isLock=JSON.parse(l.isLock):a.formFieldAnnotationType||(l=this.pdfViewer.annotationModule.findAnnotationSettings(a,!0),a.annotationSettings=l);var h=!a.formFieldAnnotationType&&l.isLock;l&&l.isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",a)&&(h=!1),h||(r.annotations.push(a),this.initSelectorWrapper(),r.wrapper.rotateAngle=r.rotateAngle=0,r.wrapper.children.push(a.wrapper),n||this.renderSelector(a.pageIndex,t,a,!0))}}},s.prototype.dragSelectedObjects=function(e,t,i,n,r){return this.drag(this.pdfViewer.selectedItems,e,t,n,r),!0},s.prototype.drag=function(e,t,i,n,r){if(e instanceof Tu){if(e.annotations.length)for(var o=0,a=e.annotations;o<a.length;o++)this.drag(l=a[o],t,i,n,r),this.renderSelector(l.pageIndex,n,r);else if(e.formFields.length)for(var h=0,d=e.formFields;h<d.length;h++){var l;this.drag(l=d[h],t,i,n,r),this.renderSelector(l.pageIndex,n,r)}}else this.dragAnnotation(e,t,i)},s.prototype.dragAnnotation=function(e,t,i){var r=this.moveInsideViewer(e,t,i);if(e.wrapper.offsetX+=r.tx,e.wrapper.offsetY+=r.ty,xa(e)||"Polygon"===e.shapeAnnotationType){if(e.wrapper.children.length)for(var o=e.wrapper.children,a=0;a<o.length;a++)o[parseInt(a.toString(),10)].offsetX+=t,o[parseInt(a.toString(),10)].offsetY+=i;this.dragControlPoint(e,t,i,!0)}this.nodePropertyChange(e,{bounds:{x:e.wrapper.offsetX,y:e.wrapper.offsetY}}),e.wrapper.measureChildren=!1;var l=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(l,e.pageIndex)},s.prototype.dragControlPoint=function(e,t,i,n,r){for(var o=this.pdfViewer.nameTable[e.id],a=0;a<o.vertexPoints.length;a++)o.vertexPoints[parseInt(a.toString(),10)].x+=t,o.vertexPoints[parseInt(a.toString(),10)].y+=i;return n||this.updateEndPoint(o),!0},s.prototype.updateEndPoint=function(e){this.nodePropertyChange(e,{vertexPoints:e.vertexPoints}),this.renderSelector(e.pageIndex)},s.prototype.nodePropertyChange=function(e,t){var r;if(t.bounds&&(void 0!==t.bounds.width&&(e.bounds.width=e.wrapper.width=t.bounds.width),void 0!==t.bounds.height&&(e.bounds.height=e.wrapper.height=t.bounds.height),void 0!==t.bounds.x&&(e.bounds.x=t.bounds.x-.5*e.bounds.width,e.wrapper.offsetX=t.bounds.x),void 0!==t.bounds.y&&(e.bounds.y=t.bounds.y-.5*e.bounds.height,e.wrapper.offsetY=t.bounds.y),void 0!==t.leaderHeight&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),e.wrapper.children.length))for(var o=e.wrapper.children,a=0;a<o.length;a++)if(o[parseInt(a.toString(),10)].id){var l=o[parseInt(a.toString(),10)].id.split("_");if(l.length&&(l.indexOf("perimeter")>-1||l.indexOf("radius")>-1))this.setNodePosition(o[parseInt(a.toString(),10)],e);else if(l.length&&l.indexOf("srcDec")>-1)o[parseInt(a.toString(),10)].offsetX=e.vertexPoints[0].x,o[parseInt(a.toString(),10)].offsetY=e.vertexPoints[0].y;else if(l.length&&l.indexOf("tarDec")>-1)o[parseInt(a.toString(),10)].offsetX=e.vertexPoints[e.vertexPoints.length-1].x,o[parseInt(a.toString(),10)].offsetY=e.vertexPoints[e.vertexPoints.length-1].y;else if(l.length&&l.indexOf("stamp")>-1){var h=0;if(void 0!==e.wrapper.width&&void 0!==e.wrapper.height&&(h=20),e.isDynamicStamp){o[parseInt(a.toString(),10)].width=e.bounds.width-h,o[parseInt(a.toString(),10)].height=e.bounds.height/2-h;var d=o[1],p=this.pdfViewer.stampSettings?this.pdfViewer.stampSettings:this.pdfViewer.annotationSettings;d.style.fontSize=p&&(p.maxHeight||p.maxWidth)&&e.bounds.height>60?0!=h?e.bounds.width/h:e.wrapper.bounds.width/20:this.fontSizeCalculation(e,d,0!=h?e.bounds.width-20:e.wrapper.bounds.width-20),0!==h&&(d.margin.bottom=-o[parseInt(a.toString(),10)].height/2)}else o[parseInt(a.toString(),10)].width=e.bounds.width-h,o[parseInt(a.toString(),10)].height=e.bounds.height-h;o[parseInt(a.toString(),10)].offsetX=e.wrapper.offsetX,o[parseInt(a.toString(),10)].offsetY=e.wrapper.offsetX,o[parseInt(a.toString(),10)].isDirt=!0}}if(void 0!==t.sourceDecoraterShapes&&(e.sourceDecoraterShapes=t.sourceDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.isReadonly&&"FreeText"===e.shapeAnnotationType&&(e.isReadonly=t.isReadonly),void 0!==t.taregetDecoraterShapes&&(e.taregetDecoraterShapes=t.taregetDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.fillColor&&(e.fillColor=t.fillColor,e.wrapper.children[0].style.fill=t.fillColor,(e.enableShapeLabel||e.measureType)&&e.wrapper&&e.wrapper.children)){o=e.wrapper.children;for(var u=0;u<o.length;u++)o[parseInt(u.toString(),10)].textNodes&&(e.enableShapeLabel&&(e.labelFillColor=t.fillColor,o[parseInt(u.toString(),10)].style.fill=t.fillColor),e.measureType&&(o[parseInt(u.toString(),10)].style.fill=t.fillColor))}if(e.enableShapeLabel&&void 0!==t.labelFillColor&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children){o=e.wrapper.children;for(var f=0;f<o.length;f++)o[parseInt(f.toString(),10)].textNodes&&(e.labelFillColor=t.labelFillColor,o[parseInt(f.toString(),10)].style.fill=t.labelFillColor)}if(void 0!==t.opacity&&("Stamp"===e.shapeAnnotationType||"FreeText"===e.shapeAnnotationType?(e.wrapper.children[1].style.opacity=t.opacity,e.wrapper.children[2]&&(e.wrapper.children[2].style.opacity=t.opacity)):("StickyNotes"===e.shapeAnnotationType&&(this.pdfViewer.nameTable[e.annotName].wrapper.children[0].style.opacity=t.opacity),e.opacity=t.opacity),e.wrapper.children[0].style.opacity=t.opacity,e.enableShapeLabel&&e.wrapper&&e.wrapper.children)){o=e.wrapper.children;for(var g=0;g<o.length;g++)o[parseInt(g.toString(),10)].textNodes&&(o[parseInt(g.toString(),10)].style.opacity=t.labelOpacity)}if(e.enableShapeLabel&&void 0!==t.labelOpacity&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children){o=e.wrapper.children;for(var m=0;m<o.length;m++)o[parseInt(m.toString(),10)].textNodes&&(o[parseInt(m.toString(),10)].style.opacity=t.labelOpacity)}if(void 0!==t.rotateAngle&&(e.rotateAngle=t.rotateAngle,e.wrapper.rotateAngle=t.rotateAngle),void 0!==t.strokeColor&&(e.strokeColor=t.strokeColor,e.wrapper.children[0].style.strokeColor=t.strokeColor,"Radius"===e.shapeAnnotationType&&e.wrapper.children[1]&&(e.wrapper.children[1].style.strokeColor=t.strokeColor)),void 0!==t.fontColor&&(e.fontColor=t.fontColor,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((o=e.wrapper.children)[1].style.color=t.fontColor,o[1].horizontalAlignment="Justify"===e.textAlign?"Center":"Auto"),e.enableShapeLabel&&e.wrapper&&e.wrapper.children)){o=e.wrapper.children;for(var y=0;y<o.length;y++)o[parseInt(y.toString(),10)].textNodes&&(o[parseInt(y.toString(),10)].style.color=t.fontColor)}if(void 0!==t.fontFamily&&(e.fontFamily=t.fontFamily,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((o=e.wrapper.children)[1].style.fontFamily=t.fontFamily),e.enableShapeLabel&&e.wrapper&&e.wrapper.children)){o=e.wrapper.children;for(var b=0;b<o.length;b++)o[parseInt(b.toString(),10)].textNodes&&(o[parseInt(b.toString(),10)].style.fontFamily=t.fontFamily)}if(void 0!==t.fontSize&&(e.fontSize=t.fontSize,("FreeText"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((o=e.wrapper.children)[1].style.fontSize=t.fontSize,"SignatureText"===e.shapeAnnotationType&&(e.wrapper.children[1].bounds.width=e.bounds.width,e.wrapper.children[1].desiredSize.width=e.bounds.width,e.wrapper.children[1].actualSize.width=e.bounds.width,o[1].horizontalAlignment="Center",o[1].verticalAlignment="Center",o[1].setOffsetWithRespectToBounds(0,0,"Absolute"))),e.enableShapeLabel&&e.wrapper&&e.wrapper.children)){o=e.wrapper.children;for(var w=0;w<o.length;w++)o[parseInt(w.toString(),10)].textNodes&&(o[parseInt(w.toString(),10)].style.fontSize=t.fontSize)}if(void 0!==t.font&&"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&(o=e.wrapper.children,void 0!==t.font.isBold&&(o[1].style.bold=t.font.isBold,e.font.isBold=t.font.isBold),void 0!==t.font.isItalic&&(o[1].style.italic=t.font.isItalic,e.font.isItalic=t.font.isItalic),void 0!==t.font.isUnderline&&(t.font.isUnderline&&(e.font.isStrikeout=!1),!0===t.font.isUnderline?o[1].style.textDecoration="Underline":t.font.isStrikeout||(o[1].style.textDecoration="None"),e.font.isUnderline=t.font.isUnderline),void 0!==t.font.isStrikeout&&(t.font.isStrikeout&&(e.font.isUnderline=!1),!0===t.font.isStrikeout?o[1].style.textDecoration="LineThrough":t.font.isUnderline||(o[1].style.textDecoration="None"),e.font.isStrikeout=t.font.isStrikeout)),void 0!==t.textAlign&&(e.textAlign=t.textAlign,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)&&((o=e.wrapper.children)[1].style.textAlign=t.textAlign,1===o[1].childNodes.length?"Justify"===e.textAlign?(o[1].horizontalAlignment="Left",o[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(o[1].horizontalAlignment="Right",o[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(o[1].horizontalAlignment="Left",o[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(o[1].horizontalAlignment="Center",o[1].setOffsetWithRespectToBounds(.46,0,null)):o[1].horizontalAlignment=o[1].childNodes.length>1&&"Justify"===e.textAlign?"Center":"Auto"),void 0!==t.thickness&&(e.thickness=t.thickness,e.wrapper.children[0].style.strokeWidth=t.thickness,"LineWidthArrowHead"===e.shapeAnnotationType&&(e.wrapper.children[1].width=12*t.thickness,e.wrapper.children[1].height=12*t.thickness,e.wrapper.children[2].width=12*t.thickness,e.wrapper.children[2].height=12*t.thickness),"Radius"===e.shapeAnnotationType&&e.wrapper.children[1]&&(e.wrapper.children[1].style.strokeWidth=t.thickness)),void 0!==t.borderDashArray&&(e.borderDashArray=t.borderDashArray,e.wrapper.children[0].style.strokeDashArray=t.borderDashArray),void 0!==t.borderStyle&&(e.borderStyle=t.borderStyle),void 0!==t.author&&(e.author=t.author),void 0!==t.modifiedDate&&(e.modifiedDate=t.modifiedDate),void 0!==t.subject&&(e.subject=t.subject),void 0!==t.vertexPoints&&(e.vertexPoints=t.vertexPoints,this.pdfViewer.nameTable[e.id].vertexPoints=t.vertexPoints,this.updateConnector(e,t.vertexPoints)),void 0!==t.leaderHeight&&"Polygon"!==e.shapeAnnotationType&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),void 0!==t.notes&&(e.notes=t.notes),void 0!==t.annotName&&(e.annotName=t.annotName),"Distance"===e.shapeAnnotationType){for(r=0;r<e.wrapper.children.length;r++){var S=e.wrapper.children[r],I=kE(e);S.id.indexOf("leader1")>-1&&this.setLineDistance(e,I,S,!1),S.id.indexOf("leader2")>-1&&this.setLineDistance(e,I,S,!0)}this.updateConnector(e,e.vertexPoints)}if("Polygon"===e.shapeAnnotationType&&t.vertexPoints){e.data=HK(e.vertexPoints);var x=e.wrapper.children[0];x.data=e.data,x.canMeasurePath=!0}if(xa(e))for(var T=0;T<e.wrapper.children.length;T++)e.wrapper.children[T].textNodes||hl(e,e.wrapper.children[parseInt(T.toString(),10)]),!0===e.enableShapeLabel?(e.wrapper.children[parseInt(T.toString(),10)]instanceof Ss&&(e.wrapper.children[parseInt(T.toString(),10)].style.fill=e.labelFillColor),e.wrapper.children[parseInt(T.toString(),10)]instanceof Rs&&"Perimeter"===e.measureType&&(e.wrapper.children[parseInt(T.toString(),10)].style.fill="transparent")):(e.wrapper.children[parseInt(T.toString(),10)]instanceof Rs&&"Perimeter"===e.measureType||e.wrapper.children[parseInt(T.toString(),10)]instanceof Ss)&&(e.wrapper.children[parseInt(T.toString(),10)].style.fill="transparent");if(e&&("FreeText"===e.shapeAnnotationType||!0===e.enableShapeLabel)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length){o=e.wrapper.children;for(var N=0;N<o.length;N++)o[parseInt(N.toString(),10)].textNodes&&("FreeText"===e.shapeAnnotationType?(t.dynamicText?(o[parseInt(N.toString(),10)].content=t.dynamicText,e.dynamicText=t.dynamicText):o[parseInt(N.toString(),10)].content=e.dynamicText,o[parseInt(N.toString(),10)].width=e.bounds.width):(!0===e.enableShapeLabel&&e.measureType||!0===e.enableShapeLabel)&&(t.labelContent?(o[parseInt(N.toString(),10)].content=t.labelContent,e.labelContent=t.labelContent):o[parseInt(N.toString(),10)].content=e.labelContent,e.notes=o[parseInt(N.toString(),10)].content),o[parseInt(N.toString(),10)].isDirt=!0)}if(e&&"SignatureText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length>1&&(e.wrapper.children[1].isDirt=!0),e&&"FreeText"===e.shapeAnnotationType&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.textFromCommentPanel?(e.wrapper.width=void 0,e.wrapper.height=void 0,e.wrapper.measure(new nn(e.wrapper.bounds.width,e.wrapper.bounds.height)),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.textFromCommentPanel=!1):e.wrapper.measure(new nn(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize),e&&e.formFieldAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((o=e.wrapper.children[0]).actualSize.width=e.wrapper.desiredSize.width,o.actualSize.height=e.wrapper.desiredSize.height),e&&"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject){if(e.wrapper&&e.wrapper.children&&e.wrapper.children.length){(o=e.wrapper.children)[1].childNodes.length>1&&"Justify"===e.textAlign?o[1].horizontalAlignment="Center":1===o[1].childNodes.length&&("Justify"===e.textAlign?(o[1].horizontalAlignment="Left",o[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(o[1].horizontalAlignment="Right",o[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(o[1].horizontalAlignment="Left",o[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(o[1].horizontalAlignment="Center",o[1].setOffsetWithRespectToBounds(.46,0,null)));for(var O=0;O<o.length;O++){if(o[parseInt(O.toString(),10)].textNodes&&o[parseInt(O.toString(),10)].textNodes.length>0){o[parseInt(O.toString(),10)].isDirt=!0;var _=o[parseInt(O.toString(),10)].textNodes.length*o[parseInt(O.toString(),10)].textNodes[0].dy,B=e.bounds.height-_;if(B>0&&B<o[parseInt(O.toString(),10)].textNodes[0].dy&&(_+=o[parseInt(O.toString(),10)].textNodes[0].dy),_>e.bounds.height){for(var q="",W=0;W<o[parseInt(O.toString(),10)].textNodes.length;W++)q+=o[parseInt(O.toString(),10)].textNodes[parseInt(W.toString(),10)].text;o[parseInt(O.toString(),10)].content=q}}o[parseInt(O.toString(),10)].width=e.bounds.width}}e.wrapper.measure(new nn(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}this.pdfViewer.renderDrawing(void 0,e.pageIndex),e&&"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&(1===(o=e.wrapper.children)[1].childNodes.length&&"Justify"===e.textAlign?(o[1].horizontalAlignment="Left",o[1].setOffsetWithRespectToBounds(.5,0,null)):o[1].childNodes.length>1&&"Justify"===e.textAlign&&(o[1].horizontalAlignment="Center",o[1].setOffsetWithRespectToBounds(0,0,null)))},s.prototype.fontSizeCalculation=function(e,t,i){var r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex).getContext("2d"),o=0,a=0,l="";for(t.style.italic&&t.style.bold?l="bold italic ":t.style.bold?l="bold ":t.style.italic&&(l="italic ");i>o;)r.font=l+a+"px "+t.style.fontFamily,o=r.measureText(e.dynamicText).width,a+=.1;return a-.1},s.prototype.setLineDistance=function(e,t,i,n){var r;r=n?AE(e,t[1],t[0],n):AE(e,t[0],t[1],n),i.data=r.data,i.offsetX=r.offsetX,i.offsetY=r.offsetY,i.rotateAngle=r.rotateAngle,i.width=r.width,i.height=r.height,i.pivot=r.pivot,i.canMeasurePath=!0,i.isDirt=!0},s.prototype.scaleSelectedItems=function(e,t,i){return this.scale(this.pdfViewer.selectedItems,e,t,i)},s.prototype.scale=function(e,t,i,n){var r=!0;if(e instanceof Tu){if(e.annotations&&e.annotations.length)for(var o=0,a=e.annotations;o<a.length;o++)r=this.scaleAnnotation(a[o],t,i,n,e);else if(e.formFields&&e.formFields.length)for(var h=0,d=e.formFields;h<d.length;h++)r=this.scaleAnnotation(d[h],t,i,n,e)}else r=this.scaleAnnotation(e,t,i,n,void 0);return r},s.prototype.scaleObject=function(e,t,i,n,r,o){if(t=t<0?1:t,1!==(e=e<0?1:e)||1!==t){var a=void 0,l=void 0;xa(n)||(e=(a=(h=n).wrapper.actualSize.width*e)/h.wrapper.actualSize.width,t=(l=h.wrapper.actualSize.height*t)/h.wrapper.actualSize.height);var u=en();o||(o=n);var f=o.wrapper;if(rn(u,-f.rotateAngle,i.x,i.y),function dce(s,e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),h7(s,function pce(s,e,t,i){var n=en();return n.type=t||i?ai.Scaling|ai.Translation:ai.Scaling,b1(n,s,0,0,e,t-s*t,i-e*i),n}(e,t,i,n))}(u,e,t,i.x,i.y),rn(u,f.rotateAngle,i.x,i.y),!xa(n)){var h,g=We(u,{x:(h=n).wrapper.offsetX,y:h.wrapper.offsetY});a>0&&(h.wrapper.width=a,h.wrapper.offsetX=g.x),l>0&&(h.wrapper.height=l,h.wrapper.offsetY=g.y),this.nodePropertyChange(n,{bounds:{width:h.wrapper.width,height:h.wrapper.height,x:h.wrapper.offsetX,y:h.wrapper.offsetY}})}}},s.prototype.scaleAnnotation=function(e,t,i,n,r){var o=this.pdfViewer.nameTable[e.id],a=o.wrapper;r||(r=e);var l=r.wrapper,p=this.getShapePoint(l.offsetX-l.actualSize.width*l.pivot.x,l.offsetY-l.actualSize.height*l.pivot.y,l.actualSize.width,l.actualSize.height,l.rotateAngle,l.offsetX,l.offsetY,n);void 0!==a.actualSize.width&&void 0!==a.actualSize.height&&this.scaleObject(t,i,p,o,a,r);var u=this.checkBoundaryConstraints(void 0,void 0,e.pageIndex,e.wrapper.bounds);if(!u&&(this.scaleObject(1/t,1/i,p,o,a,r),"FreeText"===e.shapeAnnotationType&&("free_text"===e.id.slice(0,9)||"freetext"===e.id.slice(0,8)))){var f=this.moveInsideViewer(e);this.nodePropertyChange(e,{bounds:{width:e.wrapper.width,height:e.wrapper.height,x:e.wrapper.offsetX+f.tx,y:e.wrapper.offsetY+f.ty}})}return u},s.prototype.moveInsideViewer=function(e,t,i){if(t=t||0,i=i||0,"FreeText"===e.shapeAnnotationType&&("free_text"===e.id.slice(0,9)||"freetext"===e.id.slice(0,8))){var n=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);if(n){var r=e.wrapper.bounds,o=n.clientWidth/this.pdfViewer.viewerBase.getZoomFactor(),a=n.clientHeight/this.pdfViewer.viewerBase.getZoomFactor(),l=r.right,h=r.left,d=r.top,p=r.bottom;if(!(l+t<=o-3&&h+t>=1&&p+i<=a-3&&d+i>=1)){var u=0,f=0;l<=o-3||(u=o-l-3),h>=1||(u=u-h+1),p<=a-3||(f=a-p-3),d>=1||(f=f-d+1),0!==u&&(t=u),0!==f&&(i=f)}}}return{tx:t,ty:i}},s.prototype.checkBoundaryConstraints=function(e,t,i,n,r,o){var a=n?void 0:this.pdfViewer.selectedItems.wrapper.bounds,l=n,h=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i),d=1;if(h){var p=h.clientWidth/this.pdfViewer.viewerBase.getZoomFactor(),u=h.clientHeight/this.pdfViewer.viewerBase.getZoomFactor(),f=(n?l.right:a.right)+(e||0),g=(n?l.left:a.left)+(e||0),m=(n?l.top:a.top)+(t||0),y=(n?l.bottom:a.bottom)+(t||0);if(r&&(d=50,this.pdfViewer.viewerBase.eventArgs&&this.pdfViewer.viewerBase.eventArgs.source&&this.RestrictStamp(this.pdfViewer.viewerBase.eventArgs.source)))return!1;if(f<=p-3&&g>=1&&y<=u-3&&m>=d||o)return!0}return!1},s.prototype.RestrictStamp=function(e){return!(!e||void 0===e.pageIndex||!this.pdfViewer.viewerBase.activeElements||e.pageIndex===this.pdfViewer.viewerBase.activeElements.activePageID)},s.prototype.getShapeBounds=function(e){var t=new $i,i=Ao(e),n=i.middleLeft,r=i.topCenter,o=i.bottomCenter,a=i.middleRight,l=i.topLeft,h=i.topRight,d=i.bottomLeft,p=i.bottomRight;if(e.corners={topLeft:l,topCenter:r,topRight:h,middleLeft:n,middleRight:a,bottomLeft:d,bottomCenter:o,bottomRight:p},0!==e.rotateAngle||0!==e.parentTransform){var u=en();rn(u,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=l=We(u,l),e.corners.topCenter=r=We(u,r),e.corners.topRight=h=We(u,h),e.corners.middleLeft=n=We(u,n),e.corners.middleRight=a=We(u,a),e.corners.bottomLeft=d=We(u,d),e.corners.bottomCenter=o=We(u,o),e.corners.bottomRight=p=We(u,p)}return t=$i.toBounds([l,h,d,p]),e.corners.left=t.left,e.corners.right=t.right,e.corners.top=t.top,e.corners.bottom=t.bottom,e.corners.center=t.center,e.corners.width=t.width,e.corners.height=t.height,t},s.prototype.getShapePoint=function(e,t,i,n,r,o,a,l){var h={x:0,y:0},d=en();switch(rn(d,r,o,a),l.x){case 1:switch(l.y){case 1:h=We(d,{x:e+i,y:t+n});break;case 0:h=We(d,{x:e+i,y:t});break;case.5:h=We(d,{x:e+i,y:t+n/2})}break;case 0:switch(l.y){case.5:h=We(d,{x:e,y:t+n/2});break;case 1:h=We(d,{x:e,y:t+n});break;case 0:h=We(d,{x:e,y:t})}break;case.5:switch(l.y){case 0:h=We(d,{x:e+i/2,y:t});break;case.5:h=We(d,{x:e+i/2,y:t+n/2});break;case 1:h=We(d,{x:e+i/2,y:t+n})}}return{x:h.x,y:h.y}},s.prototype.dragConnectorEnds=function(e,t,i,n,r,o,a){var h,d,p;if(h=t instanceof Tu?t.annotations[0]:t,i={x:i.x/this.pdfViewer.viewerBase.getZoomFactor(),y:i.y/this.pdfViewer.viewerBase.getZoomFactor()},this.checkBoundaryConstraints(void 0,void 0,h.pageIndex,h.wrapper.bounds)){if("Distance"===h.shapeAnnotationType){var u=function pAe(s,e){var t;if("Distance"===s.shapeAnnotationType)for(var i=0,n=void 0,r=0;r<s.wrapper.children.length;r++){var o=Ei.findAngle(s.sourcePoint,s.targetPoint);if(s.wrapper.children[r].id.indexOf("leader")>-1){var l=s.wrapper.children[0].bounds.center;0===i?(n={x:s.sourcePoint.x,y:s.sourcePoint.y-s.leaderHeight},l=s.sourcePoint):(n={x:s.targetPoint.x,y:s.targetPoint.y-s.leaderHeight},l=s.targetPoint);var h=en();if(rn(h,o,l.x,l.y),t=We(h,{x:n.x,y:n.y}),e==="Leader"+i)return{leader:"leader"+i,point:t};i++}}return{leader:"",point:t}}(h,e);if("Leader0"===e)this.pdfViewer.viewerBase.tool instanceof $s?(h.vertexPoints[0].x=i.x,h.vertexPoints[0].y=i.y):(p=i.y-u.point.y,h.vertexPoints[0].x+=d=i.x-u.point.x,h.vertexPoints[0].y+=p);else if("Leader1"===e){var f=h.vertexPoints.length-1;this.pdfViewer.viewerBase.tool instanceof $s?(h.vertexPoints[parseInt(f.toString(),10)].x=i.x,h.vertexPoints[parseInt(f.toString(),10)].y=i.y):(d=i.x-u.point.x,p=i.y-u.point.y,h.vertexPoints[parseInt(f.toString(),10)].x+=d,h.vertexPoints[parseInt(f.toString(),10)].y+=p)}else{var g=Ei.findAngle(h.sourcePoint,h.targetPoint),m=t.wrapper.children[0].bounds.center;rn(y=en(),-g,m.x,m.y);var b=We(y,{x:i.x,y:i.y});if("ConnectorSegmentPoint"===e.split("_")[0]){rn(y=en(),-g,m.x,m.y);var y,w=We(y,h.vertexPoints[0]),S=We(y,h.vertexPoints[h.vertexPoints.length-1]);p=b.y-w.y,0===h.leaderHeight&&null!=h.leaderHeight?h.leaderHeight=this.pdfViewer.distanceSettings.leaderLength:(h.leaderHeight+=p,w.y+=p,S.y+=p,rn(y=en(),g,m.x,m.y),h.vertexPoints[0]=We(y,w),h.vertexPoints[h.vertexPoints.length-1]=We(y,S))}}}else if("ConnectorSegmentPoint"===e.split("_")[0]){var I=Number(e.split("_")[1]);d=i.x-h.vertexPoints[parseInt(I.toString(),10)].x,p=i.y-h.vertexPoints[parseInt(I.toString(),10)].y,h.vertexPoints[parseInt(I.toString(),10)].x+=d,h.vertexPoints[parseInt(I.toString(),10)].y+=p,h.vertexPoints.length>2&&"Perimeter"!==t.measureType&&(0===parseFloat(e.split("_")[1])?(h.vertexPoints[h.vertexPoints.length-1].x+=d,h.vertexPoints[h.vertexPoints.length-1].y+=p):parseFloat(e.split("_")[1])===h.vertexPoints.length-1&&(h.vertexPoints[0].x+=d,h.vertexPoints[0].y+=p))}this.nodePropertyChange(h,{vertexPoints:h.vertexPoints}),this.renderSelector(h.pageIndex,a)}return this.pdfViewer.renderDrawing(),!0},s.prototype.dragSourceEnd=function(e,t,i,n){var r=this.pdfViewer.nameTable[e.id];return r.vertexPoints[parseInt(n.toString(),10)].x+=t,r.vertexPoints[parseInt(n.toString(),10)].y+=i,this.pdfViewer.renderDrawing(),!0},s.prototype.updateConnector=function(e,t){e.vertexPoints=t,NK(e,t,e.wrapper.children[0]);var r=e.vertexPoints,o=e.wrapper.children[0];o.canMeasurePath=!0;for(var a=0;a<e.wrapper.children.length;a++)o=e.wrapper.children[parseInt(a.toString(),10)],"Polygon"!==e.shapeAnnotationType&&(o.id.indexOf("srcDec")>-1&&n2(e,o,t[0],r[1],!0),o.id.indexOf("tarDec")>-1&&n2(e,o,t[t.length-1],r[r.length-2],!1))},s.prototype.copy=function(){(this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen||this.pdfViewer.annotationModule)&&(this.pdfViewer.designerMode||this.pdfViewer.enableAnnotation)&&(0!==this.pdfViewer.selectedItems.formFields.length||0!==this.pdfViewer.selectedItems.annotations.length)&&(this.pdfViewer.clipboardData.pasteIndex=1,this.pdfViewer.clipboardData.clipObject=this.copyObjects());var e,t=document.getElementById(this.pdfViewer.element.id+"_search_box");return t&&(e="none"!==t.style.display),(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isPropertyDialogOpen||e)&&(this.pdfViewer.clipboardData.clipObject={}),this.pdfViewer.clipboardData.clipObject},s.prototype.copyObjects=function(){var e=[],t=[];if(this.pdfViewer.clipboardData.childTable={},this.pdfViewer.selectedItems.annotations.length>0){e=this.pdfViewer.selectedItems.annotations;for(var i=0;i<e.length;i++){var n=st(e[parseInt(i.toString(),10)]);t.push(n)}}if(this.pdfViewer.selectedItems.formFields.length>0)for(e=this.pdfViewer.selectedItems.formFields,i=0;i<e.length;i++)n=st(e[parseInt(i.toString(),10)]),t.push(n);if(0===this.pdfViewer.clipboardData.pasteIndex)for(var r=0,o=e;r<o.length;r++){var a=o[r];this.pdfViewer.nameTable[a.id]&&(a.formFieldAnnotationType?(this.pdfViewer.clearSelection(a.pageIndex),this.pdfViewer.formDesignerModule.deleteFormField(a.id)):a.annotName?this.pdfViewer.annotationModule.deleteAnnotationById(a.annotName):this.pdfViewer.annotationModule.deleteAnnotation())}return this.sortByZIndex(t,"zIndex"),t},s.prototype.getNewObject=function(e){var t,i=[];this.pdfViewer.clipboardData.pasteIndex=1;for(var n=0;n<e.length;n++)t=st(e[parseInt(n.toString(),10)]),i.push(t);return i},s.prototype.paste=function(e,t){var r,i=this.pdfViewer.viewerBase.getZoomFactor(),n=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),e||this.pdfViewer.clipboardData.clipObject){var o=e?this.getNewObject(e):this.pdfViewer.clipboardData.clipObject;if(o){var a={};0!==this.pdfViewer.clipboardData.pasteIndex&&this.pdfViewer.clearSelection(t);for(var l=0,h=o;l<h.length;l++){r=(d=h[l]).id,d.id+=ta();var p=this.splitFormFieldName(d);this.pdfViewer.formDesigner&&(this.pdfViewer.formDesigner.setFormFieldIndex(),d.name=p+this.pdfViewer.formDesigner.formFieldIndex),a[d.id]=d}for(var f=0;f<o.length;f++){var d=o[parseInt(f.toString(),10)],g=this.pdfViewer.viewerBase.getElement("_pageDiv_"+d.pageIndex),m=event;if(m&&!m.clientX&&!m.clientY&&(m={clientX:this.pdfViewer.viewerBase.mouseLeft,clientY:this.pdfViewer.viewerBase.mouseTop}),X()&&(m=this.pdfViewer.viewerBase.mouseDownEvent),xa(d))this.calculateCopyPosition(d,g,m);else if(g){var y=g.getBoundingClientRect();d.bounds.x=(m.clientX-y.left)/i,d.bounds.y=(m.clientY-y.top)/i}var b=st(d);"Cut"!==this.pdfViewer.viewerBase.contextMenuModule.previousAction?(b.id+=ta(),this.pdfViewer.annotationModule&&"HandWrittenSignature"!==b.shapeAnnotationType&&(b.annotName=b.id,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(b,o[0],!1)),("SignatureText"===b.shapeAnnotationType||"HandWrittenSignature"===b.shapeAnnotationType||"SignatureImage"===b.shapeAnnotationType)&&this.pdfViewer.viewerBase.signatureModule.storeSignatureData(b.pageIndex,b),b.formFieldAnnotationType||this.pdfViewer.annotation.addAction(this.pdfViewer.viewerBase.getActivePage(!1),null,b,"Addition","",b,b)):(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(b,o[0],!0),("SignatureText"===b.shapeAnnotationType||"HandWrittenSignature"===b.shapeAnnotationType||"SignatureImage"===b.shapeAnnotationType)&&this.pdfViewer.viewerBase.signatureModule.storeSignatureData(b.pageIndex,b));var w=this.add(b);if(this.pdfViewer.formDesigner&&w.formFieldAnnotationType&&this.pdfViewer.annotation.addAction(this.pdfViewer.viewerBase.getActivePage(!0),null,w,"Addition","",w,w),("FreeText"===b.shapeAnnotationType||b.enableShapeLabel)&&w&&this.nodePropertyChange(w,{}),w.formFieldAnnotationType&&w.pageIndex===t){this.pdfViewer.formFieldCollection.push(w);var S={id:w.id,name:w.name,value:w.value,type:w.formFieldAnnotationType,isReadOnly:w.isReadonly,fontFamily:w.fontFamily,fontSize:w.fontSize,fontStyle:w.fontStyle,color:w.color,backgroundColor:w.backgroundColor,alignment:w.alignment,visibility:w.visibility,maxLength:w.maxLength,isRequired:w.isRequired,isPrint:w.isPrint,isSelected:w.isSelected,isChecked:w.isChecked,tooltip:w.tooltip,bounds:w.bounds,thickness:w.thickness,borderColor:w.borderColor,signatureIndicatorSettings:w.signatureIndicatorSettings};w.options&&w.options.length>0&&(S.options=w.options),this.pdfViewer.formFieldCollections.push(S),this.pdfViewer.formDesigner.drawHTMLContent(w.formFieldAnnotationType,w.wrapper.children[0],w,w.pageIndex,this.pdfViewer,r)}this.pdfViewer.select([b.id],this.pdfViewer.annotationSelectorSettings),w.formFieldAnnotationType||this.pdfViewer.annotationModule.triggerAnnotationAddEvent(b)}}this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clipboardData.pasteIndex++}this.pdfViewer.enableServerDataBinding(n,!0)},s.prototype.splitFormFieldName=function(e){var t=null;if(e)switch(e.formFieldAnnotationType){case"Textbox":t="Textbox";break;case"PasswordField":t="Password";break;case"Checkbox":t="Check Box";break;case"RadioButton":t="Radio Button";break;case"DropdownList":t="Dropdown";break;case"ListBox":t="List Box";break;case"SignatureField":t="Signature";break;case"InitialField":t="Initial"}return t},s.prototype.calculateCopyPosition=function(e,t,i){for(var r,o,a,l,n=this.pdfViewer.viewerBase.getZoomFactor(),h=0;h<e.vertexPoints.length;h++)if(t)if(0===h){var d=t.getBoundingClientRect();r=e.vertexPoints[parseInt(h.toString(),10)].x,o=e.vertexPoints[parseInt(h.toString(),10)].y,e.vertexPoints[parseInt(h.toString(),10)].x=(i.clientX-d.left)/n,e.vertexPoints[parseInt(h.toString(),10)].y=(i.clientY-d.top)/n,a=e.vertexPoints[parseInt(h.toString(),10)].x,l=e.vertexPoints[parseInt(h.toString(),10)].y}else e.vertexPoints[parseInt(h.toString(),10)].x+=a-r,e.vertexPoints[parseInt(h.toString(),10)].y+=l-o},s.prototype.cut=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]),(this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen||this.pdfViewer.selectedItems.annotations.length>0)&&(this.pdfViewer.designerMode||this.pdfViewer.selectedItems.annotations.length>0)&&(0!==this.pdfViewer.selectedItems.formFields.length||0!==this.pdfViewer.selectedItems.annotations.length)&&(this.pdfViewer.clipboardData.pasteIndex=0,this.pdfViewer.clipboardData.clipObject=this.copyObjects(),this.pdfViewer.renderDrawing(void 0,e),this.pdfViewer.enableServerDataBinding(t,!0));var i,n=document.getElementById(this.pdfViewer.element.id+"_search_box");n&&(i="none"!==n.style.display),(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isPropertyDialogOpen||i)&&(this.pdfViewer.clipboardData.clipObject={})},s.prototype.sortByZIndex=function(e,t){var i=t||"zIndex";return e.sort(function(n,r){return n[i]-r[i]})},s}(),Pd=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),$p=function(){function s(e,t,i){void 0===i&&(i=!1),this.commandHandler=null,this.inAction=!1,this.pdfViewerBase=null,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.helper=void 0,this.undoElement={annotations:[]},this.undoParentElement={annotations:[]},this.commandHandler=e,this.pdfViewerBase=t}return s.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},s.prototype.mouseDown=function(e){this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source)},s.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.prevPageId=this.pdfViewerBase.activeElements.activePageID,!this.blocked},s.prototype.mouseUp=function(e){this.currentPosition=e.position,this.isTooltipVisible=!1,this.endAction(),this.helper=null},s.prototype.endAction=function(){this.commandHandler&&(this.commandHandler.tool="",this.helper&&this.commandHandler.remove(this.helper)),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},s.prototype.mouseWheel=function(e){this.currentPosition=e.position},s.prototype.mouseLeave=function(e){this.mouseUp(e)},s.prototype.updateSize=function(e,t,i,n,r,o,a){var l=this.commandHandler.viewerBase.getZoomFactor(),h=this.currentPosition.x/l-this.startPosition.x/l,d=this.currentPosition.y/l-this.startPosition.y/l,p=e instanceof Ss?o:e.rotateAngle,u=en();rn(u,-p,0,0);var m,f=0,g=0,y=e instanceof Ss?e.actualSize.width:e.wrapper.bounds.width,b=e instanceof Ss?e.actualSize.height:e.wrapper.bounds.height,w=e;e.formFieldAnnotationType||!e.annotName&&!e.shapeAnnotationType&&e&&(w=e.annotations[0]);var S=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(w):{},I=0,x=0,T=0,L=0;(S.minWidth||S.maxWidth||S.minHeight||S.maxHeight)&&(I=S.maxHeight?S.maxHeight:2e3,x=S.maxWidth?S.maxWidth:2e3,T=S.minHeight?S.minHeight:0,L=S.minWidth?S.minWidth:0);var N=!1;if((T||L||I||x)&&(N=!0),N&&a){var O=this.getPositions(n,h,d),_=y+O.x,B=b+O.y;B>T&&B<I&&_>L&&_<x||((B<T||B>I)&&(d=B<T?T-b:I-b),(_<L||_>x)&&(h=_<L?L-y:x-y))}switch(n){case"ResizeWest":h=(m=We(u,{x:h,y:d})).x,d=m.y,g=1,d=0,N&&r.width-h>x&&(h=x-r.width),f=(r.width-h)/y;break;case"ResizeEast":h=(m=We(u,{x:h,y:d})).x,d=m.y,d=0,N&&r.width+h>x&&(h=x-r.width),f=(r.width+h)/y,g=1;break;case"ResizeNorth":f=1,h=(m=We(u,{x:h,y:d})).x,d=m.y,N&&r.height-d>I&&(d=I-r.height),g=(r.height-d)/b;break;case"ResizeSouth":f=1,h=(m=We(u,{x:h,y:d})).x,d=m.y,N&&r.height+d>I&&(d=I-r.height),g=(r.height+d)/b;break;case"ResizeNorthEast":h=(m=We(u,{x:h,y:d})).x,d=m.y,N&&(r.width+h>x&&(h=x-r.width),r.height-d>I&&(d=I-r.height)),f=(r.width+h)/y,g=(r.height-d)/b;break;case"ResizeNorthWest":h=(m=We(u,{x:h,y:d})).x,d=m.y,N&&(r.width-h>x&&(h=x-r.width),r.height-d>I&&(d=I-r.height)),f=(r.width-h)/y,g=(r.height-d)/b;break;case"ResizeSouthEast":h=(m=We(u,{x:h,y:d})).x,d=m.y,N&&(r.width+h>x&&(h=x-r.width),r.height+d>I&&(d=I-r.height)),g=(r.height+d)/b,f=(r.width+h)/y;break;case"ResizeSouthWest":h=(m=We(u,{x:h,y:d})).x,d=m.y,N&&(r.width-h>x&&(h=x-r.width),r.height+d>I&&(d=I-r.height)),f=(r.width-h)/y,g=(r.height+d)/b}return{width:f,height:g}},s.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},s.prototype.getPositions=function(e,t,i){switch(e){case"ResizeEast":return{x:t,y:0};case"ResizeSouthEast":return{x:t,y:i};case"ResizeSouth":return{x:0,y:i};case"ResizeNorth":return{x:0,y:-i};case"ResizeNorthEast":return{x:t,y:-i};case"ResizeNorthWest":return{x:-t,y:-i};case"ResizeWest":return{x:-t,y:0};case"ResizeSouthWest":return{x:-t,y:i}}return{x:t,y:i}},s}(),MAe=function(s){function e(t,i){return s.call(this,t,i,!0)||this}return Pd(e,s),e.prototype.mouseDown=function(t){this.inAction=!0,this.mouseEventHelper(t),s.prototype.mouseDown.call(this,t)},e.prototype.mouseEventHelper=function(t){this.commandHandler&&this.commandHandler.annotationModule&&(this.commandHandler.annotationModule.overlappedCollections=Ta(t,this.pdfViewerBase,this.commandHandler,!0));var i=Ta(t,this.pdfViewerBase,this.commandHandler),n=!1;if(i&&"StickyNotes"===i.shapeAnnotationType&&i.annotationSettings&&i.annotationSettings.isLock&&(n=!this.commandHandler.annotationModule.checkAllowedInteractions("Select",i)),!n){var r;if(r=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"",this.commandHandler){var o=this.commandHandler.selectedItems;if(o){var a=o.annotations[0],l=o.formFields[0],h=this.commandHandler.selectedItems.annotations[0],d=t.source;if((o.annotations.length&&t.info&&!t.info.ctrlKey&&this.commandHandler.annotationModule&&!1===this.commandHandler.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus||t.info&&t.info.ctrlKey&&(d&&"FreeText"===d.shapeAnnotationType||h&&"FreeText"===h.shapeAnnotationType)||c(i)&&this.commandHandler.formDesignerModule&&!(d&&"FreeText"===d.shapeAnnotationType||h&&("FreeText"===h.shapeAnnotationType||"Image"===h.shapeAnnotationType||"StickyNotes"===h.shapeAnnotationType)))&&this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),i&&(!c(this.pdfViewerBase.isFreeTextSelected)&&!this.pdfViewerBase.isFreeTextSelected&&(this.commandHandler.select([i.id],r),this.commandHandler.viewerBase.isAnnotationMouseDown=!0),this.pdfViewerBase.isFreeTextSelected=!1,this.commandHandler.viewerBase.isFormFieldMouseDown=!0),0===o.annotations.length&&a&&"HandWrittenSignature"!==a.shapeAnnotationType&&"SignatureText"!==a.shapeAnnotationType&&"SignatureImage"!==a.shapeAnnotationType&&"Path"!==a.shapeAnnotationType&&!a.formFieldAnnotationType&&(this.commandHandler.enableToolbar&&E.isDevice&&!this.commandHandler.enableDesktopMode&&this.commandHandler.toolbarModule.showToolbar(!0),this.commandHandler.fireAnnotationUnSelect(a.annotName,a.pageIndex,a)),0===o.formFields.length&&this.commandHandler.formDesignerModule&&l&&l.formFieldAnnotationType)this.commandHandler.fireFormFieldUnselectEvent("formFieldUnselect",p={name:l.name,id:l.id,value:l.value,fontFamily:l.fontFamily,fontSize:l.fontSize,fontStyle:l.fontStyle,color:l.color,backgroundColor:l.backgroundColor,alignment:l.alignment,isReadonly:l.isReadOnly,visibility:l.visibility,maxLength:l.maxLength,isRequired:l.isRequired,isPrint:l.isPrint,rotation:l.rotation,tooltip:l.tooltip,options:l.options,isChecked:l.isChecked,isSelected:l.isSelected},l.pageIndex);else if(this.pdfViewerBase.currentTarget&&this.pdfViewerBase.currentTarget.id&&this.commandHandler.formFields&&"mousedown"===event.type)for(var u=0;u<this.commandHandler.formFields.length;u++){var f=this.commandHandler.formFields[parseInt(u.toString(),10)];if(this.pdfViewerBase.currentTarget&&this.pdfViewerBase.currentTarget.id===f.id){var p={value:f.value,fontFamily:f.fontFamily,fontSize:f.fontSize,fontStyle:f.fontStyle,color:f.color,backgroundColor:f.backgroundColor,alignment:f.alignment,isReadonly:f.isReadonly,visibility:f.visibility,maxLength:f.maxLength,isRequired:f.isRequired,isPrint:f.isPrint,rotation:f.rotateAngle,tooltip:f.tooltip,options:f.options,isChecked:f.isChecked,isSelected:f.isSelected};i?this.pdfViewerBase.currentTarget.id!=event.target.id&&"e-pv-text-layer"!=event.target.className&&(this.commandHandler.fireFocusOutFormField(p,f.pageIndex),this.pdfViewerBase.currentTarget=null):(this.commandHandler.fireFocusOutFormField(p,f.pageIndex),this.pdfViewerBase.currentTarget=null)}}}}}},e.prototype.mouseMove=function(t){return s.prototype.mouseMove.call(this,t),!this.blocked},e.prototype.mouseUp=function(t){this.mouseEventHelper(t),this.inAction=!1,s.prototype.mouseUp.call(this,t)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}($p),oy=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.currentTarget=null,n.prevNode=null,n}return Pd(e,s),e.prototype.mouseDown=function(t){s.prototype.mouseDown.call(this,t),this.offset={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY},this.startPosition=t.position;var i=st(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},xa(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),this.inAction=!0},e.prototype.mouseUp=function(t){if(this.commandHandler&&t.source){this.checkisAnnotationMove(t);var i=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([t.source.id],i),this.pdfViewerBase.activeElements.activePageID==t.source.pageIndex&&this.commandHandler.dragSelectedObjects(this.calculateMouseActionXDiff(t),this.calculateMouseActionYDiff(t),this.pdfViewerBase.activeElements.activePageID,i,null),t.source&&("Textbox"===t.source.formFieldAnnotationType||"Checkbox"===t.source.formFieldAnnotationType||"RadioButton"===t.source.formFieldAnnotationType||"ListBox"===t.source.formFieldAnnotationType||"SignatureField"===t.source.formFieldAnnotationType||"InitialField"===t.source.formFieldAnnotationType||"DropdownList"===t.source.formFieldAnnotationType||"PasswordField"===t.source.formFieldAnnotationType)&&this.commandHandler.formDesignerModule.updateHTMLElement(t.source),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i),this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.viewerBase.isFormFieldMouseMove=!1;var n={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},modifiedDate:t.source.modifiedDate};if(xa(t.source)&&(n.vertexPoints=t.source.vertexPoints,n.leaderHeight=t.source.leaderHeight),t.target&&t.target.formFieldAnnotationType){var r=t.target;this.commandHandler.fireFormFieldMoveEvent("formFieldMove",{value:r.value,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,color:r.color,backgroundColor:r.backgroundColor,borderColor:r.borderColor,thickness:r.thickness,alignment:r.alignment,isReadonly:r.isReadonly,visibility:r.visibility,maxLength:r.maxLength,isRequired:r.isRequired,isPrint:r.isPrint,rotation:r.rotateAngle,tooltip:r.tooltip,options:r.options,isChecked:r.isChecked,isSelected:r.isSelected},r.pageIndex,{X:this.offset.x,Y:this.offset.y,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height},{X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height})}this.commandHandler.annotation&&(this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Drag","",this.redoElement,n),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Drag"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null))}var h=this.commandHandler&&this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].shapeAnnotationType:null;h&&"Image"!==h&&"SignatureImage"!==h?s.prototype.mouseUp.call(this,t):"Image"===h||"SignatureImage"===h?this.inAction=!1:this.commandHandler&&this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0&&s.prototype.mouseUp.call(this,t)},e.prototype.calculateMouseXDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.x-this.startPosition.x:0},e.prototype.calculateMouseYDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.y-this.startPosition.y:0},e.prototype.calculateMouseActionXDiff=function(t){var i=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.x+i-t.source.wrapper.offsetX:0},e.prototype.calculateMouseActionYDiff=function(t){var i=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.y+i-t.source.wrapper.offsetY:0},e.prototype.mouseMove=function(t,i,n){if(s.prototype.mouseMove.call(this,t),this.inAction){this.currentPosition=t.position,this.currentTarget=t.target;var r=t.source.annotationSelectorSettings,o=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor(),a=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor(),l=this.offset.x+o,h=this.offset.y+a,d=this.calculateMouseActionXDiff(t),p=this.calculateMouseActionYDiff(t),u=this.commandHandler.selectedItems.annotations[0],f=void 0;if(this.helper)d=l-this.helper.wrapper.offsetX,p=h-this.helper.wrapper.offsetY;else{(f=st(this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0])).wrapper&&(d=l-f.wrapper.offsetX,p=h-f.wrapper.offsetY,f.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds),f.wrapper=void 0,f.id="diagram_helper","Stamp"===f.shapeAnnotationType?(f.strokeColor="",f.borderDashArray="",f.fillColor="transparent",f.stampFillColor="transparent",f.data=""):"FreeText"===f.shapeAnnotationType?(f.strokeColor="blue",f.fillColor="transparent",f.thickness=1,f.opacity=1,f.dynamicText=""):"SignatureText"===f.shapeAnnotationType?(f.strokeColor="red",f.borderDashArray="5,5",f.fillColor="transparent",f.thickness=2,f.opacity=1,f.data=""):(f.strokeColor="red",f.borderDashArray="5,5",f.fillColor="transparent",f.thickness=2,f.opacity=1),!0===f.enableShapeLabel&&(f.labelContent="");var g=f.shapeAnnotationType;i||"Image"===g||"SignatureImage"===g?f=this.helper=t.source:this.helper=f=this.commandHandler.add(f),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[f]:this.commandHandler.selectedItems.formFields=[f]}if(this.helper&&"Stamp"===this.helper.shapeAnnotationType&&(i=!0),this.commandHandler.checkBoundaryConstraints(d,p,this.pdfViewerBase.activeElements.activePageID,this.helper.wrapper.bounds,i,n)){if(g=this.helper.shapeAnnotationType,!this.helper||"Image"!==g&&"SignatureImage"!==g)this.commandHandler.dragSelectedObjects(d,p,this.pdfViewerBase.activeElements.activePageID,r,this.helper);else{this.checkisAnnotationMove(t);var m=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([t.source.id],m),this.commandHandler.dragSelectedObjects(d,p,this.pdfViewerBase.activeElements.activePageID,m,this.helper),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,m)}this.prevNode=this.helper,this.prevPosition=this.currentPosition}else this.currentPosition=this.prevPosition;u&&u.annotName&&this.commandHandler.annotation.triggerAnnotationMove(u,!0)}return!0},e.prototype.mouseLeave=function(t){var i=t.source.annotationSelectorSettings,n=this.offset.x+this.calculateMouseXDiff(),r=this.offset.y+this.calculateMouseYDiff();this.commandHandler.dragSelectedObjects(n-t.source.wrapper.offsetX,r-t.source.wrapper.offsetY,this.prevPageId,i,null),this.commandHandler.renderSelector(this.prevPageId,i),s.prototype.mouseLeave.call(this,t)},e.prototype.endAction=function(){s.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},e.prototype.checkisAnnotationMove=function(t){this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].annotName===t.source.annotName&&(this.commandHandler.viewerBase.isAnnotationMouseMove=!0):this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0?this.commandHandler.selectedItems.formFields[0].name===t.source.name&&(this.commandHandler.viewerBase.isFormFieldMouseMove=!0):this.commandHandler.viewerBase.isFormFieldMouseMove=!1},e}($p),ay=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Pd(e,s),e.prototype.mouseDown=function(t){s.prototype.mouseUp.call(this,t)},e.prototype.mouseMove=function(t){var i;if(!this.inAction){var n=this.pdfViewerBase.activeElements.activePageID;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);var r=this.commandHandler.annotation.stampAnnotationModule.moveStampElement(t.position.x,t.position.y,n);if("SignatureText"===r.shapeAnnotationType){var o=this.getTextWidth(r.data,r.fontSize,r.fontFamily),a=1;o>r.bounds.width&&(a=r.bounds.width/o),r.fontSize=this.getFontSize(Math.floor(r.fontSize*a)),r.bounds.height=r.fontSize<32?2*r.fontSize:r.bounds.height,r.thickness=0}i=this.commandHandler.add(r),t.source=this.commandHandler.annotations[this.commandHandler.annotations.length-1],t.sourceWrapper=t.source.wrapper,this.inAction=!0;var h=t.source;this.offset=!h||"HandWrittenSignature"!==h.shapeAnnotationType&&"SignatureText"!==h.shapeAnnotationType&&"SignatureImage"!==h.shapeAnnotationType?{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY}:{x:t.source.wrapper.offsetX-t.source.wrapper.bounds.width/2,y:t.source.wrapper.offsetY-t.source.wrapper.bounds.height/2},this.startPosition=t.position,this.commandHandler.select([i.id])}var d=t.source.annotationSelectorSettings;return s.prototype.mouseMove.call(this,t,!0,!0),this.commandHandler.renderSelector(t.source.pageIndex,d),this.inAction},e.prototype.getTextWidth=function(t,i,n){var a,o=document.createElement("canvas").getContext("2d");return i&&(a=i+"px "+n),o.font=a||getComputedStyle(document.body).font,o.measureText(t).width},e.prototype.getFontSize=function(t){return t%2==0?t:--t},e}(oy),jK=function(s){function e(t,i,n){var r=s.call(this,t,i)||this;return r.sourceObject=n,r}return Pd(e,s),e.prototype.mouseDown=function(t){this.pdfViewerBase.disableTextSelectionMode(),s.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas({currentPosition:this.currentPosition,prevPosition:this.prevPosition},this.pdfViewerBase.activeElements.activePageID)},e.prototype.mouseMove=function(t){return s.prototype.mouseMove.call(this,t),this.inAction&&this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas({currentPosition:this.currentPosition,prevPosition:this.pdfViewerBase.prevPosition},this.pdfViewerBase.activeElements.activePageID),this.inAction},e.prototype.mouseUp=function(t){return this.commandHandler.annotation.inkAnnotationModule.storePathData(),!0},e.prototype.mouseLeave=function(t){},e.prototype.endAction=function(){s.prototype.endAction.call(this)},e}($p),LE=function(s){function e(t,i,n){var r=s.call(this,t,i,!0)||this;return r.endPoint=n,r}return Pd(e,s),e.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=void 0,s.prototype.mouseDown.call(this,t),this.initialPosition=t.position,this.prevSource=this.commandHandler.selectedItems.annotations[0];var r=st(t.source);this.redoElement={bounds:{x:r.wrapper.offsetX,y:r.wrapper.offsetY,width:r.wrapper.actualSize.width,height:r.wrapper.actualSize.height}},xa(r)&&(this.redoElement.vertexPoints=r.vertexPoints,this.redoElement.leaderHeight=r.leaderHeight,("Distance"===r.measureType||"Perimeter"===r.measureType||"Area"===r.measureType||"Volume"===r.measureType)&&(this.redoElement.notes=r.notes)),this.currentPosition=t.position},e.prototype.mouseUp=function(t){if(this.commandHandler){var i=this.commandHandler.selectedItems.annotations[0];if(i){var n=this.commandHandler.annotationModule.findAnnotationSettings(i),r=0,o=0,a=0,l=0;if((n.minWidth||n.maxWidth||n.minHeight||n.maxHeight)&&(r=n.maxHeight?n.maxHeight:2e3,o=n.maxWidth?n.maxWidth:2e3,a=n.minHeight?n.minHeight:0,l=n.minWidth?n.minWidth:0),i.vertexPoints.length>3){var h=this.commandHandler.viewerBase.checkAnnotationWidth(i.vertexPoints),d=h.width,p=h.height;a||l||r||o?(p>a&&p<r||d>l&&d<o)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight}):this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight})}else if(a||l||r||o)if("Line"===i.shapeAnnotationType||"Distance"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType){var u,f,g=(u=i.vertexPoints[0].x>i.vertexPoints[1].x?i.vertexPoints[0].x-i.vertexPoints[1].x:i.vertexPoints[1].x-i.vertexPoints[0].x)>(f=i.vertexPoints[0].y>i.vertexPoints[1].y?i.vertexPoints[0].y-i.vertexPoints[1].y:i.vertexPoints[1].y-i.vertexPoints[0].y)?u:f;g<(r||o)&&g>(a||l)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight})}else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight});else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight});var m=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.prevSource.id],m),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,m);var y={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};("Distance"===i.measureType||"Perimeter"===i.measureType||"Area"===i.measureType||"Volume"===i.measureType)&&(this.commandHandler.annotation.updateCalibrateValues(this.commandHandler.selectedItems.annotations[0]),y.notes=t.source.notes),xa(t.source)&&(y.vertexPoints=t.source.vertexPoints,y.leaderHeight=t.source.leaderHeight),this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,y)}}s.prototype.mouseUp.call(this,t)},e.prototype.mouseMove=function(t){if(s.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition&&(this.inAction&&void 0!==this.endPoint&&0!=this.currentPosition.x-this.prevPosition.x||0!=this.currentPosition.y-this.prevPosition.y)){if(!this.helper){var l=st(this.commandHandler.selectedItems.annotations[0]);l.id="diagram_helper",l.strokeColor="red",l.borderDashArray="5,5",l.fillColor="transparent",l.thickness=2,l.opacity=1,!0===l.enableShapeLabel&&(l.labelContent=""),this.helper=l=this.commandHandler.add(l),this.commandHandler.selectedItems.annotations=[l]}var h=t.source.annotationSelectorSettings;this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.helper,this.currentPosition,this.selectedSegment,t.target,null,h),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,h)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){s.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}($p),IS=function(s){function e(t,i,n){var r=s.call(this,t,i,!0)||this;return r.initialBounds=new $i,r.corner=n,r}return Pd(e,s),e.prototype.mouseDown=function(t){s.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width,this.initialPosition=t.position;var i=st(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},xa(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),"Radius"===i.measureType&&(this.redoElement.notes=i.notes),this.prevSource=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0]},e.prototype.mouseUp=function(t,i){var r=st(t.source);if(this.commandHandler&&this.prevSource){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.viewerBase.isAnnotationSelect=!0,this.commandHandler.viewerBase.isFormFieldSelect=!0,this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);var o=this.updateSize(this.prevSource,this.currentPosition,this.initialPosition,this.corner,this.initialBounds,null,!0);if(this.blocked=this.scaleObjects(o.width,o.height,this.corner,this.currentPosition,this.initialPosition,this.prevSource,t.info.ctrlKey),this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations[0]&&"Stamp"===this.commandHandler.selectedItems.annotations[0].shapeAnnotationType&&(this.commandHandler.stampSettings.minHeight||this.commandHandler.stampSettings.minWidth)&&this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings),this.commandHandler.selectedItems.formFields.length>0&&("Textbox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"Checkbox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"RadioButton"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"InitialField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"SignatureField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"DropdownList"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"ListBox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"PasswordField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType)&&("SignatureField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType&&(this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings=this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings?this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings:{opacity:1,backgroundColor:"rgba(255, 228, 133, 0.35)",width:19,height:10,fontSize:10,text:null,color:"black"}),this.commandHandler.formDesignerModule.updateHTMLElement(this.commandHandler.selectedItems.formFields[0])),this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings),this.commandHandler.annotation&&t.source.wrapper){var a={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};xa(t.source)&&(a.vertexPoints=t.source.vertexPoints,a.leaderHeight=t.source.leaderHeight),"Radius"===this.prevSource.measureType&&(a.notes=t.source.notes,this.commandHandler.annotation.updateCalibrateValues(this.prevSource)),"SignatureText"===this.prevSource.shapeAnnotationType&&(a.fontSize=this.prevSource.wrapper.children[1].style.fontSize*(a.bounds.width/r.width),null!=t.target&&(t.target.fontSize=a.fontSize,t.target.wrapper.children[1].style.fontSize=a.fontSize,t.target.wrapper.children[1].horizontalAlignment="Center",t.target.wrapper.children[1].verticalAlignment="Center",t.target.wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].wrapper.children[1].style.fontSize=a.fontSize,this.commandHandler.selectedItems.annotations[0].wrapper.children[1].horizontalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].verticalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].fontSize=a.fontSize)),"SignatureText"===this.prevSource.shapeAnnotationType&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0&&this.commandHandler.nodePropertyChange(this.commandHandler.selectedItems.annotations[0],{fontSize:a.fontSize}),this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,a)}if(t.target&&t.target.formFieldAnnotationType){var h=t.target;this.commandHandler.fireFormFieldResizeEvent("formFieldResize",{value:h.value,fontFamily:h.fontFamily,fontSize:h.fontSize,fontStyle:h.fontStyle,color:h.color,backgroundColor:h.backgroundColor,alignment:h.alignment,isReadonly:h.isReadonly,visibility:h.visibility,maxLength:h.maxLength,isRequired:h.isRequired,isPrint:h.isPrint,rotation:h.rotateAngle,tooltip:h.tooltip,options:h.options,isChecked:h.isChecked,isSelected:h.isSelected},h.pageIndex,{X:this.initialBounds.x,Y:this.initialBounds.y,Width:this.initialBounds.width,Height:this.initialBounds.height},{X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height})}this.commandHandler.annotation&&this.commandHandler.annotation.stampAnnotationModule&&this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,this.prevSource.id,"Resize")}return s.prototype.mouseUp.call(this,t),!this.blocked},e.prototype.mouseMove=function(t){s.prototype.mouseMove.call(this,t);var i=t.source;this.currentPosition=t.position;var n=this.currentPosition.x-this.startPosition.x,r=this.currentPosition.y-this.startPosition.y;n/=this.commandHandler.viewerBase.getZoomFactor(),r/=this.commandHandler.viewerBase.getZoomFactor();var o=t.source,a=this.getPoints(n,r),l=o.width+a.x,h=o.height+a.y,d=i;i&&i.annotations&&(d=i.annotations[0]);var p=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(d):{},u=0,f=0,g=0,m=0;(p.minWidth||p.maxWidth||p.minHeight||p.maxHeight)&&(u=p.maxHeight?p.maxHeight:2e3,f=p.maxWidth?p.maxWidth:2e3,g=p.minHeight?p.minHeight:0,m=p.minWidth?p.minWidth:0),(g||m||u||f)&&(h>=g&&h<=u&&l>=m&&l<=f||((h<g||h>u)&&(r=h<g?g-o.height:u-o.height),(l<m||l>f)&&(n=l<m?m-o.width:f-o.width)));var y={x:n,y:r};if(this.currentElement.wrapper&&(y=Na(-this.currentElement.wrapper.rotateAngle,void 0,void 0,y)),y=this.getChanges(y),this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings),!this.helper){var b=st(this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0]);b.id="diagram_helper","Stamp"===b.shapeAnnotationType?(b.strokeColor="",b.borderDashArray="",b.fillColor="transparent",b.stampFillColor="transparent",b.data=""):"FreeText"===b.shapeAnnotationType?(b.strokeColor="blue",b.fillColor="transparent",b.thickness=1,b.opacity=1,b.dynamicText=""):(b.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds,b.strokeColor="red",b.borderDashArray="5,5",b.fillColor="transparent",b.thickness=2,b.opacity=1),!0===b.enableShapeLabel&&(b.labelContent=""),"SignatureText"===b.shapeAnnotationType&&(b.fillColor="transparent",b.thickness=1,b.opacity=1,b.data=""),this.helper=b=this.commandHandler.add(b),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[b]:this.commandHandler.selectedItems.formFields=[b]}var w=this.updateSize(this.helper,this.startPosition,this.currentPosition,this.corner,this.initialBounds);return this.blocked=!this.scaleObjects(w.width,w.height,this.corner,this.startPosition,this.currentPosition,this.helper,t.info.ctrlKey),this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"W:"+Math.round(t.wrapper.bounds.width)+" H:"+Math.round(t.wrapper.bounds.height)},e.prototype.getChanges=function(t){switch(this.corner){case"ResizeEast":return{x:t.x,y:0};case"ResizeSouthEast":return t;case"ResizeSouth":return{x:0,y:t.y};case"ResizeNorth":return{x:0,y:-t.y};case"ResizeNorthEast":return{x:t.x,y:-t.y};case"ResizeNorthWest":return{x:-t.x,y:-t.y};case"ResizeWest":return{x:-t.x,y:0};case"ResizeSouthWest":return{x:-t.x,y:t.y}}return t},e.prototype.getPoints=function(t,i){switch(this.corner){case"ResizeEast":return{x:t,y:0};case"ResizeSouthEast":return{x:t,y:i};case"ResizeSouth":return{x:0,y:i};case"ResizeNorth":return{x:0,y:-i};case"ResizeNorthEast":return{x:t,y:-i};case"ResizeNorthWest":return{x:-t,y:-i};case"ResizeWest":return{x:-t,y:0};case"ResizeSouthWest":return{x:-t,y:i}}return{x:t,y:i}},e.prototype.scaleObjects=function(t,i,n,r,o,a,l){var h=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(a):{},d=0,p=0,g=this.currentPosition.x-this.startPosition.x,m=this.currentPosition.y-this.startPosition.y;g/=this.commandHandler.viewerBase.getZoomFactor(),m/=this.commandHandler.viewerBase.getZoomFactor();var y=a,b=this.getPoints(g,m),w=y.bounds.width+b.x,S=y.bounds.height+b.y;return(h.minWidth||h.maxWidth||h.minHeight||h.maxHeight)&&(d=h.maxHeight?h.maxHeight:2e3,p=h.maxWidth?h.maxWidth:2e3),a instanceof Tu&&1===a.annotations.length&&("Perimeter"===a.annotations[0].shapeAnnotationType||"Radius"===a.annotations[0].shapeAnnotationType||"Stamp"===a.shapeAnnotationType)?i=t=1===i&&1===t?r!==o?Math.max(i,t):0:Math.max(1===i?0:i,1===t?0:t):"Image"===a.shapeAnnotationType||"HandWrittenSignature"===a.shapeAnnotationType||"SignatureText"===a.shapeAnnotationType||"SignatureImage"===a.shapeAnnotationType?(1===i&&1===t||l&&(w>=p&&S<d&&(i=Math.max(i,t)),S>=d&&w<p&&(t=Math.max(i,t)),w<p&&S<d&&(i=t=Math.max(i,t))),l||(i=t=Math.max(i,t))):("Perimeter"===a.shapeAnnotationType||"Radius"===a.shapeAnnotationType||"Stamp"===a.shapeAnnotationType)&&("Stamp"===a.shapeAnnotationType?(!d&&!i&&(i=Math.max(1===i?0:i)),!p&&!t&&(t=Math.max(1===t?0:t))):(!d||!p)&&(1===i&&1===t||(i=t=Math.max(1===i?0:i,1===t?0:t)))),this.blocked=this.commandHandler.scaleSelectedItems(t,i,this.getPivot(this.corner)),this.blocked},e}($p),ec=function(s){function e(t,i,n){var r=s.call(this,t,i)||this;return r.sourceObject=n,r}return Pd(e,s),e.prototype.mouseDown=function(t){if(!isNaN(this.pdfViewerBase.activeElements.activePageID)&&"e-pv-page-container"!=event.target.className){s.prototype.mouseDown.call(this,t),this.inAction=!0;var i={bounds:{x:100,y:300,width:100,height:100},pageIndex:0,strokeColor:"red",thickness:3};i.id=ta(),this.sourceObject.pageIndex=i.pageIndex=this.pdfViewerBase.activeElements.activePageID||0,this.sourceObject.enableShapeLabel=this.commandHandler.enableShapeLabel,this.pdfViewerBase.updateFreeTextProperties(this.sourceObject),this.isFormDesign=!1;var n=document.getElementById("FormField_helper_html_element");if(n&&n.remove(),this.commandHandler.drawingObject=this.drawingObject=this.commandHandler.add(this.sourceObject||i),"Textbox"===this.drawingObject.formFieldAnnotationType||"SignatureField"===this.drawingObject.formFieldAnnotationType||"InitialField"===this.drawingObject.formFieldAnnotationType||"Checkbox"===this.drawingObject.formFieldAnnotationType||"ListBox"===this.drawingObject.formFieldAnnotationType||"RadioButton"===this.drawingObject.formFieldAnnotationType||"DropdownList"===this.drawingObject.formFieldAnnotationType||"PasswordField"===this.drawingObject.formFieldAnnotationType){this.inAction=!1,this.drawingObject.pageNumber=this.pdfViewerBase.getActivePage(!0);var r=this.commandHandler.formDesignerModule.updateFormFieldInitialSize(this.drawingObject.wrapper.children[0],this.drawingObject.formFieldAnnotationType),o=this.pdfViewerBase.pageContainer.firstElementChild.clientWidth-r.width,a=this.pdfViewerBase.pageContainer.firstElementChild.clientHeight-r.height,l=this.pdfViewerBase.pageContainer.firstElementChild.offsetLeft,h=void 0;if(this.currentPosition.y>=a&&event.target&&event.target.parentElement&&event.target.parentElement.classList.contains("foreign-object")){var d=event.path[3].getBoundingClientRect();h=event.clientX-d.left}else h=this.currentPosition.x-l;this.updateNodeDimension(this.drawingObject,this.currentPosition.x>=o&&this.currentPosition.y>=a?{x:o,y:a,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:this.currentPosition.x>=o?{x:o,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:this.currentPosition.y>=a?{x:h,y:a,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:{x:this.currentPosition.x,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}),this.drawingObject.bounds.x=this.drawingObject.bounds.x-this.drawingObject.bounds.width/2,this.drawingObject.bounds.y=this.drawingObject.bounds.y-this.drawingObject.bounds.height/2,this.commandHandler.formFieldCollection.push(this.drawingObject);var u=this.drawingObject;this.commandHandler.formFieldCollections.push({id:u.id,name:u.name,value:u.value,type:u.formFieldAnnotationType,isReadOnly:u.isReadonly,fontFamily:u.fontFamily,fontSize:u.fontSize,fontStyle:u.fontStyle,color:u.color,backgroundColor:u.backgroundColor,alignment:u.alignment,visibility:u.visibility,maxLength:u.maxLength,isRequired:u.isRequired,isPrint:u.isPrint,isSelected:u.isSelected,isChecked:u.isChecked,tooltip:u.tooltip,bounds:u.bounds,thickness:u.thickness,borderColor:u.borderColor,signatureIndicatorSettings:u.signatureIndicatorSettings,pageIndex:u.pageIndex}),this.commandHandler.formDesignerModule.drawHTMLContent(this.drawingObject.formFieldAnnotationType,this.drawingObject.wrapper.children[0],this.drawingObject,this.drawingObject.pageIndex,this.commandHandler),this.commandHandler.select([this.commandHandler.drawingObject.id],this.commandHandler.annotationSelectorSettings),this.commandHandler.annotation&&this.commandHandler.annotation.addAction(this.pdfViewerBase.getActivePage(!0),null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.endAction(),this.pdfViewerBase.tool=null,this.pdfViewerBase.action="Select",this.drawingObject=null,this.pdfViewerBase.isMouseDown=!1,this.pdfViewerBase.pdfViewer.drawingObject=null,this.isFormDesign=!0}}},e.prototype.mouseMove=function(t){if(s.prototype.mouseMove.call(this,t),this.inAction&&!1===Ei.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=$i.toBounds([this.prevPosition,this.currentPosition]);this.updateNodeDimension(this.drawingObject,i),"Radius"===this.drawingObject.shapeAnnotationType&&this.updateRadiusLinePosition(this.drawingObject.wrapper.children[1],this.drawingObject)}return!0},e.prototype.mouseUp=function(t){if(this.drawingObject&&this.dragging){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.drawingObject.id],this.commandHandler.annotationSelectorSettings);var i=this.commandHandler.selectedItems.annotations[0];!c(i)&&!c(i.wrapper)&&(this.commandHandler.nodePropertyChange(i,{bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY}}),this.commandHandler.annotation.updateCalibrateValues(this.drawingObject,!0),this.commandHandler&&!this.isFormDesign&&this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.dragging=!1,s.prototype.mouseUp.call(this,t),this.inAction=!1)}else s.prototype.mouseUp.call(this,t);this.drawingObject=null},e.prototype.endAction=function(){s.prototype.endAction.call(this)},e.prototype.updateNodeDimension=function(t,i){var n=this.commandHandler.viewerBase.getZoomFactor();t.bounds.x=i.x/n+i.width/n,t.bounds.y=i.y/n+i.height/n,t.bounds.width=i.width/n,t.bounds.height=i.height/n;var r=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(t):{},o=0,a=0;r.maxWidth||r.maxHeight?(o=r.maxHeight?r.maxHeight:2e3,t.bounds.width>(a=r.maxWidth?r.maxWidth:2e3)&&(t.bounds.width=a),t.bounds.height>o&&(t.bounds.height=o),t.bounds.height<=o&&t.bounds.width<=a&&this.commandHandler.nodePropertyChange(t,{bounds:t.bounds})):this.commandHandler.nodePropertyChange(t,{bounds:t.bounds})},e.prototype.updateRadiusLinePosition=function(t,i){var n={x:i.bounds.x+i.bounds.width/4,y:i.bounds.y},r={x:i.bounds.x+i.bounds.width/2,y:i.bounds.y+i.bounds.height/2},o=en();rn(o,i.rotateAngle,r.x,r.y);var a=We(o,n),l={x:a.x,y:a.y};t.offsetX=l.x,t.offsetY=l.y,t.width=i.bounds.width/2;var h=this.commandHandler.annotationModule.findAnnotationSettings(i),d=0;h.maxWidth&&i.bounds.width>(d=h.maxWidth?h.maxWidth:2e3)&&(i.bounds.width=d,t.width=i.bounds.width/2),this.commandHandler.renderDrawing(void 0,i.pageIndex)},e}($p),Fh=function(s){function e(t,i,n){var r=s.call(this,t,i)||this;return r.action=n,r}return Pd(e,s),e.prototype.mouseDown=function(t){if(s.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var n=void 0,r=this.drawingObject,o=this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1];o.x===(n={x:(n=r.vertexPoints[r.vertexPoints.length-1]).x,y:n.y}).x&&o.x===n.y||this.drawingObject.vertexPoints.push(n),this.commandHandler.nodePropertyChange(r,{vertexPoints:r.vertexPoints})}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var i={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPoint.x/this.pdfViewerBase.getZoomFactor(),y:this.startPoint.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:"Line",fillColor:this.commandHandler.drawingObject.fillColor,strokeColor:this.commandHandler.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,notes:this.commandHandler.drawingObject.notes,thickness:this.commandHandler.drawingObject.thickness,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,borderDashArray:this.commandHandler.drawingObject.borderDashArray,modifiedDate:this.commandHandler.drawingObject.modifiedDate,borderStyle:this.commandHandler.drawingObject.borderStyle,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel,opacity:this.commandHandler.drawingObject.opacity};this.pdfViewerBase.updateFreeTextProperties(i),this.drawingObject=this.commandHandler.add(i)}},e.prototype.mouseMove=function(t){if(s.prototype.mouseMove.call(this,t),this.inAction&&!1===Ei.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=this.drawingObject;this.drawingObject&&this.currentPosition&&(i.vertexPoints[i.vertexPoints.length-1].x=this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),i.vertexPoints[i.vertexPoints.length-1].y=this.currentPosition.y/this.pdfViewerBase.getZoomFactor(),this.commandHandler.nodePropertyChange(i,{vertexPoints:i.vertexPoints})),"Perimeter"===i.measureType&&BK(i,0,this.commandHandler.annotation.measureAnnotationModule)}return!0},e.prototype.mouseUp=function(t,i,n){var r;if(s.prototype.mouseMove.call(this,t),t.source&&null!==t.annotationSelectorSettings&&(r=t.source.annotationSelectorSettings),this.drawingObject)if((new $i(this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].x-20,this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].y-20,40,40).containsPoint({x:this.drawingObject.vertexPoints[0].x,y:this.drawingObject.vertexPoints[0].y})||i)&&this.dragging){if(this.inAction&&(this.inAction=!1,this.drawingObject)){if(n||this.drawingObject.vertexPoints.length>2&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),"Polygon"===this.action){n?this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length]=this.drawingObject.vertexPoints[0]:this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1]=this.drawingObject.vertexPoints[0],this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints});var l=st(this.drawingObject);l.shapeAnnotationType="Polygon",l.bounds.width=l.wrapper.actualSize.width,l.bounds.height=l.wrapper.actualSize.height,l.bounds.x=this.drawingObject.wrapper.bounds.x,l.bounds.y=this.drawingObject.wrapper.bounds.y,this.commandHandler.add(l),this.commandHandler.remove(this.drawingObject),this.commandHandler.select([l.id],r);var h=this.commandHandler.selectedItems.annotations[0];h&&(this.commandHandler.enableShapeAnnotation&&(c(h.measureType)||""===h.measureType)&&this.commandHandler.annotation.shapeAnnotationModule.renderShapeAnnotations(h,h.pageIndex),this.commandHandler.enableMeasureAnnotation&&("Area"===h.measureType||"Volume"===h.measureType)&&("Area"===h.measureType?(h.notes=this.commandHandler.annotation.measureAnnotationModule.calculateArea(h.vertexPoints),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(h.annotName,h.notes)):"Volume"===h.measureType&&(h.notes=this.commandHandler.annotation.measureAnnotationModule.calculateVolume(h.vertexPoints),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(h.annotName,h.notes)),h.enableShapeLabel&&(h.labelContent=h.notes,this.commandHandler.nodePropertyChange(h,{vertexPoints:h.vertexPoints,notes:h.notes})),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(h,h.pageIndex)))}else n||i&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes}),this.commandHandler.select([this.drawingObject.id],r),this.commandHandler.enableMeasureAnnotation&&"Perimeter"===this.drawingObject.measureType&&(this.commandHandler.renderDrawing(null,this.drawingObject.pageIndex),this.drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculatePerimeter(this.drawingObject),this.drawingObject.enableShapeLabel&&(this.drawingObject.labelContent=this.drawingObject.notes,this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,notes:this.drawingObject.notes})),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(this.drawingObject.annotName,this.drawingObject.notes),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(this.drawingObject,this.drawingObject.pageIndex));var d=this.commandHandler.selectedItems.annotations[0];this.commandHandler.annotation.addAction(this.pageIndex,null,d,"Addition","",d,d),this.drawingObject=null}this.endAction()}else this.inAction&&!this.dragging&&this.commandHandler.remove(this.drawingObject)},e.prototype.mouseLeave=function(t){this.mouseUp(t,!0,!0)},e.prototype.mouseWheel=function(t){s.prototype.mouseWheel.call(this,t),this.mouseMove(t)},e.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null,this.commandHandler.tool=""},e}($p),$s=function(s){function e(t,i,n,r){var o=s.call(this,t,i,!0)||this;return o.endPoint=n,o.drawingObject=r,o}return Pd(e,s),e.prototype.mouseDown=function(t){if(this.inAction=!0,this.undoElement=void 0,s.prototype.mouseDown.call(this,t),this.initialPosition=t.position,this.prevSource=this.drawingObject,this.currentPosition=t.position,this.drawingObject){if(!this.dragging){var a={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:this.drawingObject.shapeAnnotationType,sourceDecoraterShapes:this.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.drawingObject.taregetDecoraterShapes,fillColor:this.drawingObject.fillColor,strokeColor:this.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,opacity:this.drawingObject.opacity||1,borderDashArray:this.drawingObject.borderDashArray,thickness:this.drawingObject.thickness,modifiedDate:this.drawingObject.modifiedDate,author:this.drawingObject.author,subject:this.drawingObject.subject,lineHeadEnd:this.drawingObject.lineHeadEnd,lineHeadStart:this.drawingObject.lineHeadStart,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel};this.pdfViewerBase.updateFreeTextProperties(a),this.drawingObject=this.commandHandler.add(a)}}else{var r=this.commandHandler.annotation.measureAnnotationModule,o={vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes,measureType:"Distance",fillColor:this.commandHandler.drawingObject.fillColor,notes:this.commandHandler.drawingObject.notes,strokeColor:this.commandHandler.drawingObject.strokeColor,opacity:this.commandHandler.drawingObject.opacity,thickness:this.commandHandler.drawingObject.thickness,borderDashArray:this.commandHandler.drawingObject.borderDashArray,shapeAnnotationType:"Distance",pageIndex:this.pdfViewerBase.activeElements.activePageID,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,enableShapeLabel:this.commandHandler.enableShapeLabel,leaderHeight:r.leaderLength};this.pdfViewerBase.updateFreeTextProperties(o),this.drawingObject=this.commandHandler.add(o)}},e.prototype.mouseUp=function(t){if(this.dragging){if(s.prototype.mouseMove.call(this,t),this.commandHandler){var i;i=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"";var n=this.drawingObject;this.commandHandler.nodePropertyChange(n,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight}),this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([n.id],i),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i)}this.endPoint&&this.endPoint.indexOf("ConnectorSegmentPoint")>-1&&this.dragging&&(this.commandHandler.annotation.updateCalibrateValues(this.drawingObject),this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.drawingObject=null,this.dragging=!1,s.prototype.mouseUp.call(this,t)),this.drawingObject&&(this.endPoint="ConnectorSegmentPoint_1")}else this.drawingObject&&this.commandHandler.remove(this.drawingObject)},e.prototype.mouseMove=function(t){if(s.prototype.mouseMove.call(this,t),this.inAction&&!1===Ei.equals(this.currentPosition,this.prevPosition)){if(this.currentPosition=t.position,this.dragging=!0,this.currentPosition&&this.prevPosition){var r;r=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"",(this.inAction&&this.commandHandler&&this.drawingObject&&void 0!==this.endPoint&&0!=this.currentPosition.x-this.prevPosition.x||0!=this.currentPosition.y-this.prevPosition.y)&&(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.drawingObject,this.currentPosition,this.selectedSegment,t.target,null,r),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,r))}this.prevPosition=this.currentPosition}return!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){s.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}($p),EAe=function(s){function e(t,i){return s.call(this,t,i,!0)||this}return Pd(e,s),e.prototype.mouseDown=function(t){var i=st(t.source);this.undoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height},rotateAngle:i.rotateAngle},s.prototype.mouseDown.call(this,t)},e.prototype.mouseUp=function(t){var n;this.undoElement.rotateAngle!==t.source.wrapper.rotateAngle&&(this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,t.source.annotations[0].annotationSelectorSettings),n={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},rotateAngle:t.source.wrapper.rotateAngle}),this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Rotate","",this.undoElement,n),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Rotate"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null),s.prototype.mouseUp.call(this,t)},e.prototype.mouseMove=function(t){s.prototype.mouseMove.call(this,t);var i=t.source,n=t.source.annotations[0].annotationSelectorSettings;if(this.currentPosition=t.position,i.wrapper){var o=Ei.findAngle({x:i.wrapper.offsetX,y:i.wrapper.offsetY},this.currentPosition)+90;this.blocked=!this.commandHandler.rotate((o=(o+360)%360)-i.wrapper.rotateAngle,n)}return!this.blocked},e.prototype.getTooltipContent=function(t){return Math.round(t.rotateAngle%360).toString()+"\xb0"},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){s.prototype.endAction.call(this)},e}($p);function Ta(s,e,t,i){if(t&&e.activeElements.activePageID>-1){var n=qK(e,t,s),r=function DAe(s,e,t,i){var r,o,a,n=null;if(e&&e.type&&-1!==e.type.indexOf("touch")){if(r=e,i.annotation){var l=t.getElement("_pageDiv_"+i.annotation.getEventPageNumber(e));if(l){var h=l.getBoundingClientRect();o=r.changedTouches[0].clientX-h.left,a=r.changedTouches[0].clientY-h.top}}}else if(e&&e.target&&e.path&&e.target.parentElement&&e.target.parentElement.classList.contains("foreign-object")){var d=e.path[4].getBoundingClientRect();o=e.clientX-d.left,a=e.clientY-d.top}else e.target&&e.target.parentElement&&e.target.parentElement.classList.contains("foreign-object")?(d=e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),o=e.clientX-d.left,a=e.clientY-d.top):e.target&&e.target.parentElement&&e.target.parentElement.parentElement&&e.target.parentElement.parentElement.classList.contains("foreign-object")?(d=void 0,e.target.offsetParent&&e.target.offsetParent.offsetParent&&e.target.offsetParent.offsetParent.offsetParent&&e.target.offsetParent.offsetParent.offsetParent.offsetParent?(d=e.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),o=e.clientX-d.left,a=e.clientY-d.top):e.target.parentElement.offsetParent&&e.target.parentElement.offsetParent.offsetParent&&(d=e.target.parentElement.offsetParent.offsetParent.getBoundingClientRect(),o=e.clientX-d.left,a=e.clientY-d.top)):(o=isNaN(e.offsetX)?e.position?e.position.x:0:e.offsetX,a=isNaN(e.offsetY)?e.position?e.position.y:0:e.offsetY);for(var p=i.touchPadding/2,u=0,f=0;f<s.length;f++)if("Distance"===s[parseInt(f.toString(),10)].shapeAnnotationType||"Line"===s[parseInt(f.toString(),10)].shapeAnnotationType||"LineWidthArrowHead"===s[parseInt(f.toString(),10)].shapeAnnotationType||t.tool instanceof $s){var b={x:o/t.getZoomFactor(),y:a/t.getZoomFactor()},w=r2(s[parseInt(f.toString(),10)],b,p),S=bAe(s[parseInt(f.toString(),10)],b);if(w&&!S){var I=kAe(s[parseInt(f.toString(),10)],w);if(I){var x=$i.toBounds([I,I]);x.Inflate(10),x.containsPoint(b)&&(S=!0)}}w&&S&&(n=s[parseInt(f.toString(),10)])}else{var g=s[parseInt(f.toString(),10)].wrapper.bounds,m=0;if(("Stamp"===s[parseInt(f.toString(),10)].shapeAnnotationType||"Image"===s[parseInt(f.toString(),10)].shapeAnnotationType)&&(m=25),(g.x-p)*t.getZoomFactor()<o&&(g.x+g.width+p)*t.getZoomFactor()>o&&(g.y-p-m)*t.getZoomFactor()<a&&(g.y+g.height+p)*t.getZoomFactor()>a)if(t.tool instanceof ec||t.tool instanceof ay)n=s[parseInt(f.toString(),10)];else if(u){var y=o-(g.x-p)*t.getZoomFactor()+((g.x+g.width+p)*t.getZoomFactor()-o)+(a-(g.y-p-m)*t.getZoomFactor())+((g.y+g.height+p)*t.getZoomFactor()-a);u>y||u===y?(n=s[parseInt(f.toString(),10)],u=y):("Image"===s[parseInt(f.toString(),10)].shapeAnnotationType||"Stamp"===s[parseInt(f.toString(),10)].shapeAnnotationType)&&(n=s[parseInt(f.toString(),10)])}else n=s[parseInt(f.toString(),10)],u=o-(g.x-p)*t.getZoomFactor()+((g.x+g.width+p)*t.getZoomFactor()-o)+(a-(g.y-p-m)*t.getZoomFactor())+((g.y+g.height+p)*t.getZoomFactor()-a)}return n}(n,s,e,t);return i?n:r}}function qK(s,e,t){var i=s.currentPosition||{x:t.offsetX,y:t.offsetY},r=function VAe(s,e,t){for(var i=[],n=0,r=e;n<r.length;n++){var o=r[n];(r2(o,s,t)||"Stamp"===o.shapeAnnotationType&&r2(o,s,40))&&AAe(o,"zIndex",i)}return i}(i={x:i.x/s.getZoomFactor(),y:i.y/s.getZoomFactor()},e.getPageTable(s.activeElements.activePageID).objects,e.touchPadding);return r}function kAe(s,e){var i=s.sourcePoint,n=s.targetPoint;if("Distance"===s.shapeAnnotationType){var r=e,o=void 0,a=Ei.findAngle(s.sourcePoint,s.targetPoint);if(r.id.indexOf("leader")>-1){var l=s.wrapper.children[0].bounds.center;r.id.indexOf("leader1")>-1?(o={x:s.sourcePoint.x,y:s.sourcePoint.y-s.leaderHeight},l=i):(o={x:s.targetPoint.x,y:s.targetPoint.y-s.leaderHeight},l=n);var h=en();return rn(h,a,l.x,l.y),We(h,{x:o.x,y:o.y})}}}function r2(s,e,t){return function LAe(s,e,t){if(s&&s.children)for(var i=s.children.length-1;i>=0;i--){var n=s.children[parseInt(i.toString(),10)],r=t;if(!c(n.children)&&n.children.length>0)for(var o=n.children.length-1;o>=0;o--){var a=n.children[o];if(a&&a.bounds.containsPoint(e,r)){if(a instanceof Yu&&(l=this.findTargetElement(a,e)))return l;if(a.bounds.containsPoint(e,r))return a}}else if(n&&n.bounds.containsPoint(e,r)){var l;if(n instanceof Yu&&(l=this.findTargetElement(n,e)))return l;if(n.bounds.containsPoint(e,r))return n}}if(s&&s.bounds.containsPoint(e,t)&&"none"!==s.style.fill){var h=s,u=en();rn(u,h.parentTransform,h.offsetX,h.offsetY);var m={x:h.offsetX-h.pivot.x*h.actualSize.width+(.5===h.pivot.x?2*h.pivot.x:h.pivot.x)*h.actualSize.width/2,y:h.offsetY-h.pivot.y*h.actualSize.height-30};if(Il(e,m=We(u,m),10))return s}return null}(s.wrapper,e,t)}function AAe(s,e,t){if(0===t.length)t.push(s);else if(1===t.length)t[0][e]>s[e]?t.splice(0,0,s):t.push(s);else if(t.length>1){for(var i=0,n=t.length-1,r=Math.floor((i+n)/2);r!==i;)t[r][e]<s[e]?(i=r,r=Math.floor((i+n)/2)):t[r][e]>s[e]&&(n=r,r=Math.floor((i+n)/2));t[n][e]<s[e]?t.push(s):t[i][e]>s[e]?t.splice(i,0,s):t[i][e]<s[e]&&t[n][e]>s[e]&&t.splice(n,0,s)}}var PAe=function(){function s(){this.activePage=void 0,this.activePageID=void 0}return Object.defineProperty(s.prototype,"activePageID",{get:function(){return this.activePage},set:function(e){this.activePage=e},enumerable:!0,configurable:!0}),s}();function WK(s,e,t,i,n){var r=o0("div",{id:n.element.id+i+"_diagramAdornerLayer",style:"width:"+s.width+"px;height:"+s.height+"px;"+e});if(!Gu(r.id)){var o=n.viewerBase.getElement("_pageDiv_"+i),a=o.getBoundingClientRect(),l=function NAe(s,e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");return $d(i,{id:s,width:e,height:t}),i}(n.element.id+i+"_diagramAdorner_svg",a.width,a.height);l.setAttribute("class","e-adorner-layer"+i),l.setAttribute("style","pointer-events:none;"),n.adornerSvgLayer=vL("g",{id:n.element.id+i+"_diagramAdorner"}),n.adornerSvgLayer.setAttribute("style"," pointer-events: all; "),l.appendChild(n.adornerSvgLayer),r.appendChild(l),r.style.width=a.width+"px",r.style.height=a.height+"px",o?o.insertBefore(r,o.childNodes[0]):t.parentElement.appendChild(r);var h=vL("g",{id:n.element.id+i+"_SelectorElement"});n.adornerSvgLayer.appendChild(h),$d(l,{style:"pointer-events:none;"})}n.viewerBase.applyElementStyles(r,i)}var Io=(()=>(function(s){s[s.None=0]="None",s[s.Bold=1]="Bold",s[s.Italic=2]="Italic",s[s.Underline=4]="Underline",s[s.Strikethrough=8]="Strikethrough"}(Io||(Io={})),Io))(),xo=(()=>(function(s){s[s.Copy=0]="Copy",s[s.Highlight=1]="Highlight",s[s.Cut=2]="Cut",s[s.Underline=4]="Underline",s[s.Paste=8]="Paste",s[s.Delete=16]="Delete",s[s.ScaleRatio=32]="ScaleRatio",s[s.Strikethrough=64]="Strikethrough",s[s.Properties=128]="Properties",s[s.Comment=256]="Comment"}(xo||(xo={})),xo))(),Gt=(()=>(function(s){s[s.Corners=1]="Corners",s[s.Edges=2]="Edges"}(Gt||(Gt={})),Gt))(),Bi=(()=>(function(s){s[s.Draw=1]="Draw",s[s.Text=2]="Text",s[s.Upload=4]="Upload"}(Bi||(Bi={})),Bi))(),xS=(()=>(function(s){s.auto="auto",s.crossHair="crosshair",s.e_resize="e-resize",s.ew_resize="ew-resize",s.grab="grab",s.grabbing="grabbing",s.move="move",s.n_resize="n-resize",s.ne_resize="ne-resize",s.ns_resize="ns-resize",s.nw_resize="nw-resize",s.pointer="pointer",s.s_resize="s-resize",s.se_resize="se-resize",s.sw_resize="sw-resize",s.text="text",s.w_resize="w-resize"}(xS||(xS={})),xS))(),Wl=(()=>(function(s){s.Revised="Revised",s.Reviewed="Reviewed",s.Received="Received",s.Approved="Approved",s.Confidential="Confidential",s.NotApproved="NotApproved"}(Wl||(Wl={})),Wl))(),Go=(()=>(function(s){s.Witness="Witness",s.InitialHere="InitialHere",s.SignHere="SignHere",s.Accepted="Accepted",s.Rejected="Rejected"}(Go||(Go={})),Go))(),ls=(()=>(function(s){s.Approved="Approved",s.NotApproved="NotApproved",s.Draft="Draft",s.Final="Final",s.Completed="Completed",s.Confidential="Confidential",s.ForPublicRelease="ForPublicRelease",s.NotForPublicRelease="NotForPublicRelease",s.ForComment="ForComment",s.Void="Void",s.PreliminaryResults="PreliminaryResults",s.InformationOnly="InformationOnly"}(ls||(ls={})),ls))(),tc=(()=>(function(s){s.Select="Select",s.Move="Move",s.Resize="Resize",s.Delete="Delete",s.None="None",s.PropertyChange="PropertyChange"}(tc||(tc={})),tc))(),Yo=(()=>(function(s){s.Json="Json",s.Xfdf="Xfdf"}(Yo||(Yo={})),Yo))(),TS=(()=>(function(s){s.Xml="Xml",s.Fdf="Fdf",s.Xfdf="Xfdf",s.Json="Json"}(TS||(TS={})),TS))(),FAe=function(){function s(e,t){this.inputBoxCount=0,this.isFreeTextValueChange=!1,this.isAddAnnotationProgramatically=!1,this.isInuptBoxInFocus=!1,this.freeTextPageNumbers=[],this.selectedText="",this.isTextSelected=!1,this.selectionStart=0,this.selectionEnd=0,this.isBold=!1,this.isItalic=!1,this.isUnderline=!1,this.isStrikethrough=!1,this.isReadonly=!1,this.isMaximumWidthReached=!1,this.freeTextPaddingLeft=4,this.freeTextPaddingTop=5,this.defaultFontSize=16,this.previousText="Type Here",this.currentPosition=[],this.pdfViewer=e,this.pdfViewerBase=t,this.updateTextProperties(),this.inputBoxElement=document.createElement("textarea"),this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.Width=this.defautWidth,this.inputBoxElement.style.Height=this.defaultHeight,this.inputBoxElement.style.zIndex="5",this.inputBoxElement.style.fontSize=this.fontSize+"px",this.inputBoxElement.className="free-text-input",this.inputBoxElement.style.resize="none",this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.background=this.fillColor,this.inputBoxElement.style.borderStyle=this.borderStyle,this.inputBoxElement.style.borderWidth=this.borderWidth+"px",this.inputBoxElement.style.padding=this.padding,this.inputBoxElement.style.paddingLeft=this.freeTextPaddingLeft+"px",this.inputBoxElement.style.paddingTop=this.freeTextPaddingTop*(parseFloat(this.inputBoxElement.style.fontSize)/this.defaultFontSize)+"px",this.inputBoxElement.style.borderRadius="2px",this.inputBoxElement.style.verticalAlign="middle",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.style.color=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.inputBoxElement.style.overflow="hidden",this.inputBoxElement.style.wordBreak=this.wordBreak,this.inputBoxElement.readOnly=this.isReadonly,this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.inputBoxElement.addEventListener("keydown",this.onKeyDownInputBox.bind(this)),this.inputBoxElement.addEventListener("mouseup",this.onMouseUpInputBox.bind(this)),this.freeTextPageNumbers=[]}return s.prototype.updateTextProperties=function(){if(this.defautWidth=this.pdfViewer.freeTextSettings.width?this.pdfViewer.freeTextSettings.width:151,this.defaultHeight=this.pdfViewer.freeTextSettings.height?this.pdfViewer.freeTextSettings.height:24.6,this.borderColor=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:"#ffffff00",this.fillColor=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:"#fff",this.borderStyle=this.pdfViewer.freeTextSettings.borderStyle?this.pdfViewer.freeTextSettings.borderStyle:"solid",this.borderWidth=this.pdfViewer.freeTextSettings.borderWidth?this.pdfViewer.freeTextSettings.borderWidth:1,this.fontSize=this.pdfViewer.freeTextSettings.fontSize?this.pdfViewer.freeTextSettings.fontSize:16,this.opacity=this.pdfViewer.freeTextSettings.opacity?this.pdfViewer.freeTextSettings.opacity:1,this.fontColor=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.author="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c(this.pdfViewer.annotationModule)||0===this.getRgbCode(this.borderColor).a&&(this.borderWidth=0),this.pdfViewer.freeTextSettings.fontFamily){var e=this.pdfViewer.freeTextSettings.fontFamily;this.fontFamily="Helvetica"===e||"Times New Roman"===e||"Courier"===e||"Symbol"===e||"ZapfDingbats"===e?e:"Helvetica"}else this.fontFamily="Helvetica";this.textAlign=this.pdfViewer.freeTextSettings.textAlignment?this.pdfViewer.freeTextSettings.textAlignment:"Left",this.defaultText=this.pdfViewer.freeTextSettings.defaultText?this.pdfViewer.freeTextSettings.defaultText:"Type here",this.isReadonly=!1,this.pdfViewer.freeTextSettings.enableAutoFit?(this.wordBreak="break-all",this.padding="2px"):(this.padding="0px",this.wordBreak="break-word"),(this.pdfViewer.freeTextSettings.isLock||this.pdfViewer.annotationSettings.isLock||this.pdfViewer.freeTextSettings.isReadonly)&&(this.isReadonly=!0),1===this.pdfViewer.freeTextSettings.fontStyle?this.isBold=!0:2===this.pdfViewer.freeTextSettings.fontStyle?this.isItalic=!0:4===this.pdfViewer.freeTextSettings.fontStyle?this.isUnderline=!0:8===this.pdfViewer.freeTextSettings.fontStyle?this.isStrikethrough=!0:3===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0):5===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isUnderline=!0):9===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isStrikethrough=!0):7===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0,this.isUnderline=!0):11===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0,this.isStrikethrough=!0):14===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isUnderline=!0,this.isStrikethrough=!0):6===this.pdfViewer.freeTextSettings.fontStyle&&(this.isUnderline=!0,this.isItalic=!0)},s.prototype.renderFreeTextAnnotations=function(e,t,i,n){var r=!1;if(!i)for(var o=0;o<this.freeTextPageNumbers.length;o++)if(this.freeTextPageNumbers[o]===t){r=!0;break}if(e&&(!r||n)&&e.length>=1){this.freeTextPageNumbers.push(t);for(var a=0;a<e.length;a++){var l=e[a];if(l.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(l,t,l.AnnotType),l.AnnotType){var h=null;if(l.VertexPoints){h=[];for(var d=0;d<l.VertexPoints.length;d++)h.push({x:l.VertexPoints[d].X,y:l.VertexPoints[d].Y})}l.AnnotationSettings=l.AnnotationSettings?l.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var u=void 0,f=.5,g=c(l.Bounds.X)?l.Bounds.x:l.Bounds.X-f,m=c(l.Bounds.Y)?l.Bounds.y:l.Bounds.Y-f,y=l.Bounds.Width?l.Bounds.Width:l.Bounds.width,b=l.Bounds.Height?l.Bounds.Height:l.Bounds.height,w=!!l.isAddAnnotationProgramatically&&l.isAddAnnotationProgramatically,S=this.getRotationValue(t,w),x=l.PageRotation;l.Rotate=1===Math.sign(l.Rotate)?-l.Rotate+S:l.Rotate+S;var T=Math.abs(l.Rotate);if(i&&S!==x&&this.pdfViewerBase.isJsonImported){var L=this.pdfViewerBase.pageSize[t],N=l.Bounds.X,O=l.Bounds.Y,_=y,B=b;if(x>0){var q=x/90;1===q?(b=y,y=l.Bounds.Height,g=l.Bounds.Y,m=270!==S?L.height-l.Bounds.X-l.Bounds.Width:L.width-l.Bounds.X-l.Bounds.Width):2===q?270!==S&&90!==S?(g=L.width-l.Bounds.X-l.Bounds.Width,m=L.height-l.Bounds.Y-l.Bounds.Height):(g=L.height-l.Bounds.X-l.Bounds.Width,m=L.width-l.Bounds.Y-l.Bounds.Height):3===q&&(b=y,y=l.Bounds.Height,g=90!==S?L.width-l.Bounds.Y-y:L.height-l.Bounds.Y-y,m=l.Bounds.X),N=g,O=m,_=y,B=b}1==(T=S/90%4)?(b=y,y=B,g=L.width-O-B-f,m=N-f,T=90):2===T?(g=L.width-N-_-f,m=L.height-O-B-f,T=180):3===T?(b=y,y=B,g=O-f,m=L.height-N-b-f,T=270):0===T&&(g=N-f,m=O-f)}if(90===T||270===T){var j=y;g=g-(y=b)/2+(b=j)/2,m+=y/2-b/2}l.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(l),u={author:l.Author,modifiedDate:l.ModifiedDate,subject:l.Subject,id:"freetext"+this.inputBoxCount,rotateAngle:l.Rotate,dynamicText:l.MarkupText,strokeColor:l.StrokeColor,thickness:l.Thickness,fillColor:l.FillColor,bounds:{x:g,y:m,left:g,top:m,width:y,height:b,right:l.Bounds.Right,bottom:l.Bounds.Bottom},annotName:l.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:l.Opacity,fontColor:l.FontColor,fontSize:l.FontSize,pageRotation:S,fontFamily:l.FontFamily,notes:l.MarkupText,textAlign:l.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(l.Comments,l,l.Author),review:{state:l.State,stateModel:l.StateModel,modifiedDate:l.ModifiedDate,author:l.Author},font:{isBold:l.Font.Bold,isItalic:l.Font.Italic,isStrikeout:l.Font.Strikeout,isUnderline:l.Font.Underline},annotationSelectorSettings:this.getSettings(l),annotationSettings:l.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(l),annotationAddMode:l.annotationAddMode,allowedInteractions:l.allowedInteractions,isPrint:l.IsPrint,isCommentLock:l.IsCommentLock,isReadonly:l.IsReadonly,isAddAnnotationProgrammatically:w},i&&(u.id=l.AnnotName,u.previousFontSize=l.FontSize?l.FontSize:this.fontSize);var G=this.pdfViewer.add(u);this.pdfViewer.annotationModule.storeAnnotations(t,u,"_annotations_freetext"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(u.pageIndex,u.annotName,"FreeText",u.bounds,{opacity:u.opacity,borderColor:u.strokeColor,borderWidth:u.thickness,author:l.author,subject:l.subject,modifiedDate:l.modifiedDate,fillColor:u.fillColor,fontSize:u.fontSize,width:u.bounds.width,height:u.bounds.height,fontColor:u.fontColor,fontFamily:u.fontFamily,defaultText:u.dynamicText,fontStyle:u.font,textAlignment:u.textAlign}),this.inputBoxCount+=1,this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,this.pdfViewer.nodePropertyChange(G,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1}}}},s.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.freeTextSettings.annotationSelectorSettings&&(t=this.pdfViewer.freeTextSettings.annotationSelectorSettings),t},s.prototype.setAnnotationType=function(e){if("FreeText"===(this.pdfViewerBase.disableTextSelectionMode(),this.pdfViewer.annotationModule.isFormFieldShape=!1,e)){this.currentAnnotationMode="FreeText",this.updateTextProperties();var t=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"FreeText",strokeColor:this.borderColor,fillColor:this.fillColor,opacity:this.opacity,notes:"",isCommentLock:!1,thickness:this.borderWidth,borderDashArray:"0",modifiedDate:t,author:this.pdfViewer.freeTextSettings.author,subject:"Text Box",font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},textAlign:this.textAlign},this.pdfViewer.tool="Select"}},s.prototype.modifyInCollection=function(e,t,i,n){this.pdfViewer.annotationModule.isFormFieldShape=!c(i.formFieldAnnotationType)&&""!==i.formFieldAnnotationType,n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var r=null,o=this.getAnnotations(t,null);if(null!=o&&i){for(var a=0;a<o.length;a++)if(i.id===o[a].id){if("bounds"===e)o[a].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom};else if("fill"===e)o[a].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)o[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)o[a].note=i.notes;else{if("delete"===e){r=o.splice(a,1)[0];break}"dynamicText"===e?(o[a].dynamicText!==i.dynamicText&&this.pdfViewer.fireCommentEdit(o[a].annotName,i.dynamicText,o[a]),o[a].dynamicText=i.dynamicText):"fontColor"===e?o[a].fontColor=i.fontColor:"fontSize"===e?o[a].fontSize=i.fontSize:"fontFamily"===e?o[a].fontFamily=i.fontFamily:"textPropertiesChange"===e?o[a].font={isBold:i.font.isBold,isItalic:i.font.isItalic,isStrikeout:i.font.isStrikeout,isUnderline:i.font.isUnderline}:"textAlign"===e&&(o[a].textAlign=i.textAlign)}o[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(o[a],t)}this.manageAnnotations(o,t)}return r},s.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},s.prototype.saveFreeTextAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),r=0;r<n.length;r++){var o=[],a=n[r];if(a){for(var l=0;a.annotations.length>l;l++)this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[l]),a.annotations[l].bounds=this.getBoundsBasedOnRotation(a.annotations[l].bounds,a.annotations[l].rotateAngle,a.pageIndex,a.annotations[l]),a.annotations[l].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[l].bounds,a.pageIndex)),a.annotations[l].strokeColor=JSON.stringify(this.getRgbCode(a.annotations[l].strokeColor)),a.annotations[l].fillColor=JSON.stringify(this.getRgbCode(a.annotations[l].fillColor)),a.annotations[l].fontColor=JSON.stringify(this.getRgbCode(a.annotations[l].fontColor)),a.annotations[l].vertexPoints=JSON.stringify(a.annotations[l].vertexPoints),null!==a.annotations[l].rectangleDifference&&(a.annotations[l].rectangleDifference=JSON.stringify(a.annotations[l].rectangleDifference)),a.annotations[l].padding=this.getPaddingValues(this.fontSize);o=a.annotations}t[a.pageIndex]=o}return JSON.stringify(t)},s.prototype.getRotationValue=function(e,t){var i=this.pdfViewerBase.pageSize[e];return!c(t)&&t||0===i.rotation?0:1===i.rotation?90:2===i.rotation?180:3===i.rotation?270:0},s.prototype.getBoundsBasedOnRotation=function(e,t,i,n,r){var o=this.getRotationValue(i,r),a=.5;if(n.rotateAngle=t-o,n.pageRotation=o,90===t||-90===t||270===t||-270===t){var l=e.left+e.width/2-e.height/2,h=e.top-(e.width/2-e.height/2);return{x:l+a,y:h+a,left:l+a,top:h+a,width:e.height,height:e.width}}return{x:e.left+a,y:e.top+a,left:e.left+a,top:e.top+a,width:e.width,height:e.height}},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_freetext");var r=this.pdfViewer.annotationModule.getPageCollection(n,t);n[r]&&(n[r].annotations=e);var o=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]=o:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_freetext",o)}},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),n){var r=JSON.parse(n),o=this.pdfViewer.annotationModule.getPageCollection(r,e);i=r[o]?r[o].annotations:t}else i=t;return i},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return c(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseFloat(t[0].split("(")[1]),g:parseFloat(t[1]),b:parseFloat(t[2]),a:parseFloat(t[3])}},s.prototype.onFocusOutInputBox=function(){var e=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),this.pdfViewerBase.isFreeTextContextMenu)this.inputBoxElement.focus(),this.isTextSelected||window.getSelection().removeAllRanges();else{this.pdfViewer.fireBeforeAddFreeTextAnnotation(this.inputBoxElement.value);var t=this.inputBoxElement.id&&this.inputBoxElement.id.split("_freeText_")[1]&&this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]?parseFloat(this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]):this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t),n=parseFloat(this.inputBoxElement.style.width),r=parseFloat(this.inputBoxElement.style.paddingLeft);if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&!this.isNewFreeTextAnnot){var o=parseFloat(this.inputBoxElement.style.fontSize);this.inputBoxElement.style.width=n+r-o+"px"}this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&this.isNewFreeTextAnnot&&(n=parseFloat(this.inputBoxElement.style.width),this.inputBoxElement.style.width=n-8+"px");var l=parseFloat(this.inputBoxElement.style.height),h=parseFloat(this.inputBoxElement.style.width),d=parseFloat(this.inputBoxElement.style.left);this.pdfViewerBase.isMixedSizeDocument&&(d-=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t).offsetLeft);var u=parseFloat(this.inputBoxElement.style.top),f=this.pdfViewerBase.getZoomFactor();this.pdfViewer.isValidFreeText&&(this.inputBoxElement.value="Type Here",this.pdfViewer.isValidFreeText=!1);var g=this.inputBoxElement.value,m=!1;if(!0===this.isNewFreeTextAnnot){var y=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),b=this.pdfViewer.annotation.createGUID();this.isNewFreeTextAnnot=!1,m=!0;var w=void 0,S=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("freeText",t+1);S&&(document.getElementById(S).id=b);var I=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,x=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);this.author=this.author?this.author:this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:"Guest";var T=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;w={author:this.author,modifiedDate:y,subject:"Text Box",id:"free_text"+this.inputBoxCount,rotateAngle:0,dynamicText:g,strokeColor:this.borderColor,thickness:this.borderWidth,fillColor:this.fillColor,bounds:{left:d/f,top:u/f,x:d/f,y:u/f,width:h/f,height:l/f},annotName:b,shapeAnnotationType:"FreeText",pageIndex:t,fontColor:this.fontColor,fontSize:this.fontSize,fontFamily:this.fontFamily,opacity:this.opacity,comments:[],textAlign:this.textAlign,font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},review:{state:"Unmarked",stateModel:"None",modifiedDate:y,author:this.author},annotationSelectorSettings:I,annotationSettings:x,customData:this.pdfViewer.annotationModule.getData("FreeText"),isPrint:this.pdfViewer.freeTextSettings.isPrint,allowedInteractions:T,isReadonly:this.isReadonly},this.pdfViewer.enableRtl&&(w.textAlign="Right");var L=this.pdfViewer.add(w),N={left:w.bounds.x,top:w.bounds.y,width:w.bounds.width,height:w.bounds.height},O={opacity:w.opacity,borderColor:w.strokeColor,borderWidth:w.thickness,author:L.author,subject:L.subject,modifiedDate:L.modifiedDate,fillColor:w.fillColor,fontSize:w.fontSize,width:w.bounds.width,height:w.bounds.height,fontColor:w.fontColor,fontFamily:w.fontFamily,defaultText:w.dynamicText,fontStyle:w.font,textAlignment:w.textAlign};this.pdfViewer.annotation.storeAnnotations(t,w,"_annotations_freetext"),this.pdfViewer.fireAnnotationAdd(w.pageIndex,w.annotName,"FreeText",N,O),this.pdfViewer.fireCommentAdd(w.annotName,w.dynamicText,w),this.pdfViewer.annotation.addAction(t,null,w,"Addition","",w,w),this.pdfViewer.renderSelector(w.pageIndex),this.pdfViewer.clearSelection(w.pageIndex),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.selectedAnnotation=L}if(this.isInuptBoxInFocus=!1,this.selectedAnnotation&&this.pdfViewer.selectedItems.annotations){var _=(l/=f)-this.selectedAnnotation.bounds.height,B=void 0;_>0&&(B=(B=this.selectedAnnotation.wrapper.offsetY+_/2)>0?B:void 0);var j,q=(h/=f)-this.selectedAnnotation.bounds.width,W=void 0;q>0?W=(W=this.selectedAnnotation.wrapper.offsetX+q/2)>0?W:void 0:(q=Math.abs(q),W=this.selectedAnnotation.wrapper.offsetX-q/2),this.selectedAnnotation.bounds.width=h,this.selectedAnnotation.bounds.height=l,j=parseFloat(this.inputBoxElement.style.fontSize)/f/(this.defaultFontSize/2),this.selectedAnnotation.wrapper.children[1].margin.left=this.freeTextPaddingLeft,this.selectedAnnotation.wrapper.children[1].margin.top=parseFloat(this.inputBoxElement.style.paddingTop)/f+j,this.pdfViewer.annotation.modifyDynamicTextValue(g,this.selectedAnnotation.annotName),this.selectedAnnotation.dynamicText=g,this.modifyInCollection("dynamicText",t,this.selectedAnnotation,m),this.modifyInCollection("bounds",t,this.selectedAnnotation,m),this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:B,x:W}});var G=document.getElementById(this.selectedAnnotation.annotName);G&&G.childNodes&&(G.childNodes[0].ej2_instances?G.childNodes[0].ej2_instances[0].value=g:G.childNodes[0].childNodes&&G.childNodes[0].childNodes[1].ej2_instances&&(G.childNodes[0].childNodes[1].ej2_instances[0].value=g)),this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}this.inputBoxElement.parentElement&&(i&&i.id===this.inputBoxElement.parentElement.id?i.removeChild(this.inputBoxElement):this.inputBoxElement.parentElement.removeChild(this.inputBoxElement));var Y=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t);this.pdfViewer.renderDrawing(Y,t),this.inputBoxCount+=1}this.pdfViewer.enableServerDataBinding(e,!0)},s.prototype.onKeyDownInputBox=function(e){var t=this;(9===e.which||c(this.pdfViewer.selectedItems.annotations[0])&&!this.isNewFreeTextAnnot)&&e.preventDefault(),this.selectedAnnotation=this.pdfViewer.selectedItems.annotations&&this.isNewFreeTextAnnot?this.pdfViewer.selectedItems.annotations[0]:this.selectedAnnotation,setTimeout(function(){t.defaultHeight<t.inputBoxElement.scrollHeight&&parseInt(t.inputBoxElement.style.height)<t.inputBoxElement.scrollHeight?t.updateFreeTextAnnotationSize(!0):t.updateFreeTextAnnotationSize(!1)},0)},s.prototype.updateFreeTextAnnotationSize=function(e){var t=this,i=t.pdfViewer.freeTextSettings.enableAutoFit;if(i?this.autoFitFreeText():this.isMaximumWidthReached=!0,this.isMaximumWidthReached){var n=t.inputBoxElement.getBoundingClientRect().height;!e&&!t.inputBoxElement.readOnly&&(t.inputBoxElement.style.height="auto");var o=t.inputBoxElement.getBoundingClientRect().height-n,a=parseFloat(t.inputBoxElement.style.fontSize);t.inputBoxElement.style.height=t.inputBoxElement.readOnly?t.inputBoxElement.style.height:t.inputBoxElement.scrollHeight+a/2+"px",t.inputBoxElement.style.height=o<0&&!t.inputBoxElement.readOnly?n+"px":t.inputBoxElement.style.height}var l=t.pdfViewerBase.getZoomFactor(),h=parseFloat(this.inputBoxElement.style.height),d=parseFloat(this.inputBoxElement.style.width);if(h/=l,d/=l,this.selectedAnnotation){var p=h-t.selectedAnnotation.bounds.height,u=0;if(p>0?u=t.selectedAnnotation.wrapper.offsetY+p/2:(p=Math.abs(p),u=t.selectedAnnotation.wrapper.offsetY-p/2),i){var f=d-t.selectedAnnotation.bounds.width,g=0;f>0?g=t.selectedAnnotation.wrapper.offsetX+f/2:(f=Math.abs(f),g=t.selectedAnnotation.wrapper.offsetX-f/2)}t.selectedAnnotation.bounds.width=d,t.selectedAnnotation.bounds.height=h,t.pdfViewer.nodePropertyChange(t.selectedAnnotation,i?{bounds:{width:t.selectedAnnotation.bounds.width,height:t.selectedAnnotation.bounds.height,y:u,x:g}}:{bounds:{width:t.selectedAnnotation.bounds.width,height:t.selectedAnnotation.bounds.height,y:u}}),t.pdfViewer.renderSelector(t.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}},s.prototype.autoFitFreeText=function(e,t){var i=this.pdfViewerBase.currentPageNumber-1,o=(this.pdfViewerBase.getElement("_pageDiv_"+i),this.pdfViewerBase.getElement("_annotationCanvas_"+i).getContext("2d")),a=this.inputBoxElement.style.fontSize;o.font=this.pdfViewer.freeTextSettings.fontStyle===Io.Bold||"bold"===this.inputBoxElement.style.fontWeight?"bold "+a+" "+this.inputBoxElement.style.fontFamily:a+" "+this.inputBoxElement.style.fontFamily;var l="",h=[],d=this.inputBoxElement.value;if(d.indexOf("\n")>-1){h=d.split("\n");for(var p=0;p<h.length;p++){var u=o.measureText(h[p]),f=o.measureText(l);u.width>f.width&&(l=h[p])}this.isMaximumWidthReached=!0}else l=d,this.isMaximumWidthReached=!1;var m,g=o.measureText(l),b=(a=parseFloat(this.inputBoxElement.style.fontSize))+a/2;this.isNewFreeTextAnnot?(m=Math.ceil(g.width+18),this.inputBoxElement.style.height=b+"px",this.inputBoxElement.style.top=t-b/2+"px"):m=Math.ceil(g.width)+a+Math.ceil(4),e||(this.inputBoxElement.style.height=b+"px"),this.inputBoxElement.style.width=m+"px";var w=this.pdfViewerBase.getPageWidth(i)-parseFloat(this.inputBoxElement.style.left);if(parseFloat(this.inputBoxElement.style.width)>w)if(this.isMaximumWidthReached=!0,this.isNewAddedAnnot&&e){this.inputBoxElement.style.width=(m-=8)+"px";var S=e+m*this.pdfViewerBase.getZoomFactor(),I=parseFloat(this.inputBoxElement.style.left);S>=this.pdfViewerBase.getPageWidth(i)&&(I=this.pdfViewerBase.getPageWidth(i)-m),this.inputBoxElement.style.left=I+"px"}else this.inputBoxElement.style.width=w+"px"},s.prototype.onMouseUpInputBox=function(e){var t=e.target;this.selectionStart=0,this.selectionEnd=0,3===e.which&&t&&(this.selectionStart=t.selectionStart,this.selectionEnd=t.selectionEnd),this.isTextSelected=3===e.which&&null!=window.getSelection()&&""!==window.getSelection().toString()},s.prototype.addInuptElemet=function(e,t,i){void 0===t&&(t=null),this.currentPosition=[],c(i)&&(i=this.pdfViewerBase.currentPageNumber-1),t&&(i=t.pageIndex),X()&&null===t&&0===this.pdfViewer.selectedItems.annotations.length&&this.updateTextProperties(),this.inputBoxElement.id=this.pdfViewer.element.id+"_freeText_"+i+"_"+this.inputBoxCount;var l,n=this.pdfViewerBase.getElement("_pageDiv_"+i),r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i),o=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t&&t.dynamicText?t.dynamicText:this.defaultText,this.inputBoxElement.style.boxSizing="border-box",this.inputBoxElement.style.left=e.x+"px",this.inputBoxElement.style.top=e.y-this.defaultHeight*o/2+"px",this.inputBoxElement.style.wordBreak=this.pdfViewer.freeTextSettings.enableAutoFit?"break-all":"break-word",t?this.applyFreetextStyles(o,t.isReadonly):this.applyFreetextStyles(o),this.inputBoxElement.style.fontWeight=this.isBold?"bold":"normal",this.inputBoxElement.style.fontStyle=this.isItalic?"italic":"normal",this.inputBoxElement.style.textDecoration="none",this.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),this.isStrikethrough&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl",this.inputBoxElement.style.left=e.x-this.defautWidth*o/2):this.inputBoxElement.style.textAlign=this.textAlign.toLowerCase(),this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.color=this.fontColor,this.inputBoxElement.style.background=this.fillColor,t&&t.wrapper&&t.wrapper.children[0]&&(this.inputBoxElement.style.opacity=t.wrapper.children[0].style.opacity),!0===this.isNewFreeTextAnnot&&this.pdfViewer.clearSelection(i),t&&t.wrapper&&t.wrapper.bounds){var a=t.wrapper.bounds;a.left&&(this.inputBoxElement.style.left=a.left*o+"px"),a.top&&(this.inputBoxElement.style.top=a.top*o+"px"),this.inputBoxElement.style.height=a.height?a.height*o+"px":this.defaultHeight*o+"px",this.inputBoxElement.style.width=a.width?a.width*o+"px":this.defautWidth*o+"px",this.selectedAnnotation=t,this.previousText=this.selectedAnnotation.dynamicText,this.selectedAnnotation.dynamicText="",this.inputBoxElement.style.borderColor=this.selectedAnnotation.strokeColor,this.inputBoxElement.style.color=this.selectedAnnotation.fontColor,this.inputBoxElement.style.background=this.selectedAnnotation.fillColor,!0===this.selectedAnnotation.font.isBold&&(this.inputBoxElement.style.fontWeight="bold"),!0===this.selectedAnnotation.font.isItalic&&(this.inputBoxElement.style.fontStyle="italic"),!0===this.selectedAnnotation.font.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),!0===this.selectedAnnotation.font.isStrikeout&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl"):this.selectedAnnotation.textAlign&&(this.inputBoxElement.style.textAlign=this.selectedAnnotation.textAlign),this.inputBoxElement.style.fontSize=this.selectedAnnotation.fontSize*o+"px",this.inputBoxElement.style.fontFamily=this.selectedAnnotation.fontFamily,this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{})}this.pdfViewerBase.isMixedSizeDocument&&(this.inputBoxElement.style.left=parseFloat(this.inputBoxElement.style.left)+r.offsetLeft+"px"),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.freeTextSettings.enableAutoFit&&this.autoFitFreeText(e.x,e.y),this.inputBoxElement.style.paddingLeft=this.freeTextPaddingLeft*o+"px",this.inputBoxElement.style.paddingTop=this.freeTextPaddingTop*(parseFloat(this.inputBoxElement.style.fontSize)/o/this.defaultFontSize)/o+"px",l=parseFloat(this.inputBoxElement.style.fontSize)/o/(this.defaultFontSize/2),this.inputBoxElement.style.paddingTop=parseFloat(this.inputBoxElement.style.paddingTop)-l+"px",n.appendChild(this.inputBoxElement),!this.pdfViewer.freeTextSettings.enableAutoFit&&this.defaultHeight*o<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height)<this.inputBoxElement.scrollHeight&&(this.inputBoxElement.style.height=this.inputBoxElement.scrollHeight+"px",this.inputBoxElement.style.top=e.y-parseFloat(this.inputBoxElement.style.height)/2+"px"),this.isInuptBoxInFocus=!0,this.inputBoxElement.focus(),(!0===this.isNewFreeTextAnnot||this.inputBoxElement.value===this.defaultText)&&(this.inputBoxElement.select(),this.pdfViewerBase.isFreeTextSelected=!0),this.currentPosition.push(parseInt(this.inputBoxElement.style.left)/o,parseInt(this.inputBoxElement.style.top)/o,parseInt(this.inputBoxElement.style.width)/o,parseInt(this.inputBoxElement.style.height)/o)},s.prototype.applyFreetextStyles=function(e,t){this.inputBoxElement.style.height=this.defaultHeight*e+"px",this.inputBoxElement.style.width=this.defautWidth*e+"px",this.inputBoxElement.style.borderWidth=this.borderWidth*e+"px",this.inputBoxElement.style.fontSize=this.fontSize*e+"px",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.readOnly=c(t)?this.isReadonly:t},s.prototype.copySelectedText=function(){if(null!==window.getSelection()){this.selectedText=window.getSelection().toString();var e=document.createElement("textarea");e.contentEditable="true",e.textContent=this.selectedText,e.style.position="fixed",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(t){console.warn("Copy to clipboard failed.",t)}finally{e&&document.body.removeChild(e)}}},s.prototype.pasteSelectedText=function(e){if(""!==this.selectedText&&e){var t=e.value;e.value=t.slice(0,this.selectionStart)+this.selectedText+t.slice(this.selectionEnd,t.length)}var i=event;this.onKeyDownInputBox(i)},s.prototype.cutSelectedText=function(e){if(null!==window.getSelection()){var t=e.value;this.selectedText=window.getSelection().toString(),e.value=t.slice(0,e.selectionStart)+t.slice(e.selectionEnd);var i=document.createElement("textarea");i.contentEditable="true",i.textContent=this.selectedText,i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("cut")}catch(n){console.warn("Copy to clipboard failed.",n)}finally{i&&document.body.removeChild(i)}}},s.prototype.saveImportedFreeTextAnnotations=function(e,t){var i=e;if(i.AnnotType){var a,n=null;if(i.VertexPoints){n=[];for(var r=0;r<i.VertexPoints.length;r++)n.push({x:i.VertexPoints[r].X,y:i.VertexPoints[r].Y})}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),i.allowedInteractions=i.AllowedInteractions?i.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var l=c(i.Bounds.X)?i.Bounds.x:i.Bounds.X,h=c(i.Bounds.Y)?i.Bounds.y:i.Bounds.Y;a={author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:l,y:h,left:l,top:h,width:i.Bounds.Width?i.Bounds.Width:i.Bounds.width,height:i.Bounds.Height?i.Bounds.Height:i.Bounds.height,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotName:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,textAlign:i.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},annotationSelectorSettings:this.getSettings(i),annotationSettings:i.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(i),isPrint:i.IsPrint,isCommentLock:i.IsCommentLock,isReadonly:i.IsReadonly},this.pdfViewer.annotationModule.storeAnnotations(t,a,"_annotations_freetext")}},s.prototype.updateFreeTextAnnotationCollections=function(e,t){var i=e;if(i.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(i,t,i.AnnotType),i.AnnotType){var n=null;if(i.VertexPoints){n=[];for(var r=0;r<i.VertexPoints.length;r++)n.push({x:i.VertexPoints[r].X,y:i.VertexPoints[r].Y})}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),i.IsLocked&&(i.AnnotationSettings.isLock=i.IsLocked),i.allowedInteractions=i.AllowedInteractions?i.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var a=i.Bounds.X?i.Bounds.X:i.Bounds.x,l=i.Bounds.Y?i.Bounds.Y:i.Bounds.y;return{author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:a,y:l,left:a,top:l,width:i.Bounds.Width?i.Bounds.Width:i.Bounds.width,height:i.Bounds.Height?i.Bounds.Height:i.Bounds.height,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotationId:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},customData:this.pdfViewer.annotation.getCustomData(i),font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},pageNumber:t,annotationSettings:i.AnnotationSettings,isCommentLock:i.IsCommentLock,isReadonly:i.IsReadonly,isPrint:i.IsPrint}}},s.prototype.updateAddAnnotationDetails=function(e,t){t=e?e.offset?e.offset:{x:1,y:1}:(e={offset:{x:1,y:1},pageNumber:0,width:void 0,height:void 0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),r=e.fontStyle?e.fontStyle:Io.None,o=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),l=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;a.isLock=!!e.isLock&&e.isLock,a.minHeight=e.minHeight?e.minHeight:0,a.minWidth=e.minWidth?e.minWidth:0,a.maxWidth=e.maxWidth?e.maxWidth:0,a.maxHeight=e.maxHeight?e.maxHeight:0,e.width=e.width?e.width:150,e.height=e.height?e.height:24.6;var h=[];return h[0]={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:l,AnnotName:n,AnnotType:"freeText",AnnotationFlags:"Default",AnnotationIntent:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:o,AnnotationSettings:a,Author:e.author?e.author:"Guest",Border:{HorizontalRadius:0,VerticalRadius:0,Width:e.borderWidth?e.borderWidth:1},BorderColor:{IsEmpty:!0,B:255,Blue:1,C:0,G:255},Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Right:t.x+e.width,Bottom:t.y+e.height},CalloutLines:null,Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:null,CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:e.fillColor?e.fillColor:"#ffffff00",Flatten:!1,FlattenPopups:!1,Font:{Bold:r==Io.Bold,Italic:r==Io.Italic,Strikeout:r==Io.Strikethrough,Underline:r==Io.Underline},FontColor:e.fontColor?e.fontColor:"#000",FontFamily:e.fontFamily?e.fontFamily:"Helvetica",FontSize:e.fontSize?e.fontSize:16,FreeTextAnnotationType:"Text Box",InnerColor:null,IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:null==e.isPrint||e.isPrint,Layer:null,LineEndingStyle:"OpenArrow",Location:null,MarkupText:e.defaultText?e.defaultText:"Type Here",ModifiedDate:"",Name:n,Opacity:e.opacity?e.opacity:1,Page:null,PageTags:null,ReviewHistory:null,Rotate:0,IsReadonly:!!e.isReadonly&&e.isReadonly,State:"Unmarked",StateModel:"None",StrokeColor:e.borderColor?e.borderColor:"#ffffff00",Subject:"Text Box",Text:e.defaultText?e.defaultText:"Type Here",TextAlign:e.textAlignment?e.textAlignment:"Left",TextMarkupColor:null,Thickness:e.borderWidth?e.borderWidth:1,isAddAnnotationProgramatically:!0},{freeTextAnnotation:h}},s.prototype.getPaddingValues=function(e){var i=5;return[4,i=e/16*(i-2)]},s.prototype.addInputInZoom=function(e){var t=this.pdfViewerBase.getZoomFactor();this.inputBoxElement.style.left=e.x*t+"px",this.inputBoxElement.style.top=e.y*t+"px",this.inputBoxElement.style.height=e.height*t+"px",this.inputBoxElement.style.width=e.width*t+"px",this.inputBoxElement.style.borderWidth=this.borderWidth*t+"px",this.inputBoxElement.style.fontSize=this.fontSize*t+"px"},s}(),RAe=function(){function s(e,t){this.pdfViewer=e,this.pdfViewerBase=t,this.inputBoxElement=document.createElement("input"),this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.maxHeight=24.6,this.maxWidth=151,this.fontSize=16,this.isInFocus=!1,this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.fontFamily="Helvetica"}return s.prototype.editLabel=function(e,t){var n=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)),r=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t.labelContent,this.inputBoxElement.select(),t.labelContent="",this.pdfViewer.nodePropertyChange(t,{}),this.inputBoxElement.style.left=e.x*r+"px",this.inputBoxElement.style.top=e.y*r+"px",this.inputBoxElement.style.maxHeight=this.maxHeight*r+"px",this.inputBoxElement.style.maxWidth=this.maxWidth*r+"px",this.inputBoxElement.style.fontSize=this.fontSize*r+"px",this.inputBoxElement.style.textAlign="center",t&&t.wrapper&&t.wrapper.bounds){this.inputBoxElement.style.width=t.wrapper.bounds.width?t.wrapper.bounds.width/2*r+1+"px":this.maxWidth*r+"px";var o=parseFloat(this.inputBoxElement.style.width);o=o>this.maxWidth*r?this.maxWidth*r:o,t.wrapper.bounds.left&&(this.inputBoxElement.style.left=(t.wrapper.bounds.left+t.wrapper.bounds.width/2-o/(2*r))*r+"px"),t.wrapper.bounds.top&&(this.inputBoxElement.style.top="Line"===t.shapeAnnotationType||"LineWidthArrowHead"===t.shapeAnnotationType||"Distance"===t.shapeAnnotationType||"Polygon"===t.shapeAnnotationType?(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight)*r+"px":(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight/2)*r+"px"),this.inputBoxElement.maxLength=t.labelMaxLength,this.inputBoxElement.fontFamily=t.fontFamily,this.inputBoxElement.style.color=t.fontColor,this.inputBoxElement.style.border="1px solid #ffffff00",this.inputBoxElement.style.padding="2px",this.inputBoxElement.style.background=t.labelFillColor}n.appendChild(this.inputBoxElement),this.isInFocus=!0,this.inputBoxElement.focus()},s.prototype.onFocusOutInputBox=function(){var e=this.pdfViewerBase.currentPageNumber-1,t=this.pdfViewerBase.getElement("_pageDiv_"+e),i=parseFloat(this.inputBoxElement.style.height),n=parseFloat(this.inputBoxElement.style.width);this.isInFocus=!1;var r=this.pdfViewer.selectedItems.annotations[0];if(r){n=(n-1)/this.pdfViewerBase.getZoomFactor(),i=(i-1)/this.pdfViewerBase.getZoomFactor(),r.labelContent=this.inputBoxElement.value,r.notes=this.inputBoxElement.value,"Rectangle"===r.shapeAnnotationType||"Ellipse"===r.shapeAnnotationType||"Line"===r.shapeAnnotationType||"LineWidthArrowHead"===r.shapeAnnotationType?this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("labelContent",e,r):"Radius"===r.shapeAnnotationType&&r.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("labelContent",e,r),this.pdfViewer.nodePropertyChange(r,{}),this.pdfViewer.renderSelector(r.pageIndex,this.pdfViewer.annotationSelectorSettings);var o=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);o&&o.childNodes&&"label"!==this.inputBoxElement.value&&(o.childNodes[0].ej2_instances?o.childNodes[0].ej2_instances[0].value=this.inputBoxElement.value:o.childNodes[0].childNodes&&o.childNodes[0].childNodes[1].ej2_instances&&(o.childNodes[0].childNodes[1].ej2_instances[0].value=this.inputBoxElement.value))}t.removeChild(this.inputBoxElement);var a=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e);this.pdfViewer.renderDrawing(a,e)},s.prototype.calculateLabelBounds=function(e,t){var i={};if(e){var n=0,r=0,o=0,a=24.6;void 0===t&&(t=this.pdfViewerBase.currentPageNumber-1);var h=this.pdfViewerBase.pageSize[t].rotation;e.width&&(o=(o=e.width/2)>0&&o<151?o:151),e.left&&(r=e.left+e.width/2-o/2),e.top&&(n=e.top+e.height/2-a/2),i=1===h||3===h?{left:r,top:n,width:o-a+o/2,height:2*a+o,right:0,bottom:0}:{left:r,top:n,width:o,height:a,right:0,bottom:0}}return i},s.prototype.calculateLabelBoundsFromLoadedDocument=function(e){var t={};if(e){var i=0,n=0,r=0;e.Width&&(r=(r=e.Width/2)>0&&r<151?r:151),e.Left&&(n=e.Left+e.Width/2-r/2),e.Top&&(i=e.Top+e.Height/2-12.3),t={left:n,top:i,width:r,height:24.6,right:0,bottom:0}}return t},s}(),OAe=function(){function s(e,t){this.isUndoRedoAction=!1,this.isUndoAction=!1,this.annotationSelected=!0,this.isAnnotDeletionApiCall=!1,this.removedDocumentAnnotationCollection=[],this.isShapeCopied=!1,this.actionCollection=[],this.redoCollection=[],this.isPopupNoteVisible=!1,this.undoCommentsElement=[],this.redoCommentsElement=[],this.selectAnnotationId=null,this.isAnnotationSelected=!1,this.annotationPageIndex=null,this.previousIndex=null,this.overlappedAnnotations=[],this.overlappedCollections=[],this.isFormFieldShape=!1,this.removedAnnotationCollection=[],this.pdfViewer=e,this.pdfViewerBase=t,this.pdfViewer.enableTextMarkupAnnotation&&(this.textMarkupAnnotationModule=new zAe(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableShapeAnnotation&&(this.shapeAnnotationModule=new _Ae(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableMeasureAnnotation&&(this.measureAnnotationModule=new HAe(this.pdfViewer,this.pdfViewerBase)),this.stampAnnotationModule=new jAe(this.pdfViewer,this.pdfViewerBase),this.stickyNotesAnnotationModule=new qAe(this.pdfViewer,this.pdfViewerBase),this.freeTextAnnotationModule=new FAe(this.pdfViewer,this.pdfViewerBase),this.inputElementModule=new RAe(this.pdfViewer,this.pdfViewerBase),this.inkAnnotationModule=new WAe(this.pdfViewer,this.pdfViewerBase)}return s.prototype.setAnnotationMode=function(e,t,i,n){var r=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),"Stamp"===this.pdfViewer.tool&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateStampItems(),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.resetFreeTextAnnot(),"None"!==e&&this.triggerAnnotationUnselectEvent(),this.pdfViewer.tool="",this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.deSelectCommentAnnotation(),"None"===e)this.clearAnnotationMode();else if("Highlight"===e||"Strikethrough"===e||"Underline"===e)this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isSelectionMaintained=!1,this.textMarkupAnnotationModule.drawTextMarkupAnnotations(e.toString()));else if("Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e)this.shapeAnnotationModule&&this.shapeAnnotationModule.setAnnotationType(e);else if("Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e)this.measureAnnotationModule&&this.measureAnnotationModule.setAnnotationType(e);else if("FreeText"===e&&this.freeTextAnnotationModule)this.freeTextAnnotationModule.setAnnotationType("FreeText"),this.freeTextAnnotationModule.isNewFreeTextAnnot=!0,this.freeTextAnnotationModule.isNewAddedAnnot=!0;else if("HandWrittenSignature"===e)this.pdfViewerBase.signatureModule.setAnnotationMode();else if("Initial"===e)this.pdfViewerBase.signatureModule.setInitialMode();else if("Ink"===e)this.inkAnnotationModule.setAnnotationMode();else if("StickyNotes"===e){this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0;var o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));o&&o.addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))}else if("Stamp"===e)if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,t){var a=Wl[t];this.pdfViewerBase.isDynamicStamp=!0,this.stampAnnotationModule.retrieveDynamicStampAnnotation(a)}else i?(a=Go[i],this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(a)):n&&(a=ls[n],this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(a));this.pdfViewer.enableServerDataBinding(r,!0),this.pdfViewerBase.initiateTextSelection()},s.prototype.deleteAnnotationById=function(e){e&&(this.isAnnotDeletionApiCall=!0,this.annotationSelected=!1,this.selectAnnotation(e),this.deleteAnnotation(),this.isAnnotDeletionApiCall=!1)},s.prototype.clearAnnotationMode=function(){if(this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.freeTextAnnotationModule&&(this.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.freeTextAnnotationModule.isNewAddedAnnot=!1),this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode=""),this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode=""),this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode=""),this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}},s.prototype.deleteAnnotation=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();var e=this.pdfViewer.selectedItems.annotations[0];if(e){var t=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_formfields"),i=JSON.parse(t),n=[];if(i){for(var r=0;r<i.length;r++)if(i[r].uniqueID==e.id){i[r].Value="";for(var o=0;o<i.length;o++)"ink"===i[o].Name&&(i[o].Value=""),i[r].FieldName===i[o].FieldName&&"ink"===i[o].Name&&i.splice(o,1);n.push(i[r])}else n.push(i[r]);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_formfields",JSON.stringify(n))}}var a=!1,l=!1;if(this.pdfViewer.selectedItems.annotations.length>0){var h=this.pdfViewer.selectedItems.annotations[0],d=h.shapeAnnotationType;if("Path"===d||"SignatureField"===h.formFieldAnnotationType||"InitialField"===h.formFieldAnnotationType||"HandWrittenSignature"===d||"SignatureText"===d||"SignatureImage"===d){var p=document.getElementById(h.id);p&&p.disabled&&(l=!0)}if(h.annotationSettings&&(a=h.annotationSettings.isLock)&&this.checkAllowedInteractions("Delete",h)&&(a=!1),!a&&!l){var u=h.pageIndex,f=h.shapeAnnotationType,g=void 0;"Line"===f||"LineWidthArrowHead"===f||"Polygon"===f||"Ellipse"===f||"Rectangle"===f||"Radius"===f||"Distance"===f?(c(h.measureType)||""===h.measureType?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"shape"),this.updateImportAnnotationCollection(h,u,"shapeAnnotation")):(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"measure"),this.updateImportAnnotationCollection(h,u,"measureShapeAnnotation")),g=this.modifyInCollections(h,"delete")):"FreeText"===f?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"FreeText","delete"),g=this.modifyInCollections(h,"delete"),this.updateImportAnnotationCollection(h,u,"freeTextAnnotation")):"HandWrittenSignature"===f||"SignatureImage"===f||"SignatureText"===f?g=this.modifyInCollections(h,"delete"):"Ink"===f?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"Ink","delete"),g=this.modifyInCollections(h,"delete"),this.updateImportAnnotationCollection(h,u,"signatureInkAnnotation")):(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(g=this.pdfViewer.selectedItems.annotations[0],g.shapeAnnotationType,"delete"),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(h,null,"delete")),"StickyNotes"===f&&this.updateImportAnnotationCollection(h,u,"stickyNotesAnnotation"),this.updateImportAnnotationCollection(h,u,"stampAnnotations"),this.pdfViewer.annotation.addAction(u,null,h,"Delete","",g,h);var m=void 0;""!==h.annotName?m=document.getElementById(h.annotName):g&&""!==g.annotName&&(m=document.getElementById(g.annotName)),this.removeCommentPanelDiv(m);var y=this.pdfViewer.selectedItems.annotations[0],b=y.annotName,w=this.getAnnotationType(y.shapeAnnotationType,y.measureType);if("Path"===f||"SignatureField"===y.formFieldAnnotationType||"InitialField"===y.formFieldAnnotationType||"HandWrittenSignature"===f||"SignatureText"===f||"SignatureImage"===f){var S=this.pdfViewer.retrieveFormFields(),x=void 0;(I=S.findIndex(function(j){return j.id===h.id}))>-1&&(x=S[I].name);for(var T=0;T<S.length;T++)if(y.id===S[T].id||c(x)&&x===S[T].name){S[T].value="",S[T].signatureType="";var L=this.getAnnotationsFromCollections(S[T].id);this.updateInputFieldDivElement(L),g=this.modifyInCollections(L,"delete"),this.pdfViewer.annotation.addAction(L.pageIndex,null,L,"Delete","",g,L),this.pdfViewer.formDesignerModule&&y.formFieldAnnotationType?this.updateFormFieldCollection(L):this.updateAnnotationCollection(L),this.pdfViewer.remove(L)}this.pdfViewer.formDesignerModule&&y.formFieldAnnotationType?this.updateFormFieldCollection(h):this.updateAnnotationCollection(h)}this.pdfViewer.formDesignerModule&&y.formFieldAnnotationType?this.updateFormFieldCollection(h):this.updateAnnotationCollection(h);var N=this.pdfViewer.nameTable[h.id.split("_")[0]];if(null!=N&&("SignatureField"===N.formFieldAnnotationType||"InitialField"===N.formFieldAnnotationType)){var I;x=void 0,(I=this.pdfViewer.formFieldCollections.findIndex(function(Y){return Y.id===h.id.split("_")[0]}))>-1&&(x=this.pdfViewer.formFieldCollections[I].name);for(var O=0;O<this.pdfViewer.formFieldCollections.length;O++)if(x===this.pdfViewer.formFieldCollections[O].name){var _=this.pdfViewer.formFieldCollections[O];this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",_,_.pageIndex,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,_.value,""),_.value="",_.signatureType="",this.pdfViewer.formDesignerModule.updateFormFieldCollections(_);var B=this.getAnnotationsFromCollections(_.id+"_content");g=this.modifyInCollections(B,"delete"),this.pdfViewer.annotation.addAction(B.pageIndex,null,B,"Delete","",g,B),this.updateInputFieldDivElement(B);var q=this.pdfViewer.nameTable[B.id.split("_")[0]];q.wrapper.children.splice(q.wrapper.children.indexOf(B.wrapper.children[0]),1),this.pdfViewer.remove(B)}}this.pdfViewer.remove(h),this.pdfViewer.renderDrawing(),this.pdfViewer.clearSelection(u),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.pdfViewerBase.tool=null,this.pdfViewer.tool=null,"HandWrittenSignature"===y.shapeAnnotationType||"SignatureText"===y.shapeAnnotationType||"SignatureImage"===y.shapeAnnotationType||"Path"===y.shapeAnnotationType?this.pdfViewer.fireSignatureRemove(u,y.id,y.shapeAnnotationType,{left:y.bounds.x,top:y.bounds.y,width:y.bounds.width,height:y.bounds.height}):this.pdfViewer.annotationModule&&this.pdfViewer.fireAnnotationRemove(u,b,w,y.bounds),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.enableTextSelectionMode()}}this.updateToolbar(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&!a&&(this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!1,!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!1))},s.prototype.getAnnotationsFromCollections=function(e){var t=this.pdfViewer.annotations;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i]},s.prototype.updateInputFieldDivElement=function(e){var t=document.getElementById(e.id),i=document.getElementById(e.id+"_html_element");null===t&&!c(i)&&(t=i.children[0].children[0]),t&&t.classList.contains("e-pdfviewer-signatureformfields-signature")&&(t.className="e-pdfviewer-signatureformfields",t.style.pointerEvents="",t.parentElement.style.pointerEvents="",this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.updateSignatureValue(e.id):this.pdfViewer.formFieldsModule.updateDataInSession(t,""))},s.prototype.storeAnnotationCollections=function(e,t){if(this.isFormFieldShape){var i=this.checkFormDesignCollection(e);(n=st(e)).formFieldId=e.annotName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.formFieldCollection.splice(i.position,0,n):this.pdfViewer.formFieldCollection.push(n)}else{var n;i=this.checkAnnotationCollection(e),(n=st(e)).annotationId=e.annotName,n.pageNumber=t,delete n.annotName,"stamp"===e.shapeAnnotationType&&(n.uniqueKey=e.randomId,delete n.randomId),"sticky"===e.shapeAnnotationType&&(n.uniqueKey=e.annotName),e.id&&(n.uniqueKey=e.id,delete n.id),n.customData&&e.customData&&JSON.stringify(n.customData)!==JSON.stringify(e.customData)&&(n.customData=e.customData),i.isExisting?this.pdfViewer.annotationCollection.splice(i.position,0,n):this.pdfViewer.annotationCollection.push(n)}},s.prototype.checkFormDesignCollection=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].formFieldId===e.annotName)return this.pdfViewer.formFieldCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},s.prototype.updateFormFieldCollection=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].formFieldId===e.annotName){this.removedAnnotationCollection.push(t[i]),this.pdfViewer.formFieldCollection.splice(i,1);break}},s.prototype.getCustomData=function(e){var t;return e.ExistingCustomData&&!e.CustomData?t=JSON.parse(e.ExistingCustomData):null===e.CustomData?("sticky"===e.shapeAnnotationType&&(t=this.pdfViewer.stickyNotesSettings.customData),"Stamp"===e.shapeAnnotationType&&(t=this.pdfViewer.stampSettings.customData),"FreeText"===e.shapeAnnotationType&&(t=this.pdfViewer.freeTextSettings.customData),"shape"===e.id&&(t=this.getShapeData(e.ShapeAnnotationType,e.subject)),"measure"===e.id&&(t=this.getMeasureData(e.Subject)),"textMarkup"===e.shapeAnnotationType&&(t=this.getTextMarkupData(e.subject)),"Ink"===e.shapeAnnotationType&&(t=this.pdfViewer.inkAnnotationSettings.customData)):t=e.CustomData,t},s.prototype.getShapeData=function(e,t){var i;return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.customData?i=this.pdfViewer.lineSettings.customData:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.arrowSettings.customData?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.customData?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.customData?"Polygon"===e&&this.pdfViewer.polygonSettings.customData?i=this.pdfViewer.polygonSettings.customData:this.pdfViewer.annotationSettings.customData&&(i=this.pdfViewer.annotationSettings.customData):i=this.pdfViewer.circleSettings.customData:i=this.pdfViewer.rectangleSettings.customData:i=this.pdfViewer.arrowSettings.customData,i},s.prototype.getMeasureData=function(e){var t;return"Distance"!==e&&"Distance calculation"!==e||!this.pdfViewer.distanceSettings.customData?"Line"!==e&&"Perimeter calculation"!==e||!this.pdfViewer.lineSettings.customData?"Polygon"!==e&&"Area calculation"!==e&&"Volume calculation"!==e||!this.pdfViewer.polygonSettings.customData?"Radius"!==e&&"Radius calculation"!==e||!this.pdfViewer.radiusSettings.customData?this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.radiusSettings.customData:t=this.pdfViewer.polygonSettings.customData:t=this.pdfViewer.lineSettings.customData:t=this.pdfViewer.distanceSettings.customData,t},s.prototype.getTextMarkupData=function(e){var t;return"Highlight"===e&&this.pdfViewer.highlightSettings.customData?t=this.pdfViewer.highlightSettings.customData:"Underline"===e&&this.pdfViewer.underlineSettings.customData?t=this.pdfViewer.underlineSettings.customData:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.customData?t=this.pdfViewer.strikethroughSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData),t},s.prototype.getData=function(e){var t;return"FreeText"===e&&this.pdfViewer.freeTextSettings.customData?t=this.pdfViewer.freeTextSettings.customData:"image"!==e&&"Stamp"!==e||!this.pdfViewer.stampSettings.customData?"sticky"===e&&this.pdfViewer.stickyNotesSettings.customData?t=this.pdfViewer.stickyNotesSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.stampSettings.customData,t},s.prototype.clearAnnotationStorage=function(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500){for(var i=window.sessionStorage.length,n=[],r=0;r<i;r++)window.sessionStorage.key(r)&&window.sessionStorage.key(r).split("_")[3]&&"annotations"===window.sessionStorage.key(r).split("_")[3]&&(this.pdfViewerBase.annotationStorage[window.sessionStorage.key(r)]=window.sessionStorage.getItem(window.sessionStorage.key(r)),n.push(window.sessionStorage.key(r)));if(n)for(r=0;r<n.length;r++)window.sessionStorage.removeItem(n[r])}},s.prototype.checkAnnotationCollection=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName)return this.pdfViewer.annotationCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},s.prototype.updateAnnotationCollection=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName||t[i].annotationId===e.annotationId){this.removedAnnotationCollection.push(t[i]),this.pdfViewer.annotationCollection.splice(i,1);break}},s.prototype.updateImportAnnotationCollection=function(e,t,i){if(this.pdfViewerBase.isImportAction&&this.pdfViewerBase.importedAnnotation&&this.pdfViewerBase.importedAnnotation[t]){var n=this.pdfViewerBase.importedAnnotation[t];if(n[i])for(var r=0;r<n[i].length;r++)if(e.annotName===n[i][r].AnnotName||e.annotName===n[i][r].annotName){this.pdfViewerBase.importedAnnotation[t][i].splice(r,1);break}}var o=this.pdfViewerBase.documentAnnotationCollections;if(o&&o[t]){var a=o[t];if(a&&a[i])for(r=0;r<a[i].length;r++)if(e.annotName===a[i][r].AnnotName){this.pdfViewerBase.documentAnnotationCollections[t][i].splice(r,1);break}}},s.prototype.selectAnnotation=function(e){var t,i;if("object"==typeof e&&(t=this.getAnnotationsFromAnnotationCollections(i=(t=e).annotationId)),"string"==typeof e&&(t=this.getAnnotationsFromAnnotationCollections(e),i=e),t){var r,n=c(t.pageNumber)?t.pageIndex:t.pageNumber;r=this.findRenderPageList(n);var o=this.pdfViewer.annotationSelectorSettings;if(t&&n>=0){if("textMarkup"===t.shapeAnnotationType)if(t.rect||t.bounds){var a=this.pdfViewerBase.pageSize[n].top*this.pdfViewerBase.getZoomFactor()+this.getAnnotationTop(t)*this.pdfViewerBase.getZoomFactor();if(!this.isAnnotDeletionApiCall){var l=(a-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(l),this.pdfViewerBase.viewerContainer.scrollLeft=this.getAnnotationLeft(t)*this.pdfViewerBase.getZoomFactor()}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(n+1);else if(t.bounds){a=this.pdfViewerBase.pageSize[n].top*this.pdfViewerBase.getZoomFactor()+t.bounds.top*this.pdfViewerBase.getZoomFactor();var h=t.bounds.left*this.pdfViewerBase.getZoomFactor();if("Ink"===t.shapeAnnotationType&&(a=this.pdfViewerBase.pageSize[n].top*this.pdfViewerBase.getZoomFactor()+t.bounds.y*this.pdfViewerBase.getZoomFactor(),h=t.bounds.x*this.pdfViewerBase.getZoomFactor()),!this.isAnnotDeletionApiCall){var d=(a-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(d),this.pdfViewerBase.viewerContainer.scrollLeft=h}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(n+1);if(r){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(n),this.previousIndex=n,"textMarkup"===t.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(n,!0);var p=this.pdfViewerBase.getElement("_annotationCanvas_"+n),u=this.getTextMarkupAnnotations(n,t);u&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(u,p,n,null,!0),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=u,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=n,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1,this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)))}else"stamp"===t.shapeAnnotationType||"stamp"===t.ShapeAnnotationType?(this.pdfViewer.select([t.uniqueKey],o),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===t.shapeAnnotationType||"sticky"===t.ShapeAnnotationType?(this.pdfViewer.select([t.annotationId],o),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([t.uniqueKey],o),this.pdfViewer.annotation.onAnnotationMouseDown());var f=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(f&&"block"===f.style.display){var g=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);g&&g.ej2_instances[0].expandItem(!0);var m=document.getElementById(i);m&&(m.classList.contains("e-pv-comments-border")||m.firstChild.click())}}else(t.uniqueKey||"textMarkup"===t.shapeAnnotationType&&"Imported Annotation"===t.annotationAddMode)&&(this.selectAnnotationId=i,this.isAnnotationSelected=!0,this.annotationPageIndex=n,this.selectAnnotationFromCodeBehind())}if(!r&&!t.uniqueKey){var y=this.updateCollectionForNonRenderedPages(t,i,n);y.pageIndex=n,this.pdfViewer.annotation.addAction(n,null,y,"Delete","",y,y),this.undoCommentsElement.push(y);var b=document.getElementById(t.annotationId);this.removeCommentPanelDiv(b)}}},s.prototype.updateCollectionForNonRenderedPages=function(e,t,i){var n,r=this.pdfViewer.annotationCollection;if(r.length){var o=r.filter(function(p){return p.annotationId===t});n=o[0],this.updateAnnotationCollection(o[0])}var a=this.getTypeOfAnnotation(e),l=this.pdfViewerBase.documentAnnotationCollections[i];if(l[a].length)for(var h=0;h<l[a].length;h++)if(l[a][h].AnnotName===e.annotationId){this.removedDocumentAnnotationCollection.push(l[a][h]),l[a].splice(h,1);break}return n},s.prototype.getTypeOfAnnotation=function(e){var t;return e.id&&"shape"===e.id.toLowerCase()?t="shapeAnnotation":e.id&&"measure"===e.id.toLowerCase()?t="measureShapeAnnotation":e.id&&"freetext"===e.id.toLowerCase()?t="freeTextAnnotation":e.shapeAnnotationType&&"textmarkup"===e.shapeAnnotationType.toLowerCase()?t="textMarkupAnnotation":e.shapeAnnotationType&&"stamp"===e.shapeAnnotationType.toLowerCase()?t="stampAnnotations":e.shapeAnnotationType&&"ink"===e.shapeAnnotationType.toLowerCase()?t="signatureInkAnnotation":e.shapeAnnotationType&&"sticky"===e.shapeAnnotationType.toLowerCase()&&(t="stickyNotesAnnotation"),t},s.prototype.removeCommentPanelDiv=function(e){e&&(1===e.parentElement.childElementCount?this.stickyNotesAnnotationModule.updateAccordionContainer(e):e.remove())},s.prototype.clearSelection=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation?(this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)):this.pdfViewer.clearSelection(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0].pageIndex:this.pdfViewer.currentPageNumber-1)},s.prototype.getAnnotationTop=function(e){return e.rect?e.rect.Top?e.rect.Top:e.rect.top:e.bounds[0].Top?e.bounds[0].Top:e.bounds[0].top},s.prototype.getAnnotationLeft=function(e){return e.rect?e.rect.Left?e.rect.Left:e.rect.left:e.bounds[0].Left?e.bounds[0].Left:e.bounds[0].left},s.prototype.selectAnnotationFromCodeBehind=function(){if(this.isAnnotationSelected&&this.selectAnnotationId){var e=this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId),t=this.selectAnnotationId,i=e.pageNumber,n=this.pdfViewer.annotationSelectorSettings;if(e&&this.annotationPageIndex>=0&&this.annotationPageIndex===i){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(i),this.previousIndex=i,"textMarkup"===e.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i,!0);var r=this.pdfViewerBase.getElement("_annotationCanvas_"+i),o=this.getTextMarkupAnnotations(i,e);o&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(o,r,i),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=o,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1,this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)))}else"stamp"===e.shapeAnnotationType||"stamp"===e.ShapeAnnotationType?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===e.shapeAnnotationType||"sticky"===e.ShapeAnnotationType?(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown()):e.uniqueKey?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown());var a=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(a&&"block"===a.style.display){var l=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);l&&l.ej2_instances[0].expandItem(!0);var h=document.getElementById(t);h&&(h.classList.contains("e-pv-comments-border")||h.firstChild.click())}}this.isAnnotationSelected=!1,this.selectAnnotationId=null,this.annotationPageIndex=null}},s.prototype.findRenderPageList=function(e){var t=!1,i=this.pdfViewerBase.renderedPagesList;if(i)for(var n=0;n<i.length;n++)if(i[n]===e)return!0;return t},s.prototype.getPageNumberFromAnnotationCollections=function(e){var t=this.pdfViewer.annotations;if(e){if("textMarkup"===e.shapeAnnotationType)return e.pageNumber;if(t)for(var i=0;i<t.length;i++)if(t[i].annotName===e.annotationId)return t[i].pageIndex}},s.prototype.getAnnotationsFromAnnotationCollections=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e)return t[i];0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[e])},s.prototype.getTextMarkupAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),!i)return null;var n=JSON.parse(i),r=this.getPageCollection(n,e);if(n[r]){for(var o=0;o<n[r].annotations.length;o++)if(n[r].annotations[o].annotName===t.annotationId)return n[r].annotations[o];return null}},s.prototype.getAnnotationType=function(e,t){var i;if(""===t||c(t))switch(e){case"Line":i="Line";break;case"LineWidthArrowHead":i="Arrow";break;case"Rectangle":i="Rectangle";break;case"Ellipse":i="Circle";break;case"Polygon":i="Polygon";break;case"Stamp":i="Stamp";break;case"Image":i="Image";break;case"FreeText":i="FreeText";break;case"Ink":i="Ink";break;case"StickyNotes":i="StickyNotes"}else switch(t){case"Distance":i="Distance";break;case"Perimeter":i="Perimeter";break;case"Area":i="Area";break;case"Radius":i="Radius";break;case"Volume":i="Volume"}return i},s.prototype.getAnnotationIndex=function(e,t){for(var i=this.pdfViewer.drawing.getPageObjects(e),n=null,r=0;r<i.length;r++)if(i[r].id===t){n=r;break}return n},s.prototype.initializeCollection=function(){this.actionCollection=[],this.redoCollection=[],this.pdfViewerBase.customStampCollection=[],this.popupNote||this.createNote()},s.prototype.showCommentsPanel=function(){if(this.pdfViewer.enableCommentPanel){var e=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(e&&"none"===e.style.display){e.style.display="block",E.isDevice&&!X()&&document.getElementById(this.pdfViewer.element.id+"_viewerMainContainer").insertBefore(this.pdfViewerBase.navigationPane.commentPanelContainer,this.pdfViewer.toolbarModule.toolbarElement),this.pdfViewerBase.navigationPane.commentPanelResizer&&(this.pdfViewerBase.navigationPane.commentPanelResizer.style.display="block"),this.pdfViewerBase.navigationPane.setCommentPanelResizeIconTop(),this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var i=document.getElementById(this.pdfViewer.element.id+"_viewerContainer"),n=document.getElementById(this.pdfViewer.element.id+"_pageViewContainer");if(i&&(this.pdfViewer.enableRtl?i.style.left=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px":i.style.right=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",i.style.width=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",n.style.width=i.offsetWidth-this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()+"px"),this.pdfViewerBase.updateZoomValue(),this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),E.isDevice&&!X()){if(e.style.height=this.pdfViewerBase.viewerMainContainer.clientHeight+"px",this.pdfViewer.selectedItems.annotations.length>0){var r=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);r&&r.lastElementChild.children[1]&&r.lastElementChild.children[1].ej2_instances?r.lastElementChild.children[1].ej2_instances[0].enableEditMode=!0:r&&r.lastElementChild.ej2_instances&&(r.lastElementChild.ej2_instances[0].enableEditMode=!0,r.lastElementChild.style.display="block",r.lastElementChild.children[1]&&(r.lastElementChild.children[1].style.display="block"))}this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="none",this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display="none"))}}}},s.prototype.addAction=function(e,t,i,n,r,o,a){this.actionCollection.push({pageIndex:e,index:t,annotation:i,action:n,modifiedProperty:r,undoElement:o,redoElement:a}),this.updateToolbar()},s.prototype.undo=function(){var e=this.actionCollection.pop();if(e){var t=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,this.isUndoAction=!0,e.action){case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.undoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action);break;case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.index,e.modifiedProperty,!0));break;case"Drag":case"Resize":xa(e.annotation)?this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.undoElement.bounds,vertexPoints:e.undoElement.vertexPoints,leaderHeight:e.undoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.undoElement.bounds}),("Distance"===e.annotation.measureType||"Perimeter"===e.annotation.measureType||"Area"===e.annotation.measureType||"Radius"===e.annotation.measureType||"Volume"===e.annotation.measureType)&&(this.pdfViewer.nodePropertyChange(e.annotation,{notes:e.undoElement.notes}),this.updateCalibrateValues(e.annotation)),e.annotation.formFieldAnnotationType&&this.pdfViewer.formDesigner.updateHTMLElement(e.annotation),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]),("Line"===e.annotation.shapeAnnotationType||"Rectangle"===e.annotation.shapeAnnotationType||"Ellipse"===e.annotation.shapeAnnotationType||"Polygon"===e.annotation.shapeAnnotationType||"LineWidthArrowHead"===e.annotation.shapeAnnotationType||"Radius"===e.annotation.shapeAnnotationType||"FreeText"===e.annotation.shapeAnnotationType||"HandWrittenSignature"===e.annotation.shapeAnnotationType||"SignatureText"===e.annotation.shapeAnnotationType||"SignatureImage"===e.annotation.shapeAnnotationType||"Ink"===e.annotation.shapeAnnotationType)&&this.modifyInCollections(e.annotation,"bounds");break;case"Addition":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)this.pdfViewer.formDesigner.deleteFormField(e.undoElement.id,!1);else{var i=!1;if("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t){""===e.annotation.measureType||c(e.annotation.measureType)?this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,"shape"):this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,"measure"),i=!0;var n=e.annotation,r=n.wrapper?n.wrapper:null;r&&r.bounds&&(e.annotation.bounds=r.bounds),e.duplicate=this.modifyInCollections(e.annotation,"delete")}("Stamp"===t||"Image"===t)&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),i=!0),("FreeText"===t||"HandWrittenSignature"===t||"SignatureImage"===t||"SignatureText"===t||"Ink"===t)&&(i=!0,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),e.duplicate=this.modifyInCollections(e.annotation,"delete")),i||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex);var o=document.getElementById(e.annotation.annotName);if(o&&(1===o.parentElement.childElementCount?this.stickyNotesAnnotationModule.updateAccordionContainer(o):o.parentElement.removeChild(o)),E.isDevice&&!this.pdfViewer.enableDesktopMode){var a=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar");a&&a.children.length>0&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated=!1,this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile())}}break;case"Delete":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)e.undoElement.bounds.x=e.undoElement.wrapper.bounds.x,e.undoElement.bounds.y=e.undoElement.wrapper.bounds.y,this.pdfViewer.formDesigner.drawFormField(e.undoElement);else{if(("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t)&&(""===e.annotation.measureType||c(e.annotation.measureType)?(t="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement)):(t="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement))),"Stamp"===t||"Image"===t?this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.annotation):"FreeText"===t?this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):"Ink"===t?this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):("HandWrittenSignature"===t||"SignatureText"===t||"SignatureImage"===t)&&this.pdfViewerBase.signatureModule.addInCollection(e.annotation.pageIndex,e.undoElement),!e.annotation.annotationId){var l=this.pdfViewer.add(e.annotation);("FreeText"===t||l.enableShapeLabel)&&l&&this.pdfViewer.nodePropertyChange(l,{})}var h=void 0;if(e.annotation.id&&(h=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]]),null!=h&&("SignatureField"===h.formFieldAnnotationType||"InitialField"===h.formFieldAnnotationType)){h.wrapper.children.push(e.annotation.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&h.wrapper.children.push(e.annotation.wrapper.children[1]);var d=e.annotation.id.split("_")[0]+"_content",p=null;if(this.pdfViewer.formDesignerModule&&(p=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),p){for(var u=JSON.parse(p),f=0;f<u.length;f++)if(u[f].Key===d)if("SignatureText"===e.annotation.shapeAnnotationType)u[f].FormField.signatureType="Text",u[f].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[f].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[f].FormField.signatureType="Text";else if("SignatureImage"===e.annotation.shapeAnnotationType)u[f].FormField.signatureType="Image",u[f].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[f].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[f].FormField.signatureType="Image";else{u[f].FormField.signatureType="Path",this.pdfViewerBase.formFieldCollection[f].FormField.signatureType="Path";var m=ia(Cs(e.annotation.data));u[f].FormField.value=JSON.stringify(m),this.pdfViewerBase.formFieldCollection[f].FormField.value=JSON.stringify(m)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}if(this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,t),e.annotation.annotationId){var y=this.removedAnnotationCollection[this.removedAnnotationCollection.length-1],b=this.getTypeOfAnnotation(y);this.pdfViewer.annotationCollection.push(y),this.removedAnnotationCollection.splice(this.removedAnnotationCollection.length-1),this.pdfViewerBase.documentAnnotationCollections[e.annotation.pageNumber>=0?e.annotation.pageNumber:e.annotation.pageIndex][b].push(this.removedDocumentAnnotationCollection[this.removedDocumentAnnotationCollection.length-1]),this.removedDocumentAnnotationCollection.splice(this.removedDocumentAnnotationCollection.length-1)}}break;case"stampOpacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.undoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(e.annotation,{strokeColor:e.undoElement.strokeColor}),this.modifyInCollections(e.annotation,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.undoElement.fillColor}),this.modifyInCollections(e.annotation,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.undoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(e.annotation),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()):this.modifyInCollections(e.annotation,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(e.annotation,{thickness:e.undoElement.thickness}),this.modifyInCollections(e.annotation,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.undoElement.fillColor,borderDashArray:e.undoElement.borderDashArray,borderStyle:e.undoElement.borderStyle,strokeColor:e.undoElement.strokeColor,opacity:e.undoElement.opacity,thickness:e.undoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.undoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.undoElement.lineHeadEnd)}),this.updateCollectionForLineProperty(e.annotation),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case"Comments Property Added":case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,e.annotation.dynamicText=e.undoElement.dynamicText,this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].dynamicText=e.undoElement.dynamicText),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),this.modifyInCollections(e.annotation,"dynamicText"),this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0]:e.annotation,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);break;case"fontColor":this.pdfViewer.nodePropertyChange(e.annotation,{fontColor:e.undoElement.fontColor}),this.modifyInCollections(e.annotation,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(e.annotation,{fontSize:e.undoElement.fontSize}),this.modifyInCollections(e.annotation,"fontSize"),this.pdfViewer.renderDrawing();break;case"fontFamily":this.pdfViewer.nodePropertyChange(e.annotation,{fontFamily:e.undoElement.fontFamily}),this.modifyInCollections(e.annotation,"fontFamily"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(e.annotation,{textAlign:e.undoElement.textAlign}),this.modifyInCollections(e.annotation,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(e.annotation,{font:e.undoElement.font}),this.modifyInCollections(e.annotation,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(e.annotation.annotations[0],{bounds:e.undoElement.bounds,rotateAngle:e.undoElement.rotateAngle}),this.modifyInCollections(e.annotation.annotations[0],"bounds"),this.pdfViewer.renderDrawing();break;case"FormDesigner Properties Change":e.undoElement&&e.undoElement.isMultiline!==e.redoElement.isMultiline&&this.undoRedoMultiline(e.undoElement),this.updateFormFieldPropertiesChanges(e.undoElement.formFieldAnnotationType,e.undoElement);break;case"FormField Value Change":if(e.annotation.formFieldAnnotationType)"RadioButton"==e.annotation.formFieldAnnotationType?(this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.undoElement,!1),this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.redoElement,!0)):this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.annotation,e.undoElement);else{document.getElementById(e.annotation.id+"_html_element").children[0].children[0].className="e-pdfviewer-signatureformfields",h=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];var I=this.pdfViewer.nameTable[e.annotation.id];if(h.wrapper.children.splice(h.wrapper.children.indexOf(I.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&h.wrapper.children.splice(h.wrapper.children.indexOf(I.wrapper.children[1]),1),d=e.annotation.id.split("_")[0]+"_content",p=null,this.pdfViewer.formDesignerModule&&(p=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),p){for(u=JSON.parse(p),f=0;f<u.length;f++)u[f].Key===d&&(u[f].FormField.value="",u[f].FormField.signatureType="",this.pdfViewerBase.formFieldCollection[f].FormField.value="",this.pdfViewerBase.formFieldCollection[f].FormField.signatureType="");this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}}this.redoCollection.push(e),this.updateToolbar(),this.isUndoRedoAction=!1,this.isUndoAction=!1}},s.prototype.redo=function(){var e=this.redoCollection.pop();if(e){var t=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,e.action){case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.index,e.modifiedProperty));break;case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.redoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action);break;case"Drag":case"Resize":xa(e.annotation)?this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.redoElement.bounds,vertexPoints:e.redoElement.vertexPoints,leaderHeight:e.redoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.redoElement.bounds}),("Distance"===e.annotation.measureType||"Perimeter"===e.annotation.measureType||"Area"===e.annotation.measureType||"Radius"===e.annotation.measureType||"Volume"===e.annotation.measureType)&&(this.pdfViewer.nodePropertyChange(e.annotation,{notes:e.redoElement.notes}),this.updateCalibrateValues(e.annotation)),e.annotation.formFieldAnnotationType&&this.pdfViewer.formDesigner.updateHTMLElement(e.annotation),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]),("Line"===e.annotation.shapeAnnotationType||"Rectangle"===e.annotation.shapeAnnotationType||"Ellipse"===e.annotation.shapeAnnotationType||"Polygon"===e.annotation.shapeAnnotationType||"LineWidthArrowHead"===e.annotation.shapeAnnotationType||"Radius"===e.annotation.shapeAnnotationType||"FreeText"===e.annotation.shapeAnnotationType||"HandWrittenSignature"===e.annotation.shapeAnnotationType||"SignatureText"===e.annotation.shapeAnnotationType||"SignatureImage"===e.annotation.shapeAnnotationType||"Ink"===e.annotation.shapeAnnotationType)&&this.modifyInCollections(e.annotation,"bounds");break;case"Addition":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)e.redoElement.bounds.x=e.redoElement.wrapper.bounds.x,e.redoElement.bounds.y=e.redoElement.wrapper.bounds.y,this.pdfViewer.formDesigner.drawFormField(e.redoElement);else{("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t)&&(""===e.annotation.measureType||c(e.annotation.measureType)?(t="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate)):(t="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate))),"FreeText"===t&&this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate),("Stamp"===t||"Image"===t)&&this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.redoElement),("HandWrittenSignature"===t||"SignatureText"===t||"SignatureImage"===t)&&this.pdfViewerBase.signatureModule.addInCollection(e.annotation.pageIndex,e.duplicate),"Ink"===t&&this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate);var i=this.pdfViewer.add(e.annotation);if(this.pdfViewer.select([e.annotation.id]),("FreeText"===t||i.enableShapeLabel)&&i&&this.pdfViewer.nodePropertyChange(i,{}),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,t),E.isDevice&&!this.pdfViewer.enableDesktopMode){var n=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar");n&&n.children.length>0&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated=!1,this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile())}}break;case"Delete":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)this.pdfViewer.formDesigner.deleteFormField(e.redoElement.id,!1);else{var r=!1,o=e.annotation.shapeAnnotationType;("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t)&&(o=""===e.annotation.measureType||c(e.annotation.measureType)?"shape":"measure",this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,o,"delete"),this.modifyInCollections(e.annotation,"delete"),r=!0),("Stamp"===t||"Image"===t)&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,o,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),r=!0),("FreeText"===t||"HandWrittenSignature"===t||"SignatureText"===t||"SignatureImage"===t)&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,o,"delete"),this.modifyInCollections(e.annotation,"delete")),r||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,o,"delete");var a=void 0;if(e.annotation.id&&(a=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]]),null!=a&&("SignatureField"===a.formFieldAnnotationType||"InitialField"===a.formFieldAnnotationType)){a.wrapper.children.splice(a.wrapper.children.indexOf(e.annotation.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&a.wrapper.children.splice(a.wrapper.children.indexOf(e.annotation.wrapper.children[1]),1);var l=e.annotation.id.split("_")[0]+"_content",h=null;if(this.pdfViewer.formDesignerModule&&(h=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),h){for(var d=JSON.parse(h),p=0;p<d.length;p++)d[p].Key===l&&(d[p].FormField.value="",d[p].FormField.signatureType="",this.pdfViewerBase.formFieldCollection[p].FormField.value="",this.pdfViewerBase.formFieldCollection[p].FormField.signatureType="");this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}this.pdfViewer.clearSelection(e.annotation.pageIndex),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex);var u=e.annotation.annotName?e.annotation.annotName:e.annotation.annotationId,f=document.getElementById(u);if(this.removeCommentPanelDiv(f),e.annotation.annotationId){var g=this.updateCollectionForNonRenderedPages(e.annotation,u,e.annotation.pageIndex);this.undoCommentsElement.push(g)}}break;case"stampOpacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.redoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(e.annotation,{strokeColor:e.redoElement.strokeColor}),this.modifyInCollections(e.annotation,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.redoElement.fillColor}),this.modifyInCollections(e.annotation,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.redoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(e.annotation),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0)):this.modifyInCollections(e.annotation,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(e.annotation,{thickness:e.redoElement.thickness}),this.modifyInCollections(e.annotation,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.redoElement.fillColor,strokeColor:e.redoElement.strokeColor,opacity:e.redoElement.opacity,thickness:e.redoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.redoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.redoElement.lineHeadEnd),borderDashArray:e.redoElement.borderDashArray,borderStyle:e.redoElement.borderStyle}),this.updateCollectionForLineProperty(e.annotation),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Comments Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement);break;case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,e.annotation.dynamicText=e.redoElement.dynamicText;var m=this.pdfViewer.selectedItems.annotations[0];m&&(m.dynamicText=e.redoElement.dynamicText,m.bounds.height=e.redoElement.bounds.height),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),this.modifyInCollections(e.annotation,"dynamicText"),this.pdfViewer.nodePropertyChange(m||e.annotation,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]);break;case"fontColor":this.pdfViewer.nodePropertyChange(e.annotation,{fontColor:e.redoElement.fontColor}),this.modifyInCollections(e.annotation,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(e.annotation,{fontSize:e.redoElement.fontSize}),this.modifyInCollections(e.annotation,"fontSize"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(e.annotation,{textAlign:e.redoElement.textAlign}),this.modifyInCollections(e.annotation,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(e.annotation,{font:e.redoElement.font}),this.modifyInCollections(e.annotation,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(e.annotation.annotations[0],{bounds:e.redoElement.bounds,rotateAngle:e.redoElement.rotateAngle}),this.modifyInCollections(e.annotation.annotations[0],"bounds"),this.pdfViewer.renderDrawing();break;case"FormDesigner Properties Change":e.redoElement&&e.undoElement.isMultiline!==e.redoElement.isMultiline&&this.undoRedoMultiline(e.redoElement),this.updateFormFieldPropertiesChanges(e.redoElement.formFieldAnnotationType,e.redoElement);break;case"FormField Value Change":if(e.annotation.formFieldAnnotationType)"RadioButton"==e.annotation.formFieldAnnotationType?(this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.undoElement,!0),this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.redoElement,!1)):this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.annotation,e.redoElement);else{document.getElementById(e.annotation.id+"_html_element").children[0].children[0].className="e-pdfviewer-signatureformfields-signature",a=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];var b=this.pdfViewer.nameTable[e.annotation.id];if(a.wrapper.children.push(b.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&a.wrapper.children.push(b.wrapper.children[1]),l=e.annotation.id.split("_")[0]+"_content",h=null,this.pdfViewer.formDesignerModule&&(h=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),h){for(d=JSON.parse(h),p=0;p<d.length;p++)if(d[p].Key===l)if("SignatureText"===e.annotation.shapeAnnotationType)d[p].FormField.signatureType="Text",d[p].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[p].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[p].FormField.signatureType="Text";else if("SignatureImage"===e.annotation.shapeAnnotationType)d[p].FormField.signatureType="Image",d[p].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[p].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[p].FormField.signatureType="Image";else{d[p].FormField.signatureType="Path",this.pdfViewerBase.formFieldCollection[p].FormField.signatureType="Path";var S=ia(Cs(e.annotation.data));d[p].FormField.value=JSON.stringify(S),this.pdfViewerBase.formFieldCollection[p].FormField.value=JSON.stringify(S)}this.pdfViewer.add(e.annotation);var I=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(I,e.pageIndex),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}}e.redoElement&&void 0!==e.redoElement.modifiedDate&&(e.annotation.modifiedDate=e.redoElement.modifiedDate),this.actionCollection.push(e),this.updateToolbar(),this.isUndoRedoAction=!1}},s.prototype.undoRedoMultiline=function(e){e.isMultiline&&"Textbox"===e.formFieldAnnotationType?this.pdfViewer.formDesignerModule.renderMultilineText(e,!0):"Textbox"===e.formFieldAnnotationType&&this.pdfViewer.formDesignerModule.renderTextbox(e,!0)},s.prototype.updateFormFieldValueChange=function(e,t,i){if(t){var n=this.pdfViewer.formDesigner.getFormField(t.id.split("_")[0]),r=null;if(this.pdfViewer.formDesignerModule&&(r=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),r){var o=JSON.parse(r),a=this.pdfViewer.formDesigner.getFormFiledIndex(t.id.split("_")[0]);switch(e){case"Textbox":case"PasswordField":case"RadioButton":case"DropdownList":case"ListBox":var l=document.getElementById(t.id.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild;if("Textbox"==e||"PasswordField"==e)n.value=i,this.pdfViewer.formDesigner.updateValuePropertyChange(n,l,!0,a,o);else if("RadioButton"==e)n.isSelected=i,this.pdfViewer.formDesigner.updateIsSelectedPropertyChange(n,l.firstElementChild,!0,a,o);else if("DropdownList"==e||"ListBox"==e)if(n.selectedIndex=i,o[a].FormField.selectedIndex=i,this.pdfViewerBase.formFieldCollection[a].FormField.selectedIndex=i,this.pdfViewer.nameTable[o[a].Key.split("_")[0]].selectedIndex=i,"ListBox"==e)for(var h=0;h<l.options.length;h++)l.options[h].selected=!!i.includes(h);else l.selectedIndex=i;break;case"Checkbox":var d=document.getElementById(t.id.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;n.isChecked=i,this.pdfViewer.formDesigner.updateIsCheckedPropertyChange(n,d,!0,a,o)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}},s.prototype.updateFormFieldPropertiesChanges=function(e,t){switch(e){case"Textbox":case"PasswordField":this.pdfViewer.formDesigner.updateTextboxFormDesignerProperties(t,!0);break;case"Checkbox":this.pdfViewer.formDesigner.updateCheckboxFormDesignerProperties(t,!0);break;case"RadioButton":this.pdfViewer.formDesigner.updateRadioButtonDesignerProperties(t,!0);break;case"DropdownList":this.pdfViewer.formDesigner.updateDropdownFormDesignerProperties(t,!0);break;case"ListBox":this.pdfViewer.formDesigner.updateListBoxFormDesignerProperties(t,!0);break;case"SignatureField":case"InitialField":this.pdfViewer.formDesigner.updateSignatureTextboxProperties(t,!0)}},s.prototype.updateCollectionForLineProperty=function(e){this.modifyInCollections(e,"fill"),this.modifyInCollections(e,"stroke"),this.modifyInCollections(e,"opacity"),this.modifyInCollections(e,"thickness"),this.modifyInCollections(e,"dashArray"),this.modifyInCollections(e,"startArrow"),this.modifyInCollections(e,"endArrow")},s.prototype.updateToolbar=function(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateUndoRedoButtons(),this.pdfViewerBase.updateDocumentEditedProperty(!this.actionCollection||0!=this.actionCollection.length),e&&this.pdfViewerBase.updateDocumentEditedProperty(!0)},s.prototype.createNote=function(){this.popupNote=F("div",{id:this.pdfViewer.element.id+"_annotation_note",className:"e-pv-annotation-note",styles:"display:none"}),this.popupNoteAuthor=F("div",{id:this.pdfViewer.element.id+"_annotation_note_author",className:"e-pv-annotation-note-author"}),this.popupNote.appendChild(this.popupNoteAuthor),this.popupNoteContent=F("div",{id:this.pdfViewer.element.id+"_annotation_note_content",className:"e-pv-annotation-note-content"}),this.popupNote.appendChild(this.popupNoteContent),this.pdfViewerBase.mainContainer.appendChild(this.popupNote)},s.prototype.showPopupNote=function(e,t,i,n,r){var o=this.pdfViewerBase.mainContainer.getBoundingClientRect(),a=this.popupNote.getBoundingClientRect();i&&(this.popupNoteAuthor.textContent=i),this.popupNoteContent.textContent=n,"Highlight"===r?this.popupNote.style.backgroundColor="rgb(237, 232, 177)":"Underline"===r?this.popupNote.style.backgroundColor="rgb(187, 241, 191)":"Strikethrough"===r&&(this.popupNote.style.backgroundColor="rgb(242, 188, 207)"),this.popupNote.style.display="block";var l=e.pageY-o.top+5,h=e.pageX-o.left+5;h+a.width>o.width&&(h-=a.width),l+a.height>o.height&&(l-=a.height),this.popupNote.style.top=l+"px",this.popupNote.style.left=h+"px"},s.prototype.hidePopupNote=function(){this.popupNote&&(this.popupNote.style.display="none")},s.prototype.createTextMarkupPopup=function(){var e=this,t=this.pdfViewer.element.id;this.popupElement=F("div",{id:t+"_popup_annotation_note",className:"e-pv-annotation-popup-menu",styles:"display:none"});var i=F("div",{id:t+"_popup_header",className:"e-pv-annotation-popup-header"});this.authorPopupElement=F("div",{id:t+"_popup_author",className:"e-pv-annotation-popup-author"}),i.appendChild(this.authorPopupElement);var n=F("span",{id:t+"_popup_close",className:"e-pv-annotation-popup-close e-pv-icon"});i.appendChild(n),this.popupElement.appendChild(i),this.modifiedDateElement=F("div",{id:t+"_popup_modified_time",className:"e-pv-annotation-modified-time"}),this.popupElement.appendChild(this.modifiedDateElement);var r=F("div",{id:t+"_popup_content_container",className:"e-pv-annotation-popup-note-container"});this.noteContentElement=F("div",{id:t+"_popup_content",className:"e-pv-annotation-popup-content"}),this.noteContentElement.contentEditable="true",r.appendChild(this.noteContentElement),this.popupElement.appendChild(r),this.pdfViewerBase.viewerContainer.appendChild(this.popupElement),n.addEventListener("click",this.saveClosePopupMenu.bind(this)),n.addEventListener("touchend",this.saveClosePopupMenu.bind(this)),this.popupElement.addEventListener("mousedown",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("mousemove",this.onPopupElementMove.bind(this)),window.addEventListener("mouseup",this.onPopupElementMoveEnd.bind(this)),this.popupElement.addEventListener("touchstart",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("touchmove",this.onPopupElementMove.bind(this)),window.addEventListener("touchend",this.onPopupElementMoveEnd.bind(this)),this.noteContentElement.addEventListener("mousedown",function(){e.noteContentElement.focus()})},s.prototype.onPopupElementMoveStart=function(e){if("touchstart"===e.type&&(e=e.changedTouches[0]),e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0])){this.isPopupMenuMoved=!0;var t=this.popupElement.getBoundingClientRect();this.clientX=e.clientX-t.left,this.clientY=e.clientY-t.top+this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top*this.pdfViewerBase.getZoomFactor()}},s.prototype.onPopupElementMove=function(e){if("touchmove"===e.type&&(e=e.changedTouches[0]),this.isPopupMenuMoved&&(e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0]))){var t=e.clientX-this.clientX+parseFloat(this.popupElement.style.left),i=e.clientY-this.clientY+parseFloat(this.popupElement.style.top);this.clientX=e.clientX,this.clientY=e.clientY;var n=this.popupElement.getBoundingClientRect(),r=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+this.currentAnnotPageNumber);this.popupElement.style.left=t>parseFloat(r.style.left)&&t+n.width<parseFloat(r.style.left)+parseFloat(r.style.width)?t+"px":parseFloat(this.popupElement.style.left)+"px",this.popupElement.style.top=i>parseFloat(r.style.top)&&i+n.height<parseFloat(r.style.top)+parseFloat(r.style.height)?i+"px":parseFloat(this.popupElement.style.top)+"px"}},s.prototype.onPopupElementMoveEnd=function(){this.isPopupMenuMoved=!1},s.prototype.saveClosePopupMenu=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber,this.noteContentElement.innerText),this.closePopupMenu()},s.prototype.closePopupMenu=function(){this.popupElement&&(this.popupElement.parentElement.removeChild(this.popupElement),this.popupElement=null,this.isPopupNoteVisible=!1)},s.prototype.showAnnotationPopup=function(e){if(this.textMarkupAnnotationModule&&(this.currentAnnotPageNumber=this.getEventPageNumber(e),this.textMarkupAnnotationModule&&(e.target!==this.noteContentElement||e.target.contains(this.noteContentElement.childNodes[0]))&&(this.hidePopupNote(),!this.popupElement))){this.createTextMarkupPopup(),this.popupElement.style.display="block",this.authorPopupElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author,this.modifiedDateElement.textContent=this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate),this.noteContentElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;var t=this.popupElement.getBoundingClientRect(),i=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+this.currentAnnotPageNumber),n=i.getBoundingClientRect(),r=e.clientY-n.top+parseFloat(i.style.top),o=e.clientX;this.popupElement.style.left=o+t.width>parseFloat(i.style.left)+parseFloat(i.style.width)?o-t.width+"px":o+"px",this.popupElement.style.top=r+t.height>parseFloat(i.style.top)+parseFloat(i.style.height)?r-t.height+"px":r+"px",this.isPopupNoteVisible=!0}},s.prototype.modifyOpacity=function(e,t){var o,i=this.pdfViewer.selectedItems.annotations[0],n=st(i),r=st(i);i.opacity!==(o=t?e/100:e.value/100)&&(r.opacity=o,this.pdfViewer.nodePropertyChange(i,{opacity:o}),"StickyNotes"===i.shapeAnnotationType?this.stickyNotesAnnotationModule.updateOpacityValue(i):this.modifyInCollections(i,"opacity"),"HandWrittenSignature"===i.shapeAnnotationType||"SignatureImage"===i.shapeAnnotationType||"SignatureText"===i.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(i.pageIndex,i.signatureName,i.shapeAnnotationType,!1,!0,!1,n.opacity,r.opacity):this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"Shape Opacity","",n,r),this.pdfViewer.renderDrawing())},s.prototype.modifyFontColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=st(t),n=st(t);n.fontColor=e,this.pdfViewer.nodePropertyChange(t,{fontColor:e}),this.modifyInCollections(t,"fontColor"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontColor","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyFontFamily=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=st(t),n=st(t);n.fontFamily=e,this.pdfViewer.freeTextSettings.enableAutoFit?this.updateFontFamilyRenderSize(t,e):this.pdfViewer.nodePropertyChange(t,{fontFamily:e}),this.modifyInCollections(t,"fontFamily"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontFamily","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyFontSize=function(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=st(i),r=st(i);r.fontSize=e;var o=this.freeTextAnnotationModule,a=i.bounds.x,l=i.bounds.y;if(i.fontSize=e,o&&!o.isNewFreeTextAnnot&&""!==i.dynamicText){if(o.addInuptElemet({x:a,y:l},i),i){i.previousFontSize>e&&(o.inputBoxElement.style.height="auto",o.inputBoxElement.style.height=t||o.inputBoxElement.scrollHeight+5>i.bounds.height?o.inputBoxElement.scrollHeight+5+"px":i.bounds.height+"px");var h=parseFloat(o.inputBoxElement.style.height),d=parseFloat(o.inputBoxElement.style.width),p=this.pdfViewerBase.getZoomFactor();d/=p;var u=(h/=p)-i.bounds.height,f=void 0;u>0?f=(f=i.wrapper.offsetY+u/2)>0?f:void 0:(u=Math.abs(u),f=(f=i.wrapper.offsetY-u/2)>0?f:void 0);var g=d-i.bounds.width,m=void 0;g>0?m=(m=i.wrapper.offsetX+g/2)>0?m:void 0:(g=Math.abs(g),m=i.wrapper.offsetX-g/2),i.bounds.width=d,i.bounds.height=h,this.pdfViewer.nodePropertyChange(i,{fontSize:e,bounds:{width:i.bounds.width,height:i.bounds.height,y:f,x:m}}),this.pdfViewer.renderSelector(i.pageIndex,this.pdfViewer.annotationSelectorSettings),i.previousFontSize=e}this.modifyInCollections(i,"fontSize"),this.modifyInCollections(i,"bounds"),this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"fontSize","",n,r),this.pdfViewer.renderDrawing()}},s.prototype.modifyTextAlignment=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=st(t),n=st(t);n.textAlign=e,this.pdfViewer.nodePropertyChange(t,{textAlign:e}),this.modifyInCollections(t,"textAlign"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"textAlign","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyTextProperties=function(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=st(i),r=st(i);"bold"===t?r.font.isBold=e.isBold:"italic"===t?r.font.isItalic=e.isItalic:"underline"===t?(r.font.isUnderline=e.isUnderline,r.font.isUnderline&&r.font.isStrikeout&&(r.font.isStrikeout=!1)):"strikeout"===t&&(r.font.isStrikeout=e.isStrikeout,r.font.isUnderline&&r.font.isStrikeout&&(r.font.isUnderline=!1)),this.pdfViewer.nodePropertyChange(i,{font:e}),this.modifyInCollections(i,"textPropertiesChange"),this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"textPropertiesChange","",n,r),this.pdfViewer.renderDrawing()},s.prototype.modifyThickness=function(e){var t=this.pdfViewer.selectedItems.annotations[0];if(t.thickness!==e){var i=st(t),n=st(t);n.thickness=e,this.pdfViewer.nodePropertyChange(t,{thickness:e}),this.modifyInCollections(t,"thickness"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,i.thickness,n.thickness):this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",i,n),this.pdfViewer.renderDrawing()}},s.prototype.modifyStrokeColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=st(t),n=st(t);n.strokeColor=e,this.pdfViewer.nodePropertyChange(t,{strokeColor:e}),this.modifyInCollections(t,"stroke"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,i.strokeColor,n.strokeColor):this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyFillColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=st(t),n=st(t);n.fillColor=e,this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{fillColor:e}),this.modifyInCollections(t,"fill"),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyDynamicTextValue=function(e,t){var i=null;if(i=this.pdfViewer.annotations.filter(function(o){return o.annotName===t})[0]){var n=st(i),r=st(i);i.dynamicText=e,r.dynamicText=e,""===n.dynamicText&&(n.dynamicText=this.freeTextAnnotationModule.previousText),this.pdfViewer.nodePropertyChange(i,{dynamicText:e}),this.pdfViewer.renderSelector(i.pageIndex,i.annotationSelectorSettings),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"dynamicText Change","",n,r),this.modifyInCollections(i,"dynamicText"),!c(this.freeTextAnnotationModule)&&"Type Here"!==this.freeTextAnnotationModule.previousText&&this.freeTextAnnotationModule.previousText!==i.dynamicText&&this.triggerAnnotationPropChange(i,!1,!1,!1,!1,!1,!1,!1,!0,this.freeTextAnnotationModule.previousText,i.dynamicText),this.pdfViewer.renderDrawing()}},s.prototype.modifyInCollections=function(e,t){var i;return""===e.measureType||c(e.measureType)?i="FreeText"===e.shapeAnnotationType?this.freeTextAnnotationModule.modifyInCollection(t,e.pageIndex,e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection(t,e.pageIndex,e):"Stamp"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection(t,e.pageIndex,e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection(t,e.pageIndex,e):this.shapeAnnotationModule.modifyInCollection(t,e.pageIndex,e):("Distance"===e.measureType||"Perimeter"===e.measureType||"Radius"===e.measureType||"Area"===e.measureType||"Volume"===e.measureType)&&(i=this.measureAnnotationModule.modifyInCollection(t,e.pageIndex,e)),this.isUndoRedoAction?(this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),this.isUndoAction&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())):"bounds"!==t&&this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e),i},s.prototype.createPropertiesWindow=function(){var e=this;if(X()){var o=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,a=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes),l=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes),h=void 0;parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3?h="Dashed":"2"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray?h="Dotted":"0"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray&&(h="Solid"),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPropertiesDialog",o,a,l,h)}else{var i=F("div",{id:this.pdfViewer.element.id+"_properties_window",className:"e-pv-properties-window"}),n=this.createAppearanceTab();this.pdfViewerBase.pageContainer.appendChild(i),this.propertiesDialog=new Or({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Line Properties"),target:this.pdfViewer.element,content:n,close:function(){e.destroyPropertiesWindow()}}),this.propertiesDialog.buttons=!E.isDevice||this.pdfViewer.enableDesktopMode?[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)}]:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)}],this.pdfViewer.enableRtl&&(this.propertiesDialog.enableRtl=!0),this.propertiesDialog.appendTo(i),this.pdfViewer.selectedItems.annotations[0]&&"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(document.getElementById(this.pdfViewer.element.id+"_properties_fill_color").disabled=!0),this.startArrowDropDown.content=this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes)).outerHTML,this.endArrowDropDown.content=this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes)).outerHTML,this.thicknessBox.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth,this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,this.refreshColorPicker(this.fillColorPicker),this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,this.refreshColorPicker(this.strokeColorPicker),this.updateColorInIcon(this.fillDropDown.element,this.fillColorPicker.value),this.updateColorInIcon(this.strokeDropDown.element,this.strokeColorPicker.value),this.opacitySlider.value=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,this.updateOpacityIndicator(),parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3?this.lineStyleDropDown.content=this.createDropDownContent("dashed").outerHTML:"2"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray?this.lineStyleDropDown.content=this.createDropDownContent("dotted").outerHTML:"0"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray&&(this.lineStyleDropDown.content=this.createDropDownContent("solid").outerHTML),this.selectedLineStyle=this.pdfViewer.selectedItems.annotations[0].borderStyle,this.selectedLineDashArray=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray,"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.leaderLengthBox.value=this.pdfViewer.selectedItems.annotations[0].leaderHeight)}},s.prototype.updatePropertiesWindowInBlazor=function(){var e=document.querySelector("#"+this.pdfViewer.element.id+"_line_thickness"),t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button"),i=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button"),n=document.querySelector("#"+this.pdfViewer.element.id+"_properties_leader_length");e.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth,t.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,i.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,this.onStrokeColorChange(i.value),this.onFillColorChange(t.value),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(n.value=parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString()))},s.prototype.destroyPropertiesWindow=function(){this.strokeColorPicker&&(this.strokeColorPicker.destroy(),this.strokeColorPicker=null),this.fillColorPicker&&(this.fillColorPicker.destroy(),this.fillColorPicker=null),this.endArrowDropDown&&(this.endArrowDropDown.destroy(),this.endArrowDropDown=null),this.startArrowDropDown&&(this.startArrowDropDown.destroy(),this.startArrowDropDown=null),this.opacitySlider&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.thicknessBox&&(this.thicknessBox.destroy(),this.thicknessBox=null),this.lineStyleDropDown&&(this.lineStyleDropDown.destroy(),this.lineStyleDropDown=null),this.leaderLengthBox&&(this.leaderLengthBox.destroy(),this.leaderLengthBox=null),this.propertiesDialog&&(this.propertiesDialog.destroy(),this.propertiesDialog=null);var e=this.pdfViewerBase.getElement("_properties_window");e&&e.parentElement.removeChild(e)},s.prototype.refreshColorPicker=function(e){e.setProperties({value:e.value},!0),e.refresh()},s.prototype.createAppearanceTab=function(){var e=this,t=this.pdfViewer.element.id,i=[{text:this.pdfViewer.localeObj.getConstant("None")},{text:this.pdfViewer.localeObj.getConstant("Open Arrow")},{text:this.pdfViewer.localeObj.getConstant("Closed Arrow")},{text:this.pdfViewer.localeObj.getConstant("Round Arrow")},{text:this.pdfViewer.localeObj.getConstant("Square Arrow")},{text:this.pdfViewer.localeObj.getConstant("Diamond Arrow")}],n=F("div",{id:t+"_properties_appearance"}),r=F("div",{className:"e-pv-properties-line-style-prop"});n.appendChild(r);var o=this.createInputElement(this.pdfViewer.localeObj.getConstant("Start Arrow"),r,"text","button",!0,"e-pv-properties-line-start",t+"_properties_line_start");this.startArrowDropDown=new Br({items:i,cssClass:"e-pv-properties-line-start",select:this.onStartArrowHeadStyleSelect.bind(this)},o);var a=this.createInputElement(this.pdfViewer.localeObj.getConstant("End Arrow"),r,"text","button",!0,"e-pv-properties-line-end",t+"_properties_line_end"),l=F("div",{className:"e-pv-properties-border-style"});n.appendChild(l),this.endArrowDropDown=new Br({items:i,cssClass:"e-pv-properties-line-end",select:this.onEndArrowHeadStyleSelect.bind(this)},a);var h=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Style"),l,"text","button",!0,"e-pv-properties-line-style",t+"_properties_line_style"),d=this.createStyleList();this.lineStyleDropDown=new Br({cssClass:"e-pv-properties-line-style",target:d},h);var p=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Thickness"),l,"text","input",!0,"e-pv-properties-line-thickness",t+"_properties_thickness");this.thicknessBox=new zr({value:0,format:"## pt",cssClass:"e-pv-properties-line-thickness",min:0,max:12},p);var u=F("div",{className:"e-pv-properties-color-style"});n.appendChild(u);var f=this.createInputElement(this.pdfViewer.localeObj.getConstant("Fill Color"),u,"color","button",!0,"e-pv-properties-line-fill-color",t+"_properties_fill_color");this.fillColorPicker=this.createColorPicker(t+"_properties_fill_color",!0),this.fillColorPicker.change=function(w){var S=""===w.currentValue.hex?"#ffffff00":w.currentValue.hex;e.fillDropDown.toggle(),e.updateColorInIcon(e.fillDropDown.element,S)},this.fillDropDown=this.createDropDownButton(f,"e-pv-properties-fill-color-icon",this.fillColorPicker.element.parentElement),this.fillDropDown.beforeOpen=this.onFillDropDownBeforeOpen.bind(this),this.fillDropDown.open=function(){e.fillColorPicker.refresh()};var g=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Color"),u,"color","button",!0,"e-pv-properties-line-stroke-color",t+"_properties_stroke_color");this.strokeColorPicker=this.createColorPicker(t+"_properties_stroke_color",!1),this.strokeColorPicker.change=function(w){var S=""===w.currentValue.hex?"#ffffff00":w.currentValue.hex;e.strokeDropDown.toggle(),e.updateColorInIcon(e.strokeDropDown.element,S)},this.strokeDropDown=this.createDropDownButton(g,"e-pv-properties-stroke-color-icon",this.strokeColorPicker.element.parentElement),this.strokeDropDown.beforeOpen=this.onStrokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=function(){e.strokeColorPicker.refresh()};var m=F("div",{className:"e-pv-properties-opacity-style"});n.appendChild(m);var y=this.createInputElement(this.pdfViewer.localeObj.getConstant("Opacity"),m,"","div",!0,"e-pv-properties-line-opacity",t+"_properties_opacity");if(this.opacitySlider=new $u({type:"MinRange",max:100,min:0,cssClass:"e-pv-properties-line-opacity",change:function(){e.updateOpacityIndicator()}},y),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var b=this.createInputElement(this.pdfViewer.localeObj.getConstant("Leader Length"),m,"text","input",!0,"e-pv-properties-line-leader-length",t+"_properties_leader_length");this.leaderLengthBox=new zr({value:0,format:"## pt",cssClass:"e-pv-properties-line-leader-length",min:0,max:100},b)}return n},s.prototype.createContent=function(e){var t=F("div",{className:"e-pv-properties-line-style-content"});return t.textContent=e,t},s.prototype.onStrokeDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.annotations.length&&(this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.strokeColorPicker.refresh()},s.prototype.onFillDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.annotations.length&&(this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.fillColorPicker.refresh()},s.prototype.createStyleList=function(){var e=this,t=F("ul");document.body.appendChild(t);var i=this.createListForStyle("solid");i.addEventListener("click",function(){e.setThickness("0","solid")}),t.appendChild(i);var n=this.createListForStyle("dotted");n.addEventListener("click",function(){e.setThickness("2","dotted")}),t.appendChild(n);var r=this.createListForStyle("dashed");return r.addEventListener("click",function(){e.setThickness("3","dashed")}),t.appendChild(r),t},s.prototype.createColorPicker=function(e,t){var i=F("input",{id:e+"_target"});document.body.appendChild(i);var n=new xm({inline:!0,mode:"Palette",enableOpacity:!1,value:"#000000",showButtons:!1,modeSwitcher:!1,noColor:t});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(i),n},s.prototype.createDropDownButton=function(e,t,i){var n=new Br({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(e),n},s.prototype.updateColorInIcon=function(e,t){e.childNodes[0].style.borderBottomColor=t},s.prototype.onFillColorChange=function(e){var t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)},s.prototype.onStrokeColorChange=function(e){var t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)},s.prototype.setThickness=function(e,t,i){i||(this.lineStyleDropDown.content=this.createDropDownContent(t).outerHTML),this.selectedLineDashArray=e,"0"===e?this.selectedLineStyle="Solid":("2"===e||"3"===e)&&(this.selectedLineStyle="Dashed")},s.prototype.createDropDownContent=function(e){var t=F("div",{className:"e-pv-line-styles-content-container"}),i=F("span",{className:"e-pv-line-styles-content",styles:"border-bottom-style:"+e});return t.appendChild(i),t},s.prototype.createListForStyle=function(e){var t=F("li",{className:"e-menu-item"}),i=F("div",{className:"e-pv-line-styles-container"}),n=F("span",{className:"e-pv-line-styles-item",styles:"border-bottom-style:"+e});return i.appendChild(n),t.appendChild(i),t},s.prototype.onStartArrowHeadStyleSelect=function(e){this.startArrowDropDown.content=this.createContent(e.item.text).outerHTML},s.prototype.onEndArrowHeadStyleSelect=function(e){this.endArrowDropDown.content=this.createContent(e.item.text).outerHTML},s.prototype.createInputElement=function(e,t,i,n,r,o,a){var l=F("div",{id:a+"_container",className:o+"-container"});if(r){var h=F("div",{id:a+"_label",className:o+"-label"});h.textContent=e,l.appendChild(h)}this.pdfViewer.localeObj.getConstant("Opacity")===e&&(this.opacityIndicator=F("span",{className:"e-pv-properties-opacity-indicator"}),l.appendChild(this.opacityIndicator));var d=F(n,{id:a});return"input"===n&&(d.type=i),l.appendChild(d),t.appendChild(l),d},s.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=this.opacitySlider.value+"%"},s.prototype.onOkClicked=function(e){var t,i,n,r,o,a;if(X()){var l=document.querySelector("#"+this.pdfViewer.element.id+"_properties_line_start"),h=document.querySelector("#"+this.pdfViewer.element.id+"_properties_line_end"),d=document.querySelector("#"+this.pdfViewer.element.id+"_line_thickness"),p=document.querySelector("#"+this.pdfViewer.element.id+"_properties_style"),u=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button"),f=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button"),g=document.querySelector("#"+this.pdfViewer.element.id+"_properties_opacity");t=this.getArrowTypeFromDropDown(l.value,!0),i=this.getArrowTypeFromDropDown(h.value,!0),n=parseInt(d.value),r=""===(r=this.getValue(f.children[0].style.borderBottomColor,"hex"))?"#ffffff00":r,o=""===(o=this.getValue(u.children[0].style.borderBottomColor,"hex"))?"#ffffff00":o,a=e?e/100:g.value/100,p.value&&("Solid"===p.value?this.setThickness("0","solid",!0):"Dotted"===p.value?this.setThickness("2","dotted",!0):"Dashed"===p.value&&this.setThickness("3","dashed",!0))}else t=this.getArrowTypeFromDropDown(this.startArrowDropDown.content),i=this.getArrowTypeFromDropDown(this.endArrowDropDown.content),n=this.thicknessBox.value,r=""===(r=this.strokeColorPicker.getValue(this.strokeColorPicker.value,"hex"))?"#ffffff00":r,o=""===(o=this.fillColorPicker.getValue(this.fillColorPicker.value,"hex"))||"#transp"===o||"#ffffff00"===this.fillColorPicker.value?"#ffffff00":o,a=this.opacitySlider.value/100;var m=this.pdfViewer.selectedItems.annotations[0],y=st(m),b=st(m),w={},S=!1,I=!1,x=!1,T=!1,L=!1,N=!1,O=!1;if(t!==m.sourceDecoraterShapes&&(w.sourceDecoraterShapes=t,b.lineHeadStart=this.getArrowString(t),L=!0),i!==m.taregetDecoraterShapes&&(w.taregetDecoraterShapes=i,b.lineHeadEnd=this.getArrowString(i),N=!0),n!==m.wrapper.children[0].style.strokeWidth&&(w.thickness=n,b.thickness=n,x=!0),r!==m.wrapper.children[0].style.strokeColor&&(w.strokeColor=r,b.strokeColor=r,I=!0),o!==m.wrapper.children[0].style.fill&&(w.fillColor=o,b.fillColor=o,S=!0),a!==m.wrapper.children[0].style.opacity&&(w.opacity=a,b.opacity=a,T=!0),this.selectedLineDashArray!==m.wrapper.children[0].style.strokeDashArray&&(w.borderDashArray=this.selectedLineDashArray,w.borderStyle=this.selectedLineStyle,b.borderDashArray=w.borderDashArray,b.borderStyle=w.borderStyle,O=!0),X()){var _=document.querySelector("#"+this.pdfViewer.element.id+"_properties_leader_length");"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&parseInt(_.value)!==this.pdfViewer.selectedItems.annotations[0].leaderHeight&&(w.leaderHeight=parseInt(_.value))}else"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.leaderLengthBox.value!==this.pdfViewer.selectedItems.annotations[0].leaderHeight&&(w.leaderHeight=this.leaderLengthBox.value);this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],w),this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill=o,this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0],S,I,x,T,L,N,O),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"thickness"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"stroke"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"fill"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"opacity"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"dashArray"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"startArrow"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"endArrow"),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"leaderLength"),this.pdfViewer.annotation.addAction(m.pageIndex,null,m,"Line properties change","",y,b),this.renderAnnotations(m.pageIndex,null,null,null),X()||this.propertiesDialog.hide()},s.prototype.onCancelClicked=function(){this.propertiesDialog.hide()},s.prototype.getArrowTypeFromDropDown=function(e,t){t||(e=e.split("</div>")[0].split('">')[1]);var i="None";switch(e){case this.pdfViewer.localeObj.getConstant("None"):i="None";break;case this.pdfViewer.localeObj.getConstant("Open Arrow"):i="OpenArrow";break;case this.pdfViewer.localeObj.getConstant("Closed Arrow"):i="Arrow";break;case this.pdfViewer.localeObj.getConstant("Round Arrow"):i="Circle";break;case this.pdfViewer.localeObj.getConstant("Square Arrow"):i="Square";break;case this.pdfViewer.localeObj.getConstant("Diamond Arrow"):i="Diamond";break;case this.pdfViewer.localeObj.getConstant("Butt"):i="Butt"}return i},s.prototype.getArrowString=function(e){var t=this.pdfViewer.localeObj.getConstant("None");switch(e){case"Arrow":t=this.pdfViewer.localeObj.getConstant("Closed");break;case"OpenArrow":t=this.pdfViewer.localeObj.getConstant("Open Arrow");break;case"Circle":t=this.pdfViewer.localeObj.getConstant("Round");break;case"None":case"Square":case"Diamond":t=this.pdfViewer.localeObj.getConstant(e);break;case"Butt":t=this.pdfViewer.localeObj.getConstant("Butt")}return t},s.prototype.onAnnotationMouseUp=function(){0!==this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0),E.isDevice||this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems()),this.pdfViewerBase.disableTextSelectionMode()):(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isPanMode&&!this.pdfViewer.designerMode&&this.pdfViewer.textSelectionModule.enableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&!this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected&&(this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1),this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!1)),this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!1)))},s.prototype.onShapesMouseup=function(e,t){if(e=c(this.pdfViewer.selectedItems.annotations[0])?e:this.pdfViewer.selectedItems.annotations[0]){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null),(this.pdfViewerBase.tool instanceof ec||this.pdfViewerBase.tool instanceof $s)&&!this.pdfViewerBase.tool.dragging){var i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};this.getAnnotationIndex(e.pageIndex,e.id),this.pdfViewerBase.tool instanceof $s&&(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),(!this.pdfViewerBase.isAnnotationAdded||"Distance"===e.measureType)&&(""===e.measureType||c(e.measureType)?this.shapeAnnotationModule.renderShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t)):("Distance"===e.measureType||"Perimeter"===e.measureType||"Radius"===e.measureType)&&this.measureAnnotationModule.renderMeasureShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t))),this.pdfViewerBase.updateDocumentEditedProperty(!0)}else this.pdfViewerBase.tool instanceof oy||this.pdfViewerBase.tool instanceof IS?(this.pdfViewerBase.updateDocumentEditedProperty(!0),""===e.measureType||c(e.measureType)?"FreeText"===e.shapeAnnotationType?this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):("Distance"===e.measureType||"Perimeter"===e.measureType||"Radius"===e.measureType||"Area"===e.measureType||"Volume"===e.measureType)&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewerBase.tool instanceof IS&&(e.formFieldAnnotationType||this.triggerAnnotationResize(e)),this.pdfViewerBase.tool instanceof oy&&"Select"!==this.pdfViewerBase.action&&(e.formFieldAnnotationType||this.triggerAnnotationMove(e))):this.pdfViewerBase.tool instanceof LE&&(this.pdfViewerBase.updateDocumentEditedProperty(!0),""===e.measureType||c(e.measureType)?("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType)&&this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):("Distance"===e.measureType||"Perimeter"===e.measureType||"Area"===e.measureType||"Volume"===e.measureType)&&("Distance"===e.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("leaderLength",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e)),this.triggerAnnotationResize(e));if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&("HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType)&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode(),""===e.measureType||c(e.measureType)?this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode():("Distance"===e.measureType||"Perimeter"===e.measureType||"Area"===e.measureType||"Volume"===e.measureType||"Radius"===e.measureType)&&this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(!0),!X()&&1===this.pdfViewer.selectedItems.annotations.length&&!this.pdfViewer.designerMode)){if(this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker(),this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.formDesignerModule||""==e.properties.id||null==e.properties.id||"sign"==e.properties.id.slice(0,4))this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);else{var o=document.getElementById(e.properties.id),a=o&&o.disabled;a?this.pdfViewer.annotation&&a&&this.pdfViewer.annotation.clearSelection():this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)}this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible&&(document.getElementById(this.pdfViewer.element.id+"_formdesigner_toolbar").style.display="none",this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.formDesignerToolbarModule.isToolbarHidden=!1,this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem),this.pdfViewer.toolbarModule.annotationToolbarModule.adjustViewer(!0)))}}},s.prototype.updateCalibrateValues=function(e,t){"Distance"===e.measureType?(e.notes=function gAe(s,e,t){for(var i,n=0;n<s.wrapper.children.length;n++){var r=s.wrapper.children[parseInt(n.toString(),10)];r&&!c(r.content)&&(i=t.setConversion(EE([e[0],e[1]])*t.pixelToPointFactor,s),r.content=i,r.childNodes[0].text=r.content,r.refreshTextElement())}return i}(e,e.vertexPoints,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Radius"===e.measureType?(e.notes=function mAe(s,e){for(var t,i=0;i<s.wrapper.children.length;i++){var n=s.wrapper.children[parseInt(i.toString(),10)];n&&!c(n.content)&&(t=e.setConversion(s.bounds.width/2*e.pixelToPointFactor,s),n.content=t,2===n.childNodes.length?(n.childNodes[0].text=t,n.childNodes.splice(n.childNodes.length-1,1)):n.childNodes[0].text=t,n.refreshTextElement())}return t}(e,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Perimeter"===e.measureType?(e.notes=BK(e,0,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Area"===e.measureType?(e.notes=this.measureAnnotationModule.calculateArea(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,zK(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Volume"===e.measureType&&(e.notes=this.measureAnnotationModule.calculateVolume(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,zK(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null))},s.prototype.onAnnotationMouseDown=function(){if(1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){if(!X()&&E.isDevice&&!this.pdfViewer.enableDesktopMode&&"none"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display)if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools("");else if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile(),this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);var t=document.getElementById(this.pdfViewer.element.id+"_annotationIcon");t&&!t.parentElement.classList.contains("e-pv-select")&&t.parentElement.classList.add("e-pv-select")}this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0)}},s.prototype.enableBasedOnType=function(){var e=!1,t=this.pdfViewer.selectedItems.annotations[0];t&&t.annotationSettings&&(e=t.annotationSettings.isLock)&&this.checkAllowedInteractions("PropertyChange",t)&&(e=!1),!E.isDevice||this.pdfViewer.enableDesktopMode?e||("Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(!0):"Path"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1):"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!0):"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0):1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!0)):!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&"annotations"!==this.pdfViewer.selectedItems.annotations[0].propName&&E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(!0,!0)},s.prototype.getProperDate=function(e){var t=new Date(e.toString());if(isNaN(t.getFullYear())){var i=e.slice(2,16);i=i.slice(0,4)+"/"+i.slice(4,6)+"/"+i.slice(6,8)+" "+i.slice(8,10)+":"+i.slice(10,12)+":"+i.slice(12,14),t=new Date(i)}return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},s.prototype.getPageCollection=function(e,t){for(var i=null,n=0;n<e.length;n++)if(e[n].pageIndex===t){i=n;break}return i},s.prototype.getAnnotationWithId=function(e,t){for(var i,n=0;n<e.length;n++)t===e[n].id&&(i=e[n]);return i},s.prototype.getEventPageNumber=function(e){var n,t=e.target,i=e.target.parentElement;return t.classList.contains("e-pv-hyperlink")?t=i:i&&i.classList.contains("foreign-object")&&i.parentElement&&i.parentElement.parentElement&&i.parentElement.parentElement.parentElement?t=i.parentElement.parentElement.parentElement:t.classList.contains("e-pdfviewer-formFields")&&(t=i),t&&(n=t.id.split("_text_")[1]||t.id.split("_textLayer_")[1]||t.id.split("_annotationCanvas_")[1]||t.id.split("_pageDiv_")[1]),isNaN(n)&&(e=this.pdfViewerBase.annotationEvent)&&(n=(t=e.target).id.split("_text_")[1]||t.id.split("_textLayer_")[1]||t.id.split("_annotationCanvas_")[1]||t.id.split("_pageDiv_")[1]),parseInt(n)},s.prototype.getAnnotationComments=function(e,t,i){var n=[];if(e&&e.length>0)for(var o=0;o<e.length;o++){var a=e[o];n[n.length]={shapeAnnotationType:"sticky",author:a.Author,modifiedDate:a.ModifiedDate,note:a.Note,state:a.state,stateModel:a.stateModel,comments:[],review:{state:a.State,stateModel:a.StateModel,modifiedDate:a.ModifiedDate,author:a.Author},annotName:a.AnnotName,parentId:t.AnnotName,subject:"Comments",isLock:a.IsLock}}return n},s.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return(16*Math.random()|0).toString(16)})},s.prototype.createGUID=function(){return this.getRandomNumber()},s.prototype.createAnnotationLayer=function(e,t,i,n,r){var o=this.pdfViewerBase.getElement("_annotationCanvas_"+n);if(o)return this.updateCanvas(o,t,i,n),o;var a=F("canvas",{id:this.pdfViewer.element.id+"_annotationCanvas_"+n,className:"e-pv-annotation-canvas"});return this.updateCanvas(a,t,i,n),e.appendChild(a),a},s.prototype.resizeAnnotations=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i);n&&(n.style.width=e+"px",n.style.height=t+"px",this.pdfViewerBase.applyElementStyles(n,i))},s.prototype.clearAnnotationCanvas=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getZoomRatio(i);if(t){var r=this.pdfViewerBase.pageSize[e].width,o=this.pdfViewerBase.pageSize[e].height;t.width=r*n,t.height=o*n,t.style.width=r*i+"px",t.style.height=o*i+"px"}},s.prototype.renderAnnotations=function(e,t,i,n,r,o,a){this.clearAnnotationCanvas(e),this.shapeAnnotationModule&&(o?this.shapeAnnotationModule.renderShapeAnnotations(t,e,!0):this.shapeAnnotationModule.renderShapeAnnotations(t,e,null,a)),this.measureAnnotationModule&&(o?this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e,!0):this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e,null,a)),null!=r||(r=this.pdfViewerBase.getElement("_annotationCanvas_"+e)),this.pdfViewer.drawing.refreshCanvasDiagramLayer(r,e),this.textMarkupAnnotationModule&&(o?this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e,!0):this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e))},s.prototype.storeAnnotations=function(e,t,i){Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500&&(this.clearAnnotationStorage(),this.pdfViewerBase.isStorageExceed=!0,this.pdfViewerBase.isFormStorageExceed||this.pdfViewer.formFieldsModule.clearFormFieldStorage());var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]);var o=0;if(r){this.storeAnnotationCollections(t,e);var d=JSON.parse(r);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+i);var p=this.pdfViewer.annotationModule.getPageCollection(d,e);if(d[p])d[p].annotations.filter(function(g,m){g.annotName===t.annotName&&d[p].annotations.splice(m,1)}),d[p].annotations.push(t),o=d[p].annotations.indexOf(t);else{var u={pageIndex:e,annotations:[]};u.annotations.push(t),o=u.annotations.indexOf(t),d.push(u)}var h=JSON.stringify(d);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}else{this.storeAnnotationCollections(t,e);var a={pageIndex:e,annotations:[]};a.annotations.push(t),o=a.annotations.indexOf(t);var l=[];l.push(a),h=JSON.stringify(l),this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}return o},s.prototype.getArrowType=function(e){var t="None";switch(e){case"ClosedArrow":case"Closed":t="Arrow";break;case"OpenArrow":case"Open":t="OpenArrow";break;case"Square":t="Square";break;case"Circle":case"Round":t="Circle";break;case"Diamond":t="Diamond";break;case"Butt":t="Butt"}return t},s.prototype.getArrowTypeForCollection=function(e){var t;switch(e){case"Arrow":t="ClosedArrow";break;case"OpenArrow":case"Square":case"Circle":case"Diamond":case"None":t=e.toString();break;case"Butt":t="Butt"}return t},s.prototype.getBounds=function(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{left:e.top,top:i.width-(e.left+e.width),width:e.height,height:e.width}:2===i.rotation?{left:i.width-e.left-e.width,top:i.height-e.top-e.height,width:e.width,height:e.height}:3===i.rotation?{left:i.height-e.top-e.height,top:e.left,width:e.height,height:e.width}:e:e},s.prototype.getInkBounds=function(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{x:e.y,y:i.width-(e.x+e.width),width:e.height,height:e.width}:2===i.rotation?{x:i.width-e.x-e.width,y:i.height-e.y-e.height,width:e.width,height:e.height}:3===i.rotation?{x:i.height-e.y-e.height,y:e.x,width:e.height,height:e.width}:e:e},s.prototype.getVertexPoints=function(e,t){if(e){var i=this.pdfViewerBase.pageSize[t];if(1===i.rotation){for(var n=[],r=0;r<e.length;r++)n.push({x:e[r].y,y:i.width-e[r].x});return n}if(2===i.rotation){var a=[];for(r=0;r<e.length;r++)a.push({x:i.width-e[r].x,y:i.height-e[r].y});return a}if(3===i.rotation){var l=[];for(r=0;r<e.length;r++)l.push({x:i.height-e[r].y,y:e[r].x});return l}return e}},s.prototype.getStoredAnnotations=function(e,t,i){var n,r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),r){var o=JSON.parse(r),a=this.pdfViewer.annotationModule.getPageCollection(o,e);n=o[a]?o[a].annotations:null}else n=null;return n},s.prototype.triggerAnnotationPropChange=function(e,t,i,n,r,o,a,l,h,d,p){this.getAnnotationIndex(e.pageIndex,e.id);var f=this.getAnnotationType(e.shapeAnnotationType,e.measureType),g={name:"annotationPropertiesChange",pageIndex:e.pageIndex,annotationId:e.annotName,annotationType:f,isColorChanged:t,isOpacityChanged:r,isThicknessChanged:n,isStrokeColorChanged:i};h&&(g.isFreeTextChanged=h,g.previousText=d,g.currentText=p),o&&(g.isLineHeadStartStyleChanged=o),a&&(g.isLineHeadEndStyleChanged=a),l&&(g.isBorderDashArrayChanged=l),this.pdfViewer.trigger("annotationPropertiesChange",g)},s.prototype.triggerAnnotationAdd=function(e){var t={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},i={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,width:e.wrapper.bounds.width,height:e.wrapper.bounds.height},n=this.getAnnotationType(e.shapeAnnotationType,e.measureType);("Line"===n||"Arrow"===n||"Distance"===n||"Perimeter"===n)&&(t.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),t.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),t.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel?this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,n,i,t,null,null,null,{fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor}):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,n,i,t)},s.prototype.triggerAnnotationResize=function(e){var t={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n=(this.getAnnotationIndex(e.pageIndex,e.id),e.bounds),r={left:n.x,top:n.y,x:n.x,y:n.y,width:n.width,height:n.height},o={left:n.oldProperties.x,top:n.oldProperties.y,width:n.oldProperties.width,height:n.oldProperties.height},a=this.getAnnotationType(e.shapeAnnotationType,e.measureType);("Line"===a||"Arrow"===a||"Distance"===a||"Perimeter"===a)&&(t.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),t.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),t.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel&&"HandWrittenSignature"!==e.shapeAnnotationType?this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,a,r,t,null,null,null,{fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor,notes:e.notes}):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureResize(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,r,o):this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,a,r,t)},s.prototype.triggerAnnotationMove=function(e,t){var i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n=e.bounds,r={left:n.x,top:n.y,x:n.x,y:n.y,width:n.width,height:n.height},o={left:n.oldProperties.x?n.oldProperties.x:n.x,top:n.oldProperties.y?n.oldProperties.y:n.y,width:n.width,height:n.height},a=this.getAnnotationType(e.shapeAnnotationType,e.measureType);("Line"===a||"Arrow"===a||"Distance"===a||"Perimeter"===a)&&(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureMove(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,o,r):t?this.pdfViewer.fireAnnotationMoving(e.pageIndex,e.annotName,a,i,o,r):this.pdfViewer.fireAnnotationMove(e.pageIndex,e.annotName,a,i,o,r)},s.prototype.annotationSelect=function(e,t,i,n,r,o){var a;"textMarkup"===i.shapeAnnotationType?a={type:"TextMarkup",subType:i.subject,opacity:i.opacity,color:i.color,textMarkupContent:i.textMarkupContent,textMarkupStartIndex:i.textMarkupStartIndex,textMarkupEndIndex:i.textMarkupEndIndex,customData:i.customData}:"StickyNotes"===i.shapeAnnotationType?a={type:"StickyNotes",opacity:i.opacity,customData:i.customData}:"Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType?a={type:"Stamp",opacity:i.opacity,customData:i.customData}:"Ink"===i.shapeAnnotationType?a={type:"Ink",opacity:i.opacity,strokeColor:i.strokeColor,thickness:i.thickness,modifiedDate:i.modifiedDate,width:i.bounds.width,height:i.bounds.height,left:i.bounds.x,top:i.bounds.y,data:i.data,customData:i.customData}:"FreeText"===i.shapeAnnotationType?a={type:"FreeText",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,content:i.dynamicText,fontFamily:i.fontFamily,fontSize:i.fontSize,fontColor:i.fontColor,textAlign:i.textAlign,fontStyle:this.updateFreeTextFontStyle(i.font),customData:i.customData}:""===i.measureType?"Line"===i.shapeAnnotationType?a={type:"Shape",subType:"Line",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Arrow"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType?a={type:"Shape",subType:"Arrow",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Rectangle"===i.shapeAnnotationType?a={type:"Shape",subType:"Rectangle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Circle"===i.shapeAnnotationType||"Ellipse"===i.shapeAnnotationType?a={type:"Shape",subType:"Circle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Polygon"===i.shapeAnnotationType&&(a={type:"Shape",subType:"Polygon",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}):""!==i.measureType&&("Distance"===i.measureType?a={type:"Measure",subType:"Distance",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Perimeter"===i.measureType?a={type:"Measure",subType:"Perimeter",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Area"===i.measureType?a={type:"Measure",subType:"Area",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Radius"===i.measureType?a={type:"Measure",subType:"Radius",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Volume"===i.measureType&&(a={type:"Measure",subType:"Volume",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,calibrate:i.calibrate,annotationId:i.annotName,customData:i.customData}));var l=[],h=this.getOverlappedAnnotations(i,t);if(h&&this.overlappedCollections){for(var d=[],p=0;p<h.length;p++)if("textMarkup"!==h[p].shapeAnnotationType&&this.overlappedCollections||o){for(var u=0;u<this.overlappedCollections.length;u++)if(h[p].annotName===this.overlappedCollections[u].annotName){d.push(h[p]);break}}else d.push(h[p]);h=d}if(this.pdfViewer.enableMultiLineOverlap)for(p=0;p<h.length;p++)if("textMarkup"===h[p].shapeAnnotationType){var f=!1;for(u=0;u<h[p].bounds.length;u++){var g=this.orderTextMarkupBounds(h[p].bounds[u]),m=this.textMarkupAnnotationModule.annotationClickPosition;m&&(m.x||m.y)?g.left<=m.x&&g.left+g.width>=m.x&&g.top<=m.y&&g.top+g.height>=m.y&&(f=!0):f=!0}f||h.splice(p,1)}if(h&&h.length>0)for(n=h,p=0;p<n.length;p++){var y=st(n[p]);y.annotationId=n[p].annotName,e===n[p].annotName&&i.measureType&&"Volume"===i.measureType&&(a.calibrate=n[p].calibrate),delete y.annotName,l.push(y)}else l=null;this.addFreeTextProperties(i,a);var b=i.annotationAddMode;if(r)("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)&&this.pdfViewerBase.isNewStamp||this.pdfViewer.fireAnnotationDoubleClick(e,t,a);else if("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)!this.pdfViewerBase.isNewStamp&&this.annotationSelected&&this.pdfViewer.fireAnnotationSelect(e,t,a,l||null,null,null,b);else{var w=this.textMarkupAnnotationModule,S=w&&w.multiPageCollectionList(i);S&&0===S.length&&(S=null),this.annotationSelected&&(l?this.pdfViewer.fireAnnotationSelect(e,t,a,l,S,o=!1,b):this.pdfViewer.fireAnnotationSelect(e,t,a,null,S,o=!0,b))}this.annotationSelected=!0},s.prototype.selectSignature=function(e,t,i){var n=i.bounds;this.pdfViewerBase.signatureAdded||this.pdfViewer.fireSignatureSelect(e,t,{bounds:{height:n.height,width:n.width,x:n.x,y:n.y},opacity:i.opacity,thickness:i.thickness,strokeColor:i.strokeColor})},s.prototype.editSignature=function(e){var t,i=(t=e.uniqueKey?this.pdfViewer.nameTable[e.uniqueKey]:this.pdfViewer.selectedItems.annotations[0]).pageIndex;if("HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType){var n=st(t),r=st(t);t.opacity!==e.opacity&&(r.opacity=e.opacity,this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!0,!1,n.opacity,r.opacity),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Opacity","",n,r)),t.strokeColor!==e.strokeColor&&(r.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,n.strokeColor,r.strokeColor),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",n,r)),t.thickness!==e.thickness&&(r.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,n.thickness,r.thickness),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",n,r)),t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.renderDrawing(),this.pdfViewerBase.signatureModule.modifySignatureCollection(null,i,t,!0)}},s.prototype.deletComment=function(e){e.parentElement.firstChild===e?this.deleteAnnotation():this.pdfViewer.annotationModule.stickyNotesAnnotationModule.modifyCommentDeleteProperty(e.parentElement,e)},s.prototype.addReplyComments=function(e,t,i){if("add"===i){var n=document.getElementById(e.annotName);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentDiv(n);for(var r=0;r<t.length;r++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(n,t[r])}else"next"===i&&(n=document.getElementById(e.annotationId),this.selectAnnotation(e),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(n,t))},s.prototype.editComments=function(e,t){document.getElementById(e).childNodes[1].ej2_instances[0].value=t},s.prototype.editAnnotation=function(e){var t,i,n,r,o=!1;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(i=(t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation).annotName,r=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage):this.pdfViewer.selectedItems.annotations[0]&&(i=(t=this.pdfViewer.selectedItems.annotations[0]).annotName,r=t.pageIndex),void 0!==e.uniqueKey){if((t=this.pdfViewer.nameTable[e.uniqueKey]).annotationSettings.isLock=e.annotationSettings.isLock,i=t.annotName,r=t.pageIndex,X()&&e.allowedInteractions)for(var a=e.allowedInteractions.length,l=0;l<a;l++)0===e.allowedInteractions[l]&&(e.allowedInteractions[l]=tc.Select),1===e.allowedInteractions[l]&&(e.allowedInteractions[l]=tc.Move),2===e.allowedInteractions[l]&&(e.allowedInteractions[l]=tc.Resize),3===e.allowedInteractions[l]&&(e.allowedInteractions[l]=tc.Delete),4===e.allowedInteractions[l]&&(e.allowedInteractions[l]=tc.PropertyChange),5===e.allowedInteractions[l]&&(e.allowedInteractions[l]=tc.None);t.allowedInteractions=e.allowedInteractions?e.allowedInteractions:this.updateAnnotationAllowedInteractions(e)}if(t||"sticky"===e.shapeAnnotationType&&void 0!==e.annotationId&&((t=this.pdfViewer.nameTable[e.annotationId]).annotationSettings.isLock=e.annotationSettings.isLock,i=t.annotName,r=t.pageIndex),"textMarkup"===e.shapeAnnotationType&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)for(t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(e.pageNumber,e),l=0;l<t.length;l++)if(e.annotationId===t[l].annotName){o=!0,(t=t[l]).isPrint=e.isPrint,this.textMarkupAnnotationModule.currentTextMarkupAnnotation=t,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=t.pageNumber,t.allowedInteractions=e.allowedInteractions,r=t.pageNumber,i=e.annotationId;break}if(t){var h=st(t),d=st(t);if("textMarkup"===e.shapeAnnotationType&&(n="textMarkup"),e&&!0===e.isCommentLock&&(t.isCommentLock=e.isCommentLock),e.comments)for(var p=0;p<e.comments.length;p++)!0===e.comments[p].isLock&&(n?(t.comments=e.comments,t.comments[p].isLock=e.comments[p].isLock):(t.properties.comments=e.comments,t.properties.comments[p].isLock=e.comments[p].isLock));if(e&&""!==e.note&&void 0!==e.note?n?(t.note=e.note,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.note)):(t.notes=e.note,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.notes)):e&&e.isCommentLock&&(e.type&&"FreeText"!==e.type||"FreeText"!==e.shapeAnnotationType)&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,"  "),e.commentId&&e.editComment&&"edit"===e.commentType&&this.editComments(e.commentId,e.editComment),e.replyComment&&"add"===e.commentType&&(this.addReplyComments(t,e.replyComment,e.commentType),this.pdfViewer.annotationCollection[0].note=e.note),e.nextComment&&"next"===e.commentType&&this.addReplyComments(e,e.nextComment,e.commentType),""===e.note&&"delete"===e.commentType){var u=document.getElementById(e.annotationId);this.deletComment(u)}if(e.comments)for(var f=0;f<e.comments.length;f++)""===e.comments[f].note&&"delete"===e.commentType&&(u=document.getElementById(e.comments[f].annotName),this.deletComment(u));if("TextMarkup"===e.type||"textMarkup"===e.shapeAnnotationType){if(t.annotationSettings&&e.annotationSettings&&t.annotationSettings.isLock!==e.annotationSettings.isLock){var g=this.textMarkupAnnotationModule.modifyAnnotationProperty("AnnotationSettings",e.annotationSettings.isLock,null);this.textMarkupAnnotationModule.manageAnnotations(g,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)}t.opacity!==e.opacity&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,e.opacity),t.color!==e.color&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(e.color),n="textMarkup",o&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null)}else if(e&&"image"===e.stampAnnotationType&&"stamp"===e.shapeAnnotationType&&e.stampAnnotationPath)n="stamp",t.data!==e.stampAnnotationPath&&(t.data=e.stampAnnotationPath,t.wrapper.children[0].imageSource=e.stampAnnotationPath),e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",h,d),this.calculateAnnotationBounds(t,e);else if("StickyNotes"===e.type||"Stamp"===e.type||"sticky"===e.shapeAnnotationType||"stamp"===e.shapeAnnotationType)e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",h,d),this.calculateAnnotationBounds(t,e),n="StickyNotes"===e.type||"sticky"===e.shapeAnnotationType?"sticky":"stamp";else if("Ink"===e.type||"Shape"===e.type||"Measure"===e.type||"Line"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType||"Circle"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType||"Polyline"===e.shapeAnnotationType||"Ink"===e.shapeAnnotationType){if(this.calculateAnnotationBounds(t,e),e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",h,d),e.fillColor&&t.fillColor!==e.fillColor&&(d.fillColor=e.fillColor,e.labelSettings&&e.labelSettings.fillColor&&(e.labelSettings.fillColor=e.fillColor),this.pdfViewer.nodePropertyChange(t,{fillColor:e.fillColor}),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",h,d)),e.strokeColor&&t.strokeColor!==e.strokeColor&&(d.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",h,d)),e.thickness&&t.thickness!==e.thickness&&(d.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",h,d)),t.author!==e.author&&(d.author=e.author,this.pdfViewer.nodePropertyChange(t,{author:e.author}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1)),t.modifiedDate!==e.modifiedDate&&(d.modifiedDate=e.modifiedDate,this.pdfViewer.nodePropertyChange(t,{modifiedDate:e.modifiedDate})),t.subject!==e.subject&&(d.subject=e.subject,this.pdfViewer.nodePropertyChange(t,{subject:e.subject}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",h,d)),this.pdfViewer.enableShapeLabel&&t.fontColor!==e.fontColor&&(d.fontColor=e.fontColor,this.pdfViewer.nodePropertyChange(t,{fontColor:e.fontColor})),this.pdfViewer.enableShapeLabel&&e.labelSettings&&e.labelSettings.fillColor&&t.labelFillColor!==e.labelSettings.fillColor&&(d.labelFillColor=e.labelSettings.fillColor,this.pdfViewer.nodePropertyChange(t,{labelFillColor:e.labelSettings.fillColor})),("Line"===e.shapeAnnotationType||"Polyline"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType)&&JSON.stringify(t.vertexPoints)!==JSON.stringify(e.vertexPoints)&&(t.vertexPoints=e.vertexPoints,this.pdfViewer.nodePropertyChange(t,{vertexPoints:e.vertexPoints})),"Line"===e.subType||"Arrow"===e.subType||"Distance"===e.subType||"Perimeter"===e.subType){var m=!1,y=!1,b=!1;h.lineHeadStart=t.sourceDecoraterShapes,h.lineHeadEnd=t.taregetDecoraterShapes,d.lineHeadStart=e.lineHeadStartStyle,d.lineHeadEnd=e.lineHeadEndStyle,d.borderDashArray=e.borderDashArray,t.taregetDecoraterShapes!==e.lineHeadEndStyle&&(y=!0),t.sourceDecoraterShapes!==e.lineHeadStartStyle&&(m=!0),t.borderDashArray!==e.borderDashArray&&(b=!0),this.pdfViewer.nodePropertyChange(t,{sourceDecoraterShapes:e.lineHeadStartStyle,taregetDecoraterShapes:e.lineHeadEndStyle,borderDashArray:e.borderDashArray}),this.triggerAnnotationPropChange(t,!1,!1,!1,!1,m,y,b),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Line properties change","",h,d)}("Shape"===e.type||"Line"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType||"Circle"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType)&&(n="shape"),("Ink"===e.type||"Ink"===e.shapeAnnotationType)&&(n="ink"),("Measure"===e.type||"Distance calculation"===e.subject||"Perimeter calculation"===e.subject||"Radius calculation"===e.subject||"Area calculation"===e.subject||"Volume calculation"===e.subject)&&(n="shape_measure"),e.labelSettings&&this.pdfViewer.enableShapeLabel&&(this.updateFreeTextProperties(t),this.pdfViewer.nodePropertyChange(t,{labelOpacity:e.labelSettings.opacity,fontColor:e.labelSettings.fontColor,fontSize:e.labelSettings.fontSize,fontFamily:e.labelSettings.fontFamily,labelContent:t.notes,labelFillColor:e.labelSettings.fillColor})),this.pdfViewer.enableShapeLabel&&e.calibrate&&e.calibrate.depth&&this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth!==e.calibrate.depth&&(this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=e.calibrate.depth,t.notes=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(t.vertexPoints,t.id,t.pageIndex),t.labelContent=t.notes,e.labelSettings&&e.labelSettings.labelContent&&(e.labelSettings.labelContent=t.notes),this.pdfViewer.nodePropertyChange(t,{labelContent:t.labelContent}),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.notes))}else if("FreeText"===e.type||"FreeText"===e.shapeAnnotationType){if(n="freetext",this.pdfViewer.freeTextSettings.enableAutoFit&&t.dynamicText!==e.content){var S=this.pdfViewerBase.getElement("_annotationCanvas_"+t.pageIndex).getContext("2d"),I=e.fontSize,T=e.fontFamily,L=this.pdfViewerBase.getZoomFactor();S.font=e.font.isBold?"bold "+I+"px "+T:I+"px "+T;var O="",_=[],B=e.content?e.content:e.dynamicText;if(B.indexOf("\n")>-1){_=B.split("\n");for(var q=0;q<_.length;q++){var W=S.measureText(_[q]),j=S.measureText(O);W.width>j.width&&(O=_[q])}}else O=B;var G=S.measureText(O);e.bounds.width=Math.ceil(G.width+18);var U=this.pdfViewerBase.getElement("_pageDiv_"+e.pageIndex).clientWidth-e.bounds.left*L;e.bounds.width>U&&(e.bounds.width=U/L);var J=e.bounds.height;e.bounds.height=J>=t.bounds.height?J:t.bounds.height}this.calculateAnnotationBounds(t,e),e.opacity&&t.opacity!==e.opacity&&this.triggerAnnotationPropChange(t,!1,!1,!1,!0),e.fillColor&&t.fillColor!==e.fillColor&&this.triggerAnnotationPropChange(t,!0,!1,!1,!1),e.strokeColor&&t.strokeColor!==e.strokeColor&&this.triggerAnnotationPropChange(t,!1,!0,!1,!1),e.thickness&&t.thickness!==e.thickness&&this.triggerAnnotationPropChange(t,!1,!1,!0,!1),e.content=e.content?e.content:e.dynamicText,e.content&&t.dynamicText!==e.content&&this.triggerAnnotationPropChange(t,!1,!1,!1,!1,!1,!1,!1,!0,t.dynamicText,e.content),this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity,fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,dynamicText:e.content,fillColor:e.fillColor,textAlign:e.textAlign,strokeColor:e.strokeColor,thickness:e.thickness,font:this.setFreeTextFontStyle(e.fontStyle?e.fontStyle:e.font),isReadonly:e.isReadonly}),e.content&&t&&this.updateAnnotationComments(t.annotName,e.content);var $=document.getElementById(this.pdfViewer.element.id+"_commenttextbox_editor");new ry({value:e.content}).appendTo($)}t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.customData!==e.customData&&(t.customData=e.customData),t.isPrint=e.isPrint,"TextMarkup"!==e.type&&(this.pdfViewer.renderDrawing(),this.updateCollection(i,r,e,n))}},s.prototype.annotationPropertyChange=function(e,t,i,n,r){this.pdfViewer.nodePropertyChange(e,{opacity:t}),this.triggerAnnotationPropChange(e,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(e.pageIndex,null,e,i,"",n,r)},s.prototype.calculateAnnotationBounds=function(e,t){var i=this.pdfViewerBase.convertBounds(e.wrapper.bounds),n=this.pdfViewerBase.convertBounds(t.bounds);i&&n&&(JSON.stringify(i)!==JSON.stringify(n)&&Math.abs(i.Y-n.Y)>2||Math.abs(i.X-n.X)>2||Math.abs(i.Width-n.Width)>2||Math.abs(i.Height-n.Height)>2)&&(this.pdfViewer.nodePropertyChange(e,{bounds:{x:n.X+n.Width/2,y:n.Y+n.Height/2,width:n.Width,height:n.Height}}),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.triggerAnnotationPropChange(e,!1,!1,!1,!1))},s.prototype.updateFreeTextProperties=function(e){e.labelSettings&&(e.labelSettings.fillColor&&(e.labelFillColor=e.labelSettings.fillColor),e.labelSettings.fontColor&&(e.fontColor=e.labelSettings.fontColor),e.labelSettings.fontSize&&(e.fontSize=e.labelSettings.fontSize),e.labelSettings.fontFamily&&(e.fontFamily=e.labelSettings.fontFamily),e.labelSettings.opacity&&(e.labelOpacity=e.labelSettings.opacity),e.labelSettings.labelContent&&(e.labelContent=e.labelSettings.labelContent))},s.prototype.updateAnnotationComments=function(e,t){var i=document.getElementById(e);i&&i.childNodes&&(i.childNodes[0].ej2_instances?i.childNodes[0].ej2_instances[0].value=t:i.childNodes[0].childNodes&&i.childNodes[0].childNodes[1].ej2_instances&&(i.childNodes[0].childNodes[1].ej2_instances[0].value=t))},s.prototype.addFreeTextProperties=function(e,t){this.pdfViewer.enableShapeLabel&&e&&t&&(t.labelSettings={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor})},s.prototype.updateMeasurementSettings=function(){this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.measureAnnotationModule.updateMeasureValues("1 "+this.pdfViewer.measurementSettings.conversionUnit+" = "+this.pdfViewer.measurementSettings.scaleRatio+" "+this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.conversionUnit,this.pdfViewer.measurementSettings.depth)},s.prototype.updateCollection=function(e,t,i,n){var r,o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),o){var a=JSON.parse(o),l=this.getPageCollection(a,t);if(a[l]&&null!==(r=a[l].annotations)){for(var h=0;h<r.length;h++)if(r[h].annotName===e){var d=this.modifyAnnotationProperties(r[h],i,n);r[h]=d}this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+n),a[l]&&(a[l].annotations=r);var p=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+n,p)}}},s.prototype.modifyAnnotationProperties=function(e,t,i){if(t&&!0===t.isCommentLock&&(e.isCommentLock=t.isCommentLock),t.comments)for(var n=0;n<t.comments.length;n++)!0===t.comments[n].isLock&&(e.comments[n].isLock=t.comments[n].isLock);if(t&&""!==t.note&&void 0!==t.note&&(e.note=t.note),t.commentId&&t.editComment&&"edit"===t.commentType){var r=document.getElementById(t.commentId);for(t.annotationId===t.commentId&&(e.note=r.childNodes[1].ej2_instances[0].value),n=0;n<t.comments.length;n++)t.comments[n].annotName===t.commentId&&(e.comments[n].note=r.childNodes[1].ej2_instances[0].value)}if("textMarkup"===i)e.opacity=t.opacity,e.color=t.color,e.allowedInteractions=t.allowedInteractions;else if("sticky"===i||"stamp"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.stampAnnotationPath&&(e.stampAnnotationPath=t.stampAnnotationPath);else if("ink"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions;else if("shape"===i||"shape_measure"===i){if("Line"===t.subType||"Arrow"===t.subType||"Distance"===t.subType||"Perimeter"===t.subType?(t.bounds&&(e.bounds=t.bounds),t.vertexPoints&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.borderDashArray=t.borderDashArray,e.lineHeadStart=this.getArrowTypeForCollection(t.lineHeadStartStyle),e.lineHeadEnd=this.getArrowTypeForCollection(t.lineHeadEndStyle),e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions):(t.bounds&&(e.bounds=t.bounds),t.vertexPoints&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.calibrate&&e.annotName===t.annotationId&&e.calibrate.depth!==t.calibrate.depth&&(e.calibrate.depth=t.calibrate.depth,this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=t.calibrate.depth,e.note=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(e.vertexPoints))),this.pdfViewer.enableShapeLabel&&t.labelSettings){var o=t.labelSettings.labelContent;e.note=o,e.fontSize=t.labelSettings.fontSize,e.labelFillColor=t.labelSettings.fillColor,e.labelContent&&(e.labelContent=o),e.labelSettings&&(e.labelSettings=t.labelSettings),this.updateAnnotationComments(e.annotName,o)}}else"freetext"===i&&(t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,t.content&&(e.dynamicText=t.content),e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontColor=t.fontColor,e.fillColor=t.fillColor,e.font=t.font?t.font:t.fontStyle,e.textAlign=t.textAlign,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,e.isReadonly=t.isReadonly);return e.customData=t.customData,e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),e.isPrint=t.isPrint,t.annotationSettings&&!c(t.annotationSettings.isLock)&&(e.isLocked=t.annotationSettings.isLock),e},s.prototype.updateAnnotationAuthor=function(e,t){var i;return"sticky"===e?i="Guest"!==this.pdfViewer.stickyNotesSettings.author?this.pdfViewer.stickyNotesSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"stamp"===e?i="Guest"!==this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"shape"===e?"Line"===t?i="Guest"!==this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"LineWidthArrowHead"===t||"Arrow"===t?i="Guest"!==this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Circle"===t||"Ellipse"===t||"Oval"===t?i="Guest"!==this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Rectangle"===t||"Square"===t?i="Guest"!==this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Polygon"===t&&(i="Guest"!==this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"measure"===e?"Distance"===t||"Distance calculation"===t?i="Guest"!==this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Perimeter"===t||"Perimeter calculation"===t?i="Guest"!==this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Radius"===t||"Radius calculation"===t?i="Guest"!==this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Area"===t||"Area calculation"===t?i="Guest"!==this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":("Volume"===t||"Volume calculation"===t)&&(i="Guest"!==this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"textMarkup"===e?i="Highlight"===t?"Guest"!==this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Underline"===t?"Guest"!==this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Strikethrough"===t?"Guest"!==this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":this.pdfViewer.annotationSettings.author:"freeText"===e?i="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"ink"===e&&(i="Guest"!==this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"),i||(i=this.pdfViewer.annotationSettings.author),i},s.prototype.nameToHash=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",yellow:"#ffff00",yellowgreen:"#9acd32",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkred:"#8b0000",darksalmon:"#e9967a",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",indigo:"#4b0082",ivory:"#fffff0",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",pink:"#ffc0cb",plum:"#dda0dd",steelblue:"#4682b4",violet:"#ee82ee",powderblue:"#b0e0e6",purple:"#800080",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0"};return typeof t[e.toLowerCase()]<"u"?t[e.toLowerCase()]:""},s.prototype.updateFreeTextFontStyle=function(e){return 1===e.isBold?1:2===e.isItalic?2:4===e.isUnderline?4:e.isStrikeout?8:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isUnderline}},s.prototype.setFreeTextFontStyle=function(e){return 1===e?{isBold:!0}:2===e?{isItalic:!0}:4===e?{isUnderline:!0}:8===e?{isStrikeout:!0}:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isStrikeout}},s.prototype.findAnnotationSettings=function(e,t){var i=this.pdfViewer.annotationSettings;if(e){var n=e.shapeAnnotationType;"StickyNotes"===n&&this.pdfViewer.stickyNotesSettings?i=this.pdfViewer.stickyNotesSettings:"Stamp"===n||"Image"===n?(i=this.pdfViewer.stampSettings,("image"===n||"Image"===n)&&(i=this.pdfViewer.customStampSettings)):"FreeText"===n?i=this.pdfViewer.freeTextSettings:""===e.measureType?"Line"===n?i=this.pdfViewer.lineSettings:"Arrow"===n||"LineWidthArrowHead"===n?i=this.pdfViewer.arrowSettings:"Rectangle"===n?i=this.pdfViewer.rectangleSettings:"Circle"===n||"Ellipse"===n?i=this.pdfViewer.circleSettings:"Polygon"===n&&this.pdfViewer.polygonSettings&&(i=this.pdfViewer.polygonSettings):""!==e.measureType&&("Distance"===e.measureType?i=this.pdfViewer.distanceSettings:"Perimeter"===e.measureType?i=this.pdfViewer.perimeterSettings:"Area"===e.measureType?i=this.pdfViewer.areaSettings:"Radius"===e.measureType?i=this.pdfViewer.radiusSettings:"Volume"===e.measureType&&(i=this.pdfViewer.volumeSettings))}var r=e?e.annotationSettings:{};return r&&(r.minWidth||r.maxWidth||r.minHeight||r.maxHeight)?this.updateSettings(r):t?this.updateSettings(i):i},s.prototype.updateAnnotationSettings=function(e){var t=this.pdfViewer.annotationSettings;return"sticky"===e.AnnotType?t=this.pdfViewer.stickyNotesSettings:"stamp"===e.AnnotType||"image"===e.AnnotType||"Image"===e.AnnotType?(t=this.pdfViewer.stampSettings,("image"===e.Subject||"Image"===e.Subject)&&(t=this.pdfViewer.customStampSettings)):"freeText"===e.AnnotType?t=this.pdfViewer.freeTextSettings:"shape"===e.AnnotType?"Line"===e.Subject?t=this.pdfViewer.lineSettings:"Arrow"===e.Subject||"LineWidthArrowHead"===e.Subject?t=this.pdfViewer.arrowSettings:"Rectangle"===e.Subject||"Square"===e.Subject?t=this.pdfViewer.rectangleSettings:"Circle"===e.Subject||"Ellipse"===e.Subject||"Oval"===e.Subject?t=this.pdfViewer.circleSettings:"Polygon"===e.Subject&&(t=this.pdfViewer.polygonSettings):"shape_measure"===e.AnnotType&&("Distance"===e.Subject||"Distance calculation"===e.Subject?t=this.pdfViewer.distanceSettings:"Perimeter"===e.Subject||"Perimeter calculation"===e.Subject?t=this.pdfViewer.perimeterSettings:"Area"===e.Subject||"Area calculation"===e.Subject?t=this.pdfViewer.areaSettings:"Radius"===e.Subject||"Radius calculation"===e.Subject?t=this.pdfViewer.radiusSettings:("Volume"===e.Subject||"Volume calculation"===e.Subject)&&(t=this.pdfViewer.volumeSettings)),this.updateSettings(t)},s.prototype.updateSettings=function(e){var t=0,i=0,n=0,r=0,l=this.pdfViewer.annotationSettings;return e.minWidth||e.maxWidth||e.minHeight||e.maxHeight?(t=e.maxHeight?e.maxHeight:2e3,i=e.maxWidth?e.maxWidth:2e3,n=e.minHeight?e.minHeight:0,r=e.minWidth?e.minWidth:0):(l.minWidth||l.maxWidth||l.minHeight||l.maxHeight)&&(t=l.maxHeight?l.maxHeight:2e3,i=l.maxWidth?l.maxWidth:2e3,n=l.minHeight?l.minHeight:0,r=l.minWidth?l.minWidth:0),{minWidth:r,maxWidth:i,minHeight:n,maxHeight:t,isLock:e.isLock?e.isLock:!!l.isLock&&l.isLock,isPrint:e.isPrint}},s.prototype.getOverlappedAnnotations=function(e,t){for(var n,i=this.getPageShapeAnnotations(t),r=0;r<i.length;r++)if(e.annotName===i[r].annotName){n=i[r];break}return this.findOverlappedAnnotations(n,i)},s.prototype.getPageShapeAnnotations=function(e){var t=[],i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);if(n&&n[r=this.getPageCollection(n,e)]){var o=n[r].annotations;if(o&&o.length>0)for(var a=0;a<o.length;a++)t.push(o[a])}}var l=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(l){var h=JSON.parse(l);if(h&&h[r=this.getPageCollection(h,e)]){var d=h[r].annotations;if(d&&d.length>0)for(a=0;a<d.length;a++)t.push(d[a])}}var p=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(p){var u=JSON.parse(p);if(u&&u[r=this.getPageCollection(u,e)]){var f=u[r].annotations;if(f&&f.length>0)for(a=0;a<f.length;a++)t.push(f[a])}}var g=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(g){var m=JSON.parse(g);if(m&&m[r=this.getPageCollection(m,e)]){var y=m[r].annotations;if(y&&y.length>0)for(a=0;a<y.length;a++)t.push(y[a])}}var b=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(b){var w=JSON.parse(b);if(w&&w[r=this.getPageCollection(w,e)]){var S=w[r].annotations;if(S&&S.length>0)for(a=0;a<S.length;a++)t.push(S[a])}}var I=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(I){var x=JSON.parse(I);if(x&&x[r=this.getPageCollection(x,e)]){var T=x[r].annotations;if(T&&T.length>0)for(a=0;a<T.length;a++)t.push(T[a])}}var L=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(L){var r,N=JSON.parse(L);if(N&&N[r=this.getPageCollection(N,e)]){var O=N[r].annotations;if(O&&O.length>0)for(a=0;a<O.length;a++)t.push(O[a])}}return t},s.prototype.findOverlappedAnnotations=function(e,t){if(this.overlappedAnnotations=[],e&&e.bounds)if("textMarkup"===e.shapeAnnotationType)for(var i=0;i<e.bounds.length;i++){var n=this.orderTextMarkupBounds(e.bounds[i]);this.calculateOverlappedAnnotationBounds(e,n,t)}else this.calculateOverlappedAnnotationBounds(e,e.bounds,t);return this.overlappedAnnotations},s.prototype.calculateOverlappedAnnotationBounds=function(e,t,i){var n=t;"Ink"===e.shapeAnnotationType&&(n={left:t.x,top:t.y,height:t.height,width:t.width});for(var r=parseInt(n.left),o=parseInt(n.top),a=parseInt(n.top+n.height),l=parseInt(n.left+n.width),h=0;h<i.length;h++)if(e.annotName===i[h].annotName)this.checkOverlappedCollections(i[h],this.overlappedAnnotations);else{var d=1;"textMarkup"===i[h].shapeAnnotationType&&(d=i[h].bounds.length);for(var p=0;p<d;p++){var u,f=i[h].bounds;if("Ink"===i[h].shapeAnnotationType&&(f={left:f.x,top:f.y,height:f.height,width:f.width}),u="textMarkup"!==i[h].shapeAnnotationType&&1===d?f:this.orderTextMarkupBounds(f[p])){var g=!1;(r<=parseInt(u.left)&&l>=parseInt(u.left)||r<=parseInt(u.left+u.width)&&l>=parseInt(u.left+u.width))&&(g=!0),g&&(g=o<=parseInt(u.top)&&a>=parseInt(u.top)||o<=parseInt(u.top+u.height)&&a>=parseInt(u.top+u.height)),g?this.checkOverlappedCollections(i[h],this.overlappedAnnotations):((parseInt(u.left)<=r&&parseInt(u.left+u.width)>=r||l>=parseInt(u.left)&&l<=parseInt(u.left+u.width))&&(g=!0),g&&(g=parseInt(u.top)<=o&&parseInt(u.top+u.height)>=o||a>=parseInt(u.top)&&a<=parseInt(u.top+u.height)),g?this.checkOverlappedCollections(i[h],this.overlappedAnnotations):((r<=parseInt(u.left)&&l>=parseInt(u.left)||r<=parseInt(u.left+u.width)&&l>=parseInt(u.left+u.width))&&(g=!0),g&&(g=parseInt(u.top)<=o&&parseInt(u.top+u.height)>=o||a>=parseInt(u.top)&&a<=parseInt(u.top+u.height)),g?this.checkOverlappedCollections(i[h],this.overlappedAnnotations):((parseInt(u.left)<=r&&parseInt(u.left+u.width)>=r||l>=parseInt(u.left)&&l<=parseInt(u.left+u.width))&&(g=!0),g&&(g=o<=parseInt(u.top)&&a>=parseInt(u.top)||o<=parseInt(u.top+u.height)&&a>=parseInt(u.top+u.height)),g&&this.checkOverlappedCollections(i[h],this.overlappedAnnotations))))}}}},s.prototype.findAnnotationMode=function(e,t,i){var n=this.pdfViewer.viewerBase.importedAnnotation[t];if(n){var r=void 0;if("shape"===i?r=n.shapeAnnotation:"shape_measure"===i?r=n.measureShapeAnnotation:"freeText"===i?r=n.freeTextAnnotation:"stamp"===i?r=n.stampAnnotations:"sticky"===i?r=n.stickyNotesAnnotation:"textMarkup"===i&&(r=n.textMarkupAnnotation),r)for(var o=0;o<r.length;o++)if(r[o].AnnotName===e.AnnotName)return"Imported Annotation"}return"Existing Annotation"},s.prototype.checkOverlappedCollections=function(e,t){if(t.length>0){for(var i=!1,n=0;n<t.length;n++)if(e.annotName===t[n].annotName&&e.bounds===t[n].bounds){i=!0;break}i||t.push(e)}else t.push(e)},s.prototype.orderTextMarkupBounds=function(e){return e.Left||e.Width?{left:e.Left,top:e.Top,height:e.Height,width:e.Width}:{left:e.left,top:e.top,height:e.height,width:e.width}},s.prototype.updateModifiedDate=function(e){if(e.modifiedDate&&(e.modifiedDate=this.setAnnotationModifiedDate(e.modifiedDate)),e.comments&&e.comments.length>0)for(var t=0;t<e.comments.length;t++)e.comments[t].modifiedDate&&(e.comments[t].modifiedDate=this.setAnnotationModifiedDate(e.comments[t].modifiedDate),e.comments[t].review&&e.comments[t].review.modifiedDate&&(e.comments[t].review.modifiedDate=this.setAnnotationModifiedDate(e.comments[t].review.modifiedDate)));e.review&&e.review.modifiedDate&&(e.review.modifiedDate=this.setAnnotationModifiedDate(e.review.modifiedDate))},s.prototype.setAnnotationModifiedDate=function(e){var t,i;if(""===e)return e;var n=parseInt(e.split(" ")[1].split(":")[0]);t=3===e.split(" ").length?n+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" "+e.split(" ")[2]:n>=12?12===n?n+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":n-12+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":n+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" AM";var r=e.split(" ")[0];return i=e.split(",").length>1?r+" "+t:r+", "+t,new Date(i).toISOString()},s.prototype.clear=function(){this.shapeAnnotationModule&&(this.shapeAnnotationModule.shapeCount=0),this.measureAnnotationModule&&(this.measureAnnotationModule.measureShapeCount=0),this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.clear(),this.stickyNotesAnnotationModule&&this.stickyNotesAnnotationModule.clear(),this.pdfViewer.refresh(),this.undoCommentsElement=[],this.redoCommentsElement=[],this.overlappedAnnotations=[],this.previousIndex=null,this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule&&(this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber=[]),this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers=[],this.freeTextAnnotationModule.previousText="Type Here"),this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule&&(this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[]),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky")},s.prototype.retrieveAnnotationCollection=function(){return this.pdfViewer.annotationCollection},s.prototype.checkAllowedInteractions=function(e,t){var i=this.updateAnnotationAllowedInteractions(t);if(i&&i.length>0)for(var n=0;n<i.length;n++)if("Select"===e){if("Move"===i[n]||"Resize"===i[n]||"Delete"===i[n]||"PropertyChange"===i[n]||"Select"===i[n])return!0}else if(i[n]===e)return!0;return!1},s.prototype.checkContextMenuDeleteItem=function(e){var t=this.findCurrentAnnotation();t&&t.annotationSettings&&(t.annotationSettings.isLock?this.checkAllowedInteractions("Delete",t)?e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!1):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0))},s.prototype.isEnableDelete=function(){var e=this.findCurrentAnnotation();return!(!e||!e.annotationSettings||e.annotationSettings.isLock&&!this.checkAllowedInteractions("Delete",e))},s.prototype.findCurrentAnnotation=function(){return this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0]:void 0},s.prototype.updateAnnotationAllowedInteractions=function(e){var t=["None"];return e&&("FreeText"===e.shapeAnnotationType&&this.pdfViewer.freeTextSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions,e.allowedInteractions):"Ink"===e.shapeAnnotationType&&this.pdfViewer.inkAnnotationSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions,e.allowedInteractions):"StickyNotes"===e.shapeAnnotationType&&this.pdfViewer.stickyNotesSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions,e.allowedInteractions):"Stamp"===e.shapeAnnotationType&&this.pdfViewer.stampSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions,e.allowedInteractions):"Image"===e.shapeAnnotationType&&this.pdfViewer.customStampSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions,e.allowedInteractions):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType&&this.pdfViewer.highlightSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions,e.allowedInteractions):"Underline"===e.textMarkupAnnotationType&&this.pdfViewer.underlineSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions,e.allowedInteractions):"Strikethrough"===e.textMarkupAnnotationType&&this.pdfViewer.strikethroughSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions,e.allowedInteractions)):""!==e.measureType?"Distance"===e.measureType&&this.pdfViewer.distanceSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions,e.allowedInteractions):"Perimeter"===e.measureType&&this.pdfViewer.perimeterSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions,e.allowedInteractions):"Radius"===e.measureType&&this.pdfViewer.radiusSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions,e.allowedInteractions):"Area"===e.measureType&&this.pdfViewer.areaSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions,e.allowedInteractions):"Volume"===e.measureType&&this.pdfViewer.volumeSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions,e.allowedInteractions)):"Line"===e.shapeAnnotationType&&this.pdfViewer.lineSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions,e.allowedInteractions):"Arrow"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType||!this.pdfViewer.arrowSettings.allowedInteractions?"Circle"!==e.shapeAnnotationType&&"Ellipse"!==e.shapeAnnotationType&&"Oval"!==e.shapeAnnotationType||!this.pdfViewer.circleSettings.allowedInteractions?"Rectangle"!==e.shapeAnnotationType&&"Square"!==e.shapeAnnotationType||!this.pdfViewer.rectangleSettings.allowedInteractions?"Polygon"===e.shapeAnnotationType&&this.pdfViewer.polygonSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions,e.allowedInteractions)):t=this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions,e.allowedInteractions)),t},s.prototype.checkIsLockSettings=function(e){var t=!1;return e&&("FreeText"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock):"Ink"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock):"StickyNotes"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock):"Stamp"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stampSettings.isLock):"Image"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.customStampSettings.isLock):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.highlightSettings.isLock):"Underline"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.underlineSettings.isLock):"Strikethrough"===e.textMarkupAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock)):""!==e.measureType?"Distance"===e.measureType?t=this.checkLockSettings(this.pdfViewer.distanceSettings.isLock):"Perimeter"===e.measureType?t=this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock):"Radius"===e.measureType?t=this.checkLockSettings(this.pdfViewer.radiusSettings.isLock):"Area"===e.measureType?t=this.checkLockSettings(this.pdfViewer.areaSettings.isLock):"Volume"===e.measureType&&(t=this.checkLockSettings(this.pdfViewer.volumeSettings.isLock)):"Line"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.lineSettings.isLock):"Arrow"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.arrowSettings.isLock):"Circle"===e.shapeAnnotationType||"Ellipse"===e.shapeAnnotationType||"Oval"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.circleSettings.isLock):"Rectangle"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock):"Polygon"===e.shapeAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.polygonSettings.isLock))),t},s.prototype.checkLockSettings=function(e){var t=!1;return(e||this.pdfViewer.annotationSettings.isLock)&&(t=!0),t},s.prototype.restrictContextMenu=function(){var e=!1,t=this.findCurrentAnnotation();return t&&this.checkIsLockSettings(t)&&this.checkAllowedInteractions("Select",t)&&(e=!0),e},s.prototype.checkAllowedInteractionSettings=function(e,t){if(t){if(1!==t.length)return t;if("None"!==t[0])return t}if(e){if(1!==e.length)return e;if("None"!==e[0])return e}return this.pdfViewer.annotationSettings.allowedInteractions?this.pdfViewer.annotationSettings.allowedInteractions:["None"]},s.prototype.getValue=function(e,t){if(t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0])return i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e)),"rgba"===t?this.convertToRgbString(i):"hex"===t||"hexa"===t?(n=this.rgbToHex(i),"hex"===t?n.slice(0,7):n):"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null";e=this.roundValue(e);var r=this.hexToRgb(e);return("rgb"===t||"hsv"===t)&&(r=r.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(r):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,r)):"hex"===t?e.slice(0,7):"a"===t?r[3].toString():"null"},s.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(function(t,i){return 3!==i?parseInt(t,10):parseFloat(t)})},s.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},s.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},s.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,r=e.length;n<r;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e},s.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(t),n},s.prototype.rgbToHsv=function(e,t,i,n){e/=255,t/=255,i/=255;var a,l,r=Math.max(e,t,i),o=Math.min(e,t,i),h=r,d=r-o;if(l=0===r?0:d/r,r===o)a=0;else{switch(r){case e:a=(t-i)/d+(t<i?6:0);break;case t:a=(i-e)/d+2;break;case i:a=(e-t)/d+4}a/=6}var p=[Math.round(360*a),Math.round(1e3*l)/10,Math.round(1e3*h)/10];return c(n)||p.push(n),p},s.prototype.hsvToRgb=function(e,t,i,n){var r,o,a,l,h,d,p,u;if(i/=100,0==(t/=100))return r=o=a=i,[Math.round(255*r),Math.round(255*o),Math.round(255*a),n];switch(d=i*(1-t),p=i*(1-t*(h=(e/=60)-(l=Math.floor(e)))),u=i*(1-t*(1-h)),l){case 0:r=i,o=u,a=d;break;case 1:r=p,o=i,a=d;break;case 2:r=d,o=i,a=u;break;case 3:r=d,o=p,a=i;break;case 4:r=u,o=d,a=i;break;default:r=i,o=d,a=p}var f=[Math.round(255*r),Math.round(255*o),Math.round(255*a)];return c(n)||f.push(n),f},s.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(c(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},s.prototype.exportAnnotationsAsStream=function(e){var t=this;return this.pdfViewer.annotationModule&&this.pdfViewer.viewerBase.updateExportItem()?new Promise(function(n,r){t.pdfViewer.viewerBase.createRequestForExportAnnotations(!0,e,!0).then(function(o){n(o)})}):null},s.prototype.hex=function(e){return c(e)?"0":("0"+e.toString(16)).slice(-2)},s.prototype.cloneObject=function(e){return JSON.parse(JSON.stringify(e))},s.prototype.destroy=function(){this.destroyPropertiesWindow(),this.textMarkupAnnotationModule.clear()},s.prototype.getModuleName=function(){return"Annotation"},s.prototype.getVertexPointsXY=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x,Y:e[i].y};return t},s.prototype.addAnnotation=function(e,t,i,n,r){var o={x:1,y:1},a=0;t&&t.pageNumber&&t.pageNumber>0&&(a=t.pageNumber?t.pageNumber-1:0);var l=null,h=[];this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),"FreeText"==e?(h[a]=this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(t,o),this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically=!0):"StickyNotes"==e?(h[a]=this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(t,o),this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically=!0):"Highlight"==e||"Underline"==e||"Strikethrough"==e?(("Highlight"==e||"Underline"==e||"Strikethrough"==e)&&(l=t),h[a]=this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(e,l),this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically=!0):"Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e?(("Line"==e||"Arrow"==e||"Rectangle"==e||"Circle"==e||"Polygon"==e)&&(l=t),h[a]=this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(e,l,o),this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically=!0):"Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e?(("Distance"==e||"Perimeter"==e||"Area"==e||"Radius"==e||"Volume"==e)&&(l=t),h[a]=this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(e,l,o),this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically=!0):"Stamp"===e?(h[a]=this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(t,o,a,i,n,r),this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically=!0):"Ink"===e&&(h[a]=this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(t,o,a),this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically=!0);var d={pdfAnnotation:h};this.pdfViewerBase.isAddAnnotation=!0,this.pdfViewerBase.importAnnotations(d),this.pdfViewerBase.isAddAnnotation=!1},s.prototype.triggerAnnotationAddEvent=function(e){var t=e.shapeAnnotationType;if("Stamp"===t||"Image"===t||"Path"===t||"FreeText"===t||"StickyNotes"===t||"Ink"===t){var i;i="FreeText"===t?{opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign}:{opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,data:e.data};var n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},r=this.getAnnotationType(e.shapeAnnotationType,e.measureType);this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,r,n,i)}else if("SignatureText"===t||"SignatureImage"===t||"HandWrittenSignature"===t)this.pdfViewer.fireSignatureAdd(e.pageIndex,e.signatureName,e.shapeAnnotationType,n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},e.opacity,e.strokeColor,e.thickness,e.data);else{var o={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},("Line"===(r=this.getAnnotationType(e.shapeAnnotationType,e.measureType))||"Arrow"===r||"Distance"===r||"Perimeter"===r)&&(o.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),o.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),o.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel?this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,r,n,o,null,null,null,{fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor}):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,r,n,o)}},s.prototype.triggerAnnotationUnselectEvent=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){var e=this.pdfViewer.selectedItems.annotations[0];"HandWrittenSignature"!==e.shapeAnnotationType&&"SignatureText"!==e.shapeAnnotationType&&"SignatureImage"!==e.shapeAnnotationType&&"Path"!==e.shapeAnnotationType&&(this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageIndex,e),this.pdfViewer.clearSelection(e.pageIndex))}},s.prototype.updateFontFamilyRenderSize=function(e,t){var i=this.freeTextAnnotationModule;i.inputBoxElement.style.fontFamily=t,i.autoFitFreeText();var n=this.pdfViewerBase.getZoomFactor(),o=(parseFloat(i.inputBoxElement.style.paddingLeft),e.bounds.height*n),l=parseFloat(i.inputBoxElement.style.width)-8;l/=n;var h=(o/=n)-e.bounds.height,d=void 0;h>0?d=(d=e.wrapper.offsetY+h/2)>0?d:void 0:(h=Math.abs(h),d=(d=e.wrapper.offsetY-h/2)>0?d:void 0);var p=l-e.bounds.width,u=void 0;p>0?u=(u=e.wrapper.offsetX+p/2)>0?u:void 0:(p=Math.abs(p),u=e.wrapper.offsetX-p/2),e.bounds.width=l,e.bounds.height=o,this.pdfViewer.nodePropertyChange(e,{fontFamily:t,bounds:{width:e.bounds.width,height:e.bounds.height,y:d,x:u}}),this.pdfViewer.renderSelector(e.pageIndex,this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(e,"bounds")},s.prototype.updateCanvas=function(e,t,i,n){var r=this.pdfViewerBase.getZoomRatio();e.width=t*r,e.height=i*r,e.style.width=t+"px",e.style.height=i+"px",e.style.position="absolute",e.style.zIndex="1",this.pdfViewerBase.applyElementStyles(e,n)},s}(),s2=function(s,e,t,i){return new(t||(t=Promise))(function(n,r){function o(h){try{l(i.next(h))}catch(d){r(d)}}function a(h){try{l(i.throw(h))}catch(d){r(d)}}function l(h){h.done?n(h.value):new t(function(d){d(h.value)}).then(o,a)}l((i=i.apply(s,e||[])).next())})},o2=function(s,e){var i,n,r,o,t={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(d){return function l(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(r=2&h[0]?n.return:h[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,h[1])).done)return r;switch(n=0,r&&(h=[2&h[0],r.value]),h[0]){case 0:case 1:r=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,n=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(!(r=(r=t.trys).length>0&&r[r.length-1])&&(6===h[0]||2===h[0])){t=0;continue}if(3===h[0]&&(!r||h[1]>r[0]&&h[1]<r[3])){t.label=h[1];break}if(6===h[0]&&t.label<r[1]){t.label=r[1],r=h;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(h);break}r[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(s,t)}catch(d){h=[6,d],n=0}finally{i=r=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,d])}}},BAe=function(){function s(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.renderHyperlinkContent=function(e,t){if(this.pdfViewer.enableHyperlink){var i=e.hyperlinks,n=e.hyperlinkBounds;this.linkAnnotation=e.linkAnnotation,this.linkPage=e.linkPage,this.annotationY=e.annotationLocation,i&&i.length>0&&n.length>0&&this.renderWebLink(i,n,t),this.linkAnnotation&&this.linkAnnotation.length>0&&this.linkPage.length>0&&this.renderDocumentLink(this.linkAnnotation,this.linkPage,this.annotationY,t)}},s.prototype.disableHyperlinkNavigationUnderObjects=function(e,t,i){if(qK(i,i.pdfViewer,t).length>0)t.target.classList.contains("e-pv-hyperlink")&&(e.style.cursor="move",e.style.pointerEvents="none",e.title="");else{var r=document.getElementsByClassName("e-pv-hyperlink");if(r&&r.length>0)for(var o=0;o<r.length;o++)"none"===r[o].style.pointerEvents&&(r[o].style.pointerEvents="all"),r[o].title||(r[o].title=r[o].href)}},s.prototype.renderWebLink=function(e,t,i){for(var n=this,r=this,o=!1,a=function(d){var p=F("a",{id:"weblinkdiv_"+d+"_"+i});(p=l.setHyperlinkProperties(p,t[d],i)).title=e[d],e[d]&&1===e[d].split("http").length?p.setAttribute("href","http://"+e[d]):p.setAttribute("href",e[d]),"CurrentTab"===l.pdfViewer.hyperlinkOpenState?(p.target="_self",p.onclick=function(m){return s2(n,void 0,void 0,function(){var y;return o2(this,function(b){switch(b.label){case 0:return o?[3,4]:(m.preventDefault(),r.pdfViewerBase.tool instanceof $s||r.pdfViewerBase.tool instanceof Fh?[2,!1]:[3,1]);case 1:return[4,r.pdfViewer.fireHyperlinkClick(e[d],p)];case 2:return(y=b.sent())&&(o=!0,p.click()),[2,y];case 3:return[3,5];case 4:return o=!1,[2,!0];case 5:return[2]}})})},p.onmouseover=function(){r.triggerHyperlinkEvent(p)}):"NewTab"===l.pdfViewer.hyperlinkOpenState?(p.target="_blank",p.onclick=function(m){return s2(n,void 0,void 0,function(){var y;return o2(this,function(b){switch(b.label){case 0:return o?[3,4]:(m.preventDefault(),r.pdfViewerBase.tool instanceof $s||r.pdfViewerBase.tool instanceof Fh?[2,!1]:[3,1]);case 1:return[4,r.pdfViewer.fireHyperlinkClick(e[d],p)];case 2:return(y=b.sent())&&(o=!0,p.click()),[2,y];case 3:return[3,5];case 4:return o=!1,[2,!0];case 5:return[2]}})})},p.onmouseover=function(){r.triggerHyperlinkEvent(p)}):"NewWindow"===l.pdfViewer.hyperlinkOpenState&&(p.onclick=function(m){return s2(n,void 0,void 0,function(){return o2(this,function(b){switch(b.label){case 0:return m.preventDefault(),r.pdfViewerBase.tool instanceof $s||r.pdfViewerBase.tool instanceof Fh?[2,!1]:[3,1];case 1:return[4,r.pdfViewer.fireHyperlinkClick(e[d],p)];case 2:return b.sent()&&window.open(p.href,"_blank","scrollbars=yes,resizable=yes"),[2,!1]}})})},p.onmouseover=function(){r.triggerHyperlinkEvent(p)}),document.getElementById(l.pdfViewer.element.id+"_pageDiv_"+i).appendChild(p)},l=this,h=0;h<e.length;h++)a(h)},s.prototype.triggerHyperlinkEvent=function(e){return!(this.pdfViewerBase.tool instanceof $s||this.pdfViewerBase.tool instanceof Fh||(this.pdfViewer.fireHyperlinkHover(e),0))},s.prototype.renderDocumentLink=function(e,t,i,n){for(var r=this,o=function(h){var d=F("a",{id:"linkdiv_"+h+"_"+n});if((d=a.setHyperlinkProperties(d,e[h],n)).setAttribute("href","javascript:void(0)"),void 0!==t[h]&&t[h]>=0){var u=a.pdfViewerBase.pageSize[n].height,f=void 0,g=void 0,m=a.pdfViewerBase.pageSize[t[h]];m&&(0!==i.length?(f=i[h],g=m.top*a.pdfViewerBase.getZoomFactor()+(u-f)*a.pdfViewerBase.getZoomFactor()):g=m.top*a.pdfViewerBase.getZoomFactor()),void 0!==g&&(d.name=g.toString(),d.setAttribute("aria-label",g.toString()),d.onclick=function(){return r.pdfViewerBase.tool instanceof $s||r.pdfViewerBase.tool instanceof Fh||(r.pdfViewerBase.viewerContainer.scrollTop=parseInt(d.name)),!1}),document.getElementById(a.pdfViewer.element.id+"_pageDiv_"+n).appendChild(d)}},a=this,l=0;l<e.length;l++)o(l)},s.prototype.setHyperlinkProperties=function(e,t,i){return e.className="e-pv-hyperlink",e.style.background="transparent",e.style.position="absolute",e.style.left=t.Left*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=t.Top*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t.Width*this.pdfViewerBase.getZoomFactor()+"px",t.Height<0?(e.style.height=-t.Height*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(t.Top+t.Height)*this.pdfViewerBase.getZoomFactor()+"px"):e.style.height=(t.Height<0?-t.Height:t.Height)*this.pdfViewerBase.getZoomFactor()+"px",e.style.color="transparent",this.pdfViewerBase.applyElementStyles(e,i),e},s.prototype.modifyZindexForTextSelection=function(e,t){if(this.pdfViewerBase.pageCount>0){var i=this.pdfViewerBase.getElement("_pageDiv_"+e);if(i)for(var n=i.childNodes,r=0;r<n.length;r++){var o=n[r];"A"===o.tagName&&(t?o.classList.add("e-pv-onselection"):o.classList.remove("e-pv-onselection"))}}},s.prototype.modifyZindexForHyperlink=function(e,t){t?e.classList.add("e-pv-onselection"):e.classList.remove("e-pv-onselection")},s.prototype.destroy=function(){for(var e=0;e<this.pdfViewerBase.pageCount-1;e++){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);if(t){var i=t.getElementsByTagName("a");if(0!==i.length)for(var n=i.length-1;n>=0;n--)i[n].parentNode.removeChild(i[n])}}},s.prototype.getModuleName=function(){return"LinkAnnotation"},s}(),zAe=function(){function s(e,t){var i=this;this.currentTextMarkupAddMode="",this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.isAddAnnotationProgramatically=!1,this.currentAnnotationIndex=null,this.isAnnotationSelect=!1,this.isDropletClicked=!1,this.isRightDropletClicked=!1,this.isLeftDropletClicked=!1,this.isSelectionMaintained=!1,this.isExtended=!1,this.isNewAnnotation=!1,this.selectedTextMarkup=null,this.multiPageCollection=[],this.triggerAddEvent=!1,this.isSelectedAnnotation=!1,this.dropletHeight=20,this.annotationClickPosition={},this.maintainSelection=function(n){i.isDropletClicked=!0,i.pdfViewer.textSelectionModule.initiateSelectionByTouch(),i.isExtended=!0,i.pdfViewer.textSelectionModule.selectionRangeArray=[]},this.selectionEnd=function(n){i.isDropletClicked&&(i.isDropletClicked=!1)},this.annotationLeftMove=function(n){i.isDropletClicked&&(i.isLeftDropletClicked=!0)},this.annotationRightMove=function(n){i.isDropletClicked&&(i.isRightDropletClicked=!0)},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createAnnotationSelectElement=function(){this.dropDivAnnotationLeft=F("div",{id:this.pdfViewer.element.id+"_droplet_left",className:"e-pv-drop"}),this.dropDivAnnotationLeft.style.borderRight="2px solid",this.dropDivAnnotationRight=F("div",{id:this.pdfViewer.element.id+"_droplet_right",className:"e-pv-drop"}),this.dropDivAnnotationRight.style.borderLeft="2px solid",this.dropElementLeft=F("div",{className:"e-pv-droplet",id:this.pdfViewer.element.id+"_dropletspan_left"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivAnnotationLeft.appendChild(this.dropElementLeft),this.dropElementRight=F("div",{className:"e-pv-droplet",id:this.pdfViewer.element.id+"_dropletspan_right"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropDivAnnotationRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationRight),this.dropElementLeft.style.top="20px",this.dropElementRight.style.top="20px",this.dropElementRight.style.left="-8px",this.dropElementLeft.style.left="-8px",this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none",this.dropDivAnnotationLeft.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationLeft.addEventListener("mousemove",this.annotationLeftMove),this.dropDivAnnotationLeft.addEventListener("mouseup",this.selectionEnd),this.dropDivAnnotationRight.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationRight.addEventListener("mousemove",this.annotationRightMove),this.dropDivAnnotationRight.addEventListener("mouseup",this.selectionEnd)},s.prototype.textSelect=function(e,t,i){if(this.isLeftDropletClicked){var n=this.dropDivAnnotationRight.getBoundingClientRect(),r=this.dropDivAnnotationLeft.getBoundingClientRect(),o=t,a=i;e.classList.contains("e-pv-text")&&(this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,o,a,r.top-25>n.top),this.updateLeftposition(o,a))}else this.isRightDropletClicked&&(n=this.dropDivAnnotationLeft.getBoundingClientRect(),o=t,a=i,e.classList.contains("e-pv-text")&&(this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,o,a,a>=n.top),this.updatePosition(o,a)))},s.prototype.showHideDropletDiv=function(e){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode;this.isEnableTextMarkupResizer(t)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationRight&&(e?(this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none"):(this.dropDivAnnotationLeft.style.display="",this.dropDivAnnotationRight.style.display="",this.updateDropletStyles(t)))},s.prototype.isEnableTextMarkupResizer=function(e){var t=!1;return e?("Highlight"===e&&this.pdfViewer.highlightSettings.enableTextMarkupResizer||"Underline"===e&&this.pdfViewer.underlineSettings.enableTextMarkupResizer||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableTextMarkupResizer||this.pdfViewer.enableTextMarkupResizer)&&(t=!0):(this.pdfViewer.enableTextMarkupResizer||this.pdfViewer.highlightSettings.enableTextMarkupResizer||this.pdfViewer.underlineSettings.enableTextMarkupResizer||this.pdfViewer.strikethroughSettings.enableTextMarkupResizer)&&(t=!0),t},s.prototype.updateDropletStyles=function(e){this.isEnableTextMarkupResizer(e)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationLeft.offsetWidth>0&&(this.dropDivAnnotationLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px")},s.prototype.updateAnnotationBounds=function(){this.isSelectionMaintained=!1;var e=this.currentTextMarkupAnnotation;e&&e.isMultiSelect?(this.showHideDropletDiv(!0),this.updateMultiAnnotBounds(e)):e&&e.bounds&&(this.retreieveSelection(e,null),this.pdfViewer.textSelectionModule.maintainSelection(this.selectTextMarkupCurrentPage,!1),this.isSelectionMaintained=!0,window.getSelection().removeAllRanges())},s.prototype.updateMultiAnnotBounds=function(e){if(!e.annotpageNumbers&&(t=this.getAnnotations(e.pageNumber,null)))for(var i=0;i<t.length;i++)if(t[i].annotName===e.annotName){e=t[i];break}for(var n=e.annotpageNumbers[0],r=e.annotpageNumbers[0],o=0;o<e.annotpageNumbers.length;o++){var a=e.annotpageNumbers[o];a>=r&&(r=a),a<=n&&(n=a)}for(var l=n;l<=r;l++){var t;if(t=this.getAnnotations(l,null))for(var h=0;h<e.annotNameCollection.length;h++){var d=e.annotNameCollection[h];for(i=0;i<t.length;i++)if(t[i].annotName===d){var p=t[i];this.retreieveSelection(p,null),this.pdfViewer.textSelectionModule.maintainSelection(p.pageNumber,!1)}}}this.isSelectionMaintained=!0,window.getSelection().removeAllRanges()},s.prototype.retreieveSelection=function(e,t){for(var i=0;i<e.bounds.length;i++){var n=e.bounds[i],r=(n.left?n.left:n.Left)*this.pdfViewerBase.getZoomFactor(),o=(n.top?n.top:n.Top)*this.pdfViewerBase.getZoomFactor(),a=(n.width?n.width:n.Width)*this.pdfViewerBase.getZoomFactor(),h=this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber);if(h){for(var d=h.childNodes,p=0;p<d.length;p++)if(d[p]){var u=d[p].getBoundingClientRect(),f=this.getClientValueTop(u.top,e.pageNumber),g=u.left-this.pdfViewerBase.getElement("_pageDiv_"+e.pageNumber).getBoundingClientRect().left,m=g+u.width,y=parseInt(d[p].style.left),b=parseInt(d[p].style.top),w=this.pdfViewer.textSelectionModule.checkLeftBounds(g,y,m,r),S=this.pdfViewer.textSelectionModule.checkTopBounds(f,b,o);if(w&&S){t=d[p];break}}if(null!=t){var I=this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber).getBoundingClientRect();this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,r+I.left,o+I.top,!1),e.bounds.length-1===i&&this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,r+I.left+a,o+I.top,!1)}}}},s.prototype.updatePosition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,r=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),o=document.getElementById(this.pdfViewer.element.id+"_droplet_right");o.style.top=i?r*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":r+n*this.pdfViewerBase.getZoomFactor()+"px",o.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left+"px"},s.prototype.updateLeftposition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,r=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),o=document.getElementById(this.pdfViewer.element.id+"_droplet_left");o.style.display="",o.style.top=i?r*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":r+n*this.pdfViewerBase.getZoomFactor()+"px",o.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px"},s.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},s.prototype.renderTextMarkupAnnotationsInPage=function(e,t,i,n){var r=this.pdfViewerBase.getElement("_annotationCanvas_"+t);i?(this.renderTextMarkupAnnotations(null,t,r,this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(e,t,r,this.pdfViewerBase.getZoomFactor(),!0)):this.renderTextMarkupAnnotations(e,t,r,this.pdfViewerBase.getZoomFactor(),null,n)},s.prototype.renderTextMarkupAnnotations=function(e,t,i,n,r,o){if(i){var a=i.getContext("2d");a.setTransform(1,0,0,1,0,0),a.setLineDash([]);var l;if(l=r||o?e:this.getAnnotations(t,e))for(var h=0;h<l.length;h++){var d=l[h],p=null,u=void 0;if(d.TextMarkupAnnotationType){if(r&&this.pdfViewerBase.isJsonImported){for(var f=[],g=0;g<d.Bounds.length;g++)d.Bounds[g]=this.pdfViewerBase.importJsonForRotatedDocuments(d.Rotate,t,d.Bounds[g],d.AnnotationRotation),d.Bounds[g].left=d.Bounds[g].X,d.Bounds[g].top=d.Bounds[g].Y,f.push(d.Bounds[g]);d.Bounds=f,u=this.pdfViewerBase.isPageRotated}if(d.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(d,t,d.AnnotType),d.Author||(d.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",d.TextMarkupAnnotationType)),d.Subject||(d.Subject=d.TextMarkupAnnotationType),d.AnnotationSettings=d.AnnotationSettings&&d.AnnotationSettings.isLock?{isLock:d.AnnotationSettings.isLock}:this.getAnnotationSettings(d.TextMarkupAnnotationType),d.allowedInteractions=d.AllowedInteractions?d.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(d),p={textMarkupAnnotationType:d.TextMarkupAnnotationType,color:d.Color,allowedInteractions:d.allowedInteractions,opacity:d.Opacity,bounds:d.Bounds,author:d.Author,subject:d.Subject,modifiedDate:d.ModifiedDate,note:d.Note,rect:d.Rect,annotName:d.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),review:{state:d.State,stateModel:d.StateModel,modifiedDate:d.ModifiedDate,author:d.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:d.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(d),customData:this.pdfViewer.annotation.getCustomData(d),annotationAddMode:d.annotationAddMode,annotationSettings:d.AnnotationSettings,isPrint:d.IsPrint,isCommentLock:d.IsCommentLock,isAnnotationRotated:u,annotationRotation:d.AnnotationRotation},d.IsMultiSelect&&(p.annotNameCollection=d.AnnotNameCollection,p.annotpageNumbers=d.AnnotpageNumbers,p.isMultiSelect=d.IsMultiSelect),d.textMarkupContent&&""!==d.textMarkupContent&&(p.textMarkupContent=d.textMarkupContent,p.textMarkupStartIndex=d.textMarkupStartIndex,p.textMarkupEndIndex=d.textMarkupEndIndex),c(d.TextMarkupContent)&&c(d.textMarkupContent)){var m=d.Bounds[0],y=this.pdfViewerBase.getStoredData(t,!0);if(c(y))this.pdfViewerBase.requestForTextExtraction(t,p);else{var b=y.pageText.split(""),S=this.pdfViewerBase.textMarkUpContent(m,b,this.pdfViewerBase.textLayer.characterBound[t]);p.textMarkupContent=S}}this.pdfViewer.annotationModule.storeAnnotations(t,p,"_annotations_textMarkup"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(p.pageNumber,p.annotName,d.TextMarkupAnnotationType,p.bounds,{opacity:p.opacity,author:d.author,subject:d.subject,modifiedDate:d.modifiedDate,width:p.bounds.width,height:p.bounds.height})}var T=d.Bounds?d.Bounds:d.bounds,L=d.Opacity?d.Opacity:d.opacity,N=d.Color?d.Color:d.color,O=d.AnnotationRotation?d.AnnotationRotation:d.annotationRotation,_=!0;switch(d.TextMarkupAnnotationType&&(_=d.IsPrint),d.textMarkupAnnotationType&&(_=d.isPrint),d.TextMarkupAnnotationType?d.TextMarkupAnnotationType:d.textMarkupAnnotationType){case"Highlight":this.renderHighlightAnnotation(T,L,N,a,n,_,t);break;case"Strikethrough":this.renderStrikeoutAnnotation(T,L,N,a,n,t,_,O);break;case"Underline":this.renderUnderlineAnnotation(T,L,N,a,n,t,_,O)}}var B=!1;if(this.currentTextMarkupAnnotation&&this.currentTextMarkupAnnotation.annotpageNumbers)for(var q=0;q<this.currentTextMarkupAnnotation.annotpageNumbers.length;q++)if(t===this.currentTextMarkupAnnotation.annotpageNumbers[q]){B=!0,this.isAnnotationSelect=!1;break}(t===this.selectTextMarkupCurrentPage||B)&&(this.isAnnotationSelect?this.isAnnotationSelect=!1:this.maintainAnnotationSelection())}},s.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.TextMarkupAnnotationType)},s.prototype.drawTextMarkupAnnotations=function(e){this.isTextMarkupAnnotationMode=!0,this.pdfViewer.annotationModule.isFormFieldShape=!1,this.currentTextMarkupAddMode=e;var t=!0;this.multiPageCollection=[];var i=this.pdfViewer.textSelectionModule?this.pdfViewer.textSelectionModule.selectionRangeArray:[];i.length>0&&!this.isSelectionMaintained&&this.convertSelectionToTextMarkup(e,i,this.pdfViewerBase.getZoomFactor());var r,n=window.getSelection();if(n&&n.anchorNode&&(r=n.anchorNode.parentElement),this.isEnableTextMarkupResizer(e)&&this.isExtended&&window.getSelection().toString()){if((o=this.getDrawnBounds())[0]&&o[0].bounds)for(var a=this.currentTextMarkupAnnotation,l=0;l<o.length;l++)if(a&&a.pageNumber===o[l].pageIndex)this.currentTextMarkupAnnotation=a,this.selectTextMarkupCurrentPage=o[l].pageIndex,this.updateTextMarkupAnnotationBounds(o,l);else if(a&&""===e&&(e=a.textMarkupAnnotationType),a.isMultiSelect)a.isMultiSelect&&a.annotNameCollection&&this.modifyCurrentAnnotation(a,o,l);else{var h=!1;this.isMultiAnnotation(e)&&(this.multiPageCollection.push(a),h=!0),this.drawTextMarkups(e,o[l].bounds,o[l].pageIndex,o[l].rect,this.pdfViewerBase.getZoomFactor(),o[l].textContent,o[l].startIndex,o[l].endIndex,h,r)}}else if(window.getSelection().toString()){var o=this.getDrawnBounds();if(h=this.isMultiPageAnnotations(o,e),o.length>0)for(var d=0;d<o.length;d++)""===e&&(t=!1),this.drawTextMarkups(e,o[d].bounds,o[d].pageIndex,o[d].rect,this.pdfViewerBase.getZoomFactor(),o[d].textContent,o[d].startIndex,o[d].endIndex,h,r)}if(this.multiPageCollection)for(var p=0;p<this.multiPageCollection.length;p++)this.updateAnnotationNames(this.multiPageCollection[p],this.multiPageCollection[p].pageNumber);this.isExtended=!1,this.isSelectionMaintained=!1,t&&this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.isEnableTextMarkupResizer(e)&&this.updateAnnotationBounds()},s.prototype.isMultiPageAnnotations=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n].pageIndex!==e[0].pageIndex&&this.isMultiAnnotation(t)){i=!0;break}return i},s.prototype.isMultiAnnotation=function(e){var t=!1;return("Highlight"===e&&this.pdfViewer.highlightSettings.enableMultiPageAnnotation||"Underline"===e&&this.pdfViewer.underlineSettings.enableMultiPageAnnotation||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableMultiPageAnnotation||this.pdfViewer.enableMultiPageAnnotation)&&(t=!0),t},s.prototype.modifyCurrentAnnotation=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var r=e.annotNameCollection[n],o=this.getAnnotations(t[i].pageIndex,null);if(o)for(var a=0;a<o.length;a++)if(o[a].annotName===r){this.currentTextMarkupAnnotation=o[a],this.selectTextMarkupCurrentPage=t[i].pageIndex,this.updateTextMarkupAnnotationBounds(t,i);break}}},s.prototype.drawAnnotationSelector=function(e,t,i){for(var n=[],r=0,o=0,a=0,l=0,h=0,d=0,p=0;p<e.bounds.length;p++)if(h=e.bounds[p].top?e.bounds[p].top:e.bounds[p].Top,d=c(e.bounds[p+1])?0:e.bounds[p+1].top?e.bounds[p+1].top:e.bounds[p+1].Top,e.bounds.length>1&&p<e.bounds.length-1&&h===d)n.push(e.bounds[p]);else if((p===e.bounds.length-1||e.bounds.length>=1)&&n.push(e.bounds[p]),n.length>=1){r=n[0].left?n[0].left:n[0].Left,o=n[0].top?n[0].top:n[0].Top,l=n[0].height?n[0].height:n[0].Height;for(var u=0;u<n.length;u++)(!isNaN(n[u].width)&&n[u].width>0||!isNaN(n[u].Width)&&n[u].Width>0)&&(a+=n[u].width?n[u].width:n[u].Width);i||(i=this.pdfViewerBase.getElement("_annotationCanvas_"+e.pageNumber)),this.drawAnnotationSelectRect(i,this.getMagnifiedValue(r-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(o-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(a+.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(l+.5,this.pdfViewerBase.getZoomFactor()),t),n=[],a=0}},s.prototype.selectMultiPageAnnotations=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var o=this.getAnnotations(e.annotpageNumbers[n],null);if(o)for(var a=0;a<o.length;a++)o[a].annotName===i&&this.drawAnnotationSelector(o[a],e)}}},s.prototype.deletMultiPageAnnotation=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var r=e.annotpageNumbers[n],o=this.getAnnotations(r,null);if(o)for(var a=0;a<o.length;a++)if(o[a].annotName===i){var h,l=o[a];h=o.splice(a,1)[0],this.pdfViewer.annotationModule.addAction(r,a,h,"Text Markup Deleted",null),this.currentAnnotationIndex=a,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"textMarkup");var d=document.getElementById(h.annotName);d&&(1===d.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(d):d.remove()),this.pdfViewer.annotationModule.updateAnnotationCollection(l),this.manageAnnotations(o,r),this.pdfViewer.annotationModule.updateImportAnnotationCollection(l,l.pageNumber,"textMarkupAnnotation"),this.pdfViewer.annotationModule.renderAnnotations(r,null,null,null)}}}},s.prototype.modifyMultiPageAnnotations=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var r=e.annotNameCollection[n];if(r!==e.annotName)for(var o=0;o<e.annotpageNumbers.length;o++){var a=e.annotpageNumbers[o],l=this.getAnnotations(a,null);if(l)for(var h=0;h<l.length;h++)l[h].annotName===r&&("Color"===t?l[h].color=i:l[h].opacity=i,l[h].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=h,(null===status||"changed"===status)&&this.pdfViewer.annotationModule.addAction(l[h].pageNumber,h,l[h],"Text Markup Property modified",t),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(l[h]),this.manageAnnotations(l,a),this.pdfViewer.annotationModule.renderAnnotations(a,null,null,null))}}},s.prototype.convertSelectionToTextMarkup=function(e,t,i){var n=!1;this.triggerAddEvent=!1,this.multiPageCollection=[];for(var r=0;r<t.length;r++){var o=t[r].textContent,a=void 0;if(t[r].startNode===t[r].endNode){var l=document.getElementById(t[r].startNode).textContent;a=this.getIndexNumbers(t[r].pageNumber,o,l)}else a=this.getIndexNumbers(t[r].pageNumber,o);if(!n)for(var h=1;h<t.length;h++)if(t[h].pageNumber!==t[0].pageNumber&&this.isMultiAnnotation(e)){n=!0;break}this.isMultiAnnotation(e)&&t.length-1===r&&(this.triggerAddEvent=!0),this.drawTextMarkups(e,t[r].rectangleBounds,t[r].pageNumber,t[r].bound,i,o,a.startIndex,a.endIndex,n,document.getElementById(t[r].startNode))}},s.prototype.updateTextMarkupAnnotationBounds=function(e,t){if(this.currentTextMarkupAnnotation){var i=this.getAnnotations(e[t].pageIndex,null),n=null;if(i){for(var r=0;r<i.length;r++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[r])&&(i[r].bounds=e[t].bounds,i[r].textMarkupContent=e[t].textContent,i[r].textMarkupStartIndex=e[t].startIndex,i[r].textMarkupEndIndex=e[t].endIndex,i[r].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=i[r]);if(this.manageAnnotations(i,e[t].pageIndex),this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(e[t].pageIndex,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0),n){var o={opacity:n.opacity,color:n.color,author:n.author,subject:n.subject,modifiedDate:n.modifiedDate},a=this.multiPageCollectionList(n);a.length>0?e.length-1===t&&this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,o,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null,a):this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,o,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null)}this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null}}},s.prototype.multiPageCollectionList=function(e){var t=[];if(e.isMultiSelect&&e.annotNameCollection){t.push(e);for(var i=0;i<e.annotNameCollection.length;i++){var n=e.annotNameCollection[i];if(n!==e.annotName)for(var r=0;r<e.annotpageNumbers.length;r++){var a=this.getAnnotations(e.annotpageNumbers[r],null);if(a)for(var l=0;l<a.length;l++)a[l].annotName===n&&t.push(a[l])}}}return t},s.prototype.updateAnnotationNames=function(e,t){if(e){var i=this.getAnnotations(t,null);if(i){for(var r=0;r<i.length;r++)if(e.annotName===i[r].annotName){for(var o=[],a=[],l=0;l<this.multiPageCollection.length;l++)o.push(this.multiPageCollection[l].annotName),a.push(this.multiPageCollection[l].pageNumber);i[r].isMultiSelect=!0,i[r].annotNameCollection=o,i[r].annotpageNumbers=a}this.manageAnnotations(i,t)}}},s.prototype.updateAnnotationContent=function(e,t){if(e){var i=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(i){for(var r=0;r<i.length;r++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[r])&&(i[r].textMarkupContent=t.textContent,i[r].textMarkupStartIndex=t.startIndex,i[r].textMarkupEndIndex=t.endIndex),this.pdfViewer.annotationModule.storeAnnotationCollections(i[r],this.selectTextMarkupCurrentPage);this.manageAnnotations(i,this.selectTextMarkupCurrentPage)}}},s.prototype.drawTextMarkups=function(e,t,i,n,r,o,a,l,h,d){var p=null;this.isNewAnnotation=!1;var f,u="Guest",g=this.getPageContext(i),m=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.highlightColor=this.highlightColor?this.highlightColor:this.pdfViewer.highlightSettings.color,this.underlineColor=this.underlineColor?this.underlineColor:this.pdfViewer.underlineSettings.color,this.strikethroughColor=this.strikethroughColor?this.strikethroughColor:this.pdfViewer.strikethroughSettings.color,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity,this.annotationAddMode="UI Drawn Annotation";var y,w=0,S=this.getAngle(this.pdfViewerBase.pageSize[i].rotation);if(g){switch(g.setLineDash([]),e){case"Highlight":this.isNewAnnotation=!0,f="Highlight",u="Guest"!==this.pdfViewer.highlightSettings.author&&this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",y=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:["None"],c(this.highlightOpacity)&&(this.highlightOpacity=1),(p=this.getAddedAnnotation(e,this.highlightColor,this.highlightOpacity,t,u,f,m,"",!1,n,i,o,a,l,h,y,w))&&this.renderHighlightAnnotation(p.bounds,p.opacity,p.color,g,r,p.isPrint,i);break;case"Strikethrough":this.isNewAnnotation=!0,f="Strikethrough",u="Guest"!==this.pdfViewer.strikethroughSettings.author&&this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",y=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:["None"],d&&""!==d.style.transform&&(w=d.style.transform.startsWith("rotate(90deg)")?Math.abs(S-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(S-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(S-270):S),c(this.strikethroughOpacity)&&(this.strikethroughOpacity=1),(p=this.getAddedAnnotation(e,this.strikethroughColor,this.strikethroughOpacity,t,u,f,m,"",!1,n,i,o,a,l,h,y,w))&&this.renderStrikeoutAnnotation(p.bounds,p.opacity,p.color,g,r,i,p.isPrint,p.annotationRotation);break;case"Underline":this.isNewAnnotation=!0,f="Underline",u="Guest"!==this.pdfViewer.underlineSettings.author&&this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",y=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:["None"],d&&""!==d.style.transform&&(w=d.style.transform.startsWith("rotate(90deg)")?Math.abs(S-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(S-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(S-270):S),c(this.underlineOpacity)&&(this.underlineOpacity=1),(p=this.getAddedAnnotation(e,this.underlineColor,this.underlineOpacity,t,u,f,m,"",!1,n,i,o,a,l,h,y,w))&&this.renderUnderlineAnnotation(p.bounds,p.opacity,p.color,g,r,i,p.isPrint,p.annotationRotation)}if(this.isNewAnnotation=!1,p){this.pdfViewerBase.updateDocumentEditedProperty(!0);var I={opacity:p.opacity,color:p.color,author:p.author,subject:p.subject,modifiedDate:p.modifiedDate};this.isMultiAnnotation(e)?this.triggerAddEvent&&this.pdfViewer.fireAnnotationAdd(i,p.annotName,e,p.bounds,I,o,a,l,null,this.multiPageCollection):this.pdfViewer.fireAnnotationAdd(i,p.annotName,e,p.bounds,I,o,a,l)}E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(e)}},s.prototype.getAngle=function(e){var t=0;if(e)switch(e){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},s.prototype.retreiveTextIndex=function(e){if(""===e.textMarkupContent){this.retreieveSelection(e,null);var t=this.getDrawnBounds();window.getSelection().removeAllRanges(),t[0]&&t[0].bounds&&(this.updateAnnotationContent(e,t[0]),e.textMarkupContent=t[0].textContent,e.textMarkupStartIndex=t[0].startIndex,e.textMarkupEndIndex=t[0].endIndex)}return e},s.prototype.renderHighlightAnnotation=function(e,t,i,n,r,o,a){for(var l=this.pdfViewerBase.getZoomRatio(r),h=0;h<e.length;h++){var d=e[h];n.beginPath();var p=d.X?d.X:d.left,u=d.Y?d.Y:d.top,f=d.Width?d.Width:d.width,g=d.Height?d.Height:d.height;p=p||d.x,u=u||d.y,g-=1,n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+a?o&&(n.rect(p*l,u*l,f*l,g*l),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill()):(n.rect(p*l,u*l,f*l,g*l),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill())}n.save()},s.prototype.renderStrikeoutAnnotation=function(e,t,i,n,r,o,a,l){for(var h=0;h<e.length;h++){var d=this.getProperBounds(e[h]),p=this.pdfViewerBase.pageSize[o],u=this.pdfViewerBase.getZoomRatio(r),f=p.rotation;if(l){var g=this.getAngle(f);f=Math.abs(l-g)/90}n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+o?a&&(1===f?this.drawLine(t,d.x+d.width/2,d.y,d.width,d.height,i,u,n,o,l):2===f?this.drawLine(t,d.x,d.y+d.height/2,d.width,d.height,i,u,n,o,l):3===f?this.drawLine(t,d.x,d.y,d.width/2,d.height,i,u,n,o,l):this.drawLine(t,d.x,d.y,d.width,d.height/2,i,u,n,o,l)):1===f?this.drawLine(t,d.x+d.width/2,d.y,d.width,d.height,i,u,n,o,l):2===f?this.drawLine(t,d.x,d.y+d.height/2,d.width,d.height,i,u,n,o,l):3===f?this.drawLine(t,d.x,d.y,d.width/2,d.height,i,u,n,o,l):this.drawLine(t,d.x,d.y,d.width,d.height/2,i,u,n,o,l)}},s.prototype.renderUnderlineAnnotation=function(e,t,i,n,r,o,a,l){for(var h=0;h<e.length;h++){var d=this.getProperBounds(e[h]),p=this.pdfViewerBase.getZoomRatio(r);n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+o?a&&this.drawLine(t,d.x,d.y,d.width,d.height,i,p,n,o,l):this.drawLine(t,d.x,d.y,d.width,d.height,i,p,n,o,l)}},s.prototype.getProperBounds=function(e){var t=e.X?e.X:e.left,i=e.Y?e.Y:e.top;return{x:t=t||e.x,y:i=i||e.y,width:e.Width?e.Width:e.width,height:e.Height?e.Height:e.height}},s.prototype.drawLine=function(e,t,i,n,r,o,a,l,h,d){l.globalAlpha=e,X()&&(i-=1),r-=1,l.beginPath();var u=this.pdfViewerBase.pageSize[h].rotation;if(d){var f=this.getAngle(u);u=Math.abs(d-f)/90}1===u?(l.moveTo(t*a,i*a),l.lineTo(t*a,(i+r)*a)):2===u?(l.moveTo(t*a,i*a),l.lineTo((n+t)*a,i*a)):3===u?(l.moveTo((n+t)*a,i*a),l.lineTo((n+t)*a,(i+r)*a)):(l.moveTo(t*a,(i+r)*a),l.lineTo((n+t)*a,(i+r)*a)),l.lineWidth=1,l.strokeStyle=o,l.closePath(),l.msFillRule="nonzero",l.stroke()},s.prototype.printTextMarkupAnnotations=function(e,t,i,n,r,o){var a=F("canvas",{id:this.pdfViewer.element.id+"_print_annotation_layer_"+t});a.style.width="816px",a.style.height="1056px";var l=this.pdfViewerBase.pageSize[t].width,h=this.pdfViewerBase.pageSize[t].height,d=this.pdfViewerBase.getZoomFactor(),p=this.pdfViewerBase.getZoomRatio(d);a.height=h*p,a.width=l*p;var u=this.getAnnotations(t,null,"_annotations_textMarkup"),f=this.getAnnotations(t,null,"_annotations_shape"),g=this.getAnnotations(t,null,"_annotations_shape_measure"),m=this.getAnnotations(t,null,"_annotations_stamp"),y=this.getAnnotations(t,null,"_annotations_sticky");m||f||y||g?this.pdfViewer.renderDrawing(a,t):(this.pdfViewer.annotation.renderAnnotations(t,n,r,null,a),this.pdfViewer.annotation.stampAnnotationModule.renderStampAnnotations(i,t,a),this.pdfViewer.annotation.stickyNotesAnnotationModule.renderStickyNotesAnnotations(o,t,a));var b=this.pdfViewerBase.getZoomFactor();return this.renderTextMarkupAnnotations(u?null:e,t,a,b),a.toDataURL()},s.prototype.saveTextMarkupAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),r=0;r<n.length;r++){var o=[],a=n[r];if(a){for(var l=0;a.annotations.length>l;l++){if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[l]),this.pdfViewerBase.isJsonExported)if(a.annotations[l].isAnnotationRotated)a.annotations[l].bounds=this.getBoundsForSave(a.annotations[l].bounds,r);else{var h=this.pdfViewerBase.pageSize[a.pageIndex];h&&(a.annotations[l].annotationRotation=h.rotation)}a.annotations[l].bounds=JSON.stringify(this.getBoundsForSave(a.annotations[l].bounds,r)),a.annotations[l].color=JSON.stringify(this.getRgbCode(a.annotations[l].color)),a.annotations[l].rect=JSON.stringify(a.annotations[l].rect)}o=a.annotations}t[a.pageIndex]=o}return JSON.stringify(t)},s.prototype.deleteTextMarkupAnnotation=function(){if(this.currentTextMarkupAnnotation){var e=!1;if(this.currentTextMarkupAnnotation.annotationSettings&&(e=this.currentTextMarkupAnnotation.annotationSettings.isLock,this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",this.currentTextMarkupAnnotation)&&(e=!1)),!e){var t=null;this.showHideDropletDiv(!0);var i=this.currentTextMarkupAnnotation;this.currentTextMarkupAnnotation.isMultiSelect&&i.annotNameCollection&&this.deletMultiPageAnnotation(i);var n=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(n){for(var r=0;r<n.length;r++)if(this.currentTextMarkupAnnotation.annotName===n[r].annotName){t=n.splice(r,1)[0],this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,r,t,"Text Markup Deleted",null),this.currentAnnotationIndex=r,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(t,"textMarkup");var o=document.getElementById(t.annotName);o&&(1===o.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(o):o.remove())}this.pdfViewer.annotationModule.updateAnnotationCollection(this.currentTextMarkupAnnotation),this.manageAnnotations(n,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.updateImportAnnotationCollection(this.currentTextMarkupAnnotation,this.currentTextMarkupAnnotation.pageNumber,"textMarkupAnnotation");var a=this.currentTextMarkupAnnotation.annotName,l=this.currentTextMarkupAnnotation.bounds;this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var h=this.multiPageCollectionList(i);h.length>0?(h.push(t),this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,a,t.textMarkupAnnotationType,l,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex,h)):this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,a,t.textMarkupAnnotationType,l,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex),this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null,E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar(),this.pdfViewer.toolbarModule.showToolbar(!0))}}}},s.prototype.modifyColorProperty=function(e){if(this.currentTextMarkupAnnotation){var t=this.modifyAnnotationProperty("Color",e,null);this.manageAnnotations(t,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var i=this.currentTextMarkupAnnotation,n=this.multiPageCollectionList(i);n.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex,n),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex),this.currentAnnotationIndex=null)}},s.prototype.modifyOpacityProperty=function(e,t){if(this.currentTextMarkupAnnotation){var i;if((i=t?this.modifyAnnotationProperty("Opacity",t,"changed"):this.modifyAnnotationProperty("Opacity",e.value/100,e.name))&&(this.manageAnnotations(i,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),t||"changed"===e.name)){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.currentTextMarkupAnnotation,r=this.multiPageCollectionList(n);r.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,r),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex),this.currentAnnotationIndex=null)}}},s.prototype.modifyAnnotationProperty=function(e,t,i,n){var r=this.currentTextMarkupAnnotation;this.pdfViewer.annotationModule.isFormFieldShape=!1,r.isMultiSelect&&r.annotNameCollection&&this.modifyMultiPageAnnotations(r,e,t);var o=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(o)for(var a=0;a<o.length;a++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(o[a])&&("Color"===e?o[a].color=t:"Opacity"===e?o[a].opacity=t:"AnnotationSettings"===e&&(o[a].annotationSettings={isLock:t}),o[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=a,(null===i||"changed"===i)&&this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,a,this.currentTextMarkupAnnotation,"Text Markup Property modified",e),this.currentTextMarkupAnnotation=o[a],this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(o[a]),this.pdfViewer.annotationModule.storeAnnotationCollections(o[a],this.selectTextMarkupCurrentPage));return o},s.prototype.undoTextMarkupAction=function(e,t,i,n){var r=this.getAnnotations(t,null);if(r)if("Text Markup Added"===n){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(r[i],"textMarkup");var o=document.getElementById(r[i].annotName);o&&(1===o.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(o):o.parentElement.removeChild(o)),r.splice(i,1)}else"Text Markup Deleted"===n&&(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType),r.splice(i,0,e));this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(r,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null)},s.prototype.undoRedoPropertyChange=function(e,t,i,n,r){var o=this.getAnnotations(t,null);if(o){if("Color"===n){var a=o[i].color;o[i].color=e.color,e.color=a}else{var l=o[i].opacity;o[i].opacity=e.opacity,e.opacity=l}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),r&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}return this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(o,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),e},s.prototype.redoTextMarkupAction=function(e,t,i,n){var r=this.getAnnotations(t,null);if(r)if("Text Markup Added"===n)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType),r.push(e);else if("Text Markup Deleted"===n){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(r[i],"textMarkup");var o=document.getElementById(r[i].annotName);o&&(1===o.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(o):o.remove()),r.splice(i,1)}this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(r,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null)},s.prototype.saveNoteContent=function(e,t){var i=this.getAnnotations(e,null);if(i)for(var n=0;n<i.length;n++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[n])&&(i[n].note=t);this.manageAnnotations(i,e),this.pdfViewerBase.updateDocumentEditedProperty(!0)},s.prototype.clearCurrentAnnotation=function(){if(!this.isExtended){this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?(this.selectTextMarkupCurrentPage=this.selectTextMarkupCurrentPage,this.currentTextMarkupAnnotation=this.currentTextMarkupAnnotation):(this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null);var e=!1;this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&(e=!0),e||this.enableAnnotationPropertiesTool(!1)}},s.prototype.clearCurrentAnnotationSelection=function(e,t){this.isAnnotationSelect=!!t;for(var n=e+2<this.pdfViewerBase.pageCount?e+2:this.pdfViewerBase.pageCount-1,r=e-2>=0?e-2:0;r<=n;r++)this.clearAnnotationSelection(r)},s.prototype.getBoundsForSave=function(e,t){for(var i=[],n=0;n<e.length;n++){var r=this.getAnnotationBounds(e[n],t);i.push(r)}return i},s.prototype.getAnnotationBounds=function(e,t){var i=e.left?e.left:e.Left,n=e.top?e.top:e.Top,r=e.height?e.height:e.Height,o=e.width?e.width:e.Width,a=this.pdfViewerBase.pageSize[t];return i=i||e.x,n=n||e.y,a?1===a.rotation?{left:n,top:a.width-(i+o),width:r,height:o}:2===a.rotation?{left:a.width-i-o,top:a.height-n-r,width:o,height:r}:3===a.rotation?{left:a.height-n-r,top:i,width:r,height:o}:{left:i,top:n,width:o,height:r}:{left:i,top:n,width:o,height:r}},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");c(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(","));var i=parseInt(t[0].split("(")[1]),n=parseInt(t[1]),r=parseInt(t[2]);return{a:parseInt(t[3]),r:i,g:n,b:r}},s.prototype.getDrawnBounds=function(){var e=[],t=window.getSelection();if(null!==t.anchorNode){var i=document.createRange(),n=this.pdfViewerBase.textLayer.isBackWardSelection(t);if(t.anchorNode===t.focusNode){var r=this.pdfViewerBase.textLayer.getPageIndex(t.anchorNode);if(!isNaN(r)){var l=this.pdfViewerBase.getElement("_pageDiv_"+r).getBoundingClientRect();this.pdfViewerBase.isMixedSizeDocument&&(l=this.pdfViewerBase.getElement("_textLayer_"+r).getBoundingClientRect()),n?(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)):t.anchorOffset<t.focusOffset?(i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset)):(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset));var h=i.getBoundingClientRect(),d=this.getIndexNumbers(r,i.toString(),i.commonAncestorContainer.textContent.toString()),p={left:this.getDefaultValue(h.left-l.left),top:this.getDefaultValue(h.top-l.top),width:this.getDefaultValue(h.width),height:this.getDefaultValue(h.height),right:this.getDefaultValue(h.right-l.left),bottom:this.getDefaultValue(h.bottom-l.top)},u=[];u.push(p),e.push({pageIndex:r,bounds:u,rect:{left:p.left,top:p.top,right:p.right,bottom:p.bottom},startIndex:d.startIndex,endIndex:d.endIndex,textContent:i.toString()})}}else{var g=void 0,m=void 0,y=void 0,b=void 0;n?(g=t.focusNode,y=t.focusOffset,m=t.anchorNode,b=t.anchorOffset):(g=t.anchorNode,y=t.anchorOffset,m=t.focusNode,b=t.focusOffset);for(var w=this.pdfViewerBase.textLayer.getPageIndex(g),S=this.pdfViewerBase.textLayer.getTextIndex(g,w),I=this.pdfViewerBase.textLayer.getPageIndex(m),x=this.pdfViewerBase.textLayer.getTextIndex(m,I),T=0,L=0,N=0,O=w;O<=I;O++){var _=[],B=void 0,q=void 0,W=void 0,j=void 0,G=this.pdfViewerBase.getElement("_textLayer_"+O).childNodes;l=this.pdfViewerBase.getElement("_pageDiv_"+O).getBoundingClientRect(),this.pdfViewerBase.isMixedSizeDocument&&(l=this.pdfViewerBase.getElement("_textLayer_"+O).getBoundingClientRect());for(var Y=N=O===w?S:0;Y<G.length;Y++){var U=G[Y];Y===N?(B=N,W=O===w?y:0):(q=Y,j=O===I?b:U.textContent.length),T=Y===S&&O===w?y:0,L=Y===x&&O===I?b:U.textContent.length;for(var J=0;J<U.childNodes.length;J++){var $=U.childNodes[J];i.setStart($,T),i.setEnd($,L)}if(h=i.getBoundingClientRect(),p={left:this.getDefaultValue(h.left-l.left),top:this.getDefaultValue(h.top-l.top),width:this.getDefaultValue(h.width),height:this.getDefaultValue(h.height),right:this.getDefaultValue(h.right-l.left),bottom:this.getDefaultValue(h.bottom-l.top)},_.push(p),i.detach(),O===I&&Y===x)break}q||(q=B),j||(j=L);var ye=this.pdfViewerBase.getElement("_text_"+O+"_"+B).childNodes[0],fe=this.pdfViewerBase.getElement("_text_"+O+"_"+q).childNodes[0],ve=document.createRange();ve.setStart(ye,W),ve.setEnd(fe,j);var Te=ve.getBoundingClientRect(),Ne=ve.toString(),Ue=(d=this.getIndexNumbers(O,Ne),{left:this.getDefaultValue(Te.left-l.left),top:this.getDefaultValue(Te.top-l.top),width:this.getDefaultValue(Te.width),height:this.getDefaultValue(Te.height),right:this.getDefaultValue(Te.right-l.left),bottom:this.getDefaultValue(Te.bottom-l.top)});e.push({pageIndex:O,bounds:_,rect:{left:Ue.left,top:Ue.top,right:Ue.right,bottom:Ue.bottom},startIndex:d.startIndex,endIndex:d.endIndex,textContent:Ne})}}}return t.removeAllRanges(),e},s.prototype.getIndexNumbers=function(e,t,i){var r,o,n=this.pdfViewerBase.getStoredData(e);if(n){for(var a=0,l=n.pageText,h=0;h<e;h++)if(this.pdfViewer.isExtractText){var d=this.pdfViewer.textSearchModule.documentTextCollection[h][h],p=d.pageText?d.pageText:d.PageText;if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection&&this.pdfViewer.textSearchModule.isTextRetrieved)this.pdfViewer.textSearchModule.documentTextCollection[h]&&(a+=p.length);else if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection){if(!(e<=this.pdfViewer.textSearchModule.documentTextCollection.length)){a=0;break}this.pdfViewer.textSearchModule.documentTextCollection[h]&&(a+=p.length)}}o=(r=c(i)?l.indexOf(t)+a:l.indexOf(i)+i.indexOf(t)+a)+(t.length-1)}return{startIndex:r,endIndex:o}},s.prototype.rerenderAnnotationsPinch=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);if(t){var i=this.pdfViewerBase.getElement("_old_annotationCanvas_"+e);i&&(t?(i.id=t.id,t.parentElement.removeChild(t)):i.id=this.pdfViewer.element.id+"_annotationCanvas_"+e,t=i),t.style.width="",t.style.height="",this.pdfViewer.restrictZoomRequest?(t.style.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor()+"px",t.style.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()+"px"):(t.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor(),t.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(null,e,t,this.pdfViewerBase.getZoomFactor())}},s.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.element.id+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},s.prototype.onTextMarkupAnnotationMouseUp=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if(c(t)||isNaN(t))this.pdfViewerBase.isClickedOnScrollBar(e,!0)||(this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t));else{var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.selectedTextMarkup=this.currentTextMarkupAnnotation?this.currentTextMarkupAnnotation:null,this.clearCurrentSelectedAnnotation();var n=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,t,i);if(n&&!window.getSelection().toString()){var r=!1,o=!1;if(n.annotationSettings&&n.annotationSettings.isLock&&(r=n.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(r=!1,o=!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",n)),!r){var a=i.parentElement.getBoundingClientRect();this.annotationClickPosition={x:e.clientX-a.left,y:e.clientY-a.top},this.selectAnnotation(n,i,t,e),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.currentTextMarkupAnnotation.textMarkupAnnotationType),this.currentTextMarkupAnnotation=n,this.selectTextMarkupCurrentPage=t,o||this.enableAnnotationPropertiesTool(!0);var d=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(d&&"block"===d.style.display){var p=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));p&&p.ej2_instances[0].expandItem(!0);var u=document.getElementById(n.annotName);u&&u.firstChild.click()}X()||this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem))}}else this.clearCurrentAnnotation();this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?n&&this.clearCurrentAnnotationSelection(t):this.clearCurrentAnnotationSelection(t)}},s.prototype.onTextMarkupAnnotationTouchEnd=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if(c(t)||isNaN(t))if(null!=this.selectTextMarkupCurrentPage&&E.isDevice&&!this.pdfViewer.enableDesktopMode){var p=this.selectTextMarkupCurrentPage;this.selectTextMarkupCurrentPage=null,this.clearAnnotationSelection(p)}else this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t);else{this.selectedTextMarkup=this.currentTextMarkupAnnotation?this.currentTextMarkupAnnotation:null,this.clearCurrentAnnotationSelection(t);var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.clearCurrentSelectedAnnotation();var n=this.getCurrentMarkupAnnotation(e.touches[0].clientX,e.touches[0].clientY,t,i);if(n){var r=!1;if(n.annotationSettings&&n.annotationSettings.isLock&&(r=n.annotationSettings.isLock),!r){var o=i.parentElement.getBoundingClientRect();this.annotationClickPosition={x:e.touches[0].clientX-o.left,y:e.touches[0].clientY-o.top},this.selectAnnotation(n,i,t,e),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.currentTextMarkupAnnotation.textMarkupAnnotationType),this.currentTextMarkupAnnotation=n,this.selectTextMarkupCurrentPage=t,this.enableAnnotationPropertiesTool(!0);var h=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));h&&h.ej2_instances[0].expandItem(!0);var d=document.getElementById(n.annotName);d&&(E.isDevice||d.firstChild.click())}}else this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(t)}},s.prototype.clearCurrentSelectedAnnotation=function(){if(this.currentTextMarkupAnnotation){this.clearAnnotationSelection(this.selectTextMarkupCurrentPage);var e=this.currentTextMarkupAnnotation;this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageNumber,e),this.clearCurrentAnnotation()}},s.prototype.onTextMarkupAnnotationMouseMove=function(e){var t=e.target,i=parseInt(t.id.split("_text_")[1])||parseInt(t.id.split("_textLayer_")[1])||parseInt(t.id.split("_annotationCanvas_")[1]);if(e.target&&(t.id.indexOf("_text")>-1||t.id.indexOf("_annotationCanvas")>-1||t.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){i=this.pdfViewer.annotation.getEventPageNumber(e);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i),r=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,i,n);if(r){t.style.cursor="pointer";var o=this.pdfViewerBase.getMousePosition(e),a=this.pdfViewerBase.relativePosition(e),l={left:a.x,top:a.y},h={left:o.x,top:o.y},d={opacity:r.opacity,color:r.color,author:r.author,subject:r.subject,modifiedDate:r.modifiedDate};this.pdfViewerBase.isMousedOver=!0,this.pdfViewer.fireAnnotationMouseover(r.annotName,r.pageNumber,r.textMarkupAnnotationType,r.bounds,d,h,l)}else this.pdfViewer.annotationModule.hidePopupNote(),this.pdfViewerBase.isPanMode&&!this.pdfViewerBase.getAnnotationToolStatus()&&(t.style.cursor="grab"),this.pdfViewerBase.isMousedOver&&!this.pdfViewerBase.isFormFieldMousedOver&&(this.pdfViewer.fireAnnotationMouseLeave(i),this.pdfViewerBase.isMousedOver=!1)}},s.prototype.showPopupNote=function(e,t){t.note&&this.pdfViewer.annotationModule.showPopupNote(e,t.color,t.author,t.note,t.textMarkupAnnotationType)},s.prototype.getCurrentMarkupAnnotation=function(e,t,i,n){var r=[];if(n){var o=n.parentElement.getBoundingClientRect();n.clientWidth!==n.parentElement.clientWidth&&(o=n.getBoundingClientRect());var a=e-o.left,l=t-o.top,h=this.getAnnotations(i,null),d=!1;if(h)for(var p=0;p<h.length;p++)for(var u=h[p],f=0;f<u.bounds.length;f++){var g=u.bounds[f],m=g.left?g.left:g.Left,y=g.top?g.top:g.Top,b=g.width?g.width:g.Width,w=g.height?g.height:g.Height;if(a>=this.getMagnifiedValue(m,this.pdfViewerBase.getZoomFactor())&&a<=this.getMagnifiedValue(m+b,this.pdfViewerBase.getZoomFactor())&&l>=this.getMagnifiedValue(y,this.pdfViewerBase.getZoomFactor())&&l<=this.getMagnifiedValue(y+w,this.pdfViewerBase.getZoomFactor()))r.push(u),d=!0;else if(d){d=!1;break}}var S=null;return r.length>1?S=this.compareCurrentAnnotations(r):1===r.length&&(S=r[0]),S}return null},s.prototype.compareCurrentAnnotations=function(e){for(var t,i=null,n=0;n<e.length&&n!==e.length-1;n++){var r=e[n].bounds,o=r[0].left?r[0].left:r[0].Left,l=e[n+1].bounds,h=l[0].left?l[0].left:l[0].Left;o<h||(r[0].top?r[0].top:r[0].Top)<(l[0].top?l[0].top:l[0].Top)?(t=h,i=e[n+1]):(t=o,i=e[n]),t&&n===e.length-2&&t===o&&t===h&&(t=h,i=e[n+1])}return i},s.prototype.clearAnnotationSelection=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);t&&(t.getContext("2d").setLineDash([]),this.pdfViewer.annotationModule.renderAnnotations(e,null,null,null))},s.prototype.selectAnnotation=function(e,t,i,n,r){this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex),this.pdfViewer.clearSelection(this.selectTextMarkupCurrentPage));var o=!1;if(e.annotationSettings&&e.annotationSettings.isLock&&(o=e.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",e)&&(o=!1),!o){var a=!1;this.currentTextMarkupAnnotation||(a=!0),this.selectedTextMarkup&&e&&!r&&(a=this.selectedTextMarkup.annotName!==e.annotName),isNaN(i)||(this.selectTextMarkupCurrentPage=i,this.currentTextMarkupAnnotation=e,e=this.retreiveTextIndex(e),this.currentTextMarkupAnnotation=e),this.isSelectedAnnotation&&this.pdfViewer.textSelectionModule&&(this.pdfViewerBase.isSelection=!0,this.updateAnnotationBounds());var l=n;if(this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e&&l&&!l.touches&&this.updateCurrentResizerPosition(e),this.drawAnnotationSelector(e,this.currentTextMarkupAnnotation,t),e.isMultiSelect&&e.annotNameCollection&&this.selectMultiPageAnnotations(e),""!==e.annotName&&!this.isNewAnnotation&&a){var h=!1;l||(h=!0),this.pdfViewer.annotationModule.annotationSelect(e.annotName,this.selectTextMarkupCurrentPage,e,null,!1,h),this.selectedTextMarkup=null}e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&(this.isTextMarkupAnnotationMode=!0)}},s.prototype.updateCurrentResizerPosition=function(e){if(e||(e=this.currentTextMarkupAnnotation),e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e){var t=this.pdfViewerBase.getElement("_textLayer_"+this.selectTextMarkupCurrentPage);if(t){var i=t.getBoundingClientRect(),r=e.bounds[0].top?e.bounds[0].top:e.bounds[0].Top;this.updateLeftposition((e.bounds[0].left?e.bounds[0].left:e.bounds[0].Left)*this.pdfViewerBase.getZoomFactor()+i.left,i.top+r,!0);var o=e.bounds[e.bounds.length-1],l=o.top?o.top:o.Top;this.updatePosition(((o.left?o.left:o.Left)+(o.width?o.width:o.Width))*this.pdfViewerBase.getZoomFactor()+i.left,l+i.top,!0)}}},s.prototype.drawAnnotationSelectRect=function(e,t,i,n,r,o){var a=this.pdfViewerBase.getZoomRatio();if(e){var l=e.getContext("2d");if(l.setTransform(1,0,0,1,0,0),l.beginPath(),"string"==typeof o.annotationSelectorSettings){(h=0===JSON.parse(o.annotationSelectorSettings).selectorLineDashArray.length?[4]:JSON.parse(o.annotationSelectorSettings).selectorLineDashArray).length>2&&(h=[h[0],h[1]]),l.setLineDash(h),l.globalAlpha=1,l.rect(t*a,i*a,n*a,r*a),l.closePath();var d=""===JSON.parse(o.annotationSelectorSettings).selectionBorderColor?"#0000ff":JSON.parse(o.annotationSelectorSettings).selectionBorderColor;l.strokeStyle=d,l.lineWidth=1===JSON.parse(o.annotationSelectorSettings).selectionBorderThickness?1:o.annotationSelectorSettings.selectionBorderThickness,l.stroke(),l.save()}else{var h;(h=0===o.annotationSelectorSettings.selectorLineDashArray.length?[4]:o.annotationSelectorSettings.selectorLineDashArray).length>2&&(h=[h[0],h[1]]),l.setLineDash(h),l.globalAlpha=1,l.rect(t*a,i*a,n*a,r*a),l.closePath(),l.strokeStyle=d=""===o.annotationSelectorSettings.selectionBorderColor?"#0000ff":o.annotationSelectorSettings.selectionBorderColor,l.lineWidth=o.annotationSelectorSettings.selectionBorderThickness?1:o.annotationSelectorSettings.selectionBorderThickness,l.stroke(),l.save()}}},s.prototype.enableAnnotationPropertiesTool=function(e){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container")),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&(E.isDevice||this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(e)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled&&0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(e);var t=e;this.isTextMarkupAnnotationMode&&(t=!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(t),this.currentTextMarkupAnnotation?X()?this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,this.currentTextMarkupAnnotation.color):this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement,this.currentTextMarkupAnnotation.color):c(this.isTextMarkupAnnotationMode)||this.isTextMarkupAnnotationMode?this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker():X()?this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,"#000000"):this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement,"#000000")}},s.prototype.maintainAnnotationSelection=function(){if(this.currentTextMarkupAnnotation){var e=this.pdfViewerBase.getElement("_annotationCanvas_"+this.selectTextMarkupCurrentPage);e&&this.selectAnnotation(this.currentTextMarkupAnnotation,e,this.selectTextMarkupCurrentPage)}},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");var r=this.pdfViewer.annotationModule.getPageCollection(n,t);n[r]&&(n[r].annotations=e);var o=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]=o:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_textMarkup",o)}},s.prototype.getAnnotations=function(e,t,i){var n;(null==i||null==i)&&(i="_annotations_textMarkup");var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),r){var o=JSON.parse(r),a=this.pdfViewer.annotationModule.getPageCollection(o,e);n=o[a]?o[a].annotations:t}else n=t;return n},s.prototype.getAddedAnnotation=function(e,t,i,n,r,o,a,l,h,d,p,u,f,g,m,y,b){var w=a||this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),S=this.pdfViewer.annotation.createGUID(),I=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("textMarkup",p+1,e);I&&(document.getElementById(I).id=S);var x=this.getAnnotationSettings(e),T=this.getIsPrintValue(e),L={textMarkupAnnotationType:e,color:t,opacity:i,bounds:n,author:r,allowedInteractions:y,subject:o,modifiedDate:w,note:l,rect:d,annotName:S,comments:[],review:{state:"",stateModel:"",author:r,modifiedDate:w},shapeAnnotationType:"textMarkup",pageNumber:p,textMarkupContent:u,textMarkupStartIndex:f,textMarkupEndIndex:g,isMultiSelect:m,annotationSelectorSettings:this.getSelector(e),customData:this.pdfViewer.annotation.getTextMarkupData(o),annotationAddMode:this.annotationAddMode,annotationSettings:x,isPrint:T,isCommentLock:h,isAnnotationRotated:!1,annotationRotation:b};m&&this.multiPageCollection.push(L);var N=!1;m&&this.isExtended&&(N=!0),document.getElementById(S)&&!N&&document.getElementById(S).addEventListener("mouseup",this.annotationDivSelect(L,p));var O=this.pdfViewer.annotationModule.storeAnnotations(p,L,"_annotations_textMarkup");return this.pdfViewer.annotationModule.addAction(p,O,L,"Text Markup Added",null),L},s.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Highlight"===e&&this.pdfViewer.highlightSettings.annotationSelectorSettings?t=this.pdfViewer.highlightSettings.annotationSelectorSettings:"Underline"===e&&this.pdfViewer.underlineSettings.annotationSelectorSettings?t=this.pdfViewer.underlineSettings.annotationSelectorSettings:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.annotationSelectorSettings&&(t=this.pdfViewer.strikethroughSettings.annotationSelectorSettings),t},s.prototype.getAnnotationSettings=function(e){var t={isLock:!1};return("Highlight"===e&&this.pdfViewer.highlightSettings.isLock||"Underline"===e&&this.pdfViewer.underlineSettings.isLock||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.isLock||this.pdfViewer.annotationSettings.isLock)&&(t={isLock:!0}),t},s.prototype.getIsPrintValue=function(e){var t=!0;return"Highlight"===e&&(t=this.pdfViewer.highlightSettings.isPrint),"Underline"===e&&(t=this.pdfViewer.underlineSettings.isPrint),"Strikethrough"===e&&(t=this.pdfViewer.strikethroughSettings.isPrint),c(t)&&(t=!0),t},s.prototype.annotationDivSelect=function(e,t){var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);if(this.selectAnnotation(e,i,t),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();var n=!1;e.annotationSettings&&e.annotationSettings.isLock&&(n=e.annotationSettings.isLock),n?(this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e)&&(this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker()),this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",e)&&this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0)):(this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker()),this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,X()||this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)}},s.prototype.getPageContext=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=null;return t&&(i=t.getContext("2d")),i},s.prototype.getDefaultValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},s.prototype.getMagnifiedValue=function(e,t){return e*t},s.prototype.saveImportedTextMarkupAnnotations=function(e,t){var i;e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",e.Subject),e.AnnotationSettings=e.AnnotationSettings&&e.AnnotationSettings.isLock?{isLock:e.AnnotationSettings.isLock}:this.getAnnotationSettings(e.TextMarkupAnnotationType),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={textMarkupAnnotationType:e.TextMarkupAnnotationType,color:e.Color,opacity:e.Opacity,allowedInteractions:e.allowedInteractions,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:"",textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,annotationAddMode:this.annotationAddMode,annotationSettings:e.AnnotationSettings,isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_textMarkup")},s.prototype.updateTextMarkupAnnotationCollections=function(e,t){return e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{textMarkupAnnotationType:e.TextMarkupAnnotationType,allowedInteractions:e.allowedInteractions,color:e.Color,opacity:e.Opacity,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock}},s.prototype.updateTextMarkupSettings=function(e){"highlightSettings"===e&&(this.highlightColor=this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:this.highlightColor,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity?this.pdfViewer.highlightSettings.opacity:this.highlightOpacity),"underlineSettings"===e&&(this.underlineColor=this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:this.underlineColor,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity?this.pdfViewer.underlineSettings.opacity:this.underlineOpacity),"strikethroughSettings"===e&&(this.strikethroughColor=this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:this.strikethroughColor,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity?this.pdfViewer.strikethroughSettings.opacity:this.strikethroughOpacity)},s.prototype.clear=function(){this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.annotationClickPosition=null,window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup")},s.prototype.getOffsetPoints=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x,Y:e[i].y,Width:e[i].width,Height:e[i].height,Left:e[i].x,Top:e[i].y};return t},s.prototype.updateAddAnnotationDetails=function(e,t){t||(t={pageNumber:0});var l,i=null,n=null,r="",o=null,a="",h=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),d=this.pdfViewer.annotation.createGUID();"Highlight"==e?(i=this.pdfViewer.highlightSettings.annotationSelectorSettings?this.pdfViewer.highlightSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.highlightSettings),n=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,r="Highlight",a=t.color?t.color:"#ffff00"):"Underline"==e?(i=this.pdfViewer.underlineSettings.annotationSelectorSettings?this.pdfViewer.underlineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.underlineSettings),n=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,r="Underline",a=t.color?t.color:"#00ff00"):"Strikethrough"==e&&(i=this.pdfViewer.strikethroughSettings.annotationSelectorSettings?this.pdfViewer.strikethroughSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.strikethroughSettings),n=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,r="Strikethrough",a=t.color?t.color:"#ff0000"),o.isLock=!!t.isLock&&t.isLock,l=t.bounds?this.getOffsetPoints(t.bounds):[{X:1,Y:1,Width:100,Height:14,Left:1,Top:1,Location:{X:1,Y:1},Size:{Height:14,IsEmpty:!1,Width:100}}];var p=[];return p[0]={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:n,AnnotName:d,AnnotNameCollection:null,AnnotType:"textMarkup",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:i,AnnotationSettings:o,Author:t.author?t.author:"Guest",Bounds:l,Color:t.color?t.color:a,Comments:null,CreatedDate:h,CustomData:t.customData?t.customData:null,ExistingCustomData:null,EnableMultiPageAnnotation:!!t.enableMultiPageAnnotation&&t.enableMultiPageAnnotation,EnableTextMarkupResizer:!!t.enableTextMarkupResizer&&t.enableTextMarkupResizer,IsCommentLock:!1,IsMultiSelect:!1,IsLock:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,ModifiedDate:"",Note:"",Opacity:t.opacity?t.opacity:1,Rect:{},State:"",StateModel:"",Subject:r,TextMarkupAnnotationType:r},{textMarkupAnnotation:p}},s}(),HAe=function(){function s(e,t){this.measureShapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return Object.defineProperty(s.prototype,"pixelToPointFactor",{get:function(){return.75},enumerable:!0,configurable:!0}),s.prototype.renderMeasureShapeAnnotations=function(e,t,i,n){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape_measure")||i||n)for(var o=0;o<e.length;o++){var a=e[o],l=null;this.measureShapeCount=this.measureShapeCount+1,a.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(a,t,a.AnnotType);var h=void 0;if(a.ShapeAnnotationType){i&&this.pdfViewerBase.isJsonImported&&(a.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(a.Rotate,t,a.Bounds,a.AnnotationRotation),h=this.pdfViewerBase.isPageRotated);var d=null;if(a.VertexPoints)if(d=[],i&&this.pdfViewerBase.isJsonImported)d=this.pdfViewerBase.calculateVertexPoints(a.Rotate,t,a.VertexPoints,a.AnnotationRotation);else for(var p=0;p<a.VertexPoints.length;p++)d.push({x:a.VertexPoints[p].X?a.VertexPoints[p].X:a.VertexPoints[p].x,y:a.VertexPoints[p].Y?a.VertexPoints[p].Y:a.VertexPoints[p].y});a.Bounds&&!0===a.EnableShapeLabel&&(a.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(a.Bounds),a.LabelBorderColor=a.LabelBorderColor?a.LabelBorderColor:a.StrokeColor,a.FontColor=a.FontColor?a.FontColor:a.StrokeColor,a.LabelFillColor=a.LabelFillColor?a.LabelFillColor:a.FillColor,a.FontSize=a.FontSize?a.FontSize:16,a.LabelSettings=a.LabelSettings?a.LabelSettings:this.pdfViewer.shapeLabelSettings),a.AnnotationSettings=a.AnnotationSettings?a.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(a),a.allowedInteractions=a.AllowedInteractions?a.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(a);var m=a.AnnotationSettings.isPrint,y={ratio:a.Calibrate.Ratio,x:this.getNumberFormatArray(a.Calibrate.X),distance:this.getNumberFormatArray(a.Calibrate.Distance),area:this.getNumberFormatArray(a.Calibrate.Area),angle:this.getNumberFormatArray(a.Calibrate.Angle),volume:this.getNumberFormatArray(a.Calibrate.Volume),targetUnitConversion:a.Calibrate.TargetUnitConversion};a.Calibrate.Depth&&(y.depth=a.Calibrate.Depth);var x,T=(l={id:"measure"+this.measureShapeCount,shapeAnnotationType:a.ShapeAnnotationType,author:a.Author,allowedInteractions:a.allowedInteractions,modifiedDate:a.ModifiedDate,subject:a.Subject,note:a.Note,strokeColor:a.StrokeColor,fillColor:a.FillColor,opacity:a.Opacity,thickness:a.Thickness,rectangleDifference:a.RectangleDifference,borderStyle:a.BorderStyle,borderDashArray:a.BorderDashArray,rotateAngle:a.RotateAngle,isCloudShape:a.IsCloudShape,cloudIntensity:a.CloudIntensity,vertexPoints:d,lineHeadStart:a.LineHeadStart,lineHeadEnd:a.LineHeadEnd,isLocked:a.IsLocked,bounds:{left:a.Bounds.X?a.Bounds.X:a.Bounds.x,top:a.Bounds.Y?a.Bounds.Y:a.Bounds.y,width:a.Bounds.Width?a.Bounds.Width:a.Bounds.width,height:a.Bounds.Height?a.Bounds.Height:a.Bounds.height,right:a.Bounds.Right,bottom:a.Bounds.Bottom},caption:a.Caption,captionPosition:a.CaptionPosition,calibrate:y,leaderLength:a.LeaderLength,leaderLineExtension:a.LeaderLineExtension,leaderLineOffset:a.LeaderLineOffset,indent:a.Indent,annotName:a.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(a.Comments,a,a.Author),review:{state:a.State,stateModel:a.StateModel,modifiedDate:a.ModifiedDate,author:a.Author},labelContent:a.LabelContent,enableShapeLabel:a.EnableShapeLabel,labelFillColor:a.LabelFillColor,fontColor:a.FontColor,labelBorderColor:a.LabelBorderColor,fontSize:a.FontSize,labelBounds:a.LabelBounds,annotationSelectorSettings:this.getSettings(a),labelSettings:a.LabelSettings,annotationSettings:a.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(a),isPrint:m,isCommentLock:a.IsCommentLock,isAnnotationRotated:h}).vertexPoints;null==d&&(T=[]),a.AnnotationSelectorSettings=a.AnnotationSelectorSettings?a.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a.allowedInteractions=a.AllowedInteractions?a.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(a),x={id:"measure"+this.measureShapeCount,shapeAnnotationType:this.getShapeType(l),author:l.author,allowedInteractions:a.allowedInteractions,modifiedDate:l.modifiedDate,subject:l.subject,notes:l.note,fillColor:l.fillColor,strokeColor:l.strokeColor,opacity:l.opacity,thickness:l.thickness,borderStyle:l.borderStyle,borderDashArray:l.borderDashArray.toString(),rotateAngle:parseFloat(l.rotateAngle.split("Angle")[1]),isCloudShape:l.isCloudShape,cloudIntensity:l.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(l.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(l.lineHeadStart),vertexPoints:T,bounds:{x:l.bounds.left,y:l.bounds.top,width:l.bounds.width,height:l.bounds.height},leaderHeight:l.leaderLength,pageIndex:t,annotName:l.annotName,comments:l.comments,review:l.review,measureType:this.getMeasureType(l),labelContent:a.LabelContent,enableShapeLabel:a.EnableShapeLabel,labelFillColor:a.LabelFillColor,fontColor:a.FontColor,labelBorderColor:a.LabelBorderColor,fontSize:a.FontSize,labelBounds:a.LabelBounds,annotationSelectorSettings:a.AnnotationSelectorSettings,annotationSettings:l.annotationSettings,annotationAddMode:a.annotationAddMode,isPrint:m,isCommentLock:l.isCommentLock},this.pdfViewer.annotation.storeAnnotations(t,l,"_annotations_shape_measure"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(x.pageIndex,x.annotName,a.ShapeAnnotationType,x.bounds,{opacity:x.opacity,strokeColor:x.strokeColor,thickness:x.thickness,modifiedDate:x.modifiedDate,width:x.bounds.width,height:x.bounds.height}),this.pdfViewer.add(x)}}}else e.shapeAnnotationType&&(l=this.createAnnotationObject(e),this.pdfViewer.annotationModule.isFormFieldShape=!1,this.pdfViewer.annotationModule.storeAnnotations(t,l,"_annotations_shape_measure"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e))},s.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.Subject)},s.prototype.setAnnotationType=function(e){var t="Guest";switch(this.updateMeasureproperties(),this.pdfViewerBase.disableTextSelectionMode(),e){case"Distance":this.currentAnnotationMode="Distance",this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:"Guest",this.pdfViewer.drawingObject={sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceEndHead),measureType:"Distance",fillColor:this.distanceFillColor,notes:"",strokeColor:this.distanceStrokeColor,leaderHeight:this.leaderLength,opacity:this.distanceOpacity,thickness:this.distanceThickness,borderDashArray:this.distanceDashArray.toString(),shapeAnnotationType:"Distance",author:t,subject:"Distance calculation",isCommentLock:!1},this.pdfViewer.tool="Distance";break;case"Perimeter":this.currentAnnotationMode="Perimeter",this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"LineWidthArrowHead",fillColor:this.perimeterFillColor,notes:"",strokeColor:this.perimeterStrokeColor,opacity:this.perimeterOpacity,thickness:this.perimeterThickness,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterEndHead),measureType:"Perimeter",borderDashArray:this.perimeterDashArray.toString(),author:t,subject:"Perimeter calculation",isCommentLock:!1},this.pdfViewer.tool="Perimeter";break;case"Area":this.currentAnnotationMode="Area";var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",fillColor:this.areaFillColor,notes:"",strokeColor:this.areaStrokeColor,thickness:this.areaThickness,opacity:this.areaOpacity,measureType:"Area",modifiedDate:r,borderStyle:"",borderDashArray:"0",author:t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:"Guest",subject:"Area calculation",isCommentLock:!1},this.pdfViewer.tool="Polygon";break;case"Radius":this.currentAnnotationMode="Radius";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"Radius",fillColor:this.radiusFillColor,notes:"",strokeColor:this.radiusStrokeColor,opacity:this.radiusOpacity,thickness:this.radiusThickness,measureType:"Radius",modifiedDate:o,borderStyle:"",borderDashArray:"0",author:t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:"Guest",subject:"Radius calculation",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Volume":this.currentAnnotationMode="Volume";var a=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",notes:"",fillColor:this.volumeFillColor,strokeColor:this.volumeStrokeColor,opacity:this.volumeOpacity,thickness:this.volumeThickness,measureType:"Volume",modifiedDate:a,borderStyle:"",borderDashArray:"0",author:t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:"Guest",subject:"Volume calculation",isCommentLock:!1},this.pdfViewer.tool="Polygon"}},s.prototype.updateMeasureproperties=function(){this.distanceFillColor=this.pdfViewer.distanceSettings.fillColor?this.pdfViewer.distanceSettings.fillColor:"#ff0000",this.distanceStrokeColor=this.pdfViewer.distanceSettings.strokeColor?this.pdfViewer.distanceSettings.strokeColor:"#ff0000",this.distanceOpacity=this.pdfViewer.distanceSettings.opacity?this.pdfViewer.distanceSettings.opacity:1,this.distanceThickness=this.pdfViewer.distanceSettings.thickness?this.pdfViewer.distanceSettings.thickness:1,this.distanceDashArray=this.pdfViewer.distanceSettings.borderDashArray?this.pdfViewer.distanceSettings.borderDashArray:0,this.leaderLength=null!=this.pdfViewer.distanceSettings.leaderLength?this.pdfViewer.distanceSettings.leaderLength:40,this.distanceStartHead=this.pdfViewer.distanceSettings.lineHeadStartStyle?this.pdfViewer.distanceSettings.lineHeadStartStyle:"Closed",this.distanceEndHead=this.pdfViewer.distanceSettings.lineHeadEndStyle?this.pdfViewer.distanceSettings.lineHeadEndStyle:"Closed",this.perimeterFillColor=this.pdfViewer.perimeterSettings.fillColor?this.pdfViewer.perimeterSettings.fillColor:"#ffffff00",this.perimeterStrokeColor=this.pdfViewer.perimeterSettings.strokeColor?this.pdfViewer.perimeterSettings.strokeColor:"#ff0000",this.perimeterOpacity=this.pdfViewer.perimeterSettings.opacity?this.pdfViewer.perimeterSettings.opacity:1,this.perimeterThickness=this.pdfViewer.perimeterSettings.thickness?this.pdfViewer.perimeterSettings.thickness:1,this.perimeterDashArray=this.pdfViewer.perimeterSettings.borderDashArray?this.pdfViewer.perimeterSettings.borderDashArray:0,this.perimeterStartHead=this.pdfViewer.perimeterSettings.lineHeadStartStyle?this.pdfViewer.perimeterSettings.lineHeadStartStyle:"Open",this.perimeterEndHead=this.pdfViewer.perimeterSettings.lineHeadEndStyle?this.pdfViewer.perimeterSettings.lineHeadEndStyle:"Open",this.areaFillColor=this.pdfViewer.areaSettings.fillColor?this.pdfViewer.areaSettings.fillColor:"#ffffff00",this.areaStrokeColor=this.pdfViewer.areaSettings.strokeColor?this.pdfViewer.areaSettings.strokeColor:"#ff0000",this.areaOpacity=this.pdfViewer.areaSettings.opacity?this.pdfViewer.areaSettings.opacity:1,this.areaThickness=this.pdfViewer.areaSettings.thickness?this.pdfViewer.areaSettings.thickness:1,this.radiusFillColor=this.pdfViewer.radiusSettings.fillColor?this.pdfViewer.radiusSettings.fillColor:"#ffffff00",this.radiusStrokeColor=this.pdfViewer.radiusSettings.strokeColor?this.pdfViewer.radiusSettings.strokeColor:"#ff0000",this.radiusOpacity=this.pdfViewer.radiusSettings.opacity?this.pdfViewer.radiusSettings.opacity:1,this.radiusThickness=this.pdfViewer.radiusSettings.thickness?this.pdfViewer.radiusSettings.thickness:1,this.volumeFillColor=this.pdfViewer.volumeSettings.fillColor?this.pdfViewer.volumeSettings.fillColor:"#ffffff00",this.volumeStrokeColor=this.pdfViewer.volumeSettings.strokeColor?this.pdfViewer.volumeSettings.strokeColor:"#ff0000",this.volumeOpacity=this.pdfViewer.volumeSettings.opacity?this.pdfViewer.volumeSettings.opacity:1,this.volumeThickness=this.pdfViewer.volumeSettings.thickness?this.pdfViewer.volumeSettings.thickness:1,this.unit=this.pdfViewer.measurementSettings.conversionUnit.toLowerCase(),this.displayUnit=this.pdfViewer.measurementSettings.displayUnit.toLowerCase(),this.ratio=this.pdfViewer.measurementSettings.scaleRatio,this.volumeDepth=this.pdfViewer.measurementSettings.depth,this.scaleRatioString="1 "+this.unit+" = "+this.ratio.toString()+" "+this.displayUnit},s.prototype.createAnnotationObject=function(e){var t,i,n=this.pdfViewer.annotation.createGUID(),r=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape_measure",e.pageIndex+1,e.measureType);r&&(document.getElementById(r).id=n),e.annotName=n,e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.subject),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(n,e.notes),e.wrapper.bounds?(t={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={left:0,top:0,height:0,width:0,right:0,bottom:0},i={left:0,top:0,height:0,width:0,right:0,bottom:0});var o=parseInt(e.borderDashArray);o=isNaN(o)?0:o;var a={ratio:this.scaleRatioString,x:[this.createNumberFormat("x")],distance:[this.createNumberFormat("d")],area:[this.createNumberFormat("a")]};"Volume"===e.measureType&&(a.depth=this.volumeDepth);var l=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0),h=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);e.isPrint=l.isPrint;var d=this.pdfViewer.shapeLabelSettings,p={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:d.labelHeight,labelWidth:d.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.measureType),author:e.author,allowedInteractions:h,subject:e.subject,note:e.notes,strokeColor:e.strokeColor,fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,borderStyle:e.borderStyle,borderDashArray:o,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:l.isLock,leaderLength:e.leaderHeight,leaderLineExtension:2,leaderLineOffset:0,calibrate:a,caption:!0,captionPosition:"Top",indent:this.getIndent(e.measureType),annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,labelBorderColor:e.labelBorderColor,fontColor:e.fontColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.subject),labelSettings:p,annotationSettings:l,customData:this.pdfViewer.annotation.getMeasureData(e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}},s.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Distance calculation"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?t=this.pdfViewer.distanceSettings.annotationSelectorSettings:"Perimeter calculation"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?t=this.pdfViewer.perimeterSettings.annotationSelectorSettings:"Area calculation"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?t=this.pdfViewer.areaSettings.annotationSelectorSettings:"Radius calculation"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?t=this.pdfViewer.radiusSettings.annotationSelectorSettings:"Volume calculation"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings&&(t=this.pdfViewer.volumeSettings.annotationSelectorSettings),t},s.prototype.getShapeAnnotType=function(e){var t;switch(e){case"Distance":t="Line";break;case"Perimeter":t="Polyline";break;case"Area":case"Volume":t="Polygon";break;case"Radius":t="Circle"}return t},s.prototype.getShapeType=function(e){var t;return"Line"===e.shapeAnnotationType?t="Distance":"Polyline"===e.shapeAnnotationType?t="LineWidthArrowHead":"Polygon"===e.shapeAnnotationType&&"PolygonDimension"===e.indent?t="Polygon":"Polygon"===e.shapeAnnotationType&&"PolygonRadius"===e.indent||"Circle"===e.shapeAnnotationType?t="Radius":"Polygon"===e.shapeAnnotationType&&"PolygonVolume"===e.indent&&(t="Polygon"),t},s.prototype.getMeasureType=function(e){var t;return"Line"===e.shapeAnnotationType?t="Distance":"Polyline"===e.shapeAnnotationType?t="Perimeter":"Polygon"===e.shapeAnnotationType&&"PolygonDimension"===e.indent?t="Area":"Polygon"===e.shapeAnnotationType&&"PolygonRadius"===e.indent||"Circle"===e.shapeAnnotationType?t="Radius":"Polygon"===e.shapeAnnotationType&&"PolygonVolume"===e.indent&&(t="Volume"),t},s.prototype.getIndent=function(e){var t;switch(e){case"Distance":t="LineDimension";break;case"Perimeter":t="PolyLineDimension";break;case"Area":t="PolygonDimension";break;case"Radius":t="PolygonRadius";break;case"Volume":t="PolygonVolume"}return t},s.prototype.getNumberFormatArray=function(e){var t=new Array;if(e)for(var i=0;i<e.length;i++)t[i]={unit:e[i].Unit,fractionalType:e[i].FractionalType,conversionFactor:e[i].ConversionFactor,denominator:e[i].Denominator,formatDenominator:e[i].FormatDenominator};return t},s.prototype.createNumberFormat=function(e){var t=1,i=this.displayUnit;return"x"===e&&(t=this.getFactor(this.unit)),"a"===e&&(i="sq "+this.displayUnit),{unit:i,fractionalType:"D",conversionFactor:t,denominator:100,formatDenominator:!1}},s.prototype.saveMeasureShapeAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),r=0;r<n.length;r++){var o=[],a=n[r];if(a){for(var l=0;a.annotations.length>l;l++){if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[l]),this.pdfViewerBase.isJsonExported)if(a.annotations[l].isAnnotationRotated)a.annotations[l].bounds=this.pdfViewer.annotation.getBounds(a.annotations[l].bounds,a.pageIndex),a.annotations[l].vertexPoints=this.pdfViewer.annotation.getVertexPoints(a.annotations[l].vertexPoints,a.pageIndex);else{var h=this.pdfViewerBase.pageSize[a.pageIndex];h&&(a.annotations[l].annotationRotation=h.rotation)}if(a.annotations[l].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[l].bounds,a.pageIndex)),a.annotations[l].strokeColor=JSON.stringify(this.getRgbCode(a.annotations[l].strokeColor)),a.annotations[l].fillColor=JSON.stringify(this.getRgbCode(a.annotations[l].fillColor)),a.annotations[l].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(a.annotations[l].vertexPoints,a.pageIndex)),null!==a.annotations[l].rectangleDifference&&(a.annotations[l].rectangleDifference=JSON.stringify(a.annotations[l].rectangleDifference)),a.annotations[l].calibrate=this.getStringifiedMeasure(a.annotations[l].calibrate),!0===a.annotations[l].enableShapeLabel){a.annotations[l].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(a.annotations[l].bounds),a.pageIndex));var u=a.annotations[l].labelFillColor;a.annotations[l].labelFillColor=JSON.stringify(this.getRgbCode(u)),a.annotations[l].labelBorderColor=JSON.stringify(this.getRgbCode(a.annotations[l].labelBorderColor)),a.annotations[l].labelSettings.fillColor=u,a.annotations[l].fontColor=JSON.stringify(this.getRgbCode(a.annotations[l].labelSettings.fontColor))}}o=a.annotations}t[a.pageIndex]=o}return JSON.stringify(t)},s.prototype.createScaleRatioWindow=function(){var e=this;if(X())this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenScaleRatioDialog");else{var i=F("div",{id:this.pdfViewer.element.id+"_scale_ratio_window",className:"e-pv-scale-ratio-window"});this.pdfViewerBase.pageContainer.appendChild(i);var n=this.createRatioUI();this.scaleRatioDialog=new Or({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Scale Ratio"),target:this.pdfViewer.element,content:n,close:function(){e.sourceTextBox.destroy(),e.convertUnit.destroy(),e.destTextBox.destroy(),e.dispUnit.destroy(),e.scaleRatioDialog.destroy();var r=e.pdfViewerBase.getElement("_scale_ratio_window");r.parentElement.removeChild(r)}}),this.scaleRatioDialog.buttons=!E.isDevice||this.pdfViewer.enableDesktopMode?[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)}]:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)}],this.pdfViewer.enableRtl&&(this.scaleRatioDialog.enableRtl=!0),this.scaleRatioDialog.appendTo(i),this.convertUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.unit)).outerHTML,this.dispUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.displayUnit)).outerHTML,this.depthUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.displayUnit)).outerHTML}},s.prototype.createRatioUI=function(){var e=F("div"),t=this.pdfViewer.element.id,i=[{text:this.pdfViewer.localeObj.getConstant("pt"),label:"pt"},{text:this.pdfViewer.localeObj.getConstant("in"),label:"in"},{text:this.pdfViewer.localeObj.getConstant("mm"),label:"mm"},{text:this.pdfViewer.localeObj.getConstant("cm"),label:"cm"},{text:this.pdfViewer.localeObj.getConstant("p"),label:"p"},{text:this.pdfViewer.localeObj.getConstant("ft"),label:"ft"},{text:this.pdfViewer.localeObj.getConstant("ft_in"),label:"ft_in"},{text:this.pdfViewer.localeObj.getConstant("m"),label:"m"}],n=F("div",{id:t+"_scale_ratio_label",className:"e-pv-scale-ratio-text"});n.textContent=this.pdfViewer.localeObj.getConstant("Scale Ratio"),e.appendChild(n);var r=F("div",{id:t+"_scale_src_container"});e.appendChild(r);var o=this.createInputElement("input","e-pv-scale-ratio-src-input",t+"_src_input",r);this.sourceTextBox=new zr({value:1,format:"##",cssClass:"e-pv-scale-ratio-src-input",min:1,max:100},o);var a=this.createInputElement("button","e-pv-scale-ratio-src-unit",t+"_src_unit",r);this.convertUnit=new Br({items:i,cssClass:"e-pv-scale-ratio-src-unit"},a),this.convertUnit.select=this.convertUnitSelect.bind(this);var l=F("div",{id:t+"_scale_dest_container"}),h=this.createInputElement("input","e-pv-scale-ratio-dest-input",t+"_dest_input",l);this.destTextBox=new zr({value:1,format:"##",cssClass:"e-pv-scale-ratio-dest-input",min:1,max:100},h);var d=this.createInputElement("button","e-pv-scale-ratio-dest-unit",t+"_dest_unit",l);this.dispUnit=new Br({items:i,cssClass:"e-pv-scale-ratio-dest-unit"},d),this.dispUnit.select=this.dispUnitSelect.bind(this),e.appendChild(l);var p=F("div",{id:t+"_depth_label",className:"e-pv-depth-text"});p.textContent=this.pdfViewer.localeObj.getConstant("Depth"),e.appendChild(p);var u=F("div",{id:t+"_depth_container"});e.appendChild(u);var f=this.createInputElement("input","e-pv-depth-input",t+"_depth_input",u);this.depthTextBox=new zr({value:this.volumeDepth,format:"##",cssClass:"e-pv-depth-input",min:1},f);var g=this.createInputElement("button","e-pv-depth-unit",t+"_depth_unit",u);return this.depthUnit=new Br({items:i,cssClass:"e-pv-depth-unit"},g),this.depthUnit.select=this.depthUnitSelect.bind(this),e},s.prototype.convertUnitSelect=function(e){this.convertUnit.content=this.createContent(e.item.text).outerHTML},s.prototype.dispUnitSelect=function(e){this.dispUnit.content=this.createContent(e.item.text).outerHTML,this.depthUnit.content=this.createContent(e.item.text).outerHTML},s.prototype.depthUnitSelect=function(e){this.depthUnit.content=this.createContent(e.item.text).outerHTML},s.prototype.createContent=function(e){var t=F("div",{className:"e-pv-scale-unit-content"});return t.textContent=e,t},s.prototype.createInputElement=function(e,t,i,n){var r=F("div",{id:i+"_container",className:t+"-container"}),o=F(e,{id:i});return"input"===e&&(o.type="text"),r.appendChild(o),n.appendChild(r),o},s.prototype.onOkClicked=function(){if(X()){var e=document.querySelector("#"+this.pdfViewer.element.id+"_src_unit"),t=document.querySelector("#"+this.pdfViewer.element.id+"_dest_unit"),i=document.querySelector("#"+this.pdfViewer.element.id+"_ratio_input"),n=document.querySelector("#"+this.pdfViewer.element.id+"_dest_input"),r=document.querySelector("#"+this.pdfViewer.element.id+"_depth_input");e&&t&&i&&n&&r&&(this.unit=e.value,this.displayUnit=t.value,this.ratio=parseInt(n.value)/parseInt(i.value),this.volumeDepth=parseInt(r.value)),this.scaleRatioString=parseInt(i.value)+" "+this.unit+" = "+parseInt(n.value)+" "+this.displayUnit,this.updateMeasureValues(this.scaleRatioString,this.displayUnit,this.unit,this.volumeDepth)}else{var o,a;this.unit=this.getContent(this.convertUnit.content),this.displayUnit=this.getContent(this.dispUnit.content),this.ratio=this.destTextBox.value/this.sourceTextBox.value,this.volumeDepth=this.depthTextBox.value,this.scaleRatioString=this.sourceTextBox.value+" "+this.unit+" = "+this.destTextBox.value+" "+this.displayUnit,this.scaleRatioDialog.hide(),o=this.restoreUnit(this.convertUnit),a=this.restoreUnit(this.dispUnit),this.updateMeasureValues(this.scaleRatioString,a,o,this.volumeDepth)}},s.prototype.restoreUnit=function(e){for(var t,i=0;i<e.items.length;i++){var n=e.items[i];this.unit===n.text&&(t=n.label)}return t},s.prototype.updateMeasureValues=function(e,t,i,n){this.scaleRatioString=e,this.displayUnit=t,this.unit=i,this.volumeDepth=n;for(var r=0;r<this.pdfViewerBase.pageCount;r++){var o=this.getAnnotations(r,null);if(o)for(var a=0;a<o.length;a++){var l=(o=this.getAnnotations(r,null))[a];l.annotationSettings.isLock||(l.calibrate.ratio=e,l.calibrate.x[0].unit=t,l.calibrate.distance[0].unit=t,l.calibrate.area[0].unit=t,l.calibrate.x[0].conversionFactor=this.getFactor(i),"PolygonVolume"===l.indent&&(l.calibrate.depth=n),o[a]=l,this.manageAnnotations(o,r),this.pdfViewer.annotation.updateCalibrateValues(this.getAnnotationBaseModel(l.id)))}this.pdfViewer.annotation.renderAnnotations(r,null,null,null,null,!1)}},s.prototype.getAnnotationBaseModel=function(e){for(var t=null,i=0;i<this.pdfViewer.annotations.length;i++)if(e===this.pdfViewer.annotations[i].id){t=this.pdfViewer.annotations[i];break}return t},s.prototype.getContent=function(e){return e.split("</div>")[0].split('">')[1]},s.prototype.setConversion=function(e,t){var i;if(t){var n=t.pageIndex;"diagram_helper"===t.id&&(t=this.getCurrentObject(n=t.pageIndex?t.pageIndex:this.pdfViewerBase.activeElements.activePageID,null,t.annotName)),i=t?this.getCurrentValues(t.id,n):this.getCurrentValues()}else i=this.getCurrentValues();return this.convertPointToUnits(i.factor,e*i.ratio,i.unit)},s.prototype.onCancelClicked=function(){this.scaleRatioDialog.hide()},s.prototype.modifyInCollection=function(e,t,i,n){this.pdfViewer.annotationModule.isFormFieldShape=!c(i.formFieldAnnotationType)&&""!==i.formFieldAnnotationType,n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var r=null,o=this.getAnnotations(t,null);if(null!=o&&i){for(var a=0;a<o.length;a++)if(i.id===o[a].id){if("bounds"===e)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0),"Line"===o[a].shapeAnnotationType||"Polyline"===o[a].shapeAnnotationType||"Polygon"===o[a].shapeAnnotationType?(o[a].vertexPoints=i.vertexPoints,o[a].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):o[a].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===o[a].enableShapeLabel&&i.wrapper&&(o[a].labelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(i.wrapper.bounds));else if("fill"===e)o[a].fillColor=i.wrapper.children[0].style.fill,this.pdfViewer.enableShapeLabel&&(o[a].labelFillColor=i.wrapper.children[0].style.fill);else if("stroke"===e)o[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)o[a].borderDashArray=i.wrapper.children[0].style.strokeDashArray,o[a].borderStyle=i.borderStyle;else if("startArrow"===e)o[a].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)o[a].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("leaderLength"===e)o[a].leaderLength=i.leaderHeight;else if("notes"===e)o[a].note=i.notes,!0===o[a].enableShapeLabel&&(o[a].labelContent=i.notes);else{if("delete"===e){r=o.splice(a,1)[0];break}if("labelContent"===e){o[a].note=i.labelContent,o[a].labelContent=i.labelContent;break}"fontColor"===e?o[a].fontColor=i.fontColor:"fontSize"===e&&(o[a].fontSize=i.fontSize)}o[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(o[a],t)}this.manageAnnotations(o,t)}return r},s.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");var r=this.pdfViewer.annotationModule.getPageCollection(n,t);n[r]&&(n[r].annotations=e);var o=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]=o:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape_measure",o)}},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),n){var r=JSON.parse(n),o=this.pdfViewer.annotationModule.getPageCollection(r,e);i=r[o]?r[o].annotations:t}else i=t;return i},s.prototype.getCurrentObject=function(e,t,i){var n=null,r=this.getAnnotations(e,null);if(null!=r)for(var o=0;o<r.length;o++)if(t){if(t===r[o].id){n=r[o];break}}else if(i&&i===r[o].annotName){n=r[o];break}return n},s.prototype.getCurrentValues=function(e,t){var i,n,r,o;if(e&&!isNaN(t)){var a=this.getCurrentObject(t,e);a?(i=this.getCurrentRatio(a.calibrate.ratio),n=a.calibrate.x[0].unit,r=a.calibrate.x[0].conversionFactor,o=a.calibrate.depth):(i=this.ratio,n=this.displayUnit,r=this.getFactor(this.unit),o=this.volumeDepth)}else i=this.ratio,n=this.displayUnit,r=this.getFactor(this.unit),o=this.volumeDepth;return{ratio:i,unit:n,factor:r,depth:o}},s.prototype.getCurrentRatio=function(e){var t=e.split(" ");return"="===t[3]?parseFloat(t[4])/parseFloat(t[0]):parseFloat(t[3])/parseFloat(t[0])},s.prototype.calculateArea=function(e,t,i){var n=this.getCurrentValues(t,i),r=this.getArea(e,n.factor,n.unit)*n.ratio;if("ft_in"===n.unit){var o=Math.round(100*r)/100;if(o>=12){if((o=(o=(Math.round(o/12*100)/100).toString()).split("."))[1]){var a=0;return o[1].charAt(1)?(a=parseInt(o[1].charAt(0))+"."+parseInt(o[1].charAt(1)),a=Math.round(a)):a=o[1],a?o[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+a+" "+this.pdfViewer.localeObj.getConstant("in"):o[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return o[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*r)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("in")}return"m"===n.unit?100*r/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit):Math.round(100*r)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit)},s.prototype.getArea=function(e,t,i){for(var n=0,r=e.length-1,o=0;o<e.length;o++)n+=(e[r].x*this.pixelToPointFactor*t+e[o].x*this.pixelToPointFactor*t)*(e[r].y*this.pixelToPointFactor*t-e[o].y*this.pixelToPointFactor*t),r=o;return Math.abs("ft_in"===i?2*n:n/2)},s.prototype.calculateVolume=function(e,t,i){var n=this.getCurrentValues(t,i),r=n.depth?n.depth:this.volumeDepth,a=this.getArea(e,n.factor,n.unit)*(r*this.convertUnitToPoint(n.unit)*n.factor)*n.ratio;if("ft_in"===n.unit){var l=Math.round(100*a)/100;if(l>=12){if((l=(l=(Math.round(l/12*100)/100).toString()).split("."))[1]){var h=0;return l[1].charAt(1)?(h=parseInt(l[1].charAt(0))+"."+parseInt(l[1].charAt(1)),h=Math.round(h)):h=l[1],h?l[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+h+" "+this.pdfViewer.localeObj.getConstant("in"):l[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return l[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*a)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("in")}return Math.round(100*a)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant(n.unit)},s.prototype.calculatePerimeter=function(e){var t=Ei.getLengthFromListOfPoints(e.vertexPoints);return this.setConversion(t*this.pixelToPointFactor,e)},s.prototype.getFactor=function(e){var t;switch(e){case"in":case"ft_in":t=1/72;break;case"cm":t=1/28.346;break;case"mm":t=1/2.835;break;case"pt":t=1;break;case"p":t=1/12;break;case"ft":t=1/864;break;case"m":t=1/2834.64567}return t},s.prototype.convertPointToUnits=function(e,t,i){var n;if("ft_in"===i){var r=Math.round(t*e*100)/100;if(r>=12)if((r=(r=(Math.round(r/12*100)/100).toString()).split("."))[1]){var o=0;r[1].charAt(1)?(o=parseInt(r[1].charAt(0))+"."+parseInt(r[1].charAt(1)),o=Math.round(o)):o=r[1],n=o?r[0]+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+o+" "+this.pdfViewer.localeObj.getConstant("in"):r[0]+" "+this.pdfViewer.localeObj.getConstant("ft")}else n=r[0]+" "+this.pdfViewer.localeObj.getConstant("ft");else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant("in")}else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant(i);return n},s.prototype.convertUnitToPoint=function(e){var t;switch(e){case"in":case"ft_in":t=72;break;case"cm":t=28.346;break;case"mm":t=2.835;break;case"pt":t=1;break;case"p":t=12;break;case"ft":t=864;break;case"m":t=2834.64567}return t},s.prototype.getStringifiedMeasure=function(e){return c(e)||(e.angle=JSON.stringify(e.angle),e.area=JSON.stringify(e.area),e.distance=JSON.stringify(e.distance),e.volume=JSON.stringify(e.volume)),JSON.stringify(e)},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return c(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},s.prototype.saveImportedMeasureAnnotations=function(e,t){var i,n=null;if(e.VertexPoints){n=[];for(var r=0;r<e.VertexPoints.length;r++)n.push({x:e.VertexPoints[r].X,y:e.VertexPoints[r].Y})}var a={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};e.Calibrate.Depth&&(a.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.Subject),i={id:"measure",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:a,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape_measure")},s.prototype.updateMeasureAnnotationCollections=function(e,t){var n=null;if(e.VertexPoints){n=[];for(var r=0;r<e.VertexPoints.length;r++)n.push({x:e.VertexPoints[r].X,y:e.VertexPoints[r].Y})}var a={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};if(e.Calibrate.Depth&&(a.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var l=this.pdfViewer.shapeLabelSettings;e.LabelSettings=e.LabelSettings?e.LabelSettings:{borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:l.labelHeight,labelWidth:l.labelWidth,opacity:e.Opacity}}return e.AnnotationSelectorSettings=e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{id:"measure",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:a,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,annotationSelectorSettings:e.AnnotationSelectorSettings,labelSettings:e.labelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}},s.prototype.updateAddAnnotationDetails=function(e,t,i){i=t?t.offset?t.offset:{x:10,y:10}:(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,r=null,o=null,a="",l="",h="",d=!1,p=[],u=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),f=this.pdfViewer.annotation.createGUID();"Distance"==e?(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),r=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="LineDimension",l="Line",h="Distance calculation",d=!0,p=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Perimeter"==e?(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),r=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolyLineDimension",l="Polyline",h="Perimeter calculation",d=!0,p=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+85,y:i.y},{x:i.x+86,y:i.y+62}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Area"==e?(n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),r=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonDimension",l="Polygon",h="Area calculation",p=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+88,y:i.y-1},{x:i.x+89,y:i.y+53},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Radius"==e?(n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),r=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonRadius",l="Circle",h="Radius calculation",t.width=t.width?t.width:100,t.height=t.height?t.height:100,p=null):"Volume"==e&&(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),r=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonVolume",l="Polygon",h="Volume calculation",p=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x,y:i.y+109},{x:i.x+120,y:i.y+109},{x:i.x+120,y:i.y-1},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1),o.isLock=!!t.isLock&&t.isLock,o.minHeight=t.minHeight?t.minHeight:0,o.minWidth=t.minWidth?t.minWidth:0,o.maxWidth=t.maxWidth?t.maxWidth:0,o.maxHeight=t.maxHeight?t.maxHeight:0;var g_factor=.013888888888888888,m="";if(p||"Radius"==e||"Volume"==e)if("Distance"==e||"Perimeter"==e||"Radius"==e){var y=0;if("Radius"==e)y=t.width/2*this.pixelToPointFactor;else{for(var b=0;b<p.length-1;b++)y+=Math.sqrt(Math.pow(p[b].x-p[b+1].x,2)+Math.pow(p[b].y-p[b+1].y,2));y*=this.pixelToPointFactor}m=this.convertPointToUnits(g_factor,1*y,"in")}else if("Area"==e||"Volume"==e){for(var S=0,I=p.length-1,x=0;x<p.length;x++)S+=(p[I].x*this.pixelToPointFactor*g_factor+p[x].x*this.pixelToPointFactor*g_factor)*(p[I].y*this.pixelToPointFactor*g_factor-p[x].y*this.pixelToPointFactor*g_factor),I=x;S=Math.abs(S/2),"Volume"==e?(S=S*(96*this.convertUnitToPoint("in")*g_factor)*1,m=Math.round(100*S)/100+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("in")):m=Math.round(100*S)/100+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("in")}p&&(p=this.pdfViewer.annotation.getVertexPointsXY(p));var T=[];return T[0]={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:r,AnnotName:f,AnnotType:"shape_measure",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:o,Author:t.author?t.author:"Guest",BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},Calibrate:{Area:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"sq in"}],Depth:t.depth?t.depth:0,Distance:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}],Ratio:"1 in = 1 in",TargetUnitConversion:0,Volume:null,X:[{ConversionFactor:.013888889,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}]},Caption:!0,CaptionPosition:"Top",CloudIntensity:0,Comments:null,CustomData:t.customData?t.customData:null,CreatedDate:u,EnableShapeLabel:!1,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:"#ffffff00",FontColor:null,FontSize:0,Indent:a,IsCloudShape:!1,IsCommentLock:!1,IsLocked:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LeaderLength:0,LeaderLineExtension:0,LeaderLineOffset:0,LineHeadEnd:t.lineHeadStartStyle?t.lineHeadStartStyle:d?"ClosedArrow":"None",LineHeadStart:t.lineHeadEndStyle?t.lineHeadEndStyle:d?"ClosedArrow":"None",ModifiedDate:"",Note:m,Opacity:t.opacity?t.opacity:1,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:l,State:"",StateModel:"",StrokeColor:t.strokeColor?t.strokeColor:"#ff0000",Subject:h,Thickness:t.thickness?t.thickness:1,VertexPoints:p},{measureShapeAnnotation:T}},s}(),_Ae=function(){function s(e,t){this.shapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.renderShapeAnnotations=function(e,t,i,n){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape")||n||i)for(var o=0;o<e.length;o++){var a=e[o];a.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(a,t,a.AnnotType);var l=null;this.shapeCount=this.shapeCount+1;var h=void 0;if(a.ShapeAnnotationType){i&&this.pdfViewerBase.isJsonImported&&(a.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(a.Rotate,t,a.Bounds,a.AnnotationRotation),h=this.pdfViewerBase.isPageRotated);var d=null;if(a.VertexPoints)if(d=[],i&&this.pdfViewerBase.isJsonImported)d=this.pdfViewerBase.calculateVertexPoints(a.Rotate,t,a.VertexPoints,a.AnnotationRotation);else for(var p=0;p<a.VertexPoints.length;p++)d.push({x:a.VertexPoints[p].X?a.VertexPoints[p].X:a.VertexPoints[p].x,y:a.VertexPoints[p].Y?a.VertexPoints[p].Y:a.VertexPoints[p].y});a.Bounds&&!0===a.EnableShapeLabel&&(a.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(a.Bounds),a.LabelBorderColor=a.LabelBorderColor?a.LabelBorderColor:a.StrokeColor,a.FontColor=a.FontColor?a.FontColor:a.StrokeColor,a.LabelFillColor=a.LabelFillColor?a.LabelFillColor:a.FillColor,a.FontSize=a.FontSize?a.FontSize:16,a.LabelSettings=a.LabelSettings?a.LabelSettings:this.pdfViewer.shapeLabelSettings),a.AnnotationSelectorSettings=a.AnnotationSelectorSettings?a.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a.AnnotationSettings=a.AnnotationSettings?a.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(a),a.allowedInteractions=a.AllowedInteractions?a.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(a);var m;m="Imported Annotation"===a.annotationAddMode?a.IsPrint:a.AnnotationSettings.isPrint;var I,y=a.Bounds.X?a.Bounds.X:a.Bounds.x,b=a.Bounds.Y?a.Bounds.Y:a.Bounds.y,w=a.Bounds.Width?a.Bounds.Width:a.Bounds.width,S=a.Bounds.Height?a.Bounds.Height:a.Bounds.height,x=(l={id:"shape"+this.shapeCount,shapeAnnotationType:a.ShapeAnnotationType,author:a.Author,allowedInteractions:a.allowedInteractions,modifiedDate:a.ModifiedDate,subject:a.Subject,pageNumber:t,note:a.Note,strokeColor:a.StrokeColor,fillColor:a.FillColor,opacity:a.Opacity,thickness:a.Thickness,rectangleDifference:a.RectangleDifference,borderStyle:a.BorderStyle,borderDashArray:a.BorderDashArray,rotateAngle:a.RotateAngle,isCloudShape:a.IsCloudShape,cloudIntensity:a.CloudIntensity,vertexPoints:d,lineHeadStart:a.LineHeadStart,lineHeadEnd:a.LineHeadEnd,isLocked:a.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(a.Comments,a,a.Author),review:{state:a.State,stateModel:a.StateModel,modifiedDate:a.ModifiedDate,author:a.Author},annotName:a.AnnotName,bounds:{left:y,top:b,width:w,height:S,right:a.Bounds.Right,bottom:a.Bounds.Bottom},labelContent:a.LabelContent,enableShapeLabel:a.EnableShapeLabel,labelFillColor:a.LabelFillColor,fontColor:a.FontColor,labelBorderColor:a.LabelBorderColor,fontSize:a.FontSize,labelBounds:a.LabelBounds,annotationSelectorSettings:this.getSettings(a),labelSettings:a.LabelSettings,annotationSettings:a.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(a),isPrint:m,isCommentLock:a.IsCommentLock,isAnnotationRotated:h}).vertexPoints;null==d&&(x=[]),a.AnnotationSelectorSettings=a.AnnotationSelectorSettings?a.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,I={id:"shape"+this.shapeCount,shapeAnnotationType:this.getShapeType(l),author:l.author,allowedInteractions:l.allowedInteractions,modifiedDate:l.modifiedDate,annotName:l.annotName,subject:l.subject,notes:l.note,fillColor:l.fillColor,strokeColor:l.strokeColor,opacity:l.opacity,thickness:l.thickness,borderStyle:l.borderStyle,borderDashArray:l.borderDashArray?l.borderDashArray.toString():"0",rotateAngle:parseFloat(l.rotateAngle.split("Angle")[1]),comments:l.comments,review:l.review,isCloudShape:l.isCloudShape,cloudIntensity:l.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(l.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(l.lineHeadStart),vertexPoints:x,bounds:{x:l.bounds.left,y:l.bounds.top,width:l.bounds.width,height:l.bounds.height},pageIndex:l.pageNumber,labelContent:a.LabelContent,enableShapeLabel:a.EnableShapeLabel,labelFillColor:a.LabelFillColor,fontColor:a.FontColor,labelBorderColor:a.LabelBorderColor,fontSize:a.FontSize,labelBounds:a.LabelBounds,annotationSelectorSettings:a.AnnotationSelectorSettings,annotationSettings:l.annotationSettings,annotationAddMode:a.annotationAddMode,isPrint:m,isCommentLock:l.isCommentLock},this.pdfViewer.add(I),this.pdfViewer.annotationModule.storeAnnotations(t,l,"_annotations_shape"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(I.pageIndex,I.annotName,a.ShapeAnnotationType,I.bounds,{opacity:I.opacity,strokeColor:I.strokeColor,thickness:I.thickness,modifiedDate:I.modifiedDate,width:I.bounds.width,height:I.bounds.height})}}}else e.shapeAnnotationType&&(l=this.createAnnotationObject(e),this.pdfViewer.annotationModule.isFormFieldShape=!c(e.formFieldAnnotationType)&&""!==e.formFieldAnnotationType,this.pdfViewer.annotationModule.storeAnnotations(t,l,"_annotations_shape"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e))},s.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},s.prototype.setAnnotationType=function(e){this.updateShapeProperties(),this.pdfViewerBase.disableTextSelectionMode();var t="Guest";switch(e){case"Line":this.currentAnnotationMode="Line";var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Line"),fillColor:this.lineFillColor,notes:"",strokeColor:this.lineStrokeColor,opacity:this.lineOpacity,thickness:this.lineThickness,modifiedDate:i,borderDashArray:this.lineDashArray.toString(),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),author:t,subject:"Line",lineHeadStart:this.lineStartHead,lineHeadEnd:this.lineEndHead,isCommentLock:!1},this.pdfViewer.tool="Line";break;case"Arrow":this.currentAnnotationMode="Arrow";var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Arrow"),opacity:this.arrowOpacity,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),fillColor:this.arrowFillColor,strokeColor:this.arrowStrokeColor,notes:"",thickness:this.arrowThickness,borderDashArray:this.arrowDashArray.toString(),author:t,subject:"Arrow",modifiedDate:n,lineHeadStart:this.arrowStartHead,lineHeadEnd:this.arrowEndHead,isCommentLock:!1},this.pdfViewer.tool="Line";break;case"Rectangle":this.currentAnnotationMode="Rectangle";var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Rectangle"),strokeColor:this.rectangleStrokeColor,fillColor:this.rectangleFillColor,opacity:this.rectangleOpacity,notes:"",thickness:this.rectangleThickness,borderDashArray:"0",modifiedDate:r,author:t,subject:"Rectangle",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Circle":this.currentAnnotationMode="Circle";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Circle"),strokeColor:this.circleStrokeColor,fillColor:this.circleFillColor,opacity:this.circleOpacity,notes:"",thickness:this.circleThickness,borderDashArray:"0",modifiedDate:o,author:t,subject:"Circle",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Polygon":this.currentAnnotationMode="Polygon";var a=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={strokeColor:this.polygonStrokeColor,fillColor:this.polygonFillColor,opacity:this.polygonOpacity,thickness:this.polygonThickness,borderDashArray:"0",notes:"",author:t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:"Guest",subject:"Polygon",modifiedDate:a,borderStyle:"",isCommentLock:!1},this.pdfViewer.tool="Polygon"}},s.prototype.updateShapeProperties=function(){this.lineFillColor=this.pdfViewer.lineSettings.fillColor?this.pdfViewer.lineSettings.fillColor:"#ffffff00",this.lineStrokeColor=this.pdfViewer.lineSettings.strokeColor?this.pdfViewer.lineSettings.strokeColor:"#ff0000",this.lineThickness=this.pdfViewer.lineSettings.thickness?this.pdfViewer.lineSettings.thickness:1,this.lineOpacity=this.pdfViewer.lineSettings.opacity?this.pdfViewer.lineSettings.opacity:1,this.lineDashArray=this.pdfViewer.lineSettings.borderDashArray?this.pdfViewer.lineSettings.borderDashArray:0,this.lineStartHead=this.pdfViewer.lineSettings.lineHeadStartStyle?this.pdfViewer.lineSettings.lineHeadStartStyle:"None",this.lineEndHead=this.pdfViewer.lineSettings.lineHeadEndStyle?this.pdfViewer.lineSettings.lineHeadEndStyle:"None",this.arrowFillColor=this.pdfViewer.arrowSettings.fillColor?this.pdfViewer.arrowSettings.fillColor:"#ffffff00",this.arrowStrokeColor=this.pdfViewer.arrowSettings.strokeColor?this.pdfViewer.arrowSettings.strokeColor:"#ff0000",this.arrowThickness=this.pdfViewer.arrowSettings.thickness?this.pdfViewer.arrowSettings.thickness:1,this.arrowOpacity=this.pdfViewer.arrowSettings.opacity?this.pdfViewer.arrowSettings.opacity:1,this.arrowDashArray=this.pdfViewer.arrowSettings.borderDashArray?this.pdfViewer.arrowSettings.borderDashArray:0,this.arrowStartHead=this.pdfViewer.arrowSettings.lineHeadStartStyle?this.pdfViewer.arrowSettings.lineHeadStartStyle:"Closed",this.arrowEndHead=this.pdfViewer.arrowSettings.lineHeadEndStyle?this.pdfViewer.arrowSettings.lineHeadEndStyle:"Closed",this.rectangleFillColor=this.pdfViewer.rectangleSettings.fillColor?this.pdfViewer.rectangleSettings.fillColor:"#ffffff00",this.rectangleStrokeColor=this.pdfViewer.rectangleSettings.strokeColor?this.pdfViewer.rectangleSettings.strokeColor:"#ff0000",this.rectangleThickness=this.pdfViewer.rectangleSettings.thickness?this.pdfViewer.rectangleSettings.thickness:1,this.rectangleOpacity=this.pdfViewer.rectangleSettings.opacity?this.pdfViewer.rectangleSettings.opacity:1,this.circleFillColor=this.pdfViewer.circleSettings.fillColor?this.pdfViewer.circleSettings.fillColor:"#ffffff00",this.circleStrokeColor=this.pdfViewer.circleSettings.strokeColor?this.pdfViewer.circleSettings.strokeColor:"#ff0000",this.circleThickness=this.pdfViewer.circleSettings.thickness?this.pdfViewer.circleSettings.thickness:1,this.circleOpacity=this.pdfViewer.circleSettings.opacity?this.pdfViewer.circleSettings.opacity:1,this.polygonFillColor=this.pdfViewer.polygonSettings.fillColor?this.pdfViewer.polygonSettings.fillColor:"#ffffff00",this.polygonStrokeColor=this.pdfViewer.polygonSettings.strokeColor?this.pdfViewer.polygonSettings.strokeColor:"#ff0000",this.polygonThickness=this.pdfViewer.polygonSettings.thickness?this.pdfViewer.polygonSettings.thickness:1,this.polygonOpacity=this.pdfViewer.polygonSettings.opacity?this.pdfViewer.polygonSettings.opacity:1},s.prototype.setShapeType=function(e){var t;switch(e){case"Line":case"Polyline":t="Line";break;case"Circle":t="Ellipse";break;case"Square":t="Rectangle";break;case"Arrow":t="LineWidthArrowHead"}return t},s.prototype.getShapeType=function(e){var t;switch(e.shapeAnnotationType){case"Line":case"Polyline":t="Line";break;case"Circle":t="Ellipse";break;case"Square":t="Rectangle";break;case"Polygon":t="Polygon"}return("Line"===e.shapeAnnotationType||"Polyline"===e.shapeAnnotationType)&&("None"!==e.lineHeadStart||"None"!==e.lineHeadEnd)&&(t="LineWidthArrowHead"),t},s.prototype.getShapeAnnotType=function(e){var t;switch(e){case"Line":case"LineWidthArrowHead":t="Line";break;case"Rectangle":t="Square";break;case"Ellipse":t="Circle";break;case"Polygon":t="Polygon"}return t},s.prototype.modifyInCollection=function(e,t,i){this.pdfViewer.annotationModule.isFormFieldShape=!c(i.formFieldAnnotationType)&&""!==i.formFieldAnnotationType,this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null;i&&"bounds"===e&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0);var r=this.getAnnotations(t,null);if(null!=r&&i){for(var o=0;o<r.length;o++)if(i.id===r[o].id){if("bounds"===e){if("Line"===r[o].shapeAnnotationType||"Polygon"===r[o].shapeAnnotationType?(r[o].vertexPoints=i.vertexPoints,r[o].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):r[o].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===r[o].enableShapeLabel&&i.wrapper){var a=0,l=0,h=0;i.wrapper.bounds.width&&(h=(h=i.wrapper.bounds.width/2)>0&&h<151?h:151),i.wrapper.bounds.left&&(l=i.wrapper.bounds.left+i.wrapper.bounds.width/2-h/2),i.wrapper.bounds.top&&(a=i.wrapper.bounds.top+i.wrapper.bounds.height/2-12.3),r[o].labelBounds={left:l,top:a,width:h,height:24.6,right:0,bottom:0}}}else if("fill"===e)r[o].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)r[o].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)r[o].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)r[o].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)r[o].borderDashArray=i.wrapper.children[0].style.strokeDashArray,r[o].borderStyle=i.borderStyle;else if("startArrow"===e)r[o].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)r[o].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("notes"===e)r[o].note=i.notes;else{if("delete"===e){n=r.splice(o,1)[0];break}if("labelContent"===e){r[o].note=i.labelContent,r[o].labelContent=i.labelContent;break}"fontColor"===e?r[o].fontColor=i.fontColor:"fontSize"===e&&(r[o].fontSize=i.fontSize)}r[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(r[o],t)}this.manageAnnotations(r,t)}return n},s.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},s.prototype.saveShapeAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),r=0;r<n.length;r++){var o=[],a=n[r];if(a){for(var l=0;a.annotations.length>l;l++)if(this.pdfViewerBase.checkFormFieldCollection(a.annotations[l].id))a.annotations[l]="";else{if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[l]),this.pdfViewerBase.isJsonExported)if(a.annotations[l].isAnnotationRotated)a.annotations[l].bounds=this.pdfViewer.annotation.getBounds(a.annotations[l].bounds,a.pageIndex),a.annotations[l].vertexPoints=this.pdfViewer.annotation.getVertexPoints(a.annotations[l].vertexPoints,a.pageIndex);else{var h=this.pdfViewerBase.pageSize[a.pageIndex];h&&(a.annotations[l].annotationRotation=h.rotation)}if(a.annotations[l].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[l].bounds,a.pageIndex)),a.annotations[l].strokeColor=JSON.stringify(this.getRgbCode(a.annotations[l].strokeColor)),a.annotations[l].fillColor=JSON.stringify(this.getRgbCode(a.annotations[l].fillColor)),a.annotations[l].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(a.annotations[l].vertexPoints,a.pageIndex)),null!==a.annotations[l].rectangleDifference&&(a.annotations[l].rectangleDifference=JSON.stringify(a.annotations[l].rectangleDifference)),!0===a.annotations[l].enableShapeLabel){a.annotations[l].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(a.annotations[l].bounds)));var u=a.annotations[l].labelFillColor;a.annotations[l].labelFillColor=JSON.stringify(this.getRgbCode(u)),a.annotations[l].labelBorderColor=JSON.stringify(this.getRgbCode(a.annotations[l].labelBorderColor)),a.annotations[l].labelSettings.fillColor=u,a.annotations[l].fontColor=JSON.stringify(this.getRgbCode(a.annotations[l].labelSettings.fontColor))}}a.annotations=a.annotations.filter(function(m){return m}),o=a.annotations}t[a.pageIndex]=o}return JSON.stringify(t)},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape");var r=this.pdfViewer.annotationModule.getPageCollection(n,t);n[r]&&(n[r].annotations=e);var o=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]=o:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape",o)}},s.prototype.createAnnotationObject=function(e){var t,i,n=this.pdfViewer.annotation.createGUID();if(!e.formFieldAnnotationType){var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape",e.pageIndex+1,e.shapeAnnotationType);r&&(document.getElementById(r).id=n)}e.annotName=n,e.wrapper.bounds?(t={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={left:0,top:0,height:0,width:0,right:0,bottom:0},i={left:0,top:0,height:0,width:0,right:0,bottom:0}),e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape","Line"===e.subject&&"Polygon"===e.shapeAnnotationType?"Polygon":e.subject),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(n,e.notes);var o=parseInt(e.borderDashArray);o=isNaN(o)?0:o;var a=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0);e.isPrint=a.isPrint;var l=this.pdfViewer.shapeLabelSettings,h={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:l.labelHeight,labelWidth:l.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.shapeAnnotationType),author:e.author,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),subject:e.subject,note:e.notes,strokeColor:e.strokeColor,annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,pageNumber:e.pageIndex,borderStyle:e.borderStyle,borderDashArray:o,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:a.isLock,labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,fontColor:e.fontColor,labelBorderColor:e.labelBorderColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.shapeAnnotationType,e.subject),labelSettings:h,annotationSettings:a,customData:this.pdfViewer.annotation.getShapeData(e.shapeAnnotationType,e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}},s.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=this.pdfViewer.lineSettings.annotationSelectorSettings:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.lineSettings.annotationSelectorSettings?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.annotationSelectorSettings?"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings&&(i=this.pdfViewer.polygonSettings.annotationSelectorSettings):i=this.pdfViewer.circleSettings.annotationSelectorSettings:i=this.pdfViewer.rectangleSettings.annotationSelectorSettings:i=this.pdfViewer.arrowSettings.annotationSelectorSettings,i},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),n){var r=JSON.parse(n),o=this.pdfViewer.annotationModule.getPageCollection(r,e);i=r[o]?r[o].annotations:t}else i=t;return i},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return c(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseFloat(t[3])}},s.prototype.saveImportedShapeAnnotations=function(e,t){var i,n=null;if(e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape",e.Subject),e.VertexPoints){n=[];for(var r=0;r<e.VertexPoints.length;r++)n.push({x:e.VertexPoints[r].X,y:e.VertexPoints[r].Y})}e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={id:"shape",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,pageNumber:t,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotName:e.AnnotName,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape")},s.prototype.updateShapeAnnotationCollections=function(e,t){var n=null;if(e.VertexPoints){n=[];for(var r=0;r<e.VertexPoints.length;r++)n.push({x:e.VertexPoints[r].X,y:e.VertexPoints[r].Y})}if(e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var a=this.pdfViewer.shapeLabelSettings;e.LabelSettings=e.LabelSettings?e.LabelSettings:{borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:a.labelHeight,labelWidth:a.labelWidth,opacity:e.Opacity}}return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{id:"shape",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotationId:e.AnnotName,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}},s.prototype.updateAddAnnotationDetails=function(e,t,i){i=t?t.offset?t.offset:{x:10,y:10}:(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,r=null,o=null,a="",l=!1,h=null,d=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),p=this.pdfViewer.annotation.createGUID();"Line"==e?(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),r=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Line",h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Arrow"==e?(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),r=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Line",l=!0,h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Rectangle"==e?(n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),r=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Square",t.width=t.width?t.width:150,t.height=t.height?t.height:75):"Circle"==e?(n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),r=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Circle",t.width=t.width?t.width:100,t.height=t.height?t.height:90):"Polygon"==e&&(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),r=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Polygon",h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+42,y:i.y-29},{x:i.x+89,y:i.y-1},{x:i.x+78,y:i.y+42},{x:i.x+11,y:i.y+42},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1),o.isLock=!!t.isLock&&t.isLock,o.minHeight=t.minHeight?t.minHeight:0,o.minWidth=t.minWidth?t.minWidth:0,o.maxWidth=t.maxWidth?t.maxWidth:0,o.maxHeight=t.maxHeight?t.maxHeight:0,h&&(h=this.pdfViewer.annotation.getVertexPointsXY(h));var u=[],f={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:r,AnnotName:p,AnnotType:"shape",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:o,Author:t.author?t.author:"Guest",BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},CloudIntensity:0,Comments:null,CustomData:t.customData?t.customData:null,CreatedDate:d,EnableShapeLabel:!1,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:"#ffffff00",FontColor:null,FontSize:0,IsCloudShape:!1,IsCommentLock:!1,IsLocked:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LineHeadEnd:t.lineHeadStartStyle?t.lineHeadStartStyle:l?"ClosedArrow":"None",LineHeadStart:t.lineHeadEndStyle?t.lineHeadEndStyle:l?"ClosedArrow":"None",ModifiedDate:"",Note:"",Opacity:t.opacity?t.opacity:1,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:a,State:"",StateModel:"",StrokeColor:t.strokeColor?t.strokeColor:"#ff0000",Subject:e.toString(),Thickness:t.thickness?t.thickness:1,VertexPoints:h};return u[0]=f,{shapeAnnotation:u}},s}(),jAe=function(){function s(e,t){this.isStampAddMode=!1,this.stampPageNumber=[],this.isAddAnnotationProgramatically=!1,this.customStampName=null,this.dynamicText="",this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.renderStampAnnotations=function(e,t,i,n,r){for(var o=!1,a=0;a<this.stampPageNumber.length;a++)if(this.stampPageNumber[a]===t){o=!0;break}if(n&&(o=!1),e&&(!o||r)){this.stampPageNumber.push(t);for(var l=function(p){var u=e[p];u.annotationAddMode=h.pdfViewer.annotationModule.findAnnotationMode(u,t,u.AnnotType);var f=u.Apperarance,g=u.Rect,m=u.Opacity,b=parseFloat(e[p].pageNumber);isNaN(b)&&(b=e[p].PageNumber);var w=u.IsDynamic;document.getElementById(h.pdfViewer.element.id+"_pageDiv_"+b),u.AnnotationSettings=u.AnnotationSettings?u.AnnotationSettings:h.pdfViewer.annotationModule.updateSettings(h.pdfViewer.stampSettings);var I=h.stampImageData(u);if(w&&u.Subject&&"Draft"!==u.Subject&&!I){h.retrieveDynamicStampAnnotation(u.Subject),h.isExistingStamp=!0;for(var x=h.calculateImagePosition(g,!0),T=u.RotateAngle,L=0;L<f.length;L++){var N=f[L];if("string"===N.type&&void 0!==N.text){var _=void 0;2===(_=n?N.text:N.text.split("(")[1].split(")")[0]).split("(").length?_.split("(")[1].split(")")[0].toLowerCase()!==u.Subject.toLowerCase()&&(h.dynamicText+=_.split("(")[1].split(")")[0]):_.toLowerCase()!==u.Subject.toLowerCase()&&(h.dynamicText+=_)}}h.renderStamp(x.left,x.top,x.width,x.height,b,m,T,i,u,!0)}else if(u.Subject&&!I)h.retrievestampAnnotation(u.Subject),h.isExistingStamp=!0,x=h.calculateImagePosition(g,!0),h.renderStamp(x.left,x.top,x.width,x.height,b,m,T=u.RotateAngle,i,u),h.isExistingStamp=!1;else if(f)for(var B=function(W){var j=f[W],G=j.imagedata,U=j.CreationDate,J=j.ModifiedDate,$=j.RotateAngle;if(G){var ye=new Image,fe=h;ye.onload=function(){var ve=fe.calculateImagePosition(g,!0);u.AnnotationSettings=u.AnnotationSettings?u.AnnotationSettings:fe.pdfViewer.customStampSettings.annotationSettings,fe.renderCustomImage(ve,b,ye,U,J,$,m,i,!0,u)},ye.src=G}},q=0;q<f.length;q++)B(q)},h=this,d=0;d<e.length;d++)l(d)}},s.prototype.moveStampElement=function(e,t,i){var n=this.pdfViewerBase.getZoomFactor();e/=n,t/=n;var r="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp)if(this.pdfViewer.dateTimeFormat){var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.dynamicText="By "+r+" at "+o+" "}else{var a=(new Date).toString().split(" ").splice(1,3).join(" "),l=(new Date).toLocaleTimeString();this.dynamicText="By "+r+" at "+l+" , "+a+"   "}var h,d=this.currentStampAnnotation;return d&&"Image"===d.shapeAnnotationType?h={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:d.modifiedDate,shapeAnnotationType:"Image",opacity:d.opacity,rotateAngle:d.RotationAngle,annotName:d.annotationName,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:d.author}}:d&&(h={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:d.width,height:d.height},pageIndex:i,data:d.pathdata,shapeAnnotationType:"Stamp",strokeColor:d.strokeColor,fillColor:d.fillColor,opacity:.5,stampFillColor:d.stampFillColor,stampStrokeColor:d.stampStrokeColor,rotateAngle:d.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,subject:d.iconName,annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings}),this.pdfViewerBase.currentSignatureAnnot&&(h="SignatureText"===(d=this.pdfViewerBase.currentSignatureAnnot).shapeAnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:"",shapeAnnotationType:"SignatureText",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName,fontFamily:d.fontFamily,fontSize:Math.floor(d.bounds.height/2)}:"SignatureImage"===d.shapeAnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:"",shapeAnnotationType:"SignatureImage",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,shapeAnnotationType:"HandWrittenSignature",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName}),h},s.prototype.ConvertPointToPixel=function(e){return e*(96/72)},s.prototype.calculateImagePosition=function(e,t){var n=parseFloat(e.x?e.x:e.X),r=parseFloat(e.y?e.y:e.Y),o=parseFloat(e.width?e.width:e.Width),a=parseFloat(e.height?e.height:e.Height);return t?{width:this.ConvertPointToPixel(o),height:this.ConvertPointToPixel(a),left:this.ConvertPointToPixel(n),top:this.ConvertPointToPixel(r)}:{width:o,height:a,left:n,top:r}},s.prototype.createCustomStampAnnotation=function(e,t){var i=this,n=this.pdfViewerBase.currentPageNumber-1,o=(document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+n),new Image),a=this;o.onload=function(){i.pdfViewerBase.getZoomFactor();var h=i.pdfViewer.customStampSettings,d=h.width>0?h.width:0,p=h.height>0?h.height:0,u=100;d>0||p>0||(o.naturalHeight>=o.naturalWidth?(p=o.naturalHeight/o.naturalHeight*u,d=o.naturalWidth/o.naturalHeight*u):(p=o.naturalHeight/o.naturalWidth*u,d=o.naturalWidth/o.naturalWidth*u));var m={width:d,height:p,left:i.pdfViewer.customStampSettings.left,top:i.pdfViewer.customStampSettings.top},y=(new Date).toLocaleDateString(),b=i.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();a.renderCustomImage(m,n,o,y,b,0,1,null,null,null,t)},o.src=e},s.prototype.renderStamp=function(e,t,i,n,r,o,a,l,h,d){E.isDevice&&(this.pdfViewerBase.customStampCount+=1);var p="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp){var u=(new Date).toString().split(" ").splice(1,3).join(" "),f=(new Date).toLocaleTimeString();this.dynamicText="By "+p+" at "+f+" , "+u+" "}d&&(this.dynamicText+=" ",this.pdfViewerBase.isDynamicStamp=!0);var g,m=null,b=this.currentStampAnnotation;if(b){if(null!==i&&null!==n){b.width=i,b.height=n,b.Opacity=o,b.RotateAngle=a,b.AnnotName=w=h.AnnotName,b.State=h.State,b.AnnotationSettings=h.AnnotationSettings||this.pdfViewer.annotationModule.updateAnnotationSettings(b),b.AnnotationSelectorSettings=h.AnnotationSelectorSettings||this.pdfViewer.annotationSelectorSettings,b.ModifiedDate=h.ModifiedDate,b.StateModel=h.StateNodel,b.IsCommentLock=h.IsCommentLock,b.Note=h.Note;var _=h.Author;b.Author=_,b.Subject=h.Subject;var q=this.pdfViewer.annotation.getCustomData(h);b.allowedInteractions=h.AllowedInteractions?h.AllowedInteractions:h.allowedInteractions?h.allowedInteractions:["None"],b.CustomData=q,b.isPrint="Imported Annotation"===b.annotationAddMode?h.IsPrint:h.AnnotationSettings.isPrint,null===b.Author&&(b.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest"),b.Comments=this.pdfViewer.annotationModule.getAnnotationComments(h.Comments,h,_)}else{var w=this.pdfViewer.annotation.createGUID(),G=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",r+1);G&&(document.getElementById(G).id=w),b.AnnotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),b.AnnotName=w,b.Comments=[],b.State="",b.StateModel="",b.Note="",b.Opacity=1,b.RotateAngle=0,b.ModifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),b.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest"}var U=ia(Cs(b.pathdata)),J=h?h.annotationAddMode:"UI Drawn Annotation";b.AnnotationSelectorSettings=b.AnnotationSelectorSettings?b.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,g={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:b.width,height:b.height},pageIndex:r,data:b.pathdata,modifiedDate:b.ModifiedDate,shapeAnnotationType:"Stamp",strokeColor:b.strokeColor,fillColor:b.fillColor,opacity:b.Opacity,stampFillColor:b.stampFillColor,stampStrokeColor:b.stampStrokeColor,rotateAngle:b.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotName:b.AnnotName,notes:b.Note,comments:b.Comments,review:{state:b.State,stateModel:b.StateModel,modifiedDate:b.ModifiedDate,author:b.Author},subject:b.iconName,annotationSelectorSettings:b.AnnotationSelectorSettings,annotationSettings:b.AnnotationSettings,allowedInteractions:b.allowedInteractions,annotationAddMode:J,isPrint:b.isPrint,isCommentLock:b.IsCommentLock},m={stampAnnotationType:"path",author:b.Author,modifiedDate:b.ModifiedDate,subject:b.Subject,note:b.Note,strokeColor:b.strokeColor,fillColor:b.fillColor,opacity:b.Opacity,stampFillcolor:b.stampFillColor,rotateAngle:b.RotateAngle,creationDate:b.creationDate,pageNumber:r,icon:b.iconName,stampAnnotationPath:U,randomId:"stamp"+this.pdfViewerBase.customStampCount,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:e,top:t,width:b.width,height:b.height},annotName:b.AnnotName,comments:b.Comments,review:{state:b.State,stateModel:b.StateModel,author:b.Author,modifiedDate:b.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(b),annotationSettings:b.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(b),allowedInteractions:b.allowedInteractions,isPrint:b.isPrint,isCommentLock:b.IsCommentLock,isMaskedImage:b.IsMaskedImage,customStampName:""},this.storeStampInSession(r,m),this.isAddAnnotationProgramatically&&this.triggerAnnotationAdd(g,b),this.pdfViewer.add(g),null!=l&&null!=l||(l=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+r)),this.pdfViewer.renderDrawing(l,r),this.pdfViewerBase.stampAdded&&(this.triggerAnnotationAdd(g,b),this.pdfViewerBase.isNewStamp=!0,this.pdfViewer.annotation.addAction(r,null,g,"Addition","",g,g)),this.pdfViewerBase.stampAdded=!1,this.isExistingStamp||(b.creationDate=(new Date).toLocaleDateString(),b.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}this.resetAnnotation()},s.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stampSettings.annotationSelectorSettings&&(t=this.pdfViewer.stampSettings.annotationSelectorSettings),t},s.prototype.resetAnnotation=function(){this.pdfViewerBase.isDynamicStamp=!1,this.dynamicText="",this.currentStampAnnotation=null,E.isDevice||(this.pdfViewerBase.customStampCount+=1)},s.prototype.updateDeleteItems=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,r=!1;if(t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest",i){var o=this.pdfViewer.annotation.createGUID(),a=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",e+1);a&&(document.getElementById(a).id=o),t.annotName=o,t.Comments=[],t.State="",t.StateModel="",t.Note="",t.Opacity=1,t.RotateAngle=0}"Stamp"===t.shapeAnnotationType&&(t.isPrint=this.pdfViewer.stampSettings.isPrint);var l=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,h=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if("Image"===t.shapeAnnotationType?(t.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",t.isPrint=this.pdfViewer.customStampSettings.isPrint,this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation&&this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:t.id,n={stampAnnotationType:"image",author:t.author,modifiedDate:t.modifiedDate,subject:"",note:"",strokeColor:"",fillColor:"",opacity:i,rotateAngle:"0",creationDate:t.currentDate,pageNumber:e,icon:"",stampAnnotationPath:t.data,randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},stampFillcolor:"",isDynamicStamp:!1,annotName:t.annotName,comments:[],review:{state:"",stateModel:"",author:t.author,modifiedDate:t.modifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:l,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),customData:this.pdfViewer.annotationModule.getData("image"),isPrint:t.isPrint,allowedInteractions:h,isCommentLock:!1,isMaskedImage:t.isMaskedImage,customStampName:this.customStampName}):n=t.stampAnnotationType?{stampAnnotationType:t.stampAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.Subject,note:t.Note,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillcolor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageNumber,icon:t.icon,stampAnnotationPath:t.stampAnnotationPath,randomId:t.randomId,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,bounds:{left:t.bounds.left,top:t.bounds.top,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments,review:{state:t.State,stateModel:t.StateModel,author:t.author,modifiedDate:t.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:l,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.stampAnnotationType),isPrint:t.isPrint,allowedInteractions:h,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:""}:{stampAnnotationType:t.shapeAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.subject,note:t.notes,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillColor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageIndex,icon:t.subject,stampAnnotationPath:t.data,randomId:t.id,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,shapeAnnotationType:"stamp",bounds:{left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments,review:{state:t.State,stateModel:t.StateModel,author:t.author,modifiedDate:t.ModifiedDate},annotationSelectorSettings:l,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.shapeAnnotationType),isPrint:t.isPrint,allowedInteractions:h,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:""},i){if("Image"!==t.shapeAnnotationType){var p=ia(Cs(t.data));n.stampAnnotationPath=p}if(t.creationDate=(new Date).toLocaleDateString(),!E.isDevice&&t.wrapper&&(n.bounds.width=t.wrapper.actualSize.width,n.bounds.height=t.wrapper.actualSize.height,n.bounds.left=t.wrapper.bounds.x,n.bounds.top=t.wrapper.bounds.y),n.opacity=i,this.pdfViewerBase.stampAdded){this.storeStampInSession(e,n),r=!0;var u={left:n.bounds.left,top:n.bounds.top,width:n.bounds.width,height:n.bounds.height};this.pdfViewerBase.updateDocumentEditedProperty(!0);var f={opacity:n.opacity,author:n.author,modifiedDate:n.modifiedDate};"Image"===t.shapeAnnotationType?(this.pdfViewerBase.stampAdded=!1,this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Image",u,f,null,null,null,null,null,this.customStampName),this.customStampName=null):this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Stamp",u,f),this.pdfViewer.annotation.addAction(e,null,t,"Addition","",t,n)}}r||this.storeStampInSession(e,n)},s.prototype.renderCustomImage=function(e,t,i,n,r,o,a,l,h,d,p){var u,g,m,y,f=null,b=this.pdfViewer.customStampSettings.left>0&&this.pdfViewer.customStampSettings.top>0,w=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),S=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;E.isDevice&&(this.pdfViewerBase.customStampCount+=1),h?(g=d.AnnotName,m=d.Author,y=d.IsCommentLock,w=d.AnnotationSettings?d.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),S=d.AllowedInteractions?d.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(d),null===m&&(m="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest")):(g=this.pdfViewer.annotation.createGUID(),m="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",y=!1),r||(r=d.ModifiedDate?d.ModifiedDate:(new Date).toLocaleString());var x;this.currentStampAnnotation=u={id:"stamp"+this.pdfViewerBase.customStampCount,allowedInteractions:S,bounds:{x:e.left,y:e.top,width:e.width,height:e.height},pageIndex:t,data:i.src,modifiedDate:r,shapeAnnotationType:"Image",opacity:a,rotateAngle:o,annotName:g,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:m},annotationSettings:w,annotationAddMode:d?d.annotationAddMode:"UI Drawn Annotation ",signatureName:p,isPrint:x=h?"Imported Annotation"===d.annotationAddMode?d.IsPrint:d.AnnotationSettings.isPrint:this.pdfViewer.customStampSettings.isPrint,isCommentLock:y};var T=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;if(h||b){if(!d){this.isStampAnnotSelected=!1,(d=u).Note="",d.State="",d.StateModel="";var L=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",t+1);L&&(document.getElementById(L).id=g)}if(f={stampAnnotationType:"image",author:m,allowedInteractions:S,modifiedDate:r,subject:"",note:d.Note,strokeColor:"",fillColor:"",opacity:a,rotateAngle:"0",creationDate:n,pageNumber:t,icon:"",stampAnnotationPath:i.src,randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{left:e.left,top:e.top,width:e.width,height:e.height},stampFillcolor:"",isDynamicStamp:!1,annotName:g,comments:this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),review:{state:d.State,stateModel:d.StateModel,author:m,modifiedDate:r},shapeAnnotationType:"stamp",annotationSelectorSettings:T,annotationSettings:w,customData:this.pdfViewer.annotation.getCustomData(d),isPrint:x,isCommentLock:y,isMaskedImage:d.IsMaskedImage,customStampName:d.CustomStampName},this.storeStampInSession(t,f),u.comments=this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),u.review={state:d.State,stateModel:d.StateModel,author:m,modifiedDate:r},this.isAddAnnotationProgramatically){var N={opacity:u.opacity,borderColor:u.strokeColor,borderWidth:u.thickness,author:d.author,subject:d.subject,modifiedDate:d.modifiedDate,fillColor:u.fillColor,fontSize:u.fontSize,width:u.bounds.width,height:u.bounds.height,fontColor:u.fontColor,fontFamily:u.fontFamily,defaultText:u.dynamicText,fontStyle:u.font,textAlignment:u.textAlign};this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:d.id,this.pdfViewer.fireAnnotationAdd(u.pageIndex,u.annotName,"Image",u.bounds,N,null,null,null,null,null,this.customStampName),this.customStampName=null}this.pdfViewer.add(u),null!=l&&null!=l||(l=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t)),this.pdfViewer.renderDrawing(l,t),this.pdfViewerBase.stampAdded&&this.pdfViewer.annotation.addAction(t,null,u,"Addition","",u,u)}E.isDevice||(this.pdfViewerBase.customStampCount+=1)},s.prototype.retrieveDynamicStampAnnotation=function(e){var t;if(e){switch(e.trim()){case"Revised":t={iconName:"Revised",pathdata:"M19.68,21.22a3.94,3.94,0,0,1-1.1-1.9L16,11.87l-.21-.64a20.77,20.77,0,0,0,2.11-.58,7.24,7.24,0,0,0,2-1.09,5.65,5.65,0,0,0,1.72-2.12,5.4,5.4,0,0,0,.52-2.2A4.15,4.15,0,0,0,19.1,1.05a14.58,14.58,0,0,0-4.72-.6H5.31v.86a7,7,0,0,1,2,.33c.3.14.45.48.45,1a6.1,6.1,0,0,1-.14,1.08l-.21.8L3.31,19.32a3.35,3.35,0,0,1-.94,1.78,3.58,3.58,0,0,1-1.74.57v.86h9.83v-.86a6.22,6.22,0,0,1-2-.35c-.29-.15-.43-.52-.43-1.11,0-.1,0-.21,0-.31a2.36,2.36,0,0,1,0-.28l.28-1.14,1.95-6.86h.93l3.56,10.91h6.25v-.88A3.05,3.05,0,0,1,19.68,21.22ZM13.29,10.31a14,14,0,0,1-2.63.23l2-7.56a2.67,2.67,0,0,1,.52-1.17,1.4,1.4,0,0,1,1-.3,2.74,2.74,0,0,1,2.33.91,3.72,3.72,0,0,1,.69,2.3,6.4,6.4,0,0,1-.49,2.52,6.72,6.72,0,0,1-1.06,1.82A4.11,4.11,0,0,1,13.29,10.31ZM26,.45H43.74l-1.4,6.27-.88-.15a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.11-1.69a2.9,2.9,0,0,0-1.68.32A2.34,2.34,0,0,0,33.26,3l-1.95,7.33a13.55,13.55,0,0,0,4.48-.56c.68-.32,1.44-1.3,2.27-2.92l.91.11-2.44,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4A7.57,7.57,0,0,0,31,11.38l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.85,9.85,0,0,0,40.73,16l.81.14-1.95,6.42h-18v-.9a3.43,3.43,0,0,0,1.42-.53A3.42,3.42,0,0,0,24,19.32L28,4.51c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.15-.91-.44-1.06a6.85,6.85,0,0,0-2-.34ZM63.4,3.37,51,23.15H49.9L47.39,6.34a17.25,17.25,0,0,0-.93-4.24c-.25-.43-.93-.7-2.05-.79V.45h9.86v.86a5.47,5.47,0,0,0-1.72.19,1.14,1.14,0,0,0-.81,1.16,3,3,0,0,0,0,.31l0,.32L53.5,16.43l6.24-9.85c.49-.79.94-1.57,1.33-2.36a4.45,4.45,0,0,0,.6-1.85.88.88,0,0,0-.61-.9,6.11,6.11,0,0,0-1.52-.16V.45h6.34v.86a3.88,3.88,0,0,0-1.16.5A5.73,5.73,0,0,0,63.4,3.37ZM70.08,20c0,.11,0,.22,0,.31,0,.56.15.91.45,1.06a6.39,6.39,0,0,0,1.95.35v.86H62.63v-.86a3.58,3.58,0,0,0,1.74-.57,3.35,3.35,0,0,0,.94-1.78l4-14.81q.18-.63.27-1a3.78,3.78,0,0,0,.09-.75c0-.56-.16-.91-.47-1.06a7,7,0,0,0-2-.34V.45h9.83v.86a3.61,3.61,0,0,0-1.75.58,3.37,3.37,0,0,0-.91,1.78L70.4,18.48l-.26,1.14Zm19.26-7.23a6.37,6.37,0,0,1,1.07,3.62,6.58,6.58,0,0,1-2.06,4.71,7.54,7.54,0,0,1-5.65,2.1A10.15,10.15,0,0,1,80.89,23a11.42,11.42,0,0,1-1.8-.49l-.83-.3-.58-.2a2,2,0,0,0-.38,0,1,1,0,0,0-.78.26,3.89,3.89,0,0,0-.52.92H75l1.19-7.4,1,.07a14.63,14.63,0,0,0,.28,2.3,5.27,5.27,0,0,0,2.79,3.44,4.73,4.73,0,0,0,2.06.44,3.85,3.85,0,0,0,3.07-1.26,4.39,4.39,0,0,0,1.09-2.94q0-2.09-4.05-5.25c-2.7-2.22-4-4.26-4-6.14a6.31,6.31,0,0,1,1.78-4.53,6.51,6.51,0,0,1,5-1.87,9.67,9.67,0,0,1,1.82.18A6.54,6.54,0,0,1,88,.45l.84.28.56.13a2.59,2.59,0,0,0,.52.06,1.4,1.4,0,0,0,.88-.24,2.2,2.2,0,0,0,.53-.6h1L91,6.69l-.85-.12L90,5.49a6,6,0,0,0-1-2.62,3.82,3.82,0,0,0-3.38-1.73A3,3,0,0,0,82.9,2.53a3.6,3.6,0,0,0-.58,2,3.44,3.44,0,0,0,.59,2,6,6,0,0,0,1,1l2.85,2.33A12.75,12.75,0,0,1,89.34,12.72ZM110.27,16l.81.14-2,6.42H90.85v-.86a3.66,3.66,0,0,0,1.74-.57,3.42,3.42,0,0,0,.93-1.78l4-14.81c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.14-.91-.44-1.06a6.85,6.85,0,0,0-2-.34V.45h17.77l-1.4,6.27L111,6.57a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.1-1.69a2.92,2.92,0,0,0-1.69.32A2.34,2.34,0,0,0,102.8,3l-2,7.33a13.55,13.55,0,0,0,4.48-.56c.69-.32,1.44-1.3,2.27-2.92l.92.11-2.45,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4,7.57,7.57,0,0,0-3.79-.64l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.81,9.81,0,0,0,110.27,16Zm22.65-13Q130.39.45,125.52.45h-9.58v.86a7,7,0,0,1,2,.34c.31.15.47.5.47,1.06a3.61,3.61,0,0,1-.09.74c-.06.29-.15.64-.26,1.06L114,19.31a3.18,3.18,0,0,1-1.15,1.91,3.57,3.57,0,0,1-1.53.45v.86h9.47a14.87,14.87,0,0,0,10.95-4.14,12,12,0,0,0,3.75-8.77A8.94,8.94,0,0,0,132.92,2.94ZM129,15.36q-2.62,6.06-8.52,6.05a2.46,2.46,0,0,1-1.42-.29,1.05,1.05,0,0,1-.4-.93,2.24,2.24,0,0,1,0-.34,2.65,2.65,0,0,1,.08-.43l4.55-16.67a2,2,0,0,1,.54-.92,2.2,2.2,0,0,1,1.44-.35,4.74,4.74,0,0,1,4.47,2.22,7.9,7.9,0,0,1,.83,3.9A19.32,19.32,0,0,1,129,15.36Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.47,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Reviewed":t={iconName:"Reviewed",pathdata:"M17.37,18.25a3.47,3.47,0,0,1-1-1.67L14.17,10c0-.07-.1-.26-.19-.56A14.71,14.71,0,0,0,15.83,9a6.08,6.08,0,0,0,1.76-1A4.92,4.92,0,0,0,19.1,6.14a4.71,4.71,0,0,0,.46-1.93A3.65,3.65,0,0,0,16.86.52,12.83,12.83,0,0,0,12.72,0h-8V.75a6.62,6.62,0,0,1,1.72.3c.26.12.39.41.39.88a4.56,4.56,0,0,1-.13.94c0,.2-.1.44-.17.7L3,16.58a2.87,2.87,0,0,1-.82,1.56,3.15,3.15,0,0,1-1.53.51v.75H9.27v-.75a5.88,5.88,0,0,1-1.74-.31c-.25-.13-.37-.46-.37-1a2.53,2.53,0,0,1,0-.28,1.44,1.44,0,0,1,0-.24l.24-1,1.71-6H10l3.13,9.59h5.49v-.77A2.71,2.71,0,0,1,17.37,18.25ZM11.75,8.67a12.06,12.06,0,0,1-2.3.19L11.2,2.22a2.2,2.2,0,0,1,.46-1,1.19,1.19,0,0,1,.87-.27,2.41,2.41,0,0,1,2.05.8,3.29,3.29,0,0,1,.6,2A5.63,5.63,0,0,1,14.75,6a6.06,6.06,0,0,1-.93,1.59A3.65,3.65,0,0,1,11.75,8.67ZM22.9,0H38.52L37.29,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L27.59,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1-2.16,7.93-.79-.15c0-.27.06-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11A6.61,6.61,0,0,0,27.3,9.6l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L34.86,19.4H19.05v-.79a2.88,2.88,0,0,0,1.28-.47,2.94,2.94,0,0,0,.82-1.56l3.56-13q.13-.49.21-.9A3.26,3.26,0,0,0,25,2q0-.73-.39-.93A6.44,6.44,0,0,0,22.9.75ZM55.79,2.57,44.86,20h-.93L41.72,5.17a16.05,16.05,0,0,0-.81-3.73c-.22-.37-.82-.6-1.81-.69V0h8.67V.75a5,5,0,0,0-1.52.17,1,1,0,0,0-.7,1,2.53,2.53,0,0,0,0,.28l0,.27L47.09,14l5.48-8.66C53,4.69,53.4,4,53.75,3.32a4,4,0,0,0,.52-1.63.78.78,0,0,0-.54-.8A5.88,5.88,0,0,0,52.4.75V0H58V.75a3.55,3.55,0,0,0-1,.44A5.18,5.18,0,0,0,55.79,2.57ZM62,18.34a6,6,0,0,0,1.71.31v.75H55.12v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56L61,3.57c.1-.37.18-.68.23-.93A2.81,2.81,0,0,0,61.34,2c0-.49-.13-.8-.41-.93a6.61,6.61,0,0,0-1.71-.3V0h8.63V.75a3.17,3.17,0,0,0-1.53.51,3,3,0,0,0-.8,1.57l-3.58,13-.22,1a2.74,2.74,0,0,0,0,.28,1.41,1.41,0,0,0,0,.28C61.64,17.9,61.78,18.21,62,18.34ZM69.13,0H84.75L83.52,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L73.82,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1L78.4,13.64l-.79-.15c0-.27.07-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11,6.61,6.61,0,0,0-3.33-.57l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L81.1,19.4H65v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56l3.56-13q.14-.49.21-.9A3.26,3.26,0,0,0,71.24,2q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3Zm39.15,2.83L100,20h-.84L97.41,5.85,90.67,20h-.84L87.58,3.13A3.83,3.83,0,0,0,87,1.23,2.84,2.84,0,0,0,85.33.71V0h8.06V.75A2.55,2.55,0,0,0,92.27,1a1.33,1.33,0,0,0-.66,1.31c0,.06,0,.13,0,.19s0,.15,0,.26l1.15,10.16,4.32-9a1,1,0,0,0,0-.27,3.33,3.33,0,0,0-.64-2.38A2.5,2.5,0,0,0,95.06.71V0h7.78V.71a2.9,2.9,0,0,0-1.4.34c-.27.19-.41.6-.41,1.24,0,.13,0,.32,0,.55,0,.4.08.88.14,1.47l1,8.47,4.51-9.42a7.12,7.12,0,0,0,.29-.74,2.48,2.48,0,0,0,.14-.79.9.9,0,0,0-.48-.93,3.25,3.25,0,0,0-1.34-.19V0h5.41V.71a2.34,2.34,0,0,0-1.1.35A4.56,4.56,0,0,0,108.28,2.83Zm16.45,10.81.71.12-1.71,5.64H107.66v-.75a3.15,3.15,0,0,0,1.53-.51,2.87,2.87,0,0,0,.82-1.56l3.57-13q.12-.49.21-.9a3.17,3.17,0,0,0,.08-.69q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3V0h15.62l-1.23,5.51-.78-.13a5.26,5.26,0,0,0-.68-3C124,1.4,122.46.91,120.2.91a2.64,2.64,0,0,0-1.48.27,2.09,2.09,0,0,0-.55,1l-1.72,6.45a12,12,0,0,0,3.94-.5,5.62,5.62,0,0,0,2-2.56l.81.1L121,13.64l-.79-.15c0-.27.06-.51.07-.71s0-.37,0-.5a2.34,2.34,0,0,0-.86-2.11,6.57,6.57,0,0,0-3.32-.57l-1.91,7.08a5,5,0,0,0-.11.5,3.14,3.14,0,0,0,0,.38.8.8,0,0,0,.31.65,2.25,2.25,0,0,0,1.3.25,12.26,12.26,0,0,0,4.5-.73A8.67,8.67,0,0,0,124.73,13.64ZM144.64,2.19Q142.41,0,138.14,0h-8.42V.75a6.61,6.61,0,0,1,1.71.3c.28.13.41.44.41.93a2.81,2.81,0,0,1-.08.66c0,.25-.12.56-.23.93l-3.56,13a2.78,2.78,0,0,1-1,1.68,3.44,3.44,0,0,1-1.35.4v.75h8.32a13.06,13.06,0,0,0,9.63-3.64,10.49,10.49,0,0,0,3.3-7.7A7.87,7.87,0,0,0,144.64,2.19ZM141.2,13.1q-2.31,5.32-7.48,5.32a2.27,2.27,0,0,1-1.26-.25,1,1,0,0,1-.34-.82,1.62,1.62,0,0,1,0-.3,2.16,2.16,0,0,1,.08-.38l4-14.65a1.63,1.63,0,0,1,.47-.81A2,2,0,0,1,138,.91a4.16,4.16,0,0,1,3.93,1.95,7,7,0,0,1,.72,3.42A16.82,16.82,0,0,1,141.2,13.1Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Received":t={iconName:"Received",pathdata:"M18.17,8.76a5,5,0,0,0,1.57-1.93,5,5,0,0,0,.47-2A3.76,3.76,0,0,0,17.42,1,13,13,0,0,0,13.13.48H4.89v.78a6.49,6.49,0,0,1,1.77.31c.27.12.41.43.41.91a5.87,5.87,0,0,1-.13,1c-.05.2-.12.44-.19.72L3.06,17.64a3,3,0,0,1-.84,1.61,3.36,3.36,0,0,1-1.59.53v.77H9.57v-.77a6.17,6.17,0,0,1-1.8-.32c-.26-.14-.39-.48-.39-1a2.46,2.46,0,0,1,0-.28,1.78,1.78,0,0,1,0-.26l.25-1,1.78-6.25h.84l3.24,9.92h5.66v-.8A2.76,2.76,0,0,1,18,19.36a3.57,3.57,0,0,1-1-1.72l-2.31-6.78c0-.07-.09-.27-.19-.58.87-.2,1.51-.38,1.92-.52A6.56,6.56,0,0,0,18.17,8.76Zm-2.93-2.1a6.19,6.19,0,0,1-1,1.65,3.85,3.85,0,0,1-2.14,1.14,12.92,12.92,0,0,1-2.39.2l1.81-6.87A2.5,2.5,0,0,1,12,1.72a1.27,1.27,0,0,1,.9-.27,2.5,2.5,0,0,1,2.12.83,3.35,3.35,0,0,1,.62,2.09A5.81,5.81,0,0,1,15.24,6.66ZM30.3,2.78,28.52,9.45a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,31.66,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76,9,9,0,0,0,4.67-4.23l.73.13-1.77,5.83H19.8v-.83A2.83,2.83,0,0,0,21,19.25a3.09,3.09,0,0,0,.85-1.61L25.54,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H39.82l-1.27,5.7-.81-.13A5.44,5.44,0,0,0,37,3Q35.9,1.42,32.4,1.42a2.69,2.69,0,0,0-1.54.29A2.08,2.08,0,0,0,30.3,2.78ZM56.56,6.1c0-.07,0-.18,0-.33a4.89,4.89,0,0,0-1.12-3.53,3.75,3.75,0,0,0-2.82-1.16c-2.33,0-4.35,1.55-6.07,4.63a17.09,17.09,0,0,0-2.31,8.43c0,2.08.47,3.5,1.43,4.27a4.89,4.89,0,0,0,3.11,1.15,6.84,6.84,0,0,0,4.14-1.45A11.51,11.51,0,0,0,55,16l.91.66A10.08,10.08,0,0,1,52.26,20a9.33,9.33,0,0,1-4.34,1.11A8.56,8.56,0,0,1,42,19a7.25,7.25,0,0,1-2.35-5.67A13.53,13.53,0,0,1,43.22,4a11.19,11.19,0,0,1,8.56-4A12.34,12.34,0,0,1,55,.44,13.17,13.17,0,0,0,56.9.88a1,1,0,0,0,.71-.24A2.94,2.94,0,0,0,58.06,0H59L57.45,7l-.94-.18C56.54,6.42,56.55,6.17,56.56,6.1Zm18,8.49.74.13-1.78,5.83H56.87v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L63,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.14-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H77.26L76,6.18l-.81-.13A5.44,5.44,0,0,0,74.48,3q-1.14-1.54-4.64-1.54a2.69,2.69,0,0,0-1.54.29,2.08,2.08,0,0,0-.56,1.07L66,9.45A12.53,12.53,0,0,0,70,8.94a5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,69.1,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76A8.91,8.91,0,0,0,74.52,14.59Zm31-11.45-11.31,18h-1L91,5.83A16.56,16.56,0,0,0,90.12,2c-.2-.34-.71-.56-1.51-.67a3,3,0,0,0-1.31.48,3.08,3.08,0,0,0-.82,1.62l-3.7,13.47-.24,1c0,.1,0,.2-.05.3s0,.2,0,.28c0,.51.14.83.41,1a6.21,6.21,0,0,0,1.77.32v.77H75.72v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L81.83,4.17c.11-.38.19-.7.25-.95a3.75,3.75,0,0,0,.08-.69c0-.5-.15-.82-.43-1A6.49,6.49,0,0,0,80,1.26V.48H97.22v.78a4.92,4.92,0,0,0-1.57.18,1,1,0,0,0-.73,1.05,2.81,2.81,0,0,0,0,.29l0,.28,1.56,12,5.67-9a24.21,24.21,0,0,0,1.21-2.14,4.07,4.07,0,0,0,.54-1.68.79.79,0,0,0-.55-.82A5.69,5.69,0,0,0,102,1.26V.48h5.76v.78a3.5,3.5,0,0,0-1,.46A5.16,5.16,0,0,0,105.52,3.14Zm16.83,11.45.73.13-1.77,5.83H104.69v-.77a3.31,3.31,0,0,0,1.58-.53,3,3,0,0,0,.85-1.61l3.69-13.47c.08-.34.16-.65.22-.93a4,4,0,0,0,.08-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48h16.16l-1.28,5.7-.8-.13A5.43,5.43,0,0,0,122.3,3q-1.14-1.54-4.64-1.54a2.67,2.67,0,0,0-1.53.29,2.16,2.16,0,0,0-.57,1.07l-1.78,6.67a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2.06-2.66l.83.11-2.22,8.2-.82-.15c0-.28.06-.53.08-.74s0-.38,0-.52a2.45,2.45,0,0,0-.88-2.18,6.9,6.9,0,0,0-3.44-.58l-2,7.32c-.05.18-.08.35-.11.51a3.58,3.58,0,0,0,0,.4.81.81,0,0,0,.32.67,2.28,2.28,0,0,0,1.35.26,12.62,12.62,0,0,0,4.65-.76A9,9,0,0,0,122.35,14.59ZM142.94,2.75Q140.63.48,136.21.48h-8.7v.78a6.66,6.66,0,0,1,1.77.31q.42.21.42,1a2.91,2.91,0,0,1-.08.68q-.08.39-.24,1L125.7,17.62a2.93,2.93,0,0,1-1,1.75,3.54,3.54,0,0,1-1.39.41v.77h8.61a13.5,13.5,0,0,0,10-3.76,10.84,10.84,0,0,0,3.41-8A8.14,8.14,0,0,0,142.94,2.75ZM139.38,14q-2.38,5.51-7.74,5.5a2.35,2.35,0,0,1-1.29-.26,1,1,0,0,1-.36-.85,1.78,1.78,0,0,1,0-.31,2.08,2.08,0,0,1,.08-.39l4.13-15.15a1.76,1.76,0,0,1,.49-.84A2,2,0,0,1,136,1.42a4.32,4.32,0,0,1,4.07,2A7.17,7.17,0,0,1,140.83,7,17.49,17.49,0,0,1,139.38,14Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:127.70402,height:55.84601,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:127.70402,height:55.84601,stampFillColor:"#f6dedd",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}},s.prototype.retrievestampAnnotation=function(e){if(e){var t=void 0;switch(e.trim()){case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:149.474,height:20.783,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#192760",width:149.633,height:20.811,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Witness":t={iconName:"Witness",pathdata:"M19.63,2.67,12.77,16.84h-.69L10.63,5.17,5.05,16.84H4.36L2.5,2.92A3.13,3.13,0,0,0,2,1.35,2.38,2.38,0,0,0,.63.91V.33H7.3V1a2.27,2.27,0,0,0-.92.17A1.11,1.11,0,0,0,5.84,2.2v.16c0,.05,0,.13,0,.22L6.81,11l3.57-7.48a.79.79,0,0,0,0-.23,2.78,2.78,0,0,0-.53-2A2.23,2.23,0,0,0,8.68.91V.33h6.45V.91A2.42,2.42,0,0,0,14,1.2c-.23.16-.34.5-.34,1,0,.11,0,.26,0,.46s.07.73.12,1.21l.8,7L18.3,3.11c.09-.19.17-.4.25-.62a2.11,2.11,0,0,0,.11-.65.73.73,0,0,0-.4-.76,2.73,2.73,0,0,0-1.1-.17V.33h4.47V.91a1.92,1.92,0,0,0-.91.3A3.66,3.66,0,0,0,19.63,2.67ZM29.76.33H22.62V1A5.07,5.07,0,0,1,24,1.2c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L21.17,14.05a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,25,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,29.76,1ZM41.9,4.88l.63,0,.86-4.6H30.2l-.93,4.1.62.16A6.6,6.6,0,0,1,32,2a5.22,5.22,0,0,1,3.06-.86L31.53,14.05a2.24,2.24,0,0,1-1,1.5,3.67,3.67,0,0,1-1.51.21v.62H37v-.62a6,6,0,0,1-1.62-.24c-.26-.1-.39-.36-.39-.77,0-.07,0-.14,0-.21s0-.16.05-.27l.2-.83L38.57,1.16a3.76,3.76,0,0,1,2,.52A3.69,3.69,0,0,1,41.9,4.88ZM59.24,1,59.58,1V.33H54.65V1A3.78,3.78,0,0,1,56,1.22a1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13l-1.87,6.79L49.05.33H44.21V1a3.51,3.51,0,0,1,1.13.2,1.51,1.51,0,0,1,.74.85l.1.25L43.49,12.1A13.5,13.5,0,0,1,42.4,15a1.87,1.87,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.64-1.17,3.55,3.55,0,0,1,.06-.64q.11-.53.39-1.59L47,3.5,53.2,16.78h.59L57.13,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,59.24,1Zm7.26.31a2.11,2.11,0,0,1,1.23-.23c1.87,0,3.1.41,3.71,1.23A4.39,4.39,0,0,1,72,4.78l.64.11,1-4.56H60.75V1a5,5,0,0,1,1.42.25c.22.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-3,10.77a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h13.3l1.42-4.66-.59-.11A7.1,7.1,0,0,1,67.75,15a10,10,0,0,1-3.72.61A1.86,1.86,0,0,1,63,15.4a.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.48,5.48,0,0,1,2.75.47,2,2,0,0,1,.71,1.75c0,.11,0,.25,0,.41s0,.37-.06.6l.65.11L70.2,5.05,69.54,5a4.69,4.69,0,0,1-1.65,2.12,10.06,10.06,0,0,1-3.26.41l1.42-5.33A1.75,1.75,0,0,1,66.5,1.31ZM80.88.83a2.77,2.77,0,0,1,2.46,1.26A4.36,4.36,0,0,1,84,4l.08.78.62.08,1-4.8H85a1.77,1.77,0,0,1-.38.43A1,1,0,0,1,84,.67a2.76,2.76,0,0,1-.37,0l-.41-.1-.61-.2a4.78,4.78,0,0,0-.79-.2A6.71,6.71,0,0,0,80.46,0a4.76,4.76,0,0,0-3.62,1.36,4.61,4.61,0,0,0-1.29,3.29q0,2.05,2.94,4.47t2.94,3.82a3.19,3.19,0,0,1-.79,2.14,2.8,2.8,0,0,1-2.23.92,3.43,3.43,0,0,1-1.5-.33,3.82,3.82,0,0,1-2-2.5,10.33,10.33,0,0,1-.2-1.67L74,11.45l-.87,5.38h.73a2.85,2.85,0,0,1,.38-.67A.75.75,0,0,1,74.8,16a1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.62,8.62,0,0,0,1.3.35,7.53,7.53,0,0,0,1.32.12,5.48,5.48,0,0,0,4.11-1.53,4.77,4.77,0,0,0,1.49-3.43,4.59,4.59,0,0,0-.77-2.63,9.31,9.31,0,0,0-1.87-2L79.61,5.5a4.31,4.31,0,0,1-.74-.77,2.55,2.55,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.23,2.23,0,0,1,80.88.83Zm12.31,0a2.8,2.8,0,0,1,2.47,1.26A4.49,4.49,0,0,1,96.35,4l.08.78.62.08,1-4.8h-.71a1.62,1.62,0,0,1-.39.43,1,1,0,0,1-.64.18,2.9,2.9,0,0,1-.38,0l-.41-.1-.61-.2a4.65,4.65,0,0,0-.78-.2A6.88,6.88,0,0,0,92.77,0a4.73,4.73,0,0,0-3.61,1.36,4.57,4.57,0,0,0-1.3,3.29q0,2.05,2.94,4.47c2,1.54,3,2.81,3,3.82a3.2,3.2,0,0,1-.8,2.14,2.78,2.78,0,0,1-2.23.92,3.36,3.36,0,0,1-1.49-.33A3.68,3.68,0,0,1,88,14.73a3.76,3.76,0,0,1-.81-1.56A10.6,10.6,0,0,1,87,11.5l-.7-.05-.86,5.38h.72a2.85,2.85,0,0,1,.38-.67.78.78,0,0,1,.57-.19,1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.74,8.74,0,0,0,1.31.35,7.37,7.37,0,0,0,1.32.12,5.49,5.49,0,0,0,4.11-1.53,4.81,4.81,0,0,0,1.49-3.43,4.67,4.67,0,0,0-.77-2.63A9.57,9.57,0,0,0,94,7.2L91.93,5.5a4,4,0,0,1-.74-.77,2.48,2.48,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.2,2.2,0,0,1,93.19.83Z",opacity:1,strokeColor:"",fillColor:"#192760",width:97.39,height:16.84,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InitialHere":case"Initial Here":t={iconName:"Initial Here",pathdata:"M6.36,15.51a5.09,5.09,0,0,0,1.42.25v.62H.63v-.62a2.62,2.62,0,0,0,1.27-.42,2.47,2.47,0,0,0,.68-1.29l3-10.77c.08-.3.15-.56.19-.77A2.86,2.86,0,0,0,5.78,2c0-.41-.11-.66-.34-.77A5.07,5.07,0,0,0,4,1V.33h7.14V1a2.76,2.76,0,0,0-1.27.42,2.5,2.5,0,0,0-.66,1.3l-3,10.77-.19.83c0,.08,0,.16,0,.24a2,2,0,0,0,0,.23C6,15.14,6.14,15.4,6.36,15.51ZM27,1,27.36,1V.33H22.43V1a3.78,3.78,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13L22,11.43,16.83.33H12V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.11.25-2.7,9.85A13,13,0,0,1,10.18,15a1.85,1.85,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.63-1.17,4.72,4.72,0,0,1,.05-.64q.1-.53.39-1.59l2.39-8.6L21,16.78h.6L24.91,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,27,1ZM35.78.33H28.64V1a5.16,5.16,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L27.19,14.05a2.47,2.47,0,0,1-.68,1.29,2.66,2.66,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,31,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23,2,2,0,0,1,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,35.78,1Zm12.76,4.6.87-4.6H36.22l-.93,4.1.62.16A6.52,6.52,0,0,1,38,2a5.21,5.21,0,0,1,3-.86L37.55,14.05a2.24,2.24,0,0,1-1,1.5,3.7,3.7,0,0,1-1.51.21v.62H43v-.62a5.79,5.79,0,0,1-1.61-.24c-.26-.1-.39-.36-.39-.77a1.48,1.48,0,0,1,0-.21,2,2,0,0,1,0-.27l.2-.83L44.58,1.16a3.77,3.77,0,0,1,2,.52,3.74,3.74,0,0,1,1.31,3.2Zm4,9.81a.93.93,0,0,1,0-.23,2,2,0,0,1,0-.24l.18-.83,3-10.77a2.42,2.42,0,0,1,.67-1.3A2.72,2.72,0,0,1,57.72,1V.33H50.57V1A5.26,5.26,0,0,1,52,1.2c.23.11.34.36.34.77a2.28,2.28,0,0,1-.07.54,7.71,7.71,0,0,1-.19.77l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62h7.14v-.62a5.07,5.07,0,0,1-1.41-.25C52.69,15.4,52.58,15.14,52.58,14.74Zm32-3.13.57.11-1.4,4.66H63.34v-.57a3.65,3.65,0,0,0,1.46-.34c.29-.16.43-.51.43-1,0-.18,0-.61-.13-1.29,0-.14-.09-.73-.23-1.75H59.69l-1.4,2.44a3.38,3.38,0,0,0-.25.54,1.64,1.64,0,0,0-.11.56q0,.5.3.63a4.41,4.41,0,0,0,1.25.25v.57H54.76v-.57a3.36,3.36,0,0,0,1-.43,4.58,4.58,0,0,0,1-1.27L65.7,0h.62l2.3,13.72a3.49,3.49,0,0,0,.56,1.7,2.34,2.34,0,0,0,1.29.37v0a2.58,2.58,0,0,0,1.26-.42,2.46,2.46,0,0,0,.68-1.3L75.35,3.28c.09-.3.16-.56.2-.77A2.86,2.86,0,0,0,75.61,2c0-.41-.11-.66-.34-.77A5.17,5.17,0,0,0,73.85,1V.33h7.61V1a4.77,4.77,0,0,0-1.69.39A2.27,2.27,0,0,0,79,2.67L75.92,14.12c0,.13,0,.25-.07.36a2.21,2.21,0,0,0,0,.39.59.59,0,0,0,.35.57,2.33,2.33,0,0,0,1,.17,10.06,10.06,0,0,0,4.28-.84A7.67,7.67,0,0,0,84.6,11.61ZM64.7,10.44,63.81,4.6l-3.55,5.84Zm38,4.32a.71.71,0,0,1,0-.16s0-.16.07-.34l.2-.83L106,2.67a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,107.9,1V.33h-7.15V1a4.45,4.45,0,0,1,1.27.19.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-1.14,4.16h-5.7L96.7,2.67a2.27,2.27,0,0,1,.73-1.33A4.77,4.77,0,0,1,99.12,1V.33H91.51V1a5.09,5.09,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c-.05.24-.1.48-.17.73L90.07,14a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3.11,3.11,0,0,1,0-.57c0-.16.1-.43.19-.8L95.12,8.5h5.7L99.31,14a2.21,2.21,0,0,1-.74,1.33,4.36,4.36,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.8.8,0,0,1,102.73,14.76Zm13.38.24a10.07,10.07,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.25,0,.41s0,.37-.07.6l.66.11,1.78-6.56L117.89,5a4.63,4.63,0,0,1-1.65,2.12A10,10,0,0,1,113,7.5l1.43-5.33a1.6,1.6,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47l.65.11,1-4.56H109.1V1a5.1,5.1,0,0,1,1.43.25c.21.11.32.36.32.77a3.63,3.63,0,0,1-.07.57c0,.22-.11.47-.18.74l-2.95,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H119l1.42-4.66-.58-.11A7.17,7.17,0,0,1,116.11,15ZM144.36,2.17,142.93,7.5a10.13,10.13,0,0,0,3.27-.41A4.69,4.69,0,0,0,147.84,5l.67.08-1.78,6.56-.66-.11c0-.23.06-.43.07-.6s0-.3,0-.41a2,2,0,0,0-.7-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.36,2.36,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.07,10.07,0,0,0,3.72-.61,7.14,7.14,0,0,0,3.73-3.39l.58.11L149,16.38H131l-2.59-7.93h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.81a4.87,4.87,0,0,0,1.43.25v.62h-7.14v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.72A4.8,4.8,0,0,0,124,1V.33h6.6a10.58,10.58,0,0,1,3.42.43,3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4,4,0,0,1,134.66,7a5.47,5.47,0,0,1-1.45.8c-.33.11-.85.25-1.54.42a4.73,4.73,0,0,0,.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.53,2.53,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74A2.73,2.73,0,0,0,140.8,2c0-.41-.11-.66-.32-.77A5.1,5.1,0,0,0,139.05,1V.33H152l-1,4.56-.65-.11a4.32,4.32,0,0,0-.56-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.67,1.67,0,0,0,144.36,2.17ZM131.54,6.59a5,5,0,0,0,.77-1.32,4.68,4.68,0,0,0,.36-1.84,2.74,2.74,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66,1,1,0,0,0-.72.22,2,2,0,0,0-.38.85l-1.45,5.49a10.33,10.33,0,0,0,1.91-.16A3.07,3.07,0,0,0,131.54,6.59Z",opacity:1,strokeColor:"",fillColor:"#192760",width:151.345,height:16.781,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"SignHere":case"Sign Here":t={iconName:"Sign Here",pathdata:"M6.38,1.9A2.56,2.56,0,0,0,6,3.34a2.49,2.49,0,0,0,.44,1.45,3.9,3.9,0,0,0,.73.76l2.07,1.7a9.34,9.34,0,0,1,1.87,2.06,4.6,4.6,0,0,1,.78,2.63,4.78,4.78,0,0,1-1.5,3.43A5.46,5.46,0,0,1,6.23,16.9a7.34,7.34,0,0,1-1.31-.12,7.48,7.48,0,0,1-1.31-.36L3,16.2l-.42-.14a1.12,1.12,0,0,0-.27,0,.71.71,0,0,0-.57.19,2.85,2.85,0,0,0-.38.67H.63l.87-5.38.69,0a10.34,10.34,0,0,0,.2,1.68,3.82,3.82,0,0,0,2,2.5,3.42,3.42,0,0,0,1.5.32,2.76,2.76,0,0,0,2.23-.92A3.14,3.14,0,0,0,8.94,13c0-1-1-2.29-2.94-3.82S3.06,6.08,3.06,4.71A4.59,4.59,0,0,1,4.35,1.42,4.76,4.76,0,0,1,8,.06,6.71,6.71,0,0,1,9.29.19a4.78,4.78,0,0,1,.79.2l.61.2.41.1a2.76,2.76,0,0,0,.37,0,1,1,0,0,0,.65-.18A1.75,1.75,0,0,0,12.5.12h.72l-1,4.8-.62-.08-.09-.79a4.45,4.45,0,0,0-.69-1.91A2.78,2.78,0,0,0,8.39.89,2.2,2.2,0,0,0,6.38,1.9ZM22.8.39H15.66V1a4.71,4.71,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L14.21,14.11a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A4.63,4.63,0,0,1,18,15.56c-.22-.1-.33-.36-.33-.77a1.8,1.8,0,0,1,0-.22c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,22.8,1ZM38.09,9.14V8.52H31.18v.62a5.05,5.05,0,0,1,1.44.28c.22.1.32.35.32.75a13.35,13.35,0,0,1-.54,2.54,19.13,19.13,0,0,1-.54,1.87A1.85,1.85,0,0,1,31,15.66a3.77,3.77,0,0,1-1.78.35A3.71,3.71,0,0,1,27,15.38c-1.09-.77-1.64-2.13-1.64-4.08a13.74,13.74,0,0,1,1.78-6.69q2.05-3.72,5-3.72a2.93,2.93,0,0,1,3,1.86,6.09,6.09,0,0,1,.4,2.48l.69.08L37.44,0h-.71a2.44,2.44,0,0,1-.41.53.82.82,0,0,1-.58.2A9.14,9.14,0,0,1,34.33.36,9.23,9.23,0,0,0,31.73,0a9.4,9.4,0,0,0-7.46,3.42,10.46,10.46,0,0,0-2.65,7,5.88,5.88,0,0,0,2.2,4.83,7.77,7.77,0,0,0,5,1.64A13.06,13.06,0,0,0,32,16.52a14.26,14.26,0,0,0,2.33-.75l.67-.3,1.2-4.36a4.15,4.15,0,0,1,.62-1.59A2.28,2.28,0,0,1,38.09,9.14ZM50.36,1a3.36,3.36,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.7-.27,1.13L50,11.48,44.76.39H39.93V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.1.25L39.2,12.16a12.62,12.62,0,0,1-1.09,2.93,1.86,1.86,0,0,1-1.35.73v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.21,1.21,0,0,1-.63-1.17,4.72,4.72,0,0,1,0-.64q.1-.52.39-1.59l2.39-8.6,6.23,13.28h.6L52.84,4.66a15.29,15.29,0,0,1,1-2.78A1.52,1.52,0,0,1,55,1.05l.34,0V.39H50.36Zm22.33,13.8a.66.66,0,0,1,0-.15c0-.05,0-.16.07-.34l.2-.83L75.91,2.73a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,77.86,1V.39H70.71V1A4.45,4.45,0,0,1,72,1.2a.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74L71.07,7.5h-5.7l1.29-4.77a2.27,2.27,0,0,1,.73-1.33A4.36,4.36,0,0,1,69.08,1V.39H61.47V1a4.73,4.73,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c0,.24-.1.48-.17.73L60,14.1a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3,3,0,0,1,0-.57c0-.16.1-.43.19-.8l1.35-4.94h5.7L69.27,14.1a2.21,2.21,0,0,1-.74,1.33,4.77,4.77,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.82.82,0,0,1,72.69,14.81Zm13.38.25a10.28,10.28,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.23,2.23,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.24,0,.41s0,.37-.07.59l.66.12,1.78-6.56L87.85,5a4.75,4.75,0,0,1-1.64,2.12,10.13,10.13,0,0,1-3.27.41l1.43-5.33a1.56,1.56,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47L91,5,92,.39H79.06V1a4.75,4.75,0,0,1,1.43.25c.21.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.11.47-.18.74l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H89l1.41-4.66-.58-.11A7.22,7.22,0,0,1,86.07,15.06ZM114.32,2.23l-1.43,5.33a10.13,10.13,0,0,0,3.27-.41A4.75,4.75,0,0,0,117.8,5l.67.08-1.78,6.56-.66-.12c0-.22.06-.42.07-.59s0-.3,0-.41a2,2,0,0,0-.71-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.23,2.23,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.28,10.28,0,0,0,3.72-.61,7.22,7.22,0,0,0,3.73-3.39l.58.11-1.41,4.66h-18L98.33,8.51h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.8a4.51,4.51,0,0,0,1.43.26v.62H90.59v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.73A5.3,5.3,0,0,0,94,1V.39h6.6A10.58,10.58,0,0,1,104,.82a3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4.06,4.06,0,0,1,104.62,7a5.32,5.32,0,0,1-1.45.8c-.33.11-.84.25-1.54.42.08.24.13.4.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.64,2.64,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74a2.73,2.73,0,0,0,.07-.57c0-.41-.11-.66-.32-.77A4.75,4.75,0,0,0,109,1V.39h12.93l-1,4.56-.64-.11a4.39,4.39,0,0,0-.57-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.7,1.7,0,0,0,114.32,2.23ZM101.5,6.64a4.76,4.76,0,0,0,.77-1.31,4.68,4.68,0,0,0,.36-1.84,2.72,2.72,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66.94.94,0,0,0-.71.22,1.81,1.81,0,0,0-.39.85L97.88,7.72a10.33,10.33,0,0,0,1.91-.16A3,3,0,0,0,101.5,6.64Z",opacity:1,strokeColor:"",fillColor:"#192760",width:121.306,height:16.899,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Accepted":t={iconName:"Accepted",pathdata:"M22.409294,0.00021190348 C22.64747,0.0056831966 22.875833,0.11701412 23.023336,0.32638185 23.631345,1.1873664 25.36437,2.8183636 27.4584,4.1123583 28.000408,4.4483535 28.015407,5.227338 27.477398,5.5713293 23.803344,7.9272954 12.881201,15.464245 9.4751583,23.800168 9.2091556,24.452168 8.3321453,24.542164 7.9521352,23.95016 6.0691143,21.014182 1.8990528,14.526234 0.095028103,11.832258 -0.13796928,11.485277 0.081027784,11.023275 0.49603404,10.97927 1.9670546,10.824272 4.8490969,10.421291,6.5811144,9.5293013 6.9811216,9.3233086 7.4691268,9.5782811 7.5601316,10.019287 7.847138,11.400286 8.4021459,13.83224 8.952148,14.781236 8.952148,14.781236 16.385246,3.2303471 21.985326,0.10638282 22.119951,0.031756414 22.266389,-0.003070501 22.409294,0.00021190348 z",opacity:1,strokeColor:"",fillColor:"#516c30",width:27.873,height:24.346,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Rejected":t={iconName:"Rejected",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:22.588,height:22.586,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Rejected_with_border":t={iconName:"Rejected_with_border",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#192760",width:22.588,height:24.346,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:147.425,height:20.783,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Draft":t={iconName:"Draft",pathdata:"M24.92,3Q22,.46,16.4.46h-11v.87a9.38,9.38,0,0,1,2.24.35q.54.23.54,1.08a3.24,3.24,0,0,1-.1.76c-.07.29-.17.65-.31,1.08L3.08,19.69a3.26,3.26,0,0,1-1.32,1.95A4.67,4.67,0,0,1,0,22.1V23H10.91q7.8,0,12.61-4.22a11.56,11.56,0,0,0,4.32-8.94A8.58,8.58,0,0,0,24.92,3ZM20.41,15.66a10.18,10.18,0,0,1-9.8,6.18A3.18,3.18,0,0,1,9,21.54a1,1,0,0,1-.46-.95,2.47,2.47,0,0,1,0-.35,3,3,0,0,1,.1-.44l5.24-17a1.91,1.91,0,0,1,.62-.95,2.81,2.81,0,0,1,1.66-.35c2.44,0,4.15.76,5.15,2.27a7.29,7.29,0,0,1,.94,4A17.63,17.63,0,0,1,20.41,15.66ZM49.75,9.74a5.84,5.84,0,0,0,2-2.16,5.1,5.1,0,0,0,.59-2.24c0-2.1-1.18-3.53-3.54-4.27A18.67,18.67,0,0,0,43.36.46H32.92v.87a8.79,8.79,0,0,1,2.24.35c.35.14.52.48.52,1a5.36,5.36,0,0,1-.17,1.11c-.06.23-.14.5-.23.8L30.61,19.7a3.26,3.26,0,0,1-1.08,1.81,4.44,4.44,0,0,1-2,.59V23H38.85V22.1a8.54,8.54,0,0,1-2.28-.36c-.32-.15-.49-.53-.49-1.13,0-.11,0-.21,0-.32a1.15,1.15,0,0,1,.06-.28l.31-1.16,2.25-7h1.07L43.89,23h7.64V22.1a4.27,4.27,0,0,1-2.07-.47,3.91,3.91,0,0,1-1.27-1.93l-2.92-7.6a4.67,4.67,0,0,1-.25-.65c1.1-.23,1.91-.42,2.43-.59A8.49,8.49,0,0,0,49.75,9.74ZM46,7.39a6.73,6.73,0,0,1-1.21,1.84,5,5,0,0,1-2.72,1.29,19.56,19.56,0,0,1-3,.23L41.38,3A2.54,2.54,0,0,1,42,1.85a1.76,1.76,0,0,1,1.14-.31,3.38,3.38,0,0,1,2.69.93,3.52,3.52,0,0,1,.79,2.34A5.94,5.94,0,0,1,46,7.39Zm27.9,11.85L70.29,0h-1L55.21,19.78a6.61,6.61,0,0,1-1.66,1.78,5.3,5.3,0,0,1-1.55.6V23h7.45v-.81a8,8,0,0,1-2-.34.85.85,0,0,1-.47-.89,2,2,0,0,1,.17-.79,5.32,5.32,0,0,1,.4-.75L59.8,16H68c.22,1.44.35,2.25.37,2.45a16,16,0,0,1,.2,1.81,1.51,1.51,0,0,1-.67,1.47,6.38,6.38,0,0,1-2.31.46V23H77.1v-.81a4.28,4.28,0,0,1-2.28-.55A4.47,4.47,0,0,1,73.93,19.24ZM60.7,14.64l5.62-8.19,1.4,8.19ZM84,.46h20.2l-1.61,6.39-1-.15a5.61,5.61,0,0,0-.88-3.43Q99.2,1.52,94.86,1.51a3.56,3.56,0,0,0-1.76.3A2.05,2.05,0,0,0,92.34,3L90.1,10.5A16.53,16.53,0,0,0,95,9.91c.77-.33,1.62-1.32,2.56-3l1.06.12-2.82,9.2-1-.17c0-.33.08-.61.1-.85s0-.43,0-.56a2.76,2.76,0,0,0-1-2.38c-.66-.49-2.07-.73-4.23-.73l-2.5,8.22a3.56,3.56,0,0,0-.09.39,1.55,1.55,0,0,0,0,.37,1.32,1.32,0,0,0,1,1.33,5.52,5.52,0,0,0,1.78.21V23H78.58V22.1a4.35,4.35,0,0,0,2-.61,3.33,3.33,0,0,0,1.06-1.8L86.32,4.6c.09-.31.16-.58.23-.81a5.05,5.05,0,0,0,.16-1.1c0-.53-.17-.87-.52-1A8.7,8.7,0,0,0,84,1.33Zm24.1,0h20.89l-1.37,6.46-1-.08c-.07-2.2-.76-3.69-2.09-4.49a6.61,6.61,0,0,0-3.2-.72L116,18.84,115.7,20a2.63,2.63,0,0,0-.07.38,1.51,1.51,0,0,0,0,.3c0,.57.2.94.61,1.08a11.19,11.19,0,0,0,2.56.34V23H106.2V22.1a6.49,6.49,0,0,0,2.4-.3,3.19,3.19,0,0,0,1.56-2.1l5.58-18.07a9.07,9.07,0,0,0-4.83,1.2,9.52,9.52,0,0,0-3.34,3.61l-1-.23Z",opacity:1,strokeColor:"",fillColor:"#192760",width:128.941,height:22.97,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Final":t={iconName:"Final",pathdata:"M24.94,6l-1.06-.13a4.37,4.37,0,0,0-.91-3q-1.51-1.54-6-1.54a4.28,4.28,0,0,0-1.83.26,1.8,1.8,0,0,0-.78,1.08L12,9.21a20.26,20.26,0,0,0,5.15-.52A6.49,6.49,0,0,0,19.8,6.1l1.1.1L18,14.27l-1.09-.15a6.34,6.34,0,0,0,.11-.74c0-.22,0-.38,0-.5a2.26,2.26,0,0,0-1-2.09c-.68-.42-2.15-.63-4.39-.63L9,17.37a3.09,3.09,0,0,0-.1.34,1.22,1.22,0,0,0,0,.32,1.18,1.18,0,0,0,1,1.17,7,7,0,0,0,1.86.18v.77H0v-.77a5.14,5.14,0,0,0,2.11-.53,3,3,0,0,0,1.1-1.58L8.06,4c.09-.27.17-.5.23-.7a3.74,3.74,0,0,0,.18-1,.83.83,0,0,0-.55-.89,10.94,10.94,0,0,0-2.33-.3V.4h21Zm8.54,12.11a1.49,1.49,0,0,1,0-.28,2.46,2.46,0,0,1,.07-.29l.3-1L38.76,3.29a2.93,2.93,0,0,1,1.09-1.6A5.42,5.42,0,0,1,42,1.17V.4H30.17v.77a10.52,10.52,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.26-.18.57-.32,1L27.79,17.28a2.94,2.94,0,0,1-1.12,1.59,5.28,5.28,0,0,1-2.09.51v.77H36.36v-.77A10.22,10.22,0,0,1,34,19.07.89.89,0,0,1,33.48,18.12ZM66.19,2.24a2.53,2.53,0,0,1,1.87-1l.56-.06V.4H60.5v.77a8,8,0,0,1,2.16.33,1.47,1.47,0,0,1,1,1.48,5.61,5.61,0,0,1-.25,1.34c-.11.4-.25.87-.43,1.38l-3.08,8.35L51.26.4h-8v.77a8.44,8.44,0,0,1,1.86.24,2.26,2.26,0,0,1,1.22,1.05l.17.31L42.11,14.88a13.74,13.74,0,0,1-1.8,3.61,3.36,3.36,0,0,1-2.22.89v.77h8.23v-.77a7.75,7.75,0,0,1-2.1-.31,1.45,1.45,0,0,1-1-1.44,3.56,3.56,0,0,1,.1-.79,16.15,16.15,0,0,1,.64-2L47.85,4.31,58.11,20.64h1l5.5-15A15.48,15.48,0,0,1,66.19,2.24Zm23,17.13v.78H78.08v-.71A7.47,7.47,0,0,0,80.49,19a1.25,1.25,0,0,0,.7-1.29A13.26,13.26,0,0,0,81,16.16c0-.18-.16-.89-.39-2.15H72.06l-2.3,3a3.7,3.7,0,0,0-.42.66,1.54,1.54,0,0,0-.18.69.74.74,0,0,0,.49.78,10.28,10.28,0,0,0,2.06.3v.71H63.94v-.71a6.43,6.43,0,0,0,1.63-.53,6.63,6.63,0,0,0,1.72-1.56L82,0h1l3.78,16.88A3.69,3.69,0,0,0,87.7,19,3.53,3.53,0,0,0,89.24,19.37Zm-8.93-6.53L78.86,5.65,73,12.84Zm32.8,1.44a11.51,11.51,0,0,1-5.23,3.88,21.36,21.36,0,0,1-7,1A4.88,4.88,0,0,1,99.22,19a.74.74,0,0,1-.58-.71,2.33,2.33,0,0,1,0-.48c0-.13.08-.28.13-.43L104,3.29a2.72,2.72,0,0,1,1.19-1.64,9.4,9.4,0,0,1,2.79-.48V.4H95.4v.77a10.42,10.42,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.25-.17.57-.31.94L93,17.27a2.92,2.92,0,0,1-1.12,1.6,4.59,4.59,0,0,1-1.71.47v.81h21.55l2.32-5.74Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:114.058,height:20.639,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Completed":t={iconName:"Completed",pathdata:"M16.37,0,15.08,6.9l-.79-.17c0-.41,0-.66,0-.73a2.73,2.73,0,0,0,0-.32,5.33,5.33,0,0,0-.94-3.47A3,3,0,0,0,11,1.07c-2,0-3.68,1.51-5.13,4.55a18.84,18.84,0,0,0-2,8.29q0,3.06,1.2,4.2a3.82,3.82,0,0,0,2.64,1.13,5.3,5.3,0,0,0,3.51-1.43,10.75,10.75,0,0,0,1.78-2.09l.77.65a9.32,9.32,0,0,1-3.12,3.35A7,7,0,0,1,7,20.81a6.66,6.66,0,0,1-5-2.08,7.72,7.72,0,0,1-2-5.57A14.57,14.57,0,0,1,3.05,3.92Q6.1,0,10.29,0A8.92,8.92,0,0,1,13,.43a9.09,9.09,0,0,0,1.65.43.72.72,0,0,0,.6-.23A2.55,2.55,0,0,0,15.6,0ZM32.83,7.11a15.24,15.24,0,0,1-3.11,9.07q-3.31,4.61-7.63,4.6a5.63,5.63,0,0,1-4.42-1.92A7.47,7.47,0,0,1,16,13.72a15.27,15.27,0,0,1,3.18-9.19Q22.46,0,26.57,0a5.82,5.82,0,0,1,4.5,1.92A7.35,7.35,0,0,1,32.83,7.11ZM29.16,4.6a4.92,4.92,0,0,0-.63-2.55,2.14,2.14,0,0,0-2-1.06Q23.4,1,21.24,7.53a27.45,27.45,0,0,0-1.63,8.26A6.68,6.68,0,0,0,19.92,18a2.24,2.24,0,0,0,2.2,1.78,3.71,3.71,0,0,0,2.73-1.29,15,15,0,0,0,2.54-4.93,30.56,30.56,0,0,0,1.3-4.83A23,23,0,0,0,29.16,4.6Zm21.2,13.62a3.83,3.83,0,0,1,.08-.75,8.6,8.6,0,0,1,.19-.88L53.75,3.31a3,3,0,0,1,.85-1.67,2.72,2.72,0,0,1,1.21-.4V.48H50.42L42.66,14.39,41.21.48h-5.8v.76a4.65,4.65,0,0,1,1.45.21c.26.11.38.37.38.78a4.57,4.57,0,0,1-.08.75c-.06.28-.13.61-.23,1L34.34,15a16.85,16.85,0,0,1-1.16,3.65,1.9,1.9,0,0,1-1.42.86v.76h5.3v-.76a3.22,3.22,0,0,1-1.32-.29A1.48,1.48,0,0,1,35,17.74a8.32,8.32,0,0,1,.17-1.42c.07-.37.17-.82.3-1.37L38.06,4.23l1.71,16.38h.71L50,3.76l-3.2,13.58A2.84,2.84,0,0,1,46,19a4.06,4.06,0,0,1-1.76.49v.76h7.93v-.76a4.79,4.79,0,0,1-1.49-.31Q50.36,19,50.36,18.22ZM67.69,9.29a7.39,7.39,0,0,1-4.89,1.58l-.73,0-1.48-.11L59.21,16.6l-.21,1a1,1,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.12.81.35.94a4.74,4.74,0,0,0,1.51.31v.76H53.31v-.76a2.52,2.52,0,0,0,1.33-.52,3.18,3.18,0,0,0,.72-1.59L58.48,4.11q.1-.45.18-.9a4.48,4.48,0,0,0,.08-.72,1,1,0,0,0-.49-1,4.36,4.36,0,0,0-1.36-.23V.48h7.29a7.29,7.29,0,0,1,3.07.57,4,4,0,0,1,2.33,4A5.22,5.22,0,0,1,67.69,9.29Zm-1.8-5a3.65,3.65,0,0,0-.51-2,1.85,1.85,0,0,0-1.7-.79,1,1,0,0,0-.8.28,3.27,3.27,0,0,0-.4,1l-1.66,7,.47.06h.41a4.37,4.37,0,0,0,2-.36,3.14,3.14,0,0,0,1.2-1.18,6.51,6.51,0,0,0,.74-2A9.87,9.87,0,0,0,65.89,4.25Zm16.9,10.1a8.71,8.71,0,0,1-3.35,3.88,9.36,9.36,0,0,1-4.53,1,2.15,2.15,0,0,1-1-.21.75.75,0,0,1-.37-.71,3.18,3.18,0,0,1,0-.47c0-.14,0-.28.08-.44l3.3-14.08a2.94,2.94,0,0,1,.77-1.64,4.47,4.47,0,0,1,1.79-.48V.48h-8v.76a4.8,4.8,0,0,1,1.5.31c.23.13.35.44.35.94a4.36,4.36,0,0,1-.06.67c0,.26-.12.57-.21,1L69.9,17.34a3.18,3.18,0,0,1-.72,1.6,2.53,2.53,0,0,1-1.34.52v.76H81.91l1.49-5.74ZM85.73,1.24a4.59,4.59,0,0,1,1.5.31c.23.13.34.44.34.94a3.84,3.84,0,0,1-.07.7c0,.28-.11.58-.19.92L84.2,17.35a3.18,3.18,0,0,1-.72,1.59,2.27,2.27,0,0,1-1.06.47h-.07v.8H96.2l1.5-5.74-.62-.13a8.14,8.14,0,0,1-3.94,4.17,9.39,9.39,0,0,1-3.94.75A1.75,1.75,0,0,1,88.06,19a.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.16,5.16,0,0,1,2.91.57A2.58,2.58,0,0,1,93.24,13c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14,1.88-8.07L95,6.18a5.62,5.62,0,0,1-1.74,2.61,9.05,9.05,0,0,1-3.45.51l1.51-6.56a2.23,2.23,0,0,1,.47-1.06,2,2,0,0,1,1.3-.28c2,0,3.29.5,3.93,1.51a6.13,6.13,0,0,1,.6,3l.68.13L99.4.48H85.73ZM114,6.14l.92-5.66h-14l-1,5,.66.2a7.81,7.81,0,0,1,2.23-3.16,4.91,4.91,0,0,1,3.23-1.06l-3.73,15.85a2.84,2.84,0,0,1-1,1.85,3.48,3.48,0,0,1-1.6.26v.76h8.4v-.76a5.82,5.82,0,0,1-1.71-.3c-.27-.13-.41-.45-.41-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.21-1,3.53-15.1a3.65,3.65,0,0,1,2.14.63c.89.7,1.35,2,1.39,3.94Zm9.44,12.38a9.39,9.39,0,0,1-3.94.75,1.77,1.77,0,0,1-1.14-.26.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.12,5.12,0,0,1,2.91.57,2.58,2.58,0,0,1,.75,2.15c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14L126,6.28l-.7-.1a5.78,5.78,0,0,1-1.74,2.61,9.16,9.16,0,0,1-3.46.51l1.51-6.56a2.14,2.14,0,0,1,.48-1.06,2,2,0,0,1,1.3-.28c2,0,3.28.5,3.92,1.51a6,6,0,0,1,.6,3l.68.13,1.08-5.6H116v.76a4.67,4.67,0,0,1,1.51.31c.22.13.34.44.34.94a4,4,0,0,1-.08.7c0,.28-.11.58-.18.92l-3.12,13.24a3.18,3.18,0,0,1-.72,1.59,2.56,2.56,0,0,1-1.34.52v.76h14.06l1.5-5.74-.62-.13A8.14,8.14,0,0,1,123.39,18.52Zm23.32-9.84a11.62,11.62,0,0,1-2.89,7.84,10.6,10.6,0,0,1-8.42,3.7h-7.29v-.76a2.58,2.58,0,0,0,1.18-.41,2.94,2.94,0,0,0,.88-1.71l3.11-13.23c.09-.38.16-.69.21-1a4.49,4.49,0,0,0,.07-.67c0-.5-.12-.81-.36-.94a4.8,4.8,0,0,0-1.5-.31V.48h7.36a7.16,7.16,0,0,1,5.69,2.22A8.72,8.72,0,0,1,146.71,8.68ZM143,6.87a8,8,0,0,0-.64-3.48,3.52,3.52,0,0,0-3.44-2,1.52,1.52,0,0,0-1.11.31,1.75,1.75,0,0,0-.41.83l-3.5,14.9c0,.14,0,.27-.07.39s0,.21,0,.3a1.06,1.06,0,0,0,.3.84,1.75,1.75,0,0,0,1.1.26q4.53,0,6.55-5.42A19.84,19.84,0,0,0,143,6.87Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:146.706,height:20.811,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"ForPublicRelease":case"For Public Release":t={iconName:"For Public Release",pathdata:"M10.33.48l-.65,5.6L9.27,6a9.74,9.74,0,0,0-.36-3A2.27,2.27,0,0,0,6.57,1.4a.85.85,0,0,0-.71.26,2.67,2.67,0,0,0-.3,1.08L4.65,9.28a3.45,3.45,0,0,0,2-.52,6.65,6.65,0,0,0,1-2.59l.43.1L7,14.34l-.42-.14c0-.29,0-.54,0-.75s0-.38,0-.49a4.17,4.17,0,0,0-.39-2.09,1.91,1.91,0,0,0-1.71-.64l-1,7.21c0,.13,0,.24,0,.35s0,.21,0,.31a1.45,1.45,0,0,0,.38,1.17,1.17,1.17,0,0,0,.72.19v.76H0v-.76a1.31,1.31,0,0,0,.82-.54,4.39,4.39,0,0,0,.42-1.58L3.13,4.11c0-.27.06-.51.09-.71,0-.41.07-.73.07-1a1.34,1.34,0,0,0-.21-.9,2.13,2.13,0,0,0-.91-.3V.48ZM20.5,7.11a22.43,22.43,0,0,1-1.88,9.07q-2,4.61-4.62,4.6a3,3,0,0,1-2.67-1.92,10.91,10.91,0,0,1-1-5.14,22.46,22.46,0,0,1,1.92-9.19Q14.23,0,16.71,0a3.11,3.11,0,0,1,2.72,1.92A10.72,10.72,0,0,1,20.5,7.11ZM18.28,4.6a7.7,7.7,0,0,0-.38-2.55c-.26-.7-.65-1-1.19-1-1.28,0-2.35,2.17-3.22,6.53a43.69,43.69,0,0,0-1,8.26,10.72,10.72,0,0,0,.19,2.2c.24,1.18.69,1.77,1.33,1.77s1.16-.43,1.65-1.29a19.35,19.35,0,0,0,1.54-4.93A48.7,48.7,0,0,0,18,8.71,38.21,38.21,0,0,0,18.28,4.6Zm11.59.16a8.73,8.73,0,0,1-.24,2,5.64,5.64,0,0,1-.8,1.9,3.49,3.49,0,0,1-.93,1,7.31,7.31,0,0,1-1,.52c0,.3.08.49.1.57l1.18,6.66a4.54,4.54,0,0,0,.52,1.7,1.1,1.1,0,0,0,.83.41v.76H26.46l-1.65-9.76h-.43l-.91,6.14-.13,1a2,2,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28,1.57,1.57,0,0,0,.2,1,1.77,1.77,0,0,0,.92.32v.76H19.86v-.76a1.33,1.33,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L23,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.22A3.79,3.79,0,0,1,28.44,1C29.4,1.66,29.87,2.91,29.87,4.76Zm-2.31-.47a5.77,5.77,0,0,0-.32-2,1.12,1.12,0,0,0-1.09-.81.5.5,0,0,0-.46.26,3.87,3.87,0,0,0-.24,1.05L24.52,9.5a3.73,3.73,0,0,0,1.22-.2,2.1,2.1,0,0,0,1.1-1.13,8.41,8.41,0,0,0,.49-1.62A10.75,10.75,0,0,0,27.56,4.29Zm14.92.78a7.06,7.06,0,0,1-1.14,4.22,3.5,3.5,0,0,1-3,1.58l-.44,0-.89-.11-.84,5.86-.12,1a1.45,1.45,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29,1.38,1.38,0,0,0,.21.94,1.93,1.93,0,0,0,.91.31v.76H32.65v-.76a1.28,1.28,0,0,0,.8-.52,4.3,4.3,0,0,0,.44-1.59L35.77,4.11c0-.3.08-.6.11-.9a5.21,5.21,0,0,0,0-.72,1.29,1.29,0,0,0-.3-1,1.82,1.82,0,0,0-.81-.23V.48h4.4a3,3,0,0,1,1.86.57C42,1.78,42.48,3.12,42.48,5.07Zm-2.23-.82a5.74,5.74,0,0,0-.3-2,1.07,1.07,0,0,0-1-.79.5.5,0,0,0-.49.28,5.11,5.11,0,0,0-.24,1l-1,7,.28.06h.25a1.79,1.79,0,0,0,1.2-.36,2.88,2.88,0,0,0,.73-1.18,10.56,10.56,0,0,0,.44-2A15.74,15.74,0,0,0,40.25,4.25Zm12.91-3V.48H50v.76a1.46,1.46,0,0,1,.82.32A2,2,0,0,1,51.24,3a15,15,0,0,1-.14,1.57q0-.17-.15,1.17l-.89,6.16a29.63,29.63,0,0,1-1,4.77c-.55,1.63-1.31,2.44-2.28,2.44a1.59,1.59,0,0,1-1.38-.77,4.16,4.16,0,0,1-.5-2.23q0-.63.15-2c.06-.5.15-1.14.27-1.93l1.26-8.84a4.13,4.13,0,0,1,.46-1.66,1.66,1.66,0,0,1,1-.46V.48H43.34v.76a2,2,0,0,1,.9.3,1.3,1.3,0,0,1,.21.9,7.27,7.27,0,0,1,0,.75c0,.29-.07.59-.11.92l-1,7.24c-.16,1.14-.27,1.93-.32,2.38a19.16,19.16,0,0,0-.12,2,6.13,6.13,0,0,0,1,3.71,2.93,2.93,0,0,0,2.43,1.33c1.39,0,2.45-.9,3.17-2.69a29.58,29.58,0,0,0,1.23-5.61l1-6.74A24.45,24.45,0,0,1,52.3,2.1,1.22,1.22,0,0,1,53.16,1.24Zm7.14,9.82a5.87,5.87,0,0,1,.68,3,8.55,8.55,0,0,1-1,4.27,3.68,3.68,0,0,1-3.48,1.84H51.82v-.76a1.3,1.3,0,0,0,.72-.4,3.94,3.94,0,0,0,.52-1.71L55,4.1c0-.39.09-.72.12-1s0-.46,0-.6c0-.53-.07-.86-.23-1A1.64,1.64,0,0,0,54,1.24V.48h4.17a3.4,3.4,0,0,1,2.67,1,4.91,4.91,0,0,1,1,3.38,5.33,5.33,0,0,1-1.17,3.61,4.8,4.8,0,0,1-1.68,1.22A4.84,4.84,0,0,1,60.3,11.06Zm-1.66,2.45a3.81,3.81,0,0,0-.73-2.74,2.63,2.63,0,0,0-1.58-.52l-1,7.2a4,4,0,0,0-.05.4c0,.15,0,.32,0,.51a.9.9,0,0,0,.33.82,1.13,1.13,0,0,0,.59.12c1,0,1.67-.87,2.1-2.59A13.54,13.54,0,0,0,58.64,13.51Zm.12-5.29A5.92,5.92,0,0,0,59.4,6.1a12.74,12.74,0,0,0,.13-1.74,6.54,6.54,0,0,0-.29-2.11,1.11,1.11,0,0,0-1.13-.81.49.49,0,0,0-.49.32,3.52,3.52,0,0,0-.23,1l-.94,6.62A7.45,7.45,0,0,0,58,9,1.8,1.8,0,0,0,58.76,8.22Zm11.71,6.14a8.78,8.78,0,0,1-2,3.87,4,4,0,0,1-2.74,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.22-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2-14.08a3.8,3.8,0,0,1,.47-1.64,1.94,1.94,0,0,1,1.08-.48V.48H63.6v.76a2,2,0,0,1,.91.31,1.36,1.36,0,0,1,.22.94c0,.2,0,.42,0,.67s-.07.57-.13,1L62.68,17.34a4.31,4.31,0,0,1-.44,1.6,1.28,1.28,0,0,1-.8.52v.76h8.5l.9-5.74ZM76.89.48H72.32v.76a1.92,1.92,0,0,1,.9.31c.15.13.22.44.22.94a5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1L71.39,17.35A4.35,4.35,0,0,1,71,18.94a1.33,1.33,0,0,1-.81.52v.76h4.57v-.76a1.81,1.81,0,0,1-.91-.32,1.39,1.39,0,0,1-.21-.94c0-.09,0-.18,0-.28l0-.3.12-1L75.65,3.36a4.43,4.43,0,0,1,.43-1.6,1.3,1.3,0,0,1,.81-.52Zm8.46.15A.38.38,0,0,1,85,.87a4.12,4.12,0,0,1-1-.44A3.51,3.51,0,0,0,82.37,0Q79.84,0,78,3.92a21.42,21.42,0,0,0-1.84,9.24,11.15,11.15,0,0,0,1.2,5.57,3.51,3.51,0,0,0,3.05,2.08,3.15,3.15,0,0,0,2.21-1.09,8.92,8.92,0,0,0,1.89-3.35L84,15.72A11.08,11.08,0,0,1,83,17.81a2.71,2.71,0,0,1-2.12,1.43,2,2,0,0,1-1.59-1.13,8.33,8.33,0,0,1-.74-4.2A29.46,29.46,0,0,1,79.7,5.62Q81,1.08,82.8,1.07c.59,0,1.07.38,1.45,1.14a8,8,0,0,1,.57,3.47,2.73,2.73,0,0,1,0,.32c0,.08,0,.32,0,.73l.48.17L86.05,0h-.47A2.93,2.93,0,0,1,85.35.63Zm21.41,13.73.37.12-.9,5.74H94.72l-1.66-9.76h-.43l-.91,6.14-.13,1c0,.08,0,.16,0,.25s0,.19,0,.28a1.57,1.57,0,0,0,.2,1,1.81,1.81,0,0,0,.92.32v.76H88.11v-.76a1.3,1.3,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L91.24,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.23A3.81,3.81,0,0,1,96.7,1c1,.65,1.43,1.9,1.43,3.75a8.73,8.73,0,0,1-.24,2,5.66,5.66,0,0,1-.81,1.9,3.49,3.49,0,0,1-.93,1,6.73,6.73,0,0,1-1,.52c0,.3.09.49.1.57l1.18,6.66a4.74,4.74,0,0,0,.52,1.7,1,1,0,0,0,.78.39,1.23,1.23,0,0,0,.78-.5A4.3,4.3,0,0,0,99,17.35l1.88-13.24c.05-.34.09-.64.12-.92a6.28,6.28,0,0,0,0-.7,1.45,1.45,0,0,0-.2-.94,2,2,0,0,0-.91-.31V.48h8.26l-.65,5.6L107.1,6a9.57,9.57,0,0,0-.36-3,2.3,2.3,0,0,0-2.38-1.51c-.41,0-.67.09-.78.28a2.87,2.87,0,0,0-.29,1.06l-.91,6.56a3.57,3.57,0,0,0,2.08-.51,6.59,6.59,0,0,0,1.06-2.61l.42.1-1.14,8.08-.42-.15c0-.28,0-.52.05-.73s0-.37,0-.51a3.6,3.6,0,0,0-.46-2.15,2.14,2.14,0,0,0-1.75-.57l-1,7.2a4.7,4.7,0,0,0-.06.51c0,.16,0,.29,0,.39a1.12,1.12,0,0,0,.17.66.77.77,0,0,0,.69.26,3.77,3.77,0,0,0,2.37-.75A7.71,7.71,0,0,0,106.76,14.36ZM95.09,8.17a7.75,7.75,0,0,0,.49-1.62,10.75,10.75,0,0,0,.23-2.26,5.77,5.77,0,0,0-.32-2,1.11,1.11,0,0,0-1.08-.81.48.48,0,0,0-.46.26,3.44,3.44,0,0,0-.25,1.05L92.78,9.5A3.78,3.78,0,0,0,94,9.3,2.08,2.08,0,0,0,95.09,8.17Zm21.32,6.19a8.67,8.67,0,0,1-2,3.87,4,4,0,0,1-2.73,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.23-.7c0-.19,0-.35,0-.48s0-.28,0-.44l2-14.08a3.84,3.84,0,0,1,.46-1.64,2,2,0,0,1,1.08-.48V.48h-4.86v.76a2,2,0,0,1,.91.31,1.38,1.38,0,0,1,.21.94,5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1l-1.89,13.23a4.16,4.16,0,0,1-.43,1.6,1.27,1.27,0,0,1-.81.52v.76h8.51l.9-5.74Zm8.64,0a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.13-8.08-.42-.1a6.79,6.79,0,0,1-1,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56a2.87,2.87,0,0,1,.29-1.06c.12-.19.38-.28.78-.28A2.3,2.3,0,0,1,125,2.91a9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31,1.45,1.45,0,0,1,.2.94,6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74Zm10.29,5.15v.71h-4.65v-.71a1.44,1.44,0,0,0,.93-.41,2.08,2.08,0,0,0,.27-1.29c0-.22,0-.75-.08-1.58,0-.17-.06-.89-.15-2.15h-3.31l-.89,3a5.32,5.32,0,0,0-.16.66,3.4,3.4,0,0,0-.08.69,1.06,1.06,0,0,0,.2.78,1.68,1.68,0,0,0,.79.3v.71h-3v-.71a1.8,1.8,0,0,0,.63-.53,6.45,6.45,0,0,0,.67-1.56L132.19.07h.4L134.06,17a7.15,7.15,0,0,0,.36,2.08A1.13,1.13,0,0,0,135.34,19.51Zm-3.79-6.6L131,5.73l-2.27,7.18Zm9.6-4-1.32-2.09a4.57,4.57,0,0,1-.47-.94,5.12,5.12,0,0,1-.28-1.78,5.57,5.57,0,0,1,.27-1.77c.27-.83.7-1.24,1.29-1.24s1.21.51,1.57,1.54A8.78,8.78,0,0,1,142.65,5l.06,1,.39.1.63-5.91h-.46a2.09,2.09,0,0,1-.25.54.46.46,0,0,1-.41.21.57.57,0,0,1-.24-.05,1.23,1.23,0,0,1-.26-.12l-.39-.24a2.34,2.34,0,0,0-.5-.25,2.41,2.41,0,0,0-.85-.16,2.55,2.55,0,0,0-2.31,1.67,9.11,9.11,0,0,0-.83,4.05,10.47,10.47,0,0,0,1.88,5.5A9.21,9.21,0,0,1,141,16a6.49,6.49,0,0,1-.5,2.63,1.59,1.59,0,0,1-1.43,1.14,1.42,1.42,0,0,1-1-.4,3.55,3.55,0,0,1-.78-1.16,7.09,7.09,0,0,1-.52-1.92c-.05-.43-.1-1.12-.13-2.06l-.44-.06-.55,6.62h.46a4.11,4.11,0,0,1,.25-.82.36.36,0,0,1,.36-.23.47.47,0,0,1,.17,0,2.38,2.38,0,0,1,.27.18l.39.27a3.52,3.52,0,0,0,.84.43,2.48,2.48,0,0,0,.84.15,2.91,2.91,0,0,0,2.63-1.88,9.24,9.24,0,0,0,1-4.21,9.85,9.85,0,0,0-.49-3.24A12.1,12.1,0,0,0,141.15,8.92Zm7.75-7.24c.12-.19.38-.28.78-.28a2.3,2.3,0,0,1,2.38,1.51,9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31c.14.13.2.44.2.94a6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74-.38-.12a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.14-8.08-.43-.1a6.79,6.79,0,0,1-1.05,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56A2.87,2.87,0,0,1,148.9,1.68Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.485,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotForPublicRelease":case"Not For Public Release":t={iconName:"Not For Public Release",pathdata:"M9,2.35q-.21.9-.51,3.48L6.69,21.05H6.38L3.11,4.45,1.85,15.19c-.1.89-.17,1.56-.2,2s0,.55,0,.81A2.39,2.39,0,0,0,2,19.45a1.09,1.09,0,0,0,.67.33v.77H0v-.77a1.22,1.22,0,0,0,.71-.91,33.91,33.91,0,0,0,.57-3.68L2.7,2.88l-.06-.3a2.09,2.09,0,0,0-.39-1.07,1,1,0,0,0-.59-.25V.48H4.2L6.93,14.36l1-8.49c.06-.53.11-1,.14-1.4.06-.63.08-1.08.08-1.37a2.67,2.67,0,0,0-.3-1.5,1.07,1.07,0,0,0-.69-.34V.48H9.73v.78l-.18.06C9.29,1.41,9.09,1.75,9,2.35ZM16.74,2a13.19,13.19,0,0,1,.87,5.28,27.45,27.45,0,0,1-1.54,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.31,13.31,0,0,1-.85-5.23A27.59,27.59,0,0,1,10.82,4.6C11.91,1.53,13.15,0,14.51,0,15.41,0,16.16.65,16.74,2Zm-.95,2.73a9.33,9.33,0,0,0-.31-2.59c-.21-.72-.54-1.08-1-1.08-1.05,0-1.92,2.21-2.64,6.64a54.69,54.69,0,0,0-.81,8.4,14.21,14.21,0,0,0,.15,2.23c.2,1.2.57,1.8,1.1,1.8s.95-.43,1.35-1.31a22.84,22.84,0,0,0,1.26-5c.28-1.55.49-3.19.65-4.91S15.79,5.74,15.79,4.68Zm2.3.93.32.21A10.7,10.7,0,0,1,19.52,2.6a1.87,1.87,0,0,1,1.6-1.08L19.27,17.63a4,4,0,0,1-.52,1.88,1,1,0,0,1-.79.27v.77h4.17v-.77a1.72,1.72,0,0,1-.85-.3,1.56,1.56,0,0,1-.2-1,2.44,2.44,0,0,1,0-.27c0-.08,0-.2,0-.33l.11-1L23,1.52A1.31,1.31,0,0,1,24,2.17a8.49,8.49,0,0,1,.69,4l.33.07L25.5.48H18.57ZM28.75.48v.78a1.39,1.39,0,0,1,.74.31,1.44,1.44,0,0,1,.18.9q0,.36-.06,1c0,.2-.05.44-.07.71L28,17.62a5.34,5.34,0,0,1-.35,1.61,1.05,1.05,0,0,1-.67.55v.77H30.7v-.77a.82.82,0,0,1-.6-.2,1.69,1.69,0,0,1-.31-1.18c0-.11,0-.22,0-.32l0-.35.83-7.33a1.42,1.42,0,0,1,1.4.64,5,5,0,0,1,.33,2.13c0,.12,0,.28,0,.5s0,.47,0,.76l.34.15.94-8.21-.35-.1a8.12,8.12,0,0,1-.85,2.64,2.42,2.42,0,0,1-1.64.52l.74-6.65a3.34,3.34,0,0,1,.25-1.1.64.64,0,0,1,.59-.26A1.91,1.91,0,0,1,34.28,3a11.32,11.32,0,0,1,.29,3.06l.34.13.54-5.7Zm15,6.75a27.46,27.46,0,0,1-1.55,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.49,13.49,0,0,1-.85-5.23A27.59,27.59,0,0,1,37,4.6Q38.65,0,40.69,0c.91,0,1.65.65,2.23,2A13.17,13.17,0,0,1,43.8,7.23ZM42,4.68a9.3,9.3,0,0,0-.32-2.59c-.21-.72-.53-1.08-1-1.08Q39.12,1,38,7.65a54.69,54.69,0,0,0-.81,8.4,13,13,0,0,0,.16,2.23c.2,1.2.56,1.8,1.09,1.8s1-.43,1.35-1.31a23.28,23.28,0,0,0,1.27-5c.27-1.55.49-3.19.64-4.91S42,5.74,42,4.68ZM50.32,1c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,7.2,7.2,0,0,1-.66,1.93,3.45,3.45,0,0,1-.77,1,5.58,5.58,0,0,1-.8.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.85.85,0,0,0,.69.42v.77H48.69l-1.36-9.92H47l-.75,6.25-.1,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H43.27v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L45.84,4.18c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46A2.67,2.67,0,0,1,50.32,1Zm-.73,3.34a7.2,7.2,0,0,0-.26-2.09c-.18-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,4.46,4.46,0,0,0-.2,1.06L47.1,9.65a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,49,8.31a10,10,0,0,0,.4-1.65A12.71,12.71,0,0,0,49.59,4.37Zm11.1-3.3c.77.74,1.16,2.1,1.16,4.09a8.51,8.51,0,0,1-.94,4.28A2.78,2.78,0,0,1,58.48,11h-.36l-.73-.12-.69,6-.11,1c0,.1,0,.2,0,.3s0,.2,0,.3a1.7,1.7,0,0,0,.17.95,1.47,1.47,0,0,0,.75.32v.77H53.77v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L56.34,4.17l.09-.9c0-.31,0-.55,0-.74a1.58,1.58,0,0,0-.25-1,1.33,1.33,0,0,0-.67-.23V.48h3.62A2.11,2.11,0,0,1,60.69,1.07ZM60,4.32a7,7,0,0,0-.25-2.06c-.17-.53-.45-.8-.84-.8a.4.4,0,0,0-.4.29,6.14,6.14,0,0,0-.2,1L57.5,9.93l.23.06h.21a1.3,1.3,0,0,0,1-.36,3.17,3.17,0,0,0,.6-1.2,12.69,12.69,0,0,0,.36-2A19.64,19.64,0,0,0,60,4.32Zm10.6-3.06V.48H68v.78a1.17,1.17,0,0,1,.68.32A2.43,2.43,0,0,1,69,3.05c0,.32,0,.85-.11,1.6,0-.12,0,.27-.12,1.18l-.73,6.26a36.28,36.28,0,0,1-.8,4.86c-.45,1.65-1.07,2.47-1.87,2.47a1.27,1.27,0,0,1-1.13-.78,5.05,5.05,0,0,1-.41-2.27c0-.43,0-1.1.13-2,.05-.51.12-1.17.21-2l1-9a4.69,4.69,0,0,1,.38-1.69,1.24,1.24,0,0,1,.8-.47V.48H62.55v.78a1.39,1.39,0,0,1,.74.31,1.56,1.56,0,0,1,.17.91c0,.21,0,.47,0,.76s-.06.6-.1.94l-.85,7.36c-.14,1.15-.23,2-.27,2.42-.06.76-.1,1.44-.1,2a7.4,7.4,0,0,0,.81,3.78,2.35,2.35,0,0,0,2,1.35c1.14,0,2-.91,2.6-2.74a35.69,35.69,0,0,0,1-5.7l.79-6.85a30.83,30.83,0,0,1,.58-3.7A1.15,1.15,0,0,1,70.61,1.26Zm5.86,10a7.16,7.16,0,0,1,.56,3.1,10.31,10.31,0,0,1-.86,4.34,2.93,2.93,0,0,1-2.86,1.87h-3.8v-.77a1.07,1.07,0,0,0,.59-.41,4.64,4.64,0,0,0,.43-1.73L72.08,4.17c0-.4.08-.73.1-1s0-.46,0-.61a1.83,1.83,0,0,0-.19-1,1.22,1.22,0,0,0-.73-.28V.48h3.43a2.58,2.58,0,0,1,2.19,1.06A5.92,5.92,0,0,1,77.69,5a6.3,6.3,0,0,1-1,3.67,4.18,4.18,0,0,1-1.39,1.24A4.36,4.36,0,0,1,76.47,11.24Zm-1.36,2.49a4.59,4.59,0,0,0-.6-2.79,2,2,0,0,0-1.3-.52l-.84,7.32c0,.12,0,.25,0,.4s0,.33,0,.52a1.06,1.06,0,0,0,.27.84.77.77,0,0,0,.48.11c.8,0,1.38-.87,1.73-2.63A17.3,17.3,0,0,0,75.11,13.73Zm.1-5.38a7.33,7.33,0,0,0,.52-2.15,15,15,0,0,0,.11-1.77,7.89,7.89,0,0,0-.24-2.14c-.16-.55-.46-.83-.93-.83a.42.42,0,0,0-.4.33,4.42,4.42,0,0,0-.19,1l-.77,6.73a5.23,5.23,0,0,0,1.27-.36A1.77,1.77,0,0,0,75.21,8.35Zm9.61,6.24a9.73,9.73,0,0,1-1.66,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1,1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44L81.91,3.41a4.53,4.53,0,0,1,.38-1.66,1.47,1.47,0,0,1,.88-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1L78.42,17.62a5.28,5.28,0,0,1-.35,1.63,1.12,1.12,0,0,1-.67.53v.77h7l.73-5.83ZM90.09,1.26V.48H86.34v.78a1.38,1.38,0,0,1,.74.32,1.59,1.59,0,0,1,.18.95q0,.3,0,.69c0,.25-.06.57-.11.95L85.58,17.64a5.41,5.41,0,0,1-.36,1.61,1.07,1.07,0,0,1-.66.53v.77h3.75v-.77a1.47,1.47,0,0,1-.75-.32,1.78,1.78,0,0,1-.17-1c0-.08,0-.18,0-.28s0-.2,0-.3l.1-1L89.07,3.41a5.68,5.68,0,0,1,.35-1.62A1.1,1.1,0,0,1,90.09,1.26Zm7-.62a.33.33,0,0,1-.3.24,3.1,3.1,0,0,1-.82-.44A2.5,2.5,0,0,0,94.59,0Q92.51,0,91,4a26.57,26.57,0,0,0-1.51,9.39,13.57,13.57,0,0,0,1,5.67c.66,1.41,1.49,2.11,2.5,2.11A2.46,2.46,0,0,0,94.79,20a9.66,9.66,0,0,0,1.55-3.4L96,16a12.68,12.68,0,0,1-.89,2.13c-.54,1-1.12,1.45-1.74,1.45-.47,0-.91-.39-1.31-1.15a10.33,10.33,0,0,1-.6-4.27,36.59,36.59,0,0,1,1-8.43c.72-3.08,1.57-4.63,2.54-4.63.48,0,.88.39,1.19,1.16a10,10,0,0,1,.47,3.53V6.1c0,.07,0,.32,0,.74L97,7l.64-7h-.38A4.28,4.28,0,0,1,97,.64Zm17.57,14,.31.13-.75,5.83h-9.45l-1.35-9.92H103l-.74,6.25-.11,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H99.3v-.77a1.12,1.12,0,0,0,.67-.53,5.18,5.18,0,0,0,.35-1.61l1.55-13.46c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46a2.64,2.64,0,0,1,1.8.55c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,6.57,6.57,0,0,1-.66,1.93,3.61,3.61,0,0,1-.76,1,6.48,6.48,0,0,1-.81.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.84.84,0,0,0,.65.4,1.06,1.06,0,0,0,.64-.51,5.41,5.41,0,0,0,.36-1.61l1.54-13.47c0-.34.07-.65.1-.92s0-.52,0-.72a1.61,1.61,0,0,0-.17-.95,1.31,1.31,0,0,0-.74-.32V.48h6.78l-.53,5.7-.34-.13a11.8,11.8,0,0,0-.3-3.09,1.92,1.92,0,0,0-2-1.54c-.33,0-.55.1-.64.29a3.46,3.46,0,0,0-.24,1.07L111,9.45a2.6,2.6,0,0,0,1.72-.51,7.79,7.79,0,0,0,.86-2.66l.35.11-.93,8.2-.35-.15c0-.28,0-.53,0-.74v-.52a4.42,4.42,0,0,0-.37-2.18,1.56,1.56,0,0,0-1.44-.58l-.83,7.32c0,.18,0,.35,0,.51s0,.3,0,.4a1.45,1.45,0,0,0,.13.67c.09.18.28.26.57.26a2.72,2.72,0,0,0,2-.76A8.33,8.33,0,0,0,114.61,14.59ZM105,8.31a9.81,9.81,0,0,0,.41-1.65,13.72,13.72,0,0,0,.18-2.29,6.87,6.87,0,0,0-.26-2.09c-.17-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,5.05,5.05,0,0,0-.2,1.06l-.76,6.87a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,105,8.31Zm17.51,6.28a9.86,9.86,0,0,1-1.67,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1.1,1.1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44l1.64-14.32A4.53,4.53,0,0,1,120,1.75a1.47,1.47,0,0,1,.89-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1l-1.55,13.45a5.28,5.28,0,0,1-.35,1.63,1.1,1.1,0,0,1-.66.53v.77h7l.74-5.83Zm7.09,0a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33,0-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51l.75-6.67A3.46,3.46,0,0,1,127,1.71c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13.54-5.7H124v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83Zm8.45,5.24v.72h-3.83v-.72a1.11,1.11,0,0,0,.77-.41,2.52,2.52,0,0,0,.23-1.31c0-.23,0-.77-.07-1.62,0-.17-.05-.9-.13-2.18h-2.71l-.74,3c0,.2-.09.43-.13.67a4.44,4.44,0,0,0-.06.71,1.27,1.27,0,0,0,.16.79,1.35,1.35,0,0,0,.65.3v.72h-2.47v-.72a1.66,1.66,0,0,0,.52-.54,7.25,7.25,0,0,0,.55-1.58L135.49.07h.33L137,17.23a8.87,8.87,0,0,0,.3,2.11A.9.9,0,0,0,138.08,19.83ZM135,13.12l-.47-7.3-1.86,7.3Zm7.88-4-1.09-2.13a6.38,6.38,0,0,1-.39-1,6.65,6.65,0,0,1-.23-1.82,6.93,6.93,0,0,1,.23-1.8q.33-1.26,1-1.26c.57,0,1,.53,1.3,1.57a10.87,10.87,0,0,1,.36,2.39l0,1,.33.1.51-6h-.38a2.26,2.26,0,0,1-.2.54.38.38,0,0,1-.34.22.54.54,0,0,1-.19-.05l-.22-.13-.32-.25a2.36,2.36,0,0,0-.41-.25,1.82,1.82,0,0,0-.7-.16c-.81,0-1.44.57-1.9,1.7a11.21,11.21,0,0,0-.68,4.12,12.36,12.36,0,0,0,1.55,5.58,10.74,10.74,0,0,1,1.54,4.78,7.8,7.8,0,0,1-.41,2.67c-.28.76-.67,1.15-1.17,1.15a1.07,1.07,0,0,1-.79-.4,3.78,3.78,0,0,1-.64-1.18,7.79,7.79,0,0,1-.42-1.95c-.05-.44-.08-1.14-.11-2.1l-.36-.06-.46,6.73h.38a6.32,6.32,0,0,1,.2-.83.31.31,0,0,1,.3-.24.21.21,0,0,1,.14,0,1.06,1.06,0,0,1,.22.18l.32.27a3,3,0,0,0,.69.44,1.72,1.72,0,0,0,.69.15c.92,0,1.64-.63,2.16-1.91a11.22,11.22,0,0,0,.78-4.28,12.2,12.2,0,0,0-.4-3.29A14.21,14.21,0,0,0,142.85,9.07Zm6.36-7.36c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13L153,.48h-6.79v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83-.31-.13a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33.05-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51L149,2.78A3.46,3.46,0,0,1,149.21,1.71Z",opacity:1,strokeColor:"",fillColor:"#192760",width:152.969,height:21.152,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"ForComment":case"For Comment":t={iconName:"For Comment",pathdata:"M14.1.48l-.89,5.6L12.65,6a7.14,7.14,0,0,0-.48-3c-.54-1-1.6-1.54-3.19-1.54a1.37,1.37,0,0,0-1,.26,2.06,2.06,0,0,0-.42,1.08L6.35,9.28a6,6,0,0,0,2.73-.52,5.92,5.92,0,0,0,1.41-2.59l.58.1L9.52,14.34,9,14.2c0-.29,0-.54.05-.75s0-.38,0-.49a3.15,3.15,0,0,0-.55-2.09,3.07,3.07,0,0,0-2.32-.64L4.77,17.44c0,.13,0,.24-.06.35s0,.21,0,.31a1.23,1.23,0,0,0,.53,1.17,2,2,0,0,0,1,.19v.76H0v-.76a1.91,1.91,0,0,0,1.12-.54,3.56,3.56,0,0,0,.58-1.58L4.27,4.11c.05-.27.09-.51.12-.71a7.42,7.42,0,0,0,.1-1c0-.48-.1-.77-.29-.9A3.54,3.54,0,0,0,3,1.24V.48ZM28,7.11a17.42,17.42,0,0,1-2.57,9.07q-2.75,4.61-6.3,4.6a4.33,4.33,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.41-5.14,17.56,17.56,0,0,1,2.62-9.19Q19.43,0,22.82,0a4.48,4.48,0,0,1,3.72,1.92A8.46,8.46,0,0,1,28,7.11ZM25,4.6a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.88,2.88,0,0,0,2.25-1.29,16.48,16.48,0,0,0,2.1-4.93,37.09,37.09,0,0,0,1.07-4.83A28.26,28.26,0,0,0,25,4.6Zm15.83.16a6.49,6.49,0,0,1-.33,2,5.12,5.12,0,0,1-1.09,1.9,4.65,4.65,0,0,1-1.27,1,11.5,11.5,0,0,1-1.35.52c.07.3.12.49.14.57l1.62,6.66a3.79,3.79,0,0,0,.7,1.7,1.75,1.75,0,0,0,1.14.41v.76H36.13l-2.26-9.76h-.59L32,16.6l-.17,1,0,.25a2.62,2.62,0,0,0,0,.28q0,.8.27,1a3,3,0,0,0,1.25.32v.76H27.11v-.76a1.93,1.93,0,0,0,1.11-.52,3.54,3.54,0,0,0,.59-1.59L31.38,4.11c.06-.27.1-.51.13-.71a6,6,0,0,0,.1-1c0-.47-.1-.77-.29-.9a3.54,3.54,0,0,0-1.24-.3V.48h5.76a6.77,6.77,0,0,1,3,.53Q40.79,2,40.79,4.76Zm-3.16-.47a4.35,4.35,0,0,0-.44-2,1.54,1.54,0,0,0-1.48-.81.75.75,0,0,0-.63.26,2.78,2.78,0,0,0-.33,1.05L33.48,9.5a6.85,6.85,0,0,0,1.67-.2,2.55,2.55,0,0,0,1.49-1.13,6.37,6.37,0,0,0,.67-1.62A7.81,7.81,0,0,0,37.63,4.29ZM58.49,0a2.61,2.61,0,0,1-.32.63.55.55,0,0,1-.49.24A7,7,0,0,1,56.31.43,6.15,6.15,0,0,0,54.1,0q-3.47,0-6,3.92a16.73,16.73,0,0,0-2.51,9.24,8.73,8.73,0,0,0,1.64,5.57,5,5,0,0,0,7.19,1A8.89,8.89,0,0,0,57,16.37l-.64-.65a10.47,10.47,0,0,1-1.47,2.09A4,4,0,0,1,52,19.24a2.89,2.89,0,0,1-2.17-1.13c-.67-.75-1-2.15-1-4.2a22.2,22.2,0,0,1,1.62-8.29q1.8-4.54,4.23-4.55a2.33,2.33,0,0,1,2,1.14,6.16,6.16,0,0,1,.78,3.47c0,.14,0,.25,0,.32s0,.32,0,.73l.66.17L59.12,0ZM72.71,7.11a17.33,17.33,0,0,1-2.57,9.07c-1.82,3.07-3.93,4.6-6.3,4.6a4.34,4.34,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.4-5.14A17.55,17.55,0,0,1,61.4,4.53Q64.15,0,67.54,0a4.48,4.48,0,0,1,3.72,1.92A8.39,8.39,0,0,1,72.71,7.11Zm-3-2.51a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.85,2.85,0,0,0,2.25-1.29,16,16,0,0,0,2.1-4.93,34.08,34.08,0,0,0,1.07-4.83A28.26,28.26,0,0,0,69.68,4.6Zm17.5,13.62a4.63,4.63,0,0,1,.07-.75c0-.3.09-.59.15-.88L90,3.31a3.32,3.32,0,0,1,.7-1.67,2,2,0,0,1,1-.4V.48H87.23l-6.4,13.91L79.63.48H74.84v.76a3.29,3.29,0,0,1,1.2.21c.21.11.31.37.31.78a4.35,4.35,0,0,1-.07.75c0,.28-.11.61-.18,1L74,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76H76.2v-.76a2.31,2.31,0,0,1-1.09-.29,1.6,1.6,0,0,1-.58-1.43,8.8,8.8,0,0,1,.14-1.42c0-.37.14-.82.24-1.37L77,4.24l1.41,16.37H79L86.89,3.76,84.25,17.34A2.94,2.94,0,0,1,83.61,19a2.87,2.87,0,0,1-1.44.49v.76h6.54v-.76a3.39,3.39,0,0,1-1.23-.31Q87.18,19,87.18,18.22Zm17.73,0a4.63,4.63,0,0,1,.07-.75c0-.3.1-.59.16-.88l2.58-13.28a3.24,3.24,0,0,1,.69-1.67,2,2,0,0,1,1-.4V.48H105l-6.4,13.91L97.36.48H92.57v.76a3.29,3.29,0,0,1,1.2.21c.21.11.32.37.32.78A5.65,5.65,0,0,1,94,3c0,.28-.11.61-.19,1L91.69,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76h4.38v-.76a2.33,2.33,0,0,1-1.1-.29,1.6,1.6,0,0,1-.58-1.43,10.12,10.12,0,0,1,.14-1.42c.06-.37.14-.82.25-1.37L94.76,4.24l1.41,16.37h.59l7.86-16.85L102,17.34a3.1,3.1,0,0,1-.64,1.63,3,3,0,0,1-1.45.49v.76h6.55v-.76a3.46,3.46,0,0,1-1.24-.31Q104.91,19,104.91,18.22Zm11.52.3a6.56,6.56,0,0,1-3.25.75,1.27,1.27,0,0,1-.94-.26,1,1,0,0,1-.22-.66,3,3,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.38-7.2a3.65,3.65,0,0,1,2.4.57,2.92,2.92,0,0,1,.62,2.15c0,.14,0,.31,0,.51s0,.45-.06.73l.58.15,1.55-8.08-.58-.1a5.92,5.92,0,0,1-1.44,2.61,6.32,6.32,0,0,1-2.85.51L115,2.74a2.44,2.44,0,0,1,.39-1.06,1.43,1.43,0,0,1,1.07-.28c1.63,0,2.71.5,3.25,1.51a7.37,7.37,0,0,1,.49,3l.56.13.89-5.6H110.31v.76a3.28,3.28,0,0,1,1.25.31c.19.13.28.44.28.94a4.83,4.83,0,0,1-.06.7c0,.28-.09.58-.16.92l-2.57,13.24a3.54,3.54,0,0,1-.59,1.59,1.93,1.93,0,0,1-1.11.52v.76H119l1.24-5.74-.51-.12A7.7,7.7,0,0,1,116.43,18.52ZM136.6,1.24V.48h-4.3v.76a2.5,2.5,0,0,1,1.14.33A1.8,1.8,0,0,1,134,3.05a10.58,10.58,0,0,1-.14,1.34c-.05.41-.13.87-.22,1.39L132,14.12,127.41.48h-4.22v.76a2.53,2.53,0,0,1,1,.24,1.82,1.82,0,0,1,.64,1.06l.1.3L122.55,15a19.54,19.54,0,0,1-1,3.61,1.59,1.59,0,0,1-1.18.9v.76h4.37v-.76a2.5,2.5,0,0,1-1.12-.32,1.67,1.67,0,0,1-.55-1.44,5.32,5.32,0,0,1,0-.79c0-.43.17-1.09.34-2l2.08-10.57L131,20.71h.52l2.91-15a24.72,24.72,0,0,1,.85-3.42,1.42,1.42,0,0,1,1-1Zm.48-.76-.81,5,.54.2a8.1,8.1,0,0,1,1.85-3.16,3.63,3.63,0,0,1,2.66-1.06l-3.08,15.85a3,3,0,0,1-.86,1.85,2.42,2.42,0,0,1-1.32.26v.76H143v-.76a4,4,0,0,1-1.41-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.17-1,2.92-15.1a2.64,2.64,0,0,1,1.76.63c.74.7,1.12,2,1.15,3.94l.55.07L148.6.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:148.603,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Void":t={iconName:"Void",pathdata:"M27.88,1.72a6.53,6.53,0,0,0-1.81,1.42L9,21.12H7.54L4.09,5.83A11.83,11.83,0,0,0,2.82,2Q2.3,1.4,0,1.26V.48H13.54v.78a11,11,0,0,0-2.37.18q-1.11.27-1.11,1.05a1.43,1.43,0,0,0,0,.29c0,.09,0,.19,0,.28l2.35,12,8.56-9a25.11,25.11,0,0,0,1.83-2.14,3.15,3.15,0,0,0,.82-1.68c0-.41-.28-.69-.84-.82a12.57,12.57,0,0,0-2.08-.15V.48h8.7v.78A7.11,7.11,0,0,0,27.88,1.72ZM57.37,7.23q0,4.85-5.56,9.22a21.41,21.41,0,0,1-13.62,4.67,14.41,14.41,0,0,1-7.89-1.95,6,6,0,0,1-3-5.23q0-4.92,5.66-9.34A21.12,21.12,0,0,1,46.2,0a15,15,0,0,1,8,2A6,6,0,0,1,57.37,7.23ZM50.82,4.68a3.46,3.46,0,0,0-1.13-2.59A4.93,4.93,0,0,0,46.17,1q-5.64,0-9.49,6.64c-1.94,3.36-2.92,6.16-2.92,8.4a4.27,4.27,0,0,0,.56,2.23q1.08,1.8,3.93,1.8a9.24,9.24,0,0,0,4.87-1.31,15.24,15.24,0,0,0,4.54-5A21.81,21.81,0,0,0,50,8.85,14.23,14.23,0,0,0,50.82,4.68ZM66,18.49a1.49,1.49,0,0,1,0-.28c0-.1,0-.2.08-.3l.35-1L72,3.41a2.94,2.94,0,0,1,1.25-1.62,6.79,6.79,0,0,1,2.4-.53V.48H62.19v.78a13.27,13.27,0,0,1,2.67.32.88.88,0,0,1,.64.95,2.38,2.38,0,0,1-.12.69c-.08.25-.2.57-.36.95L59.45,17.64a3,3,0,0,1-1.28,1.61,6.84,6.84,0,0,1-2.39.53v.77H69.27v-.77a13.72,13.72,0,0,1-2.67-.32A.9.9,0,0,1,66,18.49Zm38.25-9.67q0,4.59-5.15,8-5.73,3.77-15,3.76h-13v-.77a7.4,7.4,0,0,0,2.1-.41,3.08,3.08,0,0,0,1.57-1.75L80.28,4.17c.16-.38.28-.7.37-1a2.27,2.27,0,0,0,.12-.68.89.89,0,0,0-.64-.95,13.41,13.41,0,0,0-2.68-.32V.48H90.6q6.68,0,10.15,2.27A6.92,6.92,0,0,1,104.23,8.82ZM97.58,7a5.28,5.28,0,0,0-1.13-3.54q-1.77-2-6.14-2a4.24,4.24,0,0,0-2,.32,1.77,1.77,0,0,0-.74.84L81.35,17.73a1.72,1.72,0,0,0-.12.39,1.89,1.89,0,0,0,0,.31.89.89,0,0,0,.54.85,5.1,5.1,0,0,0,2,.26q8.07,0,11.68-5.5A12.61,12.61,0,0,0,97.58,7Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:104.233,height:21.123,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"PreliminaryResults":case"Preliminary Results":t={iconName:"Preliminary Results",pathdata:"M9.23,5.08q0-3-1.32-4.08A2.6,2.6,0,0,0,6.17.41H2v.78a1.5,1.5,0,0,1,.76.23,1.39,1.39,0,0,1,.28,1c0,.19,0,.43,0,.73s-.07.61-.1.91L1.17,17.56a4.76,4.76,0,0,1-.41,1.62A1.18,1.18,0,0,1,0,19.7v.78H4.25V19.7a1.77,1.77,0,0,1-.86-.31,1.5,1.5,0,0,1-.2-1c0-.09,0-.19,0-.3a1.36,1.36,0,0,1,0-.29l.12-1,.78-6L5,11h.41a3.21,3.21,0,0,0,2.78-1.6A7.57,7.57,0,0,0,9.23,5.08ZM7,6.32a10,10,0,0,1-.42,2,3,3,0,0,1-.68,1.21,1.63,1.63,0,0,1-1.13.36H4.53l-.27-.06,1-7.15a4.75,4.75,0,0,1,.22-1,.45.45,0,0,1,.46-.29,1,1,0,0,1,1,.8,6.22,6.22,0,0,1,.29,2.06A18,18,0,0,1,7,6.32ZM23.4,18.75a3.35,3.35,0,0,1-2.23.76.68.68,0,0,1-.64-.26,1.27,1.27,0,0,1-.16-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.4-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67a3,3,0,0,1,.28-1.08c.11-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,26,6l.39.13L27,.41H19.2v.78a1.67,1.67,0,0,1,.86.31,1.52,1.52,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93L18.33,17.56a4.59,4.59,0,0,1-.4,1.62,1.22,1.22,0,0,1-.74.51,1,1,0,0,1-.73-.4A5.08,5.08,0,0,1,16,17.56l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.23,3.23,0,0,0,.87-1,6,6,0,0,0,.76-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.4,3.4,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21-.05.45-.09.73L9.31,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8L26,14.65l-.35-.13A7.9,7.9,0,0,1,23.4,18.75ZM13.67,9.38a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,13.67,9.38ZM35,14.65l-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L29.15,4.1q.08-.57.12-1c0-.26,0-.48,0-.68a1.42,1.42,0,0,0-.21-1,1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49,4.17,4.17,0,0,0-.44,1.66L29.49,17.65c0,.16,0,.31,0,.45a3.47,3.47,0,0,0,0,.48,1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm2.79,4.73a1.61,1.61,0,0,0,.85.32v.78H34.39V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L37.33,4.1c.05-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L37.78,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,37.83,19.38Zm12.2,0a1.81,1.81,0,0,0,.85.31v.78h-4.5V19.7a1.64,1.64,0,0,0,1-.49,4,4,0,0,0,.44-1.66l1.81-13.8-5.4,17.12h-.4l-1-16.64L41.39,15.12c-.07.56-.13,1-.17,1.39-.06.61-.09,1.09-.09,1.45a2,2,0,0,0,.4,1.45,1.19,1.19,0,0,0,.75.29v.78h-3V19.7a1.21,1.21,0,0,0,.81-.87,29.47,29.47,0,0,0,.66-3.71L42.21,4c0-.38.09-.71.12-1a5.41,5.41,0,0,0,.05-.75c0-.42-.07-.69-.21-.8a1.69,1.69,0,0,0-.83-.21V.41h3.29l.83,14.14L49.85.41h3.07v.78a1.12,1.12,0,0,0-.69.41,4.08,4.08,0,0,0-.48,1.69L50,16.79c0,.29-.08.59-.11.89s0,.56,0,.76A1.41,1.41,0,0,0,50,19.39Zm5,0a1.61,1.61,0,0,0,.85.32v.78H51.56V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L54.5,4.1c0-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L55,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,55,19.38ZM66.13,5.75,64.13,21h-.36L60,4.38,58.6,15.12c-.12.89-.2,1.55-.23,2a7.32,7.32,0,0,0,0,.81,2.17,2.17,0,0,0,.38,1.46,1.32,1.32,0,0,0,.77.32v.78h-3V19.7a1.26,1.26,0,0,0,.81-.91,29,29,0,0,0,.65-3.67L59.56,2.81,59.5,2.5a2,2,0,0,0-.45-1.06,1.21,1.21,0,0,0-.67-.25V.41h2.9L64.4,14.28,65.52,5.8c.07-.53.12-1,.16-1.41.06-.62.09-1.08.09-1.36a2.45,2.45,0,0,0-.34-1.51,1.39,1.39,0,0,0-.79-.33V.41h3v.78l-.21.06c-.29.08-.52.43-.68,1A34.22,34.22,0,0,0,66.13,5.75ZM83.27,1A3.41,3.41,0,0,0,81.21.41h-4v.78a1.74,1.74,0,0,1,.85.3c.14.13.2.43.2.91,0,.24,0,.56-.06,1,0,.21-.06.45-.09.73L76.38,17.56A4.53,4.53,0,0,1,76,19.18a1.18,1.18,0,0,1-.76.52v0a1,1,0,0,1-.67-.45,8.11,8.11,0,0,1-.34-2.12L72.83,0h-.38L67.11,17.64a6.42,6.42,0,0,1-.63,1.58,1.84,1.84,0,0,1-.59.54v.72h2.83v-.72a1.68,1.68,0,0,1-.75-.31,1.16,1.16,0,0,1-.18-.79,3.46,3.46,0,0,1,.07-.7,5.16,5.16,0,0,1,.15-.67l.84-3H72c.08,1.28.13,2,.13,2.18.06.85.08,1.39.08,1.61a2.26,2.26,0,0,1-.25,1.31,1.43,1.43,0,0,1-.88.42v.72H79.5V19.7a1.58,1.58,0,0,1-.86-.32,1.7,1.7,0,0,1-.19-1c0-.1,0-.2,0-.29a1.81,1.81,0,0,1,0-.25l.12-1,.85-6.24h.41l1.55,9.92h2.9V19.7a1,1,0,0,1-.79-.41A5.15,5.15,0,0,1,83,17.56l-1.11-6.77c0-.08,0-.27-.09-.58a5.53,5.53,0,0,0,.92-.53,3.52,3.52,0,0,0,.87-1,6.16,6.16,0,0,0,.75-1.93,9.67,9.67,0,0,0,.23-2C84.61,2.89,84.16,1.62,83.27,1ZM69.19,13.05l2.13-7.3.53,7.3Zm13-6.47a8.39,8.39,0,0,1-.46,1.65,2,2,0,0,1-1,1.15,3.29,3.29,0,0,1-1.14.2l.87-6.87a3.61,3.61,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08A11,11,0,0,1,82.22,6.58ZM90.48.41h3v.78a1.07,1.07,0,0,0-.55.41,6.13,6.13,0,0,0-.77,1.62l-2.72,8-.72,5.55c0,.22-.07.51-.1.86a7.29,7.29,0,0,0-.06.73,1.46,1.46,0,0,0,.29,1.07,1.61,1.61,0,0,0,.83.25v.78H85V19.7a1.56,1.56,0,0,0,.93-.39,3.7,3.7,0,0,0,.53-1.76l.85-6.45-1.26-8a6.07,6.07,0,0,0-.36-1.47.81.81,0,0,0-.7-.4V.41h4v.78a1.32,1.32,0,0,0-.76.23c-.15.12-.23.4-.23.84a4.46,4.46,0,0,0,0,.48c0,.19,0,.39.07.6l1,6.54,1.88-5.55c.1-.29.18-.55.24-.79a4.68,4.68,0,0,0,.14-1.11,1.35,1.35,0,0,0-.31-1,1.14,1.14,0,0,0-.66-.2Zm18.61,1.22c.1-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,112.39,6l.38.13.62-5.7h-7.76v.78a1.67,1.67,0,0,1,.86.31,1.59,1.59,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93l-1.77,13.46a4.53,4.53,0,0,1-.41,1.62,1.17,1.17,0,0,1-.73.51,1,1,0,0,1-.73-.4,5.08,5.08,0,0,1-.49-1.73l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.4,3.4,0,0,0,.88-1,6.16,6.16,0,0,0,.75-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.38,3.38,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21,0,.45-.09.73L95.74,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8l.85-5.83-.35-.13a7.9,7.9,0,0,1-2.24,4.23,3.35,3.35,0,0,1-2.23.76.71.71,0,0,1-.65-.26,1.37,1.37,0,0,1-.15-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.41-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67A3,3,0,0,1,109.09,1.63Zm-9,7.75a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,100.1,9.38ZM120.18.07h.43l-.59,6-.37-.1-.05-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57s-.95.42-1.21,1.26a6.17,6.17,0,0,0-.25,1.8,5.92,5.92,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L118.19,9a12.6,12.6,0,0,1,1.12,2.57,10.75,10.75,0,0,1,.47,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.17,2.17,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,117.46,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.15,1.15,0,0,0,.25.12.47.47,0,0,0,.22,0A.44.44,0,0,0,120,.62,2.6,2.6,0,0,0,120.18.07Zm10,2a26.67,26.67,0,0,0-.66,3.7l-.9,6.85a32.12,32.12,0,0,1-1.16,5.7c-.68,1.83-1.67,2.74-3,2.74a2.7,2.7,0,0,1-2.28-1.36,6.67,6.67,0,0,1-.92-3.77,19.46,19.46,0,0,1,.11-2c0-.46.15-1.26.3-2.42l1-7.36c0-.33.08-.64.11-.93s0-.55,0-.77a1.38,1.38,0,0,0-.2-.91,1.74,1.74,0,0,0-.85-.3V.41h4.43v.78a1.39,1.39,0,0,0-.91.47,4.25,4.25,0,0,0-.44,1.68l-1.18,9c-.11.8-.19,1.46-.25,2q-.15,1.37-.15,2a4.41,4.41,0,0,0,.48,2.27,1.44,1.44,0,0,0,1.29.78c.91,0,1.62-.82,2.13-2.48a30.62,30.62,0,0,0,.91-4.85L129,5.76c.1-.91.14-1.3.13-1.19a14.64,14.64,0,0,0,.13-1.6,2.12,2.12,0,0,0-.38-1.46,1.35,1.35,0,0,0-.77-.32V.41H131v.78A1.18,1.18,0,0,0,130.23,2.06Zm8.41,12.59-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L132.75,4.1q.08-.57.12-1c0-.26,0-.48,0-.68,0-.51-.06-.83-.2-1a1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49A4.17,4.17,0,0,0,135,3.34l-1.87,14.31c0,.16,0,.31-.05.45s0,.3,0,.48a1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm7.72-8.56a7.63,7.63,0,0,0-.79-4,1.53,1.53,0,0,0-1.21-.64l-2,15.35-.12,1a2.47,2.47,0,0,0,0,.34,2.35,2.35,0,0,0,0,.26c0,.52.08.84.23,1a2,2,0,0,0,1,.3v.78h-4.76V19.7a1.18,1.18,0,0,0,.9-.26,3.75,3.75,0,0,0,.6-1.88l2.11-16.11a2.17,2.17,0,0,0-1.83,1.08,9.57,9.57,0,0,0-1.27,3.21l-.37-.2.56-5.13h7.91l-.52,5.76Zm3.41-3.79a6.17,6.17,0,0,0-.25,1.8,5.63,5.63,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L151.46,9a13.19,13.19,0,0,1,1.13,2.57,11.08,11.08,0,0,1,.46,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.21,2.21,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,150.73,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.34,1.34,0,0,0,.24.12.56.56,0,0,0,.23,0,.44.44,0,0,0,.39-.21,2.6,2.6,0,0,0,.23-.55h.43l-.59,6-.37-.1,0-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57S150,1.46,149.77,2.3Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.879,height:21.051,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InformationOnly":case"Information Only":t={iconName:"Information Only",pathdata:"M4,19.14a2,2,0,0,0,1,.32v.76H0v-.76a1.42,1.42,0,0,0,.87-.52,4,4,0,0,0,.47-1.59l2-13.24c.06-.38.1-.69.13-1a5.73,5.73,0,0,0,0-.67c0-.5-.08-.81-.24-.94a2.2,2.2,0,0,0-1-.31V.48H7.26v.76a1.48,1.48,0,0,0-.88.52,4.14,4.14,0,0,0-.45,1.6l-2,13.24-.13,1c0,.1,0,.19,0,.3a2.72,2.72,0,0,0,0,.28A1.32,1.32,0,0,0,4,19.14ZM18.17,1.3l.24-.06V.48H15v.76a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c-.05.41-.11.87-.18,1.39l-1.29,8.34L11.15.48H7.83v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L7.33,15a24.86,24.86,0,0,1-.76,3.61,1.32,1.32,0,0,1-.92.9v.76H9.09v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2L9.72,4.38,14,20.71h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42C17.57,1.72,17.83,1.38,18.17,1.3ZM19.33.48v.76a2.32,2.32,0,0,1,1,.3c.15.13.23.42.23.9,0,.23,0,.55-.07,1,0,.2-.06.44-.1.71l-2,13.23a4,4,0,0,1-.46,1.58,1.39,1.39,0,0,1-.88.54v.76h4.89v-.76a1.36,1.36,0,0,1-.78-.19,1.39,1.39,0,0,1-.41-1.17c0-.1,0-.21,0-.31s0-.22,0-.35l1.09-7.21a2.09,2.09,0,0,1,1.83.64A3.81,3.81,0,0,1,24.1,13c0,.11,0,.28,0,.49s0,.46,0,.75l.45.14,1.22-8.07-.46-.1a6.19,6.19,0,0,1-1.11,2.59A3.89,3.89,0,0,1,22,9.28l1-6.54a2.43,2.43,0,0,1,.33-1.08.93.93,0,0,1,.76-.26,2.45,2.45,0,0,1,2.52,1.54A9,9,0,0,1,27,6l.44.13.7-5.6ZM39.06,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19Q32.31,0,35,0a3.37,3.37,0,0,1,2.93,1.92A10.14,10.14,0,0,1,39.06,7.11ZM36.68,4.6a7,7,0,0,0-.42-2.55A1.37,1.37,0,0,0,35,1c-1.37,0-2.52,2.17-3.46,6.53a40.81,40.81,0,0,0-1.07,8.26,10,10,0,0,0,.21,2.2c.26,1.18.74,1.77,1.43,1.77s1.24-.43,1.78-1.29a18.75,18.75,0,0,0,1.65-4.93,43.28,43.28,0,0,0,.85-4.83A36.93,36.93,0,0,0,36.68,4.6ZM61,19.15a2.25,2.25,0,0,0,1,.31v.76H56.84v-.76A2,2,0,0,0,58,19a3.6,3.6,0,0,0,.5-1.63L60.56,3.76l-6.2,16.85H53.9L52.78,4.24,51.12,15c-.09.55-.15,1-.2,1.37a13,13,0,0,0-.11,1.42,1.8,1.8,0,0,0,.46,1.43,1.54,1.54,0,0,0,.86.29v.76H45.49l-1.78-9.76h-.47l-1,6.14-.13,1,0,.25c0,.09,0,.19,0,.28a1.47,1.47,0,0,0,.22,1,2,2,0,0,0,1,.32v.76H38.37v-.76a1.42,1.42,0,0,0,.88-.52,4.21,4.21,0,0,0,.46-1.59l2-13.24c0-.27.08-.51.11-.71a8.23,8.23,0,0,0,.07-1,1.23,1.23,0,0,0-.23-.9,2.32,2.32,0,0,0-1-.3V.48h4.54A4.34,4.34,0,0,1,47.62,1c1,.65,1.54,1.9,1.54,3.75a7.78,7.78,0,0,1-.26,2A5.56,5.56,0,0,1,48,8.62a3.87,3.87,0,0,1-1,1,8.06,8.06,0,0,1-1.06.52c.05.3.09.49.11.57l1.27,6.66a4.58,4.58,0,0,0,.55,1.7,1.23,1.23,0,0,0,.83.39,1.31,1.31,0,0,0,.86-.84A23,23,0,0,0,50.36,15L52.05,4c.06-.37.11-.7.15-1a7.42,7.42,0,0,0,0-.75c0-.41-.08-.67-.25-.78a2.09,2.09,0,0,0-.94-.21V.48h3.77l1,13.91,5-13.91h3.51v.76a1.46,1.46,0,0,0-.79.4A3.71,3.71,0,0,0,63,3.31L61,16.59c0,.29-.09.58-.13.88s-.05.55-.05.75Q60.79,19,61,19.15Zm-15.14-11a7.46,7.46,0,0,0,.53-1.62,9.54,9.54,0,0,0,.25-2.26,5.31,5.31,0,0,0-.35-2,1.18,1.18,0,0,0-1.16-.81.54.54,0,0,0-.5.26,3.37,3.37,0,0,0-.26,1.05l-1,6.76a4.28,4.28,0,0,0,1.31-.2A2.17,2.17,0,0,0,45.89,8.17ZM73.21,19.51v.71h-5v-.71a1.61,1.61,0,0,0,1-.41,1.92,1.92,0,0,0,.3-1.29c0-.22,0-.75-.09-1.58,0-.17-.06-.89-.16-2.15H65.68l-1,3c-.06.2-.12.42-.17.66a3.4,3.4,0,0,0-.08.69q0,.62.21.78a1.9,1.9,0,0,0,.86.3v.71H62.29v-.71A2,2,0,0,0,63,19a6.47,6.47,0,0,0,.72-1.56L69.82.07h.43L71.83,17A6.77,6.77,0,0,0,72.22,19,1.23,1.23,0,0,0,73.21,19.51Zm-4.08-6.6-.61-7.18-2.44,7.18ZM82.52,6.14l.6-5.66H74l-.63,5,.42.2a8.71,8.71,0,0,1,1.46-3.16,2.57,2.57,0,0,1,2.1-1.06L75,17.35a3.36,3.36,0,0,1-.68,1.85,1.57,1.57,0,0,1-1,.26v.76H78.7v-.76a2.69,2.69,0,0,1-1.11-.3c-.18-.13-.27-.45-.27-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.14-1L79.8,1.5a1.87,1.87,0,0,1,1.39.63c.58.7.88,2,.91,3.94ZM88.84.48H83.92v.76a2.31,2.31,0,0,1,1,.31c.15.13.23.44.23.94a5.56,5.56,0,0,1,0,.67c0,.26-.08.57-.14,1l-2,13.24a4,4,0,0,1-.47,1.59,1.36,1.36,0,0,1-.87.52v.76H86.5v-.76a2,2,0,0,1-1-.32,1.32,1.32,0,0,1-.23-.94c0-.09,0-.18,0-.28s0-.2,0-.3l.13-1,2-13.24A4.09,4.09,0,0,1,88,1.76a1.45,1.45,0,0,1,.87-.52ZM99.11,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19C91.63,1.51,93.25,0,95,0A3.36,3.36,0,0,1,98,1.92,10,10,0,0,1,99.11,7.11ZM96.72,4.6a7.18,7.18,0,0,0-.41-2.55c-.28-.7-.7-1-1.29-1-1.37,0-2.52,2.17-3.46,6.53a40.7,40.7,0,0,0-1.06,8.26,10,10,0,0,0,.2,2.2c.26,1.18.74,1.77,1.43,1.77a2.2,2.2,0,0,0,1.78-1.29,18.75,18.75,0,0,0,1.65-4.93,41.1,41.1,0,0,0,.85-4.83A34.65,34.65,0,0,0,96.72,4.6Zm11.1-3.36a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c0,.41-.11.87-.18,1.39l-1.29,8.34L104,.48h-3.33v.76a1.7,1.7,0,0,1,.78.24,2,2,0,0,1,.51,1.06l.07.3L100.13,15a24,24,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.45v-.76a1.67,1.67,0,0,1-.88-.32,1.88,1.88,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2l1.64-10.57,4.29,16.33h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42c.18-.59.44-.93.78-1l.23-.06V.48h-3.39ZM125,7.11a21,21,0,0,1-2,9.07c-1.45,3.07-3.1,4.6-5,4.6a3.28,3.28,0,0,1-2.87-1.92A10.29,10.29,0,0,1,114,13.72a21.22,21.22,0,0,1,2.06-9.19Q118.22,0,120.91,0a3.36,3.36,0,0,1,2.92,1.92A10,10,0,0,1,125,7.11ZM122.59,4.6a7,7,0,0,0-.41-2.55,1.37,1.37,0,0,0-1.28-1c-1.37,0-2.53,2.17-3.46,6.53a40.11,40.11,0,0,0-1.07,8.26,10.65,10.65,0,0,0,.2,2.2q.39,1.77,1.44,1.77a2.2,2.2,0,0,0,1.77-1.29,18.29,18.29,0,0,0,1.66-4.93,45.71,45.71,0,0,0,.85-4.83A36.53,36.53,0,0,0,122.59,4.6Zm14.26-3.3.24-.06V.48h-3.4v.76a1.74,1.74,0,0,1,.91.33,2.13,2.13,0,0,1,.4,1.48c0,.28,0,.73-.11,1.34,0,.41-.11.87-.18,1.39l-1.29,8.34L129.83.48h-3.32v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L126,15a27,27,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.44v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44c0-.26,0-.52,0-.79.05-.43.13-1.09.27-2l1.65-10.57,4.29,16.33h.41l2.29-15a31.07,31.07,0,0,1,.67-3.42C136.25,1.72,136.52,1.38,136.85,1.3Zm8.52,13.06a8.55,8.55,0,0,1-2.19,3.87,4.44,4.44,0,0,1-2.94,1,1,1,0,0,1-.68-.21.9.9,0,0,1-.24-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2.15-14.08a3.69,3.69,0,0,1,.5-1.64,2.22,2.22,0,0,1,1.16-.48V.48H138v.76a2.2,2.2,0,0,1,1,.31c.16.13.24.44.24.94a5.73,5.73,0,0,1-.05.67c0,.26-.07.57-.13,1l-2,13.23a4,4,0,0,1-.47,1.6,1.36,1.36,0,0,1-.87.52v.76h9.16l1-5.74ZM151.79.48v.76a1.52,1.52,0,0,1,.76.2,1.21,1.21,0,0,1,.37,1,4.09,4.09,0,0,1-.17,1.09c-.07.24-.16.5-.27.79L150.32,9.8l-1.18-6.44a4.51,4.51,0,0,1-.08-.6,4.37,4.37,0,0,1,0-.46c0-.43.09-.71.27-.83a1.75,1.75,0,0,1,.87-.23V.48h-4.63v.76a.94.94,0,0,1,.8.4,5.08,5.08,0,0,1,.42,1.44L148.2,11l-1,6.35a3.35,3.35,0,0,1-.61,1.73,1.91,1.91,0,0,1-1.06.39v.76h5.32v-.76a2,2,0,0,1-.95-.25,1.29,1.29,0,0,1-.33-1.05,7.29,7.29,0,0,1,.06-.73q.06-.51.12-.84l.82-5.46,3.12-7.89a5.54,5.54,0,0,1,.89-1.59,1.28,1.28,0,0,1,.63-.41V.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:155.237,height:20.783,stampFillColor:"#dce3ef",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}},s.prototype.saveStampAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),r=0;r<n.length;r++){var o=[],a=n[r];if(a){for(var l=0;a.annotations.length>l;l++)this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[l]),a.annotations[l].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[l].bounds,a.pageIndex)),this.pdfViewer.nameTable[a.annotations[l].randomId]&&(a.annotations[l].wrapperBounds=this.pdfViewer.nameTable[a.annotations[l].randomId].wrapper.bounds);o=a.annotations}t[a.pageIndex]=o}return JSON.stringify(t)},s.prototype.storeStampInSession=function(e,t){var i=Math.round(JSON.stringify(window.sessionStorage).length/1024),n=Math.round(JSON.stringify(t).length/1024);this.pdfViewer.annotationModule.isFormFieldShape=!1,i+n>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage(),this.pdfViewerBase.isFormStorageExceed||this.pdfViewer.formFieldsModule.clearFormFieldStorage());var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp"),o=0;if(this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),r){this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var d=JSON.parse(r);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var p=this.pdfViewer.annotationModule.getPageCollection(d,e);if(d[p])d[p].annotations.push(t),o=d[p].annotations.indexOf(t);else{var u={pageIndex:e,annotations:[]};u.annotations.push(t),o=u.annotations.indexOf(t),d.push(u)}var h=JSON.stringify(d);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",h)}else{this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var a={pageIndex:e,annotations:[]};a.annotations.push(t),o=a.annotations.indexOf(t);var l=[];l.push(a),h=JSON.stringify(l),this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",h)}return o},s.prototype.updateSessionStorage=function(e,t,i){if(null!=t)for(var n=0;n<e.annotations.length;n++)if(e.annotations[n].id===t){e=e.annotations[n];break}"Rotate"===i&&(e=e.annotations[0]);var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),r)for(var o=e.bounds,a=JSON.parse(r),l=0;l<a.length;l++)for(var h=a[l],d=0;d<h.annotations.length;d++)if(null!=a[l].annotations[d]&&a[l].annotations[d].randomId===e.id){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var p=this.pdfViewer.annotationModule.getPageCollection(a,a[l].annotations[d].pageNumber);"delete"!==i?a[p]&&(a[l].annotations[d].opacity=e.wrapper.children[1]?e.wrapper.children[1].style.opacity:e.wrapper.children[0].style.opacity,a[l].annotations[d].rotateAngle=e.rotateAngle,a[l].annotations[d].bounds={left:o.x,top:o.y,width:e.wrapper.actualSize.width,height:e.wrapper.actualSize.height,right:o.right,bottom:o.bottom}):a[l].annotations.splice(d,1);var u=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=u:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",u);break}},s.prototype.saveImportedStampAnnotations=function(e,t){var r,i=null,n=!1,o=e.IsDynamic;if(e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),e.Subject&&o)r=this.retrieveDynamicStampAnnotation(e.Subject),n=!0;else if(e.Subject){if(r=this.retrievestampAnnotation(e.Subject),"Accepted"===e.Subject||"Rejected"===e.Subject){var a=Cs(r.pathdata);r.pathdata=ia(a),n=!0}}else e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),i={stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.FillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:"",stampAnnotationPath:this.findImageData(e.Apperarance),randomId:"image",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:" ",bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.annotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_stamp");r&&(i={stampAnnotationType:"path",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:r.stampFillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:r.iconName,stampAnnotationPath:r.pathdata,randomId:"stamp",isDynamicStamp:!1,dynamicText:this.dynamicText,bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:""},n&&(i.dynamicText=this.findDynamicText(e.Apperarance,e.Subject),i.isDynamicStamp=!0),this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_stamp"))},s.prototype.updateStampAnnotationCollections=function(e,t){var n,r=e.IsDynamic;e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);var o=this.stampImageData(e);if(e.Subject&&r&&"Draft"!==e.Subject&&!o)n=this.retrieveDynamicStampAnnotation(e.Subject);else{if(!e.Subject||o)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,pageNumber:t,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName};n=this.retrievestampAnnotation(e.Subject)}if(n)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{stampAnnotationType:"path",author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,creationDate:n.creationDate,pageNumber:t,icon:n.iconName,stampAnnotationPath:n.pathdata,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:e.Rect.X,top:e.Rect.Y,width:e.Rect.Width,height:e.Rect.Height},annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isMaskedImage:e.IsMaskedImage,customStampName:""}},s.prototype.stampImageData=function(e){var t=!1;if(e&&e.Apperarance)for(var i=0;i<e.Apperarance.length;i++)if(e.Apperarance[i].imagedata){t=!0;break}return t},s.prototype.findImageData=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t].imagedata;if(n)return n}return""},s.prototype.findDynamicText=function(e,t){var i="";if(e){for(var n=0;n<e.length;n++){var r=e[n];if("string"===r.type&&void 0!==r.text){var l=void 0;if(r.isImport)l=r.text;else{var h=r.text.split("(");l=h[1]?h[1].split(")")[0]:r.text}l.toLowerCase()!==t.toLowerCase()&&(i+=l)}}return i}return i},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),n){var r=JSON.parse(n),o=this.pdfViewer.annotationModule.getPageCollection(r,e);i=r[o]?r[o].annotations:t}else i=t;return i},s.prototype.modifyInCollection=function(e,t,i){this.pdfViewer.annotationModule.isFormFieldShape=!c(i.formFieldAnnotationType)&&""!==i.formFieldAnnotationType,this.pdfViewerBase.updateDocumentEditedProperty(!0);var r=this.getAnnotations(t,null);if(null!=r&&i){for(var o=0;o<r.length;o++)i.annotName===r[o].annotName&&("bounds"===e&&(r[o].bounds={left:i.wrapper.bounds.x,top:i.wrapper.bounds.y,width:i.wrapper.bounds.width,height:i.wrapper.bounds.height},r[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),this.pdfViewer.annotationModule.storeAnnotationCollections(r[o],t));this.manageAnnotations(r,t)}return null},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var r=this.pdfViewer.annotationModule.getPageCollection(n,t);n[r]&&(n[r].annotations=e);var o=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=o:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",o)}},s.prototype.updateAddAnnotationDetails=function(e,t,i,n,r,o){t=e?e.offset?e.offset:{x:10,y:10}:(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset,!n&&!r&&!o&&(n=Wl.Approved);var a=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),l=this.pdfViewer.annotation.createGUID(),h=i,d=[],p="",u="Stamp",f=[],g=!1,m=e.author?e.author:"Guest",y=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,b=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),w=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(b.isLock=!!e.isLock&&e.isLock,b.minHeight=e.minHeight?e.minHeight:0,b.minWidth=e.minWidth?e.minWidth:0,b.maxWidth=e.maxWidth?e.maxWidth:0,b.maxHeight=e.maxHeight?e.maxHeight:0,e.customStamps&&e.customStamps[0].customStampName)f[0]={imagedata:e.customStamps[0].customStampImageSource,isImport:!0},this.customStampName=e.customStamps[0].customStampName,this.pdfViewerBase.customStampCollection.push(e.customStamps[0]),u="Image",e.width=e.width?e.width:100,e.height=e.height?e.height:100;else if(n){var S;S=a.split(" "),p=n.toString(),f[0]={baseFontName:"Helvetica-BoldOblique",currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",fontSize:10,isImport:!0,text:"By "+m+" at "+S[1]+S[2]+" , "+S[0],type:"string"},g=!0,e.width=e.width?e.width:140,e.height=e.height?e.height:55}else r?(p=r.toString(),r==Go.Accepted||r==Go.Rejected?(e.width=e.width?e.width:35,e.height=e.height?e.height:35):r==Go.SignHere?(e.width=e.width?e.width:110,e.height=e.height?e.height:30):r==Go.Witness?(e.width=e.width?e.width:130,e.height=e.height?e.height:30):r==Go.InitialHere&&(e.width=e.width?e.width:90,e.height=e.height?e.height:30)):o&&(p=o.toString(),o==ls.Final||o==ls.Draft?(e.width=e.width?e.width:110,e.height=e.height?e.height:30):o==ls.Void?(e.width=e.width?e.width:100,e.height=e.height?e.height:30):(e.width=e.width?e.width:130,e.height=e.height?e.height:30));return d[0]={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:w,AnnotName:l,AnnotType:"stamp",AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:y,AnnotationSettings:b,Apperarance:f||null,Author:m,Comments:null,CreatedDate:a,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:"#192760",Icon:0,IsCommentLock:!1,IsDynamic:g,IsLocked:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:"",Name:null,Note:"",Opacity:e.opacity?e.opacity:1,Rect:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},RotateAngle:0,StampAnnotationtype:u,State:"",StateModel:"",StrokeColor:"#dce3ef",Subject:p,matrix:null,CustomStampName:this.customStampName?this.customStampName:"",pageNumber:h},{stampAnnotations:d}},s.prototype.triggerAnnotationAdd=function(e,t){this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,"Stamp",e.bounds,{opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign})},s}(),qAe=function(){function s(e,t){this.moreButtonId="",this.commentsCount=0,this.commentsreplyCount=0,this.commentContextMenu=[],this.isAccordionContainer=!0,this.isCreateContextMenu=!1,this.isCommentsSelected=!1,this.isAddAnnotationProgramatically=!1,this.isEditableElement=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.textFromCommentPanel=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.opacity=this.pdfViewer.stickyNotesSettings.opacity?this.pdfViewer.stickyNotesSettings.opacity:1}return s.prototype.renderStickyNotesAnnotations=function(e,t,i){if(e&&e.length>0)for(var n=0;n<e.length;n++){var r=e[n],o=!1,a=this.getAnnotations(t,null,"sticky");if(null!==a)for(var l=0;l<a.length;l++){var h=r.annotName?r.annotName:r.AnnotName,d=a[l].annotName?a[l].annotName:a[l].AnnotName;if(d&&h&&d===h){o=!0;break}}if(!o){r.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(r,t,r.AnnotType);var p,u=r.Bounds,f=r.Author;r.AnnotationSettings=r.AnnotationSettings?r.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(r),r.allowedInteractions=r.AllowedInteraction?r.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(r);var g,m;g="Imported Annotation"===r.annotationAddMode?r.IsPrint:r.AnnotationSettings.isPrint,r.IsLock&&(r.AnnotationSettings.isLock=r.IsLock),p={shapeAnnotationType:"sticky",author:f,modifiedDate:r.ModifiedDate,subject:r.Subject,note:r.Note,opacity:r.Opacity,state:r.State,stateModel:r.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(r.Comments,r,f),review:{state:r.State,stateModel:r.StateModel,modifiedDate:r.ModifiedDate,author:f},pageNumber:t,bounds:{left:r.Bounds.X,top:r.Bounds.Y,width:r.Bounds.Width,height:r.Bounds.Height,right:r.Bounds.Right,bottom:r.Bounds.Bottom},annotName:r.AnnotName,color:r.color,annotationSelectorSettings:this.getSettings(r),customData:this.pdfViewer.annotation.getCustomData(r),annotationSettings:r.AnnotationSettings,allowedInteractions:r.allowedInteractions,isPrint:g,isCommentLock:r.IsCommentLock},r.AnnotationSelectorSettings=r.AnnotationSelectorSettings?r.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,m={author:f,modifiedDate:p.modifiedDate,annotName:p.annotName,pageIndex:t,bounds:{x:u.Left,y:u.Top,width:u.Width,height:u.Height},strokeColor:"transparent",stampStrokeColor:"",data:this.setImageSource(),shapeAnnotationType:"StickyNotes",subject:p.subject,notes:p.note,opacity:p.opacity,id:p.annotName,fillColor:p.color,annotationSelectorSettings:r.AnnotationSelectorSettings,annotationSettings:p.annotationSettings,annotationAddMode:r.annotationAddMode,isPrint:g,isCommentLock:p.isCommentLock},i?this.drawStickyNotes(u.Left,u.Top,u.Width,u.Height,t,m,i):(this.pdfViewer.add(m),this.drawStickyNotes(u.Left,u.Top,u.Width,u.Height,t,m),this.pdfViewer.annotationModule.storeAnnotations(t,p,"_annotations_sticky")),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(m.pageIndex,m.annotName,"StickyNotes",m.bounds,{opacity:m.opacity,borderColor:m.strokeColor,borderWidth:m.thickness,author:r.author,subject:r.subject,modifiedDate:r.modifiedDate,fillColor:m.fillColor,fontSize:m.fontSize,width:m.bounds.width,height:m.bounds.height,fontColor:m.fontColor,fontFamily:m.fontFamily,defaultText:m.dynamicText,fontStyle:m.font,textAlignment:m.textAlign})}}},s.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings&&(t=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings),t},s.prototype.drawStickyNotes=function(e,t,i,n,r,o,a){var h,l=this,d=null,p=new Image,u=this;p.onload=function(){var f,g,m="Guest"!==l.pdfViewer.annotationSettings.author?l.pdfViewer.annotationSettings.author:l.pdfViewer.stickyNotesSettings.author;if(o)h={author:o.author,modifiedDate:o.modifiedDate,annotName:o.annotName,data:p.src,bounds:{x:e,y:t,width:i,height:n},subject:o.subject,notes:o.notes,opacity:o.opacity,id:o.annotName,shapeAnnotationType:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",pageIndex:o.pageIndex,isPrint:o.isPrint};else{g=l.pdfViewer.annotation.createGUID(),(f=u.addComments("sticky",r+1))&&(document.getElementById(f).id=g);var y=l.pdfViewer.stickyNotesSettings.annotationSelectorSettings?l.pdfViewer.stickyNotesSettings.annotationSelectorSettings:l.pdfViewer.annotationSelectorSettings,b=l.pdfViewer.stickyNotesSettings.isPrint;h={bounds:{x:e,y:t,width:i,height:n},pageIndex:r,data:p.src,modifiedDate:l.getDateAndTime(),shapeAnnotationType:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",annotName:g,id:g,opacity:l.opacity,isPrint:b};var w=l.pdfViewer.stickyNotesSettings.isLock?l.pdfViewer.stickyNotesSettings.isLock:l.pdfViewer.annotationSettings.isLock,S=l.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);d={author:m,allowedInteractions:S,modifiedDate:l.getDateAndTime(),subject:"Sticky Note",shapeAnnotationType:"sticky",pageNumber:r,note:"",opacity:l.opacity,pathData:"",state:"",stateModel:"",color:"rgba(255,255,0)",comments:[],annotName:g,bounds:{left:e,top:t,width:i,height:n},review:{state:"",stateModel:"",modifiedDate:"",author:m},annotationSelectorSettings:y,customData:l.pdfViewer.annotationModule.getData("sticky"),annotationSettings:{isLock:w},isPrint:b,isCommentLock:!1}}if(o||(u.pdfViewer.annotation.addAction(r,null,h,"Addition","",h,h),u.pdfViewer.add(h),u.pdfViewer.annotationModule.storeAnnotations(r,d,"_annotations_sticky")),u.pdfViewerBase.isAddComment){var I={left:h.bounds.x,top:h.bounds.y,width:h.bounds.width,height:h.bounds.height};l.pdfViewerBase.updateDocumentEditedProperty(!0),l.pdfViewer.fireAnnotationAdd(h.pageIndex,h.annotName,"StickyNotes",I,{opacity:h.opacity,author:m,modifiedDate:h.modifiedDate,subject:h.shapeAnnotationType})}if(a)u.pdfViewer.renderDrawing(a,r);else{var T=document.getElementById(u.pdfViewer.element.id+"_annotationCanvas_"+r);u.pdfViewer.renderDrawing(T,r)}E.isDevice&&u.pdfViewer.select([h.id],h.annotationSelectorSettings),u.pdfViewerBase.isAddComment=!1},p.src=this.setImageSource()},s.prototype.setImageSource=function(){return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo="},s.prototype.createRequestForComments=function(){var e,t=this,r=t.pdfViewerBase.pageCount;t.isCommentsRendered||(20<r?r=20:t.isPageCommentsRendered=!0),this.isCommentsRendered?e={pageStartIndex:20..toString(),pageEndIndex:r.toString(),hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId}:(e={pageStartIndex:(0).toString(),pageEndIndex:r.toString(),hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId},t.isCommentsRendered=!0),this.pdfViewerBase.jsonDocumentId&&(e.documentId=this.pdfViewerBase.jsonDocumentId);var o=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderComments;t.commentsRequestHandler=new hs(t.pdfViewer),t.commentsRequestHandler.url=o,t.commentsRequestHandler.mode=!0,t.commentsRequestHandler.responseType="text",t.commentsRequestHandler.send(e),t.commentsRequestHandler.onSuccess=function(a){var l=a.data;if(!t.pdfViewerBase.checkRedirection(l)&&l){if("object"!=typeof l)try{"object"!=typeof(l=JSON.parse(l))&&(l=JSON.parse(l)),"object"!=typeof l&&(t.pdfViewerBase.onControlError(500,l,this.pdfViewer.serverActionSettings.renderComments),l=null)}catch{t.pdfViewerBase.onControlError(500,l,this.pdfViewer.serverActionSettings.renderComments),l=null}if(l){var d=!1;if(t.pdfViewerBase.annotationComments?t.pdfViewerBase.annotationComments=l.annotationDetails:(t.pdfViewerBase.annotationComments=l.annotationDetails,d=!0),l.annotationDetails&&l.uniqueId===t.pdfViewerBase.documentId){t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderComments,l),t.isAnnotationRendered=!0;var p=void 0;if(t.pdfViewerBase.documentAnnotationCollections)p=t.updateAnnotationsInDocumentCollections(t.pdfViewerBase.annotationComments,t.pdfViewerBase.documentAnnotationCollections);else{var u=t.pdfViewerBase.createAnnotationsCollection();p=t.updateAnnotationsInDocumentCollections(t.pdfViewerBase.annotationComments,u)}t.pdfViewerBase.annotationComments=p,t.pdfViewerBase.documentAnnotationCollections=p;for(var f=l.startPageIndex;f<l.endPageIndex;f++){var g=l.annotationDetails[f];t.pdfViewerBase.updateModifiedDateToLocalDate(g,"annotationOrder"),t.pdfViewerBase.updateModifiedDateToLocalDate(g,"freeTextAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(g,"measureShapeAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(g,"shapeAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(g,"signatureAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(g,"signatureInkAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(g,"stampAnnotations"),t.pdfViewerBase.updateModifiedDateToLocalDate(g,"stickyNotesAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(g,"textMarkupAnnotation")}for(var m=l.startPageIndex;m<l.endPageIndex;m++)l.annotationDetails[m]&&t.renderAnnotationCollections(l.annotationDetails[m],m,d);t.isPageCommentsRendered||(t.isPageCommentsRendered=!0,t.createRequestForComments())}}}},t.commentsRequestHandler.onFailure=function(a){this.pdfViewer.fireAjaxRequestFailed(a.status,a.statusText)},t.commentsRequestHandler.onError=function(a){t.pdfViewer.fireAjaxRequestFailed(a.status,a.statusText,t.pdfViewer.serverActionSettings.renderComments)}},s.prototype.updateAnnotationsInDocumentCollections=function(e,t){for(var i=0;i<this.pdfViewerBase.pageCount;i++)if(e[i]&&t[i]){if(e[i].textMarkupAnnotation&&0!==e[i].textMarkupAnnotation.length&&t[i].textMarkupAnnotation)for(var n=0;n<e[i].textMarkupAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].textMarkupAnnotation[n],t[i].textMarkupAnnotation);if(e[i].shapeAnnotation&&0!==e[i].shapeAnnotation.length&&t[i].shapeAnnotation)for(n=0;n<e[i].shapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].shapeAnnotation[n],t[i].shapeAnnotation);if(e[i].measureShapeAnnotation&&0!==e[i].measureShapeAnnotation.length&&t[i].measureShapeAnnotation)for(n=0;n<e[i].measureShapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].measureShapeAnnotation[n],t[i].measureShapeAnnotation);if(e[i].stampAnnotations&&0!==e[i].stampAnnotations.length&&t[i].stampAnnotations)for(n=0;n<e[i].stampAnnotations.length;n++)this.updateDocumentAnnotationCollections(e[i].stampAnnotations[n],t[i].stampAnnotations);if(e[i].stickyNotesAnnotation&&0!==e[i].stickyNotesAnnotation.length&&t[i].stickyNotesAnnotation)for(n=0;n<e[i].stickyNotesAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].stickyNotesAnnotation[n],t[i].stickyNotesAnnotation);if(e[i].freeTextAnnotation&&0!==e[i].freeTextAnnotation.length&&t[i].freeTextAnnotation)for(n=0;n<e[i].freeTextAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].freeTextAnnotation[n],t[i].freeTextAnnotation);if(e[i].signatureAnnotation&&0!==e[i].signatureAnnotation.length&&t[i].signatureAnnotation)for(n=0;n<e[i].signatureAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureAnnotation[n],t[i].signatureAnnotation);if(e[i].signatureInkAnnotation&&0!==e[i].signatureInkAnnotation.length&&t[i].signatureInkAnnotation)for(n=0;n<e[i].signatureInkAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureInkAnnotation[n],t[i].signatureInkAnnotation)}return t},s.prototype.updateDocumentAnnotationCollections=function(e,t){if(0===t.length)t.push(e);else{for(var i=!1,n=0;n<t.length;n++)if(e.AnnotName&&t[n].AnnotName&&e.AnnotName===t[n].AnnotName){i=!0;break}i||t.push(e)}},s.prototype.renderAnnotationCollections=function(e,t,i){for(var n=[],r=e.annotationOrder,o=0;o<r.length;o++){var a=r[parseInt(o.toString(),10)],l=a.AnnotType?a.AnnotType:a.AnnotationType;switch(this.pdfViewer.dateTimeFormat&&(a.ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(a.ModifiedDate)),n.push(a),l){case"textMarkup":this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(a,t));break;case"shape_measure":this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(a,t));break;case"shape":this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(a,t));break;case"sticky":this.updateCollections(this.updateStickyNotesAnnotationCollections(a,t));break;case"stamp":this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(a,t));break;case"Ink":this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(a,t));break;case"Text Box":this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(a,t))}}if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(var h=0;h<e.signatureAnnotation.length;h++)this.pdfViewer.dateTimeFormat&&(e.signatureAnnotation[h].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureAnnotation[h].ModifiedDate)),this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(e.signatureAnnotation[h],t),!0);if(this.pdfViewer.toolbarModule&&this.renderAnnotationComments(n,t),i)for(h=0;h<this.pdfViewerBase.renderedPagesList.length;h++)this.pdfViewerBase.renderedPagesList[h]===t&&this.pdfViewerBase.renderAnnotations(t,e,!1)},s.prototype.updateCollections=function(e,t){var n,i=!1;if((n=t?this.pdfViewer.signatureCollection:this.pdfViewer.annotationCollection)&&e)for(var r=0;r<n.length;r++)if(t){if(n[r].signatureName===e.signatureName){i=!0;break}}else if(n[r].annotationId===e.annotationId){i=!0;break}!i&&e&&(t?this.pdfViewer.signatureCollection.push(e):this.pdfViewer.annotationCollection.push(e))},s.prototype.renderAnnotationComments=function(e,t){if(t+=1,e&&0!==e.length){this.createPageAccordion(t);for(var i=0;i<e.length;i++)e[i].AnnotName&&1===e[i].AnnotName.split("freeText").length&&this.createCommentControlPanel(e[i],t);var n=document.querySelectorAll(".e-pv-new-comments-div");if(n)for(var r=0;r<n.length;r++)n[r].style.display="none"}},s.prototype.initializeAcccordionContainer=function(){var e=F("div",{id:this.pdfViewer.element.id+"_commentsPanelText",className:"e-pv-comments-panel-text"});X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoCommentsYet").then(function(i){e.textContent=i}):e.textContent=this.pdfViewer.localeObj.getConstant("No Comments Yet"),this.updateCommentPanelTextTop(),this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(e),this.accordionContentContainer=F("div",{id:this.pdfViewer.element.id+"_accordionContentContainer",className:"e-pv-accordion-content-container"}),this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(this.accordionContentContainer),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!1)},s.prototype.updateCommentPanelTextTop=function(){var e=document.getElementById(this.pdfViewer.element.id+"_commentsPanelText");this.pdfViewerBase.navigationPane.commentPanelContainer&&this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight&&"none"!==e.style.display&&(e.style.paddingTop=this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight/2-47+"px",e.style.paddingLeft=this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth/3+"px")},s.prototype.createPageAccordion=function(e){if(null===document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e))return this.accordionContent=F("div",{id:this.pdfViewer.element.id+"_accordioncontent"+e}),this.accordionContent.style.zIndex="1000",this.accordionPageContainer=F("div",{id:this.pdfViewer.element.id+"_accordionPageContainer"+e,className:"e-pv-accordion-page-container"}),this.accordionPageContainer.appendChild(this.accordionContent),this.pdfViewerBase.viewerMainContainer.appendChild(this.accordionPageContainer),this.accordionContainer=F("div",{id:this.pdfViewer.element.id+"_accordionContainer"+e,className:"e-pv-accordion-container"}),new sye({items:[{header:this.pdfViewer.localeObj.getConstant("Page")+" "+e,expanded:!0,content:"#"+this.pdfViewer.element.id+"_accordioncontent"+e}]}).appendTo(this.accordionContainer),this.accordionContainer.style.order="pageIndex",this.alignAccordionContainer(this.accordionContainer,e),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="none"),document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer")&&(document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer").style.display="block"),this.accordionContainer},s.prototype.alignAccordionContainer=function(e,t){var i=!0;if(this.accordionContentContainer){if(this.isAccordionContainer)this.accordionContentContainer.appendChild(e),i=!1;else for(var n=1;n<=this.pdfViewerBase.pageCount;n++){var r=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+n);if(r&&t<n){this.accordionContentContainer.insertBefore(e,r),i=!1;break}}i&&(this.accordionContentContainer.appendChild(e),i=!1),this.isAccordionContainer=!1}},s.prototype.updateCommentPanelScrollTop=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e);t&&(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=t.offsetTop+t.clientTop-35)},s.prototype.getButtonState=function(e,t){t.addEventListener("keyup",function(i){e.element.querySelector(".e-btn-save")&&(""!==i.srcElement.value||""!=i.srcElement.defaultValue)&&i.srcElement.defaultValue!==i.srcElement.value&&(e.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!1)})},s.prototype.createCommentControlPanel=function(e,t,i,n,r){var o=document.getElementById(this.pdfViewer.element.id+"_accordioncontent"+t);if(o){var a=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);a&&a.ej2_instances[0].expandItem(!0),this.commentsContainer=F("div",{id:this.pdfViewer.element.id+"commentscontainer_"+t+"_"+this.commentsCount,className:"e-pv-comments-container"}),this.commentsContainer.accessKey=t.toString()+"_"+this.commentsCount;var l=!1;if(e){if(this.commentsContainer.id=e.AnnotName,e.AnnotName)for(var h=0;h<o.childElementCount;h++)if(o.children[h].id===e.AnnotName){l=!0,r&&(document.getElementById(o.children[h].id).remove(),l=!1);break}this.commentsContainer.setAttribute("name",e.Name&&"freeText"===e.Name?"freeText":e.AnnotType)}i&&this.commentsContainer.setAttribute("name",i),this.commentsContainer.addEventListener("mousedown",this.commentsAnnotationSelect.bind(this));var p=F("div",{id:this.pdfViewer.element.id+"_commentdiv_"+t+"_"+this.commentsCount,className:"e-pv-comments-div"});this.commentsCount=this.commentsCount+1,this.commentsContainer.appendChild(p),this.updateCommentPanelScrollTop(t),l||o.appendChild(this.commentsContainer);var u=void 0;e?("null"===(u=this.commentsContainer.getAttribute("name"))&&(u=e.AnnotationType),this.createTitleContainer(p,u,t,e.Subject,e.ModifiedDate,e.Author)):(u=this.commentsContainer.getAttribute("name"),this.createTitleContainer(p,u,t,n));var f=F("div",{id:this.pdfViewer.element.id+"_commenttextbox_"+t+"_"+this.commentsCount,className:"e-pv-comment-textbox"}),g=new ry({mode:"Inline",type:"Text",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a comment")+".."},emptyText:"",editableOn:"EditIconClick",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});e&&(!c(e.Note)||!c(e.Text))&&(g.created=function(){setTimeout(function(){g.element.querySelector(".e-editable-value").innerText=c(e.Note)?c(e.Text)?"":e.Text:e.Note})},g.beginEdit=function(){g.value=g.valueEle.innerText}),g.appendTo(f);var m=document.querySelectorAll(".e-editable-inline");for(h=0;h<m.length;h++)m[h].style.display="none";if(!e&&"freeText"!==i&&(g.enableEditMode=!0),this.getButtonState(g,f),g.actionSuccess=this.createCommentDiv.bind(this,g),p.appendChild(f),e){if(g.value=c(e.Note)?c(e.Text)?"":e.Text:e.Note,this.checkIslockProperty(e)&&null==e.Comments&&this.createCommentDiv(this.commentsContainer),"freeText"===e.Name&&(g.value=e.MarkupText),e.State){var b=F("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),w=F("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),S=F("span",{id:this.pdfViewer.element.id+"status_icon"});w.appendChild(S),b.appendChild(w),p.appendChild(b),this.updateStatusContainer(e.State,S,w,b)}if(e.Comments){for(h=0;h<e.Comments.length;h++)this.renderComments(e.Comments[h],this.commentsContainer);" "!==e.Note&&""!==e.Note&&null!==e.Note&&this.createCommentDiv(this.commentsContainer)}}return this.isNewcommentAdded=!0,p.addEventListener("click",this.commentsDivClickEvent.bind(this)),p.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),p.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),p.addEventListener("mouseout",this.commentDivMouseLeave.bind(this)),p.addEventListener("focusout",this.commentDivMouseLeave.bind(this)),f.addEventListener("dblclick",this.openEditorElement.bind(this)),f.addEventListener("focusin",this.commentDivFocus.bind(this)),this.commentsContainer.id}return""},s.prototype.commentDivFocus=function(e){if(!c(e.target)&&!c(this.pdfViewer.freeTextSettings.defaultText)&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&e.target.value===this.pdfViewer.freeTextSettings.defaultText&&e.target.select(),this.isNewcommentAdded){var t=this,i=this.pdfViewerBase.currentPageNumber;setTimeout(function(){t.updateScrollPosition(i)},500)}else null!==e.relatedTarget&&e.relatedTarget.id===this.pdfViewer.element.id+"_viewerContainer"&&(e.preventDefault(),e.target.blur())},s.prototype.updateScrollPosition=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e);if(t&&this.isNewcommentAdded){var i=0,n=document.querySelectorAll(".e-editable-inline");n[0]&&(i=n[0].getBoundingClientRect().height);var r=t.offsetTop+t.clientTop+i;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop<r&&(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=r),this.isNewcommentAdded=!1}},s.prototype.updateCommentsScrollTop=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewerBase.currentPageNumber),i=document.querySelector(".e-pv-comments-border"),n=0;t&&i&&(n=i.getBoundingClientRect().height,this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=e?t.offsetTop+i.offsetTop+n/4:t.offsetTop+i.offsetTop-70)},s.prototype.createCommentDiv=function(e){var i,n,t=this,r=F("div",{id:this.pdfViewer.element.id+"_newcommentdiv_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-new-comments-div"});e.localName?i=e:(i=e.valueEle.parentElement.parentElement.parentElement.parentElement,n=e.valueEle.parentElement.parentElement.previousSibling.childNodes[1]);var o=new ry({mode:"Inline",type:"Text",value:"",editableOn:"Click",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},emptyText:this.pdfViewer.localeObj.getConstant("Add a reply"),saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});if(o.appendTo(r),r.lastChild.firstChild.click(),this.getButtonState(o,r),e.valueEle){if(null!=e.value&&" "!==e.value){if(this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)this.modifyTextProperty(e.value,e.prevValue,e.valueEle.parentNode.parentNode.parentNode.parentNode.id);else try{this.modifyTextProperty(e.value,e.prevValue,e.valueEle.parentNode.parentNode.parentNode.parentNode.id)}catch{this.modifyTextProperty(e.value,e.prevValue)}this.updateModifiedDate(n)}1===e.valueEle.parentElement.parentElement.parentElement.parentElement.childElementCount&&null!=e.value&&""!==e.value&&" "!==e.value&&(i.appendChild(r),setTimeout(function(){t.updateCommentsScrollTop(!0)},50))}else i.appendChild(r),setTimeout(function(){t.updateCommentsScrollTop(!0)},50);o.actionSuccess=this.saveCommentDiv.bind(this,o)},s.prototype.saveCommentDiv=function(e,t){var i,n,r,o;if(t.name&&""!==e.value?(i=e.valueEle.parentElement.parentElement.parentElement,r=e.valueEle.parentElement.parentElement,o=e.value):(r=(i=e).lastChild,o=t),i&&r){i.removeChild(r);var a=F("div",{id:this.pdfViewer.element.id+"_replytextbox_"+this.commentsCount+"_"+this.commentsreplyCount});this.commentsreplyCount=this.commentsreplyCount+1;var l=F("div",{id:this.pdfViewer.element.id+"replyDiv_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-reply-div"});l.id=this.pdfViewer.annotation.createGUID(),n=this.getAuthorName(this.pdfViewer.selectedItems.annotations[0],i),this.createReplyDivTitleContainer(l,null,n),l.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),l.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),l.addEventListener("click",this.commentDivOnSelect.bind(this)),a.addEventListener("dblclick",this.openEditorElement.bind(this)),l.style.border="1px",l.style.borderColor="black",l.style.zIndex=1002;var h=new ry({mode:"Inline",type:"Text",emptyText:"",editableOn:"EditIconClick",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},value:o,saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"}});h.created=function(){setTimeout(function(){h.element.querySelector(".e-editable-value").innerText=o})},h.beginEdit=function(){h.value=h.valueEle.innerText},h.appendTo(a),h.actionSuccess=this.modifyProperty.bind(this,h),l.appendChild(a),l.style.paddingLeft="24px",i.appendChild(l),this.getButtonState(h,a),l.addEventListener("click",this.commentsDivClickEvent.bind(this)),l.addEventListener("dblclick",this.commentsDivDoubleClickEvent.bind(this)),this.createCommentDiv(l.parentElement),this.modifyCommentsProperty(o,l.id,i.id)}},s.prototype.renderComments=function(e,t,i,n,r){var o,a=F("div",{id:this.pdfViewer.element.id+"_replytextbox_"+this.commentsCount+"_"+this.commentsreplyCount});this.commentsreplyCount=this.commentsreplyCount+1;var l=F("div",{id:"replyDiv_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-reply-div"});i?(l.id=e.annotName,o=e.author):(l.id=e.AnnotName,o=e.Author),l.style.border="1px",l.style.borderColor="black",o||(o=t.getAttribute("author")),this.createReplyDivTitleContainer(l,i?void 0!==e.modifiedDate?e.modifiedDate:null:e.ModifiedDate,o),l.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),l.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),l.addEventListener("click",this.commentDivOnSelect.bind(this)),a.addEventListener("dblclick",this.openEditorElement.bind(this));var h=new ry({mode:"Inline",type:"Text",emptyText:"",editableOn:"EditIconClick",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},value:"",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"}});if(h.value=i?e.note:e.Note,h.created=function(){setTimeout(function(){h.element.querySelector(".e-editable-value").innerText=i?e?e.note:"":e?e.Note:""})},h.beginEdit=function(){h.value=h.valueEle.innerText},h.appendTo(a),l.appendChild(a),i&&(e.State=e.state),e.State){var d=F("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),p=F("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),u=F("span",{id:this.pdfViewer.element.id+"status_icon"});p.appendChild(u),d.appendChild(p),l.appendChild(d),this.updateStatusContainer(e.State,u,p,d)}if(l.style.paddingLeft="24px",this.getButtonState(h,a),i)if(r)t.appendChild(l);else{var f=document.getElementById(n);e.position?f.insertBefore(l,f.childNodes[e.position]):f&&(f.childElementCount>1?f.insertBefore(l,f.childNodes[f.childElementCount-1]):t.appendChild(l))}else t.appendChild(l);l.addEventListener("click",this.commentsDivClickEvent.bind(this)),l.addEventListener("dblclick",this.commentsDivDoubleClickEvent.bind(this)),h.actionSuccess=this.modifyProperty.bind(this,h)},s.prototype.createCommentsContainer=function(e,t,i){var n=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);if(!n){var r=document.getElementById(this.pdfViewer.element.id+"_accordionPageContainer"+t);r&&r.parentElement.removeChild(r),(n=this.createPageAccordion(t))&&n.ej2_instances[0].expandItem(!0)}var o=document.getElementById(this.pdfViewer.element.id+"_accordioncontent"+t);this.commentsContainer=F("div",{id:this.pdfViewer.element.id+"commentscontainer_"+t+"_"+this.commentsCount,className:"e-pv-comments-container"}),this.commentsContainer.accessKey=t.toString()+"_"+this.commentsCount,e&&(this.commentsContainer.id=e.annotName?e.annotName:e.annotationId),this.commentsContainer.addEventListener("mousedown",this.commentsAnnotationSelect.bind(this));var a=F("div",{id:this.pdfViewer.element.id+"_commentdiv_"+t+"_"+this.commentsCount,className:"e-pv-comments-div"});if(this.commentsCount=this.commentsCount+1,this.commentsContainer.appendChild(a),this.updateCommentPanelScrollTop(t),e&&o&&(e.position||0===e.position?o.insertBefore(this.commentsContainer,o.children[e.position]):o.appendChild(this.commentsContainer)),e&&o)if(e.indent)this.commentsContainer.setAttribute("name","shape_measure"),this.createTitleContainer(a,"shape_measure",t,e.subject,e.modifiedDate,e.author);else if("sticky"===e.shapeAnnotationType||"stamp"===e.shapeAnnotationType){var l=this.createTitleContainer(a,e.shapeAnnotationType,t,null,e.modifiedDate,e.author);this.commentsContainer.setAttribute("name",l),"sticky"===l&&(i||this.addStickyNotesAnnotations(t-1,e))}else"textMarkup"===e.shapeAnnotationType?(this.commentsContainer.setAttribute("name","textMarkup"),this.createTitleContainer(a,"textMarkup",t,e.subject,e.modifiedDate,e.author)):"FreeText"===e.shapeAnnotationType?(e.note=e.dynamicText,this.commentsContainer.setAttribute("name","freetext"),this.createTitleContainer(a,"freeText",t,e.subject,e.modifiedDate)):"Ink"===e.shapeAnnotationType?(e.note=e.dynamicText,this.commentsContainer.setAttribute("name","ink"),this.createTitleContainer(a,"ink",t,e.subject,e.modifiedDate)):(this.commentsContainer.setAttribute("name","shape"),this.createTitleContainer(a,"shape",t,"Line"===e.shapeAnnotationType?e.subject:e.shapeAnnotationType,e.modifiedDate,e.author));var h=F("div",{id:this.pdfViewer.element.id+"_commenttextbox_"+t+"_"+this.commentsCount,className:"e-pv-comment-textbox"}),d=new ry({mode:"Inline",type:"Text",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a comment")+".."},emptyText:"",editableOn:"EditIconClick",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});d.appendTo(h);for(var p=document.querySelectorAll(".e-editable-inline"),u=0;u<p.length;u++)p[u].style.display="none";if(h.addEventListener("keydown",function(y){d.element.querySelector(".e-btn-save")&&(d.element.querySelector(".e-btn-save").ej2_instances[0].disabled=""===y.srcElement.value)}),d.actionSuccess=this.createCommentDiv.bind(this,d),a.appendChild(h),e){if(d.value=e.note,e.state){var f=F("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),g=F("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),m=F("span",{id:this.pdfViewer.element.id+"status_icon"});g.appendChild(m),f.appendChild(g),a.appendChild(f),this.updateStatusContainer(e.state,m,g,f)}if(e.comments){for(u=0;u<e.comments.length;u++)this.renderComments(e.comments[u],this.commentsContainer,!0,null,!0);e.comments.length>0&&this.createCommentDiv(this.commentsContainer)}}return a.addEventListener("click",this.commentsDivClickEvent.bind(this)),a.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),a.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),a.addEventListener("mouseout",this.commentDivMouseLeave.bind(this)),a.addEventListener("focusout",this.commentDivMouseLeave.bind(this)),h.addEventListener("dblclick",this.openEditorElement.bind(this)),this.commentsContainer.id},s.prototype.modifyProperty=function(e){var t=e.element.parentElement.id,i=e.element.parentElement.parentElement.id;this.updateModifiedDate(e.element.previousSibling.firstChild),this.modifyCommentsProperty(e.value,t,i,e.prevValue)},s.prototype.createTitleContainer=function(e,t,i,n,r,o,a){var p,l=this.getAnnotationType(t),h=F("div",{id:this.pdfViewer.element.id+"_commentTitleConatiner_"+i+"_"+this.commentsCount,className:"e-pv-comment-title-container"}),d=F("span",{id:this.pdfViewer.element.id+"_commenttype_icon"+i+"_"+this.commentsCount});d.style.opacity="0.6",this.updateCommentIcon(d,l,n),p=o||this.pdfViewer.annotationModule.updateAnnotationAuthor(l,n),d.style.padding="8px",d.style.cssFloat="left",h.appendChild(d);var u=F("div",{id:this.pdfViewer.element.id+"_commentTitle_"+i+"_"+this.commentsCount,className:"e-pv-comment-title"});u.textContent=r?p+" - "+this.convertUTCDateToLocalDate(r):p+" - "+this.setModifiedDate(),h.appendChild(u),this.moreButtonId=this.pdfViewer.element.id+"_more-options_"+this.commentsCount+"_"+this.commentsreplyCount;var f=F("button",{id:this.moreButtonId,className:"e-pv-more-options-button e-btn",attrs:{tabindex:"-1"}});f.style.visibility="hidden",f.style.zIndex="1001",f.setAttribute("type","button"),f.setAttribute("aria-label","more button");var g=F("span",{id:this.pdfViewer.element.id+"_more-options_icon",className:"e-pv-more-icon e-pv-icon"});f.appendChild(g),g.style.opacity="0.87",h.appendChild(f),e.appendChild(h);var m=e.parentElement;if(m){var y=this.pdfViewer.annotationModule.updateAnnotationAuthor(l,n);m.setAttribute("author",y)}return this.isCreateContextMenu||this.createCommentContextMenu(),this.isCreateContextMenu=!0,h.addEventListener("dblclick",this.openTextEditor.bind(this)),f.addEventListener("mouseup",this.moreOptionsClick.bind(this)),l},s.prototype.createReplyDivTitleContainer=function(e,t,i){var n=F("div",{id:this.pdfViewer.element.id+"_replyTitleConatiner_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-reply-title-container"}),r=F("div",{id:this.pdfViewer.element.id+"_replyTitle_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-reply-title"});r.textContent=t?i+" - "+this.setExistingAnnotationModifiedDate(t):i+" - "+this.setModifiedDate(),n.appendChild(r),this.moreButtonId=this.pdfViewer.element.id+"_more-options_"+this.commentsCount+"_"+this.commentsreplyCount;var o=F("button",{id:this.moreButtonId,className:"e-pv-more-options-button e-btn",attrs:{tabindex:"-1"}});o.style.visibility="hidden",o.style.zIndex="1001",o.setAttribute("type","button"),o.setAttribute("aria-label","more button");var a=F("span",{id:this.pdfViewer.element.id+"_more-options_icon",className:"e-pv-more-icon e-pv-icon"});o.appendChild(a),a.style.opacity="0.87",n.appendChild(o),e.appendChild(n),n.addEventListener("dblclick",this.openTextEditor.bind(this)),o.addEventListener("mouseup",this.moreOptionsClick.bind(this))},s.prototype.updateCommentIcon=function(e,t,i){"sticky"===t?e.className="e-pv-comment-icon e-pv-icon":"stamp"===t?e.className="e-pv-stamp-icon e-pv-icon":"shape"===t?e.className="Line"===i?"e-pv-shape-line-icon e-pv-icon":"LineWidthArrowHead"===i||"Arrow"===i?"e-pv-shape-arrow-icon e-pv-icon":"Circle"===i||"Ellipse"===i||"Oval"===i?"e-pv-shape-circle-icon e-pv-icon":"Rectangle"===i||"Square"===i?"e-pv-shape-rectangle-icon e-pv-icon":"Polygon"===i?"e-pv-shape-pentagon-icon e-pv-icon":"e-pv-annotation-shape-icon e-pv-icon":"measure"===t?e.className="Distance"===i||"Distance calculation"===i?"e-pv-calibrate-distance-icon e-pv-icon":"Perimeter"===i||"Perimeter calculation"===i?"e-pv-calibrate-perimeter-icon e-pv-icon":"Radius"===i||"Radius calculation"===i?"e-pv-calibrate-radius-icon e-pv-icon":"Area"===i||"Area calculation"===i?"e-pv-calibrate-area-icon e-pv-icon":"Volume"===i||"Volume calculation"===i?"e-pv-calibrate-volume-icon e-pv-icon":"e-pv-annotation-calibrate-icon e-pv-icon":"textMarkup"===t?e.className="Highlight"===i?"e-pv-highlight-icon e-pv-icon":"Underline"===i?"e-pv-underline-icon e-pv-icon":"Strikethrough"===i?"e-pv-strikethrough-icon e-pv-icon":"e-pv-annotation-icon e-pv-icon":"freeText"===t?e.className="e-pv-freetext-icon e-pv-icon":("ink"===t||"Ink"===i)&&(e.className="e-pv-inkannotation-icon e-pv-icon")},s.prototype.updateStatusContainer=function(e,t,i,n){"Accepted"===e?(i.style.backgroundColor="rgb(24,169,85)",t.className="e-pv-accepted-icon"):"Completed"===e?(i.style.backgroundColor="rgb(0,122,255)",t.className="e-pv-completed-icon"):"Cancelled"===e?(i.style.backgroundColor="rgb(245,103,0)",t.className="e-pv-cancelled-icon"):"Rejected"===e?(i.style.backgroundColor="rgb(255,59,48)",t.className="e-pv-rejected-icon"):(t.className="",n.parentElement.removeChild(n))},s.prototype.updateAccordionContainer=function(e){var t=parseInt(e.accessKey.split("_")[0]),i=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);i&&i.parentElement.removeChild(i);var n=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer");n&&0===n.childElementCount&&(n.style.display="none",document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!1),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="block",this.updateCommentPanelTextTop()))},s.prototype.createCommentContextMenu=function(){this.commentContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Edit")},{text:this.pdfViewer.localeObj.getConstant("Delete Context")},{text:this.pdfViewer.localeObj.getConstant("Set Status"),items:[{text:this.pdfViewer.localeObj.getConstant("None")},{text:this.pdfViewer.localeObj.getConstant("Accepted")},{text:this.pdfViewer.localeObj.getConstant("Cancelled")},{text:this.pdfViewer.localeObj.getConstant("Completed")},{text:this.pdfViewer.localeObj.getConstant("Rejected")}]}];var e=F("ul",{id:this.pdfViewer.element.id+"_comment_context_menu"});this.pdfViewer.element.appendChild(e),this.commentMenuObj=new dp({target:"#"+this.moreButtonId,items:this.commentContextMenu,beforeOpen:this.contextMenuBeforeOpen.bind(this),select:this.commentMenuItemSelect.bind(this)}),this.pdfViewer.enableRtl&&(this.commentMenuObj.enableRtl=!0),this.commentMenuObj.appendTo(e),this.commentMenuObj.animationSettings.effect=E.isDevice&&!this.pdfViewer.enableDesktopMode?"ZoomIn":"SlideDown"},s.prototype.contextMenuBeforeOpen=function(e){var t,i=document.querySelectorAll(".e-pv-more-options-button");if(i)for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);this.checkIslockProperty(t)?(this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Edit")],!1),this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!1)):(this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Edit")],!0),this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0))},s.prototype.commentMenuItemSelect=function(e){var t,i=document.querySelectorAll(".e-pv-more-options-button");if(i){for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Edit"):var r=document.querySelectorAll(".e-pv-new-comments-div");for(n=0;n<r.length;n++)r[n].style.display="none";t.ej2_instances[0].enableEditMode=!0;break;case this.pdfViewer.localeObj.getConstant("Delete Context"):t.parentElement.parentElement.firstChild===t.parentElement?this.pdfViewer.annotationModule.deleteAnnotation():this.modifyCommentDeleteProperty(t.parentElement.parentElement,t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Set Status"):break;case this.pdfViewer.localeObj.getConstant("Accepted"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var o=F("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),a=F("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),l=F("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-accepted-icon"});a.style.backgroundColor="rgb(24,169,85)",a.appendChild(l),o.appendChild(a),t.parentElement.appendChild(o),this.modifyStatusProperty("Accepted",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Completed"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var h=F("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),d=F("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),p=F("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-completed-icon"});d.style.backgroundColor="rgb(0,122,255)",d.appendChild(p),h.appendChild(d),t.parentElement.appendChild(h),this.modifyStatusProperty("Completed",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Cancelled"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var u=F("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),f=F("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),g=F("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-cancelled-icon"});f.style.backgroundColor="rgb(245,103,0)",f.appendChild(g),u.appendChild(f),t.parentElement.appendChild(u),this.modifyStatusProperty("Cancelled",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Rejected"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var m=F("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),y=F("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),b=F("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-rejected-icon"});y.style.backgroundColor="rgb(255,59,48)",y.appendChild(b),m.appendChild(y),t.parentElement.appendChild(m),this.modifyStatusProperty("Rejected",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("None"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove(),this.modifyStatusProperty("None",t.parentElement)}}},s.prototype.moreOptionsClick=function(e,t){if("block"!==document.getElementById(this.pdfViewer.element.id+"_comment_context_menu").style.display&&(this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj),this.commentMenuObj.open(e.clientY,e.clientX,e.currentTarget)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var i=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(i)}},s.prototype.openTextEditor=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";if(this.checkIslockProperty(e.currentTarget.nextSibling))e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!1;else if(e.currentTarget.parentElement.parentElement){var r=this.checkAnnotationSettings(e.currentTarget.parentElement.parentElement.id);if(r){var o=this.findAnnotationObject(e.currentTarget.parentElement.parentElement.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",o)&&(r=!1)}r||(e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!0)}else e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!0},s.prototype.checkIslockProperty=function(e){var i,t=this.pdfViewer.annotationCollection;if(e.IsCommentLock)return!0;this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?i=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]&&(i=this.pdfViewer.selectedItems.annotations[0]);for(var n=0;n<t.length;n++){if(!0===t[n].isCommentLock&&(e.textContent===(t[n].note?t[n].note:t[n].notes)||t[n].dynamicText===e.textContent))return!0;for(var o=0;o<t[n].comments.length;o++)if(i&&t[n].annotationId===i.annotName&&!0===t[n].comments[o].isLock&&e.textContent===t[n].comments[o].note)return!0}return!1},s.prototype.openEditorElement=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";if(this.checkIslockProperty(e.currentTarget))e.currentTarget.ej2_instances[0].enableEditMode=!1;else if(e.currentTarget.parentElement.parentElement){var r=this.checkAnnotationSettings(e.currentTarget.parentElement.parentElement.id);if(r){var o=this.findAnnotationObject(e.currentTarget.parentElement.parentElement.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",o)&&(r=!1)}r||(e.currentTarget.ej2_instances[0].enableEditMode=!(!c(this.pdfViewer.selectedItems)&&this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].isReadonly))}else e.currentTarget.ej2_instances[0].enableEditMode=!0},s.prototype.commentsDivClickEvent=function(e){var t=this.findAnnotationObject(e.currentTarget.parentElement.id),i=this.checkAnnotationSettings(e.currentTarget.parentElement.id);if(i&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",t)&&(i=!1),!i){var n=!1;if(this.isSetAnnotationType=0===e.clientX&&0===e.clientY,"e-pv-more-icon e-pv-icon"===e.target.className)return null;for(var r=document.querySelectorAll(".e-pv-more-options-button"),o=0;o<r.length;o++)r[o].style.visibility="hidden";"none"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display&&this.pdfViewer.annotationModule.showCommentsPanel(),e.currentTarget.parentElement.classList.contains("e-pv-comments-border")&&(n=!0),e.currentTarget.firstChild.lastChild.style.visibility="visible";var a=document.querySelectorAll(".e-pv-comments-border");if(a)for(var l=0;l<a.length;l++)a[l].classList.remove("e-pv-comments-border");e.currentTarget.parentElement.classList.add("e-pv-comments-border");var h=document.querySelectorAll(".e-pv-new-comments-div");for(o=0;o<h.length;o++)h[o].style.display="none";var d=e.currentTarget.parentElement.lastChild,p=e.currentTarget.parentElement;if(d){if(d.style.display="block",d.querySelector(".e-editable-inline"))for(this.isEditableElement||(d.querySelector(".e-editable-inline").style.display="block"),o=0;o<p.childElementCount;o++){var f=p.childNodes[o].querySelector(".e-editable-inline");f&&""===f.style.display&&(d.style.display="none",d.querySelector(".e-editable-inline").style.display="none")}this.isSetAnnotationType&&(n||this.updateCommentsScrollTop())}if(1===e.currentTarget.parentElement.childElementCount)if(this.pdfViewer.enableShapeLabel){var g=e.currentTarget.parentElement.getAttribute("name");e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!this.isSetAnnotationType||"shape"!==g}else e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!0;var m=void 0;e&&e.currentTarget&&e.currentTarget.childNodes[1]&&(m=e.currentTarget.childNodes[1].ej2_instances[0]),e.currentTarget&&e.currentTarget.id&&m&&(t&&t.isCommentLock&&(m.enableEditMode=!1,this.createCommentDiv(e.currentTarget)),this.pdfViewer.fireCommentSelect(e.currentTarget.id,e.currentTarget.childNodes[1].ej2_instances[0].value,t)),this.commentDivOnSelect(e),e.preventDefault()}},s.prototype.commentsDivDoubleClickEvent=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";this.checkIslockProperty(e.currentTarget.children[1])?2===e.currentTarget.childElementCount?e.currentTarget.lastChild.ej2_instances[0].enableEditMode=!1:e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!1:e.currentTarget&&(this.checkAnnotationSettings(e.currentTarget.parentElement.id)||(2===e.currentTarget.childElementCount?e.currentTarget.lastChild.ej2_instances[0].enableEditMode=!0:e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!0))},s.prototype.commentDivOnSelect=function(e){for(var t=document.querySelectorAll(".e-pv-comments-select"),i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-select");var n=document.getElementById(e.currentTarget.id);if(n&&(n.classList.remove("e-pv-comments-hover"),n.classList.remove("e-pv-comments-leave"),n.classList.add("e-pv-comments-select"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var r=document.getElementById(e.currentTarget.nextSibling.id);r.classList.remove("e-pv-comments-hover"),r.classList.remove("e-pv-comments-leave"),r.classList.add("e-pv-comments-select")}},s.prototype.commentDivMouseOver=function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-select"),t.classList.remove("e-pv-comments-leave"),t.classList.add("e-pv-comments-hover"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-select"),i.classList.remove("e-pv-comments-leave"),i.classList.add("e-pv-comments-hover")}},s.prototype.commentDivMouseLeave=function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-hover"),t.classList.remove("e-pv-comments-select"),t.classList.add("e-pv-comments-leave"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-hover"),i.classList.remove("e-pv-comments-select"),i.classList.add("e-pv-comments-leave")}},s.prototype.drawIcons=function(e){if(this.pdfViewerBase.isCommentIconAdded){var t=this.pdfViewer.annotation.getEventPageNumber(e),i=this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect(),n=this.pdfViewerBase.getZoomFactor();this.pdfViewer.annotationModule.isFormFieldShape=!1,this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((e.clientX-i.left)/n,(e.clientY-i.top)/n,30,30,t,null),this.pdfViewerBase.isCommentIconAdded=!1;var r=document.getElementById(this.pdfViewer.element.id+"_comment");if(X()&&(r=r.children[0]),r&&r.classList.contains("e-pv-select"))r.classList.remove("e-pv-select");else{var o=document.getElementById(this.pdfViewer.element.id+"_commentIcon");o&&(o.className=this.pdfViewer.enableRtl?"e-pv-comment-icon e-pv-icon e-icon-left e-right":"e-pv-comment-icon e-pv-icon e-icon-left")}}},s.prototype.addComments=function(e,t,i){return document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t)||this.pdfViewer.annotation.stickyNotesAnnotationModule.createPageAccordion(t),this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null,t,e,i)},s.prototype.commentsAnnotationSelect=function(e){var t=e.currentTarget,i=this.checkAnnotationSettings(t.id);if(i){var n=this.findAnnotationObject(t.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(i=!1)}if(!i){if(t.classList.contains("e-pv-comments-border")){for(var r=document.querySelectorAll(".e-pv-comments-div"),o=0;o<r.length;o++)r[o].style.minHeight="60px";1===e.currentTarget.childElementCount&&e.currentTarget.childNodes[0].querySelector(".e-editable-inline")&&(e.currentTarget.childNodes[0].style.minHeight=e.currentTarget.childNodes[0].clientHeight)}if("e-pv-more-icon e-pv-icon"===e.target.className||"e-pv-more-options-button e-btn"===e.target.className)return e.preventDefault(),null;var a=parseInt(t.accessKey.split("_")[0]);if(t.classList.contains("e-pv-comments-border"))this.isSetAnnotationType=!0;else{var l=document.querySelectorAll(".e-pv-comments-border");if(l)for(o=0;o<l.length;o++)l[o].classList.remove("e-pv-comments-border");(r=document.getElementById(t.id))&&(document.querySelectorAll('.e-pv-more-options-button[style*="visibility: visible"]').forEach(function(b){return b.style.visibility="hidden"}),"e-editable-value-wrapper"===e.target.className?e.target.parentElement.parentElement.firstChild.lastChild.style.visibility="visible":"e-pv-reply-title"===e.target.className||"e-pv-comment-title"===e.target.className?e.target.parentElement.lastChild.style.visibility="visible":"e-editable-value"===e.target.className&&(e.target.parentElement.parentElement.parentElement.firstChild.lastChild.style.visibility="visible"),r.classList.add("e-pv-comments-border"));var h=document.querySelectorAll(".e-pv-new-comments-div");for(o=0;o<h.length;o++)h[o].style.display="none";if(r){var d=r.querySelector(".e-pv-new-comments-div");d&&(d.style.display="block")}var p=t.lastChild;if(this.isEditableElement=!1,p.querySelector(".e-editable-inline")){p.style.display="block",p.querySelector(".e-editable-inline").style.display="block";for(var u=0;u<t.childElementCount;u++){var g=t.childNodes[u].querySelector(".e-editable-inline");g&&""===g.style.display&&p.classList.contains("e-pv-new-comments-div")&&(this.isEditableElement=!0,p.style.display="none",p.querySelector(".e-editable-inline").style.display="none")}}this.isSetAnnotationType=!1,1===e.currentTarget.childElementCount&&(e.currentTarget.childNodes[0].childNodes[1].ej2_instances[0].enableEditMode=!0)}if(!this.isSetAnnotationType){this.pdfViewer.navigation&&this.pdfViewer.navigationModule.goToPage(a);var m=t.getAttribute("name");("null"===m||"Ink"===m)&&(m="ink"),this.isCommentsSelected=!1,this.setAnnotationType(t.id,m,a),this.isCommentsSelected||(this.selectAnnotationObj={id:t.id,annotType:m,pageNumber:a})}}this.isSetAnnotationType=!1},s.prototype.findAnnotationObject=function(e){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;if(this.pdfViewer.selectedItems.annotations[0])return this.pdfViewer.selectedItems.annotations[0];var t=this.pdfViewer.annotationCollection;if(t)for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e){if("textMarkup"===t[i].shapeAnnotationType)return t[i];t=this.pdfViewer.annotations;for(var n=0;n<t.length;n++)if(t[n].annotName&&t[n].annotName===e)return t[n]}},s.prototype.checkAnnotationSettings=function(e){var t=this.pdfViewer.annotationCollection;if(t){for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e)return!(!t[i].annotationSettings||!t[i].annotationSettings.isLock);return!1}return!1},s.prototype.updateCommentsContainerWidth=function(){var e=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer"),t=document.getElementById(this.pdfViewer.element.id+"_commentscontentcontainer");e.style.width=t.clientWidth+"px"},s.prototype.selectCommentsAnnotation=function(e){this.selectAnnotationObj&&!this.isCommentsSelected&&this.selectAnnotationObj.pageNumber-1===e&&(this.setAnnotationType(this.selectAnnotationObj.id,this.selectAnnotationObj.annotType,this.selectAnnotationObj.pageNumber),this.selectAnnotationObj=null,this.isCommentsSelected=!0)},s.prototype.setAnnotationType=function(e,t,i){var n="measure"===t?"shape_measure":t;"freeText"===n&&(n="freetext");var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),r){var o=JSON.parse(r),a=this.pdfViewer.selectedItems.annotations[0],l=this.pdfViewer.annotationModule.getPageCollection(o,i-1);if(o[l])for(var h=o[l].annotations,d=0;d<h.length;d++){var p=h[d].annotationSelectorSettings;if(h[d].annotName===e){if(a&&this.pdfViewer.fireAnnotationUnSelect(a.annotName,a.pageIndex,a),this.pdfViewer.clearSelection(i-1),"textMarkup"===t){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i-1,!0);var u=this.pdfViewerBase.getElement("_annotationCanvas_"+(i-1));this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(h[d],u,i-1),this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation=h[d],this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i-1,this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem))}else"stamp"===t?(this.pdfViewer.select([h[d].randomId],p),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===t?(this.pdfViewer.select([h[d].annotName],p),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([h[d].id],p),this.pdfViewer.annotation.onAnnotationMouseDown());if("textMarkup"===t){if((h[d].rect||h[d].bounds)&&(f=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+this.pdfViewer.annotationModule.getAnnotationTop(h[d])*this.pdfViewerBase.getZoomFactor())){var g=(f-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(g)}}else{var m=h[d].bounds.top;"ink"===t&&(m=h[d].bounds.y);var f,y=((f=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+m*this.pdfViewerBase.getZoomFactor())-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(y)}this.isCommentsSelected=!0}}}},s.prototype.modifyTextProperty=function(e,t,i){var n,r=this.pdfViewer.annotationModule.textMarkupAnnotationModule;if(r&&r.currentTextMarkupAnnotation&&(n=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation),n?n.annotName!==i&&(n=this.pdfViewer.selectedItems.annotations[0]):n=this.pdfViewer.selectedItems.annotations[0],c(n)&&i&&(n=this.pdfViewer.annotationCollection.filter(function(m){return m.annotationId===i})[0]),i&&n.annotName!==i)for(var o=0;o<this.pdfViewer.annotations.length;o++)if(i===this.pdfViewer.annotations[o].annotName){n=this.pdfViewer.annotations[o];break}if(n){var a=document.getElementById(n.annotName);if(a){var l;l=a.accessKey.split("_")[0]?parseInt(a.accessKey.split("_")[0]):this.pdfViewerBase.currentPageNumber;var h=a.getAttribute("name"),d=l-1,p=void 0,u=!1;if("FreeText"===n.shapeAnnotationType||this.pdfViewer.enableShapeLabel&&("shape"===h||"shape_measure"===h)){var f=!1;i&&n.annotName!==i&&(this.pdfViewer.annotation.modifyDynamicTextValue(e,i),f=!0),f||("FreeText"===n.shapeAnnotationType?(n.dynamicText!==e&&(this.textFromCommentPanel=!0,this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName)),n.dynamicText=e):(this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.labelContent=e,n.notes=e),this.pdfViewer.nodePropertyChange(n,{}))}if(n.measureType&&""!==n.measureType?(p=this.getAnnotations(d,null,"shape_measure"),u=!0):p=this.getAnnotations(d,null,n.shapeAnnotationType),null!==p&&"FreeText"!==n.shapeAnnotationType)for(o=0;o<p.length;o++)if(p[o].annotName===n.annotName){var g=st(p[o]);if(null!==e&&p[o].note!==e)return this.pdfViewer.annotation.addAction(d,o,p[o],"Text Property Added","",g,p[o]),(n=p[o]).note=e,n.enableShapeLabel&&(n.labelContent=e),n.modifiedDate=this.getDateAndTime(),u?this.updateUndoRedoCollections(n,d,"shape_measure"):this.updateUndoRedoCollections(n,d),t&&""!==t?this.pdfViewer.fireCommentEdit(n.annotName,n.note,n):this.pdfViewer.fireCommentAdd(n.annotName,n.note,n),n}}}},s.prototype.getDateAndTime=function(e){e||(e=new Date),this.globalize=new qt;var t={format:this.pdfViewer.dateTimeFormat,type:"dateTime"};return this.globalize.formatDate(new Date(e),t)},s.prototype.modifyCommentsProperty=function(e,t,i,n){var r;if(r=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var o=document.getElementById(r.annotName),l=parseInt(o.accessKey.split("_")[0])-1,h=void 0,d=!1,p=this.getAuthorName(r,o);if(r.measureType&&""!==r.measureType?(h=this.getAnnotations(l,null,"shape_measure"),d=!0):h=this.getAnnotations(l,null,r.shapeAnnotationType),null!==h)for(var u=0;u<h.length;u++)h[u].annotName===r.annotName&&(r=h[u]);var f=st(r);if(r.comments.length>0){for(var g=!1,m=0;m<r.comments.length;m++)r.comments[m].annotName===t&&(g=!0,r.comments[m].note=e,r.comments[m].modifiedDate=this.getDateAndTime());var y={annotName:t,parentId:i,subject:"Comments",comments:[],author:p,note:e,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:this.getDateAndTime(),review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:p},isLock:!1};g||(r.comments[r.comments.length]=y)}else y={annotName:t,parentId:i,subject:"Comments",comments:[],author:p,note:e,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:this.getDateAndTime(),review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:p},isLock:!1},r.comments[r.comments.length]=y;this.pdfViewer.annotation.addAction(l,null,r,"Comments Property Added","",f,r),d?this.updateUndoRedoCollections(r,l,"shape_measure"):this.updateUndoRedoCollections(r,l)}void 0!==n?this.pdfViewer.fireCommentEdit(t,e,r):this.pdfViewer.fireCommentAdd(t,e,r)},s.prototype.modifyStatusProperty=function(e,t){var i;if(i=this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var n=document.getElementById(i.annotName),o=parseInt(n.accessKey.split("_")[0])-1,a=void 0,l=!1,h=n.getAttribute("author");if(i.measureType&&""!==i.measureType?(a=this.getAnnotations(o,null,"shape_measure"),l=!0):a=this.getAnnotations(o,null,i.shapeAnnotationType),null!==a)for(var d=0;d<a.length;d++)a[d].annotName===i.annotName&&(i=a[d]);var p=st(i);if(t.parentElement.firstChild.id===t.id)i.review={state:e,stateModel:"Review",author:h,modifiedDate:this.getDateAndTime(),annotId:t.id},i.state=e,i.stateModel="Review",this.pdfViewer.annotation.addAction(o,null,i,"Status Property Added","",p,i),this.pdfViewer.fireCommentStatusChanged(t.id,i.note,i,i.state);else for(var u=0;u<i.comments.length;u++)if(i.comments[u].annotName===t.id){var f=st(i.comments[u]);i.comments[u].state=e,i.comments[u].stateModel="Review",i.comments[u].review={state:e,stateModel:"Review",author:h,modifiedDate:this.getDateAndTime(),annotId:t.id},this.pdfViewer.annotation.addAction(o,null,i,"Status Property Added","",f,i.comments[u]),this.pdfViewer.fireCommentStatusChanged(i.comments[u].annotName,i.comments[u].note,i,i.comments[u].state)}l?this.updateUndoRedoCollections(i,o,"shape_measure"):this.updateUndoRedoCollections(i,o)}},s.prototype.modifyCommentDeleteProperty=function(e,t){var i,n,r,o=document.getElementById(e.id);if(o){var l=parseInt(o.accessKey.split("_")[0])-1,h=e.getAttribute("name"),d=this.getAnnotations(l,null,h);if(null!==d)for(var p=0;p<d.length;p++)d[p].annotName===e.id&&(r=d[p]);for(p=1;p<o.childElementCount;p++)if(o.childNodes[p].id===t.id){n=st(r);var u=p-1;r.comments[u].position=p,i=st(r.comments[u]),this.pdfViewer.fireCommentDelete(r.comments[u].annotName,r.comments[u].note,r),r.comments.splice(u,1),t.remove()}this.pdfViewer.annotation.addAction(l,null,n,"Comments Reply Deleted","",i,r),this.updateUndoRedoCollections(r,l)}},s.prototype.updateOpacityValue=function(e){var t=this.getAnnotations(e.pageIndex,null,e.shapeAnnotationType);if(this.pdfViewer.annotationModule.isFormFieldShape=!1,null!==t)for(var i=0;i<t.length;i++)t[i].annotName===e.annotName&&(t[i].opacity=e.opacity,this.updateUndoRedoCollections(t[i],e.pageIndex))},s.prototype.undoAction=function(e,t,i){if("Text Property Added"===t){if(e&&(n=document.getElementById(e.annotName))){var o=parseInt(n.accessKey.split("_")[0])-1,a=st(e);return n.firstChild.firstChild.nextSibling.ej2_instances[0].value=i.note,e.note=i.note,2===n.childElementCount&&(n.lastChild.style.display="block"),this.updateUndoRedoCollections(e,o),a}}else if("Comments Property Added"===t){if(e.comments.length>0){var h=document.getElementById(e.annotName);o=this.pdfViewerBase.currentPageNumber-1,h&&(o=parseInt(h.accessKey.split("_")[0])-1),a=st(e);var p=document.getElementById(e.comments[e.comments.length-1].annotName);return p&&p.remove(),this.updateUndoRedoCollections(e=i,o),a}}else if("Status Property Added"===t){if(e){if(h=document.getElementById(e.annotName),o=this.pdfViewerBase.currentPageNumber-1,h&&(o=parseInt(h.accessKey.split("_")[0])-1),a=st(e),e.annotName===i.annotName)e.review=i.review,e.state=i.state,e.stateModel=i.stateModel,this.pdfViewer.annotation.redoCommentsElement.push(e);else for(var u=0;u<e.comments.length;u++)if(e.comments[u].annotName===i.annotName){e.comments[u].state=i.state,e.comments[u].stateModel=i.stateModel,e.comments[u].review=i.review,this.pdfViewer.annotation.redoCommentsElement.push(e.comments[u]);break}var f=document.getElementById(i.annotName);return f.lastChild.id===this.pdfViewer.element.id+"status_container"?f.lastChild.remove():f.firstChild.lastChild.id===this.pdfViewer.element.id+"status_container"&&f.firstChild.lastChild.remove(),this.updateUndoRedoCollections(e,o),a}}else if("Comments Reply Deleted"===t){if(h=document.getElementById(e.annotName))return o=parseInt(h.accessKey.split("_")[0])-1,this.renderComments(i,h,!0,e.annotName),this.pdfViewer.annotation.redoCommentsElement.push(i),this.updateUndoRedoCollections(e,o),e}else if("dynamicText Change"===t&&e){var n;if(n=document.getElementById(e.annotName))return n.firstChild.firstChild.nextSibling.ej2_instances[0].value=i.dynamicText,e}},s.prototype.redoAction=function(e,t,i){if("Text Property Added"===t){if(n=document.getElementById(e.annotName)){var o=parseInt(n.accessKey.split("_")[0])-1;return n.firstChild.firstChild.nextSibling.ej2_instances[0].value=e.note,n.lastChild.style.display="block",this.updateUndoRedoCollections(e,o),e}}else if("Comments Property Added"===t){var a=e.comments[e.comments.length-1],l=document.getElementById(e.annotName);if(l)return o=parseInt(l.accessKey.split("_")[0])-1,this.renderComments(a,l,!0,e.annotName),this.updateUndoRedoCollections(e,o),e}else{if("Status Property Added"===t){var h=this.pdfViewer.annotation.redoCommentsElement.pop();if(o=this.pdfViewerBase.currentPageNumber-1,h){var d=F("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),p=F("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),u=F("span",{id:this.pdfViewer.element.id+"status_icon"});if(p.appendChild(u),d.appendChild(p),(f=document.getElementById(e.annotName))&&(o=parseInt(f.accessKey.split("_")[0])-1),e.annotName===h.annotName){this.updateStatusContainer(e.state,u,p,d);for(var g=0;g<f.firstChild.children.length;g++)f.firstChild.children[g].id===this.pdfViewer.element.id+"status_container"&&f.firstChild.children[g].parentElement.removeChild(f.firstChild.children[g]);f.firstChild.appendChild(d)}else for(g=0;g<e.comments.length;g++)if(e.comments[g].annotName===h.annotName){this.updateStatusContainer(e.comments[g].state,u,p,d);for(var m=document.getElementById(h.annotName),y=0;y<m.children.length;y++)m.children[y].id===this.pdfViewer.element.id+"status_container"&&m.children[y].parentElement.removeChild(m.children[y]);m&&m.appendChild(d)}}return this.updateUndoRedoCollections(e,o),e}if("Comments Reply Deleted"===t){var f;o=this.pdfViewerBase.currentPageNumber-1,(f=document.getElementById(e.annotName))&&(o=parseInt(f.accessKey.split("_")[0])-1),h=this.pdfViewer.annotation.redoCommentsElement.pop();var b=st(e);for(g=0;g<e.comments.length;g++)if(e.comments[g].annotName===h.annotName){var w=document.getElementById(h.annotName);e.comments.splice(g,1),w.remove()}return this.updateUndoRedoCollections(e,o),b}var n;if("dynamicText Change"===t&&e&&(n=document.getElementById(e.annotName)))return n.firstChild.firstChild.nextSibling.ej2_instances[0].value=e.dynamicText,e}},s.prototype.updateUndoRedoCollections=function(e,t,i,n){var r=i||e.shapeAnnotationType;e.indent&&""!==e.indent&&(r="shape_measure");var o=this.getAnnotations(t,null,r);if(null!==o){for(var a=0;a<o.length;a++)e.annotName===o[a].annotName&&(o[a]=e,this.pdfViewer.annotationModule.storeAnnotationCollections(o[a],t),n&&(o.splice(a,1),this.deleteStickyNotesAnnotations(o,t)));this.manageAnnotations(o,t,"shape_measure"===r?"shape_measure":e.shapeAnnotationType)}},s.prototype.addAnnotationComments=function(e,t){var i=e+1,n=this.pdfViewer.annotation.undoCommentsElement.pop();n&&(this.createCommentsContainer(n,i),this.updateUndoRedoCollections(n,e,t))},s.prototype.findPosition=function(e,t,i){var n,r=document.getElementById(e.annotName);if(r){for(var a=parseInt(r.accessKey.split("_")[0])-1,l=r.parentElement,h=0;h<l.childElementCount;h++)l.childNodes[h].id===e.annotName&&(n=h);"Stamp"===t||"Image"===t?t="stamp":"FreeText"===t?t="freetext":"StickyNotes"===t||"sticky"===t?t="sticky":"Ink"===t&&(t="ink");var d=this.getAnnotations(a,null,t);if(null!==d)for(h=0;h<d.length;h++)if(d[h].annotName===e.annotName){var p=st(d[h]);d[h].position=n,this.pdfViewer.annotation.undoCommentsElement.push(d[h]),"sticky"===t&&this.updateUndoRedoCollections(p,a,null,i)}}},s.prototype.getAnnotations=function(e,t,i){var n;i="Stamp"===i||"stamp"===i||"Image"===i?"stamp":"StickyNotes"===i||"sticky"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i||"freetext"===i||"freeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"shape_measure";var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),r){var o=JSON.parse(r),a=this.pdfViewer.annotationModule.getPageCollection(o,e);n=o[a]?o[a].annotations:t}else n=t;return n},s.prototype.manageAnnotations=function(e,t,i){i="Stamp"===i||"stamp"===i?"stamp":"Sticky"===i||"sticky"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"shape_measure";var n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),n){var r=JSON.parse(n);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+i);var o=this.pdfViewer.annotationModule.getPageCollection(r,t);r[o]&&(r[o].annotations=e);var a=JSON.stringify(r);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+i,a)}},s.prototype.updateStickyNotes=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i)for(var n=e.bounds,r=JSON.parse(i),o=0;o<r.length;o++)for(var a=r[o],l=0;l<a.annotations.length;l++)if(r[o].annotations[l].annotName===e.annotName){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky"),r[this.pdfViewer.annotationModule.getPageCollection(r,0)]&&(r[o].annotations[l].bounds={left:n.x,top:n.y,width:n.width,height:n.height,right:n.right,bottom:n.bottom});var d=JSON.stringify(r);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=d:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",d);break}},s.prototype.saveStickyAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),r=0;r<n.length;r++){var o=[],a=n[r];if(a){for(var l=0;a.annotations.length>l;l++)this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[l]),a.annotations[l].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[l].bounds,a.pageIndex));o=a.annotations}t[a.pageIndex]=o}return JSON.stringify(t)},s.prototype.deleteStickyNotesAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky");var r=this.pdfViewer.annotationModule.getPageCollection(n,t);n[r]&&(n[r].annotations=e);var o=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=o:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",o)}},s.prototype.addStickyNotesAnnotations=function(e,t){var i=this.getAnnotations(e,null,"sticky");i&&i.push(t),this.manageAnnotations(i,e,"sticky")},s.prototype.addTextToComments=function(e,t){var i=document.getElementById(e);i&&(i.firstChild.firstChild.nextSibling.ej2_instances[0].value=t)},s.prototype.updateAnnotationCollection=function(e,t,i){var n=this.findAnnotationType(t),r=this.getAnnotations(t.pageIndex,null,n);if(i&&(r=this.pdfViewer.annotationModule.removedAnnotationCollection),null!==r)for(var o=0;o<r.length;o++)if(i&&!r[o].annotName&&(r[o].annotName=r[o].annotationId),r[o].annotName===t.annotName){var a=st(r[o]);a.annotName=e.annotName,("shape"===n||"shape_measure"===n||"freetext"===n||"ink"===n)&&(a.id=e.id),"stamp"===n&&(a.randomId=e.id),"ink"===n?(a.bounds.x=e.bounds.x,a.bounds.y=e.bounds.y):(a.bounds.left=e.bounds.x,a.bounds.top=e.bounds.y,a.vertexPoints=e.vertexPoints),a.note=a.note?a.note:"",a.comments=[],a.review={state:"",stateModel:"",modifiedDate:a.ModifiedDate,author:a.author},a.state="",a.stateModel="",a.pageNumber=t.pageIndex,this.pdfViewer.annotationModule.storeAnnotations(t.pageIndex,a,"_annotations_"+n),this.createCommentsContainer(a,t.pageIndex+1,!0),i&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]);break}},s.prototype.findAnnotationType=function(e){return""!==e.measureType?"shape_measure":"StickyNotes"===e.shapeAnnotationType?"sticky":"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?"stamp":"FreeText"===e.shapeAnnotationType?"freetext":"Ink"===e.shapeAnnotationType?"ink":"shape"},s.prototype.setExistingAnnotationModifiedDate=function(e){return""!==e?this.setModifiedDate(e):this.setModifiedDate()},s.prototype.updateModifiedTime=function(e,t){return e>=12?12===e?e+":"+t+" PM":e-12+":"+t+" PM":e+":"+t+" AM"},s.prototype.setModifiedDate=function(e){var t;t=e?this.getDateAndTime(e):this.getDateAndTime();var n,i=new Date(t),r=i.toString().split(" ").splice(1,2).join(" ");if(2===i.toLocaleTimeString().split(" ").length)n=i.toLocaleTimeString().split(" ")[0].split(":").splice(0,2).join(":")+" "+i.toLocaleTimeString().split(" ")[1];else{var o=parseInt(i.toLocaleTimeString().split(":")[0]),a=i.toLocaleTimeString().split(":")[1];n=this.updateModifiedTime(o,a)}return r+", "+n},s.prototype.convertUTCDateToLocalDate=function(e){var t=new Date(Date.parse(e));this.globalize=new qt(this.pdfViewer.locale);var n,i=t.toLocaleTimeString(this.globalize.culture);return n=c(i.split(" ")[1])?i.split(":").splice(0,2).join(":"):i.split(":").splice(0,2).join(":")+" "+i.split(" ")[1],t.toString().split(" ").splice(1,2).join(" ")+", "+n},s.prototype.updateModifiedDate=function(e){e.id===this.pdfViewer.element.id+"_commenttype_icon"&&(e=e.nextSibling);var t=e.textContent.split("-")[0];e.textContent=t+" - "+this.setModifiedDate()},s.prototype.updateAnnotationModifiedDate=function(e,t,i){var n;if(e){var r=document.getElementById(e.annotName);if(r){if(t){var a=this.findAnnotationType(e),l=this.getAnnotations(e.pageIndex,null,a);if(null!=l&&e)for(var h=0;h<l.length;h++){if(e.annotName===l[h].annotName&&(e.bounds.x!==l[h].bounds.left||e.bounds.y!==l[h].bounds.top||e.bounds.height!==l[h].bounds.height||e.bounds.width!==l[h].bounds.width)){var o=(n=r.firstChild.firstChild.childNodes[1]).textContent.split("-")[0];n.textContent=o+" - "+this.setModifiedDate()}"sticky"===l[h].shapeAnnotationType&&this.pdfViewer.annotationModule.storeAnnotationCollections(l[h],e.pageIndex)}}else o=(n=r.firstChild.firstChild.childNodes[1]).textContent.split("-")[0],n.textContent=o+" - "+this.setModifiedDate();i&&(n=r.firstChild.firstChild.childNodes[1],void 0!==e.modifiedDate)&&(o=n.textContent.split("-")[0],n.textContent=o+" - "+this.setExistingAnnotationModifiedDate(e.modifiedDate))}}},s.prototype.saveImportedStickyNotesAnnotations=function(e,t){var i;e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var n=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,r=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);i={shapeAnnotationType:"sticky",author:e.Author,allowedInteractions:r,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},pageNumber:t,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotName:e.AnnotName,color:e.color,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:n},isPrint:e.IsPrint,isCommentLock:e.IsCommentLock},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_sticky")},s.prototype.updateStickyNotesAnnotationCollections=function(e,t){e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var n=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,r=e.AllowedInteraction?e.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);return e.IsLock&&(n=e.isLock),{shapeAnnotationType:"sticky",author:e.Author,allowedInteractions:r,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotationId:e.AnnotName,color:e.color,pageNumber:t,customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:n},isPrint:e.IsPrint,isCommentLock:e.IsCommentLock}},s.prototype.clear=function(){this.commentsCount=0,this.commentsreplyCount=0,this.isAccordionContainer=!0,this.isEditableElement=!1,this.isCreateContextMenu=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.commentMenuObj&&this.commentMenuObj.destroy();var e=document.querySelectorAll(".e-pv-accordion-page-container");if(e)for(var t=0;t<e.length;t++)e[t].remove();this.commentsRequestHandler&&this.commentsRequestHandler.clear()},s.prototype.getModuleName=function(){return"StickyNotesAnnotation"},s.prototype.updateAddAnnotationDetails=function(e,t){t=e?e.offset?e.offset:{x:1,y:1}:(e={offset:{x:1,y:1},pageNumber:0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),r=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings),a=this.pdfViewer.stickyNotesSettings.allowedInteractions?this.pdfViewer.stickyNotesSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;o.isLock=!!e.isLock&&e.isLock;var l=[];return l[0]={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:a,AnnotName:n,AnnotType:"sticky",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:r,AnnotationSettings:o,Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:30,Height:30,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:30,IsEmpty:!1,Width:30}},Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:null,CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,Icon:"Comment",IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:"",Note:"",Opacity:e.opacity?e.opacity:1,Reference:null,Size:{IsEmpty:!0,Width:0,Height:0},State:"",StateModel:"",StrokeColor:null,SubType:null,Subject:"Sticky Note",Type:null},{stickyNotesAnnotation:l}},s.prototype.getAnnotationType=function(e){var t;return"stamp"===e||"Stamp"===e?t="stamp":"shape"===e||"Line"===e||"Radius"===e||"Rectangle"===e||"Ellipse"===e||"Polygon"===e||"LineWidthArrowHead"===e||"Square"===e||"Circle"===e?t="shape":"textMarkup"===e?t="textMarkup":"freeText"===e||"FreeText"===e?t="freeText":"sticky"===e||"StickyNotes"===e?t="sticky":"measure"===e||"shape_measure"===e?t="measure":("ink"===e||"Ink"===e)&&(t="ink"),t},s.prototype.getAuthorName=function(e,t){var i;if(e){var n=e.shapeAnnotationType,r=this.getAnnotationType(n);i=this.pdfViewer.annotationModule.updateAnnotationAuthor(r,n)}else i=t.getAttribute("author");return i},s}(),WAe=function(){function s(e,t){this.newObject=[],this.outputString="",this.inkAnnotationindex=[],this.isAddAnnotationProgramatically=!1,this.currentPageNumber="",this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.drawInk=function(){this.pdfViewerBase.disableTextSelectionMode(),this.pdfViewer.tool="Ink"},s.prototype.drawInkAnnotation=function(e){if(this.pdfViewerBase.isToolbarInkClicked){this.pdfViewerBase.isInkAdded=!0,this.pdfViewer.annotationModule.isFormFieldShape=!1;var t=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e;if(this.outputString&&""!==this.outputString){var i=this.addInk(t);this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t),this.pdfViewer.select([i.id],i.annotationSelectorSettings),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools("Ink")}else this.outputString="",this.newObject=[],this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool="";this.pdfViewerBase.isInkAdded=!1}},s.prototype.storePathData=function(){this.convertToPath(this.newObject),this.newObject=[]},s.prototype.drawInkInCanvas=function(e,t){""!==this.currentPageNumber&&parseInt(this.currentPageNumber)!==t&&(this.drawInkAnnotation(parseInt(this.currentPageNumber)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink");var i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getWindowDevicePixelRatio(),o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t).getContext("2d"),a=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,l=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,h=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000";(!E.isDevice||E.isDevice&&i<=.7)&&o.setTransform(n,0,0,n,0,0),o.beginPath(),o.lineJoin="round",o.lineCap="round",o.moveTo(e.prevPosition.x,e.prevPosition.y),o.lineTo(e.currentPosition.x,e.currentPosition.y),o.lineWidth=a*i>1?a*i:a,o.strokeStyle=h,o.globalAlpha=l,o.stroke(),o.arc(e.prevPosition.x,e.prevPosition.y,1,0,2*Math.PI,!0),o.closePath(),this.pdfViewerBase.prevPosition=e.currentPosition,this.newObject.push(e.currentPosition.x,e.currentPosition.y),this.currentPageNumber=t.toString()},s.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[t],e[t+1])},s.prototype.linePath=function(e,t){!c(e)&&!c(t)&&(this.outputString+="L"+e+","+t+" ")},s.prototype.movePath=function(e,t){!c(e)&&!c(t)&&(this.outputString+="M"+e+","+t+" ")},s.prototype.addInk=function(e){var n,t=this.calculateInkSize();if(this.pdfViewerBase.getZoomFactor(),this.pdfViewerBase.isToolbarInkClicked){var r=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),a=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e,p=this.pdfViewer.inkAnnotationSettings.isLock?this.pdfViewer.inkAnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock,u="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:"Guest",g=this.pdfViewer.inkAnnotationSettings.isPrint,m=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,y=this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;n={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:t.x,y:t.y,width:t.width,height:t.height},pageIndex:a,data:this.outputString,customData:this.pdfViewer.inkAnnotationSettings.customData,shapeAnnotationType:"Ink",opacity:this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,strokeColor:this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000",thickness:this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,annotName:r,comments:[],author:u,subject:"Ink",notes:"",review:{state:"",stateModel:"",modifiedDate:o,author:u},annotationSelectorSettings:this.getSelector("Ink",""),modifiedDate:o,annotationSettings:y,isPrint:g,allowedInteractions:m,isCommentLock:!1,isLocked:p};var b=this.pdfViewer.add(n),w={left:n.bounds.x,top:n.bounds.y,width:n.bounds.width,height:n.bounds.height},S={opacity:n.opacity,strokeColor:n.strokeColor,thickness:n.thickness,modifiedDate:n.modifiedDate,width:n.bounds.width,height:n.bounds.height,data:this.outputString};this.pdfViewerBase.inkCount++;var I=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("ink",n.pageIndex+1,n.shapeAnnotationType);I&&(document.getElementById(I).id=r),n.annotName=r,this.pdfViewer.annotation.addAction(a,null,b,"Addition","",b,b),this.pdfViewer.annotationModule.storeAnnotations(a,n,"_annotations_ink"),this.pdfViewer.fireAnnotationAdd(n.pageIndex,n.annotName,"Ink",w,S),this.pdfViewerBase.isInkAdded&&(this.outputString="",this.newObject=[]),this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool=""}return n},s.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarInkClicked?this.drawInkAnnotation():(this.pdfViewerBase.isToolbarInkClicked=!0,this.drawInk())},s.prototype.saveInkSignature=function(){for(var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink"),t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e)for(var n=JSON.parse(e),r=0;r<n.length;r++){var o=[],a=n[r];if(a){for(var l=0;a.annotations.length>l;l++){this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[l]),a.annotations[l].strokeColor=JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(a.annotations[l].strokeColor)),a.annotations[l].bounds=JSON.stringify(this.pdfViewer.annotation.getInkBounds(a.annotations[l].bounds,a.pageIndex));var p=ia(Cs(a.annotations[l].data));a.annotations[l].data=JSON.stringify(p)}o=a.annotations}t[a.pageIndex]=o}return JSON.stringify(t)},s.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageInkAnnotations(i,e)}},s.prototype.calculateInkSize=function(){for(var e=-1,t=-1,i=-1,n=-1,r=Cs(this.outputString),o=this.pdfViewerBase.getZoomFactor(),a=0;a<r.length;a++){var l=r[a];if(-1===e)e=l.x,i=l.x,t=l.y,n=l.y;else{var h=l.x,d=l.y;e>=h&&(e=h),t>=d&&(t=d),i<=h&&(i=h),n<=d&&(n=d)}}return{x:e/o,y:t/o,width:(i-e)/o,height:(n-t)/o}},s.prototype.renderExistingInkSignature=function(e,t,i,n){var r,o=!1;if(!i)for(var a=0;a<this.inkAnnotationindex.length;a++)if(this.inkAnnotationindex[a]===t){o=!0;break}if(e&&(!o||n)){e.length>0&&-1===this.inkAnnotationindex.indexOf(t)&&this.inkAnnotationindex.push(t);for(var l=0;l<e.length;l++){var h=e[l];if(h){var d=h.PathData;i&&d&&("object"==typeof d&&d.length>1?d=Kh(d):h.IsPathData||d.split("command").length<=1||(d=Kh(JSON.parse(d)))),this.outputString=d;var p=this.calculateInkSize();this.outputString="";var u=0,f=1,g=h.Bounds;p&&(p.height<1?(u=g.Height?g.Height:g.height,f=g.Height?g.Height:g.height):p.width<1&&(u=g.Width?g.Width:g.width,f=g.Width?g.Width:g.width));var T,m=c(g.X)?g.x+u/2:g.X+u/2,y=c(g.Y)?g.y+u/2:g.Y+u/2,b=g.Width?g.Width-(f-1):g.width-(f-1),w=g.Height?g.Height-(f-1):g.height-(f-1),S=!!h.AnnotationSettings&&h.AnnotationSettings.isLock,I=h.AnnotationSelectorSettings?h.AnnotationSelectorSettings:this.getSelector(h,"Ink"),x=this.pdfViewer.annotation.getCustomData(h);T=h.AnnotationSettings?h.AnnotationSettings.isPrint:this.pdfViewer.inkAnnotationSettings.isPrint,h.IsLocked&&(S=h.IsLocked),"Highlight"===h.Subject&&1===h.Opacity&&(h.Opacity=h.Opacity/2),h.allowedInteractions=h.AllowedInteractions?h.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(h),r={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:m,y,width:b,height:w},pageIndex:t,data:d,shapeAnnotationType:"Ink",opacity:h.Opacity,strokeColor:h.StrokeColor,thickness:h.Thickness,annotName:h.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(h.Comments,h,h.Author),author:h.Author,allowedInteractions:h.allowedInteractions,subject:h.Subject,modifiedDate:h.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:h.ModifiedDate,author:h.Author},notes:h.Note,annotationSettings:{isLock:S},annotationSelectorSettings:I,customData:x,isPrint:T,isCommentLock:h.IsCommentLock},this.pdfViewer.add(r);var L=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+h.pageIndex);this.pdfViewer.renderDrawing(L,r.pageIndex),this.pdfViewer.annotationModule.storeAnnotations(r.pageIndex,r,"_annotations_ink"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(r.pageIndex,r.annotName,"Ink",g,{opacity:r.opacity,strokeColor:r.strokeColor,thickness:r.thickness,modifiedDate:r.modifiedDate,width:r.bounds.width,height:r.bounds.height,data:this.outputString}),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.inkCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}}},s.prototype.saveImportedInkAnnotation=function(e,t){var n=e.Bounds,r={x:n.X,y:n.Y,width:n.Width,height:n.Height},o=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),a=this.pdfViewer.annotation.getCustomData(e),l=this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),h={state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},d=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),p=this.getSettings(e),u=e.PathData;"object"==typeof u&&u.length>1?u=Kh(u):e.IsPathData||u.split("command").length<=1||(u=Kh(JSON.parse(u))),this.pdfViewer.annotationModule.storeAnnotations(t,{allowedInteractions:o,annotName:e.AnnotName,annotationSelectorSettings:p,annotationSettings:d,author:e.Author,bounds:r,customData:a,comments:l,data:u,id:"Ink",isCommentLock:e.IsCommentLock,isLocked:e.IsLocked,isPrint:e.IsPrint,modifiedDate:e.ModifiedDate,note:e.Note,opacity:e.Opacity,pageIndex:t,review:h,shapeAnnotationType:e.AnnotationType,strokeColor:e.StrokeColor,subject:e.Subject,thickness:e.Thickness},"_annotations_ink")},s.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},s.prototype.storeInkSignatureData=function(e,t){this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Addition","",t,t);var i,n=t.bounds.left?t.bounds.left:t.bounds.x,r=t.bounds.top?t.bounds.top:t.bounds.y;t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,r=t.wrapper.bounds.top),i={id:t.id,bounds:{x:n,y:r,width:t.bounds.width,height:t.bounds.height},shapeAnnotationType:"Ink",opacity:t.opacity,thickness:t.thickness,strokeColor:t.strokeColor,pageIndex:t.pageIndex,data:t.data,annotName:t.annotName,comments:t.comments,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,review:{state:"",stateModel:"",modifiedDate:t.modifiedDate,author:t.author},notes:t.notes,annotationSelectorSettings:this.getSelector(t,"Ink"),isCommentLock:t.isCommentLock};var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(o){var p=JSON.parse(o);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var u=this.pdfViewer.annotationModule.getPageCollection(p,e);if(p[u])p[u].annotations.push(i),p[u].annotations.indexOf(i);else{var f={pageIndex:e,annotations:[]};f.annotations.push(i),f.annotations.indexOf(i),p.push(f)}var d=JSON.stringify(p);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",d)}else{var l={pageIndex:e,annotations:[]};l.annotations.push(i),l.annotations.indexOf(i);var h=[];h.push(l),d=JSON.stringify(h),window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",d)}},s.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings),i},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(n){var r=JSON.parse(n),o=this.pdfViewer.annotationModule.getPageCollection(r,e);i=r[o]?r[o].annotations:t}else i=t;return i},s.prototype.modifySignatureInkCollection=function(e,t,i){this.pdfViewer.annotationModule.isFormFieldShape=!c(i.formFieldAnnotationType)&&""!==i.formFieldAnnotationType,this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,r=this.getAnnotations(t,null);if(null!=r&&i){for(var o=0;o<r.length;o++)if(i.id===r[o].id){if("bounds"===e)r[o].bounds={x:i.wrapper.bounds.left,y:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height};else if("stroke"===e)r[o].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)r[o].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)r[o].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)r[o].notes=i.notes;else if("delete"===e){n=r.splice(o,1)[0];break}r[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(r[o],t)}this.manageInkAnnotations(r,t)}return n},s.prototype.manageInkAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var r=this.pdfViewer.annotationModule.getPageCollection(n,t);n[r]&&(n[r].annotations=e);var o=JSON.stringify(n);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",o)}},s.prototype.updateInkCollections=function(e,t,i){if(e){var r=e.Bounds,o=r.X,a=r.Y,l=r.Width,h=r.Height,d=e.customData,p=e.isPrint,u=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),f=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;e.IsLocked&&(f.isLock=e.IsLocked);var g=e.PathData;return i&&(g=Kh(JSON.parse(e.PathData))),{id:"ink"+this.pdfViewerBase.signatureCount,bounds:{x:o,y:a,width:l,height:h},pageIndex:t,data:g,shapeAnnotationType:"Ink",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,annotationId:e.AnnotName,customData:d,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),author:e.Author,allowedInteractions:u,subject:e.Subject,modifiedDate:e.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:e.ModifiedDate,author:e.Author},notes:e.Note,isPrint:p,isCommentLock:e.IsCommentLock,annotationSettings:f,isLocked:f.isLock}}},s.prototype.updateAddAnnotationDetails=function(e,t,i){t=e?e.offset?e.offset:{x:10,y:10}:(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),r=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings),l=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;a.isLock=!!e.isLock&&e.isLock,e.width=e.width?e.width:150,e.height=e.height?e.height:60;var h=e.path?e.path:"";if(!c(h))if("M"===h[0]||"L"===h[0]){var p=ia(Cs(h));h=JSON.stringify(p)}else h=Kh(JSON.parse(h));e.path=h;var u=[];return u[0]={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:l,AnnotName:r,AnnotType:"ink",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:o,AnnotationSettings:a,AnnotationType:"Ink",Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},Comments:null,CreatedDate:n,CustomData:e.customData?e.customData:null,ExistingCustomData:null,IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:"",Note:"",Opacity:e.opacity?e.opacity:1,PathData:e.path,PageNumber:i,State:"",StateModel:"",StrokeColor:e.strokeColor?e.strokeColor:"rgba(255,0,0,1)",SubType:null,Subject:"Ink",Type:null,Thickness:e.thickness?e.thickness:1},{signatureInkAnnotation:u}},s}(),UAe=function(){function s(e,t){var i=this;this.thumbnailWidthMin=200,this.contentContainerScrollWidth=33,this.closeButtonLeft=170,this.isTooltipCreated=!1,this.isThumbnail=!1,this.annotationContextMenu=[],this.isCommentPanelShow=!1,this.commentPanelWidthMin=300,this.isNavigationToolbarVisible=!1,this.isBookmarkListOpen=!1,this.isNavigationPaneResized=!1,this.isBookmarkOpen=!1,this.isThumbnailOpen=!1,this.restrictUpdateZoomValue=!0,this.loadImportAnnotation=function(n){if(null!==n.target.files[0]){var o=n.target.files[0];if(o){i.pdfViewer.fireImportStart(o);var a=o.type;if(o.name.split(".json").length>1&&a.includes("json"))(l=new FileReader).readAsDataURL(o),l.onload=function(d){if(d.currentTarget.result){var p=d.currentTarget.result.split(",")[1],u=atob(p);if(u){u=i.pdfViewerBase.getSanitizedString(u);var f=JSON.parse(u),g=f.pdfAnnotation[Object.keys(f.pdfAnnotation)[0]];Object.keys(f.pdfAnnotation).length>=1&&(g.textMarkupAnnotation||g.measureShapeAnnotation||g.freeTextAnnotation||g.stampAnnotations||g.signatureInkAnnotation||g.shapeAnnotation&&g.shapeAnnotation[0].Bounds)?(i.pdfViewerBase.isPDFViewerJson=!0,i.pdfViewerBase.importAnnotations(f,Yo.Json)):(i.pdfViewerBase.isPDFViewerJson=!1,i.pdfViewerBase.importAnnotations(p,Yo.Json))}}};else if(o.name.split(".xfdf").length>1&&(a.includes("xfdf")||n.target.accept.includes("xfdf"))){var l;(l=new FileReader).readAsDataURL(o),l.onload=function(p){if(p.currentTarget.result){var u=p.currentTarget.result.split(",")[1];atob(u)&&i.pdfViewerBase.importAnnotations(u,Yo.Xfdf,!0)}}}else i.pdfViewer.fireImportFailed(o,i.pdfViewer.localeObj.getConstant("Import Failed")),X()?i.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ImportFailed").then(function(d){i.pdfViewerBase.openImportExportNotificationPopup(d)}):i.pdfViewerBase.openImportExportNotificationPopup(i.pdfViewer.localeObj.getConstant("Import Failed"))}n.target.value=""}},this.resizeIconMouseOver=function(n){n.srcElement.style.cursor="e-resize"},this.resizePanelMouseDown=function(n){var r=null;(r=i).offset=[r.sideBarResizer.offsetLeft-n.clientX,r.sideBarResizer.offsetTop-n.clientY,r.sideBarResizer.offsetParent.clientWidth],i.previousX=n.clientX,r.isDown=!0,r.isNavigationPaneResized=!0,r.pdfViewerBase.viewerContainer.style.cursor="e-resize",r.sideBarContentContainer&&(r.sideBarContentContainer.style.cursor="e-resize")},this.resizeViewerMouseLeave=function(n){var r=null;(r=i).isDown=!1,r.isNavigationPaneResized&&r.sideBarContentContainer&&(r.pdfViewerBase.viewerContainer.style.cursor="default",r.sideBarContentContainer.style.cursor="default",r.isNavigationPaneResized=!1),r.commentPanelContainer&&r.isCommentPanelShow&&(i.commentPanelMouseLeave(n),r.isCommentPanelShow=!1)},this.resizePanelMouseMove=function(n){var r=null;if(r=i,!i.pdfViewerBase.getPopupNoteVisibleStatus())if(i.pdfViewerBase.skipPreventDefault(n.target)&&n.preventDefault(),r.isDown&&i.sideBarContentContainer){var l,h;i.pdfViewer.enableRtl?((l=i.previousX-n.clientX+r.offset[2])>(h=Math.floor(i.outerContainerWidth/2))&&(l=h),l<i.thumbnailWidthMin&&(l=i.thumbnailWidthMin),r.sideBarResizer.style.right=l+"px",r.sideBarContentContainer.style.width=l+"px",r.sideBarContent.style.width=l+"px",r.sideBarContentSplitter.style.width=l+"px",r.sideBarTitleContainer.style.width=l+"px",r.pdfViewerBase.viewerContainer.style.right=r.getViewerContainerLeft()+"px",r.pdfViewerBase.viewerContainer.style.left=r.getViewerContainerRight()+"px"):((l=n.clientX+r.offset[0])>(h=Math.floor(i.outerContainerWidth/2))&&(l=h),l<i.thumbnailWidthMin&&(l=i.thumbnailWidthMin),r.sideBarResizer.style.left=l+"px",r.closeDiv.style.left=l-r.contentContainerScrollWidth+"px",r.sideBarContentContainer.style.width=l+"px",r.sideBarContent.style.width=l+"px",r.sideBarContentSplitter.style.width=l+"px",r.sideBarTitleContainer.style.width=l+"px",r.pdfViewerBase.viewerContainer.style.left=r.getViewerContainerLeft()+"px",r.pdfViewerBase.viewerContainer.style.right=r.getViewerContainerRight()+"px");var d=r.pdfViewer.element.clientWidth-r.getViewerContainerLeft()-r.getViewerContainerRight();r.pdfViewerBase.viewerContainer.style.width=d+"px",r.pdfViewerBase.pageContainer.style.width=r.pdfViewerBase.viewerContainer.clientWidth+"px",r.pdfViewer.thumbnailViewModule.gotoThumbnailImage(r.pdfViewerBase.currentPageNumber-1),r.pdfViewerBase.updateZoomValue(),r.bookmarkButton.children[0].classList.contains("e-pv-bookmark-disable-icon")||r.pdfViewer.bookmarkViewModule.setBookmarkContentHeight()}else r.isCommentPanelShow&&i.commentPanelContainer&&i.updateCommentPanelContainer(n)},this.sideToolbarOnClose=function(n){var r=null;(r=i).removeThumbnailSelectionIconTheme(),r.removeBookmarkSelectionIconTheme(),r.updateViewerContainerOnClose()},this.sideToolbarOnClick=function(n){i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Page Thumbnails"),i.sideBarContent.setAttribute("aria-label","Thumbnail View Panel");var r=null;r=i;var a=X()?i.pdfViewer.element.querySelector(".e-pv-bookmark-view"):document.getElementById(i.pdfViewer.element.id+"_bookmark_view");if(a&&(r.removeBookmarkSelectionIconTheme(),a.style.display="none"),document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="flex",r.sideBarContentContainer&&("none"!==r.sideBarContentContainer.style.display?r.isBookmarkOpen?(r.isThumbnailOpen=!0,r.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand()):(r.isThumbnailOpen=!1,r.removeThumbnailSelectionIconTheme(),i.updateViewerContainerOnClose()):(i.sideBarContent.focus(),r.isThumbnailOpen=!0,r.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand())),r.isBookmarkOpen=!1,i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var l=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(l)}},this.openThumbnailPane=function(){var n=null;n=i;var r=document.getElementById(i.pdfViewer.element.id+"_sideBarContent"),o=document.getElementById(i.pdfViewer.element.id+"_sideBarContentContainer"),a=document.getElementById(i.pdfViewer.element.id+"_viewerContainer"),l=document.getElementById(i.pdfViewer.element.id+"_pageViewContainer");if(document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="block",document.getElementById(i.pdfViewer.element.id+"_sideBarResizer").style.display="none",document.getElementById(i.pdfViewer.element.id+"_sideBarTitleContainer").style.display="none",document.getElementById(i.pdfViewer.element.id+"_sideBarContentSplitter").style.display="none",r.classList.add("e-thumbnail"),o.classList.add("e-thumbnail"),o&&(n.isThumbnail?(o.style.display="none",a.style.width=n.pdfViewer.element.clientWidth+"px",l.style.width=a.clientWidth+"px",a.style.left=o.clientWidth+"px",n.pdfViewerBase.updateZoomValue(),n.isThumbnail=!1):(r.focus(),o.style.display="block",a.style.width=n.pdfViewer.element.clientWidth-o.clientWidth+"px",l.style.width=a.clientWidth+"px",a.style.left=o.clientWidth+"px",n.pdfViewerBase.updateZoomValue(),n.pdfViewer.thumbnailViewModule.gotoThumbnailImage(n.pdfViewerBase.currentPageNumber-1),n.isThumbnail=!0)),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var h=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(h)}},this.bookmarkButtonOnClick=function(n){i.openBookmarkcontentInitially()},this.commentPanelMouseDown=function(n){var r=null;(r=i).offset=[r.commentPanelResizer.offsetLeft-n.clientX,r.commentPanelResizer.offsetTop-n.clientY,r.getViewerContainerRight()],i.isCommentPanelShow=!0,i.previousX=n.clientX,r.pdfViewerBase.viewerContainer.style.cursor="e-resize",r.commentPanelResizer.style.cursor="e-resize"},this.updateCommentPanelContainer=function(n){var o,a,r=null;r=i,i.pdfViewer.enableRtl?((o=n.clientX+r.offset[0])>(a=Math.floor(i.outerContainerWidth/2))&&(o=a),o<i.commentPanelWidthMin&&(o=i.commentPanelWidthMin),r.commentPanelResizer.style.left=o+"px",r.commentPanelContainer.style.width=o+"px",r.pdfViewerBase.viewerContainer.style.left=r.getViewerContainerRight()+"px",r.pdfViewerBase.viewerContainer.style.right=r.getViewerContainerLeft()+"px"):((o=i.previousX-n.clientX+r.offset[2])>(a=Math.floor(i.outerContainerWidth/2))&&(o=a),o<i.commentPanelWidthMin&&(o=i.commentPanelWidthMin),r.commentPanelResizer.style.right=o+"px",r.commentPanelContainer.style.width=o+"px",r.pdfViewerBase.viewerContainer.style.right=r.getViewerContainerRight()+"px",r.pdfViewerBase.viewerContainer.style.left=r.getViewerContainerLeft()+"px"),i.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var h=r.pdfViewer.element.clientWidth-r.getViewerContainerLeft()-r.getViewerContainerRight();r.pdfViewerBase.viewerContainer.style.width=h+"px",r.pdfViewerBase.pageContainer.style.width=r.pdfViewerBase.viewerContainer.clientWidth+"px",r.pdfViewerBase.updateZoomValue()},this.commentPanelMouseLeave=function(n){var r=null;(r=i).commentPanelContainer&&(r.pdfViewerBase.viewerContainer.style.cursor="default",r.commentPanelContainer.style.cursor="default")},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.initializeNavigationPane=function(){!E.isDevice||this.pdfViewer.enableDesktopMode?this.createNavigationPane():(this.commentPanelContainer=F("div",{id:this.pdfViewer.element.id+"_commantPanel",className:"e-pv-mobile-comments-container"}),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelContainer),this.pdfViewer.enableRtl?this.commentPanelContainer.style.left="0px":this.commentPanelContainer.style.right="0px",this.commentPanelContainer.style.bottom="0px",this.createCommentPanelTitleContainer(),this.commentPanelContainer.style.display="none",this.commentsContentContainer=F("div",{id:this.pdfViewer.element.id+"_commentscontentcontainer",className:"e-pv-comments-content-container"}),this.commentPanelContainer.appendChild(this.commentsContentContainer),this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer))},s.prototype.createNavigationPane=function(){X()?(this.sideBarToolbar=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),this.sideBarToolbarSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),this.sideBarContentContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container"),this.sideBarContentSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-splitter"),this.sideBarContent=this.pdfViewer.element.querySelector(".e-pv-sidebar-content"),this.sideBarTitleContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-title-container"),this.sideBarTitle=this.pdfViewer.element.querySelector(".e-pv-sidebar-title"),this.sideBarResizer=this.pdfViewer.element.querySelector(".e-pv-sidebar-resizer")):(this.sideBarToolbar=F("div",{id:this.pdfViewer.element.id+"_sideBarToolbar",className:"e-pv-sidebar-toolbar",attrs:{role:"toolbar","aria-orientation":"vertical",tabindex:"-1","aria-label":"Sidebar Toolbar"}}),this.sideBarToolbarSplitter=F("div",{id:this.pdfViewer.element.id+"_sideBarToolbarSplitter",className:"e-pv-sidebar-toolbar-splitter"}),this.sideBarContentContainer=F("div",{id:this.pdfViewer.element.id+"_sideBarContentContainer",className:"e-pv-sidebar-content-container"}),this.sideBarContentSplitter=F("div",{id:this.pdfViewer.element.id+"_sideBarContentSplitter",className:"e-pv-sidebar-content-splitter"}),this.sideBarContent=F("div",{id:this.pdfViewer.element.id+"_sideBarContent",className:"e-pv-sidebar-content",attrs:{tabindex:"0"}}),this.sideBarTitleContainer=F("div",{id:this.pdfViewer.element.id+"_sideBarTitleContainer",className:"e-pv-sidebar-title-container"}),this.sideBarTitle=F("div",{id:this.pdfViewer.element.id+"_sideBarTitle",className:"e-pv-sidebar-title",attrs:{tabindex:"-1"}}),this.sideBarResizer=F("div",{id:this.pdfViewer.element.id+"_sideBarResizer",className:"e-pv-sidebar-resizer"})),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar),this.pdfViewer.enableRtl&&(this.sideBarToolbar.style.cssFloat="right",this.sideBarToolbar.style.right="1px",this.sideBarToolbar.style.position="relative"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter),this.sideBarToolbarSplitter.classList.add(this.pdfViewer.enableRtl?"e-right":"e-left"),this.sideBarContentContainer.classList.add(this.pdfViewer.enableRtl?"e-right":"e-left"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer),this.pdfViewer.enableRtl&&(this.sideBarContentSplitter.style.right="0px"),this.sideBarContentContainer.appendChild(this.sideBarContentSplitter),this.pdfViewer.enableRtl&&(this.sideBarContent.style.right="0px",this.sideBarContent.style.direction="rtl"),this.sideBarContentContainer.appendChild(this.sideBarContent),this.pdfViewer.enableRtl&&(this.sideBarTitleContainer.style.right="0px"),this.sideBarTitle.classList.add(this.pdfViewer.enableRtl?"e-right":"e-left"),this.sideBarTitleContainer.appendChild(this.sideBarTitle),this.sideBarContentContainer.appendChild(this.sideBarTitleContainer),this.sideBarResizer.addEventListener("mousedown",this.resizePanelMouseDown),this.pdfViewerBase.mainContainer.addEventListener("mousemove",this.resizePanelMouseMove),this.pdfViewerBase.mainContainer.addEventListener("mouseup",this.resizeViewerMouseLeave),this.sideBarResizer.classList.add(this.pdfViewer.enableRtl?"e-right":"e-left"),this.sideBarContentContainer.appendChild(this.sideBarResizer),this.createCommentPanel();var t=this.getViewerContainerLeft(),i=this.getViewerContainerRight();this.pdfViewer.enableRtl||(this.pdfViewerBase.viewerContainer.style.left=t+"px",this.pdfViewerBase.viewerContainer.style.right=i+"px"),this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-t-this.commentPanelContainer.clientWidth+"px",this.sideBarContentContainer.style.display="none",this.createSidebarToolBar(),this.createSidebarTitleCloseButton(),this.createResizeIcon(),this.sideBarToolbar.addEventListener("mouseup",this.sideToolbarOnMouseup.bind(this)),this.sideBarContentContainer.addEventListener("mouseup",this.sideBarTitleOnMouseup.bind(this))},s.prototype.adjustPane=function(){if(X()){var e=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),i=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container");0===(r=(n=this.pdfViewer.element.querySelector(".e-pv-toolbar")).getBoundingClientRect().height)&&(r=parseFloat(window.getComputedStyle(n).height)+1),this.pdfViewer.enableToolbar||(r=0),t.style.top=r+"px",i.style.top=r+"px",e.style.top=r+"px",t.style.height=this.getSideToolbarHeight(r),i.style.height=this.getSideToolbarHeight(r),e.style.height=this.getSideToolbarHeight(r),this.pdfViewerBase.viewerContainer.style.height=this.getSideToolbarHeight(r)}else{var n,r;e=this.pdfViewerBase.getElement("_sideBarToolbarSplitter"),0===(r=(n=this.pdfViewerBase.getElement("_toolbarContainer")).getBoundingClientRect().height)&&(r=parseFloat(window.getComputedStyle(n).height)+1),this.sideBarToolbar.style.top=r+"px",this.sideBarContentContainer.style.top=r+"px",e.style.top=r+"px"}},s.prototype.getSideToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},s.prototype.createCommentPanel=function(){this.commentPanelContainer=F("div",{id:this.pdfViewer.element.id+"_commantPanel",className:"e-pv-comment-panel"}),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelContainer),this.pdfViewer.enableRtl?this.commentPanelContainer.style.left="0px":this.commentPanelContainer.style.right="0px",this.commentPanelContainer.style.bottom="0px",this.createCommentPanelTitleContainer(),this.commentPanelContainer.style.display="none",this.commentsContentContainer=F("div",{id:this.pdfViewer.element.id+"_commentscontentcontainer",className:"e-pv-comments-content-container"}),this.commentPanelContainer.appendChild(this.commentsContentContainer),this.commentPanelResizer=F("div",{id:this.pdfViewer.element.id+"_commentPanelResizer",className:"e-pv-comment-panel-resizer"}),this.commentPanelResizer.classList.add(this.pdfViewer.enableRtl?"e-left":"e-right"),this.commentPanelResizer.style.display="none",this.commentPanelResizer.addEventListener("mousedown",this.commentPanelMouseDown),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelResizer),this.createCommentPanelResizeIcon(),this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer)},s.prototype.createCommentPanelTitleContainer=function(){var e=F("div",{id:this.pdfViewer.element.id+"_commentPanelTitleContainer",className:"e-pv-comment-panel-title-container"}),t=F("div",{id:this.pdfViewer.element.id+"_commentPanelTitle",className:"e-pv-comment-panel-title",attrs:{tabindex:"-1"}});X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Comments").then(function(l){t.innerText=l}):t.innerText=this.pdfViewer.localeObj.getConstant("Comments");var n=F("button",{id:this.pdfViewer.element.id+"_annotations_btn"});n.setAttribute("aria-label","annotation button"),n.setAttribute("type","button"),n.className="e-btn e-pv-tbar-btn e-pv-comment-panel-title-close-div e-btn";var r=F("span",{id:this.pdfViewer.element.id+"_annotation_more_icon",className:"e-pv-more-icon e-pv-icon"});if(n.appendChild(r),E.isDevice&&!X()){var o=F("button");o.setAttribute("aria-label","annotation button"),o.setAttribute("type","button"),o.style.borderColor="transparent",o.style.paddingTop="11px",o.style.paddingBottom="11px",o.style.backgroundColor="#fafafa",o.addEventListener("click",this.closeCommentPanelContainer.bind(this)),t.style.left="37px";var a=F("span",{className:"e-pv-annotation-tools-close-icon e-pv-icon"});o.appendChild(a),e.appendChild(o)}e.appendChild(t),e.appendChild(n),this.commentPanelContainer.appendChild(e),this.createAnnotationContextMenu(),n.addEventListener("click",this.openAnnotationContextMenu.bind(this))},s.prototype.createCommentPanelResizeIcon=function(){this.commentPanelResizeIcon=F("div",{id:this.pdfViewer.element.id+"_commentPanel_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setCommentPanelResizeIconTop(),this.commentPanelResizeIcon.style.position="absolute",this.commentPanelResizer.appendChild(this.commentPanelResizeIcon)},s.prototype.openAnnotationContextMenu=function(e){this.annotationMenuObj.open(e.clientY,e.clientX,e.currentTarget)},s.prototype.createAnnotationContextMenu=function(){this.annotationContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Export Annotations")},{text:this.pdfViewer.localeObj.getConstant("Import Annotations")},{text:this.pdfViewer.localeObj.getConstant("Export XFDF")},{text:this.pdfViewer.localeObj.getConstant("Import XFDF")}];var e=F("ul",{id:this.pdfViewer.element.id+"_annotation_context_menu"});this.pdfViewer.element.appendChild(e),this.annotationMenuObj=new dp({target:"#"+this.pdfViewer.element.id+"_annotations_btn",items:this.annotationContextMenu,select:this.annotationMenuItemSelect.bind(this)}),this.pdfViewer.enableRtl&&(this.annotationMenuObj.enableRtl=!0),this.annotationMenuObj.appendTo(e),this.annotationMenuObj.animationSettings.effect=E.isDevice&&!this.pdfViewer.enableDesktopMode?"ZoomIn":"SlideDown"},s.prototype.annotationMenuItemSelect=function(e){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Export Annotations"):this.pdfViewerBase.exportAnnotations(Yo.Json);break;case this.pdfViewer.localeObj.getConstant("Import Annotations"):this.importAnnotationIconClick(e);break;case this.pdfViewer.localeObj.getConstant("Export XFDF"):this.pdfViewerBase.exportAnnotations(Yo.Xfdf);break;case this.pdfViewer.localeObj.getConstant("Import XFDF"):this.importXFdfAnnotationIconClick(e)}},s.prototype.createFileElement=function(e){this.annotationInputElement=F("input",{id:this.pdfViewer.element.id+"_annotationUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationInputElement.setAttribute("accept",".json"),e.appendChild(this.annotationInputElement),this.annotationInputElement.addEventListener("change",this.loadImportAnnotation)},s.prototype.createXFdfFileElement=function(e){this.annotationXFdfInputElement=F("input",{id:this.pdfViewer.element.id+"_annotationXFdfUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationXFdfInputElement.setAttribute("accept",".xfdf"),e.appendChild(this.annotationXFdfInputElement),this.annotationXFdfInputElement.addEventListener("change",this.loadImportAnnotation)},s.prototype.importAnnotationIconClick=function(e){this.annotationInputElement.click()},s.prototype.importXFdfAnnotationIconClick=function(e){this.annotationXFdfInputElement.click()},s.prototype.closeCommentPanelContainer=function(){var e;e=this;var t=document.getElementById(this.pdfViewer.element.id+"_viewerContainer"),i=document.getElementById(this.pdfViewer.element.id+"_pageViewContainer"),n=document.getElementById(this.pdfViewer.element.id+"_commantPanel");n&&(n.style.display="none",e.commentPanelResizer&&(e.commentPanelResizer.style.display="none"),t&&(this.pdfViewer.enableRtl?t.style.left=e.getViewerContainerRight()+"px":t.style.right=e.getViewerContainerRight()+"px",t.style.width=e.pdfViewer.element.clientWidth-e.getViewerContainerLeft()-e.getViewerContainerRight()+"px",i.style.width=e.pdfViewerBase.viewerContainer.offsetWidth-e.getViewerContainerScrollbarWidth()+"px"),e.pdfViewerBase&&e.pdfViewerBase.updateZoomValue(),this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),E.isDevice&&!X()&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="block",this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display="block")))},s.prototype.createNavigationPaneMobile=function(e){var i,t=this;if(this.isNavigationToolbarVisible=!0,this.toolbarElement=F("div",{id:this.pdfViewer.element.id+"_navigationToolbar",className:"e-pv-nav-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer),"search"===e){var n='<div class="e-input-group e-pv-search-input-mobile" id="'+this.pdfViewer.element.id+'_search_input_container"><input class="e-input" type="text" placeholder="'+this.pdfViewer.localeObj.getConstant("Find in document")+'" id="'+this.pdfViewer.element.id+'_search_input"></input></div>';i=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{template:n},{prefixIcon:"e-pv-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_search_box-icon",click:function(){var r=t.pdfViewerBase.getElement("_search_box-icon").firstElementChild;r.classList.contains("e-pv-search-close")&&t.enableSearchItems(!1),t.pdfViewer.textSearchModule.searchButtonClick(r,t.searchInput)}},{prefixIcon:"e-pv-prev-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_prev_occurrence",click:function(r){t.pdfViewer.textSearchModule.searchPrevious()}},{prefixIcon:"e-pv-next-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_next_occurrence",click:function(r){t.pdfViewer.textSearchModule.searchNext()}}]}else i=[{prefixIcon:"e-pv-backward-icon e-pv-icon",id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{text:this.pdfViewer.localeObj.getConstant("Bookmarks")}];this.toolbar=new tr({items:i,width:"",height:"",overflowMode:"Popup"}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),"search"===e?this.initiateSearchBox():this.initiateBookmarks()},s.prototype.initiateSearchBox=function(){var e=this;this.searchInput=this.pdfViewerBase.getElement("_search_input"),this.pdfViewer.textSearchModule.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").firstElementChild,this.searchInput.addEventListener("keyup",function(t){e.enableSearchItems(!0),13===t.which?e.initiateTextSearch():e.pdfViewer.textSearchModule.resetVariables()}),this.pdfViewer.textSearchModule.searchInput=this.searchInput,this.setSearchInputWidth(),this.enableSearchItems(!1),this.searchInput.focus()},s.prototype.enableSearchItems=function(e){X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("EnableSearchItems",e):(this.toolbar.enableItems(this.pdfViewerBase.getElement("_prev_occurrence").parentElement,e),this.toolbar.enableItems(this.pdfViewerBase.getElement("_next_occurrence").parentElement,e))},s.prototype.initiateBookmarks=function(){if(E.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display="none";for(var e=document.querySelectorAll(".e-pv-mobile-annotation-toolbar"),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].style.display="none"}var i=F("div",{id:this.pdfViewer.element.id+"_bookmarks_container",className:"e-pv-bookmark-container"});i.style.width="100%",i.style.height=this.pdfViewerBase.viewerContainer.style.height,this.pdfViewerBase.getElement("_viewerMainContainer").appendChild(i),this.pdfViewerBase.viewerContainer.style.display="none",this.isBookmarkListOpen=!0,this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile()},s.prototype.initiateTextSearch=function(){this.pdfViewer.textSearchModule.initiateSearch(this.searchInput.value)},s.prototype.goBackToToolbar=function(){if(this.isNavigationToolbarVisible=!1,(X()&&(!E.isDevice||this.pdfViewer.enableDesktopMode)||!X())&&this.pdfViewer.textSearchModule.cancelTextSearch(),this.searchInput=null,0!==this.pdfViewer.bookmarkViewModule.childNavigateCount)this.pdfViewer.bookmarkViewModule.bookmarkList.back(),this.pdfViewer.bookmarkViewModule.childNavigateCount--;else{null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null);var e=this.pdfViewerBase.getElement("_bookmarks_container");e&&(e.parentElement.removeChild(e),E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="")),this.toolbarElement&&null!=this.toolbarElement.parentElement&&this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.pdfViewerBase.viewerContainer.style.display="block",this.isBookmarkListOpen=!1,X()?this.pdfViewerBase.onWindowResize():this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled||this.pdfViewer.toolbarModule.showToolbar(!0)}},s.prototype.setSearchInputWidth=function(){var e=this.searchInput.parentElement,t=window.getComputedStyle(e.parentElement,null).getPropertyValue("padding-left");X()&&E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.toolbarElement=this.pdfViewerBase.getElement("_navigationToolbar"));var i=this.toolbarElement.clientWidth-this.getParentElementSearchBox("_backward").clientWidth-this.getParentElementSearchBox("_search_box-icon").clientWidth-this.getParentElementSearchBox("_prev_occurrence").clientWidth-this.getParentElementSearchBox("_next_occurrence").clientWidth-6;""!==t&&(i-=2*parseFloat(t)),e.style.width=i+"px"},s.prototype.getParentElementSearchBox=function(e){return this.pdfViewerBase.getElement(e).parentElement},s.prototype.createTooltipMobile=function(e){if(this.isTooltipCreated){if(this.toastObject){this.toastObject.title=e;var i=this.pdfViewerBase.getElement("_container_tooltip").firstElementChild;if(i)i.style.width="auto",i.firstElementChild.firstElementChild.textContent=e;else{this.isTooltipCreated=!1;var n=this.pdfViewerBase.getElement("_container_tooltip");this.toastObject&&this.toastObject.destroy(),n.parentElement.removeChild(n),this.toastObject=null,this.createMobileTooltip(e)}}}else this.createMobileTooltip(e)},s.prototype.createMobileTooltip=function(e){var t=F("div",{className:"e-pv-container-tooltip",id:this.pdfViewer.element.id+"_container_tooltip"});this.pdfViewer.element.appendChild(t),this.toastObject=new LK({title:e,target:this.pdfViewer.element,close:this.onTooltipClose.bind(this),position:{X:0,Y:0},animation:{hide:{duration:200,effect:"FadeOut"}}}),this.toastObject.appendTo(t);var i=.65*this.pdfViewer.element.clientHeight,n=(this.pdfViewer.element.clientWidth-t.clientWidth)/2;this.isTooltipCreated=!0,this.toastObject.show({position:{X:n,Y:i}});var r=t.firstElementChild;r&&(r.style.width="auto")},s.prototype.onTooltipClose=function(e){if(this.pdfViewer.textSearchModule){this.isTooltipCreated=!1;var t=this.pdfViewerBase.getElement("_container_tooltip");this.pdfViewer.textSearchModule.isMessagePopupOpened=!1,this.toastObject&&this.toastObject.destroy(),t.parentElement.removeChild(t),this.toastObject=null}},s.prototype.toolbarResize=function(){this.searchInput&&(this.searchInput.style.width="auto",this.setSearchInputWidth())},s.prototype.createSidebarToolBar=function(){if(X())this.thumbnailButton=this.pdfViewer.element.querySelector(".e-pv-thumbnail-view-button"),this.bookmarkButton=this.pdfViewer.element.querySelector(".e-pv-bookmark-button");else{this.thumbnailButton=F("button",{id:this.pdfViewer.element.id+"_thumbnail-view",attrs:{disabled:"disabled","aria-label":"Page Thumbnails",tabindex:"-1"}}),this.thumbnailButton.className="e-pv-tbar-btn e-pv-thumbnail-view-button e-btn",this.thumbnailButton.setAttribute("type","button");var e=F("span",{id:this.pdfViewer.element.id+"_thumbnail-view_icon",className:"e-pv-thumbnail-view-disable-icon e-pv-icon"});this.thumbnailButton.appendChild(e),new za({content:oo(function(){return this.pdfViewer.localeObj.getConstant("Page Thumbnails")},this),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.thumbnailButton),this.bookmarkButton=F("button",{id:this.pdfViewer.element.id+"_bookmark",attrs:{disabled:"disabled","aria-label":"Bookmarks",tabindex:"-1"}}),this.bookmarkButton.setAttribute("type","button"),this.bookmarkButton.className="e-pv-tbar-btn e-pv-bookmark-button e-btn";var i=F("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-disable-icon e-pv-icon"});this.bookmarkButton.appendChild(i),new za({content:oo(function(){return this.pdfViewer.localeObj.getConstant("Bookmarks")},this),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.bookmarkButton),this.sideBarToolbar.appendChild(this.thumbnailButton),this.sideBarToolbar.appendChild(this.bookmarkButton)}this.thumbnailButton.addEventListener("click",this.sideToolbarOnClick),this.bookmarkButton.addEventListener("click",this.bookmarkButtonOnClick)},s.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},s.prototype.enableThumbnailButton=function(){this.thumbnailButton&&(this.thumbnailButton.removeAttribute("disabled"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-disable-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"))},s.prototype.enableBookmarkButton=function(){this.bookmarkButton&&(this.bookmarkButton.removeAttribute("disabled"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-disable-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"))},s.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=F("button",{id:this.pdfViewer.element.id+"_close_btn"}),this.closeDiv.setAttribute("aria-label","close button"),this.closeDiv.setAttribute("type","button"),this.closeDiv.className="e-btn e-pv-tbar-btn e-pv-title-close-div e-btn",this.closeDiv.style.left=this.pdfViewer.enableRtl?"8px":this.closeButtonLeft+"px";var e=F("span",{id:this.pdfViewer.element.id+"_close_icon",className:"e-pv-title-close-icon e-pv-icon"});this.closeDiv.appendChild(e),this.sideBarTitleContainer.appendChild(this.closeDiv),this.closeDiv.addEventListener("click",this.sideToolbarOnClose)},s.prototype.createResizeIcon=function(){this.resizeIcon=F("div",{id:this.pdfViewer.element.id+"_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setResizeIconTop(),this.resizeIcon.style.position="absolute",this.resizeIcon.addEventListener("click",this.sideToolbarOnClose),this.resizeIcon.addEventListener("mouseover",this.resizeIconMouseOver),this.sideBarResizer.appendChild(this.resizeIcon)},s.prototype.setResizeIconTop=function(){this.sideBarToolbar&&this.sideBarToolbar.clientHeight&&""===this.resizeIcon.style.top&&(this.resizeIcon.style.top=this.sideBarToolbar.clientHeight/2+"px")},s.prototype.setCommentPanelResizeIconTop=function(){this.commentPanelContainer&&this.commentPanelContainer.clientHeight&&this.commentPanelResizeIcon&&""===this.commentPanelResizeIcon.style.top&&(this.commentPanelResizeIcon.style.top=this.commentPanelContainer.clientHeight/2+"px")},Object.defineProperty(s.prototype,"outerContainerWidth",{get:function(){return this.mainContainerWidth||(this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth),this.mainContainerWidth},enumerable:!0,configurable:!0}),s.prototype.getViewerContainerScrollbarWidth=function(){return this.pdfViewerBase.viewerContainer.offsetWidth+this.pdfViewerBase.viewerContainer.offsetLeft-(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft)},Object.defineProperty(s.prototype,"sideToolbarWidth",{get:function(){return this.sideBarToolbar?this.sideBarToolbar.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sideBarContentContainerWidth",{get:function(){return this.sideBarContentContainer?this.sideBarContentContainer.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commentPanelContainerWidth",{get:function(){return this.commentPanelContainer?this.commentPanelContainer.offsetWidth:0},enumerable:!0,configurable:!0}),s.prototype.updateViewerContainerOnClose=function(){var e;(e=this).sideBarContentContainer&&(e.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?e.pdfViewerBase.viewerContainer.style.right=e.sideToolbarWidth+"px":e.pdfViewerBase.viewerContainer.style.left=e.sideToolbarWidth+"px",e.pdfViewerBase.viewerContainer.style.width=e.pdfViewer.element.clientWidth-e.sideToolbarWidth-e.getViewerContainerRight()+"px",e.pdfViewerBase.pageContainer.style.width=e.pdfViewerBase.viewerContainer.offsetWidth-e.getViewerContainerScrollbarWidth()+"px",this.restrictUpdateZoomValue&&e.pdfViewerBase.updateZoomValue())},s.prototype.updateViewerContainerOnExpand=function(){var e;(e=this).sideBarContentContainer&&(e.sideBarContentContainer.style.display="block",this.pdfViewer.enableRtl?e.pdfViewerBase.viewerContainer.style.right=e.getViewerContainerLeft()+"px":e.pdfViewerBase.viewerContainer.style.left=e.getViewerContainerLeft()+"px",e.pdfViewerBase.viewerContainer.style.width=e.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+"px",e.pdfViewerBase.pageContainer.style.width=e.pdfViewerBase.viewerContainer.clientWidth+"px",e.pdfViewerBase.updateZoomValue(),e.pdfViewer.enableThumbnail&&e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.pdfViewerBase.currentPageNumber-1))},s.prototype.getViewerContainerLeft=function(){return this.sideToolbarWidth?this.sideToolbarWidth+this.sideBarContentContainerWidth:0},s.prototype.getViewerContainerRight=function(){return this.commentPanelResizer?this.commentPanelContainerWidth+this.commentPanelResizer.clientWidth:0},s.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth},s.prototype.setThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.add("e-pv-thumbnail-view-button-selection"))},s.prototype.removeThumbnailSelectionIconTheme=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.remove("e-pv-thumbnail-view-button-selection"))},s.prototype.resetThumbnailIcon=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-disable-icon"))},s.prototype.resetThumbnailView=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewerBase.viewerContainer.style.left=this.pdfViewer.enableRtl?"1px":this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer&&(this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px"),this.thumbnailButton.setAttribute("disabled","disabled"),this.removeThumbnailSelectionIconTheme(),this.resetThumbnailIcon())},s.prototype.setBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.add("e-pv-bookmark-button-selection"))},s.prototype.removeBookmarkSelectionIconTheme=function(){this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.remove("e-pv-bookmark-button-selection"))},s.prototype.sideToolbarOnMouseup=function(e){e.target===this.sideBarToolbar&&this.pdfViewerBase.focusViewerContainer()},s.prototype.sideBarTitleOnMouseup=function(e){this.pdfViewerBase.focusViewerContainer()},s.prototype.openBookmarkcontentInitially=function(){if(document.getElementById(this.pdfViewer.element.id+"_thumbnail_view")&&(document.getElementById(this.pdfViewer.element.id+"_thumbnail_view").style.display="none"),this.removeThumbnailSelectionIconTheme(),this.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant("Bookmarks"),this.sideBarContent.setAttribute("aria-label","Bookmark View Panel"),this.pdfViewer.bookmarkViewModule.renderBookmarkcontent(),this.sideBarContentContainer&&("none"!==this.sideBarContentContainer.style.display?this.isThumbnailOpen?(this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand()):(this.removeBookmarkSelectionIconTheme(),this.isBookmarkOpen=!1,this.updateViewerContainerOnClose()):(this.sideBarContent.focus(),this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand())),this.isThumbnailOpen=!1,this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}},s.prototype.disableBookmarkButton=function(){this.sideBarContentContainer&&this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.sideBarContentContainer.style.display="none",this.bookmarkButton.setAttribute("disabled","disabled"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-disable-icon"))},s.prototype.clear=function(){E.isDevice||(this.removeBookmarkSelectionIconTheme(),this.removeThumbnailSelectionIconTheme(),this.closeCommentPanelContainer()),this.commentsContentContainer&&(this.commentsContentContainer.innerHTML="")},s.prototype.destroy=function(){var e=this.bookmarkButton,t=this.thumbnailButton;if(e&&e.ej2_instances&&e.ej2_instances.length>0&&e.ej2_instances[0].destroy(),t&&t.ej2_instances&&t.ej2_instances.length>0&&t.ej2_instances[0].destroy(),this.annotationMenuObj){var i=this.annotationMenuObj.element;i&&i.ej2_instances&&i.ej2_instances.length>0&&this.annotationMenuObj.destroy()}},s.prototype.getModuleName=function(){return"NavigationPane"},s}(),GAe=function(){function s(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createContextMenu=function(){var e=document.getElementsByClassName(this.pdfViewer.element.id+"_context_menu");if(e&&(this.contextMenuElement=e[0],this.contextMenuElement.children&&this.contextMenuElement.children.length>0)){var t=this.contextMenuElement.children[0];t.className=t.className+" e-pv-context-menu"}},s.prototype.open=function(e,t,i){this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenContextMenu",e,t)},s.prototype.close=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync("CloseContextMenu")},s.prototype.destroy=function(){this.previousAction="",this.contextMenuElement=null},s.prototype.OnItemSelected=function(e){this.pdfViewerBase.OnItemSelected("string"==typeof e?e:e[0])},s}(),bs={},VE=null,a2=null,YAe=30,QAe=30,XAe=30,ZAe=30,KAe=36,MS="e-spin-show",ES="e-spin-hide",UK="e-spin-material",GK="e-spin-material3",YK="e-spin-fabric",JAe="e-spin-bootstrap",QK="e-spin-bootstrap4",XK="e-spin-bootstrap5",ZK="e-spin-tailwind",KK="e-spin-fluent",JK="e-spin-high-contrast",PE="e-spinner-pane",l2="e-spinner-inner",NE="e-path-circle",$Ae="e-path-arc",eLe="e-spin-label",FE="e-spin-template";function DS(s,e){if(s.target){var t,i=c(e)?F:e,n=function wLe(s,e){var t=e("div",{});t.classList.add(PE);var i=e("div",{});return i.classList.add(l2),s.appendChild(t),t.appendChild(i),{wrap:t,innerWrap:i}}(s.target,i);if(c(s.cssClass)||n.wrap.classList.add(s.cssClass),c(s.template)&&c(VE)){var o=c(s.type)?function pLe(s){return window.getComputedStyle(s,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):s.type;t=function yLe(s,e){var t;switch(e){case"Material":t=YAe;break;case"Material3":t=QAe;break;case"Fabric":t=XAe;break;case"Bootstrap4":t=KAe;break;default:t=ZAe}return s=s?parseFloat(s+""):t,"Bootstrap"===e?s:s/2}(c(s.width)?void 0:s.width,o),function $K(s,e,t,i){var n=e.querySelector("."+l2),r=n.querySelector("svg");switch(c(r)||n.removeChild(r),s){case"Material":!function iLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"Material",radius:e},OE(s,i,0,UK),BE(e,s,"Material",UK)}(n,t);break;case"Material3":!function nLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"Material3",radius:e},OE(s,i,0,GK),BE(e,s,"Material3",GK)}(n,t);break;case"Fabric":!function hLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"Fabric",radius:e},RE(s,i,YK),zE(e,s,YK)}(n,t);break;case"Bootstrap":!function cLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"Bootstrap",radius:e},function uLe(s,e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=64,r=32,o=2;i.setAttribute("id",e),i.setAttribute("class",JAe),i.setAttribute("viewBox","0 0 "+n+" "+n),s.insertBefore(i,s.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",NE+"_"+a),l.setAttribute("r",o+""),l.setAttribute("transform","translate("+r+","+r+")"),i.appendChild(l)}}(s,i),function fLe(s,e){var t=s.querySelector("svg.e-spin-bootstrap");t.style.width=t.style.height=e+"px";for(var i=0,n=0,r=24,o=90,a=0;a<=7;a++){var l=h2(i,n,r,o),h=t.querySelector("."+NE+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),o=o>=360?0:o,o+=45}}(s,e)}(n,t);break;case"HighContrast":!function dLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"HighContrast",radius:e},RE(s,i,JK),zE(e,s,JK)}(n,t);break;case"Bootstrap4":!function rLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"Bootstrap4",radius:e},OE(s,i,0,QK),BE(e,s,"Bootstrap4",QK)}(n,t);break;case"Bootstrap5":!function sLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"Bootstrap5",radius:e},OE(s,i,0,XK),BE(e,s,"Bootstrap5",XK)}(n,t);break;case"Tailwind":!function oLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"Tailwind",radius:e},RE(s,i,ZK),zE(e,s,ZK)}(n,t);break;case"Fluent":!function aLe(s,e,t){var i=ic();bs[""+i]={timeOut:0,type:"Fluent",radius:e},RE(s,i,KK),zE(e,s,KK)}(n,t)}}(o,n.wrap,t),c(s.label)||function tLe(s,e,t){var i=t("div",{});i.classList.add(eLe),i.textContent=e,s.appendChild(i)}(n.innerWrap,s.label,i)}else{var r=c(s.template)?VE:s.template;n.wrap.classList.add(FE),function vLe(s,e,t){c(t)||s.classList.add(t),s.querySelector(".e-spinner-inner").innerHTML=e}(n.wrap,r,a2)}n.wrap.classList.add(ES),n=null}}function gLe(s,e){var t=[],i=s,n=e,r=!1,o=1;return function a(l){t.push(l),(l!==n||1===o)&&(l<=i&&l>1&&!r?l=parseFloat((l-.2).toFixed(2)):1===l?(l=7,l=parseFloat((l+.2).toFixed(2)),r=!0):l<8&&r?8===(l=parseFloat((l+.2).toFixed(2)))&&(r=!1):l<=8&&!r&&(l=parseFloat((l-.2).toFixed(2))),++o,a(l))}(i),t}function ic(){for(var s="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<5;t++)s+=e.charAt(Math.floor(Math.random()*e.length));return s}function RE(s,e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",e),n.setAttribute("class",t);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",NE);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",$Ae),s.insertBefore(n,s.firstChild),n.appendChild(r),n.appendChild(o)}function OE(s,e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("class",i),n.setAttribute("id",e);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",NE),s.insertBefore(n,s.firstChild),n.appendChild(r)}function eJ(s){(function SLe(s,e,t,i,n,r,o){var a=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),h=e-s,d=function CLe(s){return parseFloat(s)}(2*o.globalInfo[o.uniqueID].radius+""),p=tJ(d),u=-90*(o.globalInfo[o.uniqueID].count||0);!function f(m){var y=Math.max(0,Math.min((new Date).getTime()-l,i));(function g(m,y){if(!c(y.querySelector("svg.e-spin-material"))||!c(y.querySelector("svg.e-spin-material3"))){var b=void 0;if(c(y.querySelector("svg.e-spin-material"))||c(y.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?!c(y.querySelector("svg.e-spin-material3"))&&!c(y.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))&&(b=y.querySelector("svg.e-spin-material3")):b=y.querySelector("svg.e-spin-material"),!c(b)){var w=b.querySelector("path.e-path-circle");w.setAttribute("stroke-dashoffset",iJ(d,p,m,r)+""),w.setAttribute("transform","rotate("+u+" "+d/2+" "+d/2+")")}}})(t(y,s,h,i),m.container),a===m.globalInfo[m.uniqueID].previousId&&y<i?bs[m.uniqueID].timeOut=setTimeout(f.bind(null,m),1):eJ(m)}(o)})(1,149,xLe,1333,0,75,s),s.globalInfo[s.uniqueID].count=++s.globalInfo[s.uniqueID].count%4}function BE(s,e,t,i){var n=2*s,r=e.querySelector("svg."+i),o=r.querySelector("path.e-path-circle"),a=tJ(n),l=n/2+"px";r.setAttribute("viewBox","0 0 "+n+" "+n),r.style.width=r.style.height=n+"px",r.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function ILe(s,e){var t=s/2,i=e/2;return"M"+t+","+i+"A"+(t-i)+","+(t-i)+" 0 1 1 "+i+","+t}(n,a)),("Material"===t||"Material3"===t)&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",iJ(n,a,1,75)+""))}function tJ(s){return.1*s}function iJ(s,e,t,i){return(s-e)*Math.PI*(3*i/100-t/100)}function xLe(s,e,t,i){var n=(s/=i)*s,r=n*s;return e+t*(6*r*n+-15*n*n+10*r)}function zE(s,e,t){var i=s,n=s,r=2*s,l=e.querySelector("."+t),h=l.querySelector(".e-path-circle"),d=l.querySelector(".e-path-arc"),p=r/2+"px";h.setAttribute("d",function MLe(s,e,t){return["M",s,e,"m",-t,0,"a",t,t,0,1,0,2*t,0,"a",t,t,0,1,0,2*-t,0].join(" ")}(i,n,s)),d.setAttribute("d",function TLe(s,e,t,i,n){var r=h2(s,e,t,n),o=h2(s,e,t,i);return["M",r.x,r.y,"A",t,t,0,0,0,o.x,o.y].join(" ")}(i,n,s,315,45)),l.setAttribute("viewBox","0 0 "+r+" "+r),l.style.transformOrigin=p+" "+p+" "+p,l.style.width=l.style.height=r+"px"}function h2(s,e,t,i){var n=(i-90)*Math.PI/180;return{x:s+t*Math.cos(n),y:e+t*Math.sin(n)}}function ly(s){nJ(s,!1),s=null}function nJ(s,e){var t;if(s&&(t=s.classList.contains(PE)?s:s.querySelector("."+PE)),s&&t){var i=t.querySelector("."+l2);if(e?!t.classList.contains(FE)&&!t.classList.contains(ES):!t.classList.contains(FE)&&!t.classList.contains(MS)){var r=t.querySelector("svg");if(c(r))return;var o=r.getAttribute("id");switch(bs[""+o].isAnimate=!e,bs[""+o].type){case"Material":case"Material3":e?clearTimeout(bs[o].timeOut):function lLe(s,e,t){var i={};bs[""+e].timeOut=0,i[""+e]=function bLe(s,e,t,i){return{radius:e,count:t,previousId:i}}(0,t,0,0),eJ({uniqueID:e,container:s,globalInfo:i,timeOutVar:0})}(i,o,bs[o].radius);break;case"Bootstrap":e?clearTimeout(bs[o].timeOut):function mLe(s){for(var t=s.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)r(s.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,gLe(i,i),t);function r(o,a,l,h,d){var p=0;!function u(f){bs[""+d].isAnimate&&(++p,o.setAttribute("r",f+""),p>=h.length&&(p=0),bs[""+d].timeOut=setTimeout(u.bind(null,h[parseInt(p.toString(),10)]),18))}(a)}}(i)}}e?ze(t,[ES],[MS]):ze(t,[MS],[ES]),s=null}}function Ul(s){nJ(s,!0),s=null}var ALe=function(){function s(e,t){this.pdfViewer=null,this.pdfViewerBase=null,this.totalPageElement=null,this.currentPageBoxElementContainer=null,this.currentPageBoxElement=null,this.firstPageElement=null,this.previousPageElement=null,this.nextPageElement=null,this.lastPageElement=null,this.zommOutElement=null,this.zoomInElement=null,this.zoomDropDownElement=null,this.selectToolElement=null,this.handToolElement=null,this.undoElement=null,this.redoElement=null,this.commentElement=null,this.submitFormButton=null,this.searchElement=null,this.annotationElement=null,this.printElement=null,this.downloadElement=null,this.highlightElement=null,this.underlineElement=null,this.strikeThroughElement=null,this.shapeElement=null,this.calibrateElement=null,this.stampElement=null,this.freeTextElement=null,this.signatureElement=null,this.inkElement=null,this.annotationFontSizeInputElement=null,this.annotationFontFamilyInputElement=null,this.annotationColorElement=null,this.annotationStrokeColorElement=null,this.annotationThicknessElement=null,this.annotationOpacityElement=null,this.annotationFontColorElement=null,this.annotationFontFamilyElement=null,this.annotationFontSizeElement=null,this.annotationTextAlignElement=null,this.annotationTextColorElement=null,this.annotationTextPropertiesElement=null,this.annotationDeleteElement=null,this.annotationCloseElement=null,this.annotationCommentPanelElement=null,this.mobileToolbarContainerElement=null,this.mobileSearchPreviousOccurenceElement=null,this.mobileSearchNextOccurenceElement=null,this.cssClass="e-overlay",this.disableClass=" e-overlay",this.editAnnotationButtonElement=null,this.pdfViewer=e,this.pdfViewerBase=t,this.findToolbarElements()}return s.prototype.findToolbarElements=function(){this.totalPageElement=this.pdfViewerBase.getElement("_totalPage").children[0],this.currentPageBoxElementContainer=this.pdfViewerBase.getElement("_currentPageInput"),this.currentPageBoxElement=this.pdfViewerBase.getElement("_currentPageInput").children[0].children[0],this.firstPageElement=this.pdfViewerBase.getElement("_firstPage"),this.previousPageElement=this.pdfViewerBase.getElement("_previousPage"),this.nextPageElement=this.pdfViewerBase.getElement("_nextPage"),this.lastPageElement=this.pdfViewerBase.getElement("_lastPage"),this.zommOutElement=this.pdfViewerBase.getElement("_zoomOut"),this.zoomInElement=this.pdfViewerBase.getElement("_zoomIn"),this.zoomDropDownElement=this.pdfViewerBase.getElement("_zoomDropDown"),this.selectToolElement=this.pdfViewerBase.getElement("_selectTool"),this.handToolElement=this.pdfViewerBase.getElement("_handTool"),this.undoElement=this.pdfViewerBase.getElement("_undo"),this.redoElement=this.pdfViewerBase.getElement("_redo"),this.commentElement=this.pdfViewerBase.getElement("_comment"),this.submitFormButton=this.pdfViewerBase.getElement("_submitFormButton"),this.searchElement=this.pdfViewerBase.getElement("_search"),this.annotationElement=this.pdfViewerBase.getElement("_annotation"),this.editAnnotationButtonElement=this.annotationElement.children[0],this.editAnnotationButtonElement.classList.add("e-pv-tbar-btn"),this.printElement=this.pdfViewerBase.getElement("_print"),this.downloadElement=this.pdfViewerBase.getElement("_download"),this.highlightElement=this.pdfViewerBase.getElement("_highLight"),this.underlineElement=this.pdfViewerBase.getElement("_underline"),this.strikeThroughElement=this.pdfViewerBase.getElement("_strikethrough"),this.shapeElement=this.pdfViewerBase.getElement("_annotation_shapes"),this.calibrateElement=this.pdfViewerBase.getElement("_annotation_calibrate"),this.stampElement=this.pdfViewerBase.getElement("_annotation_stamp"),this.freeTextElement=this.pdfViewerBase.getElement("_annotation_freeTextEdit"),this.signatureElement=this.pdfViewerBase.getElement("_annotation_signature"),this.inkElement=this.pdfViewerBase.getElement("_annotation_ink"),this.annotationFontSizeInputElement=this.pdfViewerBase.getElement("_annotation_fontsize").children[0].children[0],this.annotationFontFamilyInputElement=this.pdfViewerBase.getElement("_annotation_fontname").children[0].children[0],this.annotationColorElement=this.pdfViewerBase.getElement("_annotation_color"),this.annotationStrokeColorElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.annotationThicknessElement=this.pdfViewerBase.getElement("_annotation_thickness"),this.annotationOpacityElement=this.pdfViewerBase.getElement("_annotation_opacity"),this.annotationFontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationFontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.annotationFontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.annotationTextAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.annotationTextColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationTextPropertiesElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.annotationDeleteElement=this.pdfViewerBase.getElement("_annotation_delete"),this.annotationCommentPanelElement=this.pdfViewerBase.getElement("_annotation_commentPanel"),this.annotationCloseElement=this.pdfViewerBase.getElement("_annotation_close"),this.mobileToolbarContainerElement=this.pdfViewerBase.getElement("_mobileToolbarContainer"),this.mobileSearchPreviousOccurenceElement=this.pdfViewerBase.getElement("_prev_occurrence"),this.mobileSearchNextOccurenceElement=this.pdfViewerBase.getElement("_next_occurrence")},s.prototype.updateTotalPage=function(){this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString()},s.prototype.updateCurrentPage=function(e){this.currentPageBoxElement.value=e.toString()},s.prototype.loadDocument=function(){this.pdfViewer.enableNavigation&&(this.currentPageBoxElementContainer.classList.remove(this.cssClass),this.currentPageBoxElement.value="1",this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString(),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass),this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass),1===this.pdfViewerBase.pageCount&&(this.nextPageElement.classList.contains(this.cssClass)||(this.nextPageElement.className+=this.disableClass),this.lastPageElement.classList.contains(this.cssClass)||(this.lastPageElement.className+=this.disableClass))),this.pdfViewer.enableMagnification&&(this.zoomInElement.classList.remove(this.cssClass),this.zommOutElement.classList.remove(this.cssClass),this.zoomDropDownElement.classList.remove(this.cssClass)),this.pdfViewer.enableTextSelection&&(this.selectToolElement.classList.remove(this.cssClass),this.selectItem(this.pdfViewer.toolbar.SelectToolElement)),this.handToolElement.classList.remove(this.cssClass),this.pdfViewer.enableStickyNotesAnnotation&&this.commentElement.classList.remove(this.cssClass),this.pdfViewer.enableTextSearch&&this.searchElement.classList.remove(this.cssClass),this.pdfViewer.isFormFieldDocument&&this.submitFormButton.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableAnnotationToolbar&&this.annotationElement.classList.remove(this.cssClass),this.pdfViewer.enablePrint&&this.printElement.classList.remove(this.cssClass),this.pdfViewer.enableDownload&&this.downloadElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableTextMarkupAnnotation&&(this.highlightElement.classList.remove(this.cssClass),this.underlineElement.classList.remove(this.cssClass),this.strikeThroughElement.classList.remove(this.cssClass)),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableShapeAnnotation&&this.shapeElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.calibrateElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableStampAnnotations&&this.stampElement.classList.remove(this.cssClass),this.pdfViewer.enableFreeText&&this.freeTextElement.classList.remove(this.cssClass),this.pdfViewer.enableHandwrittenSignature&&this.signatureElement.classList.remove(this.cssClass),this.pdfViewer.enableInkAnnotation&&this.inkElement.classList.remove(this.cssClass),this.pdfViewer.enableCommentPanel&&this.annotationCommentPanelElement.classList.remove(this.cssClass)},s.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},s.prototype.deselectItem=function(e){e&&e.classList.remove("e-pv-select")},s.prototype.showAnnotationToolbar=function(e){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(e[0]),e[0]?this.pdfViewer.toolbar.selectItem(this.editAnnotationButtonElement):(this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewerBase.focusViewerContainer())},s.prototype.closeAnnotationToolbar=function(){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(!1),this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewerBase.navigationPane.closeCommentPanelContainer()},s.prototype.resetToolbar=function(){this.pdfViewer.enableToolbar&&(this.currentPageBoxElement.value="0",this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+"0",this.isEnabled(this.currentPageBoxElementContainer)||(this.currentPageBoxElementContainer.className+=this.disableClass),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass),this.isEnabled(this.nextPageElement)||(this.nextPageElement.className+=this.disableClass),this.isEnabled(this.lastPageElement)||(this.lastPageElement.className+=this.disableClass),this.isEnabled(this.zoomInElement)||(this.zoomInElement.className+=this.disableClass),this.isEnabled(this.zommOutElement)||(this.zommOutElement.className+=this.disableClass),this.isEnabled(this.zoomDropDownElement)||(this.zoomDropDownElement.className+=this.disableClass),this.isEnabled(this.selectToolElement)||(this.selectToolElement.className+=this.disableClass),this.isEnabled(this.handToolElement)||(this.handToolElement.className+=this.disableClass),this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass),this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass),this.isEnabled(this.commentElement)||(this.commentElement.className+=this.disableClass),this.isEnabled(this.searchElement)||(this.searchElement.className+=this.disableClass),this.isEnabled(this.submitFormButton)||(this.submitFormButton.className+=this.disableClass),this.isEnabled(this.annotationElement)||(this.annotationElement.className+=this.disableClass),this.isEnabled(this.printElement)||(this.printElement.className+=this.disableClass),this.isEnabled(this.downloadElement)||(this.downloadElement.className+=this.disableClass)),this.pdfViewer.enableAnnotationToolbar&&(this.isEnabled(this.highlightElement)||(this.highlightElement.className+=this.disableClass),this.isEnabled(this.underlineElement)||(this.underlineElement.className+=this.disableClass),this.isEnabled(this.strikeThroughElement)||(this.strikeThroughElement.className+=this.disableClass),this.isEnabled(this.shapeElement)||(this.shapeElement.className+=this.disableClass),this.isEnabled(this.calibrateElement)||(this.calibrateElement.className+=this.disableClass),this.isEnabled(this.stampElement)||(this.stampElement.className+=this.disableClass),this.isEnabled(this.freeTextElement)||(this.freeTextElement.className+=this.disableClass),this.isEnabled(this.signatureElement)||(this.signatureElement.className+=this.disableClass),this.isEnabled(this.inkElement)||(this.inkElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextColorElement)||(this.annotationTextColorElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass))},s.prototype.EnableDeleteOption=function(e){null!==this.annotationDeleteElement&&(e?this.annotationDeleteElement.classList.remove(this.cssClass):this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass))},s.prototype.pageChanged=function(e){this.pdfViewer.enableNavigation&&(this.currentPageBoxElement.value=e.toString()),e===this.pdfViewer.pageCount&&(this.isEnabled(this.nextPageElement)||(this.nextPageElement.className+=this.disableClass),this.previousPageElement.classList.remove(this.cssClass),this.isEnabled(this.lastPageElement)||(this.lastPageElement.className+=this.disableClass),this.firstPageElement.classList.remove(this.cssClass)),e<this.pdfViewer.pageCount&&1!==e&&(this.firstPageElement.classList.remove(this.cssClass),this.previousPageElement.classList.remove(this.cssClass),this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass)),1===e&&(this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass))},s.prototype.updateUndoRedoButton=function(e,t){"undo"===e&&(t?this.undoElement.classList.remove(this.cssClass):this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass)),"redo"===e&&(t?this.redoElement.classList.remove(this.cssClass):this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass))},s.prototype.disableUndoRedoButton=function(){this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass),this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass)},s.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){e?(this.annotationColorElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass)),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass)},s.prototype.enableAnnotationPropertiesTool=function(e,t){t&&(e?(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.pdfViewer.enableShapeLabel&&(this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass)),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)):(this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass)))},s.prototype.enableFreeTextAnnotationPropertiesTools=function(e,t){t&&e&&(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass),this.annotationTextAlignElement.classList.remove(this.cssClass),this.annotationTextPropertiesElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass))},s.prototype.enableStampAnnotationPropertiesTools=function(e,t){e?(this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass)),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},s.prototype.enableSignaturePropertiesTools=function(e,t){e?(this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass)),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},s.prototype.annotationAdd=function(){this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},s.prototype.annotationUnSelect=function(){this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass)},s.prototype.annotationSelect=function(e){"FreeText"===e&&(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass),this.annotationTextAlignElement.classList.remove(this.cssClass),this.annotationTextPropertiesElement.classList.remove(this.cssClass)),("Shape"===e||"Measure"===e)&&(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)),"TextMarkup"===e&&(this.annotationColorElement.classList.remove(this.cssClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)},s.prototype.updateFontFamilyInIcon=function(e){this.annotationFontFamilyInputElement.value=e},s.prototype.updateFontSizeInIcon=function(e){var t=e.toString()+"px";this.annotationFontSizeInputElement.value=t},s.prototype.enableSearchItems=function(e){e?(this.mobileSearchPreviousOccurenceElement.classList.remove(this.cssClass),this.mobileSearchNextOccurenceElement.classList.remove(this.cssClass)):(this.isEnabled(this.mobileSearchPreviousOccurenceElement)||(this.mobileSearchPreviousOccurenceElement.className+=this.disableClass),this.isEnabled(this.mobileSearchNextOccurenceElement)||(this.mobileSearchNextOccurenceElement.className+=this.disableClass))},s.prototype.tapOnMobileDevice=function(e){null!=this.mobileToolbarContainerElement&&(this.mobileToolbarContainerElement.style.display=e?"none":"block")},s.prototype.isEnabled=function(e){return e.classList.contains(this.cssClass)},s}(),PLe=function(){function s(e){var t=this;this.pageSize=[],this.pageCount=0,this.isReRenderRequired=!0,this.currentPageNumber=0,this.activeElements=new PAe,this.mouseDownEvent=null,this.isDocumentLoaded=!1,this.renderedPagesList=[],this.pageGap=8,this.signatureAdded=!1,this.isFreeTextSelected=!1,this.pageLeft=5,this.sessionLimit=1e3,this.pageStopValue=300,this.toolbarHeight=56,this.pageLimit=0,this.previousPage=0,this.isViewerMouseDown=!1,this.isViewerMouseWheel=!1,this.scrollPosition=0,this.sessionStorage=[],this.isLoadedFormFieldAdded=!1,this.pointerCount=0,this.pointersForTouch=[],this.isPasswordAvailable=!1,this.passwordData="",this.reRenderedCount=0,this.mouseX=0,this.mouseY=0,this.mouseLeft=0,this.mouseTop=0,this.touchClientX=0,this.touchClientY=0,this.previousTime=0,this.currentTime=0,this.isTouchScrolled=!1,this.isLongTouchPropagated=!1,this.longTouchTimer=null,this.isViewerContainerDoubleClick=!1,this.dblClickTimer=null,this.pinchZoomStorage=[],this.isTextSelectionDisabled=!1,this.isPanMode=!1,this.dragX=0,this.dragY=0,this.isScrollbarMouseDown=!1,this.scrollX=0,this.scrollY=0,this.ispageMoved=!1,this.isThumb=!1,this.isTapHidden=!1,this.singleTapTimer=null,this.tapCount=0,this.inputTapCount=0,this.isInitialLoaded=!1,this.annotationPageList=[],this.importPageList=[],this.isImportAction=!1,this.isImportedAnnotation=!1,this.isAnnotationCollectionRemoved=!1,this.tool=null,this.action="Select",this.eventArgs=null,this.inAction=!1,this.isMouseDown=!1,this.isStampMouseDown=!1,this.stampAdded=!1,this.customStampCount=0,this.isDynamicStamp=!1,this.isMixedSizeDocument=!1,this.highestWidth=0,this.highestHeight=0,this.customStampCollection=[],this.isAlreadyAdded=!1,this.isWebkitMobile=!1,this.isFreeTextContextMenu=!1,this.isSelection=!1,this.isAddAnnotation=!1,this.annotationComments=null,this.isToolbarSignClicked=!1,this.signatureCount=0,this.isSignatureAdded=!1,this.isNewSignatureAdded=!1,this.isInitialPageMode=!1,this.documentAnnotationCollections=null,this.annotationRenderredList=[],this.annotationStorage={},this.formFieldStorage={},this.isStorageExceed=!1,this.isFormStorageExceed=!1,this.isNewStamp=!1,this.downloadCollections={},this.isAnnotationAdded=!1,this.annotationEvent=null,this.isAnnotationDrawn=!1,this.isAnnotationSelect=!1,this.isAnnotationMouseDown=!1,this.isAnnotationMouseMove=!1,this.validateForm=!1,this.isMinimumZoom=!1,this.documentLoaded=!1,this.tileRenderCount=0,this.tileRequestCount=0,this.isTileImageRendered=!1,this.isDataExits=!1,this.requestLists=[],this.tilerequestLists=[],this.textrequestLists=[],this.renderThumbnailImages=!1,this.pageRenderCount=2,this.isInkAdded=!1,this.inkCount=0,this.isAddedSignClicked=!1,this.imageCount=0,this.isMousedOver=!1,this.isFormFieldSelect=!1,this.isFormFieldMouseDown=!1,this.isFormFieldMouseMove=!1,this.isFormFieldMousedOver=!1,this.isPassword=!1,this.digitalSignaturePages=[],this.isDrawnCompletely=!1,this.isAddComment=!1,this.drawSignatureWithTool=!1,this.formFieldCollection=[],this.nonFillableFields={},this.isInitialField=!1,this.isTouchDesignerMode=!1,this.isPrint=!1,this.isPDFViewerJson=!1,this.isJsonImported=!1,this.isJsonExported=!1,this.isPageRotated=!1,this.downloadFileName="",this.isFocusField=!1,this.isTouchPad=!1,this.isMacGestureActive=!1,this.macGestureStartScale=0,this.zoomInterval=5,this.isTaggedPdf=!1,this.accessibilityTagsHandler=null,this.accessibilityTagsCollection=[],this.pageRequestListForAccessibilityTags=[],this.enableAccessibilityMultiPageRequest=!0,this.focusField=[],this.isDeviceiOS=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,this.isMacSafari=navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")&&!this.isDeviceiOS,this.clearSessionStorage=function(){var i;i=E.isIE||"edge"===E.info.name?decodeURI(window.sessionStorage.getItem("hashId")):window.sessionStorage.getItem("hashId");var n=window.sessionStorage.getItem("documentLiveCount");if(null!==i){var r={hashId:i,documentLiveCount:n,action:"Unload",elementId:t.pdfViewer.element.id},o=window.sessionStorage.getItem("unload"),a=window.sessionStorage.getItem("serviceURL");if(a&&"undefined"!==a){if("keepalive"in new Request("")){var h=t.setUnloadRequestHeaders();fetch(a+"/"+o,{method:"POST",credentials:t.pdfViewer.ajaxRequestSettings.withCredentials?"include":"omit",headers:h,body:JSON.stringify(r)})}}else X()&&t.clearCache(o,r,t)}window.sessionStorage.removeItem(t.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(t.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(t.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(t.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(t.documentId+"_formfields"),window.sessionStorage.removeItem(t.documentId+"_formDesigner"),window.sessionStorage.removeItem(t.documentId+"_annotations_sign"),window.sessionStorage.removeItem(t.documentId+"_pagedata"),window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload")},this.onWindowResize=function(i){var n=null;n=t,t.pdfViewer.enableRtl?(n.viewerContainer.style.right=(n.navigationPane.sideBarToolbar?n.navigationPane.getViewerContainerLeft():0)+"px",n.viewerContainer.style.left=(n.navigationPane.commentPanelContainer?n.navigationPane.commentPanelContainer.offsetWidth:0)+"px"):(n.viewerContainer.style.left=(n.navigationPane.sideBarToolbar?n.navigationPane.getViewerContainerLeft():0)+"px",n.viewerContainer.style.right=(n.navigationPane.commentPanelContainer?n.navigationPane.commentPanelContainer.offsetWidth:0)+"px");var o=(n.pdfViewer.element.clientWidth>0?n.pdfViewer.element.clientWidth:n.pdfViewer.element.style.width)-(n.navigationPane.sideBarToolbar?n.navigationPane.getViewerContainerLeft():0)-(n.navigationPane.commentPanelContainer?n.navigationPane.getViewerContainerRight():0);if(n.viewerContainer.style.width=o+"px",n.pdfViewer.toolbarModule){var a=X()?n.pdfViewer.element.querySelector(".e-pv-toolbar"):n.getElement("_toolbarContainer"),l=0,h=0;if(a&&(l=a.getBoundingClientRect().height),n.isAnnotationToolbarHidden()||E.isDevice&&!t.pdfViewer.enableDesktopMode){if(0===l&&t.navigationPane.isNavigationToolbarVisible&&(l=n.getElement("_navigationToolbar").getBoundingClientRect().height),!n.isFormDesignerToolbarHidded()){var p=n.getElement("_formdesigner_toolbar");h=p?p.getBoundingClientRect().height:0}n.viewerContainer.style.height=n.updatePageHeight(n.pdfViewer.element.getBoundingClientRect().height,l+h)}else{var u=X()?n.pdfViewer.element.querySelector(".e-pv-annotation-toolbar"):n.getElement("_annotation_toolbar"),f=0;u&&(f=u.getBoundingClientRect().height),n.viewerContainer.style.height=n.updatePageHeight(n.pdfViewer.element.getBoundingClientRect().height,l+f)}}else n.viewerContainer.style.height=n.updatePageHeight(n.pdfViewer.element.getBoundingClientRect().height,0);if(n.pdfViewer.bookmarkViewModule&&E.isDevice&&!t.pdfViewer.enableDesktopMode){var g=n.getElement("_bookmarks_container");g&&(g.style.height=n.updatePageHeight(n.pdfViewer.element.getBoundingClientRect().height,0))}"0px"===n.viewerContainer.style.height&&("auto"===n.pdfViewer.height.toString()?(n.pdfViewer.height=500,n.viewerContainer.style.height=n.pdfViewer.height+"px"):n.viewerContainer.style.height=n.pdfViewer.element.style.height),"0px"===n.viewerContainer.style.width&&("auto"===n.pdfViewer.width.toString()?(n.pdfViewer.width=500,n.viewerContainer.style.width=n.pdfViewer.width+"px"):n.viewerContainer.style.width=n.pdfViewer.element.style.width),n.pageContainer.style.width=n.viewerContainer.clientWidth+"px",0===n.viewerContainer.clientWidth&&(n.pageContainer.style.width=n.pdfViewer.element.style.width),X()||n.pdfViewer.toolbarModule&&n.pdfViewer.toolbarModule.onToolbarResize(n.navigationPane.sideBarToolbar?n.navigationPane.getViewerMainContainerWidth():n.pdfViewer.element.clientWidth),t.pdfViewer.enableToolbar&&t.pdfViewer.thumbnailViewModule&&n.pdfViewer.thumbnailViewModule.gotoThumbnailImage(n.currentPageNumber-1),n.pdfViewer.textSearchModule&&(!E.isDevice||t.pdfViewer.enableDesktopMode)&&n.pdfViewer.textSearchModule.textSearchBoxOnResize(),0!==o&&(n.navigationPane.isBookmarkListOpen||n.updateZoomValue()),E.isDevice&&!t.pdfViewer.enableDesktopMode?(n.mobileScrollerContainer.style.left=o-parseFloat(n.mobileScrollerContainer.style.width)+"px",n.mobilePageNoContainer.style.left=o/2-parseFloat(n.mobilePageNoContainer.style.width)/2+"px",n.mobilePageNoContainer.style.top=n.pdfViewer.element.clientHeight/2+"px",n.updateMobileScrollerPosition()):(n.navigationPane.setResizeIconTop(),n.navigationPane.setCommentPanelResizeIconTop(),i&&"resize"===i.type&&n.signatureModule.updateCanvasSize()),n.navigationPane.sideBarToolbar&&(n.navigationPane.sideBarToolbar.style.height=n.viewerContainer.style.height)},this.viewerContainerOnMousedown=function(i){t.isFreeTextContextMenu=!1;var n=!1;t.isSelection=!0;var r=i.target;if(0===i.button&&!t.getPopupNoteVisibleStatus()&&!t.isClickedOnScrollBar(i,!1)){t.isViewerMouseDown=!0,1===i.detail&&"e-pdfviewer-formFields"!==r.className&&"free-text-input"!==r.className&&(n=!0,t.focusViewerContainer(!0)),t.scrollPosition=t.viewerContainer.scrollTop/t.getZoomFactor(),t.mouseX=i.clientX,t.mouseY=i.clientY,t.mouseLeft=i.clientX,t.mouseTop=i.clientY;var o=!!document.documentMode;t.pdfViewer.textSelectionModule&&!t.isClickedOnScrollBar(i,!0)&&!t.isTextSelectionDisabled&&(!o&&"e-pdfviewer-formFields"!==r.className&&"e-pdfviewer-ListBox"!==r.className&&"e-pv-formfield-dropdown"!==r.className&&"e-pv-formfield-listbox"!==r.className&&i.preventDefault(),"e-pv-droplet"!==r.className&&t.pdfViewer.textSelectionModule.clearTextSelection())}t.isClickedOnScrollBar(i,!1)&&(t.isViewerMouseDown=!0),t.isPanMode&&(t.dragX=i.pageX,t.dragY=i.pageY,t.viewerContainer.contains(i.target)&&i.target!==t.viewerContainer&&i.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="grabbing")),t.isShapeBasedAnnotationsEnabled()&&(t.isAnnotationDrawn||!("e-pv-page-container"===r.className||"foreign-object"===r.className&&isNaN(t.activeElements.activePageID)))&&t.diagramMouseDown(i),t.pdfViewer.annotation&&t.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&(n||(t.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement=!1,t.updateCommentPanel(),n=!0)),X()&&t.mouseDownHandler(i)},this.viewerContainerOnMouseup=function(i){if(!t.getPopupNoteVisibleStatus()){t.isViewerMouseDown&&(t.scrollHoldTimer&&(clearTimeout(t.scrollHoldTimer),t.scrollHoldTimer=null),t.scrollPosition*t.getZoomFactor()!==t.viewerContainer.scrollTop&&t.pageViewScrollChanged(t.currentPageNumber));var n=!1;i.target&&("e-pv-show-designer-name"==i.target.className&&""!=i.target.id.split("_",1)&&(n=document.getElementById(i.target.id.split("_",1)).disabled),"foreign-object"==i.target.className&&i.target.children[0]&&(n=i.target.children[0].disabled)),n&&t.pdfViewer.annotation&&t.pdfViewer.annotation.clearSelection(),t.isShapeBasedAnnotationsEnabled()&&!n&&(t.isAnnotationDrawn||"DrawTool"!==t.action)&&(t.diagramMouseUp(i),t.pdfViewer.annotation&&t.pdfViewer.annotation.onAnnotationMouseUp()),t.pdfViewer.selectedItems.formFields.length>0?!c(t.pdfViewer.toolbar)&&!c(t.pdfViewer.toolbar.formDesignerToolbarModule)&&!E.isDevice&&t.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0):!c(t.pdfViewer.toolbar)&&!c(t.pdfViewer.toolbar.formDesignerToolbarModule)&&!E.isDevice&&t.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!1),t.isSelection=!1;var r=document.getElementById(t.pdfViewer.element.id+"_commantPanel");if(r&&"block"===r.style.display&&t.pdfViewer.selectedItems&&0!==t.pdfViewer.selectedItems.annotations.length){var o=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.pdfViewer.currentPageNumber);o&&o.ej2_instances[0].expandItem(!0);var a=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);a&&(a.classList.contains("e-pv-comments-border")||a.firstChild.click())}if(0===i.button&&!t.isClickedOnScrollBar(i,!1)){var l=i.target,h=i.clientX,d=i.clientY,p=t.getZoomFactor(),u=t.currentPageNumber;if(l){var f=l.id.split("_text_")[1]||l.id.split("_textLayer_")[1]||l.id.split("_annotationCanvas_")[1]||l.id.split("_pageDiv_")[1]||l.id.split("_freeText_")[1]||l.id.split("_")[1];if(u=parseInt(f),isNaN(u)&&t.pdfViewer.formFieldCollection){var g=t.pdfViewer.formFieldCollection.filter(function(b){return b.id==l.id||b.id==l.id.split("_")[0]});g.length>0&&(u=g[0].pageIndex)}}var m=t.getElement("_pageDiv_"+u);if(m){var y=m.getBoundingClientRect();h=(i.clientX-y.left)/p,d=(i.clientY-y.top)/p}l&&l.classList&&!l.classList.contains("e-pv-hyperlink")&&!l.classList.contains("e-pv-page-container")&&(t.pdfViewer.firePageClick(h,d,u+1),t.pdfViewer.formFieldsModule&&!t.pdfViewer.formDesignerModule&&t.pdfViewer.formFieldsModule.removeFocus()),t.isTextMarkupAnnotationModule()&&!t.isToolbarInkClicked&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(i),t.pdfViewer.formDesignerModule&&!t.pdfViewer.annotationModule&&t.pdfViewer.formDesignerModule.updateCanvas(u),t.viewerContainer.contains(i.target)&&i.target!==t.viewerContainer&&i.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab")}t.isViewerMouseDown=!1}},this.detectTouchPad=function(i){t.isTouchPad=i.wheelDeltaY?i.wheelDeltaY===-3*i.deltaY||Math.abs(i.deltaY)<60:0===i.deltaMode},this.handleMacGestureStart=function(i){i.preventDefault(),i.stopPropagation(),t.macGestureStartScale=t.pdfViewer.magnification.zoomFactor},this.handleMacGestureChange=function(i){i.preventDefault(),i.stopPropagation();var n=i.clientX,r=i.clientY,o=Number((t.macGestureStartScale*i.scale).toFixed(2));t.isMacGestureActive||(t.isMacGestureActive=!0,t.pdfViewer.magnification.initiateMouseZoom(n,r,100*o),setTimeout(function(){t.isMacGestureActive=!1},50))},this.handleMacGestureEnd=function(i){i.preventDefault(),i.stopPropagation()},this.viewerContainerOnMouseWheel=function(i){if(t.isViewerMouseWheel=!0,t.getRerenderCanvasCreated()&&i.preventDefault(),i.ctrlKey){var n=25;(t.pdfViewer.magnificationModule?t.pdfViewer.magnification.zoomFactor:t.pdfViewer.zoomValue<1)&&(n=10),(t.pdfViewer.magnificationModule?t.pdfViewer.magnification.zoomFactor:t.pdfViewer.zoomValue>=2)&&(n=50),t.isTouchPad&&!t.isMacSafari&&(n/=t.zoomInterval),t.pdfViewer.magnificationModule&&t.pdfViewer.magnification.initiateMouseZoom(i.x,i.y,i.wheelDelta>0?100*t.pdfViewer.magnification.zoomFactor+n:100*t.pdfViewer.magnification.zoomFactor-n),t.isTouchPad=!1}t.pdfViewer.magnificationModule&&(t.pdfViewer.magnificationModule.pageRerenderOnMouseWheel(),i.ctrlKey&&i.preventDefault(),t.pdfViewer.magnificationModule.fitPageScrollMouseWheel(i)),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.isViewerMouseDown&&(i.target.classList.contains("e-pv-text")||t.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(t.currentPageNumber-1))},this.onWindowKeyDown=function(i){var r=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&i.metaKey;if(!(t.isFreeTextAnnotationModule()&&t.pdfViewer.annotationModule&&(!0===t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus||!0===t.pdfViewer.annotationModule.inputElementModule.isInFocus)||i.ctrlKey&&r))switch(i.keyCode){case 46:var o=document.activeElement;"INPUT"!==o.tagName&&"TEXTAREA"!==o.tagName&&!o.isContentEditable&&t.DeleteKeyPressed(i);break;case 27:if(t.pdfViewer.toolbar){if(t.pdfViewer.toolbar.addInkAnnotation(),t.pdfViewer.toolbar.deSelectCommentAnnotation(),t.pdfViewer.toolbar.updateStampItems(),t.pdfViewer.toolbar.annotationToolbarModule&&(X()?t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor():t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems()),t.pdfViewer.isFormDesignerToolbarVisible&&document.getElementById("FormField_helper_html_element")){var a=document.getElementById("FormField_helper_html_element");a&&a.remove()}t.pdfViewer.tool="",t.focusViewerContainer()}break;case 13:if(t.pdfViewer.formDesignerModule&&"keydown"===i.type&&13===i.keyCode&&i.target&&(i.target.id||i.target.tabIndex)&&t.pdfViewer.formFieldCollections){var l=void 0;l=i.target.tabIndex&&!i.target.id?i.target.parentElement.id.split("_content_html_element")[0]:i.target.id.split("_")[0];for(var d=0;d<t.pdfViewer.formFieldCollections.length;d++){var p=t.pdfViewer.formFieldCollections[parseInt(d.toString(),10)];l===p.id&&("SignatureField"===p.type||"InitialField"===p.type)&&(t.pdfViewer.fireFormFieldClickEvent("formFieldClicked",t.pdfViewer.formFieldCollections[parseInt(d.toString(),10)]),i.preventDefault())}}break;case 32:if(t.pdfViewer.formDesignerModule&&"keydown"===i.type&&32===i.keyCode&&i.target&&i.target.id&&t.pdfViewer.formFields)for(d=0;d<t.pdfViewer.formFields.length;d++){var u=t.pdfViewer.formFields[parseInt(d.toString(),10)];if(i.target.id.split("_")[0]===u.id&&"Checkbox"===u.formFieldAnnotationType){t.pdfViewer.formDesignerModule.setCheckBoxState(i),i.preventDefault();break}}break;case 9:if(i.target&&(i.target.id||i.target.tabIndex)&&t.pdfViewer.formFieldCollections&&("e-pv-formfield-input"===i.target.className||i.target.id===t.pdfViewer.element.id+"_viewerContainer")){var y,f=void 0,g=void 0,m=i.target;y=i.target.tabIndex&&!i.target.id?(m=i.target.parentElement).id.split("_content_html_element")[0]:(m=i.target).id.split("_input")[0],t.pdfViewer.formDesignerModule&&(f=i.shiftKey&&"Tab"===i.key?(g=t.pdfViewer.formFieldCollections.findIndex(function(S){return S.id===y}))>0?t.pdfViewer.formFieldCollections[g-1]:t.pdfViewer.formFieldCollections[t.pdfViewer.formFieldCollections.length-1]:(g=t.pdfViewer.formFieldCollections.findIndex(function(S){return S.id===y}))+1<t.pdfViewer.formFieldCollections.length?t.pdfViewer.formFieldCollections[g+1]:t.pdfViewer.formFieldCollections[0],t.pdfViewer.focusFormField(f),i.preventDefault()),t.pdfViewer.formDesigner||"e-pdfviewer-formFields"!==m.className&&(f=i.shiftKey&&"Tab"===i.key?(g=t.pdfViewer.formFieldCollections.findIndex(function(S){return S.id===m.id}))>0?t.pdfViewer.formFieldCollections[g-1]:t.pdfViewer.formFieldCollections[t.pdfViewer.formFieldCollections.length-1]:(g=t.pdfViewer.formFieldCollections.findIndex(function(S){return S.id===m.id}))+1<t.pdfViewer.formFieldCollections.length?t.pdfViewer.formFieldCollections[g+1]:t.pdfViewer.formFieldCollections[0],t.pdfViewer.focusFormField(f),i.preventDefault())}if(i.target&&i.target.id&&t.pdfViewer.formFields)for(d=0;d<t.pdfViewer.formFields.length;d++){var b=t.pdfViewer.formFields[parseInt(d.toString(),10)];i.target.id===b.id&&t.pdfViewer.fireFocusOutFormField({value:b.value,fontFamily:b.fontFamily,fontSize:b.fontSize,fontStyle:b.fontStyle,color:b.color,backgroundColor:b.backgroundColor,alignment:b.alignment,isReadonly:b.isReadonly,visibility:b.visibility,maxLength:b.maxLength,isRequired:b.isRequired,isPrint:b.isPrint,rotation:b.rotateAngle,tooltip:b.tooltip,options:b.options,isChecked:b.isChecked,isSelected:b.isSelected},b.pageIndex)}}},this.viewerContainerOnKeyDown=function(i){var n=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),r=!!n&&i.metaKey;if(!t.isFreeTextAnnotationModule()||!t.pdfViewer.annotationModule||!0!==t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&!0!==t.pdfViewer.annotationModule.inputElementModule.isInFocus){if(i.ctrlKey||r){if(i.shiftKey&&!n||n&&!i.shiftKey)switch(i.keyCode){case 38:case 33:i.preventDefault(),1!==t.currentPageNumber&&t.updateScrollTop(0);break;case 40:case 34:i.preventDefault(),t.currentPageNumber!==t.pageCount&&t.updateScrollTop(t.pageCount-1)}switch(i.keyCode){case 79:t.pdfViewer.toolbarModule&&t.pdfViewer.enableToolbar&&t.pdfViewer.toolbarModule.openFileDialogBox(i);break;case 67:t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&(i.preventDefault(),t.pdfViewer.textSelectionModule.copyText()),(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.copy(),t.contextMenuModule.previousAction="Copy");break;case 70:t.pdfViewer.textSearchModule&&t.pdfViewer.enableTextSearch&&(i.preventDefault(),t.pdfViewer.toolbarModule.textSearchButtonHandler());break;case 80:t.pdfViewer.printModule&&t.pdfViewer.enablePrint&&(i.preventDefault(),t.pdfViewer.print.print());break;case 90:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.undo();break;case 88:(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.cut(),t.contextMenuModule.previousAction="Cut");break;case 89:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.redo();break;case 86:if(t.pdfViewer.annotation&&t.pdfViewer.annotation.isShapeCopied||t.pdfViewer.formFields&&t.pdfViewer.formDesigner&&t.pdfViewer.formDesigner.isShapeCopied){var o=void 0,a=document.getElementById(t.pdfViewer.element.id+"_search_box");a&&(o="none"!==a.style.display),!o&&t.pdfViewer.formDesigner&&!t.pdfViewer.formDesigner.isPropertyDialogOpen&&(t.pdfViewer.paste(),t.contextMenuModule.previousAction="Paste")}}}t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(i)}},this.viewerContainerOnMousemove=function(i){t.mouseX=i.clientX,t.mouseY=i.clientY;var n=!!document.documentMode,r=i.target;if("Drag"===t.action&&i.preventDefault(),t.isViewerMouseDown&&"Perimeter"!==t.action&&"Polygon"!==t.action&&"Line"!==t.action&&"DrawTool"!==t.action&&"Distance"!==t.action)if(t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&!t.getPopupNoteVisibleStatus())if(n){var a=window.getSelection();!a.type&&!a.isCollapsed&&null!==a.anchorNode&&(t.pdfViewer.textSelectionModule.isTextSelection=!0)}else{"e-pdfviewer-formFields"!=i.target.className&&i.preventDefault(),t.mouseX=i.clientX,t.mouseY=i.clientY;var o=t.pdfViewer.annotationModule;o&&o.textMarkupAnnotationModule&&o.textMarkupAnnotationModule.isDropletClicked&&o.textMarkupAnnotationModule.isEnableTextMarkupResizer(o.textMarkupAnnotationModule.currentTextMarkupAddMode)?o.textMarkupAnnotationModule.textSelect(i.target,t.mouseX,t.mouseY):t.pdfViewer.textSelectionModule.textSelectionOnMouseMove(i.target,t.mouseX,t.mouseY)}else t.skipPreventDefault(r)&&i.preventDefault();if(t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(i),t.isPanMode&&t.panOnMouseMove(i),t.isShapeBasedAnnotationsEnabled()){var l=void 0;if(i.target&&(i.target.id.indexOf("_text")>-1||i.target.parentElement.classList.contains("foreign-object")||i.target.id.indexOf("_annotationCanvas")>-1||i.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation||i.target.classList.contains("e-pdfviewer-formFields")){var h=t.pdfViewer.annotation.getEventPageNumber(i);if(d=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+h)){var u=(p=d.getBoundingClientRect()).x?p.x:p.left,f=p.y?p.y:p.top;l=t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation&&"Image"===t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType?new $i(u,f,p.width-10,p.height-10):new $i(u+1,f+1,p.width-3,p.height-3)}}else if(!t.pdfViewer.annotationModule&&t.pdfViewer.formDesignerModule){var d;if(h=t.pdfViewer.formDesignerModule.getEventPageNumber(i),d=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+h)){var p=d.getBoundingClientRect();l=new $i((u=p.x?p.x:p.left)+10,(p.y?p.y:p.top)+10,p.width-10,p.height-10)}}var m=t.pdfViewer.annotationModule?t.pdfViewer.annotationModule.stampAnnotationModule:null;!l||!l.containsPoint({x:t.mouseX,y:t.mouseY})||m&&m.isStampAnnotSelected?(t.diagramMouseLeave(i),t.isAnnotationDrawn&&!t.pdfViewer.isFormDesignerToolbarVisible&&(t.diagramMouseUp(i),t.isAnnotationAdded=!0)):(t.diagramMouseMove(i),t.annotationEvent=i),t.pdfViewer.enableStampAnnotations&&m&&m.isStampAnnotSelected&&(t.pdfViewer.tool="Stamp",t.tool=new ay(t.pdfViewer,t),t.isMouseDown=!0,m.isStampAnnotSelected=!1,m.isNewStampAnnot=!0),t.isSignatureAdded&&t.pdfViewer.enableHandwrittenSignature&&(t.pdfViewer.tool="Stamp",t.tool=new ay(t.pdfViewer,t),t.isMouseDown=!0,t.isSignatureAdded=!1,t.isNewSignatureAdded=!0)}},this.panOnMouseMove=function(i){var n=!1;if(("Ink"===t.action||"Line"===t.action||"Perimeter"===t.action||"Polygon"===t.action||"DrawTool"===t.action||"Drag"===t.action||-1!==t.action.indexOf("Rotate")||-1!==t.action.indexOf("Resize"))&&(n=!0),t.viewerContainer.contains(i.target)&&i.target!==t.viewerContainer&&i.target!==t.pageContainer&&!n)if(t.isViewerMouseDown){var r=t.dragX-i.pageX;t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+(t.dragY-i.pageY),t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+r,t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grabbing",t.viewerContainer.style.cursor="-moz-grabbing",t.viewerContainer.style.cursor="grabbing",t.dragX=i.pageX,t.dragY=i.pageY}else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab");else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="auto")},this.viewerContainerOnMouseLeave=function(i){t.isViewerMouseDown&&t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(i),t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&i.preventDefault(),"Ink"===t.action&&(t.diagramMouseUp(i),t.isAnnotationAdded=!0)},this.viewerContainerOnMouseEnter=function(i){t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clear()},this.viewerContainerOnMouseOver=function(i){var n=!!document.documentMode;t.isViewerMouseDown&&(n||i.preventDefault())},this.viewerContainerOnClick=function(i){if("dblclick"===i.type){if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getCurrentTextMarkupAnnotation())t.getCurrentTextMarkupAnnotation();else if(i.target.classList.contains("e-pv-text")){if(t.isViewerContainerDoubleClick=!0,!t.getTextMarkupAnnotationMode()){var n=parseFloat(i.target.id.split("_")[2]);t.pdfViewer.fireTextSelectionStart(n+1)}t.pdfViewer.textSelectionModule.selectAWord(i.target,i.clientX,i.clientY,!1),"MouseUp"===t.pdfViewer.contextMenuSettings.contextMenuAction&&t.pdfViewer.textSelectionModule.calculateContextMenuPosition(i.clientY,i.clientX),t.getTextMarkupAnnotationMode()?t.isTextMarkupAnnotationModule()&&t.getTextMarkupAnnotationMode()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode):(t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.dblClickTimer=setTimeout(function(){t.applySelection()},100),t.pdfViewer.textSelectionModule.fireTextSelectEnd())}if(t.action&&("Perimeter"===t.action||"Polygon"===t.action)&&t.tool&&(t.eventArgs.position=t.currentPosition,t.getMouseEventArgs(t.currentPosition,t.eventArgs,i,t.eventArgs.source),t.isMetaKey(i),t.eventArgs.info={ctrlKey:i.ctrlKey,shiftKey:i.shiftKey},t.eventArgs.clickCount=i.detail,t.tool.mouseUp(t.eventArgs,!0)),t.pdfViewer.selectedItems||t.pdfViewer.annotation&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)if(0!==t.pdfViewer.selectedItems.annotations.length){var a=t.pdfViewer.selectedItems.annotations[0];if(t.pdfViewer.annotationModule&&!a.formFieldAnnotationType&&(t.pdfViewer.annotationModule.annotationSelect(a.annotName,a.pageIndex,a,null,!0),!1===t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus))if(!0===t.isFreeTextAnnotation(t.pdfViewer.selectedItems.annotations))(l={}).x=t.pdfViewer.selectedItems.annotations[0].bounds.x,l.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(l,t.pdfViewer.selectedItems.annotations[0]);else if(!0===t.pdfViewer.selectedItems.annotations[0].enableShapeLabel){var l;(l={}).x=t.pdfViewer.selectedItems.annotations[0].bounds.x,l.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.inputElementModule.editLabel(l,t.pdfViewer.selectedItems.annotations[0])}else{(h=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.pdfViewer.currentPageNumber))&&h.ej2_instances[0].expandItem(!0),t.pdfViewer.toolbarModule&&t.pdfViewer.isFormDesignerToolbarVisible&&t.pdfViewer.enableAnnotationToolbar&&!t.pdfViewer.isAnnotationToolbarVisible&&!c(t.pdfViewer.toolbarModule.annotationToolbarModule)&&t.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(t.pdfViewer.toolbarModule.annotationItem);var d=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);d&&(d.classList.contains("e-pv-comments-border")||d.firstChild.click())}}else{var u=t.pdfViewer.annotationModule;if(t.pdfViewer.annotation&&u.textMarkupAnnotationModule&&u.textMarkupAnnotationModule.currentTextMarkupAnnotation){var h,f=t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;t.pdfViewer.annotationModule.annotationSelect(f.annotName,t.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,f,null,!0),(h=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.currentPageNumber))&&h.ej2_instances[0].expandItem(!0);var g=document.getElementById(f.annotName);g&&g.firstChild.click()}}if(t.pdfViewer.designerMode&&t.pdfViewer.selectedItems.formFields.length>0){var m={name:"formFieldDoubleClick",field:t.pdfViewer.selectedItems.formFields[0],cancel:!1};t.pdfViewer.fireFormFieldDoubleClickEvent(m),m.cancel||t.pdfViewer.formDesigner.createPropertiesWindow()}}else 3===i.detail&&(t.isViewerContainerDoubleClick&&(clearTimeout(t.dblClickTimer),t.isViewerContainerDoubleClick=!1),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&!t.getTextMarkupAnnotationMode()&&(t.pdfViewer.textSelectionModule.selectEntireLine(i),t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.pdfViewer.textSelectionModule.fireTextSelectEnd(),t.applySelection()))},this.viewerContainerOnDragStart=function(i){document.documentMode||i.preventDefault()},this.viewerContainerOnContextMenuClick=function(i){t.isViewerMouseDown=!1},this.onWindowMouseUp=function(i){t.isFreeTextContextMenu=!1,t.isNewStamp=!1,t.signatureAdded=!1;var n=t.pdfViewer.annotationModule;if(n&&n.textMarkupAnnotationModule&&n.textMarkupAnnotationModule.isEnableTextMarkupResizer(n.textMarkupAnnotationModule.currentTextMarkupAddMode)){var r=n.textMarkupAnnotationModule;r.isLeftDropletClicked=!1,r.isDropletClicked=!1,r.isRightDropletClicked=!1,r.currentTextMarkupAnnotation||null!==window.getSelection().anchorNode?!r.currentTextMarkupAnnotation&&""===r.currentTextMarkupAddMode&&(r.isTextMarkupAnnotationMode=!1):r.showHideDropletDiv(!0)}if(!t.getPopupNoteVisibleStatus()){if(0===i.button){if(t.isNewFreeTextAnnotation())if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getTextMarkupAnnotationMode()){if(t.getTextMarkupAnnotationMode()){var a=t.pdfViewer.element,l=i.target;a&&l&&a.id.split("_")[0]===l.id.split("_")[0]&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)}}else{1===i.detail&&!t.viewerContainer.contains(i.target)&&!t.contextMenuModule.contextMenuElement.contains(i.target)&&null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.textSelectionOnMouseup(i);var o=i.target;t.viewerContainer.contains(i.target)&&"e-pdfviewer-formFields"!==o.className&&"e-pv-formfield-input"!==o.className&&(t.isClickedOnScrollBar(i,!0)||t.isScrollbarMouseDown?null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.applySpanForSelection():t.pdfViewer.textSelectionModule.textSelectionOnMouseup(i))}}else 2===i.button&&t.viewerContainer.contains(i.target)&&t.skipPreventDefault(i.target)&&t.checkIsNormalText()&&window.getSelection().removeAllRanges();return!t.isViewerMouseDown||(t.isViewerMouseDown=!1,t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clear(),t.pdfViewer.textSelectionModule.selectionStartPage=null),i.preventDefault(),i.stopPropagation(),!1)}},this.onWindowTouchEnd=function(i){t.signatureAdded=!1,!t.pdfViewer.element.contains(i.target)&&!t.contextMenuModule.contextMenuElement.contains(i.target)&&t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clearTextSelection()},this.viewerContainerOnTouchStart=function(i){var n=i.touches;t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(n[0].clientX,n[0].clientY);var r=i.target;1===n.length&&!r.classList.contains("e-pv-hyperlink")&&t.skipPreventDefault(r)&&t.preventTouchEvent(i),1===i.touches.length&&t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&(t.isToolbarInkClicked||t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(i)),t.touchClientX=n[0].clientX,t.touchClientY=n[0].clientY,t.scrollY=n[0].clientY,t.previousTime=(new Date).getTime(),1!==n.length||i.target.classList.contains("e-pv-touch-select-drop")||i.target.classList.contains("e-pv-touch-ellipse")||(E.isDevice&&!t.pdfViewer.enableDesktopMode&&t.pageCount>0&&!t.isThumb&&!i.target.classList.contains("e-pv-hyperlink")&&t.handleTaps(n,i),(!X()||!E.isDevice||t.pdfViewer.enableDesktopMode)&&t.handleTextBoxTaps(n),t.isDesignerMode(r)?(t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout(function(){t.isMoving||(t.isTouchDesignerMode=!0,t.contextMenuModule.open(t.touchClientY,t.touchClientX,t.viewerContainer))},1e3)),t.isLongTouchPropagated=!0,t.isMoving=!1):t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clearTextSelection(),t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout(function(){t.viewerContainerOnLongTouch(i)},1e3)),t.isLongTouchPropagated=!0));var a=t.pdfViewer.toolbarModule?t.pdfViewer.toolbarModule.annotationToolbarModule:"null";r.classList.contains("e-pv-text")&&(!a||!a.textMarkupToolbarElement||0===a.textMarkupToolbarElement.children.length)&&r.classList.add("e-pv-text-selection-none"),t.diagramMouseDown(i),("Perimeter"===t.action||"Polygon"===t.action||"DrawTool"===t.action||"Drag"===t.action||-1!==t.action.indexOf("Rotate")||-1!==t.action.indexOf("Resize"))&&i.preventDefault()},this.viewerContainerOnLongTouch=function(i){if(t.touchClientX=i.touches[0].clientX,t.touchClientY=i.touches[0].clientY,i.preventDefault(),t.pdfViewer.textSelectionModule){var n=i.target;n.classList.contains("e-pv-text-selection-none")&&n.classList.remove("e-pv-text-selection-none"),t.pdfViewer.textSelectionModule.initiateTouchSelection(i,t.touchClientX,t.touchClientY),E.isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.tapCount=0)}},this.viewerContainerOnPointerDown=function(i){"touch"===i.pointerType&&(t.pointerCount++,t.pointerCount<=2&&(i.preventDefault(),t.pointersForTouch.push(i),2===t.pointerCount&&(t.pointerCount=0),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(i.clientX,i.clientY)))},this.viewerContainerOnTouchMove=function(i){"Drag"===t.action&&(t.isMoving=!0),E.isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.singleTapTimer=null,t.tapCount=0),t.preventTouchEvent(i),t.isToolbarInkClicked&&i.preventDefault();var r,n=i.touches;if(t.pdfViewer.magnificationModule&&(t.isTouchScrolled=!0,n.length>1&&t.pageCount>0?(E.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(n[0].clientX,n[0].clientY,n[1].clientX,n[1].clientY)):1===n.length&&t.getPagesPinchZoomed()&&(E.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.magnificationModule.pinchMoveScroll())),t.mouseX=n[0].clientX,t.mouseY=n[0].clientY,i.target&&(i.target.id.indexOf("_text")>-1||i.target.id.indexOf("_annotationCanvas")>-1||i.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation){var o=t.pdfViewer.annotation.getEventPageNumber(i),a=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+o);if(a){var l=a.getBoundingClientRect();r=new $i((l.x?l.x:l.left)+10,(l.y?l.y:l.top)+10,l.width-10,l.height-10)}}r&&r.containsPoint({x:t.mouseX,y:t.mouseY})||"Ink"===t.action?(t.diagramMouseMove(i),t.annotationEvent=i):(t.diagramMouseLeave(i),t.isAnnotationDrawn&&(t.diagramMouseUp(i),t.isAnnotationAdded=!0)),n=null},this.viewerContainerOnPointerMove=function(i){if("touch"===i.pointerType&&t.pageCount>0&&(i.preventDefault(),2===t.pointersForTouch.length)){for(var n=0;n<t.pointersForTouch.length;n++)if(i.pointerId===t.pointersForTouch[parseInt(n.toString(),10)].pointerId){t.pointersForTouch[parseInt(n.toString(),10)]=i;break}t.pdfViewer.magnificationModule&&t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(t.pointersForTouch[0].clientX,t.pointersForTouch[0].clientY,t.pointersForTouch[1].clientX,t.pointersForTouch[1].clientY)}},this.viewerContainerOnTouchEnd=function(i){if(t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),i.cancelable&&!i.target.classList.contains("e-pv-touch-ellipse")&&t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&i.preventDefault(),t.isLongTouchPropagated=!1,clearInterval(t.longTouchTimer),t.longTouchTimer=null,E.isDevice&&!t.pdfViewer.enableDesktopMode&&t.isTouchScrolled){t.currentTime=(new Date).getTime();var n=t.currentTime-t.previousTime,r=t.scrollY-i.changedTouches[0].pageY,o=r/n;if(Math.abs(o)>1.5){var a=r+n*o;a>0&&(t.viewerContainer.scrollTop+=a,t.updateMobileScrollerPosition())}}t.diagramMouseUp(i),t.renderStampAnnotation(i),E.isDevice||t.focusViewerContainer()},this.viewerContainerOnPointerEnd=function(i){"touch"===i.pointerType&&(i.preventDefault(),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),t.pointersForTouch=[],t.pointerCount=0)},this.viewerContainerOnScroll=function(i){var n=null,r=(n=t).pdfViewer.allowServerDataBinding;n.pdfViewer.enableServerDataBinding(!1);var o=0;if(i.touches&&E.isDevice&&!t.pdfViewer.enableDesktopMode){var l=(t.viewerContainer.scrollHeight-t.viewerContainer.clientHeight)/(t.viewerContainer.clientHeight-t.toolbarHeight);if(t.isThumb){t.ispageMoved=!0,i.preventDefault(),t.mobilePageNoContainer.style.display="block",o=i.touches[0].pageX-t.scrollX,t.viewerContainer.scrollTop=(i.touches[0].pageY-t.viewerContainer.offsetTop)*l;var h=i.touches[0].pageY;0!==t.viewerContainer.scrollTop&&h<=t.viewerContainer.clientHeight-(t.pdfViewer.toolbarModule?0:50)&&(t.mobileScrollerContainer.style.top=h+"px")}else"e-pv-touch-ellipse"!==i.touches[0].target.className&&(t.isWebkitMobile&&E.isDevice&&!t.pdfViewer.enableDesktopMode||(t.mobilePageNoContainer.style.display="none",o=t.touchClientX-i.touches[0].pageX,t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+(t.touchClientY-i.touches[0].pageY),t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+o),t.updateMobileScrollerPosition(),t.touchClientY=i.touches[0].pageY,t.touchClientX=i.touches[0].pageX)}t.scrollHoldTimer&&clearTimeout(t.scrollHoldTimer);var p=t.currentPageNumber;t.scrollHoldTimer=null,t.contextMenuModule.close();for(var u=t.viewerContainer.scrollTop,f=0;f<t.pageCount;f++)if(null!=t.pageSize[parseInt(f.toString(),10)]){var g=t.getPageHeight(f);if(t.pageStopValue=g<150?75:g>=150&&g<300?125:g>=300&&g<500?200:300,u+t.pageStopValue<=t.getPageTop(f)+g){t.currentPageNumber=f+1,t.pdfViewer.currentPageNumber=f+1;break}}t.pdfViewer.magnificationModule&&"fitToPage"===t.pdfViewer.magnificationModule.fitType&&t.currentPageNumber>0&&t.pageSize[t.currentPageNumber-1]&&!t.isPanMode&&!E.isDevice&&t.pdfViewer.enableDesktopMode&&(t.viewerContainer.scrollTop=t.pageSize[t.currentPageNumber-1].top*t.getZoomFactor()),t.renderElementsVirtualScroll(t.currentPageNumber),(t.isViewerMouseDown||t.getPinchZoomed()||t.getPinchScrolled()||t.getPagesPinchZoomed())&&!t.isViewerMouseWheel?t.showPageLoadingIndicator(t.currentPageNumber-1,!1):(t.pageViewScrollChanged(t.currentPageNumber),t.isViewerMouseWheel=!1),t.pdfViewer.toolbarModule&&(X()||t.pdfViewer.toolbarModule.updateCurrentPage(t.currentPageNumber),t.viewerContainer.setAttribute("aria-labelledby",t.pdfViewer.element.id+"_pageDiv_"+(t.currentPageNumber-1)),X()||(!E.isDevice||t.pdfViewer.enableDesktopMode)&&t.pdfViewer.toolbarModule.updateNavigationButtons()),E.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.mobileSpanContainer.innerHTML=t.currentPageNumber.toString(),t.mobilecurrentPageContainer.innerHTML=t.currentPageNumber.toString()),p!==t.currentPageNumber&&(n.pdfViewer.thumbnailViewModule&&(!E.isDevice||t.pdfViewer.enableDesktopMode)&&(n.pdfViewer.thumbnailViewModule.gotoThumbnailImage(n.currentPageNumber-1),n.pdfViewer.thumbnailViewModule.isThumbnailClicked=!1),t.pdfViewer.firePageChange(p)),t.pdfViewer.magnificationModule&&!t.isPanMode&&!E.isDevice&&t.pdfViewer.enableDesktopMode&&t.pdfViewer.magnificationModule.updatePagesForFitPage(t.currentPageNumber-1);var m=t.getElement("_pageDiv_"+(t.currentPageNumber-1));m&&(m.style.visibility="visible"),t.isViewerMouseDown&&(t.getRerenderCanvasCreated()&&!t.isPanMode&&t.pdfViewer.magnificationModule.clearIntervalTimer(),t.getStoredData(t.currentPageNumber)?(t.isDataExits=!0,t.initiatePageViewScrollChanged(),t.isDataExits=!1):t.scrollHoldTimer=setTimeout(function(){t.initiatePageViewScrollChanged()},t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll?t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll:100)),t.pdfViewer.annotation&&t.navigationPane.commentPanelContainer&&t.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(t.currentPageNumber),E.isDevice&&!t.pdfViewer.enableDesktopMode&&i.touches&&"e-pv-touch-ellipse"!==i.touches[0].target.className&&setTimeout(function(){t.updateMobileScrollerPosition()},500),n.pdfViewer.enableServerDataBinding(r,!0)},this.pdfViewer=e,this.navigationPane=new UAe(this.pdfViewer,this),this.textLayer=new NLe(this.pdfViewer,this),this.accessibilityTags=new QLe(this.pdfViewer,this),this.signatureModule=new RLe(this.pdfViewer,this),this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return s.prototype.initializeComponent=function(){var e=document.getElementById(this.pdfViewer.element.id);if(e){this.blazorUIAdaptor=X()?new ALe(this.pdfViewer,this):null,E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.add("e-pv-mobile-view");var i=void 0;this.viewerMainContainer=X()?e.querySelector(".e-pv-viewer-main-container"):F("div",{id:this.pdfViewer.element.id+"_viewerMainContainer",className:"e-pv-viewer-main-container"}),this.viewerContainer=X()?e.querySelector(".e-pv-viewer-container"):F("div",{id:this.pdfViewer.element.id+"_viewerContainer",className:"e-pv-viewer-container",attrs:{"aria-label":"pdfviewer scroll view"}}),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.createMobilePageNumberContainer(),this.viewerContainer.tabIndex=0,this.pdfViewer.enableRtl&&(this.viewerContainer.style.direction="rtl"),e.style.touchAction="pan-x pan-y",this.setMaximumHeight(e),this.mainContainer=X()?e.querySelector(".e-pv-main-container"):F("div",{id:this.pdfViewer.element.id+"_mainContainer",className:"e-pv-main-container"}),this.mainContainer.appendChild(this.viewerMainContainer),e.appendChild(this.mainContainer),this.applyViewerHeight(this.mainContainer),this.pdfViewer.toolbarModule?(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.toolbarModule.intializeToolbar("100%")):X()&&(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.pdfViewer.enableToolbar||(this.toolbarHeight=0,i.style.display="none"),!this.pdfViewer.enableNavigationToolbar&&(E.isDevice&&this.pdfViewer.enableDesktopMode||!E.isDevice)&&(this.navigationPane.sideBarToolbar.style.display="none",this.navigationPane.sideBarToolbarSplitter.style.display="none",(this.navigationPane.isBookmarkOpen||this.navigationPane.isThumbnailOpen)&&this.navigationPane.updateViewerContainerOnClose())),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,i?56:0);var n=this.pdfViewer.element.clientWidth;(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(n=n-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0)),this.viewerContainer.style.width=n+"px",this.viewerMainContainer.appendChild(this.viewerContainer),E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.left=n-parseFloat(this.mobileScrollerContainer.style.width)+"px",this.mobilePageNoContainer.style.left=n/2-parseFloat(this.mobilePageNoContainer.style.width)/2+"px",this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+"px",this.mobilePageNoContainer.style.display="none",this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer),this.mobilePageNoContainer.appendChild(this.mobilenumberContainer),this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer),this.viewerContainer.appendChild(this.mobilePageNoContainer),this.viewerMainContainer.appendChild(this.mobileScrollerContainer),this.mobileScrollerContainer.appendChild(this.mobileSpanContainer)),this.pageContainer=F("div",{id:this.pdfViewer.element.id+"_pageViewContainer",className:"e-pv-page-container",attrs:{tabindex:"0","aria-label":"pdfviewer Page View"}}),this.pdfViewer.enableRtl&&(this.pageContainer.style.direction="ltr"),this.viewerContainer.appendChild(this.pageContainer),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",i&&this.pdfViewer.thumbnailViewModule&&(!E.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.thumbnailViewModule.createThumbnailContainer(),this.createPrintPopup(),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.createGoToPagePopup();var r=F("div",{id:this.pdfViewer.element.id+"_loadingIndicator"});if(this.viewerContainer.appendChild(r),DS({target:r,cssClass:"e-spin-center"}),this.setLoaderProperties(r),X()){this.contextMenuModule=new GAe(this.pdfViewer,this);var o=document.getElementsByClassName(this.pdfViewer.element.id+"_spinner");o&&o[0]&&!o[0].classList.contains("e-spin-hide")&&(o[0].classList.remove("e-spin-show"),o[0].classList.add("e-spin-hide"))}else this.contextMenuModule=new FLe(this.pdfViewer,this);this.contextMenuModule.createContextMenu(),this.createFileInputElement(),this.wireEvents(),this.pdfViewer.textSearchModule&&(!E.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.textSearchModule.createTextSearchBox(),this.pdfViewer.documentPath&&(X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",this.pdfViewer.documentPath):this.pdfViewer.load(this.pdfViewer.documentPath,null)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.initializeCollection()}E.isDevice&&this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule&&(this.pdfViewer.interactionMode="Pan")},s.prototype.createMobilePageNumberContainer=function(){this.mobilePageNoContainer=F("div",{id:this.pdfViewer.element.id+"_mobilepagenoContainer",className:"e-pv-mobilepagenoscroll-container"}),this.mobilecurrentPageContainer=F("span",{id:this.pdfViewer.element.id+"_mobilecurrentpageContainer",className:"e-pv-mobilecurrentpage-container"}),this.mobilenumberContainer=F("span",{id:this.pdfViewer.element.id+"_mobiledashedlineContainer",className:"e-pv-mobiledashedline-container"}),this.mobiletotalPageContainer=F("span",{id:this.pdfViewer.element.id+"_mobiletotalpageContainer",className:"e-pv-mobiletotalpage-container"}),this.mobileScrollerContainer=F("div",{id:this.pdfViewer.element.id+"_mobilescrollContainer",className:"e-pv-mobilescroll-container"}),this.mobileSpanContainer=F("span",{id:this.pdfViewer.element.id+"_mobilespanContainer",className:"e-pv-mobilespanscroll-container"}),this.mobileSpanContainer.innerHTML="1",this.mobilecurrentPageContainer.innerHTML="1",this.mobilenumberContainer.innerHTML="&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;",this.mobileScrollerContainer.style.cssFloat="right",this.mobileScrollerContainer.style.width="40px",this.mobileScrollerContainer.style.height="32px",this.mobileScrollerContainer.style.zIndex="100",this.mobilePageNoContainer.style.width="120px",this.mobilePageNoContainer.style.height="100px",this.mobilePageNoContainer.style.zIndex="100",this.mobilePageNoContainer.style.position="fixed",this.mobileScrollerContainer.addEventListener("touchstart",this.mobileScrollContainerDown.bind(this)),this.mobileScrollerContainer.addEventListener("touchend",this.mobileScrollContainerEnd.bind(this)),this.mobileScrollerContainer.style.display="none"},s.prototype.initiatePageRender=function(e,t){this.loadedData=e,this.documentId=this.createGUID(),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=!1,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),e=this.checkDocumentData(e),this.setFileName(),this.downloadFileName=this.pdfViewer.downloadFileName?this.pdfViewer.downloadFileName:this.pdfViewer.fileName;var i=this.constructJsonObject(e,t);this.createAjaxRequest(i,e,t)},s.prototype.initiateLoadDocument=function(e,t,i){e&&(this.documentId=e),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=t,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),this.setFileName(),null===this.pdfViewer.fileName&&(t&&i?(this.pdfViewer.fileName=i,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null)),this.downloadFileName=this.pdfViewer.downloadFileName?this.pdfViewer.downloadFileName:this.pdfViewer.fileName},s.prototype.loadSuccess=function(e,t){var i=e;if(i){if("object"!=typeof i)try{i=JSON.parse(i)}catch{this.onControlError(500,i,this.pdfViewer.serverActionSettings.load),i=null}if(i){for(;"object"!=typeof i;)if(i=JSON.parse(i),"number"==typeof parseInt(i)&&!isNaN(parseInt(i))){i=parseInt(i);break}i.StatusText&&"File Does not Exist"===i.StatusText&&this.showLoadingIndicator(!1),(i.uniqueId===this.documentId||"number"==typeof parseInt(i)&&!isNaN(parseInt(i)))&&(this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,i),this.requestSuccess(i,null,t))}}},s.prototype.mobileScrollContainerDown=function(e){if(this.ispageMoved=!1,this.isThumb=!0,this.isTextMarkupAnnotationModule()&&null!=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage&&E.isDevice&&!this.pdfViewer.enableDesktopMode){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(t),this.pdfViewer.toolbar.showToolbar(!0)}this.mobileScrollerContainer.addEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0)},s.prototype.relativePosition=function(e){var t=this.viewerContainer.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},s.prototype.setMaximumHeight=function(e){var t=e.getBoundingClientRect();(!E.isDevice||this.pdfViewer.enableDesktopMode||t&&0===t.height)&&(e.style.minHeight="500px"),this.updateWidth(),this.updateHeight()},s.prototype.applyViewerHeight=function(e){var t=e.getBoundingClientRect();E.isDevice&&!this.pdfViewer.enableDesktopMode&&t&&0===t.height&&(e.style.minHeight="500px")},s.prototype.updateWidth=function(){"auto"!==this.pdfViewer.width.toString()&&(this.pdfViewer.element.style.width=this.pdfViewer.width)},s.prototype.updateHeight=function(){"auto"!==this.pdfViewer.height.toString()&&(this.pdfViewer.element.style.height=this.pdfViewer.height)},s.prototype.updateViewerContainer=function(){var e=this.getElement("_sideBarContentContainer");e&&"none"===e.style.display?this.navigationPane.updateViewerContainerOnClose():e&&"block"===e.style.display?this.navigationPane.updateViewerContainerOnExpand():this.updateViewerContainerSize();var t=this.pdfViewer.toolbarModule;t&&(X()?(this.pdfViewer.enableToolbar||this.pdfViewer.enableAnnotationToolbar)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RefreshToolbarItems"):(this.pdfViewer.enableToolbar&&t.toolbar.refreshOverflow(),this.pdfViewer.enableAnnotationToolbar&&t.annotationToolbarModule&&t.annotationToolbarModule.toolbar.refreshOverflow()))},s.prototype.updateViewerContainerSize=function(){this.viewerContainer.style.width=this.pdfViewer.element.clientWidth+"px",this.pageContainer.style.width=this.viewerContainer.offsetWidth+"px",this.updateZoomValue()},s.prototype.mobileScrollContainerEnd=function(e){this.ispageMoved||this.goToPagePopup.show(),this.isThumb=!1,this.ispageMoved=!1,this.mobileScrollerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0),this.mobilePageNoContainer.style.display="none"},s.prototype.checkRedirection=function(e){var t=!1;return e&&"object"==typeof e&&(e.redirectUrl||e.redirectUri||""===e.redirectUrl||""===e.redirectUri)?""===e.redirectUrl||""===e.redirectUri?t=!0:window.location.href=e.redirectUrl?e.redirectUrl:e.redirectUri:e&&"string"==typeof e&&(e.includes("redirectUrl")||e.includes("redirectUri"))&&(""===JSON.parse(e).redirectUrl||""===JSON.parse(e).redirectUri?t=!0:e.includes("redirectUrl")?window.location.href=JSON.parse(e).redirectUrl:window.location.href=JSON.parse(e).redirectUri),t},s.prototype.createAjaxRequest=function(e,t,i){var n;n=this,this.pdfViewer.serverActionSettings&&(this.loadRequestHandler=new hs(this.pdfViewer),this.loadRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.load,this.loadRequestHandler.responseType="json",this.loadRequestHandler.mode=!0,e.action="Load",e.elementId=this.pdfViewer.element.id,this.loadRequestHandler.send(e),this.loadRequestHandler.onSuccess=function(r){var o=r.data;if(n.checkRedirection(o))n.showLoadingIndicator(!1);else if(o){if("object"!=typeof o)try{o=JSON.parse(o)}catch{n.onControlError(500,o,this.pdfViewer.serverActionSettings.load),o=null}if(o){for(;"object"!=typeof o;)if(o=JSON.parse(o),"number"==typeof parseInt(o)&&!isNaN(parseInt(o))){o=parseInt(o);break}(o.uniqueId===n.documentId||"number"==typeof parseInt(o)&&!isNaN(parseInt(o)))&&(n.updateFormFieldName(o),n.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,o),!c(o.isTaggedPdf)&&o.isTaggedPdf&&(n.isTaggedPdf=!0),n.requestSuccess(o,t,i))}}else n.showLoadingIndicator(!1),n.openImportExportNotificationPopup(n.pdfViewer.localeObj.getConstant("Import PDF Failed"))},this.loadRequestHandler.onFailure=function(r){"4"===r.status.toString().split("")[0]?n.openNotificationPopup("Client error"):n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText,n.pdfViewer.serverActionSettings.load)},this.loadRequestHandler.onError=function(r){n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText,n.pdfViewer.serverActionSettings.load)})},s.prototype.updateFormFieldName=function(e){if(e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0)for(var t=void 0,i=0;i<e.PdfRenderedFormFields.length;i++)(t=e.PdfRenderedFormFields[parseInt(i.toString(),10)])&&t.ActualFieldName&&(t.FieldName=t.ActualFieldName)},s.prototype.openNotificationPopup=function(e){var t=this;this.pdfViewer.showNotificationDialog&&("Client error"===e?X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Clienterror").then(function(n){t.textLayer.createNotificationPopup(n)}):this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Client error")):X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Servererror").then(function(r){t.textLayer.createNotificationPopup(r)}):this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Server error")),this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content"))},s.prototype.showNotificationPopup=function(e){!this.pdfViewer.showNotificationDialog&&""!==e&&(this.textLayer.createNotificationPopup(e),this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content"))},s.prototype.requestSuccess=function(e,t,i){e&&void 0!==e.pageCount?(X()&&this.isPassword&&(this.isPassword=!1,this.isPasswordAvailable=!1,this.pdfViewer._dotnetInstance.invokeMethodAsync("ClosePasswordDialog")),i&&""!=i&&(this.passwordData=i),this.pdfViewer.allowServerDataBinding=!1,this.pageCount=e.pageCount,this.pdfViewer.pageCount=e.pageCount,this.hashId=e.hashId,this.documentLiveCount=e.documentLiveCount,this.isAnnotationCollectionRemoved=!1,this.saveDocumentHashData(),this.saveFormfieldsData(e),this.pdfViewer.allowServerDataBinding=!0,this.digitalSignaturePages=e.digitalSignaturePages,this.pageRender(e),window.sessionStorage.setItem(this.documentId+"_pagedata",JSON.stringify({pageCount:e.pageCount,pageSizes:e.pageSizes})),E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.display="",this.mobileScrollerContainer.style.top=(this.pdfViewer.toolbarModule?this.toolbarHeight:0)+"px"),this.restrictionList=e.RestrictionSummary,this.RestrictionEnabled(this.restrictionList,!1)):(this.pageCount=0,this.currentPageNumber=0,E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.display="none"),4===e?X()||this.renderPasswordPopup(t,i):3===e&&(X()||this.renderCorruptPopup()),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateToolbarItems());var o=this.pdfViewer.annotationModule;o&&o.textMarkupAnnotationModule&&o.textMarkupAnnotationModule.isEnableTextMarkupResizer(o.textMarkupAnnotationModule.currentTextMarkupAddMode)&&o.textMarkupAnnotationModule.createAnnotationSelectElement()},s.prototype.RestrictionEnabled=function(e,t){if(e)for(var i=0;i<e.length;i++)this.EnableRestriction(e[parseInt(i.toString(),10)],t),X()?this.pdfViewer.toolbarModule&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RestrictToolbarItems",e,t):this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.DisableToolbarItems(e[parseInt(i.toString(),10)],t)},s.prototype.EnableRestriction=function(e,t){switch(e){case"Print":this.pdfViewer.enablePrint=t;break;case"CopyContent":this.pdfViewer.enableTextSelection=t;break;case"FillFields":this.pdfViewer.enableFormFields=t,this.enableFormFieldButton(t);break;case"EditAnnotations":this.pdfViewer.enableAnnotation=t}},s.prototype.pageRender=function(e){this.document=null,this.passwordDialogReset(),this.passwordPopup&&this.passwordPopup.hide(),this.initPageDiv(e),this.currentPageNumber=1,this.pdfViewer.currentPageNumber=1,this.previousZoomValue=this.pdfViewer.zoomValue;var i=!1;if(this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.zoomValue&&this.pdfViewer.zoomValue>0&&(100!==this.pdfViewer.zoomValue&&(i=!0),this.isInitialPageMode=!0,this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue)),"FitToWidth"===this.pdfViewer.zoomMode?(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToWidth()):"FitToPage"===this.pdfViewer.zoomMode&&(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToPage()),this.documentLoaded=!0,this.pdfViewer.magnificationModule.isInitialLoading=!0,this.onWindowResize(),this.documentLoaded=!1,this.pdfViewer.magnificationModule.isInitialLoading=!1),this.isDocumentLoaded=!0,parseInt((0).toString(),10),-1===this.renderedPagesList.indexOf(0)&&!i){this.createRequestForRender(0);for(var r=1,o=this.pdfViewer.initialRenderPages<=this.pageCount?this.pdfViewer.initialRenderPages>this.pageRenderCount?this.pdfViewer.initialRenderPages:2:this.pageCount,a=1;a<o;a++)this.createRequestForRender(a),r+=1;if(this.pageSize[parseInt(r.toString(),10)])for(var l=this.getPageTop(r),h=this.viewerContainer.clientHeight;h>l&&this.pageSize[parseInt(r.toString(),10)];)this.renderPageElement(r),this.createRequestForRender(r),l=this.getPageTop(r),r+=1}this.showLoadingIndicator(!1),X()||this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.uploadedDocumentName=null,this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber),this.pdfViewer.toolbarModule.updateToolbarItems(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(!0),this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.element.id+"_pageDiv_"+(this.currentPageNumber-1))),E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString(),this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString())},s.prototype.renderPasswordPopup=function(e,t){var i=this;if(X()){var n=document.getElementById(this.pdfViewer.element.id+"_prompt");this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_EnterPassword").then(function(l){n.textContent=l});var o=document.querySelector("#"+this.pdfViewer.element.id+"_password_input");o.addEventListener("keyup",function(){""===o.value&&i.passwordDialogReset()}),o.addEventListener("focus",function(){o.parentElement.classList.add("e-input-focus")}),o.addEventListener("blur",function(){o.parentElement.classList.remove("e-input-focus")}),this.isPasswordAvailable?(this.pdfViewer.fireDocumentLoadFailed(!0,t),n.classList.add("e-pv-password-error"),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_InvalidPassword").then(function(l){n.textContent=l}),n.focus(),this.document=this.isFileName?e:"data:application/pdf;base64,"+e):(this.document=this.isFileName?e:"data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.pdfViewer.fireDocumentLoadFailed(!0,null)),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPasswordDialog")}else this.isPasswordAvailable?(this.pdfViewer.fireDocumentLoadFailed(!0,t),this.promptElement.classList.add("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Invalid Password"),this.promptElement.focus(),this.document=this.isFileName?e:"data:application/pdf;base64,"+e,this.passwordPopup.show()):(this.document=this.isFileName?e:"data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.createPasswordPopup(),this.pdfViewer.fireDocumentLoadFailed(!0,null),this.passwordPopup.show())},s.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(!1,null),this.documentId=null,this.pdfViewer.showNotificationDialog&&(X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenCorruptedDialog"):(this.createCorruptedPopup(),this.corruptPopup.show()))},s.prototype.constructJsonObject=function(e,t){var i;return t?(this.isPasswordAvailable=!0,this.passwordData=t,i={document:e,password:t,zoomFactor:"1",isFileName:this.isFileName.toString(),uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance}):(this.isPasswordAvailable=!1,this.passwordData="",i={document:e,zoomFactor:"1",isFileName:this.isFileName.toString(),uniqueId:this.documentId,hideEmptyDigitalSignatureFields:this.pdfViewer.hideEmptyDigitalSignatureFields,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance}),i},s.prototype.checkDocumentData=function(e){var t=e.split("base64,")[1];if(void 0===t){if(this.isFileName=!0,this.jsonDocumentId=e,null===this.pdfViewer.fileName){var i=-1!==e.indexOf("\\")?e.split("\\"):e.split("/");this.pdfViewer.fileName=i[i.length-1],this.jsonDocumentId=this.pdfViewer.fileName,t=e}}else this.jsonDocumentId=null;return t},s.prototype.setFileName=function(){null===this.pdfViewer.fileName&&(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.uploadedDocumentName?(this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null))},s.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem("currentDocument",this.documentId),window.sessionStorage.setItem("serviceURL",this.pdfViewer.serviceUrl),this.pdfViewer.serverActionSettings&&window.sessionStorage.setItem("unload",this.pdfViewer.serverActionSettings.unload)},s.prototype.saveDocumentHashData=function(){var e;e=E.isIE||"edge"===E.info.name?encodeURI(this.hashId):this.hashId,window.sessionStorage.setItem("hashId",e),this.documentLiveCount&&window.sessionStorage.setItem("documentLiveCount",this.documentLiveCount.toString())},s.prototype.saveFormfieldsData=function(e){if(this.pdfViewer.isFormFieldDocument=!1,this.enableFormFieldButton(!1),e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0){if(this.formfieldvalue)this.pdfViewer.formFieldsModule&&this.setItemInSessionStorage(this.formfieldvalue,"_formfields"),this.formfieldvalue=null;else if(this.pdfViewer.formFieldsModule){for(var t=0;t<e.PdfRenderedFormFields.length;t++)""==e.PdfRenderedFormFields[parseInt(t.toString(),10)].FieldName&&e.PdfRenderedFormFields.splice(t,1);this.setItemInSessionStorage(e.PdfRenderedFormFields,"_formfields")}this.pdfViewer.enableFormFields&&this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.formFieldCollections(),this.pdfViewer.formFieldCollections.length>0&&(this.pdfViewer.isFormFieldDocument=!0,this.enableFormFieldButton(!0))}},s.prototype.enableFormFieldButton=function(e){e&&(this.pdfViewer.isFormFieldDocument=!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.submitItem&&this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement,e)},s.prototype.updateWaitingPopup=function(e){if(null!=this.pageSize[parseInt(e.toString(),10)].top){var t=this.getElement("_pageDiv_"+e).getBoundingClientRect(),i=this.getElement("_pageDiv_"+e).firstChild.firstChild;t.top<0?this.toolbarHeight+this.viewerContainer.clientHeight/2-t.top<t.height?i.style.top=this.viewerContainer.clientHeight/2-t.top-this.toolbarHeight+"px":this.toolbarHeight+t.bottom/2-t.top<t.height&&(i.style.top=t.bottom/2-t.top-this.toolbarHeight+"px"):i.style.top=this.viewerContainer.clientHeight/2+"px",i.style.left=E.isDevice&&!this.pdfViewer.enableDesktopMode&&t.width>this.viewerContainer.clientWidth?this.viewerContainer.clientWidth/2+this.viewerContainer.scrollLeft+"px":this.getZoomFactor()>1.25&&t.width>this.viewerContainer.clientWidth?this.viewerContainer.clientWidth/2+"px":t.width/2+"px"}},s.prototype.getActivePage=function(e){return this.activeElements&&!c(this.activeElements.activePageID)?e?this.activeElements.activePageID+1:this.activeElements.activePageID:e?this.currentPageNumber:this.currentPageNumber-1},s.prototype.createWaitingPopup=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);t&&(DS({target:t}),this.setLoaderProperties(t))},s.prototype.showLoadingIndicator=function(e){var t=this.getElement("_loadingIndicator");t&&(e?(t.style.display="block",ly(t)):(t.style.display="none",Ul(t)))},s.prototype.showPageLoadingIndicator=function(e,t){var i=this.getElement("_pageDiv_"+e);null!=i&&(t?ly(i):Ul(i),this.updateWaitingPopup(e))},s.prototype.showPrintLoadingIndicator=function(e){var t=this.getElement("_printLoadingIndicator");null!=t&&(e?(this.printMainContainer.style.display="block",ly(t)):(this.printMainContainer.style.display="none",Ul(t)))},s.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="48px",t.style.width="48px",t.style.transformOrigin="24px 24px 24px")},s.prototype.updateScrollTop=function(e){var t=this;null!=this.pageSize[e]&&(this.renderElementsVirtualScroll(e),this.viewerContainer.scrollTop=this.getPageTop(e),-1===this.renderedPagesList.indexOf(e)&&this.createRequestForRender(e),setTimeout(function(){var i=e+1;i!==t.currentPageNumber&&(t.pdfViewer.currentPageNumber=i,t.currentPageNumber=i,t.pdfViewer.toolbarModule&&t.pdfViewer.toolbarModule.updateCurrentPage(i))},100))},s.prototype.getZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.zoomFactor:1},s.prototype.getPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchZoomed},s.prototype.getMagnified=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isMagnified},s.prototype.getPinchScrolled=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchScrolled},s.prototype.getPagesPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagePinchZoomed},s.prototype.getPagesZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagesZoomed},s.prototype.getRerenderCanvasCreated=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isRerenderCanvasCreated},s.prototype.getDocumentId=function(){return this.documentId},s.prototype.download=function(){this.pageCount>0&&this.createRequestForDownload()},s.prototype.saveAsBlob=function(){var e=this;return this.pageCount>0?new Promise(function(t,i){e.saveAsBlobRequest().then(function(n){t(n)})}):null},s.prototype.saveAsBlobRequest=function(){var t,e=this;return t=this,new Promise(function(n,r){var o=t.constructJsonDownload();e.dowonloadRequestHandler=new hs(e.pdfViewer),e.dowonloadRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.download,e.dowonloadRequestHandler.responseType="text",e.dowonloadRequestHandler.send(o),e.dowonloadRequestHandler.onSuccess=function(a){var l=a.data;if(l&&("object"==typeof l&&(l=JSON.parse(l)),"object"!=typeof l&&-1===l.indexOf("data:application/pdf")&&(t.onControlError(500,l,t.pdfViewer.serverActionSettings.download),l=null),l)){t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.download,l);var h=t.createBlobUrl(l.split("base64,")[1],"application/pdf");n(h)}},e.dowonloadRequestHandler.onFailure=function(a){t.pdfViewer.fireAjaxRequestFailed(a.status,a.statusText,t.pdfViewer.serverActionSettings.download)},e.dowonloadRequestHandler.onError=function(a){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(a.status,a.statusText,t.pdfViewer.serverActionSettings.download)}})},s.prototype.clear=function(e){var t=this,i=t.pdfViewer,n=i.printModule,r=i.textSearchModule,o=i.bookmarkViewModule,a=i.thumbnailView,l=i.annotation,h=i.magnificationModule,d=i.textSelectionModule,p=i.formFieldsModule,u=t.signatureModule;if(t.isPasswordAvailable=!1,t.isDocumentLoaded=!1,t.isInitialLoaded=!1,t.isImportAction=!1,t.annotationPageList=[],t.annotationComments=null,i.annotationCollection=[],i.signatureCollection=[],i.formFieldCollection=[],t.isAnnotationCollectionRemoved=!1,t.documentAnnotationCollections=null,t.isDrawnCompletely=!1,t.annotationRenderredList=[],t.isImportAction=!1,t.isImportedAnnotation=!1,t.importedAnnotation=[],t.isStorageExceed=!1,t.annotationStorage={},t.formFieldStorage={},t.downloadCollections={},t.annotationEvent=null,t.highestWidth=0,t.highestHeight=0,t.requestLists=[],t.tilerequestLists=[],t.isToolbarInkClicked=!1,i.formFieldCollections=[],t.passwordData="",t.isFocusField=!1,t.focusField=[],t.updateDocumentEditedProperty(!1),i.clipboardData.clipObject={},t.isTaggedPdf=!1,i.formDesignerModule&&(i.formDesignerModule.formFieldIndex=0,t.activeElements&&i.clearSelection(t.activeElements.activePageID),i.zIndexTable=[]),t.initiateTextSelectMode(),t.RestrictionEnabled(t.restrictionList,!0),t.restrictionList=null,(!E.isDevice||i.enableDesktopMode)&&t.navigationPane.sideBarToolbar&&t.navigationPane.clear(),(!X()&&E.isDevice||!i.enableDesktopMode)&&t.navigationPane.clear(),a&&a.clear(),o&&o.clear(),h&&(h.isMagnified=!1,h.clearIntervalTimer()),d&&d.clearTextSelection(),r&&r.resetTextSearch(),l&&(l.clear(),l.initializeCollection()),p&&(p.readOnlyCollection=[],p.signatureFieldCollection=[],p.renderedPageList=[],p.currentTarget=null),u&&(u.signaturecollection=[],u.outputcollection=[],u.signAnnotationIndex=[]),t.pageSize&&(t.pageSize=[]),t.renderedPagesList&&(t.renderedPagesList=[]),t.accessibilityTagsCollection&&(t.accessibilityTagsCollection=[]),t.pageRequestListForAccessibilityTags&&(t.pageRequestListForAccessibilityTags=[]),t.pageContainer)for(;t.pageContainer.hasChildNodes();)t.pageContainer.removeChild(t.pageContainer.lastChild);t.pageCount>0&&(t.unloadDocument(t),t.textLayer.characterBound=new Array,t.loadRequestHandler&&t.loadRequestHandler.clear(),t.virtualLoadRequestHandler&&t.virtualLoadRequestHandler.clear(),t.pageRequestHandler&&t.pageRequestHandler.clear(),t.dowonloadRequestHandler&&t.dowonloadRequestHandler.clear(),t.importAnnotationRequestHandler&&t.importAnnotationRequestHandler.clear(),t.exportAnnotationRequestHandler&&t.exportAnnotationRequestHandler.clear(),t.importFormFieldsRequestHandler&&t.importFormFieldsRequestHandler.clear(),t.exportFormFieldsRequestHandler&&t.exportFormFieldsRequestHandler.clear(),n&&n.printRequestHandler&&n.printRequestHandler.clear()),t.windowSessionStorageClear(),t.pinchZoomStorage&&(t.pinchZoomStorage=[]),(t.previousZoomValue||0===t.previousZoomValue)&&t.previousZoomValue!==i.zoomValue&&(i.zoomValue=t.previousZoomValue),e&&t.pageCount>0&&i.fireDocumentUnload(this.pdfViewer.fileName),this.pdfViewer.fileName=null},s.prototype.destroy=function(){if(E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.remove("e-pv-mobile-view"),this.unWireEvents(),this.clear(!1),this.pageContainer.parentNode&&this.pageContainer.parentNode.removeChild(this.pageContainer),this.viewerContainer.parentNode&&this.viewerContainer.parentNode.removeChild(this.viewerContainer),this.contextMenuModule){var e=this.contextMenuModule.contextMenuElement;e&&e.ej2_instances&&e.ej2_instances.length>0&&this.contextMenuModule.destroy()}this.pdfViewer.toolbarModule&&this.navigationPane.destroy();var t=document.getElementById("measureElement");t&&(t=void 0)},s.prototype.unloadDocument=function(e){var t;t=E.isIE||"edge"===E.info.name?decodeURI(window.sessionStorage.getItem("hashId")):e.hashId?e.hashId:window.sessionStorage.getItem("hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==t){var n={hashId:t,documentLiveCount:i,action:"Unload",elementId:e.pdfViewer.element.id},r=window.sessionStorage.getItem("unload");if(window.sessionStorage.getItem("serviceURL")&&"undefined"!==window.sessionStorage.getItem("serviceURL"))try{if("keepalive"in new Request("")){var a=this.setUnloadRequestHeaders(),l=this.pdfViewer.ajaxRequestSettings.withCredentials?"include":"omit";fetch(window.sessionStorage.getItem("serviceURL")+"/"+r,{method:"POST",credentials:l,headers:a,body:JSON.stringify(n)})}}catch{this.unloadRequestHandler=new hs(this.pdfViewer),this.unloadRequestHandler.send(n)}else X()&&this.clearCache(r,n,e)}if(this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.zoomFactor=1),this.formFieldCollection=[],this.textrequestLists=[],window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),this.documentId){window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_formDesigner"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),window.sessionStorage.removeItem(this.documentId+"_pagedata");for(var h=0;h<this.sessionStorage.length;h++)window.sessionStorage.removeItem(this.sessionStorage[parseInt(h.toString(),10)])}},s.prototype.clearCache=function(e,t,i){this.unloadRequestHandler=new hs(this.pdfViewer),this.unloadRequestHandler.url=window.sessionStorage.getItem("serviceURL")+"/"+e,this.unloadRequestHandler.mode=!1,this.unloadRequestHandler.responseType=null,this.unloadRequestHandler.send(t),this.unloadRequestHandler.onSuccess=function(n){var r=n.data;r&&("object"!=typeof r&&-1===r.indexOf("Document")&&(i.onControlError(500,r,e),r=null),r&&i.pdfViewer.fireAjaxRequestSuccess(i.pdfViewer.serverActionSettings.unload,r))},this.unloadRequestHandler.onFailure=function(n){i.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText,e)},this.unloadRequestHandler.onError=function(n){i.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText,e)}},s.prototype.setUnloadRequestHeaders=function(){var e=new Headers;e.append("Content-Type","application/json;charset=UTF-8");for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(t.toString(),10)].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(t.toString(),10)].headerValue);return e},s.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload");for(var e=0;e<this.sessionStorage.length;e++)window.sessionStorage.removeItem(this.sessionStorage[parseInt(e.toString(),10)])},s.prototype.updateCommentPanel=function(){for(var e=document.querySelectorAll(".e-pv-more-options-button"),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].style.visibility="hidden";for(var i=document.querySelectorAll(".e-pv-new-comments-div"),n=0;n<i.length;n++)i[parseInt(n.toString(),10)].style.display="none";var r=document.querySelectorAll(".e-pv-comments-border");for(n=0;n<r.length;n++)r[parseInt(n.toString(),10)].classList.remove("e-pv-comments-border");var o=document.querySelectorAll(".e-editable-inline");for(n=0;n<o.length;n++)o[parseInt(n.toString(),10)].style.display="none";for(var a=document.querySelectorAll(".e-pv-comments-select"),l=0;l<a.length;l++)a[parseInt(l.toString(),10)].classList.remove("e-pv-comments-select");var h=document.querySelectorAll(".e-pv-comments-div");for(n=0;n<h.length;n++)h[parseInt(n.toString(),10)].style.minHeight="60px"},s.prototype.focusViewerContainer=function(e){var t=window.scrollX,i=window.scrollY,n=this.getScrollParent(this.viewerContainer),r=0,o=0;null!==n&&(r=n.scrollLeft,o=n.scrollTop),this.viewerContainer.focus(),this.currentPageNumber>0&&this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.element.id+"_pageDiv_"+(this.currentPageNumber-1)),this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&this.updateCommentPanel(),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1||-1!==navigator.userAgent.indexOf("Edge"))&&null!==n?(n.scrollLeft=r,n.scrollTop=o):null!==n&&n.scrollTo(r,o),window.scrollTo(t,i)},s.prototype.getScrollParent=function(e){if(null===e||"HTML"===e.nodeName)return null;var t=getComputedStyle(e);return this.viewerContainer.id===e.id||"scroll"!==t.overflowY&&"auto"!==t.overflowY?this.getScrollParent(e.parentNode):e},s.prototype.createCorruptedPopup=function(){var e=this,t=F("div",{id:this.pdfViewer.element.id+"_corrupted_popup",className:"e-pv-corrupted-popup"});this.pageContainer.appendChild(t),this.corruptPopup=new Or({showCloseIcon:!0,closeOnEscape:!0,isModal:!0,header:'<div class="e-pv-corrupted-popup-header"> '+this.pdfViewer.localeObj.getConstant("File Corrupted")+"</div>",visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeCorruptPopup.bind(this)}],target:this.pdfViewer.element,beforeClose:function(){e.corruptPopup.destroy(),e.getElement("_corrupted_popup").remove(),e.corruptPopup=null;var i=e.getElement("_loadingIndicator");null!=i&&Ul(i)}}),this.pdfViewer.enableRtl?(this.corruptPopup.content='<div id="templatertl" class="e-pv-notification-icon-rtl"> <div class="e-pv-corrupted-popup-content-rtl" tabindex="0">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.enableRtl=!0):this.corruptPopup.content='<div id="template" class="e-pv-notification-icon"> <div class="e-pv-corrupted-popup-content" tabindex="0">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.appendTo(t)},s.prototype.hideLoadingIndicator=function(){var e=this.getElement("_loadingIndicator");null!==e&&Ul(e)},s.prototype.closeCorruptPopup=function(){this.corruptPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Ul(e)},s.prototype.createPrintPopup=function(){var e=document.getElementById(this.pdfViewer.element.id);this.printMainContainer=F("div",{id:this.pdfViewer.element.id+"_printcontainer",className:"e-pv-print-popup-container"}),e.appendChild(this.printMainContainer),this.printMainContainer.style.display="none";var t=F("div",{id:this.pdfViewer.element.id+"_printLoadingIndicator",className:"e-pv-print-loading-container"});this.printMainContainer.appendChild(t),DS({target:t,cssClass:"e-spin-center"}),this.setLoaderProperties(t)},s.prototype.createGoToPagePopup=function(){var e=this,t=F("div",{id:this.pdfViewer.element.id+"_goTopage_popup",className:"e-pv-gotopage-popup"});this.goToPageElement=F("span",{id:this.pdfViewer.element.id+"_prompt"}),this.goToPageElement.textContent=this.pdfViewer.localeObj.getConstant("Enter pagenumber"),t.appendChild(this.goToPageElement);var i=F("span",{className:"e-pv-text-input"});this.goToPageInput=F("input",{id:this.pdfViewer.element.id+"_page_input",className:"e-input"}),this.goToPageInput.type="text",this.goToPageInput.style.maxWidth="80%",this.pageNoContainer=F("span",{className:".e-pv-number-ofpages"}),i.appendChild(this.goToPageInput),i.appendChild(this.pageNoContainer),t.appendChild(i),this.pageContainer.appendChild(t),this.goToPagePopup=new Or({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("GoToPage"),visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.GoToPageCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Apply"),disabled:!0,cssClass:"e-pv-gotopage-apply-btn",isPrimary:!0},click:this.GoToPageApplyClick.bind(this)}],close:this.closeGoToPagePopUp.bind(this)}),this.pdfViewer.enableRtl&&(this.goToPagePopup.enableRtl=!0),this.goToPagePopup.appendTo(t),X()||new zr({format:"##",showSpinButton:!1}).appendTo(this.goToPageInput),this.goToPageInput.addEventListener("keyup",function(){var r=e.goToPageInput.value;""!==r&&parseFloat(r)>0&&e.pdfViewer.pageCount+1>parseFloat(r)?e.EnableApplyButton():e.DisableApplyButton()})},s.prototype.closeGoToPagePopUp=function(){this.goToPageInput.value="",this.DisableApplyButton()},s.prototype.EnableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].removeAttribute("disabled")},s.prototype.DisableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].setAttribute("disabled",!0)},s.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide()},s.prototype.GoToPageApplyClick=function(){this.goToPagePopup.hide(),this.pdfViewer.navigation.goToPage(this.goToPageInput.value),this.updateMobileScrollerPosition()},s.prototype.updateMobileScrollerPosition=function(){E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobileScrollerContainer&&(this.mobileScrollerContainer.style.top=(this.pdfViewer.toolbarModule?this.toolbarHeight:0)+this.viewerContainer.scrollTop/((this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56))+"px")},s.prototype.createPasswordPopup=function(){var e=this,t=F("div",{id:this.pdfViewer.element.id+"_password_popup",className:"e-pv-password-popup",attrs:{tabindex:"-1"}});this.promptElement=F("span",{id:this.pdfViewer.element.id+"_prompt",attrs:{tabindex:"-1"}}),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),t.appendChild(this.promptElement);var i=F("span",{className:"e-input-group e-pv-password-input"});this.passwordInput=F("input",{id:this.pdfViewer.element.id+"_password_input",className:"e-input"}),this.passwordInput.type="password",this.passwordInput.name="Required",i.appendChild(this.passwordInput),t.appendChild(i),this.pageContainer.appendChild(t),this.passwordPopup=new Or({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Password Protected"),visible:!1,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function(){e.passwordPopup.destroy(),e.getElement("_password_popup").remove(),e.passwordPopup=null;var n=e.getElement("_loadingIndicator");null!=n&&Ul(n)}}),this.passwordPopup.buttons=!E.isDevice||this.pdfViewer.enableDesktopMode?[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)}]:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)}],this.pdfViewer.enableRtl&&(this.passwordPopup.enableRtl=!0),this.passwordPopup.appendTo(t),this.passwordInput.addEventListener("keyup",function(){""===e.passwordInput.value&&e.passwordDialogReset()}),this.passwordInput.addEventListener("focus",function(){e.passwordInput.parentElement.classList.add("e-input-focus")}),this.passwordInput.addEventListener("blur",function(){e.passwordInput.parentElement.classList.remove("e-input-focus")})},s.prototype.passwordCancel=function(e){e.isInteraction&&(this.clear(!1),this.passwordDialogReset(),this.passwordInput.value="");var t=this.getElement("_loadingIndicator");null!==t&&Ul(t)},s.prototype.passwordCancelClick=function(){this.clear(!1),this.passwordDialogReset(),this.passwordPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Ul(e)},s.prototype.passwordDialogReset=function(){X()||this.promptElement&&(this.promptElement.classList.remove("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),this.passwordInput.value="")},s.prototype.applyPassword=function(){if(!X()){var e=this.passwordInput.value;!c(e)&&e.length>0&&this.pdfViewer.load(this.document,e)}this.focusViewerContainer()},s.prototype.createFileInputElement=function(){(E.isDevice||!this.pdfViewer.enableDesktopMode)&&(this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement(),this.signatureModule&&this.signatureModule.createSignatureFileElement())},s.prototype.wireEvents=function(){var e=this;this.viewerContainer.addEventListener("scroll",this.viewerContainerOnScroll,!0),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.addEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.addEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.addEventListener("wheel",this.detectTouchPad,!1),this.viewerContainer.addEventListener("wheel",this.viewerContainerOnMouseWheel),this.isMacSafari&&(window.addEventListener("gesturestart",function(t){return t.preventDefault()}),window.addEventListener("gesturechange",function(t){return t.preventDefault()}),window.addEventListener("gestureend",function(t){return t.preventDefault()}),this.viewerContainer.addEventListener("gesturestart",this.handleMacGestureStart,!1),this.viewerContainer.addEventListener("gesturechange",this.handleMacGestureChange,!1),this.viewerContainer.addEventListener("gestureend",this.handleMacGestureEnd,!1)),this.viewerContainer.addEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.addEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.addEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.addEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.addEventListener("click",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dblclick",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dragstart",this.viewerContainerOnDragStart),this.pdfViewer.element.addEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("mouseup",this.onWindowMouseUp),window.addEventListener("touchend",this.onWindowTouchEnd),this.unload=function(){return e.unloadDocument(e)},window.addEventListener("unload",this.unload),window.addEventListener("beforeunload",this.clearSessionStorage),window.addEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.addEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.addEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.addEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.addEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.addEventListener("touchstart",this.viewerContainerOnTouchStart),this.isWebkitMobile&&this.isDeviceiOS&&this.viewerContainer.addEventListener("touchmove",function(t){1!==t.scale&&t.preventDefault()},{passive:!1}),this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.addEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchcancel",this.viewerContainerOnTouchEnd))},s.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener("scroll",this.viewerContainerOnScroll,!0),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.removeEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.removeEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.removeEventListener("wheel",this.detectTouchPad,!1),this.viewerContainer.removeEventListener("wheel",this.viewerContainerOnMouseWheel),this.isMacSafari&&(window.removeEventListener("gesturestart",function(e){return e.preventDefault()}),window.removeEventListener("gesturechange",function(e){return e.preventDefault()}),window.removeEventListener("gestureend",function(e){return e.preventDefault()}),this.viewerContainer.removeEventListener("gesturestart",this.handleMacGestureStart,!1),this.viewerContainer.removeEventListener("gesturechange",this.handleMacGestureChange,!1),this.viewerContainer.removeEventListener("gestureend",this.handleMacGestureEnd,!1)),this.viewerContainer.removeEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.removeEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.removeEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.removeEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.removeEventListener("click",this.viewerContainerOnClick),this.viewerContainer.removeEventListener("dragstart",this.viewerContainerOnDragStart),this.viewerContainer.removeEventListener("contextmenu",this.viewerContainerOnContextMenuClick),this.pdfViewer.element.removeEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("mouseup",this.onWindowMouseUp),window.removeEventListener("unload",this.unload),window.removeEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.removeEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.removeEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.removeEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.removeEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.removeEventListener("touchstart",this.viewerContainerOnTouchStart),this.isWebkitMobile&&this.isDeviceiOS&&this.viewerContainer.removeEventListener("touchmove",function(e){1!==e.scale&&e.preventDefault()},!1),this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.removeEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchcancel",this.viewerContainerOnTouchEnd))},s.prototype.updateZoomValue=function(){this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.magnificationModule.fitToAuto():"FitToWidth"!==this.pdfViewer.zoomMode&&"fitToWidth"===this.pdfViewer.magnificationModule.fitType?this.pdfViewer.magnificationModule.fitToWidth():"fitToPage"===this.pdfViewer.magnificationModule.fitType&&this.pdfViewer.magnificationModule.fitToPage());for(var e=0;e<this.pageCount;e++)this.applyLeftPosition(e)},s.prototype.updateFreeTextProperties=function(e){this.pdfViewer.enableShapeLabel&&(this.pdfViewer.shapeLabelSettings.fillColor&&(e.labelFillColor=this.pdfViewer.shapeLabelSettings.fillColor),this.pdfViewer.shapeLabelSettings.fontColor&&(e.fontColor=this.pdfViewer.shapeLabelSettings.fontColor),this.pdfViewer.shapeLabelSettings.fontSize&&(e.fontSize=this.pdfViewer.shapeLabelSettings.fontSize),this.pdfViewer.shapeLabelSettings.fontFamily&&(e.fontFamily=this.pdfViewer.shapeLabelSettings.fontFamily),this.pdfViewer.shapeLabelSettings.opacity&&(e.labelOpacity=this.pdfViewer.shapeLabelSettings.opacity),this.pdfViewer.shapeLabelSettings.labelContent&&(e.labelContent=this.pdfViewer.shapeLabelSettings.labelContent))},s.prototype.mouseDownHandler=function(e){var i,t=!1,n=[],r=[];if(e&&e.target&&(this.mouseDownEvent=e,this.contextMenuModule.currentTarget=e.target),this.pdfViewer.annotationModule&&(t=this.pdfViewer.annotationModule.isEnableDelete()),t||r.push("DeleteContext"),"None"===this.pdfViewer.contextMenuOption)i=!0;else if(this.pdfViewer.textSelectionModule||this.isShapeBasedAnnotationsEnabled()){if(e){var o=this.isClickWithinSelectionBounds(e);this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.isFreeTextContextMenu=!0,this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected&&(r.push("Cut"),r.push("Copy")),this.pdfViewer.annotation.freeTextAnnotationModule&&""===this.pdfViewer.annotation.freeTextAnnotationModule.selectedText&&r.push("Paste"),n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("ScaleRatio"),n.push("Properties"),n.push("Comment"),n.push("DeleteContext")):o&&this.pdfViewer.textSelectionModule?(!e.target.classList.contains("e-pv-maintaincontent")&&e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pv-text-layer")?this.checkIsNormalText()&&(i=!0):(E.isIE||"edge"===E.info.name)&&e.target.classList.contains("e-pv-page-container")&&(i=!0),n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Comment"),n.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.shapeMenuItems(n,r,!0):this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.target.classList.contains("e-pv-text-layer")||e.target.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(n.push("Properties"),this.shapeMenuItems(n,r,!1)):this.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode?(n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("Properties"),r.push("Cut"),r.push("Copy"),r.push("Paste"),r.push("DeleteContext"),r.push("Comment")):this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("Properties"),n.push("Cut"),n.push("Copy"),n.push("Paste"),n.push("ScaleRatio")):i=!0:this.shapeMenuItems(n,r,!1,!0)}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Comment"),n.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length&&(n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Properties"));this.pdfViewer.enableCommentPanel||r.push("Comment")}else i=!0;this.pdfViewer._dotnetInstance.invokeMethodAsync("MouseDownHandler",{hidenItems:n,disabledItems:r,isCancel:i})},s.prototype.OnItemSelected=function(e){var t=this.contextMenuModule.currentTarget;switch(e){case this.pdfViewer.localeObj.getConstant("Copy"):this.CopyItemSelected();break;case this.pdfViewer.localeObj.getConstant("Highlight context"):this.TextMarkUpSelected("Highlight");break;case this.pdfViewer.localeObj.getConstant("Underline context"):this.TextMarkUpSelected("Underline");break;case this.pdfViewer.localeObj.getConstant("Strikethrough context"):this.TextMarkUpSelected("Strikethrough");break;case this.pdfViewer.localeObj.getConstant("Properties"):this.PropertiesItemSelected();break;case this.pdfViewer.localeObj.getConstant("Cut"):this.CutItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Paste"):this.pasteItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Delete Context"):this.DeleteItemSelected();break;case this.pdfViewer.localeObj.getConstant("Scale Ratio"):this.ScaleRatioSelected();break;case this.pdfViewer.localeObj.getConstant("Comment"):this.CommentItemSelected()}},s.prototype.CommentItemSelected=function(){if(this.pdfViewer.annotation&&(this.pdfViewer.annotation.showCommentsPanel(),0!==this.pdfViewer.selectedItems.annotations.length||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)){var e;e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0];var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);t&&t.ej2_instances[0].expandItem(!0);var i=document.getElementById(e.annotName);i&&(i.classList.contains("e-pv-comments-border")||i.firstChild.click())}},s.prototype.ScaleRatioSelected=function(){this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow()},s.prototype.DeleteItemSelected=function(){this.pdfViewer.formDesignerModule&&0!==this.pdfViewer.selectedItems.formFields.length?this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id):this.pdfViewer.annotation&&this.pdfViewer.annotation.deleteAnnotation()},s.prototype.pasteItemSelected=function(e){this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName?(this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(e),this.contextMenuModule.close()):(this.pdfViewer.paste(),this.contextMenuModule.previousAction="Paste")},s.prototype.CutItemSelected=function(e){this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName?(this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(e),this.contextMenuModule.close()):(1===this.pdfViewer.selectedItems.annotations.length||1===this.pdfViewer.selectedItems.formFields.length)&&(this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut")},s.prototype.CopyItemSelected=function(){var e=!1;this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText(),this.contextMenuModule.close(),e=!0):this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.copyText(),this.contextMenuModule.close()),(this.pdfViewer.selectedItems.annotations.length&&!e||this.pdfViewer.selectedItems.formFields.length>0)&&(this.pdfViewer.copy(),this.contextMenuModule.previousAction="Copy")},s.prototype.PropertiesItemSelected=function(){0===this.pdfViewer.selectedItems.annotations.length||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.formDesigner.createPropertiesWindow():this.pdfViewer.annotation.createPropertiesWindow()},s.prototype.TextMarkUpSelected=function(e){this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&(this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(e),this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="",this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!0)},s.prototype.shapeMenuItems=function(e,t,i,n){this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied&&t.push("Paste"),e.push("HighlightContext"),e.push("UnderlineContext"),e.push("StrikethroughContext"),e.push("ScaleRatio"),i?"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"LineWidthArrowHead"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||e.push("Properties"):n?(e.push("Properties"),e.push("Comment")):(e.push("Cut"),e.push("Copy"),e.push("DeleteContext"),e.push("Comment"))},s.prototype.checkIsRtlText=function(e){return new RegExp("^[^A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF]*[\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]").test(e)},s.prototype.isClickWithinSelectionBounds=function(e){var t,i=!1,o=this.currentPageNumber-5>this.pageCount?this.pageCount:this.currentPageNumber+5;if(this.pdfViewer.textSelectionModule){for(var a=this.currentPageNumber-5<0?0:this.currentPageNumber-5;a<o;a++)if(a>=0&&(t=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(a))){var l=t;if(this.getHorizontalValue(l.left,a)<e.clientX&&this.getHorizontalValue(l.right,a)>e.clientX&&this.getVerticalValue(l.top,a)<e.clientY&&this.getVerticalValue(l.bottom,a)>e.clientY){i=!0;break}}(E.isIE||"edge"===E.info.name)&&t&&(i=!0)}return i},s.prototype.getHorizontalClientValue=function(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().left},s.prototype.getVerticalClientValue=function(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().top},s.prototype.getHorizontalValue=function(e,t){var n=this.getElement("_pageDiv_"+(t||this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+n.left},s.prototype.getVerticalValue=function(e,t){var n=this.getElement("_pageDiv_"+(t||this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+n.top},s.prototype.checkIsNormalText=function(){var e=!0,t="",i=this.pdfViewer.textSelectionModule;return i&&i.selectionRangeArray&&1===i.selectionRangeArray.length?t=i.selectionRangeArray[0].textContent:window.getSelection()&&window.getSelection().anchorNode&&(t=window.getSelection().toString()),""!==t&&this.checkIsRtlText(t)&&(e=!1),e},s.prototype.DeleteKeyPressed=function(e){var t,i=document.getElementById(this.pdfViewer.element.id+"_search_box");if(i&&(t="none"!==i.style.display),this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen&&this.pdfViewer.designerMode&&0!==this.pdfViewer.selectedItems.formFields.length&&!t)this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);else if(this.pdfViewer.annotation&&!this.pdfViewer.designerMode&&e.srcElement.parentElement.classList&&!e.srcElement.parentElement.classList.contains("e-input-focus")&&(this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&!t&&this.pdfViewer.annotationModule.deleteAnnotation(),this.pdfViewer.selectedItems.annotations.length>0)){var n=this.pdfViewer.selectedItems.annotations[0],r=!0,o=n.shapeAnnotationType;if("Path"===o||"SignatureField"===n.formFieldAnnotationType||"InitialField"===n.formFieldAnnotationType||"HandWrittenSignature"===o||"SignatureText"===o||"SignatureImage"===o){var a=document.getElementById(n.id);a&&a.disabled&&(r=!0)}r||(n.annotationSettings&&n.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",n)&&(this.pdfViewer.remove(n),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))):(this.pdfViewer.remove(n),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))))}},s.prototype.initiatePanning=function(){this.isPanMode=!0,this.textLayer.modifyTextCursor(!1),this.disableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems()},s.prototype.initiateTextSelectMode=function(){this.isPanMode=!1,this.viewerContainer&&(this.viewerContainer.style.cursor="auto",this.pdfViewer.textSelectionModule&&(this.textLayer.modifyTextCursor(!0),this.pdfViewer.textSelectionModule.enableTextSelectionMode()),(!E.isDevice||this.pdfViewer.enableDesktopMode)&&!X()&&this.enableAnnotationAddTools(!0))},s.prototype.initiateTextSelection=function(){this.pdfViewer.toolbar&&!this.pdfViewer.toolbar.isSelectionToolDisabled&&(this.initiateTextSelectMode(),this.pdfViewer.toolbar.updateInteractionTools(!0))},s.prototype.enableAnnotationAddTools=function(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(e)},s.prototype.applySelection=function(){null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection(),this.isViewerContainerDoubleClick=!1},s.prototype.isDesignerMode=function(e){var t=!1;return(0!==this.pdfViewer.selectedItems.annotations.length&&("HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)||0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode||this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation||this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text")))&&(t=!0),this.designerModetarget=e,t},s.prototype.handleTaps=function(e,t){var i=this;if(this.isDeviceiOS){var n=Ta(t,this,this.pdfViewer),r=!c(this.pdfViewer.annotation)&&!c(this.pdfViewer.annotation.freeTextAnnotationModule)&&!this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot&&(!n||!this.pdfViewer.selectedItems.annotations[0]||n.id!==this.pdfViewer.selectedItems.annotations[0].id)&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,this.tapCount>2&&(this.tapCount=2),clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout(function(){r&&(i.pdfViewer.clearSelection(i.pdfViewer.selectedItems.annotations[0].pageIndex),i.focusViewerContainer(!0)),i.onSingleTap(e)},300),this.tapCount++)}else this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,this.tapCount>2&&(this.tapCount=2),clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout(function(){i.onSingleTap(e)},300),this.tapCount++)},s.prototype.handleTextBoxTaps=function(e){var t=this;setTimeout(function(){t.inputTapCount=0},300),this.inputTapCount++,this.isDeviceiOS?this.onTextBoxDoubleTap(e):setTimeout(function(){t.onTextBoxDoubleTap(e)},200),this.inputTapCount>2&&(this.inputTapCount=0)},s.prototype.onTextBoxDoubleTap=function(e){if(2===this.inputTapCount&&0!==this.pdfViewer.selectedItems.annotations.length){if(this.pdfViewer.annotationModule){var i=this.pdfViewer.selectedItems.annotations[0];this.isDeviceiOS&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)&&this.focusViewerContainer(!0),this.pdfViewer.annotationModule.annotationSelect(i.annotName,i.pageIndex,i,null,!0)}if(this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)&&!this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus)(n={}).x=this.pdfViewer.selectedItems.annotations[0].bounds.x,n.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(n,"diagram_helper"==this.pdfViewer.selectedItems.annotations[0].id?this.pdfViewer.nameTable[this.eventArgs.source.id]:this.pdfViewer.selectedItems.annotations[0]);else if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].enableShapeLabel&&!this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){var n;(n={}).x=this.pdfViewer.selectedItems.annotations[0].bounds.x,n.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.inputElementModule.editLabel(n,this.pdfViewer.selectedItems.annotations[0])}}},s.prototype.onSingleTap=function(e){var t=e[0].target,i=!1;if(this.singleTapTimer=null,t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&!i&&this.pdfViewer.toolbarModule){if(this.touchClientX>=e[0].clientX-10&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+10){if(this.isTapHidden)X()&&(this.viewerContainer.scrollTop+=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar").clientHeight*this.getZoomFactor());else if(X()&&(this.viewerContainer.scrollTop-=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar").clientHeight*this.getZoomFactor()),this.pdfViewer.toolbar.moreDropDown){var n=this.getElement("_more_option-popup");n.firstElementChild&&(n.classList.remove("e-popup-open"),n.classList.add("e-popup-close"),n.removeChild(n.firstElementChild))}this.isTapHidden&&E.isDevice&&!this.pdfViewer.enableDesktopMode?(this.mobileScrollerContainer.style.display="",this.updateMobileScrollerPosition()):E.isDevice&&!this.pdfViewer.enableDesktopMode&&null==this.getSelectTextMarkupCurrentPage()&&(this.mobileScrollerContainer.style.display="none"),null==this.getSelectTextMarkupCurrentPage()&&(X()?this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden):this.pdfViewer.enableToolbar&&this.pdfViewer.toolbarModule.showToolbar(!0),this.isTapHidden=!this.isTapHidden)}this.tapCount=0}},s.prototype.onDoubleTap=function(e){var t=e[0].target,i=!1;t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),2===this.tapCount&&!i&&(this.tapCount=0,this.touchClientX>=parseInt((e[0].clientX-10).toString())&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+30&&(this.pdfViewer.magnification&&1!==this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.magnification.onDoubleTapMagnification(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,this.toolbarHeight),this.isTapHidden=!1,clearTimeout(this.singleTapTimer),this.singleTapTimer=null))},s.prototype.preventTouchEvent=function(e){this.pdfViewer.textSelectionModule&&!this.isPanMode&&this.pdfViewer.enableTextSelection&&!this.isTextSelectionDisabled&&null==this.getSelectTextMarkupCurrentPage()&&(this.isWebkitMobile&&E.isDevice&&!this.pdfViewer.enableDesktopMode||(e.preventDefault(),e.stopPropagation()))},s.prototype.renderStampAnnotation=function(e){if(this.pdfViewer.annotation){var t=this.getZoomFactor(),i=this.pdfViewer.annotation.getEventPageNumber(e),n=this.getElement("_pageDiv_"+i);if(this.pdfViewer.enableStampAnnotations){var r=this.pdfViewer.annotationModule.stampAnnotationModule;if(r&&r.isStampAnnotSelected&&n){var o=n.getBoundingClientRect();if("touchend"===e.type&&"Image"===this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType){var a=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;a.pageIndex=i,a.bounds.x=(e.changedTouches[0].clientX-o.left)/t,a.bounds.y=(e.changedTouches[0].clientY-o.top)/t,r.updateDeleteItems(i,a,a.opacity),this.pdfViewer.add(a);var l=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i);this.pdfViewer.renderDrawing(l,i)}else r.renderStamp((e.changedTouches[0].clientX-o.left)/t,(e.changedTouches[0].clientY-o.top)/t,null,null,i,null,null,null,null);r.isStampAnnotSelected=!1}this.pdfViewer.annotation.onAnnotationMouseDown()}this.pdfViewer.enableHandwrittenSignature&&this.isSignatureAdded&&n&&(o=n.getBoundingClientRect(),this.currentSignatureAnnot.pageIndex=i,this.signatureModule.renderSignature((e.changedTouches[0].clientX-o.left)/t,(e.changedTouches[0].clientY-o.top)/t),this.isSignatureAdded=!1),1===e.touches.length&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)}},s.prototype.initPageDiv=function(e){if(X()||this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateTotalPage(),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobiletotalPageContainer&&(this.mobiletotalPageContainer.innerHTML=this.pageCount.toString(),this.pageNoContainer.innerHTML="(1-"+this.pageCount.toString()+")"),this.pageCount>0){var t=0,i=0;this.isMixedSizeDocument=!1,this.pageCount>100?this.pageLimit=i=100:i=this.pageCount;for(var n=!1,r=!1,o=!1,a=0;a<i;a++){if("object"!=typeof e.pageSizes[parseInt(a.toString(),10)]){var l=e.pageSizes[parseInt(a.toString(),10)].split(",");if(null!==e.pageSizes[a-1]&&0!==a){var h=e.pageSizes[a-1].split(",");t=this.pageGap+parseFloat(h[1])+t}else t=this.pageGap;var d={width:parseFloat(l[0]),height:parseFloat(l[1]),top:t};this.pageSize.push(d)}else null!==e.pageSizes[a-1]&&0!==a?(h=e.pageSizes[a-1],t=this.pageGap+parseFloat(h.Height)+t):t=this.pageGap,d={width:e.pageSizes[parseInt(a.toString(),10)].Width,height:e.pageSizes[parseInt(a.toString(),10)].Height,top:t},this.pageSize.push(d);this.pageSize[parseInt(a.toString(),10)].height>this.pageSize[parseInt(a.toString(),10)].width&&(n=!0),this.pageSize[parseInt(a.toString(),10)].width>this.pageSize[parseInt(a.toString(),10)].height&&(r=!0),a>0&&this.pageSize[parseInt(a.toString(),10)].width!==this.pageSize[a-1].width&&(o=!0);var p=this.pageSize[parseInt(a.toString(),10)].width;p>this.highestWidth&&(this.highestWidth=p);var u=this.pageSize[parseInt(a.toString(),10)].height;u>this.highestHeight&&(this.highestHeight=u)}(n&&r||o)&&(this.isMixedSizeDocument=!0);var f;for(f=this.pdfViewer.initialRenderPages>10?this.pdfViewer.initialRenderPages>100?i:this.pdfViewer.initialRenderPages<=this.pageCount?this.pdfViewer.initialRenderPages:this.pageCount:this.pageCount<10?this.pageCount:10,a=0;a<f;a++)this.renderPageContainer(a,this.getPageWidth(a),this.getPageHeight(a),this.getPageTop(a));this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+"px",this.pageContainer.style.position="relative",100===this.pageLimit&&null===this.getElement("_pageDiv_"+this.pageLimit)&&this.pageLimit<this.pageCount&&Promise.all([this.renderPagesVirtually()])}},s.prototype.renderElementsVirtualScroll=function(e){var i=e+(this.pageStopValue<=200?4:2);i>this.pageCount&&(i=this.pageCount);for(var n=e-1;n<=i;n++)-1!==n&&this.renderPageElement(n);var r=e-3;for(r<0&&(r=0),n=e-1;n>=r;n--)-1!==n&&this.renderPageElement(n);for(var o=0;o<this.pageCount;o++)if(!(r<=o&&o<=i)){var p,a=this.getElement("_pageDiv_"+o),l=this.getElement("_pageCanvas_"+o),h=this.getElement("_textLayer_"+o),d=this.pdfViewer.initialRenderPages>this.pageRenderCount?this.pdfViewer.initialRenderPages<=this.pageCount?this.pdfViewer.initialRenderPages-1:this.pageCount:-1;l&&o>d&&(l.parentNode.removeChild(l),h&&(this.pdfViewer.textSelectionModule&&0!==h.childNodes.length&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(o,!0),h.parentNode.removeChild(h)),-1!==(p=this.renderedPagesList.indexOf(o))&&this.renderedPagesList.splice(p,1)),a&&o>d&&(a.parentNode.removeChild(a),-1!==(p=this.renderedPagesList.indexOf(o))&&this.renderedPagesList.splice(p,1))}X()&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCurrentPageNumber",this.currentPageNumber)},s.prototype.renderPageElement=function(e){var t=this.getElement("_pageDiv_"+e);null==this.getElement("_pageCanvas_"+e)&&null==t&&e<this.pageSize.length&&this.renderPageContainer(e,this.getPageWidth(e),this.getPageHeight(e),this.getPageTop(e))},s.prototype.renderPagesVirtually=function(){return function(s,e,t,i){return new(t||(t=Promise))(function(n,r){function o(h){try{l(i.next(h))}catch(d){r(d)}}function a(h){try{l(i.throw(h))}catch(d){r(d)}}function l(h){h.done?n(h.value):new t(function(d){d(h.value)}).then(o,a)}l((i=i.apply(s,[])).next())})}(this,0,void 0,function(){var e,t=this;return function(s,e){var i,n,r,o,t={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(d){return function l(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(r=2&h[0]?n.return:h[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,h[1])).done)return r;switch(n=0,r&&(h=[2&h[0],r.value]),h[0]){case 0:case 1:r=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,n=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(!(r=(r=t.trys).length>0&&r[r.length-1])&&(6===h[0]||2===h[0])){t=0;continue}if(3===h[0]&&(!r||h[1]>r[0]&&h[1]<r[3])){t.label=h[1];break}if(6===h[0]&&t.label<r[1]){t.label=r[1],r=h;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(h);break}r[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(s,t)}catch(d){h=[6,d],n=0}finally{i=r=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,d])}}}(this,function(i){return e=this,setTimeout(function(){t.initiateRenderPagesVirtually(e)},500),[2]})})},s.prototype.initiateRenderPagesVirtually=function(e){var t={hashId:e.hashId,isCompletePageSizeNotReceived:!0,action:"VirtualLoad",elementId:e.pdfViewer.element.id,uniqueId:e.documentId,password:e.passwordData};e.jsonDocumentId&&(t.documentId=e.jsonDocumentId),this.virtualLoadRequestHandler=new hs(this.pdfViewer),this.virtualLoadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.load,this.virtualLoadRequestHandler.responseType="json",this.virtualLoadRequestHandler.mode=!0,this.virtualLoadRequestHandler.send(t),this.virtualLoadRequestHandler.onSuccess=function(i){var n=i.data;if(n&&"object"!=typeof n)try{n=JSON.parse(n)}catch{e.onControlError(500,n,"VirtualLoad")}if(n){for(;"object"!=typeof n;)n=JSON.parse(n);if(e.documentId===n.uniqueId){e.pdfViewer.fireAjaxRequestSuccess("VirtualLoad",n);var r=n;if(e.pageSize[e.pageLimit-1]){for(var o=e.pageSize[e.pageLimit-1].top,a=e.pageLimit;a<e.pageCount;a++)if("object"!=typeof r.pageSizes[parseInt(a.toString(),10)]){var l=r.pageSizes[parseInt(a.toString(),10)].split(",");if(null!==e.pageSize[a-1]&&0!==a){var h=e.pageSize[a-1].height;o=e.pageGap+parseFloat(h)+o}var d={width:parseFloat(l[0]),height:parseFloat(l[1]),top:o};e.pageSize.push(d)}else null!==e.pageSize[a-1]&&0!==a&&(h=e.pageSize[a-1].height,o=e.pageGap+parseFloat(h)+o),d={width:parseFloat(r.pageSizes[parseInt(a.toString(),10)].Width),height:parseFloat(r.pageSizes[parseInt(a.toString(),10)].Height),top:o},e.pageSize.push(d);e.pageContainer.style.height=e.getPageTop(e.pageSize.length-1)+e.getPageHeight(e.pageSize.length-1)+"px";var p=window.sessionStorage.getItem(e.documentId+"_pagedata");if(e.pageCount>100){if(this.pdfViewer.initialRenderPages>100)for(var u=this.pdfViewer.initialRenderPages<=e.pageCount?this.pdfViewer.initialRenderPages:e.pageCount,f=100;f<u;f++)e.renderPageContainer(f,e.getPageWidth(f),e.getPageHeight(f),e.getPageTop(f)),e.createRequestForRender(f);e.pdfViewer.fireDocumentLoad(p);var g=e.pdfViewer.linkAnnotationModule;g&&g.linkAnnotation&&g.linkAnnotation.length>0&&g.linkPage.length>0&&g.renderDocumentLink(g.linkAnnotation,g.linkPage,g.annotationY,e.currentPageNumber-1)}}}}},this.virtualLoadRequestHandler.onFailure=function(i){e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)},this.virtualLoadRequestHandler.onError=function(i){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)}},s.prototype.tileRenderPage=function(e,t){var n,i=this;if(n=this,e&&this.pageSize[parseInt(t.toString(),10)]){var r=this.getPageWidth(t),o=this.getPageHeight(t),a=this.getElement("_pageCanvas_"+t),l=this.getElement("_pageDiv_"+t),h=e.tileX?e.tileX:0,d=e.tileY?e.tileY:0;l&&(l.style.width=r+"px",l.style.height=o+"px",l.style.background="#fff",l.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?l.style.right=this.updateLeftPosition(t)+"px":l.style.left=this.updateLeftPosition(t)+"px"),a&&(a.style.background="#fff");var p=e.image,u=this.retrieveCurrentZoomFactor();if(this.isReRenderRequired){e.zoomFactor&&(u=e.zoomFactor),this.tilerequestLists.push(this.documentId+"_"+t+"_"+u+"_"+e.tileX+"_"+e.tileY);var g=e.transformationMatrix,m=e.width;if(p){var y=e.tileX?e.tileX:0,b=e.tileY?e.tileY:0,w=c(e.scaleFactor)?1.5:e.scaleFactor,S=document.getElementById(this.pdfViewer.element.id+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+y+"_"+b);S||((S=new Image).id=this.pdfViewer.element.id+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+y+"_"+b,l&&l.append(S)),S.src=p,S.setAttribute("alt",""),S.onload=function(){if(n.showPageLoadingIndicator(t,!1),n.tileRenderCount=n.tileRenderCount+1,0===y&&0===b&&0===t&&i.isDocumentLoaded){n.renderPDFInformations(),n.isInitialLoaded=!0;var W=window.sessionStorage.getItem(n.documentId+"_pagedata");n.pageCount<=100&&n.pdfViewer.fireDocumentLoad(W),n.isDocumentLoaded=!1,n.pdfViewer.textSearch&&n.pdfViewer.isExtractText&&n.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(n.tileRenderCount===n.tileRequestCount){n.isTextMarkupAnnotationModule()&&n.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t),a&&(a.style.display="none",a.src="#");for(var j=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+'_oldCanvas"]'),G=0;G<j.length;G++)l.removeChild(j[parseInt(G.toString(),10)]);n.isTileImageRendered=!1,n.tileRenderCount=0,n.pdfViewer.magnificationModule&&n.pdfViewer.magnificationModule.rerenderCountIncrement(),n.isDrawnCompletely=!0}S.setAttribute("alt","Page "+(t+1))};var I=m*this.getZoomFactor()/u/w,x=g.Elements?g.Elements:g.Values,T=x[5]*this.getZoomFactor()/u/w,L=x[4]*this.getZoomFactor()/u/w;S.width=I,S.style.width=I+"px",S.style.top=T+"px",S.style.left=L+"px",S.style.position="absolute"}0===h&&0===d&&this.onPageRender(e,t,l)}else{for(var N=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+"_tileimg_"+t+'_"]'),O=function(W){var j=N[parseInt(W.toString(),10)].id.split("_"),G=n.retrieveCurrentZoomFactor(),Y=JSON.parse(n.getWindowSessionStorageTile(t,parseFloat(j[j.length-2]),parseFloat(j[j.length-1]),G));if(Y&&Y.zoomFactor&&(G=Y.zoomFactor),parseFloat(j[j.length-4])===t){var U=N[parseInt(W.toString(),10)];U.nodeType==Node.ELEMENT_NODE&&(U.onload=function(){if(n.showPageLoadingIndicator(t,!1),n.tileRenderCount=n.tileRenderCount+1,0===B&&0===q&&0===t&&i.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var J=window.sessionStorage.getItem(n.documentId+"_pagedata");n.pageCount<=100&&n.pdfViewer.fireDocumentLoad(J),n.isDocumentLoaded=!1,n.pdfViewer.textSearch&&n.pdfViewer.isExtractText&&n.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(n.tileRenderCount===n.tileRequestCount){a.style.display="none",a.src="#",n.isTextMarkupAnnotationModule()&&n.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t);for(var $=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+'_oldCanvas"]'),ye=0;ye<$.length;ye++)l.removeChild($[parseInt(ye.toString(),10)]);n.isTileImageRendered=!1,n.tileRenderCount=0,n.pdfViewer.magnificationModule&&n.pdfViewer.magnificationModule.rerenderCountIncrement(),n.isDrawnCompletely=!0}U.setAttribute("alt","Page "+(t+1))},Y&&(U.src=Y.image))}},_=0;_<N.length;_++)O(_);var B=e.tileX?e.tileX:0,q=e.tileY?e.tileY:0;0===B&&0===q&&this.onPageRender(e,t,l)}}},s.prototype.renderTileCanvas=function(e,t,i,n,r,o){var a=this.getElement("_pageTileCanvas_"+i);return a||((a=F("canvas",{id:this.pdfViewer.element.id+"_pageTileCanvas_"+i,className:"e-pv-pageTile-canvas"})).style.width=e+"px",a.style.height=t+"px",a.style.display="none",a.style.backgroundColor="#fff",this.isMixedSizeDocument&&this.highestWidth>0&&(a.style.marginLeft="auto",a.style.marginRight="auto"),n.appendChild(a)),a},s.prototype.calculateImageWidth=function(e,t,i,n){var r=e/this.getZoomFactor()*t*i;return parseInt(n.toString())===parseInt(r.toString())&&(n=r),n*this.getZoomFactor()/t},s.prototype.renderPage=function(e,t,i){var n=this,r=this;if(e&&this.pageSize[parseInt(t.toString(),10)]){var o=this.getPageWidth(t),a=this.getPageHeight(t),l=this.getElement("_pageCanvas_"+t),h=this.getElement("_pageDiv_"+t);if(h&&(h.style.width=o+"px",h.style.height=a+"px",h.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?h.style.right=this.updateLeftPosition(t)+"px":h.style.left=this.updateLeftPosition(t)+"px"),l){l.style.background="#fff",l.style.display="block",l.style.width=o+"px",l.style.height=a+"px",o<parseFloat(h.style.width)&&(h.style.boxShadow="none");var d=this.renderThumbnailImages?i:e.image;d&&(l.onload=function(){for(var p=document.querySelectorAll('img[id*="'+r.pdfViewer.element.id+"_tileimg_"+t+'_"]'),u=r.getElement("_pageDiv_"+t),f=0;f<p.length;f++){var g=p[parseInt(f.toString(),10)].id.split("_");parseFloat(g[g.length-3])!=r.getZoomFactor()&&u.removeChild(p[parseInt(f.toString(),10)])}var m=document.querySelectorAll('img[id*="'+r.pdfViewer.element.id+'_oldCanvas"]');for(f=0;f<m.length;f++)h.removeChild(m[parseInt(f.toString(),10)]);if(n.pdfViewer.magnificationModule&&n.pdfViewer.magnificationModule.rerenderCountIncrement(),n.showPageLoadingIndicator(t,!1),0===t&&n.isDocumentLoaded){n.renderPDFInformations(),n.isInitialLoaded=!0;var y=window.sessionStorage.getItem(n.documentId+"_pagedata");n.pageCount<=100&&n.pdfViewer.fireDocumentLoad(y),n.isDocumentLoaded=!1,n.pdfViewer.textSearch&&n.pdfViewer.isExtractText&&n.pdfViewer.textSearchModule.getPDFDocumentTexts()}n.pdfViewer.magnificationModule&&n.pdfViewer.magnificationModule.pushImageObjects(l),l.setAttribute("alt","Page "+(t+1))},l.src=d),this.onPageRender(e,t,h)}}},s.prototype.onPageRender=function(e,t,i){var n=i&&i.getElementsByTagName("a"),r=!1;if(n&&0!==n.length)for(var o=n.length-1;o>=0;o--)n[parseInt(o.toString(),10)].parentNode.removeChild(n[parseInt(o.toString(),10)]);if((this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.renderTextContent(e,t),this.pdfViewer.formFieldsModule&&!(this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isFormFieldPageZoomed)&&this.pdfViewer.formFieldsModule.renderFormFields(t,!1),this.pdfViewer.accessibilityTagsModule&&this.pdfViewer.enableAccessibilityTags&&this.isTaggedPdf&&(this.accessibilityTagsCollection[t.toString()]?this.renderAccessibilityTags(t,this.accessibilityTagsCollection[t.toString()]):-1===this.pageRequestListForAccessibilityTags.indexOf(t)&&this.createRequestForAccessibilityTags(t)),this.pdfViewer.formDesignerModule&&!this.isDocumentLoaded&&this.pdfViewer.formDesignerModule.rerenderFormFields(t),this.pdfViewer.formFieldsModule&&!this.isDocumentLoaded&&!this.pdfViewer.formDesignerModule&&this.pdfViewer.formFieldsModule.renderFormFields(t,!1),this.pdfViewer.formDesignerModule&&this.isDocumentLoaded&&(!this.pdfViewer.magnificationModule||this.pdfViewer.magnificationModule.isFormFieldPageZoomed)&&(this.pdfViewer.formFieldsModule.renderFormFields(t,!1),this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isFormFieldPageZoomed=!1)),this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(e,t),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(t),this.documentAnnotationCollections){for(var a=!1,l=0;l<this.annotationRenderredList.length;l++)this.annotationRenderredList[parseInt(l.toString(),10)]===t&&(a=!0);(h=this.documentAnnotationCollections[t])&&!a&&(e.shapeAnnotation=h.shapeAnnotation,e.measureShapeAnnotation=h.measureShapeAnnotation,e.textMarkupAnnotation=h.textMarkupAnnotation,e.freeTextAnnotation=h.freeTextAnnotation,e.stampAnnotations=h.stampAnnotations,e.stickyNotesAnnotation=h.stickyNotesAnnotation,e.signatureAnnotation=h.signatureAnnotation,e.signatureInkAnnotation=h.signatureInkAnnotation,this.annotationRenderredList.push(t))}if(this.isImportAction){var h=this.checkDocumentCollectionData(t);this.drawPageAnnotations(this.importedAnnotation[parseInt(t.toString(),10)],t),h&&(e.shapeAnnotation=h.shapeAnnotation,e.measureShapeAnnotation=h.measureShapeAnnotation,e.textMarkupAnnotation=h.textMarkupAnnotation,e.freeTextAnnotation=h.freeTextAnnotation,e.stampAnnotations=h.stampAnnotations,e.stickyNotesAnnotation=h.stickyNotesAnnotation,e.signatureInkAnnotation=h.signatureInkAnnotation,r=!0)}if(!this.isImportAction){if(this.pdfViewer.annotationModule&&(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())){if(this.isStampAnnotationModule()){var d=e.stampAnnotations;r?this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(d,t,null,!0):this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(d,t)}r?this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation,null,!0):this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)}this.isFreeTextAnnotationModule()&&e.freeTextAnnotation&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t),this.isInkAnnotationModule()&&e&&e.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,r)}if(this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&this.pdfViewer.formDesignerModule.updateCanvas(t),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(t),this.isShapeBasedAnnotationsEnabled()){var p=this.getElement("_annotationCanvas_"+t);p&&(WK(p.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",p,t,this.pdfViewer),this.pdfViewer.renderSelector(t,this.pdfViewer.annotationSelectorSettings))}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(t),e&&e.signatureAnnotation&&this.signatureModule&&this.signatureModule.renderExistingSignature(e.signatureAnnotation,t,!1),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.annotationPageIndex===t&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind(),this.isLoadedFormFieldAdded=!1},s.prototype.renderAnnotations=function(e,t,i){var n={};if(this.documentAnnotationCollections){for(var r=!1,o=0;o<this.annotationRenderredList.length;o++)this.annotationRenderredList[parseInt(o.toString(),10)]===e&&(r=!0);var a=this.documentAnnotationCollections[e];a&&!r&&(n.shapeAnnotation=a.shapeAnnotation,n.measureShapeAnnotation=a.measureShapeAnnotation,n.textMarkupAnnotation=a.textMarkupAnnotation,n.freeTextAnnotation=a.freeTextAnnotation,n.stampAnnotations=a.stampAnnotations,n.stickyNotesAnnotation=a.stickyNotesAnnotation,n.signatureAnnotation=a.signatureAnnotation,n.signatureInkAnnotation=a.signatureInkAnnotation,this.annotationRenderredList.push(e))}if(this.isAnnotationCollectionRemoved&&(n.shapeAnnotation=[],n.measureShapeAnnotation=[],n.textMarkupAnnotation=[],n.freeTextAnnotation=[],n.stampAnnotations=[],n.stickyNotesAnnotation=[],n.signatureInkAnnotation=[]),this.isImportAction){for(r=!1,o=0;o<this.annotationPageList.length;o++)this.annotationPageList[parseInt(o.toString(),10)]===e&&(r=!0);r||this.importedAnnotation&&(this.drawPageAnnotations(this.importedAnnotation,e,!0),this.annotationPageList[this.annotationPageList.length]=e)}for(var l=[],h=t.annotationOrder,d=0;d<h.length;d++){var p=h[parseInt(d.toString(),10)].AnnotType?h[parseInt(d.toString(),10)].AnnotType:h[parseInt(d.toString(),10)].AnnotationType;switch(l.push(h[parseInt(d.toString(),10)]),p){case"textMarkup":this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(l,e,null,!0);break;case"shape_measure":this.pdfViewer.annotationModule.renderAnnotations(e,null,l,null,null,null,!0);break;case"shape":this.pdfViewer.annotationModule.renderAnnotations(e,l,null,null,null,null,!0);break;case"sticky":this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(l,e);break;case"stamp":this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(l,e,null,null,!0);break;case"Ink":this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(l,e,!1,!0);break;case"Text Box":this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(l,e,void 0,!0)}l=[]}n&&n.signatureAnnotation&&this.signatureModule.renderExistingSignature(n.signatureAnnotation,e,!1),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind()},s.prototype.renderTextContent=function(e,t){var i=e.textContent,n=e.textBounds,r=e.rotation,o=this.checkIsRtlText(e.documentTextCollection?e.documentTextCollection[0][parseInt(t.toString(),10)].PageText:e.pageText),a=this.getElement("_textLayer_"+t);a||(a=this.textLayer.addTextLayer(t,this.getPageWidth(t),this.getPageHeight(t),this.getElement("_pageDiv_"+t))),a&&i&&n&&(a.style.display="block",0===a.childNodes.length?this.textLayer.renderTextContents(t,i,n,r,o):this.textLayer.resizeTextContents(t,i,n,r,!0))},s.prototype.renderAccessibilityTags=function(e,t){this.accessibilityTags.renderAccessibilityTags(e,t)},s.prototype.returnPageListForAccessibilityTags=function(e){var t=[];if(!this.enableAccessibilityMultiPageRequest)return[e];for(var n=e+4<this.pageCount-1?e+4:this.pageCount-1,r=e-2>0?e-2:0;r<=n;r++)void 0===this.accessibilityTagsCollection[parseInt(r.toString(),10)]?t.push(parseInt(r.toString(),10)):n=n+1<this.pageCount-1?n+1:this.pageCount-1;return this.pageRequestListForAccessibilityTags=t,t},s.prototype.createRequestForAccessibilityTags=function(e){var t,i=this;t={action:"RenderTaggedContent",elementId:this.pdfViewer.element.id,hashId:this.hashId,uniqueId:this.documentId,pageList:JSON.stringify(this.returnPageListForAccessibilityTags(e))},this.jsonDocumentId&&(t.document=this.jsonDocumentId);var n=this.pdfViewer.serviceUrl+"/RenderTaggedContent";this.accessibilityTagsHandler=new hs(this.pdfViewer),this.accessibilityTagsHandler.url=n,this.accessibilityTagsHandler.mode=!0,this.accessibilityTagsHandler.responseType="text",this.accessibilityTagsHandler.send(t),this.accessibilityTagsHandler.onSuccess=function(r){for(var a,o=JSON.parse(r.data),l=0;l<o.length;l++)a=o[parseInt(l.toString(),10)],i.accessibilityTagsCollection[a[0]]=a[1];i.pageRequestListForAccessibilityTags=[],i.accessibilityTagsCollection[parseInt(e.toString(),10)]&&i.renderAccessibilityTags(e,i.accessibilityTagsCollection[parseInt(e.toString(),10)]),i.accessibilityTagsCollection[e-1<=0?parseInt((e-1).toString(),10):0]&&i.renderAccessibilityTags(e-1<=0?e-1:0,i.accessibilityTagsCollection[e-1<=0?parseInt((e-1).toString(),10):0])}},s.prototype.renderPageContainer=function(e,t,i,n){var r=F("div",{id:this.pdfViewer.element.id+"_pageDiv_"+e,className:"e-pv-page-div",attrs:{tabindex:"-1"}});r.style.width=t+"px",r.style.height=i+"px",this.pdfViewer.enableRtl?r.style.right=this.updateLeftPosition(e)+"px":r.style.left=this.updateLeftPosition(e)+"px",r.style.top=n+"px",this.pageContainer.appendChild(r),this.pageContainer.style.width=this.isMixedSizeDocument&&this.highestWidth*this.getZoomFactor()>this.viewerContainer.clientWidth?this.highestWidth*this.getZoomFactor()+"px":this.viewerContainer.clientWidth+"px",this.createWaitingPopup(e),this.orderPageDivElements(r,e),this.renderPageCanvas(r,t,i,e,"block"),E.isDevice&&!this.pdfViewer.enableDesktopMode&&!this.isThumb&&this.updateMobileScrollerPosition()},s.prototype.renderPDFInformations=function(){this.pdfViewer.thumbnailViewModule&&(!E.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.thumbnailViewModule.createRequestForThumbnails(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.createRequestForBookmarks(),this.pdfViewer.annotationModule&&(this.pdfViewer.toolbarModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer(),this.pdfViewer.isCommandPanelOpen&&this.pdfViewer.annotation.showCommentsPanel(),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments())},s.prototype.orderPageDivElements=function(e,t){var i=this.getElement("_pageDiv_"+(t+1));i?this.pageContainer.insertBefore(e,i):this.pageContainer.appendChild(e)},s.prototype.renderPageCanvas=function(e,t,i,n,r){if(e){var o=this.getElement("_pageCanvas_"+n);return o?(o.width=t,o.height=i,o.style.display="block",this.isMixedSizeDocument&&this.highestWidth>0&&(o.style.marginLeft="auto",o.style.marginRight="auto")):((o=F("img",{id:this.pdfViewer.element.id+"_pageCanvas_"+n,className:"e-pv-page-canvas"})).width=t,o.height=i,o.style.display=r,this.isMixedSizeDocument&&this.highestWidth>0&&(o.style.marginLeft="auto",o.style.marginRight="auto"),e.appendChild(o)),o.setAttribute("alt",""),this.pdfViewer.annotationModule&&this.pdfViewer.annotation&&this.pdfViewer.annotationModule.createAnnotationLayer(e,t,i,n,r),(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.textLayer.addTextLayer(n,t,i,e),this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&this.pdfViewer.formDesignerModule.createAnnotationLayer(e,t,i,n,r),o}},s.prototype.applyElementStyles=function(e,t){if(this.isMixedSizeDocument&&e){var i=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+t),n=document.getElementById(this.pdfViewer.element.id+"_oldCanvas_"+t);e&&i&&i.offsetLeft>0?(e.style.marginLeft=i.offsetLeft+"px",e.style.marginRight=i.offsetLeft+"px"):n&&n.offsetLeft>0?(e.style.marginLeft=n.offsetLeft+"px",e.style.marginRight=n.offsetLeft+"px"):(e.style.marginLeft="auto",e.style.marginRight="auto")}},s.prototype.updateLeftPosition=function(e){var t,i=this.viewerContainer.getBoundingClientRect().width;if(0===i&&(i=parseFloat(this.pdfViewer.width.toString())),this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(i-this.highestWidth*this.getZoomFactor())/2;var n=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=n:t=n,this.pageContainer.style.width=this.highestWidth*this.getZoomFactor()>this.viewerContainer.clientWidth?this.highestWidth*this.getZoomFactor()+"px":this.viewerContainer.clientWidth+"px"}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.getPageWidth(e))/2:(i-this.getPageWidth(e))/2;if(parseInt(e.toString(),10),parseInt(e.toString(),10),t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var r=t;(t=t>0&&E.isDevice&&!this.pdfViewer.enableDesktopMode?r:this.pageLeft)>0&&this.isMixedSizeDocument&&r>0&&(t=r)}return t},s.prototype.applyLeftPosition=function(e){var t;if(this.pageSize[parseInt(e.toString(),10)]){if(this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.highestWidth*this.getZoomFactor())/2;var i=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=i:t=i}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.pageSize[parseInt(e.toString(),10)].width*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.pageSize[parseInt(e.toString(),10)].width*this.getZoomFactor())/2;if(parseInt(e.toString(),10),parseInt(e.toString(),10),t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var n=t;t=this.pageLeft,n>0&&this.isMixedSizeDocument&&(t=n)}var r=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);r&&(this.pdfViewer.enableRtl?r.style.right=t+"px":r.style.left=t+"px")}},s.prototype.updatePageHeight=function(e,t){return(e-t)/e*100+"%"},s.prototype.getPageNumberFromClientPoint=function(e){for(var t=e.x+this.viewerContainer.scrollLeft,i=e.y+this.viewerContainer.scrollTop,n=0;n<this.pageCount;n++){var r=this.pageSize[parseInt(n.toString(),10)].height+this.viewerContainer.scrollTop;if(i<this.pageSize[parseInt(n.toString(),10)].top+r){var l,o=this.getElement("_pageViewContainer").getBoundingClientRect(),a=(o.width-this.pageSize[parseInt(n.toString(),10)].width)/2+o.x;if((l=i>this.pageSize[parseInt(n.toString(),10)].top?i-this.pageSize[parseInt(n.toString(),10)].top:this.pageSize[parseInt(n.toString(),10)].top-i)>0&&null!=this.pageSize[parseInt(n.toString(),10)]){if(this.getPageHeight(n),a>=0&&(t<a||t>a+this.pageSize[parseInt(n.toString(),10)].width))return-1;if(l<=this.getPageTop(n)+r)return n+1}}}return-1},s.prototype.convertClientPointToPagePoint=function(e,t){if(-1!==t){var i=this.getElement("_pageViewContainer").getBoundingClientRect();return{x:e.x+this.viewerContainer.scrollLeft-((i.width-this.pageSize[t-1].width)/2+i.x),y:e.y+this.viewerContainer.scrollTop-this.pageSize[t-1].top}}return null},s.prototype.convertPagePointToClientPoint=function(e,t){if(-1!==t){var i=this.getElement("_pageViewContainer").getBoundingClientRect();return{x:e.x+((i.width-this.pageSize[t-1].width)/2+i.x),y:e.y+this.pageSize[t-1].top}}return null},s.prototype.convertPagePointToScrollingPoint=function(e,t){return-1!==t?{x:e.x+this.viewerContainer.scrollLeft,y:e.y+this.viewerContainer.scrollTop}:null},s.prototype.initiatePageViewScrollChanged=function(){this.scrollHoldTimer&&clearTimeout(this.scrollHoldTimer),this.scrollHoldTimer=null,this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&(this.scrollPosition=this.viewerContainer.scrollTop,this.pageViewScrollChanged(this.currentPageNumber))},s.prototype.renderCountIncrement=function(){this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.renderCountIncrement()},s.prototype.pageViewScrollChanged=function(e){this.isPanMode?-1===this.renderedPagesList.indexOf(e-1)&&(this.reRenderedCount=0):this.reRenderedCount=0;var t=e-1;if(e!==this.previousPage&&e<=this.pageCount){var i=!1;this.isDataExits&&!this.getStoredData(t)&&(i=!0),-1===this.renderedPagesList.indexOf(t)&&!this.getMagnified()&&!i&&(this.renderCountIncrement(),this.createRequestForRender(t))}if(!this.getMagnified()&&!this.getPagesPinchZoomed()){var n=t-1,r=(i=!1,this.getElement("_pageCanvas_"+n));this.isDataExits&&!this.getStoredData(n)&&(i=!0),null!==r&&!i&&-1===this.renderedPagesList.indexOf(n)&&!this.getMagnified()&&(this.renderCountIncrement(),this.createRequestForRender(n)),this.isMinimumZoom&&this.renderPreviousPagesInScroll(n);var o=t+1,a=0;if(o<this.pageCount&&(a=this.getPageHeight(o),(this.isMinimumZoom?this.isMinimumZoom:-1===this.renderedPagesList.indexOf(o))&&!this.getMagnified()&&a))if(this.isDocumentLoaded&&this.pdfViewer.initialRenderPages>this.pageRenderCount&&this.getPageHeight(this.pdfViewer.initialRenderPages-1)+this.getPageTop(this.pdfViewer.initialRenderPages-1)>this.viewerContainer.clientHeight)for(var h=this.pdfViewer.initialRenderPages<=this.pageCount?this.pdfViewer.initialRenderPages:this.pageCount,d=1;d<h;d++)this.createRequestForRender(d);else for(this.createRequestForRender(o),this.renderCountIncrement();this.viewerContainer.clientHeight>a&&(o+=1)<this.pageCount;)this.renderPageElement(o),this.createRequestForRender(o),a+=this.getPageHeight(o),this.renderCountIncrement()}},s.prototype.renderPreviousPagesInScroll=function(e){var t=e-1,i=t-1;t>0&&(-1===this.renderedPagesList.indexOf(t)&&!this.getMagnified()&&(this.createRequestForRender(t),this.renderCountIncrement()),i>0&&-1===this.renderedPagesList.indexOf(i)&&!this.getMagnified()&&(this.createRequestForRender(i),this.renderCountIncrement()))},s.prototype.downloadDocument=function(e){e=(URL||webkitURL).createObjectURL(e);var i=F("a");if(i.click)i.href=e,i.target="_parent","download"in i&&(i.download=this.downloadFileName),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var n=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,n+"$&")}window.open(e,"_parent")}},s.prototype.downloadExportFormat=function(e,t,i,n){var r="Json"===t||"Json"===i,o=r?".json":"Fdf"===i?".fdf":"Xml"===i?".xml":"Xfdf"===t||"Xfdf"===i?".xfdf":null;if(!c(o)){e=(URL||webkitURL).createObjectURL(e);var l=F("a");if(l.click)l.href=e,l.target="_parent","download"in l&&(l.download=null!==this.pdfViewer.exportAnnotationFileName?this.pdfViewer.exportAnnotationFileName.split(".")[0]+o:this.pdfViewer.fileName.split(".")[0]+o),(document.body||document.documentElement).appendChild(l),l.click(),l.parentNode.removeChild(l),n?this.pdfViewer.fireFormExportSuccess(e,l.download):this.pdfViewer.fireExportSuccess(e,l.download);else if(r){if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var h=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,h+"$&")}window.open(e,"_parent"),n?this.pdfViewer.fireFormExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+o):this.pdfViewer.fireExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+o)}}},s.prototype.exportFormFields=function(e,t){this.createRequestForExportFormfields(!1,t,e)},s.prototype.importFormFields=function(e,t){this.createRequestForImportingFormfields(e,t)},s.prototype.createRequestForExportFormfields=function(e,t,i){var r,n=this;r=this;var o=new Promise(function(a,l){var h=r.createFormfieldsJsonData();("Json"===t||"Fdf"===t||"Xfdf"===t||"Xml"===t)&&(h.formFieldDataFormat=t,r.pdfViewer.fireFormExportStarted(h)),h.action="ExportFormFields",h.hashId=r.hashId,h.fileName=r.pdfViewer.fileName,i&&""!==i&&!e&&(h.filePath=i),h.elementId=n.pdfViewer.element.id,r.jsonDocumentId&&(h.document=r.jsonDocumentId);var d=n.getFormFieldsPageList(h.formDesigner);h.formFieldsPageList=JSON.stringify(d),h.isFormFieldAnnotationsExist=n.isAnnotationsExist(h.formDesigner)||n.isFieldsDataExist(h.fieldsData)||d.length>0;var p=r.pdfViewer.serviceUrl+"/"+r.pdfViewer.serverActionSettings.exportFormFields;r.exportFormFieldsRequestHandler=new hs(n.pdfViewer),r.exportFormFieldsRequestHandler.url=p,r.exportFormFieldsRequestHandler.mode=!0,r.exportFormFieldsRequestHandler.responseType="text",r.exportFormFieldsRequestHandler.send(h),r.exportFormFieldsRequestHandler.onSuccess=function(u){var f=u.data;if(!r.checkRedirection(f)&&f&&f)if(r.pdfViewer.fireAjaxRequestSuccess(r.pdfViewer.serverActionSettings.exportFormFields,f),e){var m=decodeURIComponent(escape(atob(f.split(",")[1])));a(m),r.pdfViewer.fireFormExportSuccess(m,r.pdfViewer.fileName)}else if(f.split("base64,")[1]){var y=r.createBlobUrl(f.split("base64,")[1],"application/json");E.isIE||"edge"===E.info.name?window.navigator.msSaveOrOpenBlob(y,r.pdfViewer.fileName.split(".")[0]+".json"):("Json"===h.formFieldDataFormat||"Fdf"===h.formFieldDataFormat||"Xfdf"===h.formFieldDataFormat||"Xml"===h.formFieldDataFormat)&&r.downloadExportFormat(y,null,t,!0)}},r.exportFormFieldsRequestHandler.onFailure=function(u){r.pdfViewer.fireFormExportFailed(h.pdfAnnotation,u.statusText)},r.exportFormFieldsRequestHandler.onError=function(u){r.pdfViewer.fireFormExportFailed(h.pdfAnnotation,u.statusText)}});return!e||o},s.prototype.getLastIndexValue=function(e,t){return e.slice(e.lastIndexOf(t)+1)},s.prototype.createRequestForImportingFormfields=function(e,t){var i;i=this;var r={},o=this.getLastIndexValue(e,".");"object"==typeof e||"json"!==o&&"fdf"!==o&&"xfdf"!==o&&"xml"!==o?(r.formFieldDataFormat=t,r.data="Json"===t?JSON.stringify(e):e):(r.data=e,r.fileName=i.pdfViewer.fileName,r.formFieldDataFormat=t),i.pdfViewer.fireFormImportStarted(e),r.hashId=i.hashId,r.elementId=this.pdfViewer.element.id,i.jsonDocumentId&&(r.document=i.jsonDocumentId),(r=Object.assign(r,this.constructJsonDownload())).action="ImportFormFields";var a=i.pdfViewer.serviceUrl+"/"+i.pdfViewer.serverActionSettings.importFormFields;i.importFormFieldsRequestHandler=new hs(this.pdfViewer),i.importFormFieldsRequestHandler.url=a,i.importFormFieldsRequestHandler.mode=!0,i.importFormFieldsRequestHandler.responseType="text",i.importFormFieldsRequestHandler.send(r),i.importFormFieldsRequestHandler.onSuccess=function(l){var h=l.data;if(!i.checkRedirection(h))if(h&&"null"!==h){if("object"!=typeof h)try{"object"!=typeof(h=JSON.parse(h))&&(i.onControlError(500,h,i.pdfViewer.serverActionSettings.importFormFields),i.pdfViewer.fireFormImportFailed(e,l.statusText),h=null)}catch{i.pdfViewer.fireFormImportFailed(e,i.pdfViewer.localeObj.getConstant("File not found")),X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then(function(g){i.openImportExportNotificationPopup(g)}):i.openImportExportNotificationPopup(i.pdfViewer.localeObj.getConstant("File not found")),i.onControlError(500,h,i.pdfViewer.serverActionSettings.importFormFields),h=null}i.pdfViewer.fireAjaxRequestSuccess(i.pdfViewer.serverActionSettings.importFormFields,h),i.pdfViewer.fireFormImportSuccess(e),window.sessionStorage.removeItem(this.documentId+"_formfields"),this.pdfViewer.formFieldsModule.removeExistingFormFields(),window.sessionStorage.removeItem(this.documentId+"_formDesigner"),i.saveFormfieldsData(h);for(var u=0;u<i.renderedPagesList.length;u++)this.pdfViewer.formFieldsModule.renderFormFields(i.renderedPagesList[parseInt(u.toString(),10)],!0)}else i.pdfViewer.fireFormImportFailed(e,l.statusText),X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then(function(g){i.openImportExportNotificationPopup(g)}):i.openImportExportNotificationPopup(i.pdfViewer.localeObj.getConstant("File not found"))},i.importFormFieldsRequestHandler.onFailure=function(l){i.pdfViewer.fireFormImportFailed(e,l.statusText)},i.importFormFieldsRequestHandler.onError=function(l){i.pdfViewer.fireFormImportFailed(e,l.statusText)}},s.prototype.createFormfieldsJsonData=function(){var e={};if(this.pdfViewer.formDesignerModule){var t=this.pdfViewer.formDesignerModule.downloadFormDesigner();e.formDesigner=t}else this.pdfViewer.formFieldsModule&&(t=this.pdfViewer.formFieldsModule.downloadFormFieldsData(),e.fieldsData=t);return e},s.prototype.constructJsonDownload=function(){var e={hashId:this.hashId};if(this.jsonDocumentId&&(e.documentId=this.jsonDocumentId),e.uniqueId=this.documentId,this.importPageList=[],this.pdfViewer.annotationModule&&this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()){this.isJsonExported=!1;var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();e.textMarkupAnnotations=t}if(this.isShapeAnnotationModule()){this.isJsonExported=!1;var i=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();e.shapeAnnotations=i}if(this.isCalibrateAnnotationModule()){this.isJsonExported=!1;var n=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();e.measureShapeAnnotations=n}if(this.isStampAnnotationModule()){var r=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();e.stampAnnotations=r}if(this.isCommentAnnotationModule()){var o=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();e.stickyNotesAnnotation=o}if(this.isImportAction){var a=JSON.stringify(this.importPageList);e.importPageList=a}if(this.pdfViewer.formDesignerModule){var l=this.pdfViewer.formDesignerModule.downloadFormDesigner();e.formDesigner=l}else this.pdfViewer.formFieldsModule&&(l=this.pdfViewer.formFieldsModule.downloadFormFieldsData(),e.fieldsData=l);var h=this.signatureModule.saveSignature();if(e.signatureData=h,this.pdfViewer.isSignatureEditable&&(e.isSignatureEdited=this.pdfViewer.isSignatureEditable),this.isFreeTextAnnotationModule()){var d=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();e.freeTextAnnotation=d}if(this.isInkAnnotationModule()){var p=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();e.inkSignatureData=p}if(e.action="Download",e.elementId=this.pdfViewer.element.id,this.pdfViewer.annotationModule){var u=this.getAnnotationsPageList();e.isAnnotationsExist=this.isAnnotationsExist(e.textMarkupAnnotations)||this.isAnnotationsExist(e.shapeAnnotations)||this.isAnnotationsExist(e.measureShapeAnnotations)||this.isAnnotationsExist(e.stampAnnotations)||this.isAnnotationsExist(e.stickyNotesAnnotation)||this.isAnnotationsExist(e.signatureData)||this.isAnnotationsExist(e.freeTextAnnotation)||this.isAnnotationsExist(e.inkSignatureData)||u.length>0,e.annotationsPageList=JSON.stringify(u)}if(this.pdfViewer.formDesignerModule||this.pdfViewer.formFieldsModule){var f=this.getFormFieldsPageList(e.formDesigner);e.isFormFieldAnnotationsExist=this.isAnnotationsExist(e.formDesigner)||this.isFieldsDataExist(e.fieldsData)||f.length>0,e.formFieldsPageList=JSON.stringify(f)}return this.pdfViewer.annotationCollection&&(e.annotationCollection=JSON.stringify(this.pdfViewer.annotationCollection)),e},s.prototype.isAnnotationsExist=function(e){return!c(e)&&JSON.parse(e).flat(1).length>0},s.prototype.isFieldsDataExist=function(e){return!c(e)&&0!==Object.entries(JSON.parse(e)).length},s.prototype.getAnnotationsPageList=function(){var e=this.pdfViewer.annotationCollection.map(function(n){return n.pageNumber}),t=this.pdfViewer.annotationModule.actionCollection.filter(function(n,r,o){return"formFields"!==n.annotation.propName&&null==n.annotation.formFieldAnnotationType}).map(function(n){return n.pageIndex});return e.concat(t).filter(function(n,r,o){return o.indexOf(n)===r&&void 0!==n})},s.prototype.getFormFieldsPageList=function(e){var r,t=this.pdfViewer.formFieldCollection.map(function(a){return c(a.properties)?a.pageNumber+1:a.properties.pageNumber}),i=c(this.pdfViewer.annotationModule)?[]:this.pdfViewer.annotationModule.actionCollection.filter(function(a,l,h){return"formFields"==a.annotation.propName||null!=a.annotation.formFieldAnnotationType}).map(function(a){return a.pageIndex}),n=t.concat(i);return c(e)||(r=JSON.parse(e).map(function(a){return a.FormField.pageNumber})),n.concat(r).filter(function(a,l,h){return h.indexOf(a)===l&&void 0!==a})},s.prototype.checkFormFieldCollection=function(e){var i,t=!1;if(i=this.getItemFromSessionStorage("_formDesigner"))for(var n=JSON.parse(i),r=0;r<n.length;r++)if("RadioButton"===n[parseInt(r.toString(),10)].FormField.formFieldAnnotationType){for(var o=0;o<n[parseInt(r.toString(),10)].FormField.radiobuttonItem.length;o++)if(e===n[parseInt(r.toString(),10)].FormField.radiobuttonItem[parseInt(o.toString(),10)].id.split("_")[0]){t=!0;break}}else if(n[parseInt(r.toString(),10)].Key.split("_")[0]===e){t=!0;break}return t},s.prototype.isFreeTextAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.freeTextAnnotationModule)},s.prototype.createRequestForDownload=function(){var e;(e=this).pdfViewer.fireDownloadStart(e.downloadFileName);var t=this.constructJsonDownload();e.digitalSignaturePages&&0!==e.digitalSignaturePages.length&&(t.digitalSignatureDocumentEdited=!!e.pdfViewer.isDocumentEdited),this.dowonloadRequestHandler=new hs(this.pdfViewer),this.dowonloadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.download,this.dowonloadRequestHandler.responseType="text",this.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(e.pdfViewer.serverActionSettings.download),this.validateForm=!1):this.dowonloadRequestHandler.send(t),this.dowonloadRequestHandler.onSuccess=function(i){var n=i.data;if(!e.checkRedirection(n))if(n){if("object"!=typeof n&&-1===n.indexOf("data:application/pdf")&&(e.onControlError(500,n,e.pdfViewer.serverActionSettings.download),n=null),"object"==typeof n&&(n=JSON.parse(n)),n){e.pdfViewer.downloadFileName&&e.pdfViewer.downloadFileName!==e.downloadFileName&&(e.downloadFileName=e.pdfViewer.downloadFileName),e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.download,n);var o=e.createBlobUrl(n.split("base64,")[1],"application/pdf");E.isIE||"edge"===E.info.name?window.navigator.msSaveOrOpenBlob(o,e.downloadFileName):e.downloadDocument(o),e.pdfViewer.fireDownloadEnd(e.downloadFileName,n)}e.updateDocumentAnnotationCollections()}else e.pdfViewer.fireDownloadEnd(e.downloadFileName,"PDF Document saved in server side successfully")},this.dowonloadRequestHandler.onFailure=function(i){e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,e.pdfViewer.serverActionSettings.download)},this.dowonloadRequestHandler.onError=function(i){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,e.pdfViewer.serverActionSettings.download)}},s.prototype.getTileCount=function(e){if(e&&"number"==typeof e){var i=1;i=this.getZoomFactor()>2&&e<=1200?2:e/816;var n=parseInt(i.toFixed());return n<=0?1:this.pdfViewer.tileRenderingSettings.enableTileRendering?n:1}return 1},s.prototype.createRequestForRender=function(e){var t,i=(t=this).getElement("_pageCanvas_"+e),n=t.getElement("_oldCanvas_"+e);if(this.pageSize&&this.pageSize[parseInt(e.toString(),10)]){var r=this.pageSize[parseInt(e.toString(),10)].width,l=(parseInt(e.toString(),10),this.getElement("_pageCanvas_"+e),1200),h=t.pdfViewer.element.clientHeight>0?t.pdfViewer.element.clientHeight:t.pdfViewer.element.style.height;l=parseInt(l),h=parseInt(h)?parseInt(h):500;var d=void 0,p=void 0,f=void 0,g=new Object;this.isMinimumZoom&&document.getElementById(this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+e)?(this.renderThumbnailImages=!0,f=document.getElementById(this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+e).children[0].src):this.renderThumbnailImages=!1;var m=this.getTileCount(r);if(i){(!isNaN(parseFloat(i.style.width))||n)&&t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1);var y=t.getStoredData(e);d=p=m;var b=t.pdfViewer.tileRenderingSettings;b.enableTileRendering&&b.x>0&&b.y>0&&(l<r||this.getZoomFactor()>2)&&(d=b.x,p=b.y),t.tileRequestCount=d*p;var w=this.retrieveCurrentZoomFactor(),S=void 0;if(1===m)y=t.getStoredData(e),S=t.pageRequestSent(e,0,0);else{var I=JSON.parse(t.getWindowSessionStorageTile(e,0,0,w));I&&(y=I)}if(y&&y.uniqueId===t.documentId&&(y.image||this.isMinimumZoom)){if(i.style.backgroundColor="#fff",t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!this.pageSize[parseInt(e.toString(),10)])return;var x=this.retrieveCurrentZoomFactor();if(l=x>2&&r<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(l=1200),l>=r||!t.pdfViewer.tileRenderingSettings.enableTileRendering)this.renderThumbnailImages?t.renderPage(y,e,f):t.renderPage(y,e);else if(t.isTileImageRendered=!0,t.tileRenderCount=0,this.renderThumbnailImages)t.renderPage(y,e,f);else{t.tileRenderPage(y,e);for(var T=0;T<d;T++)for(var L=0;L<p;L++)0===T&&0===L||(y=JSON.parse(this.getWindowSessionStorageTile(e,T,L,x)))&&t.tileRenderPage(y,e)}y=null}else if(null===y||!S){if(this.renderThumbnailImages||(this.getPagesPinchZoomed()?t.showPageLoadingIndicator(e,!1):t.showPageLoadingIndicator(e,!0),t.getPagesZoomed()&&t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1)),t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed)return;(!t.pdfViewer.tileRenderingSettings.enableTileRendering||this.renderThumbnailImages)&&(d=1,p=1),t.tileRenderCount=0,t.isTileImageRendered=!0;for(var N=0;N<d;N++)for(var O=0;O<p;O++){var _=null,B=this.retrieveCurrentZoomFactor();l=B>2&&r<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(l=1200),this.renderThumbnailImages?(t.renderPage(g,e,f),-1==this.textrequestLists.indexOf(e)&&(_={pageStartIndex:e,pageEndIndex:e+1,documentId:t.getDocumentId(),hashId:t.hashId,action:"RenderPdfTexts",elementId:t.pdfViewer.element.id,uniqueId:t.documentId},this.jsonDocumentId&&(_.documentId=this.jsonDocumentId),this.textRequestHandler=new hs(this.pdfViewer),this.textRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.textRequestHandler.responseType="json",this.textRequestHandler.send(_),this.textrequestLists.push(e),t.textRequestHandler.onSuccess=function(q){if(!(t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!t.pageSize[parseInt(e.toString(),10)])){var W=q.data;if(W&&"object"!=typeof W)try{W=JSON.parse(W)}catch{t.onControlError(500,W,t.pdfViewer.serverActionSettings.renderTexts),W=null}if(W){for(;"object"!=typeof W;)W=JSON.parse(W);W.documentTextCollection&&W.uniqueId===t.documentId&&(t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderTexts,W),t.storeWinData(W,void 0!==W.pageNumber?W.pageNumber:e),t.renderPage(W,e))}}},this.textRequestHandler.onFailure=function(q){t.pdfViewer.fireAjaxRequestFailed(q.status,q.statusText,t.pdfViewer.serverActionSettings.renderTexts)},this.textRequestHandler.onError=function(q){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(q.status,q.statusText,t.pdfViewer.serverActionSettings.renderTexts)})):(_={xCoordinate:N.toString(),yCoordinate:O.toString(),viewPortWidth:l.toString(),viewPortHeight:h.toString(),pageNumber:e.toString(),hashId:t.hashId,tilecount:m.toString(),tileXCount:d.toString(),tileYCount:p.toString(),zoomFactor:B.toString(),action:"RenderPdfPages",uniqueId:this.documentId,elementId:t.pdfViewer.element.id,digitalSignaturePresent:t.digitalSignaturePresent(e)},this.jsonDocumentId&&(_.documentId=this.jsonDocumentId),t.pageRequestHandler=new hs(this.pdfViewer),t.pageRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.renderPages,t.pageRequestHandler.responseType="json",t.pageRequestHandler.send(_),t.requestLists.push(t.documentId+"_"+e+"_"+N+"_"+O+"_"+B),t.pageRequestHandler.onSuccess=function(q){if(!(t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!t.pageSize[parseInt(e.toString(),10)])){var W=q.data;if(t.checkRedirection(W))t.showLoadingIndicator(!1);else{if(W&&"object"!=typeof W)try{W=JSON.parse(W)}catch{t.onControlError(500,W,t.pdfViewer.serverActionSettings.renderPages),W=null}if(W){for(;"object"!=typeof W;)W=JSON.parse(W);if(W.image&&W.uniqueId===t.documentId){var G=W.pageWidth&&W.pageWidth>0?W.pageWidth:r;t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderPages,W);var Y=void 0!==W.pageNumber?W.pageNumber:e;l>=G||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.storeWinData(W,Y):t.storeWinData(W,Y,W.tileX,W.tileY),l>=G||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.renderPage(W,Y):t.tileRenderPage(W,Y)}}}}},this.pageRequestHandler.onFailure=function(q){t.pdfViewer.fireAjaxRequestFailed(q.status,q.statusText,t.pdfViewer.serverActionSettings.renderPages)},this.pageRequestHandler.onError=function(q){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(q.status,q.statusText,t.pdfViewer.serverActionSettings.renderPages)})}}-1===this.renderedPagesList.indexOf(e)&&t.renderedPagesList.push(e)}}},s.prototype.requestForTextExtraction=function(e,t){var i,n=this;i={pageStartIndex:e,pageEndIndex:e+1,documentId:n.getDocumentId(),hashId:n.hashId,action:"RenderPdfTexts",elementId:n.pdfViewer.element.id,uniqueId:n.documentId},this.jsonDocumentId&&(i.documentId=this.jsonDocumentId),this.textRequestHandler=new hs(this.pdfViewer),this.textRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.textRequestHandler.responseType="json",this.textRequestHandler.send(i),this.textrequestLists.push(e),n.textRequestHandler.onSuccess=function(r){if(!(n.pdfViewer.magnification&&n.pdfViewer.magnification.isPinchZoomed||!n.pageSize[parseInt(e.toString(),10)])){var o=r.data;if(!n.checkRedirection(o)){if(o&&"object"!=typeof o)try{o=JSON.parse(o)}catch{n.onControlError(500,o,n.pdfViewer.serverActionSettings.renderTexts),o=null}if(o){for(;"object"!=typeof o;)o=JSON.parse(o);if(o.documentTextCollection&&o.uniqueId===n.documentId)if(n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.renderTexts,o),n.storeWinData(o,void 0!==o.pageNumber?o.pageNumber:e),c(t))n.renderPage(o,e);else{var h=t.bounds[0],d=o.documentTextCollection[0][parseInt(e.toString(),10)].PageText.split(""),u=n.textMarkUpContent(h,d,o.characterBounds);t.textMarkupContent=u,this.pdfViewer.annotationModule.storeAnnotations(e,t,"_annotations_textMarkup")}}}}},this.textRequestHandler.onFailure=function(r){n.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText,n.pdfViewer.serverActionSettings.renderTexts)},this.textRequestHandler.onError=function(r){n.openNotificationPopup(),n.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText,n.pdfViewer.serverActionSettings.renderTexts)}},s.prototype.textMarkUpContent=function(e,t,i){for(var n="",r=0;r<i.length;r++){var o=.5;i[parseInt(r.toString(),10)].Y>=e.Y-o&&i[parseInt(r.toString(),10)].X>=e.X-o&&i[parseInt(r.toString(),10)].Y<=e.Y+e.Height+o&&i[parseInt(r.toString(),10)].X<=e.X+e.Width+o&&(n+=t[parseInt(r.toString(),10)])}return n.replace(/(\r\n)/gm,"")},s.prototype.digitalSignaturePresent=function(e){var t=!1;return this.digitalSignaturePages&&0!==this.digitalSignaturePages.length&&-1!=this.digitalSignaturePages.indexOf(e)&&(t=!0),t},s.prototype.pageRequestSent=function(e,t,i){var n=this.retrieveCurrentZoomFactor();return!!(this.requestLists&&this.requestLists.indexOf(this.documentId+"_"+e+"_"+t+"_"+i+"_"+n)>-1)},s.prototype.onControlError=function(e,t,i){this.openNotificationPopup(),this.pdfViewer.fireAjaxRequestFailed(e,t,i)},s.prototype.getStoredData=function(e,t){var i=this.retrieveCurrentZoomFactor();this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering&&(i=1);var n=this.getWindowSessionStorage(e,i)?this.getWindowSessionStorage(e,i):this.getPinchZoomPage(e);if(!n&&t){var r=this.getWindowSessionStorageTile(e,0,0,i);r&&(n=r)}var o=null;return n&&(o=n,this.isPinchZoomStorage||(o=JSON.parse(n)),this.isPinchZoomStorage=!1),o},s.prototype.storeWinData=function(e,t,i,n){var r;if(e.image){var a=this.createBlobUrl(e.image.split("base64,")[1],"image/png"),h=(URL||webkitURL).createObjectURL(a);isNaN(i)&&isNaN(n)||0===i&&0===n?(r={image:h,transformationMatrix:e.transformationMatrix,hyperlinks:e.hyperlinks,hyperlinkBounds:e.hyperlinkBounds,linkAnnotation:e.linkAnnotation,linkPage:e.linkPage,annotationLocation:e.annotationLocation,textContent:e.textContent,width:e.width,textBounds:e.textBounds,pageText:e.pageText,rotation:e.rotation,scaleFactor:e.scaleFactor,uniqueId:e.uniqueId,zoomFactor:e.zoomFactor,tileX:i,tileY:n},this.pageSize[parseInt(t.toString(),10)]&&(this.pageSize[t].rotation=parseFloat(e.rotation)),this.textLayer.characterBound[t]=e.characterBounds):r={image:h,transformationMatrix:e.transformationMatrix,tileX:i,tileY:n,width:e.width,zoomFactor:e.zoomFactor}}else{var o=e.documentTextCollection[0][parseInt(t.toString(),10)];r={textContent:e.textContent,textBounds:e.textBounds,pageText:o.PageText,rotation:e.rotation,uniqueId:e.uniqueId},this.pageSize[parseInt(t.toString(),10)]&&(this.pageSize[t].rotation=parseFloat(e.rotation)),this.textLayer.characterBound[t]=e.characterBounds}this.pageSize[parseInt(t.toString(),10)]&&parseInt(t.toString(),10),this.manageSessionStorage(t,r,i,n)},s.prototype.setCustomAjaxHeaders=function(e){for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(t.toString(),10)].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(t.toString(),10)].headerValue)},s.prototype.getPinchZoomPage=function(e){for(var t in this.pinchZoomStorage)if(this.pinchZoomStorage.hasOwnProperty(t)&&this.pinchZoomStorage[t].index===e)return this.isPinchZoomStorage=!0,this.pinchZoomStorage[t].pinchZoomStorage;return null},s.prototype.getWindowSessionStorage=function(e,t){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t)},s.prototype.getWindowSessionStorageTile=function(e,t,i,n){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t+"_"+i+"_"+n)},s.prototype.retrieveCurrentZoomFactor=function(){var e=this.getZoomFactor();return this.pdfViewer.enableZoomOptimization?(e<=1?e=1:e>1&&e<=2?e=2:e>2&&e<=3?e=3:e>3&&e<=4&&(e=4),e):(e<=0&&(e=1),e)},s.prototype.manageSessionStorage=function(e,t,i,n){var r=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(r>=5e3){if(!this.isStorageExceed){for(var a=[],l=[],h=0;h<window.sessionStorage.length;h++)window.sessionStorage.key(h)&&window.sessionStorage.key(h).split("_")[3]&&("annotations"===window.sessionStorage.key(h).split("_")[3]?(this.annotationStorage[window.sessionStorage.key(h)]=window.sessionStorage.getItem(window.sessionStorage.key(h)),a.push(window.sessionStorage.key(h))):("formfields"===window.sessionStorage.key(h).split("_")[3]||"formDesigner"===window.sessionStorage.key(h).split("_")[3])&&(this.formFieldStorage[window.sessionStorage.key(h)]=window.sessionStorage.getItem(window.sessionStorage.key(h)),l.push(window.sessionStorage.key(h))));if(a)for(h=0;h<a.length;h++)window.sessionStorage.removeItem(a[parseInt(h.toString(),10)]);if(l)for(h=0;h<l.length;h++)window.sessionStorage.removeItem(l[parseInt(h.toString(),10)])}if(this.isStorageExceed=!0,(r=Math.round(JSON.stringify(window.sessionStorage).length/1024))>=5e3){var d=window.sessionStorage.length;for(d>200&&(d=200),h=0;h<d;h++)window.sessionStorage.key(h)&&window.sessionStorage.key(h).split("_")[3]&&"annotations"!==window.sessionStorage.key(h).split("_")[3]&&window.sessionStorage.removeItem(window.sessionStorage.key(h))}}var p=this.retrieveCurrentZoomFactor();isNaN(i)&&isNaN(n)?(window.sessionStorage.setItem(this.documentId+"_"+e+"_"+p,JSON.stringify(t)),this.sessionStorage.push(this.documentId+"_"+e+"_"+p)):(this.sessionStorage.push(this.documentId+"_"+e+"_"+i+"_"+n+"_"+p),window.sessionStorage.setItem(this.documentId+"_"+e+"_"+i+"_"+n+"_"+p,JSON.stringify(t)))},s.prototype.createBlobUrl=function(e,t){for(var n=atob(e),r=[],o=0;o<n.length;o+=512){for(var a=n.slice(o,o+512),l=new Array(a.length),h=0;h<a.length;h++)l[h]=a.charCodeAt(h);var d=new Uint8Array(l);r.push(d)}return new Blob(r,{type:t})},s.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return(16*Math.random()|0).toString(16)})},s.prototype.createGUID=function(){return"Sync_PdfViewer_"+this.getRandomNumber()},s.prototype.isClickedOnScrollBar=function(e,t){var i=!1;return t&&this.setScrollDownValue(e.type,!1),this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<e.clientX&&e.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<e.clientY&&e.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),i},s.prototype.setScrollDownValue=function(e,t){"mousedown"===e&&(this.isScrollbarMouseDown=t)},s.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=!0,this.viewerContainer.classList.remove("e-enable-text-selection"),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.viewerContainer.classList.add("e-disable-text-selection"),this.viewerContainer.addEventListener("selectstart",function(){return!1})},s.prototype.getElement=function(e){return document.getElementById(this.pdfViewer.element.id+e)},s.prototype.getPageWidth=function(e){return this.pageSize[parseInt(e.toString(),10)]?this.pageSize[parseInt(e.toString(),10)].width*this.getZoomFactor():0},s.prototype.getPageHeight=function(e){return this.pageSize[parseInt(e.toString(),10)]?this.pageSize[parseInt(e.toString(),10)].height*this.getZoomFactor():0},s.prototype.getPageTop=function(e){return this.pageSize[parseInt(e.toString(),10)]?this.pageSize[parseInt(e.toString(),10)].top*this.getZoomFactor():0},s.prototype.isAnnotationToolbarHidden=function(){return!this.pdfViewer.toolbarModule.annotationToolbarModule||this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden},s.prototype.isFormDesignerToolbarHidded=function(){var e=this.pdfViewer.toolbarModule.formDesignerToolbarModule;return!e||e.isToolbarHidden},s.prototype.getTextMarkupAnnotationMode=function(){return!!this.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode},s.prototype.isNewFreeTextAnnotation=function(){return!this.pdfViewer.annotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot},s.prototype.getCurrentTextMarkupAnnotation=function(){return!!this.isTextMarkupAnnotationModule()&&!!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation},s.prototype.getSelectTextMarkupCurrentPage=function(){return this.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage:null},s.prototype.getAnnotationToolStatus=function(){return!!this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled()},s.prototype.getPopupNoteVisibleStatus=function(){return!!this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isPopupNoteVisible},s.prototype.isTextMarkupAnnotationModule=function(){return this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.textMarkupAnnotationModule:null},s.prototype.isShapeAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.shapeAnnotationModule)},s.prototype.isFormDesignerModule=function(){return!!this.pdfViewer.formDesignerModule},s.prototype.isCalibrateAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.measureAnnotationModule)},s.prototype.isStampAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)},s.prototype.isInkAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.inkAnnotationModule)},s.prototype.isCommentAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stickyNotesAnnotationModule)},s.prototype.isShapeBasedAnnotationsEnabled=function(){return!!(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule()||this.isStampAnnotationModule()||this.isCommentAnnotationModule()||this.isFormDesignerModule())},s.prototype.getMousePosition=function(e){var t,i,n,r=e.target.parentElement;if(-1!==e.type.indexOf("touch")){if(t=e,this.pdfViewer.annotation){var o=this.getElement("_pageDiv_"+this.pdfViewer.annotation.getEventPageNumber(e));if(o){var a=o.getBoundingClientRect();i=t.changedTouches[0].clientX-a.left,n=t.changedTouches[0].clientY-a.top}}}else if(e.target.classList.contains("e-pv-hyperlink"))i=e.offsetX+e.target.offsetLeft,n=e.offsetY+e.target.offsetTop;else if(e.target.classList.contains("e-pv-text")&&r){var l=r.getBoundingClientRect();i=e.clientX-l.left,n=e.clientY-l.top}else if(e.target&&e&&e.path&&r&&(r.classList.contains("foreign-object")||r.parentElement.classList.contains("foreign-object"))){if(l=void 0,"e-pv-page-div"===e.path[4].className)l=e.path[4].getBoundingClientRect();else for(var h=0;h<e.path.length;h++)if("e-pv-page-div"===e.path[parseInt(h.toString(),10)].className){l=e.path[parseInt(h.toString(),10)].getBoundingClientRect();break}i=e.clientX-l.left,n=e.clientY-l.top}else e.target&&r&&r.classList.contains("foreign-object")||e.target.classList.contains("e-pv-checkbox-div")?(l=void 0,l=e.target.classList.contains("e-pv-checkbox-div")?e.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect():e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),i=e.clientX-l.left,n=e.clientY-l.top):(i=e.offsetX,n=e.offsetY);return{x:i,y:n}},s.prototype.getMouseEventArgs=function(e,t,i,n){var r,o;return t.position=e,n?r=Ta(i,this,this.pdfViewer):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(r=this.pdfViewer.selectedItems,("Drag"===this.action&&r&&this.pdfViewer.selectedItems.annotations.length>0||"Drag"===this.action&&r&&this.pdfViewer.selectedItems.formFields.length>0)&&(r=Ta(i,this,this.pdfViewer))):r=Ta(i,this,this.pdfViewer),r&&(o=r.wrapper),n?(t.target=r,t.targetWrapper=o):(t.source=r,t.sourceWrapper=o),t.actualObject=this.eventArgs.actualObject,t},s.prototype.findToolToActivate=function(e,t){t={x:t.x/this.getZoomFactor(),y:t.y/this.getZoomFactor()};var i=this.pdfViewer.selectedItems.wrapper;if(i&&e){var n=i.bounds,r=new $i(n.x,n.y,n.width,n.height);if("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType){var o=this.pdfViewer.selectedItems.annotations[0];if(o)for(var a=0;a<o.vertexPoints.length;a++)if(Il(t,o.vertexPoints[parseInt(a.toString(),10)],10)&&0!==o.leaderHeight)return"ConnectorSegmentPoint_"+a}if("Distance"===e.shapeAnnotationType){var l=0,h=void 0;if(e&&e.wrapper)for(a=0;a<e.wrapper.children.length;a++){var d=Ei.findAngle(e.sourcePoint,e.targetPoint);if(e.wrapper.children[a].id.indexOf("leader")>-1){var u=e.wrapper.children[0].bounds.center;0===l?(h={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},u=e.sourcePoint):(h={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},u=e.targetPoint);var f=en();if(rn(f,d,u.x,u.y),Il(t,We(f,{x:h.x,y:h.y}),10))return"Leader"+l;l++}}}var m=this.pdfViewer.touchPadding;this.getZoomFactor()<=1.5&&(m/=this.getZoomFactor());var y=en();rn(y,e.rotateAngle+i.parentTransform,i.offsetX,i.offsetY);var b=i.offsetX-i.pivot.x*i.actualSize.width,w=i.offsetY-i.pivot.y*i.actualSize.height,S={x:b+(.5===i.pivot.x?2*i.pivot.x:i.pivot.x)*i.actualSize.width/2,y:w-30/this.getZoomFactor()};if(S=We(y,S),"Stamp"===e.shapeAnnotationType&&Il(t,S,m))return"Rotate";if((r=this.inflate(m,r)).containsPoint(t,0)){var I=this.checkResizeHandles(this.pdfViewer,i,t,y,b,w);if(I)return I}return this.pdfViewer.selectedItems.annotations.indexOf(e)>-1||this.pdfViewer.selectedItems.formFields.indexOf(e)>-1&&this.pdfViewer.designerMode?"Drag":"Select"}return this.pdfViewer.tool||"Select"},s.prototype.inflate=function(e,t){return t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e,t},s.prototype.checkResizeHandles=function(e,t,i,n,r,o){var a;return a||(a=this.checkForResizeHandles(e,t,i,n,r,o)),a||null},s.prototype.checkForResizeHandles=function(e,t,i,n,r,o){var l=this.pdfViewer.touchPadding/1;this.getZoomFactor()>=2&&!E.isDevice&&(l/=this.getZoomFactor()/1.9),(t.actualSize.width<40||t.actualSize.height<40&&E.isDevice)&&(l=l/2*this.getZoomFactor()/1);var p=!1,u=!1,f=!1,g=!1,m=this.pdfViewer.annotationSelectorSettings.resizerLocation;if((m<1||m>3)&&(m=3),this.pdfViewer.selectedItems.annotations[0]&&("Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)&&(p=!0),this.pdfViewer.selectedItems.annotations[0]&&"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(u=!0),this.pdfViewer.selectedItems.annotations[0]&&"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(g=!0),this.pdfViewer.selectedItems.annotations[0]&&("Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Radius"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)&&(f=!0),!u){if(g||p||this.pdfViewer.selectedItems.annotations[0]&&("HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)||t.actualSize.width>=40&&t.actualSize.height>=40&&f&&(1===m||3===m)){if(Il(i,We(n,{x:r+t.actualSize.width,y:o+t.actualSize.height}),l))return"ResizeSouthEast";if(Il(i,We(n,{x:r,y:o+t.actualSize.height}),l))return"ResizeSouthWest";if(Il(i,We(n,{x:r+t.actualSize.width,y:o}),l))return"ResizeNorthEast";if(Il(i,We(n,{x:r,y:o}),l))return"ResizeNorthWest"}if(g||!f||f&&(2===m||3===m||!(t.actualSize.width>=40&&t.actualSize.height>=40)&&1===m)){if(Il(i,We(n,{x:r+t.actualSize.width,y:o+t.actualSize.height/2}),l)&&!p)return"ResizeEast";if(Il(i,We(n,{x:r,y:o+t.actualSize.height/2}),l)&&!p)return"ResizeWest";if(Il(i,We(n,{x:r+t.actualSize.width/2,y:o+t.actualSize.height}),l)&&!p)return"ResizeSouth";if(Il(i,We(n,{x:r+t.actualSize.width/2,y:o}),l)&&!p)return"ResizeNorth"}}return null},s.prototype.checkSignatureFormField=function(e){var t=!1;this.pdfViewer.formDesignerModule&&(e=e.split("_")[0]);var i=this.pdfViewer.nameTable[e];return i&&("SignatureField"===i.formFieldAnnotationType||"InitialField"===i.formFieldAnnotationType||"SignatureField"===i.annotName)&&(t=!0),t},s.prototype.diagramMouseMove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.currentPosition=this.getMousePosition(e),this.pdfViewer.firePageMouseover(this.currentPosition.x,this.currentPosition.y),this.pdfViewer.annotation?this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e):this.pdfViewer.formDesignerModule&&(this.activeElements.activePageID=this.pdfViewer.formDesignerModule.getEventPageNumber(e));var i=Ta(e,this,this.pdfViewer);(this.tool instanceof ec||this.tool instanceof $s)&&(i=this.pdfViewer.drawingObject);var n,r=this.pdfViewer.selectedItems.annotations.length>0&&this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id);if(!1===Ei.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown){this.eventArgs={},i&&(this.tool=this.getTool(this.action),i.wrapper&&i.wrapper.children[0]&&(n=i));var a=e.target;this.action=this.findToolToActivate(i,this.currentPosition),i&&i.annotationSettings&&i.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",i)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",i)||(this.action="Select")),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",i)||(this.action="Select"))),!this.pdfViewer.designerMode&&(!c(n)&&!c(n.formFieldAnnotationType)||r)&&("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action=""),this.tool=this.getTool(this.action),this.setCursor(a,e),this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(a,e,this)}else!this.tool&&this.action&&"Rotate"===this.action&&(this.tool=this.getTool(this.action),e.target&&this.setCursor(e.target,e)),!this.pdfViewer.designerMode&&(!c(n)&&!c(n.formFieldAnnotationType)||r)&&("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action="",this.tool=null),this.eventArgs&&this.eventArgs.source?this.updateDefaultCursor(this.eventArgs.source,a=e.target,e):this.setCursor(e.target,e),this.diagramMouseActionHelper(e),this.tool&&(i&&"FreeText"===i.shapeAnnotationType&&this.pdfViewer.freeTextSettings.allowEditTextOnly&&"Ink"!==this.action&&this.eventArgs.source&&"FreeText"===this.eventArgs.source.shapeAnnotationType&&((a=event.target).style.cursor="default",this.tool=null),null!=this.tool&&(this.eventArgs.info={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},this.tool.mouseMove(this.eventArgs)));if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.formFieldAnnotationType&&"Drag"!==this.action&&!(this.tool instanceof IS)&&(this.tool=this.getTool(this.action),this.tool instanceof ec)){var d=this.pdfViewer.drawingObject,p=this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(d,d.formFieldAnnotationType),u=this.pageContainer.firstElementChild.clientWidth-p.width,f=this.pageContainer.firstElementChild.clientHeight-p.height;if(this.pdfViewer.formDesignerModule&&d.formFieldAnnotationType&&this.currentPosition.x<u&&this.currentPosition.y<f)if(g=document.getElementById("FormField_helper_html_element")){if(g){var m=g.parentElement.id.split("_text_")[1]||g.parentElement.id.split("_textLayer_")[1]||g.parentElement.id.split("_annotationCanvas_")[1]||g.parentElement.id.split("_pageDiv_")[1];if(parseInt(m)!==this.activeElements.activePageID)g.remove("FormField_helper_html_element");else{var y=this.getMousePosition(event);"Checkbox"===d.formFieldAnnotationType?g.firstElementChild.firstElementChild.lastElementChild.style.visibility="visible":"SignatureField"===d.formFieldAnnotationType||"InitialField"===d.formFieldAnnotationType?(g.firstElementChild.firstElementChild.style.visibility="visible",g.firstElementChild.lastElementChild.style.visibility="visible"):g.firstElementChild.firstElementChild.style.visibility="visible",g.setAttribute("style","height:"+p.height+"px; width:"+p.width+"px;left:"+y.x+"px; top:"+y.y+"px;position:absolute;opacity: 0.5;")}}}else this.pdfViewer.formDesignerModule.drawHelper(d.formFieldAnnotationType,d,e);else if(this.currentPosition.x>u||this.currentPosition.y>f){var g;(g=document.getElementById("FormField_helper_html_element"))?g&&(y=this.getMousePosition(event),g.setAttribute("style","height:"+p.height+"px; width:"+p.width+"px;left:"+y.x+"px; top:"+y.y+"px;position:absolute;opacity: 0.5;"),"Checkbox"===d.formFieldAnnotationType?g.firstElementChild.firstElementChild.lastElementChild.style.visibility="hidden":"SignatureField"===d.formFieldAnnotationType||"InitialField"===d.formFieldAnnotationType?(g.firstElementChild.firstElementChild.style.visibility="hidden",g.firstElementChild.lastElementChild.style.visibility="hidden"):g.firstElementChild.firstElementChild.style.visibility="hidden"):this.pdfViewer.formDesignerModule.drawHelper(d.formFieldAnnotationType,d,e)}}this.prevPosition=this.currentPosition}this.pdfViewer.enableServerDataBinding(t,!0)},s.prototype.updateDefaultCursor=function(e,t,i){e&&void 0!==e.pageIndex&&e.pageIndex!==this.activeElements.activePageID&&t?t.style.cursor=this.isPanMode?"grab":"default":this.setCursor(t,i)},s.prototype.diagramMouseLeave=function(e){this.currentPosition=this.getMousePosition(e),this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e)),isNaN(this.activeElements.activePageID)&&this.pdfViewer.formDesignerModule&&(this.activeElements.activePageID=this.pdfViewer.formDesignerModule.getEventPageNumber(e));var t=Ta(e,this,this.pdfViewer),i=!1;(!1===Ei.equals(this.currentPosition,this.prevPosition)||this.inAction)&&(!1===this.isMouseDown||i?(this.eventArgs={},t&&(i=!1)):(this.diagramMouseActionHelper(e),this.tool&&"Drag"!==this.action&&"Stamp"!==this.pdfViewer.tool&&this.tool.currentElement&&"Stamp"!==this.tool.currentElement.shapeAnnotationType&&(this.tool.mouseLeave(this.eventArgs),this.tool=null,this.pdfViewer.annotation&&this.pdfViewer.annotationModule.renderAnnotations(this.previousPage,null,null,null))),this.prevPosition=this.currentPosition)},s.prototype.diagramMouseActionHelper=function(e){this.eventArgs.position=this.currentPosition,"Drag"===this.action&&this.eventArgs.source instanceof Tu&&this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source),this.inAction=!0,this.initialEventArgs=null},s.prototype.setCursor=function(e,t){var n,i=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.freeTextAnnotationModule:null;if(this.tool instanceof IS)"ResizeNorthWest"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"nw-resize":n):"ResizeNorthEast"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"ne-resize":n):"ResizeSouthWest"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"sw-resize":n):"ResizeSouthEast"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"se-resize":n):"ResizeNorth"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"n-resize":n):"ResizeWest"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"w-resize":n):"ResizeEast"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"e-resize":n):"ResizeSouth"===this.tool.corner&&(n=this.setResizerCursorType(),e.style.cursor=c(n)?"s-resize":n);else if(this.isCommentIconAdded&&this.isAddComment)e.style.cursor="crosshair";else if(this.pdfViewer.enableHandwrittenSignature&&this.isNewSignatureAdded&&this.tool instanceof ay)e.style.cursor="crosshair";else if(this.tool instanceof oy)e.style.cursor="move";else if(this.tool instanceof ec||this.tool instanceof $s||this.tool instanceof Fh||i&&i.isNewAddedAnnot||this.tool instanceof jK)e.style.cursor="crosshair";else if(this.tool instanceof LE)this.tool.endPoint&&this.tool.endPoint.indexOf("Leader0")?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"nw-resize":n):this.tool.endPoint&&this.tool.endPoint.indexOf("Leader1")?(n=this.setResizerCursorType(),e.style.cursor=c(n)?"ne-resize":n):this.tool.endPoint&&this.tool.endPoint.indexOf("ConnectorSegmentPoint")&&(e.style.cursor="sw-resize");else if(e.classList.contains("e-pv-text"))e.style.cursor="text";else if(e.classList.contains("e-pv-hyperlink"))e.style.cursor="pointer";else if(this.isPanMode){if(this.isViewerMouseDown&&"mousemove"===t.type)e.style.cursor="grabbing";else if((r=Ta(t,this,this.pdfViewer))&&"mousemove"===t.type){e.style.cursor="pointer";var o=r,a=this.getMousePosition(t),h={left:(l=this.relativePosition(t)).x,top:l.y},d={left:a.x,top:a.y},p={opacity:o.opacity,fillColor:o.fillColor,strokeColor:o.strokeColor,thicknes:o.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate};this.isMousedOver=!0;var u=this.checkSignatureFormField(o.id);o.formFieldAnnotationType?(this.isFormFieldMousedOver=!0,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",{value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected},o.pageIndex,l.x,l.y,a.x,a.y)):u||this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageIndex,o.shapeAnnotationType,o.bounds,p,d,h)}else if(e.style.cursor="grab",this.isMousedOver){var g=void 0;g=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getEventPageNumber(t):this.pdfViewer.annotation.getEventPageNumber(t),this.isFormFieldMousedOver?this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",null,g):this.pdfViewer.fireAnnotationMouseLeave(g),this.isMousedOver=!1,this.isFormFieldMousedOver=!1}}else{var r;if((r=Ta(t,this,this.pdfViewer))&&0===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type){var m=this.pdfViewer.nameTable[(o=r).id];if("HandWrittenSignature"!==m.shapeAnnotationType&&"Ink"!==m.shapeAnnotationType&&m.annotationSettings&&void 0!==m.annotationSettings.isLock&&(m.annotationSettings.isLock=JSON.parse(m.annotationSettings.isLock)),e.style.cursor=m.annotationSettings&&m.annotationSettings.isLock?"default":"pointer",a=this.getMousePosition(t),h={left:(l=this.relativePosition(t)).x,top:l.y},d={left:a.x,top:a.y},p={opacity:o.opacity,fillColor:o.fillColor,strokeColor:o.strokeColor,thicknes:o.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate},this.isMousedOver=!0,u=this.checkSignatureFormField(o.id),o.formFieldAnnotationType){this.isFormFieldMousedOver=!0;var y={value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected};this.fromTarget=o,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",y,o.pageIndex,l.x,l.y,a.x,a.y)}else u||this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageIndex,o.shapeAnnotationType,o.bounds,p,d,h)}else if(!this.pdfViewer.formDesignerModule&&t.target.classList.contains("e-pdfviewer-formFields")){g=this.pdfViewer.annotation.getEventPageNumber(t),a=this.getMousePosition(t),h={left:(l=this.relativePosition(t)).x,top:l.y},d={left:a.x,top:a.y};for(var l,b=this.getItemFromSessionStorage("_formfields"),w=JSON.parse(b),S=0;S<w.length;S++)if(w[parseInt(S.toString(),10)].FieldName===t.target.name)var I={name:w[parseInt(S.toString(),10)].FieldName};this.isMousedOver=!0,this.isFormFieldMousedOver=!0,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",I,g,l.x,l.y,a.x,a.y)}else this.isMousedOver&&(g=void 0,g=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getEventPageNumber(t):this.pdfViewer.annotation.getEventPageNumber(t),this.isFormFieldMousedOver?this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",this.fromTarget?{name:this.fromTarget.name,id:this.fromTarget.id,value:this.fromTarget.value,fontFamily:this.fromTarget.fontFamily,fontSize:this.fromTarget.fontSize,fontStyle:this.fromTarget.fontStyle,color:this.fromTarget.color,backgroundColor:this.fromTarget.backgroundColor,borderColor:this.fromTarget.borderColor,thickness:this.fromTarget.thickness,alignment:this.fromTarget.alignment,isReadonly:this.fromTarget.isReadonly,visibility:this.fromTarget.visibility,maxLength:this.fromTarget.maxLength,isRequired:this.fromTarget.isRequired,isPrint:this.fromTarget.isPrint,rotation:this.fromTarget.rotateAngle,tooltip:this.fromTarget.tooltip,options:this.fromTarget.options,isChecked:this.fromTarget.isChecked,isSelected:this.fromTarget.isSelected}:null,g):this.pdfViewer.fireAnnotationMouseLeave(g),this.isMousedOver=!1,this.isFormFieldMousedOver=!1,e.style.cursor="default"),e.style.cursor=r&&1===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type?"pointer":"default"}},s.prototype.setResizerCursorType=function(){var e;return this.pdfViewer.selectedItems.annotations[0]&&c(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)?"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=c(this.pdfViewer.freeTextSettings.annotationSelectorSettings)?null:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType:"Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=c(this.pdfViewer.stampSettings.annotationSelectorSettings)?null:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType:"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=c(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)?null:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType:"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=c(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)?null:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType:this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType&&("Distance calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=c(this.pdfViewer.distanceSettings.annotationSelectorSettings)?null:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType:"Perimeter calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=c(this.pdfViewer.perimeterSettings.annotationSelectorSettings)?null:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType:"Area calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=c(this.pdfViewer.areaSettings.annotationSelectorSettings)?null:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType:"Radius calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=c(this.pdfViewer.radiusSettings.annotationSelectorSettings)?null:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType:"Volume calculation"===this.pdfViewer.selectedItems.annotations[0].subject&&(e=c(this.pdfViewer.volumeSettings.annotationSelectorSettings)?null:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType)):"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=c(this.pdfViewer.lineSettings.annotationSelectorSettings)?null:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType:"LineWidthArrowHead"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=c(this.pdfViewer.arrowSettings.annotationSelectorSettings)?null:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType:"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=c(this.pdfViewer.rectangleSettings.annotationSelectorSettings)?null:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType:"Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=c(this.pdfViewer.circleSettings.annotationSelectorSettings)?null:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType:"Polygon"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(e=c(this.pdfViewer.polygonSettings.annotationSelectorSettings)?null:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType):this.pdfViewer.selectedItems.annotations[0]&&(e=this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType),e||(e=this.pdfViewer.annotationSelectorSettings.resizerCursorType),e},s.prototype.getTool=function(e){switch(e){case"Select":return new MAe(this.pdfViewer,this);case"Drag":return new oy(this.pdfViewer,this);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new IS(this.pdfViewer,this,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"Leader":case"ConnectorSegmentPoint":return new LE(this.pdfViewer,this,e);case"DrawTool":return new ec(this.pdfViewer,this,this.pdfViewer.drawingObject);case"Polygon":return new Fh(this.pdfViewer,this,"Polygon");case"Distance":return new $s(this.pdfViewer,this,"Leader1",void 0);case"Line":return new $s(this.pdfViewer,this,"ConnectorSegmentPoint_1",this.pdfViewer.drawingObject);case"Perimeter":return new Fh(this.pdfViewer,this,"Perimeter");case"Rotate":return new EAe(this.pdfViewer,this);case"Stamp":return new ay(this.pdfViewer,this);case"Ink":return new jK(this.pdfViewer,this,this.pdfViewer.drawingObject)}return e.indexOf("ConnectorSegmentPoint")>-1||e.indexOf("Leader")>-1?new LE(this.pdfViewer,this,e):null},s.prototype.diagramMouseUp=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var n=this.action.toLowerCase().includes("resize")||this.action.toLowerCase().includes("connectorsegmentpoint"),r="Drag"===this.action||n||(this.tool instanceof ec||this.tool instanceof $s||this.tool instanceof Fh)&&this.tool.dragging&&this.tool.drawingObject;if(this.tool){if(!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var o=Ta(e,this,this.pdfViewer)}this.tool instanceof Fh||this.tool instanceof $s||this.tool instanceof ec||(this.inAction=!1,this.isMouseDown=!1),this.currentPosition=this.getMousePosition(e),this.tool&&(this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source),this.isMetaKey(e),this.eventArgs.info={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},this.eventArgs.clickCount=e.detail,this.tool.mouseUp(this.eventArgs),this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,(this.tool instanceof ec||this.tool instanceof $s||this.tool instanceof Fh)&&!this.tool.dragging&&(this.inAction=!1,this.isMouseDown=!1),r&&(o=Ta(e,this,this.pdfViewer),(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule())&&this.pdfViewer.annotation.onShapesMouseup(o,e)),this.isAnnotationDrawn=!1)}e.cancelable&&this.skipPreventDefault(e.target)&&(!E.isDevice||this.pdfViewer.enableDesktopMode)&&e.preventDefault(),this.eventArgs={},this.pdfViewer.enableServerDataBinding(t,!0)},s.prototype.skipPreventDefault=function(e){var t=!1,i=!1;return this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&(i=!0),e.parentElement&&"foreign-object"!==e.parentElement.className&&!e.classList.contains("e-pv-radio-btn")&&!e.classList.contains("e-pv-radiobtn-span")&&!e.classList.contains("e-pv-checkbox-div")&&!e.classList.contains("e-pdfviewer-formFields")&&!e.classList.contains("e-pdfviewer-ListBox")&&!e.classList.contains("e-pdfviewer-signatureformfields")&&!("free-text-input"===e.className&&"TEXTAREA"===e.tagName)&&!i&&"e-pv-hyperlink"!==e.className&&e.parentElement.classList.length>0&&!e.parentElement.classList.contains("e-editable-elements")&&(t=!0),t},s.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},s.prototype.diagramMouseDown=function(e){var t=this;this.tool instanceof oy&&!(this.tool instanceof ay)&&this.tool.inAction&&(this.diagramMouseUp(e),1===e.which&&(this.preventContextmenu=!0,setTimeout(function(){t.preventContextmenu=!1},200)));var n,i=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),n=e.touches,this.isMouseDown=!0,this.isAnnotationAdded=!1,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={};var r=!1;"Stamp"===this.pdfViewer.tool&&(this.pdfViewer.tool="",r=!0),E.isDevice&&this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var o=Ta(e,this,this.pdfViewer);if(E.isDevice&&!this.pdfViewer.enableDesktopMode&&o&&!(o instanceof ME)&&e.preventDefault(),this.pdfViewer.annotation&&this.pdfViewer.enableStampAnnotations){var a=this.pdfViewer.annotationModule.stampAnnotationModule;if(a&&a.isNewStampAnnot){var l=o;if(!l&&this.pdfViewer.selectedItems.annotations[0]&&(l=this.pdfViewer.selectedItems.annotations[0]),l){if(this.isViewerMouseDown=!1,l.opacity=this.pdfViewer.stampSettings.opacity,this.isNewStamp=!0,this.pdfViewer.nodePropertyChange(l,{opacity:"Image"===l.shapeAnnotationType?this.pdfViewer.customStampSettings.opacity:this.pdfViewer.stampSettings.opacity}),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!1,"Image"===l.shapeAnnotationType&&!this.isAlreadyAdded){this.stampAdded=!0;var d=l.id;a.currentStampAnnotation&&a.currentStampAnnotation.signatureName&&(d=a.currentStampAnnotation.signatureName);for(var p=!1,u=0;u<this.customStampCollection.length;u++)if(this.customStampCollection[parseInt(u.toString(),10)].customStampName===d){p=!0;break}p&&(d=l.id),this.customStampCollection.push({customStampName:d=a.customStampName?a.customStampName:a.currentStampAnnotation.signatureName,customStampImageSource:l.data}),X()&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCustomStampCollection",d,l.data)}this.pdfViewer.customStampSettings.enableCustomStamp&&this.pdfViewer.customStampSettings.isAddToMenu&&(this.stampAdded=!0),this.isAlreadyAdded=!1,a.updateDeleteItems(l.pageIndex,l,l.opacity),a.resetAnnotation(),a.isNewStampAnnot=!1}}}if(this.isNewSignatureAdded){this.signatureCount++,this.currentSignatureAnnot=null;var f=o;c(f)&&this.pdfViewer.selectedItems.annotations[0]&&(f=this.pdfViewer.selectedItems.annotations[0]),f&&(this.signatureAdded=!0,this.signatureModule.storeSignatureData(f.pageIndex,f),this.pdfViewer.fireSignatureAdd(f.pageIndex,f.signatureName,f.shapeAnnotationType,{left:f.bounds.x,top:f.bounds.y,width:f.bounds.width,height:f.bounds.height},f.opacity,f.strokeColor,f.thickness,this.signatureModule.saveImageString)),this.isNewSignatureAdded=!1}if(this.pdfViewer.annotationModule){var m=this.pdfViewer.annotationModule.freeTextAnnotationModule;if(!0===m.isNewFreeTextAnnot){var w=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){var S=this.pdfViewer.annotation.getEventPageNumber(e),I=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+S);if(I){var x=I.getBoundingClientRect();w=new $i((x.x?x.x:x.left)+5,(x.y?x.y:x.top)+5,x.width-10,x.height-10)}}if(n&&(this.mouseX=n[0].clientX,this.mouseY=n[0].clientY),w&&w.containsPoint({x:this.mouseX,y:this.mouseY})&&m.isNewAddedAnnot){if(S=this.pdfViewer.annotation.getEventPageNumber(e),!this.pdfViewer.freeTextSettings.enableAutoFit){var N=this.getZoomFactor(),O=this.currentPosition.x+m.defautWidth*N,_=this.getPageWidth(S);O>=_&&(this.currentPosition.x=_-m.defautWidth*N,this.currentPosition.x<=0&&(this.currentPosition.x=5),m.defautWidth=m.defautWidth*N>=_?_-10:m.defautWidth)}if(m.addInuptElemet(this.currentPosition,null,S),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){var B=this.pdfViewer.toolbar.annotationToolbarModule;X()||B.primaryToolbar.deSelectItem(B.freeTextEditItem)}e.preventDefault(),m.isNewAddedAnnot=!1}}}(!this.tool||this.tool&&!this.tool.drawingObject)&&(r?(this.action="Select",this.tool=this.getTool(this.action)):(this.action=this.findToolToActivate(o,this.currentPosition),o&&o.annotationSettings&&o.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",o)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",o)||(this.action="Select")),"Rotate"===this.action&&(this.action="Select"),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeSouth"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",o)||(this.action="Select"))),this.tool=this.getTool(this.action),this.tool||(this.action=this.pdfViewer.tool||"Select",this.tool=this.getTool(this.action)))),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.eventArgs.position=this.currentPosition,this.tool&&(this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,this.isAnnotationMouseMove=!1,this.isFormFieldMouseMove=!1,this.tool.mouseDown(this.eventArgs),this.isAnnotationDrawn=!0,this.signatureAdded=!0),this.pdfViewer.annotation&&this.pdfViewer.annotation.onAnnotationMouseDown(),this.pdfViewer.selectedItems&&1===this.pdfViewer.selectedItems.formFields.length&&!c(this.pdfViewer.toolbar)&&!c(this.pdfViewer.toolbar.formDesignerToolbarModule)&&this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0);var W=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]+"_content"]:null;if(W||(W=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id]:null),this.eventArgs&&this.eventArgs.source&&(this.eventArgs.source.formFieldAnnotationType||W)&&!this.pdfViewer.designerMode){var j=void 0;if((j=W?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]]:this.eventArgs.source)||(j=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(U){return U.id===W.id})]),j){var G={name:j.name,id:j.id,fontFamily:j.fontFamily,fontSize:j.fontSize,fontStyle:j.fontStyle,color:j.color,value:j.value,type:j.formFieldAnnotationType?j.formFieldAnnotationType:j.type,backgroundColor:j.backgroundColor,alignment:j.alignment},Y=document.getElementById(j.id);(Y=Y||(document.getElementById(j.id+"_content_html_element")?document.getElementById(j.id+"_content_html_element").children[0].children[0]:null))&&(this.currentTarget=Y,this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",G,!1,0===e.button))}}this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.pdfViewer.enableServerDataBinding(i,!0)},s.prototype.exportAnnotationsAsObject=function(){var e=this;if(this.pdfViewer.annotationModule&&this.updateExportItem())return new Promise(function(i,n){e.createRequestForExportAnnotations(!0,Yo.Json).then(function(r){i(r)})})},s.prototype.getItemFromSessionStorage=function(e){return this.isStorageExceed?this.formFieldStorage[this.documentId+e]:window.sessionStorage.getItem(this.documentId+e)},s.prototype.setStyleToTextDiv=function(e,t,i,n,r,o,a){var l=this.getZoomFactor();a&&(l=1,e.style.position="absolute"),e.style.left=t*l+"px",e.style.top=i*l+"px",e.style.height=o*l+"px",e.style.width=r*l+"px",e.style.margin="0px",n>0&&(e.style.fontSize=n*l+"px")},s.prototype.ConvertPointToPixel=function(e){return e*(96/72)},s.prototype.setItemInSessionStorage=function(e,t){var i=Math.round(JSON.stringify(e).length/1024),n=Math.round(JSON.stringify(window.sessionStorage).length/1024);i>4500&&(this.isStorageExceed=!0,this.pdfViewer.formFieldsModule&&(this.isFormStorageExceed||(this.pdfViewer.formFieldsModule.clearFormFieldStorage(),this.isFormStorageExceed=!0))),this.isStorageExceed?this.formFieldStorage[this.documentId+t]=JSON.stringify(e):i+n>4500?(this.isStorageExceed=!0,this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.clearFormFieldStorage(),this.isFormStorageExceed=!0,this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.clearAnnotationStorage(),this.formFieldStorage[this.documentId+t]=JSON.stringify(e)):window.sessionStorage.setItem(this.documentId+t,JSON.stringify(e))},s.prototype.exportFormFieldsAsObject=function(e){var t=this;if(this.pdfViewer.formFieldsModule)return new Promise(function(i,n){t.createRequestForExportFormfields(!0,e).then(function(r){i(r)})})},s.prototype.importAnnotations=function(e,t,i){this.pdfViewer.annotationModule&&this.createRequestForImportAnnotations(e,t,i)},s.prototype.exportAnnotations=function(e){this.pdfViewer.annotationModule&&this.updateExportItem()&&this.createRequestForExportAnnotations(!1,e)},s.prototype.createRequestForExportAnnotations=function(e,t,i){var r,n=this;r=this;var o=new Promise(function(a,l){var h;(h=n.constructJsonDownload()).annotationDataFormat=t,h.action="ExportAnnotations",r.pdfViewer.fireExportStart(h),r.jsonDocumentId&&(h.document=r.jsonDocumentId);var d=r.pdfViewer.serviceUrl+"/"+r.pdfViewer.serverActionSettings.exportAnnotations;r.exportAnnotationRequestHandler=new hs(n.pdfViewer),r.exportAnnotationRequestHandler.url=d,r.exportAnnotationRequestHandler.mode=!0,r.exportAnnotationRequestHandler.responseType="text",r.exportAnnotationRequestHandler.send(h),r.exportAnnotationRequestHandler.onSuccess=function(p){var u=p.data;if(!r.checkRedirection(u))if(u){if("object"==typeof u&&(u=JSON.parse(u)),u){var g=r.pdfViewer.fireAjaxRequestSuccess(r.pdfViewer.serverActionSettings.exportAnnotations,u);if(e||i&&!X())if(u.split("base64,")[1]){var m=u,y=atob(u.split(",")[1]);e&&("Json"===h.annotationDataFormat?(y=r.getSanitizedString(y),m=JSON.parse(y)):m=y),r.pdfViewer.fireExportSuccess(m,null!==r.pdfViewer.exportAnnotationFileName?r.pdfViewer.exportAnnotationFileName:r.pdfViewer.fileName),r.updateDocumentAnnotationCollections(),a(i?u:y)}else r.pdfViewer.fireExportFailed(h.pdfAnnotation,r.pdfViewer.localeObj.getConstant("Export Failed"));else if("Json"===t)if(u.split("base64,")[1]){if(g)return u;var b=r.createBlobUrl(u.split("base64,")[1],"application/json");E.isIE||"edge"===E.info.name?null!==r.pdfViewer.exportAnnotationFileName?window.navigator.msSaveOrOpenBlob(b,r.pdfViewer.exportAnnotationFileName.split(".")[0]+".json"):window.navigator.msSaveOrOpenBlob(b,r.pdfViewer.fileName.split(".")[0]+".json"):r.downloadExportFormat(b,t),r.updateDocumentAnnotationCollections()}else X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then(function(x){r.openImportExportNotificationPopup(x)}):r.openImportExportNotificationPopup(r.pdfViewer.localeObj.getConstant("Export Failed")),r.pdfViewer.fireExportFailed(h.pdfAnnotation,r.pdfViewer.localeObj.getConstant("Export Failed"));else if(u.split("base64,")[1]){if(g)return u;b=r.createBlobUrl(u.split("base64,")[1],"application/vnd.adobe.xfdf"),E.isIE||"edge"===E.info.name?window.navigator.msSaveOrOpenBlob(b,r.pdfViewer.fileName.split(".")[0]+".xfdf"):r.downloadExportFormat(b,t),r.updateDocumentAnnotationCollections()}else X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then(function(x){r.openImportExportNotificationPopup(x)}):r.openImportExportNotificationPopup(r.pdfViewer.localeObj.getConstant("Export Failed")),r.pdfViewer.fireExportFailed(h,r.pdfViewer.localeObj.getConstant("Export Failed"))}if("string"!=typeof u)try{"string"==typeof u&&(r.onControlError(500,u,r.pdfViewer.serverActionSettings.exportAnnotations),u=null)}catch{r.pdfViewer.fireExportFailed(h.pdfAnnotation,r.pdfViewer.localeObj.getConstant("Export Failed")),r.onControlError(500,u,r.pdfViewer.serverActionSettings.exportAnnotations),u=null}}else r.pdfViewer.fireExportSuccess("Exported data saved in server side successfully",null!==r.pdfViewer.exportAnnotationFileName?r.pdfViewer.exportAnnotationFileName:r.pdfViewer.fileName)},r.exportAnnotationRequestHandler.onFailure=function(p){r.pdfViewer.fireExportFailed(h.pdfAnnotation,p.statusText)},r.exportAnnotationRequestHandler.onError=function(p){r.pdfViewer.fireExportFailed(h.pdfAnnotation,p.statusText)}});return!e&&!i||o},s.prototype.updateModifiedDateToLocalDate=function(e,t){if(e[""+t]&&e[""+t].length>0){var i=e[""+t];if(i)for(var n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)].ModifiedDate=this.convertUTCDateTimeToLocalDateTime(i[parseInt(n.toString(),10)].ModifiedDate),i[parseInt(n.toString(),10)].Comments)for(var r=0;r<i[parseInt(n.toString(),10)].Comments.length;r++)i[parseInt(n.toString(),10)].Comments[parseInt(r.toString(),10)].ModifiedDate=this.convertUTCDateTimeToLocalDateTime(i[parseInt(n.toString(),10)].Comments[parseInt(r.toString(),10)].ModifiedDate)}},s.prototype.convertUTCDateTimeToLocalDateTime=function(e){var t;if(this.globalize=new qt(this.pdfViewer.locale),null!=e&&""!==e)t=new Date(Date.parse(e+" UTC"));else{var i=new Date,n=Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());t=new Date(n)}return this.globalize.formatDate(t,{format:this.pdfViewer.dateTimeFormat,type:"dateTime"})},s.prototype.createRequestForImportAnnotations=function(e,t,i){var n,r;if(r=this,this.isJsonImported=!(i||!r.isPDFViewerJson),"object"==typeof e){if(e&&e.pdfAnnotation)for(var o=Object.keys(e.pdfAnnotation),a=0;a<o.length;a++){var l=e.pdfAnnotation[o[parseInt(a.toString(),10)]];this.updateModifiedDateToLocalDate(l,"freeTextAnnotation"),this.updateModifiedDateToLocalDate(l,"measureShapeAnnotation"),this.updateModifiedDateToLocalDate(l,"shapeAnnotation"),this.updateModifiedDateToLocalDate(l,"signatureAnnotation"),this.updateModifiedDateToLocalDate(l,"signatureInkAnnotation"),this.updateModifiedDateToLocalDate(l,"stampAnnotations"),this.updateModifiedDateToLocalDate(l,"stickyNotesAnnotation"),this.updateModifiedDateToLocalDate(l,"textMarkupAnnotation")}r.reRenderAnnotations(e.pdfAnnotation),r.isImportedAnnotation=!0,r.updateDocumentEditedProperty(!0),this.isAddAnnotation||r.pdfViewer.fireImportSuccess(e.pdfAnnotation)}else{r.pdfViewer.fireImportStart(e),"Json"===t?n=r.isPDFViewerJson?{fileName:e,action:"ImportAnnotations",elementId:r.pdfViewer.element.id,hashId:r.hashId,uniqueId:r.documentId,annotationDataFormat:t}:{importedData:e,action:"ImportAnnotations",elementId:r.pdfViewer.element.id,hashId:r.hashId,uniqueId:r.documentId,annotationDataFormat:t}:(i||(e=btoa(e)),n={importedData:e=e.split(",")[1]?e.split(",")[1]:e.split(",")[0],action:"ImportAnnotations",elementId:r.pdfViewer.element.id,hashId:r.hashId,uniqueId:r.documentId,annotationDataFormat:t}),(n=Object.assign(n,this.constructJsonDownload())).action="ImportAnnotations",r.jsonDocumentId&&(n.documentId&&delete n.documentId,n.document=r.jsonDocumentId);var h=r.pdfViewer.serviceUrl+"/"+r.pdfViewer.serverActionSettings.importAnnotations;r.importAnnotationRequestHandler=new hs(r.pdfViewer),r.importAnnotationRequestHandler.url=h,r.importAnnotationRequestHandler.mode=!0,r.importAnnotationRequestHandler.responseType="text",r.importAnnotationRequestHandler.send(n),r.importAnnotationRequestHandler.onSuccess=function(d){var p=d.data;if(!r.checkRedirection(p)&&p){if("object"!=typeof p)try{"object"!=typeof(p=JSON.parse(p))&&(r.onControlError(500,p,r.pdfViewer.serverActionSettings.importAnnotations),p=null)}catch{r.pdfViewer.fireImportFailed(e,r.pdfViewer.localeObj.getConstant("File not found")),X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then(function(w){r.openImportExportNotificationPopup(w)}):r.openImportExportNotificationPopup(r.pdfViewer.localeObj.getConstant("File not found")),r.onControlError(500,p,r.pdfViewer.serverActionSettings.importAnnotations),p=null}if(p&&(r.pdfViewer.fireAjaxRequestSuccess(r.pdfViewer.serverActionSettings.importAnnotations,p),p.pdfAnnotation)){var g,m;g=Object.keys(p.pdfAnnotation);for(var y=0;y<Object.keys(p.pdfAnnotation).length;y++)m=p.pdfAnnotation[g[parseInt(y.toString(),10)]],r.updateModifiedDateToLocalDate(m,"annotationOrder"),r.updateModifiedDateToLocalDate(m,"freeTextAnnotation"),r.updateModifiedDateToLocalDate(m,"measureShapeAnnotation"),r.updateModifiedDateToLocalDate(m,"shapeAnnotation"),r.updateModifiedDateToLocalDate(m,"signatureAnnotation"),r.updateModifiedDateToLocalDate(m,"signatureInkAnnotation"),r.updateModifiedDateToLocalDate(m,"stampAnnotations"),r.updateModifiedDateToLocalDate(m,"stickyNotesAnnotation"),r.updateModifiedDateToLocalDate(m,"textMarkupAnnotation");r.reRenderAnnotations(p.pdfAnnotation),r.isImportedAnnotation=!0,r.updateDocumentEditedProperty(!0),r.pdfViewer.fireImportSuccess(p.pdfAnnotation)}}},r.importAnnotationRequestHandler.onFailure=function(d){r.pdfViewer.fireImportFailed(e,d.statusText)},r.importAnnotationRequestHandler.onError=function(d){r.pdfViewer.fireImportFailed(e,d.statusText)}}},s.prototype.openImportExportNotificationPopup=function(e){this.pdfViewer.showNotificationDialog&&this.textLayer.createNotificationPopup(e)},s.prototype.reRenderAnnotations=function(e){if(e){this.isImportAction=!0;var t=0;this.isImportedAnnotation?this.importedAnnotation=this.combineImportedData(this.importedAnnotation,e):this.pageCount>0&&(this.importedAnnotation=e),this.isImportedAnnotation||(t=0);for(var i=0;i<this.pageCount;i++)if(e[parseInt(i.toString(),10)]){var n=[],r=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),o=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),a=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),l=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),h=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),d=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),p=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),u=window.sessionStorage.getItem(this.documentId+"_annotations_ink");if(this.isStorageExceed&&(r=this.annotationStorage[this.documentId+"_annotations_textMarkup"],o=this.annotationStorage[this.documentId+"_annotations_shape"],a=this.annotationStorage[this.documentId+"_annotations_shape_measure"],l=this.annotationStorage[this.documentId+"_annotations_stamp"],h=this.annotationStorage[this.documentId+"_annotations_sticky"],d=this.annotationStorage[this.documentId+"_annotations_freetext"],u=this.annotationStorage[this.documentId+"_annotations_ink"]),this.getElement("_annotationCanvas_"+i))if(this.drawPageAnnotations(e[parseInt(i.toString(),10)],i),this.isImportedAnnotation){for(var g=!1,m=0;m<this.annotationPageList.length;m++)this.annotationPageList[parseInt(m.toString(),10)]===i&&(g=!0);g&&(this.annotationPageList[parseInt(t.toString(),10)]=i,t+=1)}else this.annotationPageList[parseInt(t.toString(),10)]=i,t+=1;if(e[parseInt(i.toString(),10)].textMarkupAnnotation&&0!==e[parseInt(i.toString(),10)].textMarkupAnnotation.length){if(r){var y=JSON.parse(r);e[parseInt(i.toString(),10)].textMarkupAnnotation=this.checkAnnotationCollections(y,e[parseInt(i.toString(),10)].textMarkupAnnotation,i)}e[parseInt(i.toString(),10)].textMarkupAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].textMarkupAnnotation,i),n.textMarkupAnnotation=e[parseInt(i.toString(),10)].textMarkupAnnotation}if(e[parseInt(i.toString(),10)].shapeAnnotation&&0!==e[parseInt(i.toString(),10)].shapeAnnotation.length&&(o&&(y=JSON.parse(o),e[parseInt(i.toString(),10)].shapeAnnotation=this.checkAnnotationCollections(y,e[parseInt(i.toString(),10)].shapeAnnotation,i)),e[parseInt(i.toString(),10)].shapeAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].shapeAnnotation,i),n.shapeAnnotation=e[parseInt(i.toString(),10)].shapeAnnotation),e[parseInt(i.toString(),10)].measureShapeAnnotation&&0!==e[parseInt(i.toString(),10)].measureShapeAnnotation.length&&(a&&(y=JSON.parse(a),e[parseInt(i.toString(),10)].measureShapeAnnotation=this.checkAnnotationCollections(y,e[parseInt(i.toString(),10)].measureShapeAnnotation,i)),e[parseInt(i.toString(),10)].measureShapeAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].measureShapeAnnotation,i),n.measureShapeAnnotation=e[parseInt(i.toString(),10)].measureShapeAnnotation),e[parseInt(i.toString(),10)].stampAnnotations&&0!==e[parseInt(i.toString(),10)].stampAnnotations.length&&(l&&(y=JSON.parse(l),e[parseInt(i.toString(),10)].stampAnnotations=this.checkAnnotationCollections(y,e[parseInt(i.toString(),10)].stampAnnotations,i)),e[parseInt(i.toString(),10)].stampAnnotations=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].stampAnnotations,i),n.stampAnnotations=e[parseInt(i.toString(),10)].stampAnnotations),e[parseInt(i.toString(),10)].stickyNotesAnnotation&&0!==e[parseInt(i.toString(),10)].stickyNotesAnnotation.length&&(h&&(y=JSON.parse(h),e[parseInt(i.toString(),10)].stickyNotesAnnotation=this.checkAnnotationCollections(y,e[parseInt(i.toString(),10)].stickyNotesAnnotation,i)),e[parseInt(i.toString(),10)].stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].stickyNotesAnnotation,i),n.stickyNotesAnnotation=e[parseInt(i.toString(),10)].stickyNotesAnnotation),e[parseInt(i.toString(),10)].freeTextAnnotation&&0!==e[parseInt(i.toString(),10)].freeTextAnnotation.length&&(d&&(y=JSON.parse(d),e[parseInt(i.toString(),10)].freeTextAnnotation=this.checkAnnotationCollections(y,e[parseInt(i.toString(),10)].freeTextAnnotation,i)),e[parseInt(i.toString(),10)].freeTextAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].freeTextAnnotation,i),n.freeTextAnnotation=e[parseInt(i.toString(),10)].freeTextAnnotation),e[parseInt(i.toString(),10)].signatureAnnotation&&0!==e[parseInt(i.toString(),10)].signatureAnnotation.length&&(p&&(y=JSON.parse(p),e[parseInt(i.toString(),10)].signatureAnnotation=this.checkSignatureCollections(y,e[parseInt(i.toString(),10)].signatureAnnotation,i)),n.signatureAnnotation=e[parseInt(i.toString(),10)].signatureAnnotation),e[parseInt(i.toString(),10)].signatureInkAnnotation&&0!==e[parseInt(i.toString(),10)].signatureInkAnnotation.length&&(u&&(y=JSON.parse(u),e[parseInt(i.toString(),10)].signatureInkAnnotation=this.checkAnnotationCollections(y,e[parseInt(i.toString(),10)].signatureInkAnnotation,i)),e[parseInt(i.toString(),10)].signatureInkAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].signatureInkAnnotation,i),n.signatureInkAnnotation=e[parseInt(i.toString(),10)].signatureInkAnnotation),e[parseInt(i.toString(),10)].annotationOrder)for(var b=e[parseInt(i.toString(),10)].annotationOrder,w=[],S=0;S<b.length;S++){var I=b[parseInt(S.toString(),10)].AnnotType?b[parseInt(S.toString(),10)].AnnotType:b[parseInt(S.toString(),10)].AnnotationType;switch(w.push(b[parseInt(S.toString(),10)]),y=void 0,I){case"textMarkup":if(0!==e[parseInt(i.toString(),10)].textMarkupAnnotation.length)for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(w,i),m=0;m<w.length;m++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(b[parseInt(S.toString(),10)],i));break;case"shape":if(0!==e[parseInt(i.toString(),10)].shapeAnnotation.length)for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(w,i),m=0;m<w.length;m++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(b[parseInt(S.toString(),10)],i));break;case"shape_measure":if(0!==e[parseInt(i.toString(),10)].measureShapeAnnotation.length)for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(w,i),m=0;m<w.length;m++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(b[parseInt(S.toString(),10)],i));break;case"stamp":if(0!==e[parseInt(i.toString(),10)].stampAnnotations.length)for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(w,i),m=0;m<w.length;m++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(b[parseInt(S.toString(),10)],i));break;case"Text Box":case"freeText":if(0!==e[parseInt(i.toString(),10)].freeTextAnnotation.length)for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(w,i),m=0;m<w.length;m++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(b[parseInt(S.toString(),10)],i));break;case"sticky":if(0!==e[parseInt(i.toString(),10)].stickyNotesAnnotation.length)for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(w,i),m=0;m<w.length;m++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(b[parseInt(S.toString(),10)],i));break;case"signature":if(0!==e[parseInt(i.toString(),10)].signatureAnnotation.length)for(m=0;m<w.length;m++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(b[parseInt(S.toString(),10)],i),!0);break;case"Ink":case"ink":if(0!==e[parseInt(i.toString(),10)].signatureInkAnnotation.length)for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(w,i),m=0;m<e[parseInt(i.toString(),10)].annotationOrder[parseInt(S.toString(),10)].length;m++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(b[parseInt(S.toString(),10)],i))}w=[]}this.updateImportedAnnotationsInDocumentCollections(n,i)}if(this.pageCount>0&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&!this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered){var x=this.createAnnotationsCollection();x&&(this.documentAnnotationCollections=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation,x))}}},s.prototype.updateImportedAnnotationsInDocumentCollections=function(e,t){if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[t];if(n){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var r=0;r<e.textMarkupAnnotation.length;r++)n.textMarkupAnnotation.push(e.textMarkupAnnotation[parseInt(r.toString(),10)]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(r=0;r<e.shapeAnnotation.length;r++)n.shapeAnnotation.push(e.shapeAnnotation[parseInt(r.toString(),10)]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(r=0;r<e.measureShapeAnnotation.length;r++)n.measureShapeAnnotation.push(e.measureShapeAnnotation[parseInt(r.toString(),10)]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(r=0;r<e.stampAnnotations.length;r++)n.stampAnnotations.push(e.stampAnnotations[parseInt(r.toString(),10)]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(r=0;r<e.stickyNotesAnnotation.length;r++)n.stickyNotesAnnotation.push(e.stickyNotesAnnotation[parseInt(r.toString(),10)]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(r=0;r<e.freeTextAnnotation.length;r++)n.freeTextAnnotation.push(e.freeTextAnnotation[parseInt(r.toString(),10)]);if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(r=0;r<e.signatureAnnotation.length;r++)n.signatureAnnotation.push(e.signatureAnnotation[parseInt(r.toString(),10)]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(r=0;r<e.signatureInkAnnotation.length;r++)n.signatureInkAnnotation.push(e.signatureInkAnnotation[parseInt(r.toString(),10)]);this.documentAnnotationCollections[parseInt(t.toString(),10)]=n}}},s.prototype.checkDocumentCollectionData=function(e,t){var i;if(t)i=t;else if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[e];n&&(i=st(n))}if(i){var f,r=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),o=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),a=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),l=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),h=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),d=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),p=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),u=window.sessionStorage.getItem(this.documentId+"_annotations_sign");return this.isStorageExceed&&(r=this.annotationStorage[this.documentId+"_annotations_textMarkup"],o=this.annotationStorage[this.documentId+"_annotations_shape"],a=this.annotationStorage[this.documentId+"_annotations_shape_measure"],l=this.annotationStorage[this.documentId+"_annotations_stamp"],h=this.annotationStorage[this.documentId+"_annotations_sticky"],d=this.annotationStorage[this.documentId+"_annotations_freetext"],p=this.annotationStorage[this.documentId+"_annotations_ink"],u=this.annotationStorage[this.documentId+"_annotations_sign"]),i.textMarkupAnnotation&&0!==i.textMarkupAnnotation.length&&r&&(f=JSON.parse(r))&&(i.textMarkupAnnotation=this.findImportedAnnotations(f,i.textMarkupAnnotation,e)),i.shapeAnnotation&&0!==i.shapeAnnotation.length&&o&&(f=JSON.parse(o))&&(i.shapeAnnotation=this.findImportedAnnotations(f,i.shapeAnnotation,e)),i.measureShapeAnnotation&&0!==i.measureShapeAnnotation.length&&a&&(f=JSON.parse(a))&&(i.measureShapeAnnotation=this.findImportedAnnotations(f,i.measureShapeAnnotation,e)),i.stampAnnotations&&0!==i.stampAnnotations.length&&l&&(f=JSON.parse(l))&&(i.stampAnnotations=this.findImportedAnnotations(f,i.stampAnnotations,e)),i.stickyNotesAnnotation&&0!==i.stickyNotesAnnotation.length&&h&&(f=JSON.parse(h))&&(i.stickyNotesAnnotation=this.findImportedAnnotations(f,i.stickyNotesAnnotation,e)),i.freeTextAnnotation&&0!==i.freeTextAnnotation.length&&d&&(f=JSON.parse(d))&&(i.freeTextAnnotation=this.findImportedAnnotations(f,i.freeTextAnnotation,e)),i.signatureInkAnnotation&&0!==i.signatureInkAnnotation.length&&p&&(f=JSON.parse(p))&&(i.signatureInkAnnotation=this.findImportedAnnotations(f,i.signatureInkAnnotation,e)),i.signatureAnnotation&&0!==i.signatureAnnotation.length&&u&&(f=JSON.parse(p))&&(i.signatureAnnotation=this.findImportedAnnotations(f,i.signatureAnnotation,e)),i}},s.prototype.findImportedAnnotations=function(e,t,i){for(var n=null,r=0;r<e.length;r++)e[parseInt(r.toString(),10)].pageIndex===i&&(n=e[parseInt(r.toString(),10)].annotations);if(n)for(var o=0;o<n.length;o++)for(var a=0;a<t.length;a++)n[parseInt(o.toString(),10)].annotName===t[parseInt(a.toString(),10)].AnnotName&&(t.splice(a,1),a-=1);return n=null,t},s.prototype.drawPageAnnotations=function(e,t,i){if(i&&(e=e[parseInt(t.toString(),10)]),e&&!e.annotationOrder){var r=["freeTextAnnotation","measureShapeAnnotation","shapeAnnotation","signatureAnnotation","signatureInkAnnotation","stampAnnotations","stickyNotesAnnotation","textMarkupAnnotation"].find(function(g){return e[g]});r&&(e.annotationOrder=e[r])}if(e){for(var o=e.annotationOrder,a=[],l=!0,h=0;h<o.length;h++){var d=o[parseInt(h.toString(),10)].AnnotType?o[parseInt(h.toString(),10)].AnnotType:o[parseInt(h.toString(),10)].AnnotationType;a.push(o[parseInt(h.toString(),10)]);var p=void 0,u=void 0;switch(d){case"textMarkup":l=!1,p=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),this.isStorageExceed&&(p=this.annotationStorage[this.documentId+"_annotations_textMarkup"]),p&&(u=JSON.parse(p))&&(a=this.checkAnnotationCollections(u,a,t)),e.textMarkupAnnotation=this.checkAnnotationCommentsCollections(e.textMarkupAnnotation,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,a,null,!0);break;case"shape":l=!1,p=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),this.isStorageExceed&&(p=this.annotationStorage[this.documentId+"_annotations_shape"]),p&&(u=JSON.parse(p),a=this.checkAnnotationCollections(u,a,t)),e.shapeAnnotation=this.checkAnnotationCommentsCollections(e.shapeAnnotation,t),this.pdfViewer.annotationModule.renderAnnotations(t,a,null,null,null,!0);break;case"shape_measure":l=!1,p=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),this.isStorageExceed&&(p=this.annotationStorage[this.documentId+"_annotations_shape_measure"]),p&&(u=JSON.parse(p),a=this.checkAnnotationCollections(u,a,t)),e.measureShapeAnnotation=this.checkAnnotationCommentsCollections(e.measureShapeAnnotation,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,a,null,null,!0);break;case"stamp":p=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),this.isStorageExceed&&(p=this.annotationStorage[this.documentId+"_annotations_stamp"]),p&&(u=JSON.parse(p),a=this.checkAnnotationCollections(u,a,t)),e.stampAnnotations=this.checkAnnotationCommentsCollections(e.stampAnnotations,t),this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(a,t,null,!0);break;case"Text Box":case"freeText":p=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),this.isStorageExceed&&(p=this.annotationStorage[this.documentId+"_annotations_freetext"]),p&&(u=JSON.parse(p),a=this.checkAnnotationCollections(u,a,t)),e.freeTextAnnotation=this.checkAnnotationCommentsCollections(e.freeTextAnnotation,t),this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(a,t,!0);break;case"sticky":p=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),this.isStorageExceed&&(p=this.annotationStorage[this.documentId+"_annotations_sticky"]),p&&(u=JSON.parse(p),a=this.checkAnnotationCollections(u,a,t)),e.stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e.stickyNotesAnnotation,t),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(a,t);break;case"signature":p=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),(u=JSON.parse(p))&&(e.signatureAnnotation=this.checkSignatureCollections(u,a,t)),this.signatureModule.renderExistingSignature(a,t,!0);break;case"Ink":case"ink":p=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),this.isStorageExceed&&(p=this.annotationStorage[this.documentId+"_annotations_ink"]),p&&(u=JSON.parse(p),a=this.checkAnnotationCollections(u,a,t)),e.signatureInkAnnotation=this.checkAnnotationCommentsCollections(e.signatureInkAnnotation,t),this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(a,t,!0)}a=[]}if(l){var f=this.getElement("_annotationCanvas_"+t);this.pdfViewer.drawing.refreshCanvasDiagramLayer(f,t)}}},s.prototype.checkSignatureCollections=function(e,t,i){for(var n=null,r=0;r<e.length;r++)e[parseInt(r.toString(),10)].pageIndex===i&&(n=e[parseInt(r.toString(),10)].annotations);if(n)for(var o=0;o<n.length;o++)for(var a=0;a<t.length;a++)n[parseInt(o.toString(),10)].signatureName===t[parseInt(a.toString(),10)].SignatureName&&(t.splice(a,1),a-=1);return n=null,t},s.prototype.checkAnnotationCollections=function(e,t,i){for(var n=null,r=0;r<e.length;r++)e[parseInt(r.toString(),10)].pageIndex===i&&(n=e[parseInt(r.toString(),10)].annotations);if(n)for(var o=0;o<n.length;o++)for(var a=0;a<t.length;a++)n[parseInt(o.toString(),10)].annotName===t[parseInt(a.toString(),10)].AnnotName&&(t.splice(a,1),a-=1);return n=null,t},s.prototype.checkAnnotationCommentsCollections=function(e,t){if(this.annotationComments){var i=this.annotationComments[t];if(i=this.selectAnnotationCollections(i))for(var n=0;n<i.length;n++)for(var r=0;r<e.length;r++)i[parseInt(n.toString(),10)].AnnotName===e[parseInt(r.toString(),10)].AnnotName&&(e.splice(r,1),r-=1);i=null}return e},s.prototype.selectAnnotationCollections=function(e){var t=[];if(e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)t.push(e.textMarkupAnnotation[parseInt(i.toString(),10)]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)t.push(e.shapeAnnotation[parseInt(i.toString(),10)]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)t.push(e.measureShapeAnnotation[parseInt(i.toString(),10)]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)t.push(e.stampAnnotations[parseInt(i.toString(),10)]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)t.push(e.stickyNotesAnnotation[parseInt(i.toString(),10)]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)t.push(e.freeTextAnnotation[parseInt(i.toString(),10)]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)t.push(e.signatureInkAnnotation[parseInt(i.toString(),10)])}return t},s.prototype.saveImportedAnnotations=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),i=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),r=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),o=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),a=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),l=window.sessionStorage.getItem(this.documentId+"_annotations_sign");if(this.isStorageExceed&&(e=this.annotationStorage[this.documentId+"_annotations_textMarkup"],t=this.annotationStorage[this.documentId+"_annotations_shape"],i=this.annotationStorage[this.documentId+"_annotations_shape_measure"],n=this.annotationStorage[this.documentId+"_annotations_stamp"],r=this.annotationStorage[this.documentId+"_annotations_sticky"],o=this.annotationStorage[this.documentId+"_annotations_freetext"],a=this.annotationStorage[this.documentId+"_annotations_ink"],l=this.annotationStorage[this.documentId+"_annotations_sign"]),this.downloadCollections={textMarkupObject:e,shapeObject:t,measureShapeObject:i,stampObject:n,stickyObject:r,freeTextObject:o,inkObject:a,signatureObject:l},this.documentAnnotationCollections)for(var h=0;h<this.pageCount;h++)if(this.documentAnnotationCollections[parseInt(h.toString(),10)]){var d=st(this.documentAnnotationCollections[h]);d=this.checkDocumentCollectionData(h,d),this.savePageAnnotations(d,h)}},s.prototype.savePageAnnotations=function(e,t){if(0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(e.textMarkupAnnotation[parseInt(i.toString(),10)],t);if(0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(e.shapeAnnotation[parseInt(i.toString(),10)],t);if(0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(e.measureShapeAnnotation[parseInt(i.toString(),10)],t);if(0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(e.stampAnnotations[parseInt(i.toString(),10)],t);if(0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(e.stickyNotesAnnotation[parseInt(i.toString(),10)],t);if(0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(e.freeTextAnnotation[parseInt(i.toString(),10)],t);if(0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(e.signatureInkAnnotation[parseInt(i.toString(),10)],t)},s.prototype.updateDocumentAnnotationCollections=function(){window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),this.downloadCollections&&(this.isStorageExceed?(this.annotationStorage[this.documentId+"_annotations_textMarkup"]=this.downloadCollections.textMarkupObject,this.annotationStorage[this.documentId+"_annotations_shape"]=this.downloadCollections.shapeObject,this.annotationStorage[this.documentId+"_annotations_shape_measure"]=this.downloadCollections.measureShapeObject,this.annotationStorage[this.documentId+"_annotations_stamp"]=this.downloadCollections.stampObject,this.annotationStorage[this.documentId+"_annotations_sticky"]=this.downloadCollections.stickyObject,this.annotationStorage[this.documentId+"_annotations_freetext"]=this.downloadCollections.freeTextObject,this.annotationStorage[this.documentId+"_annotations_ink"]=this.downloadCollections.inkObject):(this.downloadCollections.textMarkupObject&&window.sessionStorage.setItem(this.documentId+"_annotations_textMarkup",this.downloadCollections.textMarkupObject),this.downloadCollections.shapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape",this.downloadCollections.shapeObject),this.downloadCollections.measureShapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape_measure",this.downloadCollections.measureShapeObject),this.downloadCollections.stampObject&&window.sessionStorage.setItem(this.documentId+"_annotations_stamp",this.downloadCollections.stampObject),this.downloadCollections.stickyObject&&window.sessionStorage.setItem(this.documentId+"_annotations_sticky",this.downloadCollections.stickyObject),this.downloadCollections.freeTextObject&&window.sessionStorage.setItem(this.documentId+"_annotations_freetext",this.downloadCollections.freeTextObject),this.downloadCollections.inkObject&&window.sessionStorage.setItem(this.documentId+"_annotations_ink",this.downloadCollections.inkObject)))},s.prototype.createAnnotationJsonData=function(){var t,i,n,r,o,a,l,h,e={};if(this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()&&(this.isJsonExported=!0,t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations()),this.isShapeAnnotationModule()&&(this.isJsonExported=!0,i=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations()),this.isCalibrateAnnotationModule()&&(this.isJsonExported=!0,n=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations()),this.isStampAnnotationModule()&&(r=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations()),this.isCommentAnnotationModule()&&(o=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations()),this.isFreeTextAnnotationModule()&&(a=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations()),this.isInkAnnotationModule()&&(h=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature()),this.pdfViewer.isSignatureEditable)l=this.signatureModule.saveSignature();else{for(var d=new Array,p=0;p<this.pageCount;p++)d[parseInt(p.toString(),10)]=[];l=JSON.stringify(d)}for(var u=0;u<this.pageCount;u++){var f={textMarkupAnnotation:JSON.parse(t)[parseInt(u.toString(),10)],shapeAnnotation:JSON.parse(i)[parseInt(u.toString(),10)],measureShapeAnnotation:JSON.parse(n)[parseInt(u.toString(),10)],stampAnnotations:JSON.parse(r)[parseInt(u.toString(),10)],stickyNotesAnnotation:JSON.parse(o)[parseInt(u.toString(),10)],freeTextAnnotation:JSON.parse(a)[parseInt(u.toString(),10)],signatureAnnotation:JSON.parse(l)[parseInt(u.toString(),10)],signatureInkAnnotation:JSON.parse(h)[parseInt(u.toString(),10)]};e[parseInt(u.toString(),10)]=f}return JSON.stringify(e)},s.prototype.combineImportedData=function(e,t){for(var i=0;i<this.pageCount;i++)if(t[parseInt(i.toString(),10)])if(e[parseInt(i.toString(),10)])t[parseInt(i.toString(),10)].textMarkupAnnotation&&0!==t[parseInt(i.toString(),10)].textMarkupAnnotation.length&&(e[parseInt(i.toString(),10)].textMarkupAnnotation?(t[parseInt(i.toString(),10)].textMarkupAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].textMarkupAnnotation,t[parseInt(i.toString(),10)].textMarkupAnnotation,i),0!==t[parseInt(i.toString(),10)].textMarkupAnnotation.length&&(e[parseInt(i.toString(),10)].textMarkupAnnotation=e[parseInt(i.toString(),10)].textMarkupAnnotation.concat(t[parseInt(i.toString(),10)].textMarkupAnnotation))):e[parseInt(i.toString(),10)].textMarkupAnnotation=t[parseInt(i.toString(),10)].textMarkupAnnotation),t[parseInt(i.toString(),10)].shapeAnnotation&&0!==t[parseInt(i.toString(),10)].shapeAnnotation.length&&(e[parseInt(i.toString(),10)].shapeAnnotation?(t[parseInt(i.toString(),10)].shapeAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].shapeAnnotation,t[parseInt(i.toString(),10)].shapeAnnotation,i),0!==t[parseInt(i.toString(),10)].shapeAnnotation.length&&(e[parseInt(i.toString(),10)].shapeAnnotation=e[parseInt(i.toString(),10)].shapeAnnotation.concat(t[parseInt(i.toString(),10)].shapeAnnotation))):e[parseInt(i.toString(),10)].shapeAnnotation=t[parseInt(i.toString(),10)].shapeAnnotation),t[parseInt(i.toString(),10)].measureShapeAnnotation&&0!==t[parseInt(i.toString(),10)].measureShapeAnnotation.length&&(e[parseInt(i.toString(),10)].measureShapeAnnotation?(t[parseInt(i.toString(),10)].measureShapeAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].measureShapeAnnotation,t[parseInt(i.toString(),10)].measureShapeAnnotation,i),0!==t[parseInt(i.toString(),10)].measureShapeAnnotation.length&&(e[parseInt(i.toString(),10)].measureShapeAnnotation=e[parseInt(i.toString(),10)].measureShapeAnnotation.concat(t[parseInt(i.toString(),10)].measureShapeAnnotation))):e[parseInt(i.toString(),10)].measureShapeAnnotation=t[parseInt(i.toString(),10)].measureShapeAnnotation),t[parseInt(i.toString(),10)].stampAnnotations&&0!==t[parseInt(i.toString(),10)].stampAnnotations.length&&(e[parseInt(i.toString(),10)].stampAnnotations?(t[parseInt(i.toString(),10)].stampAnnotations=this.checkImportedData(e[parseInt(i.toString(),10)].stampAnnotations,t[parseInt(i.toString(),10)].stampAnnotations,i),0!==t[parseInt(i.toString(),10)].stampAnnotations.length&&(e[parseInt(i.toString(),10)].stampAnnotations=e[parseInt(i.toString(),10)].stampAnnotations.concat(t[parseInt(i.toString(),10)].stampAnnotations))):e[parseInt(i.toString(),10)].stampAnnotations=t[parseInt(i.toString(),10)].stampAnnotations),t[parseInt(i.toString(),10)].stickyNotesAnnotation&&0!==t[parseInt(i.toString(),10)].stickyNotesAnnotation.length&&(e[parseInt(i.toString(),10)].stickyNotesAnnotation?(t[parseInt(i.toString(),10)].stickyNotesAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].stickyNotesAnnotation,t[parseInt(i.toString(),10)].stickyNotesAnnotation,i),0!==t[parseInt(i.toString(),10)].stickyNotesAnnotation.length&&(e[parseInt(i.toString(),10)].stickyNotesAnnotation=e[parseInt(i.toString(),10)].stickyNotesAnnotation.concat(t[parseInt(i.toString(),10)].stickyNotesAnnotation))):e[parseInt(i.toString(),10)].stickyNotesAnnotation=t[parseInt(i.toString(),10)].stickyNotesAnnotation),t[parseInt(i.toString(),10)].freeTextAnnotation&&0!==t[parseInt(i.toString(),10)].freeTextAnnotation.length&&(e[parseInt(i.toString(),10)].freeTextAnnotation?(t[parseInt(i.toString(),10)].freeTextAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].freeTextAnnotation,t[parseInt(i.toString(),10)].freeTextAnnotation,i),0!==t[parseInt(i.toString(),10)].freeTextAnnotation.length&&(e[parseInt(i.toString(),10)].freeTextAnnotation=e[parseInt(i.toString(),10)].freeTextAnnotation.concat(t[parseInt(i.toString(),10)].freeTextAnnotation))):e[parseInt(i.toString(),10)].freeTextAnnotation=t[parseInt(i.toString(),10)].freeTextAnnotation),t[parseInt(i.toString(),10)].signatureInkAnnotation&&0!==t[parseInt(i.toString(),10)].signatureInkAnnotation.length&&(e[parseInt(i.toString(),10)].signatureInkAnnotation?(t[parseInt(i.toString(),10)].signatureInkAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].signatureInkAnnotation,t[parseInt(i.toString(),10)].signatureInkAnnotation,i),0!==t[parseInt(i.toString(),10)].signatureInkAnnotation.length&&(e[parseInt(i.toString(),10)].signatureInkAnnotation=e[parseInt(i.toString(),10)].signatureInkAnnotation.concat(t[parseInt(i.toString(),10)].signatureInkAnnotation))):e[parseInt(i.toString(),10)].signatureInkAnnotation=t[parseInt(i.toString(),10)].signatureInkAnnotation);else{var n={textMarkupAnnotation:t[parseInt(i.toString(),10)].textMarkupAnnotation,shapeAnnotation:t[parseInt(i.toString(),10)].shapeAnnotation,measureShapeAnnotation:t[parseInt(i.toString(),10)].measureShapeAnnotation,stampAnnotations:t[parseInt(i.toString(),10)].stampAnnotations,stickyNotesAnnotation:t[parseInt(i.toString(),10)].stickyNotesAnnotation,freeTextAnnotation:t[parseInt(i.toString(),10)].freeTextAnnotation,signatureInkAnnotation:t[parseInt(i.toString(),10)].signatureInkAnnotation};e[parseInt(i.toString(),10)]=n}return e},s.prototype.updateExportItem=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),i=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),r=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),o=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),a=!1,l=window.sessionStorage.getItem(this.documentId+"_annotations_ink");return this.pdfViewer.isSignatureEditable&&window.sessionStorage.getItem(this.documentId+"_annotations_sign")&&(a=!0),!!(e||t||i||n||r||o||this.isImportAction||this.isStorageExceed||a||l)},s.prototype.isFreeTextAnnotation=function(e){var t=!1;return e&&e.length>0&&(t=e.some(function(i){return"FreeText"===i.shapeAnnotationType&&"Text Box"===i.subject})),t},s.prototype.checkImportedData=function(e,t,i){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(e[parseInt(n.toString(),10)].AnnotName===t[parseInt(r.toString(),10)].AnnotName){for(var o=this.pdfViewer.annotationCollection.length,a=0;a<o;a++)if(this.pdfViewer.annotationCollection[parseInt(a.toString(),10)].annotationId===t[parseInt(r.toString(),10)].AnnotName){this.pdfViewer.annotationCollection[parseInt(a.toString(),10)].comments=this.pdfViewer.annotationModule.getAnnotationComments(t[parseInt(r.toString(),10)].Comments,t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)].Author),this.pdfViewer.annotationCollection[parseInt(a.toString(),10)].review={state:t[parseInt(r.toString(),10)].State,stateModel:t[parseInt(r.toString(),10)].StateModel,modifiedDate:t[parseInt(r.toString(),10)].ModifiedDate,author:t[parseInt(r.toString(),10)].Author},this.pdfViewer.annotationCollection[parseInt(a.toString(),10)].note=t[parseInt(r.toString(),10)].Note;var l=this.pdfViewer.annotationCollection[parseInt(a.toString(),10)];"shape"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.shapeAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].shapeAnnotation[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(r.toString(),10)],l,"_annotations_shape")):"textMarkup"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.textMarkupAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].textMarkupAnnotation[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(r.toString(),10)],l,"_annotations_textMarkup")):"shape_measure"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.measureAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].measureShapeAnnotation[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(r.toString(),10)],l,"_annotations_shape_measure")):"stamp"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.stampAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].stampAnnotations[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(r.toString(),10)],l,"_annotations_stamp")):"freeText"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.freeTextAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].freeTextAnnotation[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(r.toString(),10)],l,"_annotations_freetext")):"ink"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.inkAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].signatureInkAnnotation[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(r.toString(),10)],l,"_annotations_ink")):"sticky"===e[parseInt(n.toString(),10)].AnnotType&&(this.documentAnnotationCollections[parseInt(i.toString(),10)].stickyNotesAnnotation[parseInt(n.toString(),10)]=t[parseInt(r.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(r.toString(),10)],l,"_annotations_sticky"));break}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentControlPanel(t[parseInt(r.toString(),10)],i+1,null,null,!0),t.splice(r,1),r-=1}if(this.annotationComments){var h=this.annotationComments[i];if(h=this.selectAnnotationCollections(h))for(n=0;n<h.length;n++)for(r=0;r<t.length;r++)h[parseInt(n.toString(),10)].AnnotName===t[parseInt(r.toString(),10)].AnnotName&&(t.splice(r,1),r-=1)}return t},s.prototype.updateAnnotationsInSessionStorage=function(e,t,i){var n=window.sessionStorage.getItem(this.documentId+i),r=JSON.parse(n);if(r){for(var o=0;o<r.length;o++)if(r[parseInt(o.toString(),10)].annotations)for(var a=0;a<r[parseInt(o.toString(),10)].annotations.length;a++)if(r[parseInt(o.toString(),10)].annotations[parseInt(a.toString(),10)].annotName===e.AnnotName){r[parseInt(o.toString(),10)].annotations[parseInt(a.toString(),10)].comments=t.comments,r[parseInt(o.toString(),10)].annotations[parseInt(a.toString(),10)].review=t.review,r[parseInt(o.toString(),10)].annotations[parseInt(a.toString(),10)].note=t.note;break}window.sessionStorage.setItem(this.documentId+i,JSON.stringify(r))}},s.prototype.checkAnnotationWidth=function(e){for(var n,r,o,a,l=0;l<e.length;l++)n?(n>e[parseInt(l.toString(),10)].x?n=e[parseInt(l.toString(),10)].x:r<e[parseInt(l.toString(),10)].x&&(r=e[parseInt(l.toString(),10)].x),o>e[parseInt(l.toString(),10)].y?o=e[parseInt(l.toString(),10)].y:a<e[parseInt(l.toString(),10)].y&&(a=e[parseInt(l.toString(),10)].y)):(n=e[parseInt(l.toString(),10)].x,r=e[parseInt(l.toString(),10)].x,o=e[parseInt(l.toString(),10)].y,a=e[parseInt(l.toString(),10)].y);return{width:r-n,height:a-o}},s.prototype.deleteAnnotations=function(){if(this.pdfViewer.annotationModule){this.pdfViewer.annotations=[],this.pdfViewer.zIndexTable=[],this.pdfViewer.annotationCollection=[],this.pdfViewer.signatureCollection=[];var e=this.createAnnotationsCollection();this.annotationComments=e,this.documentAnnotationCollections=e,this.annotationRenderredList=[],window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink");for(var t=0;t<this.pageCount;t++){this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t);var i=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));i&&i.remove();var n=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer");n&&0===n.childElementCount&&(n.style.display="none",document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="block"))}this.isImportedAnnotation=!1,this.isImportAction=!1,this.importedAnnotation=[],this.annotationPageList=[],this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers=[],this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber=[],this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[],this.isAnnotationCollectionRemoved=!0}},s.prototype.createAnnotationsCollection=function(e,t){var i=[];if(t){var r={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};(i={})[parseInt(e.toString(),10)]=r}else for(var n=0;n<this.pageCount;n++)i.push(r={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]});return i},s.prototype.addAnnotation=function(e){var i,t={};if(e){var n=!1,r=1;e.shapeAnnotationType||e.author?(n=!0,i=this.createAnnotationsCollection(e.pageNumber,!0)):e.length?(r=e.length,i=this.createAnnotationsCollection()):(n=!0,i=this.createAnnotationsCollection(e.pageNumber,!0));for(var o=0;o<r;o++){var a;a=n?e:e[parseInt(o.toString(),10)];var l={};if(l.ShapeAnnotationType=a.shapeAnnotationType,l.AnnotationAddMode=a.annotationAddMode,l.Author=a.author,l.AnnotationSelectorSettings=a.annotationSelectorSettings,l.AnnotationSettings=a.annotationSettings,l.PageNumber=a.pageNumber,l.ModifiedDate=a.modifiedDate,l.Subject=a.subject,l.Note=a.note,l.AnnotName=a.annotationId,l.IsCommentLock=a.isCommentLock,l.Comments=a.comments,a.comments&&a.comments.length>0){for(var h=[],d=0;d<a.comments.length;d++)h.push(this.updateComments(a,a.comments[parseInt(d.toString(),10)]));l.Comments=h}if(a.review&&(l.State=a.review.state,l.StateModel=a.review.stateModel),l.CustomData=a.customData,l.Opacity=a.opacity,"textMarkup"===a.shapeAnnotationType){if(l.AnnotType="textMarkup",l.Color=a.color,l.IsMultiSelect=a.isMultiSelect,l.TextMarkupAnnotationType=a.textMarkupAnnotationType,l.TextMarkupContent=a.textMarkupContent,l.TextMarkupStartIndex=a.textMarkupStartIndex,l.TextMarkupEndIndex=a.textMarkupEndIndex,a.rect&&(l.Rect=this.convertBounds(a.rect,!0)),a.bounds&&a.bounds.length>=1){var p=new Array;for(d=0;d<a.bounds.length;d++)p.push(this.convertBounds(a.bounds[parseInt(d.toString(),10)]));l.Bounds=p}i[a.pageNumber].textMarkupAnnotation.push(l)}else if("sticky"===a.shapeAnnotationType)l.AnnotType="sticky",l.Icon="Comment",l.Bounds=this.convertBounds(a.bounds),l.StrokeColor=a.strokeColor,l.Color=a.color,i[a.pageNumber].stickyNotesAnnotation.push(l);else if("FreeText"===a.shapeAnnotationType)l.AnnotType="freeText",l.Name=a.annotationId,l.MarkupText=a.dynamicText,l.Text=a.dynamicText,l.Note=a.dynamicText,l.TextAlign=a.textAlign,l.Thickness=a.thicknes,l.StrokeColor=a.strokeColor,l.FillColor=a.fillColor,l.FontColor=a.fontColor,l.FontSize=a.fontSize,l.FontFamily=a.fontFamily,l.Rotate=a.rotateAngle,l.Bounds=this.convertBounds(a.bounds),l.Font={Name:a.fontFamily,Size:a.fontSize,Bold:a.font.isBold,Italic:a.font.isItalic,Strikeout:a.font.isStrikeout,Underline:a.font.isUnderline},i[a.pageNumber].freeTextAnnotation.push(l);else if("stamp"===a.shapeAnnotationType){var u;l.AnnotType="stamp",l.Icon=a.icon,l.isDynamic=!1,l.Rect=this.convertBounds(a.bounds,!1,!0),l.RotateAngle=a.rotateAngle,l.FillColor=a.fillColor,l.StrokeColor=a.strokeColor,l.StampAnnotationType=a.stampAnnotationType,l.CreationDate=a.creationDate,"image"===a.stampAnnotationType&&((u=[]).push({imagedata:a.stampAnnotationPath}),l.Apperarance=u),a.isDynamicStamp&&(l.IsDynamic=!0,l.StrokeColor=a.stampFillcolor,(u=[]).push({type:"string",text:a.dynamicText,currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",baseFontName:"Helvetica-BoldOblique",fontSize:10,isImport:!0}),l.Apperarance=u),i[a.pageNumber].stampAnnotations.push(l)}else if("Ink"===a.shapeAnnotationType||"Signature"===a.shapeAnnotationType)l.StrokeColor=a.strokeColor,l.FillColor=a.fillColor,l.Thickness=a.thickness,l.Bounds=this.convertBounds(a.bounds),l.PathData=a.data,l.pageIndex=a.pageNumber,"Ink"===a.shapeAnnotationType&&(l.AnnotType="Ink",l.IsPathData=!0,i[a.pageNumber].signatureInkAnnotation.push(l)),"Signature"===a.shapeAnnotationType&&(l.AnnotType="Signature",l.SignatureName=a.annotationId,l.IsSignature=!0,i[a.pageNumber].signatureAnnotation.push(l));else if("Line"===a.shapeAnnotationType||"LineWidthArrowHead"===a.shapeAnnotationType||"Polyline"===a.shapeAnnotationType||"Polygon"===a.shapeAnnotationType||"Polyline"===a.shapeAnnotationType||"Circle"===a.shapeAnnotationType||"Oval"===a.shapeAnnotationType||"Rectangle"===a.shapeAnnotationType||"Square"===a.shapeAnnotationType||"Ellipse"===a.shapeAnnotationType){if(l.AnnotType="shape",l.StrokeColor=a.strokeColor,l.FillColor=a.fillColor,l.Thickness=a.thickness,l.BorderStyle=a.borderStyle,l.BorderDashArray=a.borderDashArray,l.RotateAngle=a.rotateAngle,l.IsCloudShape=a.isCloudShape,l.CloudIntensity=a.cloudIntensity,l.RectangleDifference=a.rectangleDifference,l.LineHeadStart=a.lineHeadStart,l.LineHeadEnd=a.lineHeadEnd,l.IsLocked=a.isLocked,l.EnableShapeLabel=a.enableShapeLabel,l.LabelContent=a.labelContent,l.LabelFillColor=a.labelFillColor,l.LabelBorderColor=a.labelBorderColor,l.FontColor=a.fontColor,l.FontSize=a.fontSize,l.LabelBounds=this.convertBounds(a.labelBounds),l.LabelSettings=a.labelSettings,l.Bounds=this.convertBounds(a.bounds),l.LeaderLength=a.leaderLength,l.LeaderLineExtenstion=a.leaderLineExtension,a.vertexPoints&&a.vertexPoints.length>=1){var g=new Array;for(d=0;d<a.vertexPoints.length;d++)g.push(this.convertVertexPoints(a.vertexPoints[parseInt(d.toString(),10)]));l.VertexPoints=g}if(l.EnableShapeLabel=a.enableShapeLabel,"Distance calculation"===a.subject||"Perimeter calculation"===a.subject||"Area calculation"===a.subject||"Radius calculation"===a.subject||"Volume calculation"===a.subject){l.AnnotType="shape_measure";var m=a.calibrate;m&&(l.Calibrate={Ratio:m.ratio,X:[{Unit:m.x[0].unit,ConversionFactor:m.x[0].conversionFactor,FractionalType:m.x[0].fractionalType,Denominator:m.x[0].denominator,FormatDenominator:m.x[0].formatDenominator}],Distance:[{Unit:m.distance[0].unit,ConversionFactor:m.distance[0].conversionFactor,FractionalType:m.distance[0].fractionalType,Denominator:m.distance[0].denominator,FormatDenominator:m.distance[0].formatDenominator}],Area:[{Unit:m.area[0].unit,ConversionFactor:m.area[0].conversionFactor,FractionalType:m.area[0].fractionalType,Denominator:m.area[0].denominator,FormatDenominator:m.area[0].formatDenominator}],Angle:null,Volume:null,TargetUnitConversion:m.targetUnitConversion,Depth:m.depth}),l.Indent=a.indent,l.Caption=a.caption,l.CaptionPosition=a.captionPosition,l.LeaderLineExtension=a.leaderLineExtension,l.LeaderLength=a.leaderLength,l.LeaderLineOffset=a.leaderLineOffset,i[a.pageNumber].measureShapeAnnotation.push(l)}else i[a.pageNumber].shapeAnnotation.push(l)}}t.pdfAnnotation=i,this.pdfViewer.importAnnotation(t)}},s.prototype.convertBounds=function(e,t,i){if(e){if(t)return{left:e.left?e.left:e.Left?e.Left:0,right:e.right?e.right:e.Right?e.Right:0,bottom:e.bottom?e.bottom:e.Bottom?e.Bottom:0,top:e.top?e.top:e.Top?e.Top:0};var l=e.x?e.x:e.left?e.left:e.Left?e.Left:0,h=e.y?e.y:e.top?e.top:e.Top?e.Top:0,d=e.width?e.width:e.Width?e.Width:0,p=e.height?e.height:e.Height?e.Height:0;return i?{X:this.ConvertPixelToPoint(l),Y:this.ConvertPixelToPoint(h),Left:this.ConvertPixelToPoint(l),Top:this.ConvertPixelToPoint(h),Height:this.ConvertPixelToPoint(p),Width:this.ConvertPixelToPoint(d)}:{X:l,Y:h,Left:l,Top:h,Height:p,Width:d}}},s.prototype.ConvertPixelToPoint=function(e){return.75*e},s.prototype.convertVertexPoints=function(e){if(e){var t=e.x?e.x:e.X?e.X:0,i=e.y?e.y:e.Y?e.Y:0;return{X:t,Y:i,Left:t,Top:i}}},s.prototype.updateComments=function(e,t){if(e&&t){var i={};return i.ShapeAnnotationType=e.shapeAnnotationType,i.Author=t.author,i.AnnotationSelectorSettings=e.annotationSelectorSettings,i.AnnotationSettings=e.annotationSettings,i.PageNumber=e.pageNumber,i.ModifiedDate=t.modifiedDate,i.Subject=e.subject,i.Note=t.note,i.AnnotName=t.annotName,i.Comments=t.comments,i.State=t.review.state,i.StateModel=t.review.stateModel,i.CustomData=e.customData,i.IsLock=t.isLock,i}},s.prototype.removeFocus=function(){if(X()){var e=this.pdfViewer.element.querySelector("#"+this.pdfViewer.element.id+"_totalPage");e&&e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.blur()}},s.prototype.updateDocumentEditedProperty=function(e){this.pdfViewer.allowServerDataBinding=!0,this.pdfViewer.isDocumentEdited=e,this.pdfViewer.allowServerDataBinding=!1},s.prototype.getWindowDevicePixelRatio=function(){var e=window.devicePixelRatio;return E.isDevice?e=2:e},s.prototype.getZoomRatio=function(e){var t=this.getZoomFactor(),i=e||1,r=this.getWindowDevicePixelRatio();return!E.isDevice||E.isDevice&&t<=.7?i*r:i},s.prototype.importJsonForRotatedDocuments=function(e,t,i,n){var r=Math.abs(e),o=this.pageSize[parseInt(t.toString(),10)];return n!==o.rotation?(r=this.getRotationAngle(n,t),this.isPageRotated=!0):(r=0,this.isPageRotated=!1),1===r?{X:o.width-i.Y-i.Height,Y:i.X,Height:i.Width,Width:i.Height}:2===r?{X:o.width-i.X-i.Width,Y:o.height-i.Y-i.Height,Height:i.Height,Width:i.Width}:3===r?{X:i.Y,Y:o.height-i.X-i.Width,Height:i.Width,Width:i.Height}:i},s.prototype.getRotationAngle=function(e,t){var i=this.pageSize[parseInt(t.toString(),10)];if(0===(e=Math.abs(e)))return i.rotation;if(1===e||90===e){if(0==i.rotation)return 3;if(2===i.rotation)return 1;if(3===i.rotation)return 2}else if(2===e||180===e){if(0==i.rotation)return 2;if(1===i.rotation)return 3;if(3===i.rotation)return 1}else if(3===e||270===e){if(0==i.rotation)return 1;if(2===i.rotation)return 3;if(1===i.rotation)return 2}},s.prototype.calculateVertexPoints=function(e,t,i,n){var l,h,r=Math.abs(e),o=[],a=this.pageSize[parseInt(t.toString(),10)];r=n!==a.rotation?this.getRotationAngle(n,t):0;for(var p=0;p<i.length;p++)1===r?(l=i[parseInt(p.toString(),10)].Y?a.width-i[parseInt(p.toString(),10)].Y:a.width-i[parseInt(p.toString(),10)].y,h=i[parseInt(p.toString(),10)].X?i[parseInt(p.toString(),10)].X:i[parseInt(p.toString(),10)].x,o.push({x:l,y:h})):2===r?(l=i[parseInt(p.toString(),10)].X?a.width-i[parseInt(p.toString(),10)].X:a.width-i[parseInt(p.toString(),10)].x,h=i[parseInt(p.toString(),10)].Y?a.height-i[parseInt(p.toString(),10)].Y:a.height-i[parseInt(p.toString(),10)].y,o.push({x:l,y:h})):3==r?(l=i[parseInt(p.toString(),10)].Y?i[parseInt(p.toString(),10)].Y:i[parseInt(p.toString(),10)].y,h=i[parseInt(p.toString(),10)].X?a.height-i[parseInt(p.toString(),10)].X:a.height-i[parseInt(p.toString(),10)].x,o.push({x:l,y:h})):(l=i[parseInt(p.toString(),10)].X?i[parseInt(p.toString(),10)].X:i[parseInt(p.toString(),10)].x,h=i[parseInt(p.toString(),10)].Y?i[parseInt(p.toString(),10)].Y:i[parseInt(p.toString(),10)].y,o.push({x:l,y:h}));return o},s.prototype.isSignaturePathData=function(e){return/^([Mm]\s*\d+(\.\d+)?\s*,\s*\d+(\.\d+)?(\s+[Ll]\s*\d+(\.\d+)?\s*,\s*\d+(\.\d+)?)*\s*)+$/.test(e)},s.prototype.isSignatureImageData=function(e){return/^data:image\/([a-z]+);base64,/.test(e)},s.prototype.getSanitizedString=function(e){return e.replace(/[\x00-\x1F\x7F]/g,function(i){return"\\u"+i.charCodeAt(0).toString(16).padStart(4,"0")})},s}(),NLe=function(){function s(e,t){var i=this;this.textBoundsArray=[],this.characterBound=[],this.closeNotification=function(){i.notifyDialog.hide()},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.addTextLayer=function(e,t,i,n){var o;return document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e)||((o=F("div",{id:this.pdfViewer.element.id+"_textLayer_"+e,className:"e-pv-text-layer"})).style.width=t+"px",o.style.height=i+"px",n&&n.appendChild(o)),this.pdfViewerBase.applyElementStyles(o,e),o},s.prototype.renderTextContents=function(e,t,i,n,r){var d,p,o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),a=F("canvas"),l=[],h=[];i.length>1&&(0===i[0].Width&&i.length>2?(d=i[1].Y,p=i[1].Height):(d=i[0].Y,p=i[0].Height));var u=0;if(a&&o&&0===o.childNodes.length)for(var f=0;f<t.length;f++)if(t[f].includes("\r\n")||t[f].includes("\x02")||f==i.length-1||0!==n||r){l.push(i[parseInt(f.toString(),10)]),h.push(t[parseInt(f.toString(),10)]),d>i[parseInt(f.toString(),10)].Y&&0!==i[parseInt(f.toString(),10)].Width&&(d=i[parseInt(f.toString(),10)].Y),p<i[parseInt(f.toString(),10)].Height&&0!==i[parseInt(f.toString(),10)].Width&&(p=i[parseInt(f.toString(),10)].Height);for(var g=0;g<l.length;g++){var m=l[parseInt(g.toString(),10)],y=F("div",{id:this.pdfViewer.element.id+"_text_"+e+"_"+u,className:"e-pv-text",attrs:{tabindex:"-1"}}),b=h[parseInt(g.toString(),10)];" "===b&&g!=l.length-1&&0!=g&&(m.Height=l[g-1].Height,m.Y=l[g-1].Y),y.textContent=b.replace(/&nbsp;/g," ")," "!==h[g].replace(/  +/g," ")&&(y.style.whiteSpace="pre"),0===m.Width&&g!=l.length-1&&0!=g&&l[g+1].X-(l[g-1].X+l[g-1].Width)<30&&!h[g-1].includes("\r\n")&&!t[parseInt(g.toString(),10)].includes("\x02")&&(m.Width=l[g+1].X-(l[g-1].X+l[g-1].Width),m.X=l[g-1].X+l[g-1].Width,m.Width<0?m.Width=0:y.style.whiteSpace="pre"),(0!=g||l.length-1==0||m.Y-d>20&&0!=m.Width)&&0!=u&&(i[u-1].Y-i[parseInt(u.toString(),10)].Y>11||i[parseInt(u.toString(),10)].Y-i[u-1].Y>11)&&" "!=h[parseInt(g.toString(),10)]&&(d=l[parseInt(g.toString(),10)].Y,p=l[parseInt(g.toString(),10)].Height),m&&(270!==m.Rotation&&(m.Y=d,m.Height=p),this.setStyleToTextDiv(y,m.X,m.Y,m.Bottom,m.Width,m.Height,m.Rotation)),this.setTextElementProperties(y);var S=a.getContext("2d");S.font=y.style.fontSize+" "+y.style.fontFamily;var I=S.measureText(h[parseInt(g.toString(),10)].replace(/(\r\n|\n|\r)/gm,"")).width;if(m){var x;x=90===m.Rotation?m.Height*this.pdfViewerBase.getZoomFactor()/I:m.Width*this.pdfViewerBase.getZoomFactor()/I,this.applyTextRotation(x,y,n,m.Rotation,m)}o.appendChild(y),this.resizeExcessDiv(o,y),this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&"e-pdfviewer-formFields"!==y.className&&"e-pdfviewer-signatureformfields"!==y.className&&"e-pdfviewer-signatureformfields-signature"!==y.className&&y.classList.add("e-pv-cursor"),u++}l=[],h=[],f<i.length-1&&(0!==i[f+1].Width||c(i[f+2])?(d=i[f+1].Y,p=i[f+1].Height):(d=i[f+2].Y,p=i[f+2].Height))}else l.push(i[parseInt(f.toString(),10)]),h.push(t[parseInt(f.toString(),10)]),d>i[parseInt(f.toString(),10)].Y&&0!==i[parseInt(f.toString(),10)].Width&&(d=i[parseInt(f.toString(),10)].Y),p<i[parseInt(f.toString(),10)].Height&&0!==i[parseInt(f.toString(),10)].Width&&(p=i[parseInt(f.toString(),10)].Height)},s.prototype.resizeTextContents=function(e,t,i,n,r){var o=this.pdfViewerBase.getElement("_textLayer_"+e),a=F("canvas");if(a)for(var l=0;l<o.childNodes.length;l++){var h=void 0,d=this.pdfViewerBase.getElement("_text_"+e+"_"+l);if(c(d))break;i&&(h=i[parseInt(l.toString(),10)])&&this.setStyleToTextDiv(d,h.X,h.Y,h.Bottom,h.Width,h.Height,h.Rotation),this.setTextElementProperties(d);var p=a.getContext("2d");p.font=d.style.fontSize+" "+d.style.fontFamily;var u=void 0;if(t){var f=t[parseInt(l.toString(),10)];f&&(u=p.measureText(f.replace(/(\r\n|\n|\r)/gm,"")).width)}else u=p.measureText(d.textContent.replace(/(\r\n|\n|\r)/gm,"")).width;if(h){var g;g=90===h.Rotation?h.Height*this.pdfViewerBase.getZoomFactor()/u:h.Width*this.pdfViewerBase.getZoomFactor()/u,this.applyTextRotation(g,d,n,h.Rotation,h)}this.resizeExcessDiv(o,d)}else o.parentElement.removeChild(o);this.pdfViewer.textSearch&&(r||this.pdfViewer.textSearch.resizeSearchElements(e))},s.prototype.applyTextRotation=function(e,t,i,n,r){var o="scaleX("+e+")";0===i?n>=0&&n<90?t.style.transform=o:((90==n||270==n)&&(270==n?(t.style.left=r.X*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(r.Y+r.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.height=r.Height*this.pdfViewerBase.getZoomFactor()+"px",t.style.fontSize=r.Height*this.pdfViewerBase.getZoomFactor()+"px"):(t.style.left=(r.X+r.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=r.Y*this.pdfViewerBase.getZoomFactor()+"px",t.style.height=r.Width*this.pdfViewerBase.getZoomFactor()+"px",t.style.fontSize=r.Width*this.pdfViewerBase.getZoomFactor()+"px",t.style.transformOrigin="0% 0%")),t.style.transform="rotate("+n+"deg) "+o):1===i?t.style.transform=0===n?"rotate(90deg) "+o:-90===n?o:"rotate("+(n+=90)+"deg) "+o:2===i?t.style.transform=0===n?"rotate(180deg) "+o:180===n?o:"rotate("+n+"deg) "+o:3===i&&(t.style.transform=0===n?"rotate(-90deg) "+o:90===n?o:"rotate("+n+"deg) "+o)},s.prototype.setTextElementProperties=function(e){e.style.fontFamily="serif",e.style.transformOrigin="0%"},s.prototype.resizeTextContentsOnZoom=function(e){var r,t=window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId()+"_"+e+"_"+this.getPreviousZoomFactor()),i=[],n=[];if(t){var o=JSON.parse(t);i=o.textBounds,n=o.textContent,r=o.rotation}if(0!==i.length)this.textBoundsArray.push({pageNumber:e,textBounds:i}),this.resizeTextContents(e,n,i,r);else{var a=this.textBoundsArray.filter(function(l){return l.pageNumber===e});a&&0!==a.length&&this.resizeTextContents(e,null,i=a[0].textBounds,r)}},s.prototype.resizeExcessDiv=function(e,t){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();(n.width+n.left>=i.width+i.left||n.width>i.width)&&(t.style.width="auto",t.style.width=t.clientWidth+"px")},s.prototype.clearTextLayers=function(e){var t=this.pdfViewerBase.currentPageNumber-3;t=t>0?t:0;var i=this.pdfViewerBase.currentPageNumber+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),r=0;r<n.length;r++)if(n[parseInt(r.toString(),10)].style.display="block",this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){var o=parseInt(n[parseInt(r.toString(),10)].id.split("_textLayer_")[1]);t+1<=o&&o<=i-1||this.removeElement(n[parseInt(r.toString(),10)],e)}else this.pdfViewerBase.getPinchZoomed(),this.removeElement(n[parseInt(r.toString(),10)],e)},s.prototype.removeElement=function(e,t){t?this.removeForeignObjects(e):E.isIE?e.parentElement?e.parentElement.removeChild(e):e.parentNode&&e.parentNode.removeChild(e):e.remove()},s.prototype.removeForeignObjects=function(e){var t=e.getElementsByClassName("foreign-object");if(t)for(var i=0;i<t.length;i++)if(E.isDevice){if("e-pv-text-layer"===t[parseInt(i.toString(),10)].parentElement.className&&"e-pv-checkbox-outer-div"!==t[0].parentElement.className)e.removeChild(t[0]);else if("e-pv-checkbox-outer-div"===t[parseInt(i.toString(),10)].parentElement.className){var n=document.getElementById(t[0].parentElement.id);n&&n.parentElement.remove()}}else"e-pv-text-layer"===t[parseInt(i.toString(),10)].parentElement.className&&e.removeChild(t[0])},s.prototype.convertToSpan=function(e,t,i,n,r,o){var a=this.pdfViewerBase.getElement("_text_"+e+"_"+t),l=r.substring(i,n),h=document.createTextNode(l);if(o){var d=F("span");d.className=o+" e-pv-text",d.appendChild(h),a.appendChild(d)}else a.appendChild(h)},s.prototype.applySpanForSelection=function(e,t,i,n,r,o){if(this.pdfViewer.textSelectionModule)for(var a=e;a<=t;a++){var l=void 0,h=void 0,d=this.pdfViewerBase.getElement("_textLayer_"+a).childNodes;a===e?(l=i,h=d.length-1):a===t?(l=0,h=n):(l=0,h=d.length-1),e===t&&(l=i,h=n);for(var p=l;p<=h;p++){var u=this.pdfViewerBase.getElement("_text_"+a+"_"+p),f=void 0,g=void 0,m=void 0;if(u&&u.textContent){m=u.textContent.length;var y=u.textContent;u.textContent="",p===l?(g=m,this.convertToSpan(a,p,0,f=a===e?r:0,y,null)):p===h&&a===t?(f=0,g=o):(f=0,g=m),l===h&&e===t&&(f=r,g=o),this.convertToSpan(a,p,f,g,y,"e-pv-maintaincontent"),p===h&&a===t&&this.convertToSpan(a,p,g,y.length,y,null)}}}},s.prototype.clearDivSelection=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),t=0;t<e.length;t++)for(var i=e[parseInt(t.toString(),10)].childNodes,n=0;n<i.length;n++){var r=i[parseInt(n.toString(),10)];if("e-pdfviewer-formFields"!==r.className&&"e-pdfviewer-signatureformfields"!==r.className&&"e-pdfviewer-signatureformfields-signature"!==r.className){var o=r.textContent;(r.childNodes.length>1||1===r.childNodes.length&&"SPAN"===r.childNodes[0].tagName)&&(r.textContent="",r.textContent=o)}}},s.prototype.setStyleToTextDiv=function(e,t,i,n,r,o,a){var l;e.style.left=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=i*this.pdfViewerBase.getZoomFactor()+"px",l=90===a?r*this.pdfViewerBase.getZoomFactor():o*this.pdfViewerBase.getZoomFactor(),e.style.height=l+"px",e.style.fontSize=l+"px"},s.prototype.getTextSelectionStatus=function(){return!!this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection},s.prototype.modifyTextCursor=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),i=0;i<t.length;i++)for(var n=t[parseInt(i.toString(),10)].childNodes,r=0;r<n.length;r++){var o=n[parseInt(r.toString(),10)];e&&"e-pdfviewer-formFields"!==o.className&&"e-pdfviewer-signatureformfields"!==o.className&&"e-pdfviewer-signatureformfields-signature"!==o.className?o.classList.add("e-pv-cursor"):o.classList.remove("e-pv-cursor")}},s.prototype.isBackWardSelection=function(e){var t=e.anchorNode.compareDocumentPosition(e.focusNode),i=!1;return(!t&&e.anchorOffset>e.focusOffset||t===Node.DOCUMENT_POSITION_PRECEDING)&&(i=!0),i},s.prototype.getPageIndex=function(e){var i=e.parentElement;return i||(i=e.parentNode),"e-pv-text-layer"===i.className?parseInt(e.id.split("_text_")[1]):parseInt(i.id.split("_text_")[1])},s.prototype.getTextIndex=function(e,t){var n=e.parentElement;return n||(n=e.parentNode),"e-pv-text-layer"===n.className?parseInt(e.id.split("_text_"+t+"_")[1]):parseInt(n.id.split("_text_"+t+"_")[1])},s.prototype.getPreviousZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.previousZoomFactor:1},s.prototype.getTextSearchStatus=function(){return!!this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch},s.prototype.createNotificationPopup=function(e){var t=this;if(!this.isMessageBoxOpen)if(X()){var n=document.getElementById(this.pdfViewer.element.id+"_notification_popup_content");n&&(n.textContent=e,n.innerHTML=e),this.pdfViewer.textSearchModule&&(this.pdfViewer.textSearch.isMessagePopupOpened=!1),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenNotificationPopup",e)}else{var i=F("div",{id:this.pdfViewer.element.id+"_notify",className:"e-pv-notification-popup"});this.pdfViewerBase.viewerContainer.appendChild(i),this.notifyDialog=new Or({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("PdfViewer"),buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeNotification.bind(this)}],content:'<div class="e-pv-notification-popup-content" tabindex = "0">'+e+"</div>",target:this.pdfViewer.element,beforeClose:function(){if(t.notifyDialog.destroy(),t.pdfViewer.element)try{t.pdfViewer.element.removeChild(i)}catch{i.parentElement.removeChild(i)}t.pdfViewer.textSearchModule&&(t.pdfViewer.textSearch.isMessagePopupOpened=!1),t.isMessageBoxOpen=!1}}),this.pdfViewer.enableRtl&&(this.notifyDialog.enableRtl=!0),this.notifyDialog.appendTo(i),this.isMessageBoxOpen=!0}},s}(),FLe=function(){function s(e,t){this.copyContextMenu=[],this.contextMenuList=[],this.pdfViewer=e,this.pdfViewerBase=t,this.copyContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Cut"),iconCss:"e-pv-cut-icon"},{text:this.pdfViewer.localeObj.getConstant("Copy"),iconCss:"e-pv-copy-icon"},{text:this.pdfViewer.localeObj.getConstant("Highlight context"),iconCss:"e-pv-highlight-icon"},{text:this.pdfViewer.localeObj.getConstant("Underline context"),iconCss:"e-pv-underline-icon"},{text:this.pdfViewer.localeObj.getConstant("Strikethrough context"),iconCss:"e-pv-strikethrough-icon"},{text:this.pdfViewer.localeObj.getConstant("Paste"),iconCss:"e-pv-paste-icon"},{text:this.pdfViewer.localeObj.getConstant("Delete Context"),iconCss:"e-pv-delete-icon"},{text:this.pdfViewer.localeObj.getConstant("Scale Ratio"),iconCss:"e-pv-scale-ratio-icon"},{separator:!0,id:e.element.id+"_context_menu_comment_separator"},{text:this.pdfViewer.localeObj.getConstant("Comment"),iconCss:"e-pv-comment-icon"},{separator:!0,id:e.element.id+"_context_menu_separator"},{text:this.pdfViewer.localeObj.getConstant("Properties"),iconCss:"e-pv-property-icon"}]}return s.prototype.createContextMenu=function(){this.contextMenuElement=F("ul",{id:this.pdfViewer.element.id+"_context_menu",className:"e-pv-context-menu"}),this.pdfViewer.element.appendChild(this.contextMenuElement),this.contextMenuObj=new dp({target:"#"+this.pdfViewerBase.viewerContainer.id,items:this.copyContextMenu,beforeOpen:this.contextMenuOnBeforeOpen.bind(this),select:this.onMenuItemSelect.bind(this),created:this.contextMenuOnCreated.bind(this)}),this.pdfViewer.enableRtl&&(this.contextMenuObj.enableRtl=!0),this.contextMenuObj.appendTo(this.contextMenuElement),this.contextMenuObj.animationSettings.effect=E.isDevice&&!this.pdfViewer.enableDesktopMode?"ZoomIn":"SlideDown"},s.prototype.contextMenuOnCreated=function(e){var t=[this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context")];this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule||this.contextMenuObj.enableItems(t,!1)},s.prototype.setTarget=function(e){var t=null;return e.event&&e.event.target&&(this.currentTarget=t=e.event.target),t},s.prototype.contextMenuOnBeforeOpen=function(e){this.pdfViewerBase.preventContextmenu&&(e.cancel=!0);var t=this.setTarget(e),i=0!==this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.selectedItems.annotations[0].annotationSettings:null;if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&t&&"free-text-input"===t.className&&"TEXTAREA"===t.tagName&&(this.pdfViewerBase.isFreeTextContextMenu=!0),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.remove("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context")],!0),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.contextMenuObj),this.pdfViewer.textSelectionModule||this.pdfViewerBase.isShapeBasedAnnotationsEnabled()){if(e.event||this.pdfViewerBase.isTouchDesignerMode){var n=this.pdfViewerBase.isClickWithinSelectionBounds(e.event);if(this.pdfViewerBase.isFreeTextContextMenu)this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Delete Context")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide"),this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected?(this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Copy")],!0),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut")],!0)):(this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Copy")],!1),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut")],!1),window.getSelection().removeAllRanges()),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Paste")],!(!this.pdfViewer.annotation.freeTextAnnotationModule||""===this.pdfViewer.annotation.freeTextAnnotationModule.selectedText));else if(n&&this.pdfViewer.textSelectionModule)!e.event.target.classList.contains("e-pv-maintaincontent")&&e.event.target.classList.contains("e-pv-text")||e.event.target.classList.contains("e-pv-text-layer")?this.pdfViewerBase.checkIsNormalText()&&(e.cancel=!0):(E.isIE||"edge"===E.info.name)&&e.event.target.classList.contains("e-pv-page-container")&&(e.cancel=!0),this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide");else if(0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)if(0===this.pdfViewer.selectedItems.annotations.length||"Path"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||i.isLock)if(0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode)this.onOpeningForShape(!0),!c(this.pdfViewer.toolbar)&&!c(this.pdfViewer.toolbar.formDesignerToolbarModule)&&this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0);else{var r=this.pdfViewerBase.designerModetarget,o=this.pdfViewer.annotationModule;e.event&&e.event.target&&(r=e.event.target),this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(r.classList.contains("e-pv-text-layer")||r.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation||this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(r.classList.contains("e-pv-text-layer")||r.classList.contains("e-pv-text"))?this.onOpeningForShape(!1):this.pdfViewerBase.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode&&!i?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Comment")],!1)):o&&o.textMarkupAnnotationModule&&o.textMarkupAnnotationModule.currentTextMarkupAnnotation&&!o.textMarkupAnnotationModule.currentTextMarkupAnnotation.annotationSettings.isLock?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Scale Ratio")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Comment")],!1)):e.cancel=!0}else this.onOpeningForShape(!0);else this.onOpeningForShape(!1,!0)}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):this.hideContextItems();this.enableCommentPanelItem()}else e.cancel=!0;"None"===this.pdfViewer.contextMenuOption?e.cancel=!0:this.contextMenuItems(e),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.restrictContextMenu()&&(e.cancel=!0),this.pdfViewerBase.isTouchDesignerMode=!1},s.prototype.contextMenuItems=function(e){if(this.pdfViewer.contextMenuSettings.contextMenuItems.length){for(var t=[],n=(this.contextMenuCollection(),this.contextMenuObj.getRootElement()),r=0;r<this.pdfViewer.contextMenuSettings.contextMenuItems.length;r++)for(var o=0;o<this.contextMenuList.length;o++){var a=this.contextMenuList[parseInt(o.toString(),10)].text;switch(a){case"Highlight":a="Highlight context";break;case"Underline":a="Underline context";break;case"Strikethrough":a="Strikethrough context";break;case"Delete":a="Delete Context";break;case"Scale Ratio":a="Scale Ratio";break;case"Comment":this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide");break;case"Properties":this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide")}var l=this.contextMenuList[parseInt(o.toString(),10)].text;if(0===r&&l!==xo[this.pdfViewer.contextMenuSettings.contextMenuItems[parseInt(r.toString(),10)]]&&t.push(l),r>0&&l===xo[this.pdfViewer.contextMenuSettings.contextMenuItems[parseInt(r.toString(),10)]])for(var h=0;h<t.length;h++)if(t[parseInt(h.toString(),10)]===l)if(this.pdfViewer.disableContextMenuItems&&this.pdfViewer.disableContextMenuItems.length>0){for(var d=!1,p=0;p<this.pdfViewer.disableContextMenuItems.length;p++)t[parseInt(h.toString(),10)]===xo[this.pdfViewer.disableContextMenuItems[parseInt(p.toString(),10)]]&&(d=!0);d||t.splice(h,1)}else t.splice(h,1)}var u=this.processLocaleContent(t);this.contextMenuObj.hideItems(u),0===this.getEnabledItemCount(n)&&(e.cancel=!0)}},s.prototype.processLocaleContent=function(e){var t=[];if(e.length>0)for(var i=0;i<e.length;i++){var n=e[parseInt(i.toString(),10)];switch(n){case"Highlight":n="Highlight context";break;case"Underline":n="Underline context";break;case"Strikethrough":n="Strikethrough context";break;case"Delete":n="Delete Context";break;case"ScaleRatio":n="Scale Ratio"}t.push(this.pdfViewer.localeObj.getConstant(n))}return t},s.prototype.contextMenuCollection=function(){return this.contextMenuList=[{text:"Cut"},{text:"Copy"},{text:"Highlight"},{text:"Underline"},{text:"Strikethrough"},{text:"Paste"},{text:"Delete"},{text:"ScaleRatio"},{text:"Comment"},{text:"Properties"}]},s.prototype.getEnabledItemCount=function(e){for(var t=this.copyContextMenu.length,i=e.children,n=0;n<i.length;n++){var r=i[n];(r.classList.contains("e-menu-hide")||r.classList.contains("e-disabled"))&&(t-=1)}return t},s.prototype.hideContextItems=function(){0===this.pdfViewer.selectedItems.annotations.length&&(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"))},s.prototype.enableCommentPanelItem=function(){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Comment")],!!this.pdfViewer.enableCommentPanel),0!==this.pdfViewer.selectedItems.formFields.length&&this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Comment")],!1)},s.prototype.onOpeningForShape=function(e,t){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Paste")],!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.isShapeCopied)||!(!this.pdfViewer.formDesigner||!this.pdfViewer.formDesigner.isShapeCopied)),this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Scale Ratio")]),e?0===this.pdfViewer.selectedItems.annotations.length||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Properties")])):c(t)&&"Image"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&!this.pdfViewer.selectedItems.annotations[0].id.startsWith("stamp")?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide")):this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Properties")]):t?"SignatureField"===this.pdfViewer.selectedItems.annotations[0].annotName||"InitialField"===this.pdfViewer.selectedItems.annotations[0].annotName||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].annotName?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide"))},s.prototype.OnItemSelected=function(e){this.pdfViewerBase.OnItemSelected(e)},s.prototype.onMenuItemSelect=function(e){this.pdfViewerBase.OnItemSelected(e.item.text)},s.prototype.destroy=function(){this.contextMenuObj&&(this.previousAction="",this.contextMenuObj.destroy())},s.prototype.close=function(){this.contextMenuObj.close()},s.prototype.open=function(e,t,i){this.contextMenuObj.open(e,t,i)},s}(),hs=function(){function s(e){this.type="POST",this.mode=!0,this.contentType="application/json;charset=UTF-8",this.retryTimeout=0,this.pdfViewer=e,this.retryCount=e.retryCount,this.retryStatusCodes=e.retryStatusCodes,this.retryTimeout=1e3*e.retryTimeout}return s.prototype.send=function(e){var t=this;this.httpRequest=new XMLHttpRequest,this.httpRequest.timeout=this.retryTimeout,this.mode?this.sendRequest(e):setTimeout(function(){t.sendRequest(e)}),this.httpRequest.onreadystatechange=function(){var i=!1,n=t.pdfViewer.viewerBase;n&&n.isPasswordAvailable&&""===n.passwordData&&(i=!0,t.retryCount=0),t.retryCount>0&&(i=t.resendRequest(t,e,!1)),i||t.stateChange(t)},this.httpRequest.ontimeout=function(){var i=!1,n=t.pdfViewer.viewerBase;n&&n.isPasswordAvailable&&""===n.passwordData&&(i=!0,t.retryCount=0),t.retryCount>0&&(i=t.resendRequest(t,e,!0)),i||t.stateChange(t)},this.httpRequest.onerror=function(){t.error(t)}},s.prototype.clear=function(){this.httpRequest&&this.httpRequest.abort(),this.onSuccess=null,this.onFailure=null,this.onError=null},s.prototype.resendRequest=function(e,t,i){var n=!1,r=e.httpRequest.status,o=-1!==this.retryStatusCodes.indexOf(r);if(4===e.httpRequest.readyState&&200===r){var a=void 0;if((a=null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText)&&"object"!=typeof a)try{a=JSON.parse(a)}catch{("Document stream does not exist in the cache"===a||"Document Reference pointer does not exist in the cache"===a)&&(n=!0)}}return(o||n||i)&&(n=!0,this.retryCount--,e.pdfViewer.fireAjaxRequestFailed(r,e.httpRequest.statusText,t.action,!0),e.send(t)),n},s.prototype.sendRequest=function(e){this.httpRequest.open(this.type,this.url,this.mode),this.httpRequest.withCredentials=this.pdfViewer.ajaxRequestSettings.withCredentials,this.httpRequest.setRequestHeader("Content-Type",this.contentType),e=this.addExtraData(e),this.setCustomAjaxHeaders(),null!==this.responseType&&(this.httpRequest.responseType=this.responseType),this.httpRequest.send(JSON.stringify(e))},s.prototype.addExtraData=function(e){return this.pdfViewer.viewerBase.ajaxData="",this.pdfViewer.fireAjaxRequestInitiate(e),this.pdfViewer.viewerBase.ajaxData&&""!==this.pdfViewer.viewerBase.ajaxData&&(e=this.pdfViewer.viewerBase.ajaxData),e},s.prototype.stateChange=function(e){var t=e.httpRequest.status,i=t.toString().split("")[0];4===e.httpRequest.readyState&&200===t?e.successHandler({name:"onSuccess",data:null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText,readyState:e.httpRequest.readyState,status:e.httpRequest.status}):4!==e.httpRequest.readyState||"4"!==i&&"5"!==i||e.failureHandler({name:"onFailure",status:e.httpRequest.status,statusText:e.httpRequest.statusText})},s.prototype.error=function(e){e.errorHandler({name:"onError",status:this.httpRequest.status,statusText:this.httpRequest.statusText})},s.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e),e},s.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(e),e},s.prototype.errorHandler=function(e){return this.onError&&this.onError(e),e},s.prototype.setCustomAjaxHeaders=function(){for(var e=0;e<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;e++)this.httpRequest.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(e.toString(),10)].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(e.toString(),10)].headerValue)},s}(),RLe=function(){function s(e,t){var i=this;this.mouseMoving=!0,this.canvasTouched=!1,this.imageSignatureDataUrl="",this.drawSignatureDataUrl="",this.newObject=[],this.outputString="",this.drawOutputString="",this.imageOutputString="",this.signaturecollection=[],this.outputcollection=[],this.signAnnotationIndex=[],this.fontsign=[],this.signfontStyle=[],this.isSaveSignature=!1,this.isSaveInitial=!1,this.isInitialFiledSaveSignature=!1,this.isSignatureFieldsSaveSignature=!1,this.issaveTypeSignature=!1,this.issaveImageSignature=!1,this.issaveTypeInitial=!1,this.issaveImageInitial=!1,this.saveSignatureTypeString="",this.saveInitialTypeString="",this.saveTypeString="",this.signatureTypeString="",this.initialTypeString="",this.saveUploadString="",this.saveSignatureUploadString="",this.saveInitialUploadString="",this.signatureUploadString="",this.initialUploadString="",this.clearUploadString=!1,this.textValue="",this.signatureDrawString="",this.initialDrawString="",this.saveSignatureString="",this.saveInitialString="",this.saveImageString="",this.signatureImageString="",this.initialImageString="",this.maxSaveLimit=5,this.select=function(n){this.canvasTouched&&(this.mouseMoving=!0,this.canvasTouched=!1),n.isSwiped&&"Draw"==this.signaturetype&&this.mouseMoving&&(n.cancel=!0,this.mouseMoving=!1)},this.addStampImage=function(n){if(null!==n.target.files[0]){var o=n.target.files[0];if("image"===o.type.split("/")[0]){var a=new FileReader;a.onload=function(l){var h=document.getElementById(i.pdfViewer.element.id+"_signatureuploadCanvas_"),d=h.getContext("2d"),p=new Image,u=i;p.onload=function(){document.getElementById(i.pdfViewer.element.id+"_e-pv-upload-button").style.visibility="hidden",d.drawImage(p,0,0,h.width,h.height),u.enableCreateButton(!1),u.outputString=p.src,u.signatureImageHeight=p.naturalHeight,u.signatureImageWidth=p.naturalWidth},p.src=l.currentTarget.result,u.outputString=l.currentTarget.result,u.switchTabImageSignature=l.currentTarget.result},a.readAsDataURL(o)}}n.target.value="",n.currentTarget.value=""},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createSignaturePanel=function(){var e=this;if(this.imageSignatureDataUrl="",this.drawSignatureDataUrl="",X()){var p=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");p&&(this.pdfViewerBase.pageContainer.querySelector(".e-pv-signature-window")||((n=F("div",{id:this.pdfViewer.element.id+"_signature_window",className:"e-pv-signature-window"})).style.display="block",this.pdfViewerBase.pageContainer.appendChild(n)),p.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),p.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),p.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),p.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),p.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),p.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),p.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),this.clearSignatureCanvas()),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenSignaturePanel",this.pdfViewerBase.isToolbarSignClicked)}else{var n;(n=F("div",{id:this.pdfViewer.element.id+"_signature_window",className:"e-pv-signature-window"})).style.display="block",this.pdfViewerBase.pageContainer.appendChild(n);var o,r=this.createSignatureCanvas();o=this.pdfViewer.localeObj.getConstant(this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?"InitialFieldDialogHeaderText":"SignatureFieldDialogHeaderText":this.pdfViewerBase.isInitialField?"HandwrittenInitialDialogHeaderText":"HandwrittenSignatureDialogHeaderText"),this.signatureDialog?this.signatureDialog.content=r:(this.signatureDialog=new Or({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:o,cssClass:"e-pv-signature-dialog-height",target:this.pdfViewer.element,content:r,width:"750px",visible:!0,allowDragging:!0,beforeClose:function(){e.clearSignatureCanvas(),e.signatureDialog.destroy(),e.signatureDialog=null,e.tabObj&&e.tabObj.destroy();var u=document.getElementById(e.pdfViewer.element.id+"_signature_window");u&&(u.parentNode?u.parentNode.removeChild(u):u.parentElement.removeChild(u)),!e.pdfViewerBase.isToolbarSignClicked&&!e.pdfViewerBase.drawSignatureWithTool&&!c(e.pdfViewer.formFieldsModule.currentTarget)&&e.pdfViewer.fireFocusOutFormField(e.pdfViewer.formFieldsModule.currentTarget.name,""),e.pdfViewerBase.isToolbarSignClicked=!1,e.pdfViewer.formFieldsModule.setFocus()}}),this.signatureDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Clear"),disabled:!0,cssClass:"e-pv-clearbtn"},click:this.clearSignatureCanvas.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-pv-cancelbtn"},click:this.closeSignaturePanel.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Create"),isPrimary:!0,disabled:!0,cssClass:"e-pv-createbtn"},click:this.addSignatureInPage.bind(this)}],this.signatureDialog.appendTo(n)),this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize(),this.pdfViewer.enableRtl&&(this.signatureDialog.enableRtl=this.pdfViewer.enableRtl);var a=this.signatureDialog.content.ej2_instances[0].items[0];if("DRAW"===a.header.label){var l=document.getElementById("checkbox");this.hideSignatureCheckbox(l)}else if("TYPE"===a.header.label){var h=document.getElementById("checkbox1");this.hideSignatureCheckbox(h)}else{var d=document.getElementById("checkbox2");this.hideSignatureCheckbox(d)}}this.drawSavedSignature()},s.prototype.drawSavedSignature=function(){if(!this.pdfViewerBase.isToolbarSignClicked&&(this.isSaveSignature||this.isSaveInitial)){!this.pdfViewerBase.isInitialField&&this.isSaveSignature?this.outputString=this.saveSignatureString:this.pdfViewerBase.isInitialField&&this.isSaveInitial&&(this.outputString=this.saveInitialString);var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_").getContext("2d"),i=new Image;i.onload=function(){t.drawImage(i,0,0)},!this.pdfViewerBase.isInitialField&&this.isSaveSignature?i.src=this.signatureDrawString:this.pdfViewerBase.isInitialField&&this.isSaveInitial&&(i.src=this.initialDrawString);var n=document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox");n&&(n.checked=!0),this.enableCreateButton(!1),this.enableClearbutton(!1)}},s.prototype.drawSavedTypeSignature=function(){var e="";return!this.pdfViewerBase.isToolbarSignClicked&&(this.issaveTypeSignature||this.issaveTypeInitial)&&(e=!this.pdfViewerBase.isInitialField&&this.issaveTypeSignature?this.saveSignatureTypeString:this.saveInitialTypeString),e},s.prototype.drawSavedImageSignature=function(){var e="";return!this.pdfViewerBase.isToolbarSignClicked&&(this.issaveImageSignature||this.issaveImageInitial)&&(e=!this.pdfViewerBase.isInitialField&&this.issaveImageSignature?this.saveSignatureUploadString:this.saveInitialUploadString),e},s.prototype.hideSignatureCheckbox=function(e){this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings&&this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings&&this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewerBase.isInitialField?this.pdfViewer.initialFieldSettings.initialDialogSettings&&this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.signatureFieldSettings.signatureDialogSettings&&this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e)},s.prototype.saveSignatureCheckbox=function(){return!this.pdfViewerBase.isToolbarSignClicked&&(this.pdfViewerBase.isInitialField?(!this.pdfViewer.initialFieldSettings.initialDialogSettings||!this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature)&&this.isInitialFiledSaveSignature:(!this.pdfViewer.signatureFieldSettings.signatureDialogSettings||!this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature)&&this.isSignatureFieldsSaveSignature)},s.prototype.hideCheckboxParent=function(e){e&&(e.parentElement.style.display="none")},s.prototype.saveSignatureImage=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox");if(e&&e.checked){if(""!==this.outputString){this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.saveInitialString=this.outputString):(this.isSaveSignature=!0,this.saveSignatureString=this.outputString);var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=t.toDataURL(),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString}}else this.isSaveSignature&&!this.pdfViewerBase.isInitialField?(this.isSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString=""):this.isSaveInitial&&this.pdfViewerBase.isInitialField&&(this.isSaveInitial=!1,this.saveInitialString="",this.saveImageString="",this.initialImageString=""),this.clearSignatureCanvas()},s.prototype.addSignature=function(e){if(this.pdfViewerBase.isToolbarSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n=this.pdfViewerBase.currentPageNumber-1,r=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,o=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,a=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000",d=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(this.outputString,!0),p=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=p.toDataURL(),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString,this.pdfViewerBase.currentSignatureAnnot={id:"sign"+this.pdfViewerBase.signatureCount,bounds:d,pageIndex:n,data:this.outputString,fontFamily:"Helvetica",fontSize:16,shapeAnnotationType:"HandWrittenSignature",opacity:o,strokeColor:a,thickness:r,signatureName:i};var u=void 0;(u=X()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox"))&&u.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{u=document.getElementById("checkbox");var f=document.getElementById("checkbox1"),g=document.getElementById("checkbox2"),m=!1;m||(p=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),this.saveImageString=p.toDataURL(),u&&(u.checked?(this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.initialDrawString=this.saveImageString,this.saveInitialString=this.outputString):(this.isSaveSignature=!0,this.signatureDrawString=this.saveImageString,this.saveSignatureString=this.outputString),this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!0)):(this.pdfViewerBase.isInitialField?(this.isSaveInitial=!1,this.saveInitialString=""):(this.isSaveSignature=!1,this.saveSignatureString=""),this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!1))),this.saveTypeSignature(f),this.saveUploadSignature(g),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString,this.pdfViewer.formFieldsModule.drawSignature(null,null,this.pdfViewerBase.currentTarget,null),m=!0)}},s.prototype.checkSaveFiledSign=function(e,t){e?this.isInitialFiledSaveSignature=t:this.isSignatureFieldsSaveSignature=t},s.prototype.addSignatureInPage=function(){"Draw"===this.signaturetype?this.addSignature():"Type"===this.signaturetype?this.typeAddSignature():this.imageAddSignature(),this.drawOutputString="",this.imageOutputString=""},s.prototype.typeAddSignature=function(e){if(this.pdfViewerBase.isToolbarSignClicked){var t=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var p,u,r=this.pdfViewerBase.currentPageNumber-1,o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+r),a=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,l=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,h=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000";p=(parseFloat(o.style.width)/2-100)/t,u=(parseFloat(o.style.height)/2-32.5)/t;var m=this.pdfViewerBase.getZoomFactor();this.signtypevalue||this.updateSignatureTypeValue(!0),this.pdfViewerBase.currentSignatureAnnot={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:p/m,top:u/m,x:p/m,y:u/m,width:200,height:65},pageIndex:r,dynamicText:this.signtypevalue,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureText",opacity:l,strokeColor:h,thickness:a,fontSize:16,fontFamily:this.fontName,signatureName:n};var b=void 0;(b=X()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox1"))&&b.checked&&this.addSignatureCollection(),this.signtypevalue="",this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{b=document.getElementById("checkbox");var w=document.getElementById("checkbox1"),S=document.getElementById("checkbox2"),I=!1;if(!I){this.saveDrawSignature(b),this.saveUploadSignature(S);var x=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveTypeString=x.toDataURL(),this.updateSignatureTypeValue(),w&&w.checked?this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.initialImageString=this.saveTypeString,this.saveInitialTypeString=this.textValue,this.issaveTypeInitial=!0):(this.isSaveSignature=!0,this.signatureImageString=this.saveTypeString,this.saveSignatureTypeString=this.textValue,this.issaveTypeSignature=!0):this.pdfViewerBase.isInitialField?(this.isSaveInitial=!1,this.saveInitialTypeString="",this.issaveTypeInitial=!1):(this.isSaveSignature=!1,this.saveSignatureTypeString="",this.issaveTypeSignature=!1),this.pdfViewerBase.isInitialField?this.initialTypeString=this.saveTypeString:this.signatureTypeString=this.saveTypeString,this.pdfViewer.formFieldsModule.drawSignature("Type",this.textValue,this.pdfViewerBase.currentTarget),I=!0,this.hideSignaturePanel()}}},s.prototype.imageAddSignature=function(e){if(this.pdfViewerBase.isToolbarSignClicked){var t=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var p,u,r=this.pdfViewerBase.currentPageNumber-1,o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+r),a=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,l=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,h=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000",f=100,g=0,m=0;this.signatureImageHeight>=this.signatureImageWidth?(g=this.signatureImageHeight/this.signatureImageHeight*f,m=this.signatureImageWidth/this.signatureImageHeight*f):(g=this.signatureImageHeight/this.signatureImageWidth*f,m=this.signatureImageWidth/this.signatureImageWidth*f),p=(parseFloat(o.style.width)/2-m/2)/t,u=(parseFloat(o.style.height)/2-g/2)/t;var y=this.pdfViewerBase.getZoomFactor();this.pdfViewerBase.currentSignatureAnnot={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:p/y,top:u/y,x:p/y,y:u/y,width:m,height:g},pageIndex:r,dynamicText:this.signtypevalue,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureImage",opacity:l,strokeColor:h,thickness:a,fontSize:16,fontFamily:this.fontName,signatureName:n};var w=void 0;(w=X()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox2"))&&w.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{w=document.getElementById("checkbox");var S=document.getElementById("checkbox1"),I=document.getElementById("checkbox2"),x=!1;if(!x){this.saveDrawSignature(w),this.saveTypeSignature(S);var T=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveUploadString=T.toDataURL(),I&&I.checked?this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.initialImageString=this.saveUploadString,this.saveInitialUploadString=this.outputString,this.issaveImageInitial=!0):(this.isSaveSignature=!0,this.signatureImageString=this.saveUploadString,this.saveSignatureUploadString=this.outputString,this.issaveImageSignature=!0):this.pdfViewerBase.isInitialField?(this.isSaveInitial=!1,this.saveInitialUploadString="",this.issaveImageInitial=!1):(this.isSaveSignature=!1,this.saveSignatureUploadString="",this.issaveImageSignature=!1),this.pdfViewerBase.isInitialField?this.initialUploadString=this.saveUploadString:this.signatureUploadString=this.saveUploadString,this.pdfViewer.formFieldsModule.drawSignature("Image","",this.pdfViewerBase.currentTarget),x=!0,this.hideSignaturePanel()}}},s.prototype.saveDrawSignature=function(e){if(e)if(e.checked){if(""!==this.drawOutputString){var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=t.toDataURL(),this.pdfViewerBase.isInitialField?(this.saveInitialString=this.drawOutputString,this.initialDrawString=this.saveImageString):(this.saveSignatureString=this.drawOutputString,this.signatureDrawString=this.saveImageString),this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!0)}}else this.pdfViewerBase.isInitialField?this.saveInitialString="":this.saveSignatureString="",this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!1)},s.prototype.saveTypeSignature=function(e){e&&(e.checked?(this.updateSignatureTypeValue(),""!==this.textValue&&(this.pdfViewerBase.isInitialField?(this.issaveTypeInitial=!0,this.saveInitialTypeString=this.textValue):(this.issaveTypeSignature=!0,this.saveSignatureTypeString=this.textValue))):this.pdfViewerBase.isInitialField?(this.saveInitialTypeString="",this.issaveTypeInitial=!1):(this.saveSignatureTypeString="",this.issaveTypeSignature=!1))},s.prototype.saveUploadSignature=function(e){if(e)if(e.checked){var i=document.getElementById(this.pdfViewer.element.id+"_signatureuploadCanvas_").toDataURL(),n="hidden"===document.getElementById(this.pdfViewer.element.id+"_e-pv-upload-button").style.visibility?i:"";""!==n&&(this.pdfViewerBase.isInitialField?(this.issaveImageInitial=!0,this.saveInitialUploadString=n):(this.issaveImageSignature=!0,this.saveSignatureUploadString=n))}else this.pdfViewerBase.isInitialField?(this.saveInitialUploadString="",this.issaveImageInitial=!1):(this.saveSignatureUploadString="",this.issaveImageSignature=!1)},s.prototype.updateSignatureTypeValue=function(e){var t=document.querySelectorAll(".e-pv-font-sign");if(t)for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)]&&"red"===t[parseInt(i.toString(),10)].style.borderColor){this.pdfViewerBase.isToolbarSignClicked?e?(this.signtypevalue=t[parseInt(i.toString(),10)].textContent,this.outputString=t[parseInt(i.toString(),10)].textContent):this.outputString=t[parseInt(i.toString(),10)].textContent:e?(this.signtypevalue=t[parseInt(i.toString(),10)].textContent,this.textValue=t[parseInt(i.toString(),10)].textContent):this.textValue=t[parseInt(i.toString(),10)].textContent;try{this.fontName=JSON.parse(t[parseInt(i.toString(),10)].style.fontFamily)}catch{this.fontName=t[parseInt(i.toString(),10)].style.fontFamily}}},s.prototype.hideSignaturePanel=function(){this.signatureDialog&&this.signatureDialog.hide()},s.prototype.bindTypeSignatureClickEvent=function(){if(X())for(var e=0;e<4;e++){var t=document.querySelector("#"+this.pdfViewer.element.id+"_font_signature"+e);t&&t.addEventListener("click",this.typeSignatureclicked.bind(this))}},s.prototype.bindDrawSignatureClickEvent=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");e&&(e.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),e.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),e.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),e.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),e.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)))},s.prototype.typeSignatureclicked=function(e){var t=e.target;if(t){for(var i=0;i<4;i++){var n=document.querySelector("#"+this.pdfViewer.element.id+"_font_signature"+i);n&&(n.style.borderColor="")}t.style.borderColor="red",this.outputString=t.textContent;try{this.fontName=JSON.parse(t.style.fontFamily)}catch{this.fontName=t.style.fontFamily}this.enableCreateButton(!1)}},s.prototype.createSignatureCanvas=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),t=document.getElementById(this.pdfViewer.element.id+"Signature_appearance");e&&e.remove(),t&&t.remove();var r,o,a,i=F("div",{id:this.pdfViewer.element.id+"Signature_appearance",className:"e-pv-signature-apperance",styles:"margin-top:30px"}),n=F("canvas",{id:this.pdfViewer.element.id+"_signatureCanvas_",className:"e-pv-signature-canvas"});n.width=this.pdfViewer.element.offsetWidth>750?714:this.pdfViewer.element.offsetWidth-35,n.classList.add("e-pv-canvas-signature"),n.height=305,n.style.height="305px",n.style.border="1px dotted #bdbdbd",n.style.backgroundColor="white",n.style.boxSizing="border-box",n.style.borderRadius="2px",n.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),n.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),n.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),n.addEventListener("mouseleave",this.signaturePanelMouseLeave.bind(this)),n.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),n.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),n.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),i.appendChild(n),a=this.pdfViewer.localeObj.getConstant(this.pdfViewerBase.isToolbarSignClicked&&!this.pdfViewerBase.isInitialField?"Save Signature":this.pdfViewerBase.isInitialField?"Save Initial":"Save Signature"),this.pdfViewer.hideSaveSignature||((o=document.createElement("input")).type="checkbox",o.id="checkbox",i.appendChild(o),(r=new Os({label:a,disabled:!1,checked:!1})).appendTo(o)),this.pdfViewerBase.isInitialField?this.isSaveInitial=this.saveSignatureCheckbox():this.isSaveSignature=this.saveSignatureCheckbox(),(this.isSaveSignature&&!this.pdfViewerBase.isInitialField||this.isSaveInitial&&this.pdfViewerBase.isInitialField)&&(r.checked=!0);var l=F("div",{id:this.pdfViewer.element.id+"type_appearance",className:"e-pv-signature-apperance",styles:"margin-top:6px"}),h=document.createElement("input");this.pdfViewerBase.isInitialField||!this.issaveTypeSignature||this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField&&this.issaveTypeInitial&&!this.pdfViewerBase.isToolbarSignClicked&&(h.value=this.drawSavedTypeSignature()):h.value=this.drawSavedTypeSignature(),h.type="text",h.id=this.pdfViewer.element.id+"_e-pv-Signtext-box",l.appendChild(h);var d=new Hs({placeholder:this.pdfViewer.localeObj.getConstant("Enter Signature as Name"),floatLabelType:"Auto"});d.appendTo(h);var p=F("div",{id:this.pdfViewer.element.id+"_font_appearance",className:"e-pv-font-appearance-style"});p.classList.add("e-pv-canvas-signature"),p.style.height="270px",p.style.border="1px dotted #bdbdbd",p.style.boxSizing="border-box",p.style.borderRadius="2px",p.style.backgroundColor="white",p.style.color="black",p.style.marginTop="8px",p.style.paddingRight="0px",l.appendChild(p),(o=document.createElement("input")).type="checkbox",o.id="checkbox1",l.appendChild(o),(r=new Os({label:a,disabled:!1,checked:!1})).appendTo(o),(this.issaveTypeSignature&&!this.pdfViewerBase.isInitialField&&!this.pdfViewerBase.isToolbarSignClicked||this.issaveTypeInitial&&this.pdfViewerBase.isInitialField&&!this.pdfViewerBase.isToolbarSignClicked)&&(r.checked=!0),d.addEventListener("input",this.renderSignatureText.bind(this)),this.enableCreateButton(!0);var u=F("div",{id:this.pdfViewer.element.id+"Signature_tab"}),f=F("div",{id:this.pdfViewer.element.id+"upload_appearance",className:"e-pv-signature-apperance",styles:"padding-top:30px"}),g=document.createElement("div");g.id=this.pdfViewer.element.id+"_e-pv-upload-button",f.appendChild(g);var m=new li({cssClass:"e-pv-sign-upload",content:this.pdfViewer.localeObj.getConstant("Browse Signature Image")});m.appendTo(g),m.element.style.position="absolute";var y=F("canvas",{id:this.pdfViewer.element.id+"_signatureuploadCanvas_",className:"e-pv-signature-uploadcanvas"});y.width=this.pdfViewer.element.offsetWidth>750?714:this.pdfViewer.element.offsetWidth-35,y.classList.add("e-pv-canvas-signature"),y.height=305,y.style.height="305px",m.element.style.left=y.width/2-50+"px",m.element.style.top=parseFloat(y.style.height)/2+20+"px",y.style.border="1px dotted #bdbdbd",y.style.backgroundColor="white",y.style.boxSizing="border-box",y.style.borderRadius="2px",y.style.zIndex="0";var b="";if(this.pdfViewerBase.isInitialField||!this.issaveImageSignature||this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField&&this.issaveImageInitial&&!this.pdfViewerBase.isToolbarSignClicked&&(b=this.drawSavedImageSignature()):b=this.drawSavedImageSignature(),""!==b&&!this.pdfViewerBase.isToolbarSignClicked){this.clearUploadString=!1;var w=y.getContext("2d"),S=new Image;S.src=b,S.onload=function(){w.drawImage(S,0,0,y.width,y.height)},m.element.style.display="hidden"}f.appendChild(y),(o=document.createElement("input")).type="checkbox",o.id="checkbox2",f.appendChild(o),(r=new Os({label:a,disabled:!1,checked:!1})).appendTo(o),(this.issaveImageSignature&&!this.pdfViewerBase.isInitialField&&!this.pdfViewerBase.isToolbarSignClicked||this.issaveImageInitial&&this.pdfViewerBase.isInitialField&&!this.pdfViewerBase.isToolbarSignClicked)&&(r.checked=!0),g.addEventListener("click",this.uploadSignatureImage.bind(this)),this.signfontStyle=[{FontName:"Helvetica"},{FontName:"Times New Roman"},{FontName:"Courier"},{FontName:"Symbol"}];var I=[];if(this.pdfViewerBase.isToolbarSignClicked&&!c(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts))for(var x=0;x<4;x++)c(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[parseInt(x.toString(),10)])||(this.signfontStyle[parseInt(x.toString(),10)].FontName=this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[parseInt(x.toString(),10)]);for(var T=0;T<this.signfontStyle.length;T++)I[parseInt(T.toString(),10)]=document.createElement("div"),I[parseInt(T.toString(),10)].id="_font_signature"+T,I[parseInt(T.toString(),10)].classList.add("e-pv-font-sign");this.fontsign=I;var N,L=this;return N=this.showHideSignatureTab(this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings&&this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode:this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings&&this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode:this.pdfViewerBase.isInitialField?this.pdfViewer.initialFieldSettings.initialDialogSettings?this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode:7:this.pdfViewer.signatureFieldSettings.signatureDialogSettings?this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode:7,i,l,f),this.tabObj=new $I({selected:function(O){L.handleSelectEvent(O)},selecting:function(O){L.select(O)},items:N}),this.tabObj.appendTo(u),u&&u.lastElementChild&&(u.lastElementChild.style.overflow="hidden"),this.signaturetype="DRAW"===N[0].header.label?"Draw":"TYPE"===N[0].header.label?"Type":"Image",u},s.prototype.handleSelectEvent=function(e){var t="",n=document.getElementById(this.pdfViewer.element.id+"Signature_tab").ej2_instances[0];if(n&&n.items.length>0)for(var r=0;r<n.items.length;r++)n.items[parseInt(r.toString(),10)].header.text===e.selectedItem.textContent&&(t=n.items[parseInt(r.toString(),10)].header.label);if(this.clearSignatureCanvas(e),"draw"===t.toLocaleLowerCase()){this.signaturetype="Draw",this.enableCreateSignatureButton();var a=document.getElementById("checkbox");this.hideSignatureCheckbox(a)}else if("type"===t.toLocaleLowerCase()){var l=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.drawSignatureDataUrl=l.toDataURL(),this.updateSignatureTypeValue(),this.signaturetype="Type",this.enableCreateSignatureButton();var h=document.getElementById("checkbox1");this.hideSignatureCheckbox(h);var d=document.getElementById(this.pdfViewer.element.id+"_e-pv-Signtext-box");this.pdfViewerBase.isInitialField||""===this.saveSignatureTypeString||""===d.value||this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField&&""!==this.saveInitialTypeString&&""!==d.value&&!this.pdfViewerBase.isToolbarSignClicked&&this.renderSignatureText():this.renderSignatureText()}else if("upload"===t.toLocaleLowerCase()){l=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),this.drawSignatureDataUrl=l.toDataURL(),this.signaturetype="Image",this.enableCreateSignatureButton();var p=document.getElementById("checkbox2");this.hideSignatureCheckbox(p);var u=document.getElementById(this.pdfViewer.element.id+"_e-pv-upload-button");""!==this.saveSignatureUploadString&&!this.pdfViewerBase.isInitialField&&!this.clearUploadString&&!this.pdfViewerBase.isToolbarSignClicked&&(this.enableCreateButton(!1),u.style.visibility="hidden",this.outputString=this.saveSignatureUploadString),""!==this.saveInitialUploadString&&this.pdfViewerBase.isInitialField&&!this.clearUploadString&&!this.pdfViewerBase.isToolbarSignClicked&&(this.enableCreateButton(!1),u.style.visibility="hidden",this.outputString=this.saveInitialUploadString)}this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize(),this.drawSignOnTabSwitch(),"upload"===t.toLocaleLowerCase()&&this.imageSignatureDataUrl&&this.imageSignOnTabSwitch()},s.prototype.enableCreateSignatureButton=function(){this.enableCreateButton(this.pdfViewerBase.isToolbarSignClicked||"Type"!==this.signaturetype?""===this.outputString:""===this.textValue)},s.prototype.showHideSignatureTab=function(e,t,i,n){var r=[];return e&Bi.Draw&&r.push({header:{text:this.pdfViewer.localeObj.getConstant("Draw-hand Signature"),label:"DRAW"},content:t}),e&Bi.Text&&r.push({header:{text:this.pdfViewer.localeObj.getConstant("Type Signature"),label:"TYPE"},content:i}),e&Bi.Upload&&r.push({header:{text:this.pdfViewer.localeObj.getConstant("Upload Signature"),label:"UPLOAD"},content:n}),r},s.prototype.createSignatureFileElement=function(){var e=F("input",{id:this.pdfViewer.element.id+"_signElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},s.prototype.uploadSignatureImage=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signElement");e&&e.click()},s.prototype.renderSignatureText=function(){for(var t=document.getElementById(this.pdfViewer.element.id+"_font_appearance"),i=document.getElementById(this.pdfViewer.element.id+"_e-pv-Signtext-box"),n=0;n<this.signfontStyle.length;n++)this.fontsign[parseInt(n.toString(),10)].innerHTML=i.value,this.fontsign[parseInt(n.toString(),10)].style.fontFamily=this.signfontStyle[parseInt(n.toString(),10)].FontName,(""!==this.fontName&&this.signfontStyle[parseInt(n.toString(),10)].FontName===this.fontName||c(this.fontName)&&"Helvetica"===this.signfontStyle[parseInt(n.toString(),10)].FontName)&&(this.fontsign[parseInt(n.toString(),10)].style.borderColor="red"),t.appendChild(this.fontsign[parseInt(n.toString(),10)]);for(n=0;n<this.signfontStyle.length;n++)document.getElementById("_font_signature"+n).addEventListener("click",this.typeSignatureclick.bind(this));this.enableCreateButton(!1),this.enableClearbutton(!1),this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize(),this.drawSignOnTabSwitch()},s.prototype.typeSignatureclick=function(){var e=event.target;document.getElementsByClassName("e-pv-createbtn")[0].disabled=!1;for(var i=0;i<4;i++){var n=document.getElementById("_font_signature"+i);n&&(n.style.borderColor="")}e.style.borderColor="red",this.outputString=e.textContent;try{this.fontName=JSON.parse(e.style.fontFamily)}catch{this.fontName=e.style.fontFamily}},s.prototype.addSignatureCollection=function(e,t){var d,i=-1,n=-1,r=-1,o=-1,a=Cs(this.outputString),l=document.createElement("canvas"),h=l.getContext("2d"),p=this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;if("HandWrittenSignature"===p){if(0!==a.length){for(var u=0;u<a.length;u++){var f=a[u];-1===i?(i=f.x,r=f.x,n=f.y,o=f.y):(i>=(g=f.x)&&(i=g),n>=(m=f.y)&&(n=m),r<=g&&(r=g),o<=m&&(o=m))}var y=r-i,b=o-n,w=y/100,S=b/100,I=0,x=0;e?(l.width=t.currentWidth,l.height=t.currentHeight,w=y/e.width,S=b/e.height,I=e.x-t.currentLeft,x=e.y-t.currentTop):(l.width=100,l.height=100),h.beginPath();for(var T=0;T<a.length;T++){var g=((f=a[T]).x-i)/w+I,m=(f.y-n)/S+x;"M"===f.command?h.moveTo(g,m):"L"===f.command&&h.lineTo(g,m)}h.stroke(),h.closePath(),d=l.toDataURL()}}else d=this.outputString;if(e)this.saveImageString=d;else{var L={};L["sign_"+this.pdfViewerBase.imageCount]=this.outputString,this.outputcollection.push(L);var N=[];N.push({id:"sign_"+this.pdfViewerBase.imageCount,imageData:d,signatureType:p,fontFamily:this.pdfViewerBase.currentSignatureAnnot.fontFamily}),this.signaturecollection.push({image:N,isInitial:this.pdfViewerBase.isInitialField}),this.pdfViewerBase.imageCount++}},s.prototype.getSaveLimit=function(e){return e>this.maxSaveLimit?e=this.maxSaveLimit:e<1&&(e=1),e},s.prototype.RenderSavedSignature=function(){this.pdfViewerBase.signatureCount++;var e=this.pdfViewerBase.getZoomFactor();if(this.pdfViewerBase.isAddedSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var o,a,n=this.pdfViewerBase.currentPageNumber-1,r=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+n),l=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:100,h=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100,d=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,p=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,u=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000";o=(parseFloat(r.style.width)/2-l/2)/e,a=(parseFloat(r.style.height)/2-h/2)/e;for(var f="",g=void 0,m=void 0,y=0;y<this.outputcollection.length;y++)if((w=event.target)&&w.id==="sign_"+y||w&&w.id==="sign_border"+y){f=this.outputcollection[y]["sign_"+y];break}for(var S=0;S<this.signaturecollection.length;S++){var w=event.target,I=this.signaturecollection[parseInt(S.toString(),10)].image[0].id.split("_")[1];if(w&&w.id==="sign_"+I||w&&w.id==="sign_border"+I){g=this.signaturecollection[parseInt(S.toString(),10)].image[0].signatureType,m=this.signaturecollection[parseInt(S.toString(),10)].image[0].fontFamily;break}}if("HandWrittenSignature"===g){var x=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(f,!0);l=x.width?x.width:l,h=x.height?x.height:h}else l=150===l?200:this.pdfViewer.handWrittenSignatureSettings.width,h=100===h?65:this.pdfViewer.handWrittenSignatureSettings.height;this.pdfViewerBase.currentSignatureAnnot={id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:o,y:a,width:l,height:h},pageIndex:n,data:f,shapeAnnotationType:g,opacity:p,fontFamily:m,strokeColor:u,thickness:d,signatureName:i},this.pdfViewerBase.isAddedSignClicked=!1}else this.pdfViewer.formFieldsModule.drawSignature()},s.prototype.updateCanvasSize=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.setTabItemWidth(e);var t=document.getElementById(this.pdfViewer.element.id+"_signatureuploadCanvas_");this.setTabItemWidth(t);var i=document.getElementById(this.pdfViewer.element.id+"_font_appearance");this.setTabItemWidth(i)},s.prototype.setTabItemWidth=function(e){var t=2,o=document.querySelector(".e-dlg-content");if(o){var a=getComputedStyle(o);t=t+parseInt(a.paddingLeft,10)+parseInt(a.paddingRight,10)}if(e&&this.signatureDialog&&this.signatureDialog.visible){var l=e.getContext("2d"),h=e.toDataURL();this.pdfViewer.element.offsetWidth>750?(e.width=714,e.style.width="714px"):(e.width=this.pdfViewer.element.offsetWidth-t,e.style.width=e.width+"px");var d=new Image;d.src=h,d.onload=function(){l.drawImage(d,0,0,e.width,e.height)}}var p=document.getElementsByClassName("e-pv-font-sign");if(e&&p&&p.length>0)for(var u=0;u<p.length;u++)p[parseInt(u.toString(),10)].style.width=e.width/2-50+"px"},s.prototype.drawSignOnTabSwitch=function(){var e=this,t=new Image;t.onload=function(){var i=document.getElementById(e.pdfViewer.element.id+"_signatureCanvas_");i&&i.getContext("2d").drawImage(t,0,0)},t.src=this.drawSignatureDataUrl},s.prototype.imageSignOnTabSwitch=function(){var e=this,t=new Image;t.onload=function(){var i=document.getElementById(e.pdfViewer.element.id+"_signatureuploadCanvas_");if(i){var n=i.getContext("2d");document.getElementById(e.pdfViewer.element.id+"_e-pv-upload-button").style.visibility="hidden",n.drawImage(t,0,0,i.width,i.height),e.enableCreateButton(!1),e.signatureImageHeight=t.naturalHeight,e.signatureImageWidth=t.naturalWidth}},t.src=this.imageSignatureDataUrl},s.prototype.signaturePanelMouseDown=function(e){"contextmenu"!==e.type&&(e.preventDefault(),this.findMousePosition(e),this.mouseDetection=!0,this.oldX=this.mouseX,this.oldY=this.mouseY,this.newObject=[],this.drawMousePosition(e),this.mouseMoving=!0)},s.prototype.enableCreateButton=function(e){var t=document.getElementsByClassName("e-pv-createbtn")[0];t&&(t.disabled=e),this.enableClearbutton(e)},s.prototype.enableClearbutton=function(e){var t=document.getElementsByClassName("e-pv-clearbtn")[0];t&&(t.disabled=e)},s.prototype.signaturePanelMouseMove=function(e){this.mouseDetection&&"Draw"===this.signaturetype&&(this.findMousePosition(e),this.enableCreateButton(!1),this.drawMousePosition(e))},s.prototype.findMousePosition=function(e){if(-1!==e.type.indexOf("touch")){var i=e.target.getBoundingClientRect();this.mouseX=e.changedTouches[0].clientX-i.left,this.mouseY=e.changedTouches[0].clientY-i.top}else this.mouseX=e.offsetX,this.mouseY=e.offsetY},s.prototype.drawMousePosition=function(e){this.mouseDetection&&(this.drawSignatureInCanvas(),this.oldX=this.mouseX,this.oldY=this.mouseY)},s.prototype.drawSignatureInCanvas=function(){var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_").getContext("2d");t.beginPath(),t.moveTo(this.oldX,this.oldY),t.lineTo(this.mouseX,this.mouseY),t.stroke(),t.lineWidth=2,t.arc(this.oldX,this.oldY,1,0,2*Math.PI,!0),t.closePath(),this.newObject.push(this.mouseX,this.mouseY)},s.prototype.signaturePanelMouseUp=function(){this.mouseDetection&&this.convertToPath(this.newObject),this.mouseDetection=!1,"touchend"==event.type&&(this.canvasTouched=!0)},s.prototype.signaturePanelMouseLeave=function(){this.mouseDetection&&this.convertToPath(this.newObject),this.mouseDetection=!1,this.mouseMoving=!1},s.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[parseInt(t.toString(),10)],e[t+1])},s.prototype.linePath=function(e,t){this.outputString+="L"+e+","+t+" "},s.prototype.movePath=function(e,t){this.outputString+="M"+e+","+t+" "},s.prototype.clearSignatureCanvas=function(e){var t=!0,i=[];!e||c(e.previousIndex)||c(e.selectedIndex)?(this.outputString="",this.newObject=[]):(t=!1,0===e.previousIndex?(this.drawOutputString=this.outputString,i=this.newObject):2===e.previousIndex&&(this.imageOutputString=this.outputString),this.outputString="",this.newObject=[],0===e.selectedIndex?(this.outputString=this.drawOutputString,this.newObject=i):2===e.selectedIndex&&(this.outputString=this.imageOutputString));var n=!1,r=!1,o=!1;if(e&&e.currentTarget&&e.currentTarget.classList.contains("e-pv-clearbtn"))if(t=!1,"Draw"===this.signaturetype){n=!0;var a=document.getElementById("checkbox"),l=document.getElementById("checkbox");a&&l.nextElementSibling&&(l.nextElementSibling.classList.remove("e-check"),a.checked=!1)}else"Type"===this.signaturetype?(r=!0,a=document.getElementById("checkbox1"),l=document.getElementById("checkbox1"),a&&l.nextElementSibling&&(l.nextElementSibling.classList.remove("e-check"),a.checked=!1,this.textValue="")):(o=!0,this.clearUploadString=!0,a=document.getElementById("checkbox2"),l=document.getElementById("checkbox2"),a&&l.nextElementSibling&&(l.nextElementSibling.classList.remove("e-check"),a.checked=!1));var h=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");(h&&t||n)&&h.getContext("2d").clearRect(0,0,h.width,h.height);var p=document.getElementById(this.pdfViewer.element.id+"_signatureuploadCanvas_");if(p&&t||o){p.getContext("2d").clearRect(0,0,p.width,p.height);var u=document.getElementById(this.pdfViewer.element.id+"_e-pv-upload-button");u&&(u.style.visibility="")}var f=document.getElementById(this.pdfViewer.element.id+"_font_appearance"),g=document.getElementById(this.pdfViewer.element.id+"_e-pv-Signtext-box");(f&&g&&t||r)&&(g.value="",X()||(f.innerHTML="")),this.enableCreateButton(!0)},s.prototype.closeSignaturePanel=function(){this.pdfViewerBase.currentTarget&&(this.pdfViewerBase.drawSignatureWithTool=!0),this.clearSignatureCanvas(),X()||this.signatureDialog.hide(),this.pdfViewerBase.isToolbarSignClicked=!1,this.pdfViewerBase.drawSignatureWithTool=!1,this.drawOutputString="",this.imageOutputString=""},s.prototype.saveSignature=function(){var e;e=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[parseInt(i.toString(),10)]=[];if(e)for(var n=JSON.parse(e),r=0;r<n.length;r++){var o=[],a=n[parseInt(r.toString(),10)];if(a){for(var l=0;a.annotations.length>l;l++){if(this.pdfViewer.isSignatureEditable){var h=this.pdfViewer.handWrittenSignatureSettings,d=this.pdfViewer.annotationSettings,p="Guest"!==h.author?h.author:d.author?d.author:"Guest";a.annotations[parseInt(l.toString(),10)].author=p}var u=a.annotations[parseInt(l.toString(),10)].strokeColor?a.annotations[parseInt(l.toString(),10)].strokeColor:"black";if(a.annotations[parseInt(l.toString(),10)].strokeColor=JSON.stringify(this.getRgbCode(u)),a.annotations[parseInt(l.toString(),10)].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[parseInt(l.toString(),10)].bounds,a.pageIndex)),"HandWrittenSignature"===a.annotations[parseInt(l.toString(),10)].shapeAnnotationType||"ink"===a.annotations[parseInt(l.toString(),10)].signatureName){var g=ia(Cs(a.annotations[parseInt(l.toString(),10)].data));a.annotations[parseInt(l.toString(),10)].data=JSON.stringify(g)}else if("SignatureText"!==a.annotations[parseInt(l.toString(),10)].shapeAnnotationType||this.checkDefaultFont(a.annotations[parseInt(l.toString(),10)].fontFamily))a.annotations[parseInt(l.toString(),10)].data=JSON.stringify(a.annotations[parseInt(l.toString(),10)].data);else{var m=F("canvas"),y=JSON.parse(a.annotations[parseInt(l.toString(),10)].bounds);m.width=y&&y.width||150,m.height=y&&y.height||2*a.annotations[parseInt(l.toString(),10)].fontSize;var b=m.getContext("2d"),w=m.width/2,S=m.height/2+a.annotations[parseInt(l.toString(),10)].fontSize/2-10;b.textAlign="center",b.font=a.annotations[parseInt(l.toString(),10)].fontSize+"px "+a.annotations[parseInt(l.toString(),10)].fontFamily,b.fillText(a.annotations[parseInt(l.toString(),10)].data,w,S),a.annotations[parseInt(l.toString(),10)].data=JSON.stringify(m.toDataURL("image/png")),a.annotations[parseInt(l.toString(),10)].shapeAnnotationType="SignatureImage"}}o=a.annotations}t[a.pageIndex]=o}return JSON.stringify(t)},s.prototype.checkDefaultFont=function(e){return"Helvetica"===e||"Times New Roman"===e||"Courier"===e||"Symbol"===e},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return c(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},s.prototype.renderSignature=function(e,t){var i,n=this.pdfViewerBase.currentSignatureAnnot,r=this.pdfViewer.annotation.createGUID();if(n){"HandWrittenSignature"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"HandWrittenSignature",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:r}),"SignatureText"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType?i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"SignatureText",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:r}:"SignatureImage"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"SignatureImage",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:r}),this.pdfViewer.add(i);var o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n.pageIndex);this.pdfViewer.renderDrawing(o,n.pageIndex),this.pdfViewerBase.signatureAdded=!0,this.storeSignatureData(n.pageIndex,i),this.pdfViewer.fireSignatureAdd(n.pageIndex,n.signatureName,n.shapeAnnotationType,n.bounds,n.opacity,n.strokeColor,n.thickness),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++}},s.prototype.renderExistingSignature=function(e,t,i){var n,r=!1;if(!i)for(var o=0;o<this.signAnnotationIndex.length;o++)if(this.signAnnotationIndex[parseInt(o.toString(),10)]===t){r=!0;break}if(e&&!r){e.length>0&&-1===this.signAnnotationIndex.indexOf(t)&&this.signAnnotationIndex.push(t);for(var a=0;a<e.length;a++){var l=e[a];if(l){var h=l.PathData;i&&(h=l.IsSignature?l.PathData:"SignatureImage"===l.AnnotationType||"SignatureText"===l.AnnotationType?JSON.parse(JSON.stringify(l.PathData)):h.includes("command")?Kh(JSON.parse(l.PathData)):l.PathData),this.outputString=h,this.outputString="";var u=l.Bounds,f=c(u.X)?u.x+0:u.X+0,g=c(u.Y)?u.y+0:u.Y+0,m=u.Width?u.Width-0:u.width-0,y=u.Height?u.Height-0:u.height-0;n="SignatureText"===l.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:f,y:g,width:m,height:y},pageIndex:t,data:h,fontFamily:l.FontFamily,fontSize:l.FontSize,shapeAnnotationType:"SignatureText",opacity:l.Opacity,strokeColor:l.StrokeColor,thickness:l.Thickness,signatureName:l.SignatureName}:"SignatureImage"===l.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:f,y:g,width:m,height:y},pageIndex:t,data:h,shapeAnnotationType:"SignatureImage",opacity:l.Opacity,strokeColor:l.StrokeColor,thickness:l.Thickness,signatureName:l.SignatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:f,y:g,width:m,height:y},pageIndex:t,data:h,shapeAnnotationType:"HandWrittenSignature",opacity:l.Opacity,strokeColor:l.StrokeColor,thickness:l.Thickness,signatureName:l.SignatureName?l.SignatureName:"ink"}}this.pdfViewer.add(n);var b=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+l.pageIndex);this.pdfViewer.renderDrawing(b,n.pageIndex),this.storeSignatureData(n.pageIndex,n),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}},s.prototype.storeSignatureData=function(e,t){var i,n,r,o,a,l;this.pdfViewer.annotation.addAction(t.pageIndex?t.pageIndex:t.PageIndex,null,t,"Addition","",t,t),t.bounds?(n=t.bounds.left?t.bounds.left:t.bounds.x,r=t.bounds.top?t.bounds.top:t.bounds.y,o=t.bounds.width,a=t.bounds.height,l=t.pageIndex):(n=t.Bounds.left?t.Bounds.left:t.Bounds.x,r=t.Bounds.top?t.Bounds.top:t.Bounds.y,o=t.LineBounds.Width,a=t.LineBounds.Height,l=t.PageIndex),t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,r=t.wrapper.bounds.top),i={id:t.id?t.id:null,bounds:{left:n,top:r,width:o,height:a},shapeAnnotationType:t.shapeAnnotationType?t.shapeAnnotationType:"ink",opacity:t.opacity?t.opacity:1,thickness:t.thickness?t.thickness:1,strokeColor:t.strokeColor?t.strokeColor:null,pageIndex:l,data:t.data?t.data:t.Value,fontSize:t.fontSize?t.fontSize:null,fontFamily:t.fontFamily?t.fontFamily:null,signatureName:t.signatureName?t.signatureName:t.Name},Math.round(JSON.stringify(window.sessionStorage).length/1024)+Math.round(JSON.stringify(i).length/1024)>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage(),this.pdfViewerBase.isFormStorageExceed||this.pdfViewer.formFieldsModule.clearFormFieldStorage());var p=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");if(p){this.storeSignatureCollections(i,e);var y=JSON.parse(p);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var b=this.pdfViewer.annotationModule.getPageCollection(y,e);if(!c(b)&&y[parseInt(b.toString(),10)])y[parseInt(b.toString(),10)].annotations.push(i),y[parseInt(b.toString(),10)].annotations.indexOf(i);else{var w={pageIndex:e,annotations:[]};w.annotations.push(i),w.annotations.indexOf(i),y.push(w)}var m=JSON.stringify(y);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=m:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",m)}else{this.storeSignatureCollections(i,e);var f={pageIndex:e,annotations:[]};f.annotations.push(i),f.annotations.indexOf(i);var g=[];g.push(f),m=JSON.stringify(g),this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=m:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",m)}},s.prototype.modifySignatureCollection=function(e,t,i,n){this.pdfViewerBase.updateDocumentEditedProperty(!0);var r=null,o=this.getAnnotations(t,null);if(null!=o&&i){for(var a=0;a<o.length;a++)if(i.id===o[parseInt(a.toString(),10)].id){if("bounds"===e)o[parseInt(a.toString(),10)].bounds={left:i.wrapper.bounds.left,top:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height},o[parseInt(a.toString(),10)].fontSize=i.fontSize;else if("stroke"===e)o[parseInt(a.toString(),10)].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[parseInt(a.toString(),10)].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[parseInt(a.toString(),10)].thickness=i.wrapper.children[0].style.strokeWidth;else if("delete"===e){this.updateSignatureCollection(o[parseInt(a.toString(),10)]),r=o.splice(a,1)[0];break}if(e&&"delete"!==e&&this.storeSignatureCollections(o[parseInt(a.toString(),10)],t),n){o[parseInt(a.toString(),10)].opacity=i.wrapper.children[0].style.opacity,o[parseInt(a.toString(),10)].strokeColor=i.wrapper.children[0].style.strokeColor,o[parseInt(a.toString(),10)].thickness=i.wrapper.children[0].style.strokeWidth,this.storeSignatureCollections(o[parseInt(a.toString(),10)],t);break}}this.manageAnnotations(o,t)}return r},s.prototype.storeSignatureCollections=function(e,t){var i=this.checkSignatureCollection(e),n=st(e);n.annotationId=e.signatureName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.signatureCollection.splice(i.position,0,n):this.pdfViewer.signatureCollection.push(n)},s.prototype.checkSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].annotationId===e.signatureName)return this.pdfViewer.signatureCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},s.prototype.updateSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].annotationId===e.signatureName){this.pdfViewer.signatureCollection.splice(i,1);break}},s.prototype.addInCollection=function(e,t){if(t){this.storeSignatureCollections(t,e);var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},s.prototype.getAnnotations=function(e,t){var i,n;if(n=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var r=JSON.parse(n),o=this.pdfViewer.annotationModule.getPageCollection(r,e);i=!c(o)&&r[parseInt(o.toString(),10)]?r[parseInt(o.toString(),10)].annotations:t}else i=t;return i},s.prototype.manageAnnotations=function(e,t){var i;if(i=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var r=this.pdfViewer.annotationModule.getPageCollection(n,t);n[parseInt(r.toString(),10)]&&(n[parseInt(r.toString(),10)].annotations=e);var o=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=o:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",o)}},s.prototype.showSignatureDialog=function(e){e&&this.createSignaturePanel()},s.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.showSignatureDialog(!0)},s.prototype.setInitialMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.pdfViewerBase.isInitialField=!0,this.showSignatureDialog(!0)},s.prototype.ConvertPointToPixel=function(e){return e*(96/72)},s.prototype.updateSignatureCollections=function(e,t,i){if(e){var r=e.Bounds,o=r.X,a=r.Y,l=r.Width,h=r.Height,d=e.PathData;return i&&(d=Kh(JSON.parse(e.PathData))),{id:"sign"+e.SignatureName,bounds:{x:o,y:a,width:l,height:h},pageIndex:t,data:d,shapeAnnotationType:"HandWrittenSignature",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,signatureName:e.SignatureName}}},s.prototype.destroy=function(){window.sessionStorage.removeItem("_annotations_sign");var e=document.getElementById(this.pdfViewer.element.id+"_signElement");e&&(e.removeEventListener("change",this.addStampImage),e.parentElement&&e.parentElement.removeChild(e)),this.signatureDialog&&this.signatureDialog.destroy()},s}(),OLe=function(){function s(e,t){this.zoomFactor=1,this.previousZoomFactor=1,this.scrollWidth=25,this.zoomPercentages=[10,25,50,75,100,125,150,200,400],this.isNotPredefinedZoom=!1,this.pinchStep=0,this.reRenderPageNumber=0,this.magnifyPageRerenderTimer=null,this.rerenderOnScrollTimer=null,this.rerenderInterval=null,this.touchCenterX=0,this.touchCenterY=0,this.mouseCenterX=0,this.mouseCenterY=0,this.pageRerenderCount=0,this.imageObjects=[],this.topValue=0,this.isTapToFitZoom=!1,this.fitType=null,this.isPinchZoomed=!1,this.isPagePinchZoomed=!1,this.isRerenderCanvasCreated=!1,this.isMagnified=!1,this.isPagesZoomed=!1,this.isPinchScrolled=!1,this.isAutoZoom=!1,this.isDoubleTapZoom=!1,this.isFormFieldPageZoomed=!1,this.isWebkitMobile=!1,this.isFitToPageMode=!0,this.pdfViewer=e,this.pdfViewerBase=t,this.zoomLevel=2,this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return s.prototype.zoomTo=function(e){e<10?e=10:e>400&&(e=400),this.fitType=null,this.isNotPredefinedZoom=!1,this.isAutoZoom&&this.isInitialLoading?this.pdfViewerBase.onWindowResize():(this.isAutoZoom=!1,this.onZoomChanged(e)),this.isInitialLoading=!1},s.prototype.zoomIn=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.lowerZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel>=8?this.zoomLevel=8:this.zoomLevel++,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},s.prototype.zoomOut=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.higherZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel<=0?this.zoomLevel=0:this.zoomLevel--,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},s.prototype.fitToWidth=function(){this.isAutoZoom=!1;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},s.prototype.fitToAuto=function(){this.isAutoZoom=!0;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},s.prototype.fitToPage=function(){var e=this.calculateFitZoomFactor("fitToPage");null!==e&&(this.isAutoZoom=!1,this.onZoomChanged(e),this.pdfViewerBase.viewerContainer.style.overflowY=E.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?"auto":"hidden":"auto",this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]&&(this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor))},s.prototype.calculateFitZoomFactor=function(e){var t=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width,i=this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;if(0===t&&0===i&&(t=parseFloat(this.pdfViewer.width.toString()),i=parseFloat(this.pdfViewer.height.toString())),isNaN(i)||isNaN(t))return null;if(this.fitType=e,"fitToWidth"===this.fitType){var n=(t-this.scrollWidth)/this.pdfViewerBase.highestWidth;return this.isAutoZoom&&(this.fitType=null,1===(n=Math.min(1,n))&&(this.zoomLevel=2)),parseInt((100*n).toString())}this.isFitToPageMode=!0;var o=i/this.pdfViewerBase.highestHeight;return o>(n=(t-this.scrollWidth-10)/this.pdfViewerBase.highestWidth)&&(o=n,this.isFitToPageMode=!1),parseInt((100*o).toString())},s.prototype.initiateMouseZoom=function(e,t,i){var n=this.positionInViewer(e,t);this.mouseCenterX=n.x,this.mouseCenterY=n.y,this.zoomTo(i)},s.prototype.pinchIn=function(){this.fitType=null;var e=this.zoomFactor-this.pinchStep;if(e<4&&e>2&&(e=this.zoomFactor-this.pinchStep),e<=1.5&&(e=this.zoomFactor-this.pinchStep/1.5),e<.25&&(e=.25),this.isPinchZoomed=!0,this.onZoomChanged(100*e),this.isTapToFitZoom=!0,E.isDevice&&!this.pdfViewer.enableDesktopMode&&100*this.zoomFactor==50){var t=this.calculateFitZoomFactor("fitToWidth");this.fitType=null,t<=50&&this.fitToWidth()}},s.prototype.pinchOut=function(){this.fitType=null;var e=this.zoomFactor+this.pinchStep;E.isDevice&&!this.pdfViewer.enableDesktopMode||e>2&&(e+=this.pinchStep),e>4&&(e=4),this.isTapToFitZoom=!0,this.isPinchZoomed=!0,this.onZoomChanged(100*e)},s.prototype.getZoomLevel=function(e){for(var t=0,i=this.zoomPercentages.length-1;t<=i&&(0!==t||0!==i);){var n=Math.round((t+i)/2);this.zoomPercentages[n]<=e?t=n+1:this.zoomPercentages[n]>=e&&(i=n-1)}return this.higherZoomLevel=t,this.lowerZoomLevel=i,i},s.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(100*this.zoomFactor)>-1},s.prototype.onZoomChanged=function(e){if(e&&(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.closePopupMenu(),this.previousZoomFactor=this.zoomFactor,this.zoomLevel=this.getZoomLevel(e),this.zoomFactor=this.getZoomFactor(e),this.pdfViewerBase.isMinimumZoom=this.zoomFactor<=.25,this.pdfViewerBase.viewerContainer.style.overflowY=E.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?"auto":"hidden":"auto",this.pdfViewerBase.pageCount>0&&(this.previousZoomFactor!==this.zoomFactor&&(this.isPinchZoomed?(E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobilePageNoContainer.style.left=this.pdfViewer.element.clientWidth/2-parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width)/2+"px"),this.responsivePages()):this.magnifyPages()),X()||this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomButtons(),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString()),this.pdfViewer.fireZoomChange())),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString()),this.pdfViewer.fireZoomChange()),E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.isPinchZoomed)){var t=parseInt((100*this.zoomFactor).toString())+"%";this.pdfViewerBase.navigationPane.createTooltipMobile(t)}},s.prototype.setTouchPoints=function(e,t){var i=this.positionInViewer(e,t);this.touchCenterX=i.x,this.touchCenterY=i.y},s.prototype.initiatePinchMove=function(e,t,i,n){this.isPinchScrolled=!1,this.isMagnified=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;var r=this.positionInViewer((e+i)/2,(t+n)/2);this.touchCenterX=r.x,this.touchCenterY=r.y,this.zoomOverPages(e,t,i,n)},s.prototype.magnifyPages=function(){this.clearRerenderTimer(),this.isPagesZoomed||(this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber),!this.pdfViewerBase.documentLoaded&&!this.pdfViewerBase.isInitialPageMode&&(this.isPagesZoomed=!0);var e=this.pdfViewerBase.viewerContainer.scrollTop;this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!1,!0),this.pdfViewer.formDesignerModule&&!this.pdfViewerBase.documentLoaded&&!this.pdfViewerBase.isDocumentLoaded&&(this.isFormFieldPageZoomed=!0),this.isInitialLoading||(this.isMagnified=!0),this.updatePageLocation(),this.resizeCanvas(this.reRenderPageNumber),this.calculateScrollValuesOnMouse(e),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.resizeTouchElements();var t=this.pdfViewer.annotationModule;if(t&&t.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition(),this.pdfViewerBase.pageSize.length>0){this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length-1)+"px";var i=this;this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout(function(){i.rerenderMagnifiedPages()},800))}},s.prototype.updatePageLocation=function(){this.topValue=0;for(var e=1;e<this.pdfViewerBase.pageSize.length;e++)this.topValue+=(this.pdfViewerBase.pageSize[e].height+this.pdfViewerBase.pageGap)*this.zoomFactor;var t;for(t=this.pdfViewer.initialRenderPages>10?this.pdfViewer.initialRenderPages<=this.pdfViewerBase.pageCount?this.pdfViewer.initialRenderPages:this.pdfViewerBase.pageCount:this.pdfViewerBase.pageCount<10?this.pdfViewerBase.pageCount:10,e=0;e<t;e++)this.updatePageContainer(e,this.pdfViewerBase.getPageWidth(e),this.pdfViewerBase.getPageHeight(e),this.pdfViewerBase.getPageTop(e),!0)},s.prototype.updatePageContainer=function(e,t,i,n,r){var o=this.pdfViewerBase.getElement("_pageDiv_"+e);if(o){o.style.width=t+"px",o.style.height=i+"px";var a=this.pdfViewerBase.getElement("_textLayer_"+e);a&&(a.style.width=t+"px",a.style.height=i+"px"),o.style.width=t+"px",o.style.height=i+"px",this.pdfViewer.enableRtl?o.style.right=this.pdfViewerBase.updateLeftPosition(e)+"px":o.style.left=this.pdfViewerBase.updateLeftPosition(e)+"px",o.style.top=n+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.renderPageCanvas(o,t,i,e,"block")}},s.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer),clearTimeout(this.magnifyPageRerenderTimer),this.clearIntervalTimer(),this.isPinchScrolled=!1},s.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval),this.rerenderInterval=null,this.clearRendering();for(var e=document.querySelectorAll('canvas[id*="'+this.pdfViewer.element.id+'_oldCanvas_"]'),t=0;t<e.length;t++){var i=parseInt(e[t].id.split("_oldCanvas_")[1]),n=this.pdfViewerBase.getElement("_pageCanvas_"+i);n?(e[t].id=n.id,n.parentElement.removeChild(n)):e[t].id=this.pdfViewer.element.id+"_pageCanvas_"+i,this.pdfViewerBase.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(t)}this.isRerenderCanvasCreated=!1},s.prototype.pushImageObjects=function(e){c(this.imageObjects)||this.imageObjects&&this.imageObjects.push(e)},s.prototype.clearRendering=function(){if(this.imageObjects){for(var e=0;e<this.imageObjects.length;e++)this.imageObjects[e]&&(this.imageObjects[e].onload=null);this.imageObjects=[]}},s.prototype.rerenderMagnifiedPages=function(){!this.pdfViewerBase.isInitialLoaded&&!this.pdfViewerBase.isDocumentLoaded||this.pdfViewerBase.isInitialPageMode?this.pdfViewerBase.isInitialPageMode&&(this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.pdfViewerBase.isInitialPageMode=!1):(this.renderInSeparateThread(this.reRenderPageNumber),this.isPagesZoomed=!1)},s.prototype.renderInSeparateThread=function(e){var t=this;this.designNewCanvas(e),this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);var i=this;this.rerenderInterval=setInterval(function(){t.initiateRerender(i)},1)},s.prototype.responsivePages=function(){this.isPagesZoomed=!0,this.clearRerenderTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.clearAllOccurrences();var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.isAutoZoom=!1,this.updatePageLocation(),this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length-1].height*this.zoomFactor+"px",this.resizeCanvas(this.pdfViewerBase.currentPageNumber),this.pdfViewerBase.textLayer&&this.pdfViewer.formDesignerModule&&this.pdfViewerBase.textLayer.clearTextLayers(!0),this.isPinchZoomed&&this.calculateScrollValues(e),this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewer.formFieldsModule&&!this.pdfViewer.formDesignerModule){var t=this;this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout(function(){t.rerenderMagnifiedPages()},800))}},s.prototype.calculateScrollValues=function(e){var i=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));if(i){var n,r=i.getBoundingClientRect(),o=(n=this.positionInViewer(this.pdfViewer.enableRtl&&!this.isDoubleTapZoom?r.right:r.left,r.top)).x,a=n.y,l=a*this.previousZoomFactor,h=e+this.touchCenterY;this.pdfViewerBase.viewerContainer.scrollTop=a*this.zoomFactor+(h-l<0?h-l:this.zoomFactor/this.previousZoomFactor*(h-l))-this.touchCenterY+(this.zoomFactor-this.previousZoomFactor>0?this.zoomFactor/this.previousZoomFactor*-this.pdfViewerBase.pageGap:this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor))/this.pdfViewerBase.zoomInterval;var f=this.zoomFactor/(r.width*this.previousZoomFactor/r.width)-1,g=this.touchCenterX-o;this.pdfViewerBase.isMixedSizeDocument&&this.pdfViewerBase.highestWidth*this.pdfViewerBase.getZoomFactor()>this.pdfViewerBase.viewerContainer.clientWidth?this.pdfViewerBase.viewerContainer.scrollLeft=(this.pdfViewerBase.pageContainer.offsetWidth-this.pdfViewerBase.viewerContainer.clientWidth)/2:this.pdfViewerBase.viewerContainer.scrollLeft+=g*f}},s.prototype.calculateScrollValuesOnMouse=function(e){var i=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));if(i){var n,r=i.getBoundingClientRect(),o=(n=this.positionInViewer(this.pdfViewer.enableRtl?r.right:r.left,r.top)).x,a=n.y,l=a*this.previousZoomFactor,h=e+this.mouseCenterY,p=this.zoomFactor-this.previousZoomFactor>0?this.zoomFactor/this.previousZoomFactor*-this.pdfViewerBase.pageGap:this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);this.pdfViewerBase.isTouchPad&&!this.pdfViewerBase.isMacSafari&&(p/=this.pdfViewerBase.zoomInterval),this.pdfViewerBase.viewerContainer.scrollTop=a*this.zoomFactor+(h-l<0?h-l:this.zoomFactor/this.previousZoomFactor*(h-l))-this.mouseCenterY+p;var f=this.zoomFactor/(r.width*this.previousZoomFactor/r.width)-1,g=this.mouseCenterX-o;this.pdfViewerBase.isMixedSizeDocument&&this.pdfViewerBase.highestWidth*this.pdfViewerBase.getZoomFactor()>this.pdfViewerBase.viewerContainer.clientWidth?this.pdfViewerBase.viewerContainer.scrollLeft=(this.pdfViewerBase.pageContainer.offsetWidth-this.pdfViewerBase.viewerContainer.clientWidth)/2:this.pdfViewerBase.viewerContainer.scrollLeft+=g*f}},s.prototype.rerenderOnScroll=function(){var e=this;if(this.isPinchZoomed=!1,this.isPinchScrolled){this.rerenderOnScrollTimer=null,this.isPinchScrolled=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[];for(var t=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+'_pageCanvas_"]'),n=0;n<t.length;n++){var r=parseInt(t[n].id.split("_pageCanvas_")[1]),o=this.pdfViewerBase.pageSize[r].width;816<o&&this.pdfViewer.tileRenderingSettings.enableTileRendering&&(t[n].style.width=o*this.pdfViewerBase.getZoomFactor()+"px",t[n].style.height=this.pdfViewerBase.pageSize[r].height*this.pdfViewerBase.getZoomFactor()+"px")}if(this.pdfViewerBase.textLayer){var a=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]');for(n=0;n<a.length;n++)a[n].style.display="block"}if(this.pdfViewerBase.isTextMarkupAnnotationModule())for(var l=document.querySelectorAll('canvas[id*="'+this.pdfViewer.element.id+'_annotationCanvas_"]'),h=0;h<l.length;h++)r=l[h].id.split("_annotationCanvas_")[1],this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(r));if(E.isDevice)if(this.pdfViewer.formDesignerModule){var d,p=this.pdfViewer.currentPageNumber;for(d=this.pdfViewer.formFieldCollection.filter(function(u){return u.pageNumber===p}),n=0;n<d.length;n++)document.querySelectorAll("[id^="+d[parseInt(n.toString(),10)].id+"]").forEach(function(f){return f.style.display="none"})}else document.querySelectorAll('[id^="pdfViewerinput_"]').forEach(function(u){return u.parentElement.style.display="none"});this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.isPagePinchZoomed=!1,this.rerenderOnScrollTimer=setTimeout(function(){e.pdfViewerBase.pageViewScrollChanged(e.reRenderPageNumber)},300)}},s.prototype.pinchMoveScroll=function(){var e=this;this.isRerenderCanvasCreated&&this.clearIntervalTimer(),(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed)&&(this.clearRendering(),this.isPagesZoomed=!1,clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled=!0,this.isFormFieldPageZoomed=!0,this.rerenderOnScrollTimer=setTimeout(function(){e.rerenderOnScroll()},100))},s.prototype.initiateRerender=function(e){var t=!1;(this.previousZoomFactor<.4||this.pdfViewerBase.isMinimumZoom)&&(t=!0),(e.pageRerenderCount===e.pdfViewerBase.reRenderedCount||t)&&0!==e.pageRerenderCount&&0!==e.pdfViewerBase.reRenderedCount&&(e.reRenderAfterPinch(this.reRenderPageNumber),e.isFormFieldPageZoomed=!1)},s.prototype.reRenderAfterPinch=function(e){this.pageRerenderCount=0;var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t=t>0?t:0;n<=i;n++){var r=this.pdfViewerBase.getElement("_pageDiv_"+n),a=(this.pdfViewerBase.getElement("_pageCanvas_"+n),this.pdfViewerBase.getElement("_oldCanvas_"+n));a&&a.parentNode.removeChild(a),this.pdfViewerBase.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(n):this.pdfViewer.formDesignerModule&&(this.rerenderAnnotations(n),this.pdfViewer.renderDrawing(void 0,e)),r&&(r.style.visibility="visible")}this.isRerenderCanvasCreated=!1,this.isPagePinchZoomed=!1,0!==this.pdfViewerBase.reRenderedCount&&(this.pdfViewerBase.reRenderedCount=0,this.pageRerenderCount=0,clearInterval(this.rerenderInterval),this.rerenderInterval=null),this.imageObjects=[]},s.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.element.id+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},s.prototype.designNewCanvas=function(e){this.pdfViewerBase.textLayer&&this.pdfViewerBase.textLayer.clearTextLayers();var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t=t>0?t:0;n<=i;n++){var r=this.pdfViewerBase.getElement("_pageCanvas_"+n),o=this.pdfViewerBase.pageSize[n].width*this.zoomFactor,a=this.pdfViewerBase.pageSize[n].height*this.zoomFactor;r&&!this.pdfViewer.restrictZoomRequest?this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),o,a,n,"none"):this.pdfViewer.restrictZoomRequest||this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),o,a,n,"none")}this.isRerenderCanvasCreated=!0},s.prototype.pageRerenderOnMouseWheel=function(){var e=this;this.isRerenderCanvasCreated&&(this.clearIntervalTimer(),clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled||(this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout(function(){e.rerenderOnScroll()},100)))},s.prototype.renderCountIncrement=function(){this.isRerenderCanvasCreated&&this.pageRerenderCount++},s.prototype.rerenderCountIncrement=function(){this.pageRerenderCount>0&&this.pdfViewerBase.reRenderedCount++},s.prototype.resizeCanvas=function(e){var t=this.pdfViewer.annotationModule;if(t&&t.inkAnnotationModule){var i=parseInt(t.inkAnnotationModule.currentPageNumber);t.inkAnnotationModule.drawInkAnnotation(i)}t&&t.freeTextAnnotationModule&&t.freeTextAnnotationModule.addInputInZoom({x:t.freeTextAnnotationModule.currentPosition[0],y:t.freeTextAnnotationModule.currentPosition[1],width:t.freeTextAnnotationModule.currentPosition[2],height:t.freeTextAnnotationModule.currentPosition[3]});var r=e-3,o=e+3;this.pdfViewerBase.isMinimumZoom&&(r=e-4,o=e+4),this.pdfViewer.initialRenderPages>this.pdfViewerBase.pageRenderCount?(r=0,o=o<this.pdfViewer.initialRenderPages?this.pdfViewer.initialRenderPages<=this.pdfViewerBase.pageCount?this.pdfViewer.initialRenderPages:this.pdfViewerBase.pageCount:o<this.pdfViewerBase.pageCount?o:this.pdfViewerBase.pageCount-1):(r=r>0?r:0,o=o<this.pdfViewerBase.pageCount?o:this.pdfViewerBase.pageCount-1);for(var a=r;a<=o;a++){var l=this.pdfViewerBase.getElement("_pageDiv_"+a),h=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+a);if(l&&r<=a&&a<=o){var d=!1;if(this.pdfViewer.textSelectionModule&&(d=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(a)),null!=this.pdfViewerBase.pageSize[a]){var p=this.pdfViewerBase.pageSize[a].width*this.zoomFactor,u=this.pdfViewerBase.pageSize[a].height*this.zoomFactor;l.style.width=p+"px",l.style.height=u+"px",l.style.top=this.pdfViewerBase.pageSize[a].top*this.zoomFactor+"px",this.pdfViewer.enableRtl?l.style.right=this.pdfViewerBase.updateLeftPosition(a)+"px":l.style.left=this.pdfViewerBase.updateLeftPosition(a)+"px";var f=this.pdfViewerBase.getElement("_pageCanvas_"+a);f&&(f.style.width=p+"px",f.style.height=u+"px",this.pdfViewer.annotation?this.pdfViewer.annotationModule.resizeAnnotations(p,u,a):this.pdfViewer.formDesignerModule&&this.pdfViewer.formDesignerModule.resizeAnnotations(p,u,a));var g=this.pdfViewerBase.retrieveCurrentZoomFactor(),y=void 0,b=void 0;y=b=this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[a].width);var w=this.pdfViewer.tileRenderingSettings;if(w.enableTileRendering&&w.x>0&&w.y>0&&(1200<this.pdfViewerBase.pageSize[a].width||this.pdfViewerBase.getZoomFactor()>2)&&(y=w.x,b=w.y),1==y*b){var I=this.pdfViewerBase.getWindowSessionStorage(a,g)?this.pdfViewerBase.getWindowSessionStorage(a,g):this.pdfViewerBase.getPinchZoomPage(a);if(I){if(x=(I=JSON.parse(I)).image){f.src=x,f.style.display="block";for(var T=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+"_tileimg_"+a+'_"]'),L=this.pdfViewerBase.getElement("_pageDiv_"+a),N=0;N<T.length;N++){var O=T[N].id.split("_");parseFloat(O[O.length-3])!=this.pdfViewerBase.getZoomFactor()&&L.removeChild(T[N])}for(var _=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+'_oldCanvas"]'),B=0;B<_.length;B++)l.removeChild(_[B])}this.pdfViewerBase.isReRenderRequired=!1}else this.pdfViewerBase.isReRenderRequired=!0}else{T=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+"_tileimg_"+a+'_"]');for(var q=0;q<T.length;q++){O=T[q].id.split("_");var W=parseFloat(O[O.length-2]),j=parseFloat(O[O.length-1]),G=JSON.parse(this.pdfViewerBase.getWindowSessionStorageTile(a,W,j,g));if(G&&G.zoomFactor&&(g=G.zoomFactor),parseFloat(O[O.length-4])===a){f.style.display="none";var Y=T[q];if(Y.nodeType==Node.ELEMENT_NODE){var U=1.5;c(G)||(U=c(G.scaleFactor)?1.5:G.scaleFactor);var x,fe=this.pdfViewerBase.pageSize[a].width*g*U/y,ve=this.pdfViewerBase.pageSize[a].height*g*U/b,Te=fe,Ne=parseFloat(O[O.length-2])*fe,Ue=parseFloat(O[O.length-1])*ve;Y.width=Te*this.pdfViewerBase.getZoomFactor()/g/U,Y.style.width=Te*this.pdfViewerBase.getZoomFactor()/g/U+"px",Y.style.left=Ne*this.pdfViewerBase.getZoomFactor()/g/U+"px",Y.style.top=Ue*this.pdfViewerBase.getZoomFactor()/g/U+"px",Y.id=this.pdfViewer.element.id+"_tileimg_"+a+"_"+this.pdfViewerBase.getZoomFactor()+"_"+W+"_"+j,G?((x=G.image)&&(Y.src=x),this.pdfViewerBase.isReRenderRequired=!1):this.pdfViewerBase.isReRenderRequired=!0}}}0===T.length&&(this.pdfViewerBase.isReRenderRequired=!0)}var Pe=l.getElementsByTagName("a");if(0!==Pe.length)for(var rt=Pe.length-1;rt>=0;rt--)Pe[rt].parentNode.removeChild(Pe[rt]);h&&(h.style.width=p+"px",h.style.height=u+"px",this.pdfViewer.textSelectionModule&&(this.isPinchZoomed?h.style.display="none":this.isMagnified?(e-2==0?0:e-2)<=a&&a<=(e===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:e+1)&&(this.pdfViewer.textSelectionModule.isTextSelection&&d||this.pdfViewerBase.textLayer.getTextSearchStatus()||this.pdfViewerBase.isInitialPageMode)?(this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(a),this.pdfViewer.textSelectionModule.isTextSelection&&d&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(a)):h.style.display="none":h.style.display="block"),this.pdfViewerBase.applyElementStyles(h,a));var Z=Gu(this.pdfViewer.element.id+"_textLayer_"+a);if(Z){var te=Gu(this.pdfViewer.element.id+a+"_diagramAdorner_svg");te&&(te.style.width=p+"px",te.style.height=u+"px");var we=Gu(this.pdfViewer.element.id+a+"_diagramAdornerLayer");we&&(we.style.width=p+"px",we.style.height=u+"px"),Z.style.width=p+"px",Z.style.height=u+"px",this.pdfViewer.renderSelector(a,this.pdfViewer.annotationSelectorSettings),this.pdfViewerBase.applyElementStyles(we,a)}}}}},s.prototype.zoomOverPages=function(e,t,i,n){var r=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2));this.previousTouchDifference>-1&&(r>this.previousTouchDifference?(this.pinchStep=this.getPinchStep(r,this.previousTouchDifference),this.pinchOut()):r<this.previousTouchDifference&&(this.pinchStep=this.getPinchStep(this.previousTouchDifference,r),this.pinchIn())),this.previousTouchDifference=r},s.prototype.pinchMoveEnd=function(){this.touchCenterX=0,this.touchCenterY=0,this.previousTouchDifference=-1,this.isPinchZoomed&&(this.isPinchScrolled=!1,this.isPagePinchZoomed=!0,this.pinchMoveScroll())},s.prototype.fitPageScrollMouseWheel=function(e){"fitToPage"===this.fitType&&(this.isMagnified=!1,e.preventDefault(),e.deltaY>0?this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1):this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1))},s.prototype.magnifyBehaviorKeyDown=function(e){var i=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&e.metaKey;switch(e.keyCode){case 38:case 37:case 33:"fitToPage"===this.fitType&&(!e.ctrlKey&&!i||!e.shiftKey)&&(e.preventDefault(),this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 40:case 39:case 34:"fitToPage"===this.fitType&&(!e.ctrlKey&&!i||!e.shiftKey)&&(e.preventDefault(),this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 187:(e.ctrlKey||i)&&(e.preventDefault(),this.zoomIn());break;case 189:(e.ctrlKey||i)&&(e.preventDefault(),this.zoomOut());break;case 48:(e.ctrlKey||i)&&!e.shiftKey&&(e.preventDefault(),this.fitToPage());break;case 49:(e.ctrlKey||i)&&!e.shiftKey&&(e.preventDefault(),this.zoomTo(100))}},s.prototype.upwardScrollFitPage=function(e){e>0&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e-1].top*this.zoomFactor,this.isFitToPageMode&&(this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden"))},s.prototype.updatePagesForFitPage=function(e){"fitToPage"===this.fitType&&this.isFitToPageMode&&(e>0&&this.pdfViewerBase.getElement("_pageDiv_"+(e-1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="hidden"),e<this.pdfViewerBase.pageCount-1&&this.pdfViewerBase.getElement("_pageDiv_"+(e+1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="hidden"))},s.prototype.onDoubleTapMagnification=function(){var e=this;this.pdfViewer.toolbarModule&&X()&&this.pdfViewer.toolbarModule.showToolbar(!0);var t=this.pdfViewerBase.viewerContainer.scrollTop;if(this.pdfViewer.selectedItems.annotations[0]){if(X()&&this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var i={};i.x=this.pdfViewer.selectedItems.annotations[0].bounds.x,i.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(i,this.pdfViewer.selectedItems.annotations[0])}}else this.isDoubleTapZoom=!0,this.isTapToFitZoom?this.fitToWidth():this.zoomFactor<2?this.zoomTo(200):this.fitToWidth(),this.calculateScrollValues(t),this.isTapToFitZoom=!this.isTapToFitZoom,setTimeout(function(){e.isMagnified=!1},500),this.isDoubleTapZoom=!1},s.prototype.downwardScrollFitPage=function(e){e!==this.pdfViewerBase.pageCount-1&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e+1].top*this.zoomFactor,this.isFitToPageMode&&(e+1===this.pdfViewerBase.pageCount-1?this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden":this.pdfViewerBase.getElement("_pageDiv_"+(e+2)).style.visibility="hidden"))},s.prototype.getMagnifiedValue=function(e){return e/this.previousZoomFactor*this.zoomFactor},s.prototype.destroy=function(){this.imageObjects=void 0},s.prototype.getZoomFactor=function(e){return e/100},s.prototype.getModuleName=function(){return"Magnification"},s.prototype.getPinchStep=function(e,t){var r=(e-t)/100;return r<.02?r=.02:r>1&&(r=.1),r},s.prototype.zoomToRect=function(e){var t,i=this.pdfViewerBase,n=i.viewerContainer,r=this.pdfViewer;if(e.width>0&&e.height>0){var a=r.getPageNumberFromClientPoint({x:e.x,y:e.y});if(a>0){var l=n.getBoundingClientRect().width/e.width,h=n.getBoundingClientRect().height/e.height;t=l<h?l:h;var p=100*i.getZoomFactor(),u=n.scrollTop,f=n.scrollLeft;this.zoomTo(p*t),n.scrollTop=u,n.scrollLeft=f;var g=i.getZoomFactor(),m={x:e.x,y:e.y};m=r.convertClientPointToPagePoint(m,a),i.updateScrollTop(a-1),n.scrollLeft=(m.x-f)*g,n.scrollTop=(m.y+i.pageSize[a-1].top-u)*g}}},s.prototype.positionInViewer=function(e,t){var i=this.pdfViewerBase.mainContainer.getBoundingClientRect();return{x:e-i.left,y:t-i.top}},s}(),BLe=function(){function s(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber++,this.pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},s.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber--,this.pageNumber>0&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},s.prototype.goToPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e&&this.pdfViewerBase.updateScrollTop(e-1),this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.resizeCanvas(e);var t=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1));t&&(t.style.display="block")},s.prototype.goToFirstPage=function(){this.pageNumber=0,this.pdfViewerBase.updateScrollTop(this.pageNumber)},s.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1,this.pdfViewerBase.updateScrollTop(this.pageNumber)},s.prototype.destroy=function(){this.pageNumber=0},s.prototype.getModuleName=function(){return"Navigation"},s}(),zLe=function(){function s(e,t){var i=this;this.thumbnailLimit=30,this.thumbnailThreshold=50,this.thumbnailTopMargin=10,this.isThumbnailClicked=!1,this.thumbnailClick=function(n){var r=i,o=r.getPageNumberFromID(n.srcElement.id);if(r.previousElement&&(r.previousElement.classList.remove("e-pv-thumbnail-selection"),r.previousElement.classList.remove("e-pv-thumbnail-focus"),r.previousElement.classList.add("e-pv-thumbnail-selection-ring")),n.srcElement.parentElement.id===r.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o?(r.setSelectionStyle(n.srcElement.parentElement),r.previousElement=n.srcElement.parentElement):n.srcElement.id===r.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o&&(r.setSelectionStyle(n.srcElement),r.previousElement=n.srcElement),r.pdfViewer.fireThumbnailClick(o+1),r.isThumbnailClicked=!0,r.goToThumbnailPage(o+1),r.pdfViewerBase.focusViewerContainer(),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var a=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(a)}},this.thumbnailMouseOver=function(n){var r=i,o=r.getPageNumberFromID(n.srcElement.id);n.srcElement.id===r.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o?r.setMouseOverStyle(n.srcElement):n.srcElement.id===r.pdfViewer.element.id+"_thumbnail_image_"+o&&r.setMouseOverStyle(n.srcElement.parentElement)},this.thumbnailMouseLeave=function(n){var r=i,o=r.getPageNumberFromID(n.srcElement.id);n.srcElement.parentElement.id===r.pdfViewer.element.id+"_thumbnail_view"?r.setMouseLeaveStyle(n.srcElement.children[0].children[0]):n.srcElement.parentElement.id===r.pdfViewer.element.id+"_thumbnail_"+o&&r.setMouseLeaveStyle(n.srcElement.parentElement.children[0])},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createThumbnailContainer=function(){this.thumbnailView=F("div",{id:this.pdfViewer.element.id+"_thumbnail_view",className:"e-pv-thumbnail-view e-pv-thumbnail-row"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView)},s.prototype.openThumbnailPane=function(){this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.openThumbnailPane()},s.prototype.createRequestForThumbnails=function(){var e=this;return document.documentMode?(this.requestCreation(e),null):new Promise(function(i,n){e.requestCreation(e)})},s.prototype.requestCreation=function(e){e.startIndex=e.thumbnailLimit,e.thumbnailLimit=e.startIndex+e.thumbnailThreshold<e.pdfViewer.pageCount?e.startIndex+e.thumbnailThreshold:e.pdfViewer.pageCount;for(var t=!1,i=e.startIndex;i<e.thumbnailLimit;i++)e.pdfViewerBase.digitalSignaturePresent(i)&&(t=!0);var n="";t&&(n=e.pdfViewerBase.digitalSignaturePages.toString());var r={startPage:e.startIndex.toString(),endPage:e.thumbnailLimit.toString(),sizeX:"99.7",sizeY:"141",hashId:e.pdfViewerBase.hashId,action:"RenderThumbnailImages",elementId:e.pdfViewer.element.id,uniqueId:e.pdfViewerBase.documentId,digitalSignaturePresent:t,digitalSignaturePageList:n};this.pdfViewerBase.jsonDocumentId&&(r.documentId=this.pdfViewerBase.jsonDocumentId),this.thumbnailRequestHandler=new hs(this.pdfViewer),this.thumbnailRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.renderThumbnail,this.thumbnailRequestHandler.responseType="json",this.thumbnailRequestHandler.send(r),this.thumbnailRequestHandler.onSuccess=function(o){var a=o.data;if(!e.pdfViewerBase.checkRedirection(a)&&a){if("object"!=typeof a)try{a=JSON.parse(a)}catch{e.pdfViewerBase.onControlError(500,a,e.pdfViewer.serverActionSettings.renderThumbnail),a=null}if(a&&a.uniqueId===e.pdfViewerBase.documentId&&(e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.renderThumbnail,a),e.renderThumbnailImage(a),e.pdfViewer.isThumbnailViewOpen)){e.pdfViewerBase.navigationPane.isThumbnailOpen=!0,e.pdfViewerBase.navigationPane.sideBarTitle.textContent=e.pdfViewer.localeObj.getConstant("Page Thumbnails"),document.getElementById(e.pdfViewer.element.id+"_thumbnail_view").style.display="flex";var h=e.pdfViewer.element.querySelector(".e-pv-bookmark-view");h&&(h.style.display="none"),e.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme(),e.pdfViewerBase.navigationPane.updateViewerContainerOnExpand(),e.pdfViewerBase.navigationPane.isBookmarkOpen=!1}}},this.thumbnailRequestHandler.onFailure=function(o){e.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText,e.pdfViewer.serverActionSettings.renderThumbnail)},this.thumbnailRequestHandler.onError=function(o){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText,e.pdfViewer.serverActionSettings.renderThumbnail)}},s.prototype.gotoThumbnailImage=function(e){var t=this.checkThumbnailScroll(e);if(this.thumbnailView){var i=this.thumbnailView.children[e];if(i){var n=i.children[0];t&&(this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=n.offsetTop+n.clientTop-this.thumbnailTopMargin),this.isThumbnailClicked||(this.previousElement&&(this.previousElement.classList.remove("e-pv-thumbnail-selection"),this.previousElement.classList.remove("e-pv-thumbnail-focus"),this.previousElement.classList.remove("e-pv-thumbnail-hover"),this.previousElement.classList.add("e-pv-thumbnail-selection-ring")),this.setFocusStyle(n,e)),this.previousElement=n.children[0]}}},s.prototype.checkThumbnailScroll=function(e){var t=!1;if(this.thumbnailView){var i=this.getVisibleThumbs(),n=i.views.length;if(n>0){var r=this.getPageNumberFromID(i.first.id),o=n>1?this.getPageNumberFromID(i.last.id):r;e<=r||e>=o?t=!0:i.views.some(function(a){var l=a.id.split("_");return parseInt(l[l.length-1])===e&&(t=a.percent<100,!0)})}}return t},s.prototype.getPageNumberFromID=function(e){var t=e.split("_");return parseInt(t[t.length-1])},s.prototype.setFocusStyle=function(e,t){e.children[0].id===this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+t&&this.setMouseFocusStyle(e.children[0])},s.prototype.renderThumbnailImage=function(e){if(this.thumbnailView)for(var t=e&&isNaN(e.startPage)?e.startPage:this.startIndex,i=e&&isNaN(e.endPage)?e.endPage:this.thumbnailLimit,n=t;n<i;n++){var r=F("a",{id:"page_"+n,attrs:{"aria-label":"Thumbnail of Page"+(n+1),tabindex:"-1",role:"link"},className:"e-pv-thumbnail-anchor-node"}),o=F("div",{id:this.pdfViewer.element.id+"_thumbnail_"+n,className:"e-pv-thumbnail e-pv-thumbnail-column"});this.thumbnailSelectionRing=F("div",{id:this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n,className:"e-pv-thumbnail-selection-ring"}),o.appendChild(this.thumbnailSelectionRing);var a=F("div",{id:this.pdfViewer.element.id+"_thumbnail_pagenumber_"+n,className:"e-pv-thumbnail-number"});a.textContent=(n+1).toString(),o.appendChild(a),this.thumbnailImage=F("img",{id:this.pdfViewer.element.id+"_thumbnail_image_"+n,className:"e-pv-thumbnail-image"}),this.thumbnailImage.src=e.thumbnailImage[n],this.thumbnailImage.alt=this.pdfViewer.element.id+"_thumbnail_page_"+n,this.pdfViewerBase.pageSize[n]&&this.pdfViewerBase.pageSize[n].height<this.pdfViewerBase.pageSize[n].width&&(this.thumbnailImage.style.height="86px",this.thumbnailImage.style.width="126px",o.style.height="100px",o.style.width="140px",r.style.left="-25px",r.style.position="relative",a.style.left="18px",a.style.position="relative"),this.thumbnailSelectionRing.appendChild(this.thumbnailImage),r.appendChild(o),this.thumbnailView.appendChild(r),this.wireUpEvents(),0===n&&this.setMouseFocusToFirstPage()}this.pdfViewerBase.navigationPane.enableThumbnailButton(),this.thumbnailLimit!==this.pdfViewerBase.pageCount&&this.thumbnailView&&(document.documentMode?this.createRequestForThumbnails():Promise.all([this.createRequestForThumbnails()]))},s.prototype.wireUpEvents=function(){this.thumbnailSelectionRing&&(this.thumbnailSelectionRing.addEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.addEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.addEventListener("mouseleave",this.thumbnailMouseLeave))},s.prototype.unwireUpEvents=function(){this.thumbnailSelectionRing&&this.thumbnailImage&&(this.thumbnailSelectionRing.removeEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.removeEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.removeEventListener("mouseleave",this.thumbnailMouseLeave))},s.prototype.goToThumbnailPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e?this.pdfViewerBase.updateScrollTop(e-1):this.isThumbnailClicked=!1},s.prototype.setSelectionStyle=function(e){e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.remove("e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection")},s.prototype.setMouseOverStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-hover"))},s.prototype.setMouseLeaveStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")?e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection"),e.classList.add("e-pv-thumbnail-focus")):(e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"))},s.prototype.setMouseFocusStyle=function(e){e.classList.remove("e-pv-thumbnail-selection"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.add("e-pv-thumbnail-focus")},s.prototype.setMouseFocusToFirstPage=function(){var e=this.thumbnailView.children[0];if(e){var t=e.children[0].children[0];this.setMouseFocusStyle(t),this.previousElement=t}},s.prototype.clear=function(){if(this.startIndex=0,this.thumbnailLimit=0,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.sideBarContentContainer&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="block",this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0,this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="none"),this.thumbnailView)for(;this.thumbnailView.hasChildNodes();)this.thumbnailView.removeChild(this.thumbnailView.lastChild);this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.resetThumbnailView(),this.thumbnailRequestHandler&&this.thumbnailRequestHandler.clear(),this.unwireUpEvents()},s.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children)},s.prototype.getVisibleElements=function(e,t){var h,d,p,u,f,g,m,y,b,w,i=e.scrollTop,n=i+e.clientHeight,r=e.scrollLeft,o=r+e.clientWidth,l=[],I=0===t.length?0:this.binarySearchFirstItem(t,function a(_){return _.offsetTop+_.clientTop+_.clientHeight>i});t.length>0&&(I=this.backtrackBeforeAllVisibleElements(I,t,i));for(var x=-1,T=I,L=t.length;T<L;T++){if(b=(m=(d=h=this.getThumbnailElement(T)).offsetLeft+d.clientLeft)+(y=d.clientWidth),f=(p=d.offsetTop+d.clientTop)+(u=d.clientHeight),-1===x)f>=n&&(x=f);else if(p>x)break;f<=i||p>=n||b<=r||m>=o||(g=Math.max(0,i-p)+Math.max(0,f-n),w=Math.max(0,r-m)+Math.max(0,b-o),l.push({id:h.id,x:m,y:p,view:h,percent:(u-g)*(y-w)*100/u/y|0}))}return{first:l[0],last:l[l.length-1],views:l}},s.prototype.binarySearchFirstItem=function(e,t){var i=0,n=e.length-1;if(0===e.length||!t(this.getThumbnailElement(n)))return e.length-1;if(t(this.getThumbnailElement(i)))return i;for(;i<n;){var r=i+n>>1;t(this.getThumbnailElement(r))?n=r:i=r+1}return i},s.prototype.backtrackBeforeAllVisibleElements=function(e,t,i){if(e<2)return e;var n=this.getThumbnailElement(e),r=n.offsetTop+n.clientTop;r>=i&&(r=(n=this.getThumbnailElement(e-1)).offsetTop+n.clientTop);for(var o=e-2;o>=0&&!((n=this.getThumbnailElement(o)).offsetTop+n.clientTop+n.clientHeight<=r);--o)e=o;return e},s.prototype.getThumbnailElement=function(e){return this.thumbnailView.children[e].children[0]},s.prototype.destroy=function(){this.clear()},s.prototype.getModuleName=function(){return"ThumbnailView"},s}(),HLe=function(){function s(e,t,i){this.isToolbarHidden=!1,this.isTextboxBtnVisible=!0,this.isPasswordBtnVisible=!0,this.isCheckboxBtnVisible=!0,this.isRadiobuttonBtnVisible=!0,this.isDropdownBtnVisible=!0,this.isListboxBtnVisible=!0,this.isSignatureBtnVisible=!0,this.isDeleteBtnVisible=!0,this.toolbarBorderHeight=1,this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return s.prototype.initializeFormDesignerToolbar=function(){var e=this;this.toolbarElement=F("div",{id:this.pdfViewer.element.id+"_formdesigner_toolbar",className:"e-pv-formdesigner-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),this.toolbar=new tr({width:"",height:"",overflowMode:"Popup",items:this.createToolbarItems(),clicked:this.onToolbarClicked.bind(this),created:function(){e.createDropDowns()}}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.afterToolbarCreation(),this.createSignContainer(),this.applyFormDesignerToolbarSettings(),this.showFormDesignerToolbar(null,!0)},s.prototype.resetFormDesignerToolbar=function(){this.pdfViewer.isFormDesignerToolbarVisible?(this.pdfViewer.designerMode=!0,this.pdfViewer.formDesignerModule.setMode("designer"),this.adjustViewer(!1),this.toolbarElement.style.display="",this.isToolbarHidden=!1,this.adjustViewer(!0),this.primaryToolbar.selectItem(this.primaryToolbar.formDesignerItem),this.pdfViewer.isFormDesignerToolbarVisible=!0):(this.toolbarElement.style.display="none",this.isToolbarHidden=!0,this.pdfViewer.isAnnotationToolbarVisible||this.adjustViewer(!0),this.primaryToolbar.deSelectItem(this.primaryToolbar.formDesignerItem),this.pdfViewer.isFormDesignerToolbarVisible=!1)},s.prototype.showFormDesignerToolbar=function(e,t){if(this.isToolbarHidden){var n=this.toolbarElement.style.display;this.toolbarElement.style.display="block",this.pdfViewer.designerMode=!0,this.pdfViewer.formDesignerModule.setMode("designer"),t||(this.pdfViewer.isFormDesignerToolbarVisible=!0),e?this.primaryToolbar.selectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.selectItem(this.primaryToolbar.formDesignerItem),"none"===n&&this.adjustViewer(!0)}else e?this.primaryToolbar.deSelectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.deSelectItem(this.primaryToolbar.formDesignerItem),this.adjustViewer(!1),this.toolbarElement.style.display="none",this.pdfViewer.formDesignerModule.setMode("edit"),this.pdfViewer.designerMode=!1,t||(this.pdfViewer.isFormDesignerToolbarVisible=!1);this.pdfViewer.magnification&&"fitToPage"===this.pdfViewer.magnification.fitType&&this.pdfViewer.magnification.fitToPage(),this.isToolbarHidden=!this.isToolbarHidden},s.prototype.adjustViewer=function(e){var t,i,n;if(X()){t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),i=this.pdfViewer.element.querySelector(".e-pv-toolbar");var r=this.pdfViewer.element.querySelector(".e-pv-formDesigner-toolbar");n=this.getToolbarHeight(r)}else t=this.pdfViewerBase.getElement("_sideBarToolbarSplitter"),i=this.pdfViewerBase.getElement("_toolbarContainer"),n=this.getToolbarHeight(this.toolbarElement);var o=this.getToolbarHeight(i),a=this.pdfViewerBase.navigationPane.sideBarToolbar,l=this.pdfViewerBase.navigationPane.sideBarContentContainer,h=this.pdfViewerBase.navigationPane.commentPanelContainer,d=this.pdfViewerBase.navigationPane.commentPanelResizer,p="";e?(this.pdfViewer.enableToolbar?(a.style.top=o+n+"px",l.style.top=o+n+"px",t.style.top=o+n+"px",h.style.top=o+n+"px",d.style.top=o+n+"px"):(a.style.top=n+"px",l.style.top=n+"px",t.style.top=n+"px",h.style.top=n+"px",d.style.top=o+n+"px"),this.pdfViewer.enableToolbar||(o=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n+o)+"px",p=this.getNavigationToolbarHeight(n+o),a.style.height=p,t.style.height=p,d.style.height=p,l.style.height=p):(this.pdfViewer.enableToolbar?(a.style.top=o+"px",l.style.top=o+"px",t.style.top=o+"px",h.style.top=o+"px",d.style.top=o+"px"):(a.style.top="1px",a.style.height="100%",l.style.top="1px",l.style.height="100%",t.style.top="1px",t.style.height="100%",h.style.top="1px",h.style.height="100%",d.style.top="1px",d.style.height="100%"),this.pdfViewer.enableToolbar||(o=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n)+"px",p=this.getNavigationToolbarHeight(o),a.style.height=p,t.style.height=p,d.style.height=p,l.style.height=p,"0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(a.style.top)+"px"))},s.prototype.getElementHeight=function(e){try{return e.getBoundingClientRect().height}catch{return 0}},s.prototype.updateViewerHeight=function(e,t){return this.getElementHeight(this.pdfViewer.element)-t},s.prototype.resetViewerHeight=function(e,t){return e+t},s.prototype.getNavigationToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},s.prototype.updateContentContainerHeight=function(e,t){var i;if(t){var n=this.pdfViewer.element.querySelector(".e-pv-formDesigner-toolbar");i=this.getToolbarHeight(n)}else i=this.getToolbarHeight(this.toolbarElement);var r=this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();0!==r.height&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=e?r.height-i+"px":r.height+i+"px")},s.prototype.getToolbarHeight=function(e){var t=e.getBoundingClientRect().height;return 0===t&&e===this.pdfViewerBase.getElement("_toolbarContainer")&&(t=parseFloat(window.getComputedStyle(e).height)+this.toolbarBorderHeight),t},s.prototype.createToolbarItems=function(){var e=this.getTemplate("button","_formfield_signature","e-pv-annotation-handwritten-container"),t=[];return t.push({prefixIcon:"e-pv-textbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_textbox",align:"Left"}),t.push({prefixIcon:"e-pv-password-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_passwordfield",align:"Left"}),t.push({prefixIcon:"e-pv-checkbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_checkbox",align:"Left"}),t.push({prefixIcon:"e-pv-radiobutton-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_radiobutton",align:"Left"}),t.push({prefixIcon:"e-pv-dropdown-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_dropdown",align:"Left"}),t.push({prefixIcon:"e-pv-listbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_listbox",align:"Left"}),t.push({template:e,align:"Left"}),t.push({type:"Separator",align:"Left"}),t.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_formdesigner_delete",align:"Left"}),t.push({prefixIcon:"e-pv-annotation-tools-close-icon e-pv-icon",className:"e-pv-annotation-tools-close-container",id:this.pdfViewer.element.id+"_formdesigner_close",align:"Right"}),t},s.prototype.createSignContainer=function(){var e=this;this.handWrittenSignatureItem=this.pdfViewerBase.getElement("_formfield_signature"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_formfield_signature"),this.pdfViewer.localeObj.getConstant("HandwrittenSignatureDialogHeaderText"));var n=new Br({items:[{text:"ADD SIGNATURE"},{separator:!0},{text:"ADD INITIAL"}],iconCss:"e-pv-handwritten-icon e-pv-icon",cssClass:"e-pv-handwritten-popup",beforeItemRender:function(r){var o;e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1),r.element&&-1!==r.element.className.indexOf("e-separator")&&(r.element.style.margin="8px 0",r.element.setAttribute("role","menuitem"),r.element.setAttribute("aria-label","separator")),"ADD SIGNATURE"===r.item.text&&(r.element.innerHTML="",(o=F("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),o.textContent=e.pdfViewer.localeObj.getConstant("SignatureFieldDialogHeaderText"),o.style.width="en-US"===e.pdfViewer.locale?"130px":"auto",o.style.height="36px",o.addEventListener("click",e.clickSignature.bind(e)),r.element.appendChild(o),r.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),r.element.style.width="206px",r.element.style.display="flex",r.element.style.flexDirection="column",r.element.style.height="auto",r.element.style.alignItems="center",r.element.setAttribute("role","menuitem")),"ADD INITIAL"===r.item.text&&(r.element.innerHTML="",(o=F("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),o.textContent=e.pdfViewer.localeObj.getConstant("InitialFieldDialogHeaderText"),o.style.width="en-US"===e.pdfViewer.locale?"130px":"auto",o.style.height="36px",o.addEventListener("click",e.clickInitial.bind(e)),r.element.appendChild(o),r.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),r.element.style.width="206px",r.element.style.display="flex",r.element.style.flexDirection="column",r.element.style.height="auto",r.element.style.alignItems="center",r.element.setAttribute("role","menuitem"))}});this.pdfViewer.enableRtl&&(n.enableRtl=this.pdfViewer.enableRtl),n.appendTo(this.handWrittenSignatureItem)},s.prototype.hoverInitialBtn=function(e){var t=e.target,i=c(e.path)?e.composedPath()[0].id:e.path[0].id;if(i!=="sign_"+i.split("_")[1]&&i!=="delete_"+i.split("_")[1]){var n=document.getElementById(t.id);c(n)&&(n=document.getElementById(t.parentElement.id)),null==n||t.id==="sign_"+t.id.split("_")[1]&&t.id==="sign_border_"+t.id.split("_")[2]?null!=n.parentElement&&(t.id!=="sign_"+t.id.split("_")[1]||t.id!=="sign_border_"+t.id.split("_")[2])&&(n.parentElement.style.background="transparent",n.parentElement.style.cursor="default"):(n.style.background="transparent",n.style.cursor="default")}},s.prototype.getTemplate=function(e,t,i){var n=F(e,{id:this.pdfViewer.element.id+t});return i&&(n.className=i),n.outerHTML},s.prototype.onToolbarClicked=function(e){e&&e.item&&(-1!==e.item.id.indexOf("textbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("Textbox"):-1!==e.item.id.indexOf("passwordfield")?this.pdfViewer.formDesignerModule.setFormFieldMode("Password"):-1!==e.item.id.indexOf("checkbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("CheckBox"):-1!==e.item.id.indexOf("radiobutton")?this.pdfViewer.formDesignerModule.setFormFieldMode("RadioButton"):-1!==e.item.id.indexOf("dropdown")?this.pdfViewer.formDesignerModule.setFormFieldMode("DropDown"):-1!==e.item.id.indexOf("listbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("ListBox"):-1!==e.item.id.indexOf("signature")?this.pdfViewer.formDesignerModule.setFormFieldMode("SignatureField"):-1!==e.item.id.indexOf("close")?this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem):-1!==e.item.id.indexOf("delete")&&(this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0]),this.showHideDeleteIcon(!1)),this.pdfViewer.selectedItems.formFields.length>0&&this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.formFields[0].pageIndex))},s.prototype.clickSignature=function(e){this.pdfViewer.formDesignerModule.setFormFieldMode("SignatureField")},s.prototype.clickInitial=function(e){this.pdfViewer.isInitialFieldToolbarSelection=!0,this.pdfViewer.formDesignerModule.setFormFieldMode("InitialField"),this.pdfViewer.isInitialFieldToolbarSelection=!1},s.prototype.afterToolbarCreation=function(){this.textboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_textbox","e-pv-formdesigner-textbox",this.pdfViewer.localeObj.getConstant("Textbox")),this.passwordItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_passwordfield","e-pv-formdesigner-passwordfield",this.pdfViewer.localeObj.getConstant("Password")),this.checkboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_checkbox","e-pv-formdesigner-checkbox",this.pdfViewer.localeObj.getConstant("Check Box")),this.radioButtonItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_radiobutton","e-pv-formdesigner-radiobutton",this.pdfViewer.localeObj.getConstant("Radio Button")),this.dropdownItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_dropdown","e-pv-formdesigner-dropdown",this.pdfViewer.localeObj.getConstant("Dropdown")),this.listboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_listbox","e-pv-formdesigner-listbox",this.pdfViewer.localeObj.getConstant("List Box")),this.deleteItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_delete","e-pv-formdesigner-delete",this.pdfViewer.localeObj.getConstant("Delete FormField")),this.closeItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_close","e-pv-annotation-tools-close",null),this.showHideDeleteIcon(!1)},s.prototype.showHideDeleteIcon=function(e){this.toolbar&&this.toolbar.enableItems(this.deleteItem.parentElement,e)},s.prototype.applyFormDesignerToolbarSettings=function(){this.pdfViewer.toolbarSettings.formDesignerToolbarItems&&(-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("TextboxTool")?this.showTextboxTool(!0):this.showTextboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("PasswordTool")?this.showPasswordTool(!0):this.showPasswordTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("CheckBoxTool")?this.showCheckboxTool(!0):this.showCheckboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("RadioButtonTool")?this.showRadioButtonTool(!0):this.showRadioButtonTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DropdownTool")?this.showDropdownTool(!0):this.showDropdownTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("ListboxTool")?this.showListboxTool(!0):this.showListboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DrawSignatureTool")?this.showDrawSignatureTool(!0):this.showDrawSignatureTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DeleteTool")?this.showDeleteTool(!0):this.showDeleteTool(!1),this.showSeparator())},s.prototype.showTextboxTool=function(e){this.isTextboxBtnVisible=e,this.applyHideToToolbar(e,0,0)},s.prototype.showPasswordTool=function(e){this.isPasswordBtnVisible=e,this.applyHideToToolbar(e,1,1)},s.prototype.showCheckboxTool=function(e){this.isCheckboxBtnVisible=e,this.applyHideToToolbar(e,2,2)},s.prototype.showRadioButtonTool=function(e){this.isRadiobuttonBtnVisible=e,this.applyHideToToolbar(e,3,3)},s.prototype.showDropdownTool=function(e){this.isDropdownBtnVisible=e,this.applyHideToToolbar(e,4,4)},s.prototype.showListboxTool=function(e){this.isListboxBtnVisible=e,this.applyHideToToolbar(e,5,5)},s.prototype.showDrawSignatureTool=function(e){this.isSignatureBtnVisible=e,this.applyHideToToolbar(e,6,6)},s.prototype.showDeleteTool=function(e){this.isDeleteBtnVisible=e,this.applyHideToToolbar(e,8,8)},s.prototype.showSeparator=function(){!this.isSignatureBtnVisible&&!this.isDeleteBtnVisible&&this.applyHideToToolbar(!1,7,7)},s.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,r=t;r<=i;r++)this.toolbar.hideItem(r,n)},s.prototype.createDropDowns=function(){},s.prototype.destroy=function(){for(var e=[this.textboxItem,this.passwordItem,this.checkboxItem,this.radioButtonItem,this.listboxItem,this.dropdownItem,this.handWrittenSignatureItem,this.deleteItem],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},s.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},s}(),_Le=function(){function s(e,t){var i=this;this.isPageNavigationToolDisabled=!1,this.isMagnificationToolDisabled=!1,this.isSelectionToolDisabled=!1,this.isScrollingToolDisabled=!1,this.isOpenBtnVisible=!0,this.isNavigationToolVisible=!0,this.isMagnificationToolVisible=!0,this.isSelectionBtnVisible=!0,this.isScrollingBtnVisible=!0,this.isDownloadBtnVisible=!0,this.isPrintBtnVisible=!0,this.isSearchBtnVisible=!0,this.isTextSearchBoxDisplayed=!1,this.isUndoRedoBtnsVisible=!0,this.isAnnotationEditBtnVisible=!0,this.isFormDesignerEditBtnVisible=!0,this.isCommentBtnVisible=!0,this.isSubmitbtnvisible=!0,this.onToolbarKeydown=function(n){var r=n.target.id;r===i.pdfViewer.element.id+"_currentPageInput"||r===i.pdfViewer.element.id+"_zoomDropDown"||(n.preventDefault(),n.stopPropagation())},this.toolbarClickHandler=function(n){if(!E.isDevice||i.pdfViewer.enableDesktopMode)if(n.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[1]||n.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[2])n.cancel=!0;else if(n.originalEvent.target.id===i.pdfViewer.element.id+"_openIcon"){var r=n.originalEvent.target.parentElement.dataset;if(r&&r.tooltipId){var o=document.getElementById(r.tooltipId);o&&(o.style.display="none")}}i.handleToolbarBtnClick(n);var a=n.originalEvent.target;!E.isDevice||i.pdfViewer.enableDesktopMode?n.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[1]||n.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[2]||n.originalEvent.target===i.currentPageBoxElement||n.originalEvent.target===i.textSearchItem.childNodes[0]||a.parentElement.id!==i.pdfViewer.element.id+"_toolbarContainer_nav"&&a.id!==i.pdfViewer.element.id+"_toolbarContainer_nav"&&(n.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer()):(n.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer())},this.loadDocument=function(n){if(null!==n.target.files[0]){var o=n.target.files[0];if(o){i.uploadedDocumentName=o.name;var a=new FileReader;a.readAsDataURL(o),a.onload=function(l){var h=l.currentTarget.result;X()?i.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",h):i.pdfViewer.load(h,null)}}}},this.navigateToPage=function(n){if(13===n.which){var r=parseInt(i.currentPageBoxElement.value);null!==r&&r>0&&r<=i.pdfViewerBase.pageCount?i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToPage(r):i.updateCurrentPage(i.pdfViewerBase.currentPageNumber),i.currentPageBoxElement.blur(),i.pdfViewerBase.focusViewerContainer()}},this.textBoxFocusOut=function(){(null===i.currentPageBox.value||i.currentPageBox.value>=i.pdfViewerBase.pageCount||i.currentPageBox.value!==i.pdfViewerBase.currentPageNumber)&&i.updateCurrentPage(i.pdfViewerBase.currentPageNumber)},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.intializeToolbar=function(e){var t;return X()?(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(t=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.toolbarElement=t):t=this.createToolbar(e),!!document.documentMode&&(X()?this.pdfViewerBase.blazorUIAdaptor.totalPageElement.classList.add("e-pv-total-page-ms"):E.isDevice||this.totalPageItem.classList.add("e-pv-total-page-ms")),this.createFileElement(t),this.wireEvent(),X()?((!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.initialEnableItems(),this.pdfViewerBase.navigationPane.adjustPane(),this.pdfViewer.enableToolbar&&this.bindOpenIconEvent()),this.PanElement=document.getElementById(this.pdfViewer.element.id+"_handTool").children[0],this.PanElement.classList.add("e-pv-tbar-btn"),this.SelectToolElement=document.getElementById(this.pdfViewer.element.id+"_selectTool").children[0],this.SelectToolElement.classList.add("e-pv-tbar-btn"),this.CommentElement=document.getElementById(this.pdfViewer.element.id+"_comment").children[0],this.CommentElement.classList.add("e-pv-tbar-btn"),this.annotationToolbarModule=new rJ(this.pdfViewer,this.pdfViewerBase,this),(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar||this.pdfViewer.enableDesktopMode&&E.isDevice)&&this.annotationToolbarModule.afterAnnotationToolbarCreationInBlazor()):(this.updateToolbarItems(),!E.isDevice||this.pdfViewer.enableDesktopMode?(this.applyToolbarSettings(),this.initialEnableItems(),this.pdfViewerBase.navigationPane.adjustPane()):this.initialEnableItems(),this.pdfViewer.annotationModule&&(this.annotationToolbarModule=new rJ(this.pdfViewer,this.pdfViewerBase,this),(!E.isDevice||this.pdfViewer.enableDesktopMode)&&this.annotationToolbarModule.initializeAnnotationToolbar()),this.pdfViewer.formDesignerModule&&(this.formDesignerToolbarModule=new HLe(this.pdfViewer,this.pdfViewerBase,this),(!E.isDevice||this.pdfViewer.enableDesktopMode)&&this.formDesignerToolbarModule.initializeFormDesignerToolbar())),t},s.prototype.bindOpenIconEvent=function(){var e=document.getElementById(this.pdfViewer.element.id+"_open");e&&e.addEventListener("click",this.openFileDialogBox.bind(this))},s.prototype.InitializeMobileToolbarInBlazor=function(){var e;e=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar"),this.createFileElement(e),this.wireEvent()},s.prototype.showToolbar=function(e){var t=this.toolbarElement;e?(t.style.display="block",E.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar()):(this.pdfViewerBase.toolbarHeight=0,e&&(E.isDevice&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.annotationToolbarModule.toolbarCreated=!1,this.annotationToolbarModule.adjustMobileViewer(),this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="none"),E.isDevice&&this.annotationToolbarModule.propertyToolbar&&(this.annotationToolbarModule.propertyToolbar.element.style.display="none")),t.style.display="none")},s.prototype.showNavigationToolbar=function(e){if(!E.isDevice||this.pdfViewer.enableDesktopMode){var t=this.pdfViewerBase.navigationPane.sideBarToolbar,i=this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;e?(t.style.display="block",i.style.display="block",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.clear()):(t.style.display="none",i.style.display="none",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.updateViewerContainerOnClose())}},s.prototype.showAnnotationToolbar=function(e){e?(this.annotationToolbarModule.isToolbarHidden=!0,this.annotationToolbarModule.showAnnotationToolbar()):(this.annotationToolbarModule.isToolbarHidden=!1,this.annotationToolbarModule.showAnnotationToolbar())},s.prototype.showToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.showOpenOption(t);break;case"PageNavigationTool":this.showPageNavigationTool(t);break;case"MagnificationTool":this.showMagnificationTool(t);break;case"SelectionTool":this.showSelectionTool(t);break;case"PanTool":this.showScrollingTool(t);break;case"DownloadOption":this.showDownloadOption(t);break;case"PrintOption":this.showPrintOption(t);break;case"SearchOption":this.showSearchOption(t);break;case"UndoRedoTool":this.showUndoRedoTool(t);break;case"AnnotationEditTool":this.showAnnotationEditTool(t);break;case"FormDesignerEditTool":this.showFormDesignerEditTool(t);break;case"CommentTool":this.showCommentOption(t);break;case"SubmitForm":this.showSubmitForm(t)}this.applyHideToToolbar(!0,1,1),this.applyHideToToolbar(!0,8,8),this.applyHideToToolbar(!0,12,12),this.applyHideToToolbar(!0,15,15),this.showSeparator(e)},s.prototype.enableToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.enableOpenOption(t);break;case"PageNavigationTool":this.isPageNavigationToolDisabled=t,this.enablePageNavigationTool(t);break;case"MagnificationTool":this.isMagnificationToolDisabled=t,this.enableMagnificationTool(t);break;case"SelectionTool":this.isSelectionToolDisabled=t,this.enableSelectionTool(t);break;case"PanTool":this.isScrollingToolDisabled=t,this.enableScrollingTool(t);break;case"DownloadOption":this.enableDownloadOption(t);break;case"PrintOption":this.enablePrintOption(t);break;case"SearchOption":this.enableSearchOption(t);break;case"UndoRedoTool":this.enableUndoRedoTool(t);break;case"AnnotationEditTool":this.enableAnnotationEditTool(t);break;case"FormDesignerEditTool":this.enableFormDesignerEditTool(t);break;case"CommentTool":this.enableCommentsTool(t)}},s.prototype.DisableToolbarItems=function(e,t){switch(e){case"Print":this.enablePrintOption(t);break;case"CopyContent":this.isSelectionToolDisabled=t,this.enableSelectionTool(t),t?(this.pdfViewerBase.initiateTextSelectMode(),this.updateInteractionTools(t)):(this.pdfViewerBase.initiatePanning(),this.updateInteractionTools(t));break;case"EditAnnotations":this.enableAnnotationEditTool(t),this.annotationToolbarModule&&!this.annotationToolbarModule.isToolbarHidden&&this.annotationToolbarModule.showAnnotationToolbar()}},s.prototype.showOpenOption=function(e){this.isOpenBtnVisible=e,this.applyHideToToolbar(e,0,0)},s.prototype.showPageNavigationTool=function(e){this.isNavigationToolVisible=e,this.applyHideToToolbar(e,2,7)},s.prototype.showMagnificationTool=function(e){this.isMagnificationToolVisible=e,this.applyHideToToolbar(e,9,11)},s.prototype.showSelectionTool=function(e){this.isSelectionBtnVisible=e,this.applyHideToToolbar(e,13,13)},s.prototype.showScrollingTool=function(e){this.isScrollingBtnVisible=e,this.applyHideToToolbar(e,14,14)},s.prototype.showDownloadOption=function(e){this.isDownloadBtnVisible=e,!E.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,26,26):this.applyHideToToolbar(e,5,5)},s.prototype.showPrintOption=function(e){this.isPrintBtnVisible=e,this.applyHideToToolbar(e,25,25)},s.prototype.showSearchOption=function(e){this.isSearchBtnVisible=e,!E.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,22,22):this.applyHideToToolbar(e,5,5)},s.prototype.showUndoRedoTool=function(e){this.isUndoRedoBtnsVisible=e,!E.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,16,17):this.applyHideToToolbar(e,2,3)},s.prototype.showCommentOption=function(e){this.pdfViewer.enableStickyNotesAnnotation?(this.isCommentBtnVisible=e,this.applyHideToToolbar(e,18,19)):(this.isCommentBtnVisible=e,this.applyHideToToolbar(this.pdfViewer.enableStickyNotesAnnotation,18,19))},s.prototype.showAnnotationEditTool=function(e){this.isAnnotationEditBtnVisible=e,!E.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,23,23):this.applyHideToToolbar(e,4,4)},s.prototype.showFormDesignerEditTool=function(e){this.isFormDesignerEditBtnVisible=e,this.applyHideToToolbar(e,24,24)},s.prototype.showSubmitForm=function(e){this.isSubmitbtnvisible=e,this.applyHideToToolbar(e,20,21)},s.prototype.enableOpenOption=function(e){this.toolbar.enableItems(this.openDocumentItem.parentElement,e)},s.prototype.enablePageNavigationTool=function(e){this.toolbar.enableItems(this.firstPageItem.parentElement,e),this.toolbar.enableItems(this.previousPageItem.parentElement,e),this.toolbar.enableItems(this.nextPageItem.parentElement,e),this.toolbar.enableItems(this.lastPageItem.parentElement,e),this.currentPageBox.readonly=!e},s.prototype.enableMagnificationTool=function(e){this.toolbar.enableItems(this.zoomInItem.parentElement,e),this.toolbar.enableItems(this.zoomOutItem.parentElement,e),this.zoomDropDown.readonly=!e},s.prototype.enableSelectionTool=function(e){this.textSelectItem&&this.textSelectItem.parentElement&&this.toolbar.enableItems(this.textSelectItem.parentElement,e)},s.prototype.enableScrollingTool=function(e){this.toolbar.enableItems(this.panItem.parentElement,e)},s.prototype.enableDownloadOption=function(e){this.toolbar.enableItems(this.downloadItem.parentElement,e)},s.prototype.enablePrintOption=function(e){this.toolbar.enableItems(this.printItem.parentElement,e)},s.prototype.enableSearchOption=function(e){this.toolbar.enableItems(this.textSearchItem.parentElement,e)},s.prototype.enableUndoRedoTool=function(e){this.toolbar.enableItems(this.undoItem.parentElement,e),this.toolbar.enableItems(this.redoItem.parentElement,e)},s.prototype.enableAnnotationEditTool=function(e){this.toolbar.enableItems(this.annotationItem.parentElement,e)},s.prototype.enableFormDesignerEditTool=function(e){this.toolbar.enableItems(this.formDesignerItem.parentElement,e)},s.prototype.enableCommentsTool=function(e){this.pdfViewer.enableStickyNotesAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,e)},s.prototype.resetToolbar=function(){if(!E.isDevice||this.pdfViewer.enableDesktopMode)if(this.currentPageBox.min=0,this.currentPageBox.value=0,this.updateTotalPage(),this.updateToolbarItems(),this.annotationToolbarModule)this.annotationToolbarModule.clear();else if(this.annotationToolbarModule){this.annotationToolbarModule.propertyToolbar&&this.annotationToolbarModule.propertyToolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_commentscontentcontainer");e&&(e.innerHTML="")}},s.prototype.updateToolbarItems=function(){!E.isDevice||this.pdfViewer.enableDesktopMode?this.toolbar&&(0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.downloadItem.parentElement,!1),this.toolbar.enableItems(this.printItem.parentElement,!1),this.toolbar.enableItems(this.commentItem.parentElement,!1),this.updateUndoRedoButtons(),this.updateNavigationButtons(),this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!0),this.toolbar.enableItems(this.submitItem.parentElement,!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!1),this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.annotationItem.parentElement,!1),this.toolbar.enableItems(this.formDesignerItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!1),this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.deSelectItem(this.annotationItem),this.annotationToolbarModule&&this.annotationToolbarModule.resetToolbar(),this.deSelectItem(this.formDesignerItem),this.formDesignerToolbarModule&&this.formDesignerToolbarModule.resetFormDesignerToolbar()):this.pdfViewerBase.pageCount>0&&this.pdfViewerBase.getElement("_currentPageInputContainer")&&(this.toolbar.enableItems(this.downloadItem.parentElement,!0),this.toolbar.enableItems(this.printItem.parentElement,!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!0),this.updateUndoRedoButtons(),this.updateNavigationButtons(),this.updateZoomButtons(),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!1),this.updateInteractionItems(),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,!0),this.pdfViewer.formDesignerModule&&this.pdfViewer.enableFormDesigner&&this.toolbar.enableItems(this.formDesignerItem.parentElement,!0),this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch&&this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableStickyNotesAnnotation&&this.toolbar.enableItems(this.commentItem.parentElement,!0)),this.pdfViewer.toolbarSettings.annotationToolbarItems&&(0===this.pdfViewer.toolbarSettings.annotationToolbarItems.length||!this.pdfViewer.annotationModule||!this.pdfViewer.enableAnnotationToolbar)&&this.enableToolbarItem(["AnnotationEditTool"],!1),this.pdfViewer.toolbarSettings.formDesignerToolbarItems&&(0===this.pdfViewer.toolbarSettings.formDesignerToolbarItems.length||!this.pdfViewer.formDesignerModule||!this.pdfViewer.enableFormDesignerToolbar)&&this.enableToolbarItem(["FormDesignerEditTool"],!1),this.pdfViewer.enableDownload||this.enableDownloadOption(!1),this.pdfViewer.enablePrint||this.enablePrintOption(!1)):0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.toolbar.enableItems(this.moreOptionItem.parentElement,!1),this.toolbar.enableItems(this.annotationItem.parentElement,!1)):this.pdfViewerBase.pageCount>0&&(this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.toolbar.enableItems(this.moreOptionItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,!0),(!this.pdfViewer.annotationModule||!this.pdfViewer.enableAnnotationToolbar)&&this.enableToolbarItem(["AnnotationEditTool"],!1),this.updateUndoRedoButtons())},s.prototype.updateNavigationButtons=function(){this.pdfViewer.navigationModule&&!this.isPageNavigationToolDisabled?0===this.pdfViewerBase.pageCount||1===this.pdfViewerBase.currentPageNumber&&1===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):1===this.pdfViewerBase.currentPageNumber&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):this.pdfViewerBase.currentPageNumber===this.pdfViewerBase.pageCount&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):this.pdfViewerBase.currentPageNumber>1&&this.pdfViewerBase.currentPageNumber<this.pdfViewerBase.pageCount&&(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1),this.currentPageBox.readonly=!0)},s.prototype.updateZoomButtons=function(){this.pdfViewer.magnificationModule&&!this.isMagnificationToolDisabled&&(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.pdfViewer.magnificationModule.zoomFactor<=.1?(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1)):this.pdfViewer.magnificationModule.zoomFactor>=4?(this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)):(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)))},s.prototype.updateUndoRedoButtons=function(){this.pdfViewer.annotationModule&&this.pdfViewerBase.pageCount>0?X()?(this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.actionCollection,"undo"),this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.redoCollection,"redo")):(!c(this.undoItem)&&!c(this.undoItem.parentElement)&&this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection,this.undoItem.parentElement),!c(this.redoItem)&&!c(this.redoItem.parentElement)&&this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection,this.redoItem.parentElement)):X()?this.pdfViewerBase.blazorUIAdaptor.disableUndoRedoButton():this.disableUndoRedoButtons()},s.prototype.enableCollectionAvailable=function(e,t){this.toolbar.enableItems(t,e.length>0)},s.prototype.enableCollectionAvailableInBlazor=function(e,t){this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(t,e.length>0)},s.prototype.disableUndoRedoButtons=function(){this.toolbar.enableItems(this.undoItem.parentElement,!1),this.toolbar.enableItems(this.redoItem.parentElement,!1)},s.prototype.destroy=function(){X()||(this.unWireEvent(),this.destroyComponent(),this.moreDropDown&&this.moreDropDown.destroy(),this.annotationToolbarModule&&this.annotationToolbarModule.destroy(),this.formDesignerToolbarModule&&this.formDesignerToolbarModule.destroy(),this.toolbar&&this.toolbar.destroy(),this.toolbarElement.parentElement.removeChild(this.toolbarElement))},s.prototype.destroyComponent=function(){for(var e=[this.openDocumentItem,this.firstPageItem,this.previousPageItem,this.nextPageItem,this.lastPageItem,this.currentPageBoxElement,this.zoomOutItem,this.zoomInItem,this.zoomDropdownItem,this.textSelectItem,this.panItem,this.submitItem,this.undoItem,this.redoItem,this.commentItem,this.textSearchItem,this.annotationItem,this.formDesignerItem,this.printItem,this.downloadItem],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},s.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},s.prototype.updateCurrentPage=function(e){!E.isDevice||this.pdfViewer.enableDesktopMode?(X()?this.pdfViewerBase.blazorUIAdaptor.pageChanged(e):c(this.currentPageBox)||(this.currentPageBox.value===e&&(this.currentPageBoxElement.value=e.toString()),this.currentPageBox.value=e),this.pdfViewerBase.currentPageNumber=e,this.pdfViewer.currentPageNumber=e):(this.pdfViewerBase.mobileSpanContainer.innerHTML=e.toString(),this.pdfViewerBase.mobilecurrentPageContainer.innerHTML=e.toString())},s.prototype.updateTotalPage=function(){(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.pdfViewerBase.pageCount>0&&(c(this.currentPageBox)||(this.currentPageBox.min=1)),c(this.totalPageItem)||(this.totalPageItem.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString()))},s.prototype.openFileDialogBox=function(e){e.preventDefault(),this.fileInputElement.click()},s.prototype.createToolbar=function(e){var t=this;return this.toolbarElement=F("div",{id:this.pdfViewer.element.id+"_toolbarContainer",className:"e-pv-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),!E.isDevice||this.pdfViewer.enableDesktopMode?(this.toolbar=new tr({clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup",cssClass:"e-pv-toolbar-scroll",items:this.createToolbarItems(),created:function(){t.createZoomDropdown(),t.createNumericTextBox(),t.toolbar.refreshOverflow()}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.applyToolbarSettings(),this.afterToolbarCreation(),this.updateTotalPage(),this.toolbarElement.addEventListener("keydown",this.onToolbarKeydown),this.toolbarElement.setAttribute("aria-label","Toolbar")):(this.createToolbarItemsForMobile(),this.afterToolbarCreationInMobile(),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.applyToolbarSettingsForMobile(),this.disableUndoRedoButtons()),this.toolbarElement},s.prototype.createToolbarItems=function(){var e=this.createCurrentPageInputTemplate(),t=this.createTotalPageTemplate(),i=this.createZoomDropdownElement(),n=[],r='<button id="'+this.pdfViewer.element.id+'_submitForm" class="e-tbar-btn" style="font-size:15px"><span id="'+this.pdfViewer.element.id+'_submitFormSpan" class="e-tbar-btn-text e-pv-submitform-text">'+this.pdfViewer.localeObj.getConstant("SubmitForm")+"</span></button>";return n.push({prefixIcon:"e-pv-open-document-icon e-pv-icon",cssClass:"e-pv-open-document-container",id:this.pdfViewer.element.id+"_open",text:this.pdfViewer.localeObj.getConstant("Open text"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-open-separator-container"}),this.pdfViewer.enableRtl?(n.push({prefixIcon:"e-pv-last-page-navigation-icon e-pv-icon",cssClass:"e-pv-last-page-navigation-container",id:this.pdfViewer.element.id+"_firstPage",text:this.pdfViewer.localeObj.getConstant("First text"),align:"Left"}),n.push({prefixIcon:"e-pv-next-page-navigation-icon e-pv-icon",cssClass:"e-pv-next-page-navigation-container",id:this.pdfViewer.element.id+"_previousPage",text:this.pdfViewer.localeObj.getConstant("Previous text"),align:"Left"}),n.push({prefixIcon:"e-pv-previous-page-navigation-icon e-pv-icon",cssClass:"e-pv-previous-page-navigation-container",id:this.pdfViewer.element.id+"_nextPage",text:this.pdfViewer.localeObj.getConstant("Next text"),align:"Left"}),n.push({prefixIcon:"e-pv-first-page-navigation-icon e-pv-icon",cssClass:"e-pv-first-page-navigation-container",id:this.pdfViewer.element.id+"_lastPage",text:this.pdfViewer.localeObj.getConstant("Last text"),align:"Left"}),n.push({template:t,align:"Left",cssClass:"e-pv-total-page-container"}),n.push({template:e,align:"Left",cssClass:"e-pv-current-page-container"})):(n.push({prefixIcon:"e-pv-first-page-navigation-icon e-pv-icon",cssClass:"e-pv-first-page-navigation-container",id:this.pdfViewer.element.id+"_firstPage",text:this.pdfViewer.localeObj.getConstant("First text"),align:"Left"}),n.push({prefixIcon:"e-pv-previous-page-navigation-icon e-pv-icon",cssClass:"e-pv-previous-page-navigation-container",id:this.pdfViewer.element.id+"_previousPage",text:this.pdfViewer.localeObj.getConstant("Previous text"),align:"Left"}),n.push({prefixIcon:"e-pv-next-page-navigation-icon e-pv-icon",cssClass:"e-pv-next-page-navigation-container",id:this.pdfViewer.element.id+"_nextPage",text:this.pdfViewer.localeObj.getConstant("Next text"),align:"Left"}),n.push({prefixIcon:"e-pv-last-page-navigation-icon e-pv-icon",cssClass:"e-pv-last-page-navigation-container",id:this.pdfViewer.element.id+"_lastPage",text:this.pdfViewer.localeObj.getConstant("Last text"),align:"Left"}),n.push({template:e,align:"Left",cssClass:"e-pv-current-page-container"}),n.push({template:t,align:"Left",cssClass:"e-pv-total-page-container"})),n.push({type:"Separator",align:"Left",cssClass:"e-pv-navigation-separator-container"}),n.push({prefixIcon:"e-pv-zoom-out-icon e-pv-icon",cssClass:"e-pv-zoom-out-container",id:this.pdfViewer.element.id+"_zoomOut",text:this.pdfViewer.localeObj.getConstant("Zoom out text"),align:"Left"}),n.push({prefixIcon:"e-pv-zoom-in-icon e-pv-icon",cssClass:"e-pv-zoom-in-container",id:this.pdfViewer.element.id+"_zoomIn",text:this.pdfViewer.localeObj.getConstant("Zoom in text"),align:"Left"}),n.push({template:i,cssClass:"e-pv-zoom-drop-down-container",align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-magnification-separator-container"}),n.push({prefixIcon:"e-pv-text-select-tool-icon e-pv-icon",cssClass:"e-pv-text-select-tool-container",id:this.pdfViewer.element.id+"_selectTool",text:this.pdfViewer.localeObj.getConstant("Selection text")}),n.push({prefixIcon:"e-pv-pan-tool-icon e-pv-icon",cssClass:"e-pv-pan-tool-container",id:this.pdfViewer.element.id+"_handTool",text:this.pdfViewer.localeObj.getConstant("Pan text")}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-pan-separator-container"}),n.push({prefixIcon:"e-pv-undo-icon e-pv-icon",cssClass:"e-pv-undo-container",id:this.pdfViewer.element.id+"_undo",text:this.pdfViewer.localeObj.getConstant("Undo"),align:"Left"}),n.push({prefixIcon:"e-pv-redo-icon e-pv-icon",cssClass:"e-pv-redo-container",id:this.pdfViewer.element.id+"_redo",text:this.pdfViewer.localeObj.getConstant("Redo"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-undo-separator-container"}),n.push({prefixIcon:"e-pv-comment-icon e-pv-icon",cssClass:"e-pv-comment-container",id:this.pdfViewer.element.id+"_comment",text:this.pdfViewer.localeObj.getConstant("Add Comments"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-comment-separator-container"}),n.push({template:r,cssClass:"e-pv-submit",align:"Left"}),n.push({prefixIcon:"e-pv-text-search-icon e-pv-icon",cssClass:"e-pv-text-search-container",id:this.pdfViewer.element.id+"_search",text:this.pdfViewer.localeObj.getConstant("Search text"),align:"Right"}),n.push({prefixIcon:"e-pv-annotation-icon e-pv-icon",cssClass:"e-pv-annotation-container",id:this.pdfViewer.element.id+"_annotation",text:this.pdfViewer.localeObj.getConstant("Annotation Edit text"),align:"Right"}),n.push({prefixIcon:"e-pv-formdesigner-icon e-pv-icon",cssClass:"e-pv-formdesigner-container",id:this.pdfViewer.element.id+"_formdesigner",text:this.pdfViewer.localeObj.getConstant("FormDesigner Edit text"),align:"Right"}),n.push({prefixIcon:"e-pv-print-document-icon e-pv-icon",cssClass:"e-pv-print-document-container",id:this.pdfViewer.element.id+"_print",text:this.pdfViewer.localeObj.getConstant("Print text"),align:"Right"}),n.push({prefixIcon:"e-pv-download-document-icon e-pv-icon",cssClass:"e-pv-download-document-container",id:this.pdfViewer.element.id+"_download",text:this.pdfViewer.localeObj.getConstant("Download"),align:"Right"}),n},s.prototype.afterToolbarCreationInMobile=function(){this.itemsContainer=this.toolbar.element.childNodes[0],this.itemsContainer.id=this.pdfViewer.element.id+"_toolbarItemsContainer",this.openDocumentItem=this.addClassToolbarItem("_open","e-pv-open-document",this.pdfViewer.localeObj.getConstant("Open")),this.undoItem=this.addClassToolbarItem("_undo","e-pv-undo",this.pdfViewer.localeObj.getConstant("Undo")),this.redoItem=this.addClassToolbarItem("_redo","e-pv-redo",this.pdfViewer.localeObj.getConstant("Redo")),this.annotationItem=this.addClassToolbarItem("_annotation","e-pv-annotation",this.pdfViewer.localeObj.getConstant("Annotation")),this.textSearchItem=this.addClassToolbarItem("_search","e-pv-text-search",this.pdfViewer.localeObj.getConstant("Text Search"))},s.prototype.afterToolbarCreation=function(){this.itemsContainer=this.toolbar.element.childNodes[0],this.itemsContainer.id=this.pdfViewer.element.id+"_toolbarItemsContainer",this.openDocumentItem=this.addClassToolbarItem("_open","e-pv-open-document",this.pdfViewer.localeObj.getConstant("Open")),this.undoItem=this.addClassToolbarItem("_undo","e-pv-undo",this.pdfViewer.localeObj.getConstant("Undo")),this.redoItem=this.addClassToolbarItem("_redo","e-pv-redo",this.pdfViewer.localeObj.getConstant("Redo")),this.pdfViewer.enableRtl?(this.firstPageItem=this.addClassToolbarItem("_firstPage","e-pv-last-page-navigation",this.pdfViewer.localeObj.getConstant("Go To First Page")),this.previousPageItem=this.addClassToolbarItem("_previousPage","e-pv-next-page-navigation",this.pdfViewer.localeObj.getConstant("Previous Page")),this.nextPageItem=this.addClassToolbarItem("_nextPage","e-pv-previous-page-navigation",this.pdfViewer.localeObj.getConstant("Next Page")),this.lastPageItem=this.addClassToolbarItem("_lastPage","e-pv-first-page-navigation",this.pdfViewer.localeObj.getConstant("Go To Last Page"))):(this.firstPageItem=this.addClassToolbarItem("_firstPage","e-pv-first-page-navigation",this.pdfViewer.localeObj.getConstant("Go To First Page")),this.previousPageItem=this.addClassToolbarItem("_previousPage","e-pv-previous-page-navigation",this.pdfViewer.localeObj.getConstant("Previous Page")),this.nextPageItem=this.addClassToolbarItem("_nextPage","e-pv-next-page-navigation",this.pdfViewer.localeObj.getConstant("Next Page")),this.lastPageItem=this.addClassToolbarItem("_lastPage","e-pv-last-page-navigation",this.pdfViewer.localeObj.getConstant("Go To Last Page"))),this.zoomOutItem=this.addClassToolbarItem("_zoomOut","e-pv-zoom-out",this.pdfViewer.localeObj.getConstant("Zoom Out")),this.zoomInItem=this.addClassToolbarItem("_zoomIn","e-pv-zoom-in",this.pdfViewer.localeObj.getConstant("Zoom In")),this.textSelectItem=this.addClassToolbarItem("_selectTool","e-pv-text-select-tool",this.pdfViewer.localeObj.getConstant("Text Selection")),this.panItem=this.addClassToolbarItem("_handTool","e-pv-pan-tool",this.pdfViewer.localeObj.getConstant("Panning")),this.commentItem=this.addClassToolbarItem("_comment","e-pv-comment",this.pdfViewer.localeObj.getConstant("Add Comments")),this.textSearchItem=this.addClassToolbarItem("_search","e-pv-text-search",this.pdfViewer.localeObj.getConstant("Text Search")),this.textSearchItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Search text")),this.annotationItem=this.addClassToolbarItem("_annotation","e-pv-annotation",this.pdfViewer.localeObj.getConstant("Annotation")),this.annotationItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Annotation Edit text")),this.formDesignerItem=this.addClassToolbarItem("_formdesigner","e-pv-formdesigner",this.pdfViewer.localeObj.getConstant("FormDesigner")),this.printItem=this.addClassToolbarItem("_print","e-pv-print-document",this.pdfViewer.localeObj.getConstant("Print")),this.downloadItem=this.addClassToolbarItem("_download","e-pv-download-document",this.pdfViewer.localeObj.getConstant("Download file")),this.zoomDropdownItem=this.pdfViewerBase.getElement("_zoomDropDown"),this.createTooltip(this.zoomDropdownItem,this.pdfViewer.localeObj.getConstant("Zoom")),this.zoomDropdownItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Zoom")),this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement,null,"_zoomDropDownContainer"),this.pdfViewerBase.getElement("_zoomDropDownContainer").style.minWidth="",this.createTooltip(this.currentPageBoxElement,this.pdfViewer.localeObj.getConstant("Page Number")),this.currentPageBoxElement.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Page Number")),this.submitItem=this.pdfViewerBase.getElement("_submitForm"),this.addPropertiesToolItemContainer(this.submitItem.parentElement,"e-pv-submit","_submitFormContainer"),this.createTooltip(this.submitItem,this.pdfViewer.localeObj.getConstant("SubmitForm")),this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement,"e-pv-current-page-container","_currentPageInputContainer"),this.pdfViewerBase.getElement("_currentPageInputContainer").style.minWidth="20px",this.totalPageItem=this.pdfViewerBase.getElement("_totalPage"),this.addPropertiesToolItemContainer(this.totalPageItem.parentElement,"e-pv-total-page-container","_totalPageContainer")},s.prototype.addClassToolbarItem=function(e,t,i){var n=this.pdfViewerBase.getElement(e);if(n.classList.add(t),n.classList.add("e-pv-tbar-btn"),n.setAttribute("aria-label",i),n.parentElement.classList.add(t+"-container"),n.parentElement.classList.add("e-popup-text"),n.parentElement.id=this.pdfViewer.element.id+e+"Container",n.childNodes.length>0){var r=n.childNodes[0];r.id=this.pdfViewer.element.id+e+"Icon",r.classList.remove("e-icons"),r.classList.remove("e-btn-icon"),this.pdfViewer.enableRtl&&r.classList.add("e-right");var o=n.childNodes[1];o&&o.classList.contains("e-tbar-btn-text")&&(o.id=this.pdfViewer.element.id+e+"Text")}return n.style.width="",this.createTooltip(n,i),n},s.prototype.addPropertiesToolItemContainer=function(e,t,i){null!==t&&e.classList.add(t),e.classList.add("e-popup-text"),e.id=this.pdfViewer.element.id+i},s.prototype.createZoomDropdownElement=function(){return this.createToolbarItem("input",this.pdfViewer.element.id+"_zoomDropDown",null).outerHTML},s.prototype.createZoomDropdown=function(){var e=this,t=[{percent:"10%",id:"0"},{percent:"25%",id:"1"},{percent:"50%",id:"2"},{percent:"75%",id:"3"},{percent:"100%",id:"4"},{percent:"125%",id:"5"},{percent:"150%",id:"6"},{percent:"200%",id:"7"},{percent:"400%",id:"8"},{percent:e.pdfViewer.localeObj.getConstant("Fit Page"),id:"9"},{percent:e.pdfViewer.localeObj.getConstant("Fit Width"),id:"10"},{percent:e.pdfViewer.localeObj.getConstant("Automatic"),id:"11"}];e.zoomDropDown=new yp(e.pdfViewer.enableRtl?{dataSource:t,text:"100%",enableRtl:!0,fields:{text:"percent",value:"id"},readonly:!0,cssClass:"e-pv-zoom-drop-down-rtl",popupHeight:"450px",showClearButton:!1,open:e.openZoomDropdown.bind(e),select:function(i){"keydown"==i.e.type&&i.itemData.percent!==e.zoomDropDown.element.value&&(e.zoomDropDownChange(e.zoomDropDown.element.value),i.cancel=!0)}}:{dataSource:t,text:"100%",fields:{text:"percent",value:"id"},readonly:!0,cssClass:"e-pv-zoom-drop-down",popupHeight:"450px",showClearButton:!1,open:e.openZoomDropdown.bind(e),select:function(i){"keydown"==i.e.type&&i.itemData.percent!==e.zoomDropDown.element.value&&(e.zoomDropDownChange(e.zoomDropDown.element.value),i.cancel=!0)}}),e.zoomDropDown.appendTo(e.pdfViewerBase.getElement("_zoomDropDown"))},s.prototype.createCurrentPageInputTemplate=function(){return this.createToolbarItem("input",this.pdfViewer.element.id+"_currentPageInput",null).outerHTML},s.prototype.createTotalPageTemplate=function(){return this.createToolbarItem("span",this.pdfViewer.element.id+"_totalPage","e-pv-total-page").outerHTML},s.prototype.createNumericTextBox=function(){this.currentPageBox=new zr({value:0,format:"##",cssClass:"e-pv-current-page-box",showSpinButton:!1}),this.currentPageBoxElement=this.pdfViewerBase.getElement("_currentPageInput"),this.currentPageBox.appendTo(this.currentPageBoxElement)},s.prototype.createToolbarItemsForMobile=function(){this.toolbarElement.classList.add("e-pv-mobile-toolbar");var e='<button id="'+this.pdfViewer.element.id+'_more_option" class="e-tbar-btn"></button>';this.toolbar=new tr({items:[{prefixIcon:"e-pv-open-document-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Open"),id:this.pdfViewer.element.id+"_open"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-undo-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Undo"),id:this.pdfViewer.element.id+"_undo"},{prefixIcon:"e-pv-redo-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Redo"),id:this.pdfViewer.element.id+"_redo"},{prefixIcon:"e-pv-annotation-icon e-pv-icon",cssClass:"e-pv-annotation-container",tooltipText:this.pdfViewer.localeObj.getConstant("Annotation"),id:this.pdfViewer.element.id+"_annotation",align:"Right"},{prefixIcon:"e-pv-text-search-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Text Search"),id:this.pdfViewer.element.id+"_search",align:"Right"},{template:e,align:"Right"}],clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup"}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),this.openDocumentItem=this.pdfViewerBase.getElement("_open"),this.openDocumentItem.classList.add("e-pv-open-document"),this.openDocumentItem.firstElementChild.id=this.pdfViewer.element.id+"_openIcon",this.annotationItem=this.pdfViewerBase.getElement("_annotation"),this.annotationItem.classList.add("e-pv-annotation"),this.annotationItem.firstElementChild.id=this.pdfViewer.element.id+"_annotationIcon",this.textSearchItem=this.pdfViewerBase.getElement("_search"),this.textSearchItem.classList.add("e-pv-text-search"),this.textSearchItem.firstElementChild.id=this.pdfViewer.element.id+"_searchIcon",this.undoItem=this.pdfViewerBase.getElement("_undo"),this.undoItem.classList.add("e-pv-undo"),this.redoItem=this.pdfViewerBase.getElement("_redo"),this.redoItem.classList.add("e-pv-redo"),this.redoItem.firstElementChild.id=this.pdfViewer.element.id+"_redoIcon",this.undoItem.firstElementChild.id=this.pdfViewer.element.id+"_undoIcon",this.createMoreOption(this.pdfViewer.element.id+"_more_option")},s.prototype.createMoreOption=function(e){var t=this;this.moreOptionItem=document.getElementById(e);var i=[{text:this.pdfViewer.localeObj.getConstant("Download"),id:this.pdfViewer.element.id+"_menu_download",iconCss:"e-icons e-pv-download-document-icon e-pv-icon"},{text:this.pdfViewer.localeObj.getConstant("Bookmarks"),id:this.pdfViewer.element.id+"_menu_bookmarks",iconCss:"e-icons e-pv-bookmark-icon e-pv-icon"}];this.moreDropDown=new Br({items:i,iconCss:"e-pv-more-icon e-pv-icon",cssClass:"e-caret-hide",open:function(n){var r=t.moreDropDown.element.getBoundingClientRect();t.pdfViewer.enableRtl||(n.element.parentElement.style.left=r.left+r.width-n.element.parentElement.offsetWidth+"px")},select:function(n){switch(n.item.id){case t.pdfViewer.element.id+"_menu_download":t.pdfViewerBase.download();break;case t.pdfViewer.element.id+"_menu_bookmarks":t.showToolbar(!1),t.pdfViewerBase.navigationPane.createNavigationPaneMobile("bookmarks")}},beforeItemRender:function(n){n.item.id===t.pdfViewer.element.id+"_menu_bookmarks"&&(t.pdfViewer.bookmarkViewModule&&t.pdfViewer.bookmarkViewModule.bookmarks?n.element.classList.remove("e-disabled"):n.element.classList.add("e-disabled"))},close:function(n){t.moreOptionItem.blur(),t.pdfViewerBase.focusViewerContainer()}}),this.moreDropDown.appendTo("#"+e)},s.prototype.createToolbarItem=function(e,t,i){var n=F(e,{id:t});return null!==i&&(n.className=i),"input"===e&&t!==this.pdfViewer.element.id+"_zoomDropDown"&&(n.type="text"),n},s.prototype.createTooltip=function(e,t){null!==t&&new za({content:oo(function(){return t}),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(e)},s.prototype.onTooltipBeforeOpen=function(e){!this.pdfViewer.toolbarSettings.showTooltip&&this.toolbarElement.contains(e.target)&&(e.cancel=!0),this.annotationToolbarModule&&!this.pdfViewer.toolbarSettings.showTooltip&&(this.annotationToolbarModule.toolbarElement&&this.annotationToolbarModule.toolbarElement.contains(e.target)||this.annotationToolbarModule.shapeToolbarElement&&this.annotationToolbarModule.shapeToolbarElement.contains(e.target))&&(e.cancel=!0),this.formDesignerToolbarModule&&!this.pdfViewer.toolbarSettings.showTooltip&&this.formDesignerToolbarModule.toolbarElement&&this.formDesignerToolbarModule.toolbarElement.contains(e.target)&&(e.cancel=!0)},s.prototype.createFileElement=function(e){e&&(X()?this.fileInputElement=this.pdfViewer.element.querySelector(".e-pv-fileupload-element"):(this.fileInputElement=F("input",{id:this.pdfViewer.element.id+"_fileUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file"}}),this.fileInputElement.setAttribute("accept",".pdf"),this.fileInputElement.setAttribute("aria-label","file upload element")),e&&e.appendChild(this.fileInputElement))},s.prototype.wireEvent=function(){this.fileInputElement&&this.fileInputElement.addEventListener("change",this.loadDocument),X()||(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.toolbarElement.addEventListener("mouseup",this.toolbarOnMouseup.bind(this)),this.currentPageBoxElement.addEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.addEventListener("keypress",this.navigateToPage),this.zoomDropDown.change=this.zoomPercentSelect.bind(this),this.zoomDropDown.element.addEventListener("keypress",this.onZoomDropDownInput.bind(this)),this.zoomDropDown.element.addEventListener("click",this.onZoomDropDownInputClick.bind(this)))},s.prototype.unWireEvent=function(){this.fileInputElement&&this.fileInputElement.removeEventListener("change",this.loadDocument),(!E.isDevice||this.pdfViewer.enableDesktopMode)&&!X()&&(c(this.toolbarElement)||this.toolbarElement.removeEventListener("mouseup",this.toolbarOnMouseup.bind(this)),c(this.currentPageBoxElement)||(this.currentPageBoxElement.removeEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.removeEventListener("keypress",this.navigateToPage)),c(this.zoomDropDown)||(this.zoomDropDown.removeEventListener("change",this.zoomPercentSelect),this.zoomDropDown.element.removeEventListener("keypress",this.onZoomDropDownInput),this.zoomDropDown.element.removeEventListener("click",this.onZoomDropDownInputClick)))},s.prototype.onToolbarResize=function(e){E.isDevice&&!this.pdfViewer.enableDesktopMode?this.pdfViewerBase.navigationPane.toolbarResize():c(this.toolbar)||this.toolbar.refreshOverflow()},s.prototype.toolbarOnMouseup=function(e){(e.target===this.itemsContainer||e.target===this.toolbarElement)&&this.pdfViewerBase.focusViewerContainer()},s.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,r=t;r<=i;r++)if(this.toolbar.items[r]){var o=this.toolbar.items[r].cssClass;if(o&&""!==o){var a=this.toolbar.element.querySelector("."+o);a&&this.toolbar.hideItem(a,n)}else this.toolbar.hideItem(r,n)}},s.prototype.handleOpenIconClick=function(e){this.fileInputElement.click(),E.isDevice&&!this.pdfViewer.enableDesktopMode&&(X()||e.originalEvent.target.blur(),this.pdfViewerBase.focusViewerContainer())},s.prototype.handleToolbarBtnClick=function(e){switch(this.addInkAnnotation(),this.deSelectCommentAnnotation(),e.originalEvent.target.id){case this.pdfViewer.element.id+"_open":case this.pdfViewer.element.id+"_openIcon":case this.pdfViewer.element.id+"_openText":this.handleOpenIconClick(e);break;case this.pdfViewer.element.id+"_download":case this.pdfViewer.element.id+"_downloadIcon":case this.pdfViewer.element.id+"_downloadText":this.pdfViewerBase.download();break;case this.pdfViewer.element.id+"_print":case this.pdfViewer.element.id+"_printIcon":case this.pdfViewer.element.id+"_printText":this.pdfViewer.printModule&&this.pdfViewer.firePrintStart();break;case this.pdfViewer.element.id+"_undo":case this.pdfViewer.element.id+"_undoIcon":case this.pdfViewer.element.id+"_undoText":this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.undo();break;case this.pdfViewer.element.id+"_redo":case this.pdfViewer.element.id+"_redoIcon":case this.pdfViewer.element.id+"_redoText":this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redo();break;case this.pdfViewer.element.id+"_firstPage":case this.pdfViewer.element.id+"_firstPageIcon":case this.pdfViewer.element.id+"_firstPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToFirstPage();break;case this.pdfViewer.element.id+"_previousPage":case this.pdfViewer.element.id+"_previousPageIcon":case this.pdfViewer.element.id+"_previousPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToPreviousPage();break;case this.pdfViewer.element.id+"_nextPage":case this.pdfViewer.element.id+"_nextPageIcon":case this.pdfViewer.element.id+"_nextPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToNextPage();break;case this.pdfViewer.element.id+"_lastPage":case this.pdfViewer.element.id+"_lastPageIcon":case this.pdfViewer.element.id+"_lastPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToLastPage();break;case this.pdfViewer.element.id+"_zoomIn":case this.pdfViewer.element.id+"_zoomInIcon":case this.pdfViewer.element.id+"_zoomInText":this.pdfViewer.magnificationModule.zoomIn();break;case this.pdfViewer.element.id+"_zoomOut":case this.pdfViewer.element.id+"_zoomOutIcon":case this.pdfViewer.element.id+"_zoomOutText":this.pdfViewer.magnificationModule.zoomOut();break;case this.pdfViewer.element.id+"_selectTool":case this.pdfViewer.element.id+"_selectToolIcon":case this.pdfViewer.element.id+"_selectToolText":this.isSelectionToolDisabled||(this.pdfViewerBase.initiateTextSelectMode(),this.updateInteractionTools(!0));break;case this.pdfViewer.element.id+"_handTool":case this.pdfViewer.element.id+"_handToolIcon":case this.pdfViewer.element.id+"_handToolText":this.isScrollingToolDisabled||this.getStampMode()||(this.pdfViewerBase.initiatePanning(),this.updateInteractionTools(!1));break;case this.pdfViewer.element.id+"_search":case this.pdfViewer.element.id+"_searchIcon":case this.pdfViewer.element.id+"_searchText":this.textSearchButtonHandler();break;case this.pdfViewer.element.id+"_annotation":case this.pdfViewer.element.id+"_annotationIcon":case this.pdfViewer.element.id+"_annotationText":this.initiateAnnotationMode(e.originalEvent.target.id);break;case this.pdfViewer.element.id+"_formdesigner":case this.pdfViewer.element.id+"_formdesignerIcon":case this.pdfViewer.element.id+"_formdesignerText":this.initiateFormDesignerMode(),this.formDesignerToolbarModule.showHideDeleteIcon(!1);break;case this.pdfViewer.element.id+"_comment":case this.pdfViewer.element.id+"_commentIcon":this.pdfViewerBase.isAddComment=!0,this.pdfViewerBase.isCommentIconAdded=!0,this.annotationToolbarModule.deselectAllItems(),this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.addComments(e.originalEvent.target);break;case this.pdfViewer.element.id+"_submitForm":case this.pdfViewer.element.id+"_submitFormSpan":this.pdfViewerBase.exportFormFields(void 0,TS.Json)}},s.prototype.addInkAnnotation=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}this.annotationToolbarModule&&(this.pdfViewer.toolbar.annotationToolbarModule.deselectInkAnnotation(),this.annotationToolbarModule.inkAnnotationSelected=!1)},s.prototype.deSelectCommentAnnotation=function(){X()?this.pdfViewer.toolbar.deSelectItem(this.CommentElement):this.pdfViewer.toolbar.deSelectItem(this.commentItem),this.pdfViewerBase.isCommentIconAdded=!1},s.prototype.addComments=function(e){X()?(this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0,this.annotationToolbarModule.deselectAllItemsInBlazor(),this.CommentElement.classList.add("e-pv-select")):e.id===this.pdfViewer.element.id+"_comment"||e.id===this.pdfViewer.element.id+"_commentIcon"?e.id===this.pdfViewer.element.id+"_commentIcon"&&e.parentElement?e.parentElement.classList.add("e-pv-select"):e.classList.add("e-pv-select"):e.className=this.pdfViewer.enableRtl?"e-pv-comment-selection-icon e-pv-icon e-icon-left e-right":"e-pv-comment-selection-icon e-pv-icon e-icon-left",this.updateStampItems(),document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))},s.prototype.openZoomDropdown=function(){var e=this;if(document.fullscreen)if(X()){var t=document.fullscreenElement;t&&"BODY"!==t.tagName&&"HTML"!==t.tagName&&setTimeout(function(){var r=document.getElementById(e.pdfViewer.element.id+"_zoomCombo_popup"),o=document.getElementById(e.toolbarElement.id);r&&o&&r.ej2_instances&&(o.appendChild(r),r.ej2_instances[0].refreshPosition())},100)}else{var i=document.getElementById(this.pdfViewer.element.id+"_zoomDropDown_popup"),n=document.getElementById(this.toolbarElement.id);i&&n.appendChild(i)}},s.prototype.onZoomDropDownInput=function(e){return(e.which<48||e.which>57)&&8!==e.which&&13!==e.which?(e.preventDefault(),!1):(13===e.which&&(e.preventDefault(),this.zoomDropDownChange(this.zoomDropDown.element.value)),!0)},s.prototype.onZoomDropDownInputClick=function(){this.zoomDropDown.element.select()},s.prototype.zoomPercentSelect=function(e){this.pdfViewerBase.pageCount>0&&(e.isInteracted?e.itemData&&this.zoomDropDownChange(e.itemData.percent):this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor))},s.prototype.zoomDropDownChange=function(e){e!==this.pdfViewer.localeObj.getConstant("Fit Width")&&e!==this.pdfViewer.localeObj.getConstant("Fit Page")&&e!==this.pdfViewer.localeObj.getConstant("Automatic")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.zoomTo(parseFloat(e)),this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Width")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.fitToWidth(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Page")?(this.pdfViewer.magnificationModule.fitToPage(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Automatic")&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.magnificationModule.fitToAuto(),this.zoomDropDown.focusOut())},s.prototype.updateZoomPercentage=function(e){if(!E.isDevice||this.pdfViewer.enableDesktopMode){var t=parseInt((100*e).toString())+"%";if(X()){var i=this.pdfViewerBase.getElement("_zoomDropDown");i&&i.children.length>0&&(i.children[0].children[0].value=t)}else this.zoomDropDown.text===t&&(this.zoomDropDown.element.value=t),11===this.zoomDropDown.index&&(this.zoomDropDown.value=4),this.pdfViewerBase.isMinimumZoom=e<=.25,this.zoomDropDown.text=t}},s.prototype.updateInteractionItems=function(){this.toolbar.enableItems(this.textSelectItem.parentElement,!!this.pdfViewer.textSelectionModule&&!!this.pdfViewer.enableTextSelection),this.toolbar.enableItems(this.panItem.parentElement,!0),"TextSelection"===this.pdfViewer.interactionMode&&this.pdfViewer.enableTextSelection?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem),this.pdfViewerBase.initiatePanning())},s.prototype.textSearchButtonHandler=function(){if(!E.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0)if(this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed,this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed),this.isTextSearchBoxDisplayed){X()||this.selectItem(this.textSearchItem);var e=document.getElementById(this.pdfViewer.element.id+"_search_input");e.select(),e.focus()}else X()?this.pdfViewerBase.getElement("_search").firstElementChild.blur():(this.deSelectItem(this.textSearchItem),this.textSearchItem.blur())}else this.showToolbar(!1),this.pdfViewerBase.navigationPane.createNavigationPaneMobile("search")},s.prototype.initiateAnnotationMode=function(e){!E.isDevice||this.pdfViewer.enableDesktopMode?this.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem),this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.refreshOverflow(),this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible)&&(document.getElementById(this.pdfViewer.element.id+"_formdesigner_toolbar").style.display="none",this.formDesignerToolbarModule.isToolbarHidden=!1,this.formDesignerToolbarModule.showFormDesignerToolbar(this.formDesignerItem),this.annotationToolbarModule.adjustViewer(!0)):X()||(e===this.pdfViewer.element.id+"_annotation"&&(e=this.pdfViewer.element.id+"_annotationIcon"),this.annotationToolbarModule.createAnnotationToolbarForMobile(e))},s.prototype.initiateFormDesignerMode=function(){if(this.formDesignerToolbarModule&&this.pdfViewer.enableFormDesignerToolbar&&(this.formDesignerToolbarModule.showFormDesignerToolbar(this.formDesignerItem),this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible)){document.getElementById(this.pdfViewer.element.id+"_annotation_toolbar").style.display="none";var t=document.getElementById(this.pdfViewer.element.id+"_commantPanel");!c(t)&&!c(this.pdfViewerBase.navigationPane)&&"block"===t.style.display&&this.pdfViewerBase.navigationPane.closeCommentPanelContainer(),this.annotationToolbarModule.isToolbarHidden=!1,this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem),this.formDesignerToolbarModule.adjustViewer(!0)}},s.prototype.DisableInteractionTools=function(){this.deSelectItem(this.textSelectItem),this.deSelectItem(this.panItem)},s.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},s.prototype.deSelectItem=function(e){e&&e.classList.remove("e-pv-select")},s.prototype.updateInteractionTools=function(e){var t=X();e?t?(this.selectItem(this.SelectToolElement),this.deSelectItem(this.PanElement)):(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):t?(this.selectItem(this.PanElement),this.deSelectItem(this.SelectToolElement)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem))},s.prototype.initialEnableItems=function(){this.showToolbar(!!this.pdfViewer.enableToolbar),this.showNavigationToolbar(!!this.pdfViewer.enableNavigationToolbar),X()||(this.showPrintOption(!!this.isPrintBtnVisible),this.showDownloadOption(!!this.isDownloadBtnVisible),this.showSearchOption(!!this.isSearchBtnVisible),this.showCommentOption(!!this.isCommentBtnVisible))},s.prototype.showSeparator=function(e){(!this.isOpenBtnVisible||!this.isNavigationToolVisible&&!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible&&!this.isUndoRedoBtnsVisible)&&this.applyHideToToolbar(!1,1,1),(!this.isNavigationToolVisible&&!this.isMagnificationToolVisible&&!this.isOpenBtnVisible||this.isOpenBtnVisible&&!this.isNavigationToolVisible||!this.isOpenBtnVisible&&!this.isNavigationToolVisible||!this.isMagnificationToolVisible&&!this.isScrollingBtnVisible&&!this.isSelectionBtnVisible)&&this.applyHideToToolbar(!1,8,8),(!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||!this.isMagnificationToolVisible&&(this.isSelectionBtnVisible||this.isScrollingBtnVisible))&&this.applyHideToToolbar(!1,12,12),(!this.isMagnificationToolVisible&&!this.isNavigationToolVisible&&!this.isScrollingBtnVisible&&!this.isSelectionBtnVisible&&this.isUndoRedoBtnsVisible||!this.isUndoRedoBtnsVisible)&&this.applyHideToToolbar(!1,15,15)},s.prototype.applyToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.toolbarItems;e&&(-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("PageNavigationTool")?this.showPageNavigationTool(!0):this.showPageNavigationTool(!1),-1!==e.indexOf("MagnificationTool")?this.showMagnificationTool(!0):this.showMagnificationTool(!1),-1!==e.indexOf("SelectionTool")?this.showSelectionTool(!0):this.showSelectionTool(!1),-1!==e.indexOf("PanTool")?this.showScrollingTool(!0):this.showScrollingTool(!1),-1!==e.indexOf("PrintOption")?this.showPrintOption(!0):this.showPrintOption(!1),-1!==e.indexOf("DownloadOption")?this.showDownloadOption(!0):this.showDownloadOption(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1),-1!==e.indexOf("UndoRedoTool")?this.showUndoRedoTool(!0):this.showUndoRedoTool(!1),-1!==e.indexOf("AnnotationEditTool")?this.showAnnotationEditTool(!0):this.showAnnotationEditTool(!1),-1!==e.indexOf("FormDesignerEditTool")?this.showFormDesignerEditTool(!0):this.showFormDesignerEditTool(!1),-1!==e.indexOf("CommentTool")?this.showCommentOption(!0):this.showCommentOption(!1),-1!==e.indexOf("SubmitForm")?this.showSubmitForm(!0):this.showSubmitForm(!1),this.showSeparator(e))},s.prototype.applyToolbarSettingsForMobile=function(){var e=this.pdfViewer.toolbarSettings.toolbarItems;e&&(-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("UndoRedoTool")?this.showUndoRedoTool(!0):this.showUndoRedoTool(!1),-1!==e.indexOf("AnnotationEditTool")?this.showAnnotationEditTool(!0):this.showAnnotationEditTool(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1))},s.prototype.getStampMode=function(){return!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)&&this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode},s.prototype.stampBeforeOpen=function(e){if(this.annotationToolbarModule.resetFreeTextAnnot(),""===e.ParentItem.Text&&this.pdfViewer.customStampSettings.isAddToMenu&&e.Items.length>0){for(var t=null,i=0;i<e.Items.length;i++)if("Custom Stamp"===e.Items[i].Text){e.Items[i].Items=[],t=e.Items[i];break}var n=this.pdfViewerBase.customStampCollection,r=this.pdfViewer.customStampSettings.customStamps;if(0===n.length&&r&&r.length>0)for(var o=0;o<r.length;o++)n.push({customStampName:r[o].customStampName,customStampImageSource:r[o].customStampImageSource});for(var a=0;a<n.length;a++)t?.Items.push({text:n[a].customStampName})}},s.prototype.stampBeforeClose=function(e,t){},s.prototype.updateStampItems=function(){this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot&&(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.remove(this.pdfViewer.selectedItems.annotations[0]),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.renderDrawing(),this.pdfViewerBase.tool=null),this.pdfViewerBase.isAlreadyAdded=!1,this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot=!1)},s.prototype.stampSelect=function(e,t){if(this.pdfViewerBase.isAlreadyAdded=!1,this.updateStampItems(),"Custom Stamp"===e.Item.Text){this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0;var i=F("input",{id:this.pdfViewer.element.id+"_stampElement",attrs:{type:"file"}});i.setAttribute("accept",".jpg,.jpeg,.png"),i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.visibility="hidden",document.body.appendChild(i),i.click(),i.addEventListener("change",this.annotationToolbarModule.addStampImage),document.body.removeChild(i)}else if("Custom Stamp"===t&&""!==e.Item.Text)for(var n=this.pdfViewerBase.customStampCollection,r=0;r<n.length;r++)n[r].customStampName===e.Item.Text&&(this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=e.Item.Text,this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,this.pdfViewerBase.isAlreadyAdded=!0,this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(n[r].customStampImageSource),this.pdfViewerBase.stampAdded=!1);else"Dynamic"!==e.Item.Text&&""!==e.Item.Text&&"Standard Business"!==e.Item.Text&&("Sign Here"===t||"Sign Here"!==e.Item.Text)&&(this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,"Dynamic"===t?(this.pdfViewerBase.isDynamicStamp=!0,this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(e.Item.Text)):(this.pdfViewerBase.isDynamicStamp=!1,this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(e.Item.Text)))},s.prototype.getModuleName=function(){return"Toolbar"},s}(),rJ=function(){function s(e,t,i){var n=this;this.toolbarBorderHeight=1,this.isToolbarHidden=!1,this.isMobileAnnotEnabled=!1,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.isHighlightBtnVisible=!0,this.isCommentBtnVisible=!0,this.isUnderlineBtnVisible=!0,this.isStrikethroughBtnVisible=!0,this.isColorToolVisible=!0,this.isOpacityToolVisible=!0,this.isDeleteAnnotationToolVisible=!0,this.isCurrentAnnotationOpacitySet=!1,this.isStampBtnVisible=!1,this.isShapeBtnVisible=!1,this.isSignatureBtnVisible=!1,this.isInkBtnVisible=!1,this.isFontFamilyToolVisible=!1,this.isFontSizeToolVisible=!1,this.isFontAlignToolVisible=!1,this.isFontColorToolVisible=!1,this.isFontStylesToolVisible=!1,this.isCommentPanelBtnVisible=!1,this.isFreeTextBtnVisible=!1,this.isCalibrateBtnVisible=!1,this.isStrokeColorToolVisible=!1,this.isThicknessToolVisible=!1,this.stampMenu=[],this.stampParentID="",this.inkAnnotationSelected=!1,this.openSignaturePopup=!1,this.isSavedSignatureClicked=!1,this.saveSignatureCount=0,this.saveInitialCount=0,this.isToolbarCreated=!1,this.addStampImage=function(r){var o=n;if(null!==r.target.files[0]){var l=r.target.files[0];if(n.pdfViewer.annotationModule.stampAnnotationModule.customStampName=l.name.split(".")[0],"image"===l.type.split("/")[0]){var h=new FileReader;h.onload=function(d){var p=d.currentTarget.result;o.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,o.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,o.pdfViewerBase.stampAdded=!0,n.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(p),o.pdfViewerBase.stampAdded=!1},h.readAsDataURL(l)}}r.target.value="",r.currentTarget.value=""},this.popupPosition=function(r,o){if(r&&r.element){var a=o.getBoundingClientRect(),l=r.element.getElementsByClassName("e-container e-color-palette")[0].getElementsByClassName("e-palette")[0].getBoundingClientRect(),h=this.pdfViewerBase.mainContainer.getBoundingClientRect();l.left+l.width>h.width&&(r.element.parentElement.style.left=l.left-l.width+a.width+"px")}},this.onShapeToolbarClicked=function(r){var o=n.pdfViewer.element.id,a=n.pdfViewer.annotation.shapeAnnotationModule;switch(E.isDevice?n.pdfViewer.toolbarModule.selectItem(r.originalEvent.target.parentElement):(n.deselectAllItems(),n.resetFreeTextAnnot()),r.originalEvent.target.id){case o+"_shape_line":case o+"_shape_lineIcon":a.setAnnotationType("Line"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,a.lineFillColor),n.updateColorInIcon(n.strokeDropDownElement,a.lineStrokeColor),n.handleShapeTool(o+"_shape_line");break;case o+"_shape_arrow":case o+"_shape_arrowIcon":a.setAnnotationType("Arrow"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,a.arrowFillColor),n.updateColorInIcon(n.strokeDropDownElement,a.arrowStrokeColor),n.handleShapeTool(o+"_shape_arrow");break;case o+"_shape_rectangle":case o+"_shape_rectangleIcon":a.setAnnotationType("Rectangle"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,a.rectangleFillColor),n.updateColorInIcon(n.strokeDropDownElement,a.rectangleStrokeColor),n.handleShapeTool(o+"_shape_rectangle");break;case o+"_shape_circle":case o+"_shape_circleIcon":a.setAnnotationType("Circle"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,a.circleFillColor),n.updateColorInIcon(n.strokeDropDownElement,a.circleStrokeColor),n.handleShapeTool(o+"_shape_circle");break;case o+"_shape_pentagon":case o+"_shape_pentagonIcon":a.setAnnotationType("Polygon"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,a.polygonFillColor),n.updateColorInIcon(n.strokeDropDownElement,a.polygonStrokeColor),n.handleShapeTool(o+"_shape_pentagon")}},this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return s.prototype.initializeAnnotationToolbar=function(){var e=this;this.toolbarElement=F("div",{id:this.pdfViewer.element.id+"_annotation_toolbar",className:"e-pv-annotation-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),this.toolbar=new tr({width:"",height:"",overflowMode:"Popup",cssClass:"e-pv-toolbar-scroll",items:this.createToolbarItems(),clicked:this.onToolbarClicked.bind(this),created:function(){e.createDropDowns()}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.afterToolbarCreation(),this.createStampContainer(),this.createSignContainer(),this.applyAnnotationToolbarSettings(),this.updateToolbarItems(),this.showAnnotationToolbar(null,!0),this.toolbarElement.setAttribute("aria-label","Annotation Toolbar")},s.prototype.createMobileAnnotationToolbar=function(e,t){var i=this;E.isDevice&&!this.pdfViewer.enableDesktopMode?null==this.toolbarElement&&e?(this.isMobileAnnotEnabled=!0,this.toolbarElement=F("div",{id:this.pdfViewer.element.id+"_annotation_toolbar",className:"e-pv-annotation-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer),this.toolbar=new tr({width:"",height:"",overflowMode:"Popup",items:this.createMobileToolbarItems(t),clicked:this.onToolbarClicked.bind(this),created:function(){i.createDropDowns(t)}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.pdfViewerBase.navigationPane.goBackToToolbar(),this.pdfViewer.toolbarModule.showToolbar(!1),this.toolbar.appendTo(this.toolbarElement),this.deleteItem=this.pdfViewerBase.getElement("_annotation_delete"),this.deleteItem.firstElementChild.id=this.pdfViewer.element.id+"_annotation_delete"):null!=this.toolbarElement&&(e?(this.isMobileAnnotEnabled=!0,this.pdfViewerBase.navigationPane.goBackToToolbar(),this.pdfViewer.toolbarModule.showToolbar(!1),this.toolbarElement.style.display="block"):e||(this.isMobileAnnotEnabled=!1,this.pdfViewer.toolbarModule.showToolbar(!0),this.hideMobileAnnotationToolbar())):this.isMobileAnnotEnabled=!0},s.prototype.hideMobileAnnotationToolbar=function(){if(null!=this.toolbarElement){if(this.pdfViewer.selectedItems.annotations.length>0||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(this.propertyToolbar.element.style.display="block",this.toolbarCreated=!0);else if(this.toolbarCreated=this.toolbar.element.children.length>0,this.propertyToolbar&&"none"!==this.propertyToolbar.element.style.display&&(this.propertyToolbar.element.style.display="none",!this.toolbarCreated)){var e=document.getElementById(this.pdfViewer.element.id+"_annotationIcon");e&&e.parentElement.classList.contains("e-pv-select")&&this.createAnnotationToolbarForMobile()}this.toolbarElement.children.length>0&&(this.toolbarElement.style.display="block"),this.adjustMobileViewer()}else this.toolbarCreated&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(this.propertyToolbar.element.style.display="none",this.adjustMobileViewer(),this.toolbarCreated=!1)},s.prototype.FreeTextForMobile=function(){var e=this;this.hideExistingTool(),this.freetextToolbarElement=F("div",{id:this.pdfViewer.element.id+"_freeTextToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.freetextToolbarElement);var p,t=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),n=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),r=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),o=this.getTemplate("input","_annotation_fontname","e-pv-annotation-fontname-container"),a=this.getTemplate("input","_annotation_fontsize","e-pv-annotation-fontsize-container"),l=this.getTemplate("span","_annotation_textcolor","e-pv-annotation-textcolor-container"),h=this.getTemplate("span","_annotation_textalign","e-pv-annotation-textalign-container"),d=this.getTemplate("span","_annotation_textproperties","e-pv-annotation-textprop-container");p=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"},{template:o},{template:a},{template:l},{template:h},{template:d},{template:t},{template:i},{template:n},{template:r}],this.toolbar=new tr({items:p,width:"",height:"",overflowMode:"Scrollable",created:function(){e.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.pdfViewer.element.id+"_annotation_freeTextEdit")}}),this.toolbar.appendTo(this.freetextToolbarElement),this.showFreeTextPropertiesTool()},s.prototype.createPropertyTools=function(e){var t=this;if(""!==e){this.propertyToolbar&&this.propertyToolbar.destroy(),this.toolbar&&this.toolbar.destroy();var i=void 0;(i=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar"))&&i.parentElement.removeChild(i),i=F("div",{id:this.pdfViewer.element.id+"_propertyToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(i);var n,r=new tr({items:this.createPropertyToolbarForMobile(e),width:"",height:"",overflowMode:"Scrollable",created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(n=t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?t.pdfViewer.element.id+"_underlineIcon":"FreeText"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_freeTextEdit":"Stamp"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"StickyNotes"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_stamp":"HandWrittenSignature"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_handwrittenSign":"SignatureImage"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_handwrittenImage":"Ink"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Path"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_inkIcon":"Highlight"===e||"Underline"===e||"Strikethrough"===e?t.pdfViewer.element.id+"_highlightIcon":t.pdfViewer.element.id+"_annotation_shapesIcon")}});if(r.isStringTemplate=!0,r.appendTo(i),!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&("Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)){var o=document.getElementById(this.pdfViewer.element.id+"_annotation_commentPanel");this.toolbar.enableItems(o.parentElement,!1)}this.showPropertyTool(r,n)}},s.prototype.showPropertyTool=function(e,t){if(this.toolbar&&this.toolbar.destroy(),this.propertyToolbar=e,this.applyProperiesToolSettings(t),this.pdfViewer.selectedItems.annotations[0]){var i=this.pdfViewer.selectedItems.annotations[0];"SignatureText"!==i.shapeAnnotationType&&"HandWrittenSignature"!==i.shapeAnnotationType&&"Stamp"!==i.shapeAnnotationType&&"Image"!==i.shapeAnnotationType&&"Ink"!==i.shapeAnnotationType&&"Path"!==i.shapeAnnotationType&&"StickyNotes"!==i.shapeAnnotationType?(this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.selectedItems.annotations[0].fillColor),this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.annotations[0].strokeColor),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.fontFamilyElement.ej2_instances[0].value=this.pdfViewer.selectedItems.annotations[0].fontFamily,this.fontColorElement.children[0].style.borderBottomColor=this.pdfViewer.selectedItems.annotations[0].fontColor,this.pdfViewer.annotation.modifyTextAlignment(this.pdfViewer.selectedItems.annotations[0].textAlign),this.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign))):this.strokeDropDownElement&&this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.annotations[0].strokeColor)}this.toolbarCreated=!0,this.adjustMobileViewer()},s.prototype.stampToolMobileForMobile=function(e){var t=this;this.hideExistingTool(),this.stampToolbarElement&&this.stampToolbarElement.parentElement.removeChild(this.stampToolbarElement),this.stampToolbarElement=F("div",{id:this.pdfViewer.element.id+"_stampToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.stampToolbarElement),this.toolbar=new tr({items:this.createStampToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.stampToolbarElement),this.showStampPropertiesTool()},s.prototype.shapeToolMobile=function(e){var t=this;this.hideExistingTool(),this.shapeToolbarElement&&this.shapeToolbarElement.parentElement.removeChild(this.shapeToolbarElement),this.shapeToolbarElement=F("div",{id:this.pdfViewer.element.id+"_shapeToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.shapeToolbarElement),this.toolbar=new tr({items:this.createShapeToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.shapeToolbarElement),this.afterShapeToolbarCreationForMobile(),this.showShapeTool()},s.prototype.calibrateToolMobile=function(e){var t=this;this.hideExistingTool(),this.calibrateToolbarElement&&this.calibrateToolbarElement.parentElement.removeChild(this.calibrateToolbarElement),this.calibrateToolbarElement=F("div",{id:this.pdfViewer.element.id+"_calibrateToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.calibrateToolbarElement),this.toolbar=new tr({items:this.createCalibrateToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onCalibrateToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.calibrateToolbarElement),this.afterCalibrateToolbarCreationForMobile(),this.showShapeTool()},s.prototype.textMarkupForMobile=function(e){var t=this;this.hideExistingTool(),this.textMarkupToolbarElement&&this.textMarkupToolbarElement.parentElement.removeChild(this.textMarkupToolbarElement),this.textMarkupToolbarElement=F("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.textMarkupToolbarElement);var r,i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),n=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container");r=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"},{template:i,align:"left"},{template:n,align:"left"}],this.propertyToolbar=new tr({items:r,width:"",height:"",overflowMode:"Scrollable",created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.propertyToolbar.isStringTemplate=!0,this.propertyToolbar.appendTo(this.textMarkupToolbarElement),this.showTextMarkupPropertiesTool()},s.prototype.showShapeTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,7,7):this.showColorEditTool(!1,7,7),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,8,8):this.showStrokeColorEditTool(!1,8,8),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,9,9):this.showThicknessEditTool(!1,9,9),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,10,10):this.showOpacityEditTool(!1,10,10))},s.prototype.signatureInkForMobile=function(){var e=this;this.hideExistingTool(),this.signatureInkToolbarElement&&this.signatureInkToolbarElement.parentElement.removeChild(this.signatureInkToolbarElement),this.signatureInkToolbarElement=F("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.signatureInkToolbarElement);var r,t=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),n=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container");r=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{template:t,align:"left"},{template:i,aign:"left"},{template:n,align:"left"}],this.toolbar=new tr({items:r,width:"",height:"",overflowMode:"Scrollable",created:function(){e.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.pdfViewer.element.id+"_annotation_inkIcon")}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.signatureInkToolbarElement)},s.prototype.hideExistingTool=function(){this.toolbar&&!this.pdfViewer.enableDesktopMode&&this.toolbar.destroy(),this.propertyToolbar&&!this.pdfViewer.enableDesktopMode&&this.propertyToolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_mobileAnnotationToolbar");e&&(e.style.display="none")},s.prototype.applyProperiesToolSettings=function(e){switch(e){case this.pdfViewer.element.id+"_underlineIcon":case this.pdfViewer.element.id+"_highlightIcon":this.showTextMarkupPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_freeTextEdit":this.showFreeTextPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_shapesIcon":this.shapePropertiesTool();break;case"stampTool":case this.pdfViewer.element.id+"_annotation_stamp":this.showStampPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_handwrittenSign":case this.pdfViewer.element.id+"_annotation_inkIcon":this.showInkPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_handwrittenImage":this.showImagePropertyTool()}},s.prototype.showImagePropertyTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,0,0):this.showOpacityEditTool(!1,0,0),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,1,1):this.showCommentPanelTool(!1,1,1),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,2,2):this.showAnnotationDeleteTool(!1,2,2))},s.prototype.showFreeTextPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("FontFamilyAnnotationTool")?this.showFontFamilyAnnotationTool(!0,2,2):this.showFontFamilyAnnotationTool(!1,2,2),-1!==e.indexOf("FontSizeAnnotationTool")?this.showFontSizeAnnotationTool(!0,3,3):this.showFontSizeAnnotationTool(!1,3,3),-1!==e.indexOf("FontColorAnnotationTool")?this.showFontColorAnnotationTool(!0,4,4):this.showFontColorAnnotationTool(!1,4,4),-1!==e.indexOf("FontAlignAnnotationTool")?this.showFontAlignAnnotationTool(!0,5,5):this.showFontAlignAnnotationTool(!1,5,5),-1!==e.indexOf("FontStylesAnnotationTool")?this.showFontStylesAnnotationTool(!0,6,6):this.showFontStylesAnnotationTool(!1,6,6),-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,7,7):this.showColorEditTool(!1,7,7),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,8,8):this.showStrokeColorEditTool(!1,8,8),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,9,9):this.showThicknessEditTool(!1,9,9),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,10,10):this.showOpacityEditTool(!1,10,10),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,11,11):this.showCommentPanelTool(!1,11,11),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,12,12):this.showAnnotationDeleteTool(!1,12,12),-1!==e.indexOf("FreeTextAnnotationTool")?this.showFreeTextAnnotationTool(!0,0,0):(this.showFreeTextAnnotationTool(!1,0,0),this.applyHideToToolbar(!1,1,1)))},s.prototype.shapePropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,2,2):this.showColorEditTool(!1,2,2),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,3,3):this.showStrokeColorEditTool(!1,3,3),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,4,4):this.showThicknessEditTool(!1,4,4),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,5,5):this.showOpacityEditTool(!1,5,5),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,6,6):this.showCommentPanelTool(!1,6,6),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,7,7):this.showAnnotationDeleteTool(!1,7,7),-1!==e.indexOf("ShapeTool")?this.showShapeAnnotationTool(!0,0,0):(this.showShapeAnnotationTool(!1,0,0),this.applyHideToToolbar(!1,1,1)))},s.prototype.showStampPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,2,2):this.showOpacityEditTool(!1,2,2),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,3,3):this.showCommentPanelTool(!1,3,3),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,4,4):this.showAnnotationDeleteTool(!1,4,4),-1!==e.indexOf("StampAnnotationTool")?this.showStampAnnotationTool(!0,0,0):(this.showStampAnnotationTool(!1,0,0),this.applyHideToToolbar(!1,1,1)))},s.prototype.showTextMarkupPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,2,2):this.showColorEditTool(!1,2,2),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,3,3):this.showOpacityEditTool(!1,3,3),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,4,4):this.showCommentPanelTool(!1,4,4),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,5,5):this.showAnnotationDeleteTool(!1,5,5),e.includes("HighlightTool")||e.includes("UnderlineTool")||e.includes("StrikethroughTool")?this.applyHideToToolbar(!0,0,0):(this.applyHideToToolbar(!1,0,0),this.applyHideToToolbar(!1,1,1)))},s.prototype.showInkPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,2,2):this.showStrokeColorEditTool(!1,2,2),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,3,3):this.showThicknessEditTool(!1,3,3),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,4,4):this.showOpacityEditTool(!1,4,4),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,5,5):this.showCommentPanelTool(!1,5,5),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,6,6):this.showAnnotationDeleteTool(!1,6,6),-1!==e.indexOf("HandWrittenSignatureTool")?this.showSignatureTool(!0,0,0):(this.showSignatureTool(!1,0,0),this.applyHideToToolbar(!1,1,1)))},s.prototype.createAnnotationToolbarForMobile=function(e){var t;if(e){var i=document.getElementById(e);i.parentElement.classList.contains("e-pv-select")?(t=!0,i.parentElement.classList.remove("e-pv-select")):(t=!1,this.pdfViewer.toolbarModule.selectItem(i.parentElement))}if(t){this.toolbarCreated=!1,this.adjustMobileViewer(),this.toolbar&&this.toolbar.destroy(),this.propertyToolbar&&this.propertyToolbar.destroy();var n=document.getElementById(this.pdfViewer.element.id+"_mobileAnnotationToolbar");return n&&(n.style.display="none"),[]}this.isToolbarCreated=!0,this.propertyToolbar&&this.propertyToolbar.destroy(),this.toolbarElement&&this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.toolbarElement=F("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left;"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);var a,r=this.getTemplate("span","_annotation_stamp","e-pv-annotation-stamp-container"),o=this.getTemplate("span","_annotation_signature","e-pv-annotation-handwritten-container");return a=[{prefixIcon:"e-pv-comment-icon e-pv-icon",className:"e-pv-comment-container",id:this.pdfViewer.element.id+"_comment"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-highlight-icon e-pv-icon",className:"e-pv-highlight-container",id:this.pdfViewer.element.id+"_highlight"},{prefixIcon:"e-pv-underline-icon e-pv-icon",className:"e-pv-underline-container",id:this.pdfViewer.element.id+"_underline"},{prefixIcon:"e-pv-strikethrough-icon e-pv-icon",className:"e-pv-strikethrough-container",id:this.pdfViewer.element.id+"_strikethrough"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-annotation-shape-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_annotation_shapes"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-annotation-calibrate-icon e-pv-icon",className:"e-pv-annotation-calibrate-container",id:this.pdfViewer.element.id+"_annotation_calibrate"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container",id:this.pdfViewer.element.id+"_annotation_freeTextEdit"},{type:"Separator",align:"Left"},{template:r},{type:"Separator",align:"Left"},{template:o,align:"Left"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-inkannotation-icon e-pv-icon",className:"e-pv-annotation-ink-container",id:this.pdfViewer.element.id+"_annotation_ink",align:"Left"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right"}],this.toolbarCreated&&this.toolbar?(this.toolbar.destroy(),this.toolbarCreated=!1,this.adjustMobileViewer()):(this.toolbar=new tr({items:a,width:"",height:"",overflowMode:"Scrollable",clicked:this.onToolbarClicked.bind(this)}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),this.afterMobileToolbarCreation(),this.createStampContainer(),this.createSignContainer(),this.applyMobileAnnotationToolbarSettings(),this.toolbarCreated=!0,this.adjustMobileViewer()),a},s.prototype.adjustMobileViewer=function(){var e;this.toolbarElement&&(e=this.toolbarElement.clientHeight);var t=!1;this.toolbarElement&&0===this.toolbarElement.children.length&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0?(e=this.propertyToolbar.element.clientHeight,"none"===this.pdfViewer.toolbarModule.toolbarElement.style.display&&(this.pdfViewer.toolbarModule.toolbarElement.style.display="block")):this.freetextToolbarElement&&this.freetextToolbarElement.children.length>0?e=this.freetextToolbarElement.clientHeight:0===e&&this.pdfViewer.toolbarModule.toolbar?(e=this.pdfViewer.toolbarModule.toolbarElement.clientHeight,t=!0):!e&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(e=this.propertyToolbar.element.clientHeight),this.pdfViewer.enableToolbar&&this.toolbarCreated?this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),e+e)+"px":t||(this.pdfViewerBase.viewerContainer.style.height=this.pdfViewerBase.viewerContainer.style.height.split("%").length>1?this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),-e)+"px":this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),e)+"px")},s.prototype.showToolbar=function(e){var t=this.toolbarElement;e?(t.style.display="block",E.isDevice&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar()):t.style.display="none"},s.prototype.createMobileToolbarItems=function(e){var t=this.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),i=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),n=[];return n.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),e||(n.push({template:t,align:"right"}),n.push({template:i,align:"right"}),n.push({type:"Separator",align:"right"})),n.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"right"}),n},s.prototype.goBackToToolbar=function(){this.isMobileAnnotEnabled=!1,this.toolbarElement.children.length>0?this.toolbarElement.style.display="block":(this.toolbarCreated=!1,this.toolbar.destroy(),this.createAnnotationToolbarForMobile());var e=this.pdfViewerBase.getSelectTextMarkupCurrentPage();e&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(e))},s.prototype.createToolbarItems=function(){var e=this.getTemplate("button","_annotation_color","e-pv-annotation-color-container"),t=this.getTemplate("button","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("button","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("button","_annotation_opacity","e-pv-annotation-opacity-container"),r=this.getTemplate("button","_annotation_shapes","e-pv-annotation-shapes-container"),o=this.getTemplate("button","_annotation_calibrate","e-pv-annotation-calibrate-container"),a=this.getTemplate("span","_annotation_stamp","e-pv-annotation-stamp-container"),l=this.getTemplate("button","_annotation_fontname","e-pv-annotation-fontname-container"),h=this.getTemplate("button","_annotation_fontsize","e-pv-annotation-fontsize-container"),d=this.getTemplate("button","_annotation_textcolor","e-pv-annotation-textcolor-container"),p=this.getTemplate("button","_annotation_textalign","e-pv-annotation-textalign-container"),u=this.getTemplate("button","_annotation_textproperties","e-pv-annotation-textprop-container"),f=this.getTemplate("button","_annotation_signature","e-pv-annotation-handwritten-container"),g=[];return g.push({prefixIcon:"e-pv-highlight-icon e-pv-icon",className:"e-pv-highlight-container",id:this.pdfViewer.element.id+"_highlight",align:"Left"}),g.push({prefixIcon:"e-pv-underline-icon e-pv-icon",className:"e-pv-underline-container",id:this.pdfViewer.element.id+"_underline",align:"Left"}),g.push({prefixIcon:"e-pv-strikethrough-icon e-pv-icon",className:"e-pv-strikethrough-container",id:this.pdfViewer.element.id+"_strikethrough",align:"Left"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"}),g.push({template:r,align:"Left",cssClass:"e-pv-shape-template-container"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-shape-separator-container"}),g.push({template:o,align:"Left",cssClass:"e-pv-calibrate-template-container"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-calibrate-separator-container"}),g.push({prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container",id:this.pdfViewer.element.id+"_annotation_freeTextEdit",align:"Left"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-freetext-separator-container"}),g.push({template:a,align:"Left",cssClass:"e-pv-stamp-template-container"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-stamp-separator-container"}),g.push({template:f,align:"Left",cssClass:"e-pv-sign-template-container"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-sign-separator-container"}),g.push({prefixIcon:"e-pv-inkannotation-icon e-pv-icon",className:"e-pv-annotation-ink-container",id:this.pdfViewer.element.id+"_annotation_ink",align:"Left"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-ink-separator-container"}),g.push({template:l,align:"Left",cssClass:"e-pv-fontfamily-container"}),g.push({template:h,align:"Left",cssClass:"e-pv-fontsize-container"}),g.push({template:d,align:"Left",cssClass:"e-pv-text-color-container"}),g.push({template:p,align:"Left",cssClass:"e-pv-alignment-container"}),g.push({template:u,align:"Left",cssClass:"e-pv-text-properties-container"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-text-separator-container"}),g.push({template:e,align:"Left",cssClass:"e-pv-color-template-container"}),g.push({template:t,align:"Left",cssClass:"e-pv-stroke-template-container"}),g.push({template:i,align:"Left",cssClass:"e-pv-thickness-template-container"}),g.push({template:n,align:"Left",cssClass:"e-pv-opacity-template-container"}),g.push({type:"Separator",align:"Left",cssClass:"e-pv-opacity-separator-container"}),g.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"Left"}),g.push({prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right"}),g.push({prefixIcon:"e-pv-annotation-tools-close-icon e-pv-icon",className:"e-pv-annotation-tools-close-container",id:this.pdfViewer.element.id+"_annotation_close",align:"Right"}),g},s.prototype.createSignContainer=function(){var e=this;this.handWrittenSignatureItem=this.pdfViewerBase.getElement("_annotation_signature"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_annotation_signature"),this.pdfViewer.localeObj.getConstant("SignatureFieldDialogHeaderText"));var t=this,r=new Br({items:0===this.pdfViewer.handWrittenSignatureSettings.signatureItem.length||2==this.pdfViewer.handWrittenSignatureSettings.signatureItem.length?[{text:"ADD SIGNATURE"},{separator:!0},{text:"ADD INITIAL"}]:"Signature"===this.pdfViewer.handWrittenSignatureSettings.signatureItem[0]?[{text:"ADD SIGNATURE"}]:[{text:"ADD INITIAL"}],iconCss:"e-pv-handwritten-icon e-pv-icon",cssClass:"e-pv-handwritten-popup",open:function(o){t.openSignature()},beforeItemRender:function(o){if(e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1),o.element&&-1!==o.element.className.indexOf("e-separator")&&(o.element.style.margin="8px 0",o.element.setAttribute("role","menuitem"),o.element.setAttribute("aria-label","separator")),"ADD SIGNATURE"===o.item.text){o.element.innerHTML="",e.saveSignatureCount=0;for(var a=e.pdfViewerBase.signatureModule.signaturecollection.length;a>0;a--)if(e.saveSignatureCount<e.pdfViewerBase.signatureModule.getSaveLimit(e.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)){o.element.style.display="block";var h=(l=e.pdfViewerBase.signatureModule.signaturecollection[a-1]).image[0].imageData,d=l.image[0].id.split("_")[1];if(!l.isInitial&&""!==h){(p=F("div")).id="s"+d,p.style.display="block",p.style.paddingBottom="10px",(u=F("span")).id="sign_border_"+d,u.classList.add("e-pv-align-border");var f=void 0;"SignatureText"===l.image[0].signatureType?((f=F("div")).classList.add("e-pv-align-border-div"),f.innerText=h,f.style.fontFamily=l.image[0].fontFamily,f.style.fontSize="15px",f.style.display="inline-flex",f.style.alignItems="center",f.style.position="relative",f.id="sign_"+d,f.style.width="80px",f.style.height="53px",f.style.overflow="hidden",f.style.textOverflow="ellipsis",f.style.paddingLeft="11px"):((f=F("img")).id="sign_"+d,f.src=h,f.width=80,f.height=32,f.classList.add("e-pv-signatureimage"),f.style.paddingLeft="20px",f.style.paddingRight="18px",f.style.paddingTop="12px",f.style.paddingBottom="12px",f.style.boxSizing="content-box",f.setAttribute("alt","Saved Signature")),f.addEventListener("mouseover",e.hoverSignatureImage.bind(e)),f.addEventListener("mouseleave",e.leaveSignatureImage.bind(e)),(g=F("span")).id="delete_"+d,g.classList.add("e-pv-delete"),g.classList.add("e-pv-align"),u.append(f),u.append(g),p.append(u),o.element.appendChild(p),o.element.style.pointerEvents="auto",o.element.style.background="none",e.pdfViewerBase.getElement("_annotation_signature-popup").style.width="206px",e.saveSignatureCount++}}(m=F("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),m.textContent=e.pdfViewer.localeObj.getConstant("HandwrittenSignatureDialogHeaderText"),m.style.width="en-US"===e.pdfViewer.locale?"130px":"auto",m.style.height="36px",m.addEventListener("click",e.clickSignature.bind(e)),o.element.appendChild(m),o.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),o.element.style.width="206px",o.element.style.display="flex",o.element.style.flexDirection="column",o.element.style.height="auto",o.element.style.alignItems="center",o.element.setAttribute("role","menuitem")}if("ADD INITIAL"===o.item.text){for(e.saveInitialCount=0,o.element.innerHTML="",a=e.pdfViewerBase.signatureModule.signaturecollection.length;a>0;a--)if(e.saveInitialCount<e.pdfViewerBase.signatureModule.getSaveLimit(e.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)){var l,p,u,g;if(h=(l=e.pdfViewerBase.signatureModule.signaturecollection[a-1]).image[0].imageData,d=l.image[0].id.split("_")[1],l.isInitial&&""!==h)(p=F("div")).id="s"+d,p.style.display="block",p.style.paddingBottom="10px",(u=F("span")).id="sign_border_"+d,u.classList.add("e-pv-align-border"),f=void 0,"SignatureText"===l.image[0].signatureType?((f=F("div")).classList.add("e-pv-align-border-div"),f.innerText=h,f.style.fontFamily=l.image[0].fontFamily,f.style.fontSize="15px",f.style.display="inline-flex",f.style.alignItems="center",f.style.position="relative",f.id="sign_"+d,f.style.width="80px",f.style.height="53px",f.style.overflow="hidden",f.style.textOverflow="ellipsis",f.style.paddingLeft="11px"):((f=F("img")).id="sign_"+d,f.src=h,f.width=80,f.height=32,f.classList.add("e-pv-signatureimage"),f.style.paddingLeft="20px",f.style.paddingRight="18px",f.style.paddingTop="12px",f.style.paddingBottom="12px",f.style.boxSizing="content-box",f.setAttribute("alt","Saved Initial")),f.addEventListener("mouseover",e.hoverSignatureImage.bind(e)),f.addEventListener("mouseleave",e.leaveSignatureImage.bind(e)),f.width=80,f.height=32,(g=F("span")).id="delete_"+d,g.classList.add("e-pv-delete"),g.classList.add("e-pv-align"),u.append(f),u.append(g),p.append(u),o.element.appendChild(p),o.element.style.pointerEvents="auto",o.element.style.background="none",e.pdfViewerBase.getElement("_annotation_signature-popup").style.width="206px",e.saveInitialCount++}var m;e.isSignatureIteam=!1,(m=F("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),m.textContent=e.pdfViewer.localeObj.getConstant("HandwrittenInitialDialogHeaderText"),m.style.width="en-US"===e.pdfViewer.locale?"130px":"auto",m.style.height="36px",m.addEventListener("click",e.clickInitial.bind(e)),o.element.appendChild(m),o.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),o.element.style.width="206px",o.element.style.display="flex",o.element.style.flexDirection="column",o.element.style.height="auto",o.element.style.alignItems="center",o.element.setAttribute("role","menuitem")}},select:function(o){e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1)}});this.pdfViewer.enableRtl&&(r.enableRtl=this.pdfViewer.enableRtl),r.appendTo(this.handWrittenSignatureItem)},s.prototype.updateSignatureCount=function(){this.openSignaturePopup=!1;for(var e=this.pdfViewerBase.signatureModule.signaturecollection,t=0;t<e.length;t++);},s.prototype.openSignature=function(){this.saveInitialCount=0,this.saveSignatureCount=0;for(var e=this.pdfViewerBase.signatureModule.signaturecollection.length;e>0;e--)if(this.saveSignatureCount<this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)&&""!==(t=this.pdfViewerBase.signatureModule.signaturecollection[e-1]).image[0].imageData&&!t.isInitial){this.saveSignatureCount++;var i=document.getElementById("sign_border_"+t.image[0].id.split("_")[1]);(n=document.getElementById("delete_"+t.image[0].id.split("_")[1])).style.backgroundClip="content-box",i.addEventListener("click",this.renderAddedSignature.bind(this)),n.addEventListener("click",this.deleteSavedSign.bind(this)),n.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),n.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this)),i.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),i.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this))}for(e=this.pdfViewerBase.signatureModule.signaturecollection.length;e>0;e--)if(this.saveInitialCount<this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)){var t,n;if(""!==(t=this.pdfViewerBase.signatureModule.signaturecollection[e-1]).image[0].imageData&&t.isInitial)this.saveInitialCount++,i=document.getElementById("sign_border_"+t.image[0].id.split("_")[1]),(n=document.getElementById("delete_"+t.image[0].id.split("_")[1])).style.backgroundClip="content-box",i.addEventListener("click",this.renderAddedSignature.bind(this)),n.addEventListener("click",this.deleteSavedSign.bind(this)),n.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),n.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this)),i.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),i.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this))}},s.prototype.hoverSignatureDelete=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.add("e-pv-signaturehover"),e.style.cursor="pointer")},s.prototype.hoverInitialBtn=function(e){var t=e.target,i="";if((i=-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")?t.id:c(e.path)?e.composedPath()[0].id:e.path[0].id)!=="sign_"+i.split("_")[1]&&i!=="delete_"+i.split("_")[1]){var n=document.getElementById(t.id);c(n)&&(n=document.getElementById(t.parentElement.id)),null==n||t.id==="sign_"+t.id.split("_")[1]&&t.id==="sign_border_"+t.id.split("_")[2]?null!=n.parentElement&&(t.id!=="sign_"+t.id.split("_")[1]||t.id!=="sign_border_"+t.id.split("_")[2])&&(n.parentElement.style.background="transparent",n.parentElement.style.cursor="default"):(n.style.background="transparent",n.style.cursor="default")}},s.prototype.hoverSignatureImage=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.add("e-pv-signaturehover"),e.classList.remove("e-pv-signatureimage"),e.style.cursor="pointer")},s.prototype.leaveSignatureDelete=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.remove("e-pv-signaturehover"),e.children[0]&&"IMG"===e.children[0].tagName&&e.children[0].classList.remove("e-pv-signaturehover"),e.style.cursor="default")},s.prototype.clickSignature=function(){this.pdfViewerBase.isInitialField=!1,this.addSignature()},s.prototype.clickInitial=function(){this.pdfViewerBase.isInitialField=!0,this.addSignature()},s.prototype.leaveSignatureImage=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.remove("e-pv-signaturehover"),"IMG"===e.tagName&&e.classList.add("e-pv-signatureimage"),e.children[0]&&"IMG"===e.children[0].tagName&&(e.children[0].classList.remove("e-pv-signaturehover"),e.children[0].classList.add("e-pv-signatureimage")),e.style.cursor="default")},s.prototype.addSignature=function(){this.deselectAllItems(),this.showSignaturepanel()},s.prototype.renderAddedSignature=function(){this.pdfViewerBase.isAddedSignClicked=!0,this.isSavedSignatureClicked=!0,this.pdfViewerBase.signatureModule.RenderSavedSignature()},s.prototype.deleteSavedSign=function(e){e.stopPropagation();for(var t=this.pdfViewerBase.signatureModule.signaturecollection,i=t.length;i>0;i--)if(e.target.parentElement.children[0].id==="sign_"+t[i-1].image[0].id.split("_")[1]){t[i-1].image[0].imageData="",this.pdfViewerBase.signatureModule.signaturecollection.splice(i-1,1);break}e.target.parentElement.remove()},s.prototype.getTemplate=function(e,t,i){var n=F(e,{id:this.pdfViewer.element.id+t});return i&&(n.className=i),n.outerHTML},s.prototype.createStampContainer=function(){var e=this;this.stampElement=this.pdfViewerBase.getElement("_annotation_stamp"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_annotation_stamp"),this.pdfViewer.localeObj.getConstant("Add Stamp"));var t=F("ul",{id:this.pdfViewer.element.id+"contextMenuElement"});this.pdfViewerBase.getElement("_annotation_stamp").appendChild(t);var i=[];if(this.pdfViewer.stampSettings.dynamicStamps&&this.pdfViewer.stampSettings.dynamicStamps.length>0){var n=[];i.push({text:this.pdfViewer.localeObj.getConstant("Dynamic"),label:"Dynamic",items:n}),this.pdfViewer.stampSettings.dynamicStamps.forEach(function(l,h){var d=Wl[l];"NotApproved"===d&&(d="Not Approved"),n.push({text:e.pdfViewer.localeObj.getConstant(d),label:d})})}if(this.pdfViewer.stampSettings.signStamps&&this.pdfViewer.stampSettings.signStamps.length>0){var r=[];i.push({text:this.pdfViewer.localeObj.getConstant("Sign Here"),label:"Sign Here",items:r}),this.pdfViewer.stampSettings.signStamps.forEach(function(l,h){var d=Go[l];switch(d){case"InitialHere":d="Initial Here";break;case"SignHere":d="Sign Here"}r.push({text:e.pdfViewer.localeObj.getConstant(d),label:d})})}if(this.pdfViewer.stampSettings.standardBusinessStamps&&this.pdfViewer.stampSettings.standardBusinessStamps.length>0){var o=[];i.push({text:this.pdfViewer.localeObj.getConstant("Standard Business"),label:"Standard Business",items:o}),this.pdfViewer.stampSettings.standardBusinessStamps.forEach(function(l,h){var d=ls[l];switch(d){case"NotApproved":d="Not Approved";break;case"ForPublicRelease":d="For Public Release";break;case"NotForPublicRelease":d="Not For Public Release";break;case"ForComment":d="For Comment";break;case"PreliminaryResults":d="Preliminary Results";break;case"InformationOnly":d="Information Only"}o.push({text:e.pdfViewer.localeObj.getConstant(d),label:d})})}return this.pdfViewer.customStampSettings.enableCustomStamp&&!E.isDevice&&(i.length>0&&i.push({separator:!0}),i.push({text:this.pdfViewer.localeObj.getConstant("Custom Stamp"),label:"Custom Stamp",items:[]})),this.stampMenu=[{iconCss:"e-pv-stamp-icon e-pv-icon",items:i}],this.menuItems=new hye({items:this.stampMenu,cssClass:"e-custom-scroll",showItemOnClick:!0,enableScrolling:!0,beforeOpen:function(l){if(e.resetFreeTextAnnot(),""===l.parentItem.text&&e.pdfViewer.customStampSettings.isAddToMenu&&l.items.length>0){for(var h=null,d=0;d<l.items.length;d++)if(l.items[d].text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){l.items[d].items=[],h=l.items[d];break}var p=e.pdfViewerBase.customStampCollection,u=e.pdfViewer.customStampSettings.customStamps;if(0===p.length&&u&&u.length>0)for(var f=0;f<u.length;f++)p.push({customStampName:u[f].customStampName,customStampImageSource:u[f].customStampImageSource});for(var g=0;g<p.length;g++)if(null!=h)for(h.items.push({text:p[g].customStampName}),d=0;d<l.items.length;d++)if(l.items[d].text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){var m=l.element.children[d];if(m&&!m.childElementCount){var y=document.createElement("span");y.className="e-icons e-caret e-menu-caret-icon",m.appendChild(y),m.setAttribute("aria-haspopup","true"),m.setAttribute("aria-expanded","false")}}}l.parentItem.text===e.pdfViewer.localeObj.getConstant("Custom Stamp")&&(u=e.pdfViewer.customStampSettings.customStamps)&&u.length>10&&(k(l.element,".e-menu-wrapper").style.height="350px"),e.stampParentID=l.parentItem.text,e.menuItems.showItemOnClick=!1},beforeClose:function(l){(l.parentItem&&l.parentItem.text!==e.pdfViewer.localeObj.getConstant("Custom Stamp")&&"Standard Business"!==l.parentItem.text&&"Dynamic"!==l.parentItem.text&&"Sign Here"!==l.parentItem.text||!l.parentItem)&&(e.menuItems.showItemOnClick=!0)},select:function(l){if(e.pdfViewerBase.isAlreadyAdded=!1,l.item.text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){e.updateInteractionTools(),e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0;var h=document.getElementById(e.pdfViewer.element.id+"_stampElement");h&&h.click(),e.pdfViewer.annotation.triggerAnnotationUnselectEvent()}else if(e.stampParentID===e.pdfViewer.localeObj.getConstant("Custom Stamp")&&""!==l.item.text)for(var d=e.pdfViewerBase.customStampCollection,p=0;p<d.length;p++)d[p].customStampName===l.item.text&&(e.pdfViewer.annotationModule.stampAnnotationModule.customStampName=l.item.text,e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,e.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,e.pdfViewerBase.stampAdded=!0,e.pdfViewerBase.isAlreadyAdded=!0,e.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(d[p].customStampImageSource),e.pdfViewerBase.stampAdded=!1);else l.item.text!==e.pdfViewer.localeObj.getConstant("Dynamic")&&""!==l.item.text&&"Standard Business"!==l.item.text&&("Sign Here"===e.stampParentID||"Sign Here"!==l.item.text)&&(e.updateInteractionTools(),e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,e.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,e.pdfViewerBase.stampAdded=!0,e.pdfViewer.annotation.triggerAnnotationUnselectEvent(),e.stampParentID===e.pdfViewer.localeObj.getConstant("Dynamic")?(e.pdfViewerBase.isDynamicStamp=!0,e.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(l.item.label)):(e.pdfViewerBase.isDynamicStamp=!1,e.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(l.item.label)),E.isDevice&&e.stampToolMobileForMobile(e.pdfViewer.element.id+"_annotation_stamp"))}},"#"+this.pdfViewer.element.id+"contextMenuElement"),t.parentElement.classList.add("e-pv-stamp"),this.pdfViewer.enableRtl&&(this.menuItems.enableRtl=!0),t},s.prototype.createCustomStampElement=function(){var e=F("input",{id:this.pdfViewer.element.id+"_stampElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},s.prototype.checkStampAnnotations=function(){if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations)for(var e=0;e<this.pdfViewer.selectedItems.annotations.length;e++){var t=this.pdfViewer.selectedItems.annotations[e];t&&!t.annotName&&!t.author&&("Shape"!==t.shapeAnnotationType||"Image"!==t.shapeAnnotationType)&&(this.pdfViewer.remove(t),this.pdfViewer.annotation.renderAnnotations(t.pageIndex,null,null,null),this.pdfViewer.clearSelection(t.pageIndex))}},s.prototype.createDropDowns=function(e){var t=this;if(!E.isDevice||this.pdfViewer.enableDesktopMode){this.shapeElement=this.pdfViewerBase.getElement("_annotation_shapes");var i=this.createShapeOptions(this.shapeElement.id,!0);this.shapeDropDown=this.createDropDownButton(this.shapeElement,"e-pv-annotation-shape-icon",i.element,this.pdfViewer.localeObj.getConstant("Add Shapes")),this.calibrateElement=this.pdfViewerBase.getElement("_annotation_calibrate");var n=this.createShapeOptions(this.calibrateElement.id,!1);this.calibrateDropDown=this.createDropDownButton(this.calibrateElement,"e-pv-annotation-calibrate-icon",n.element,this.pdfViewer.localeObj.getConstant("Calibrate"))}if(e||(this.colorDropDownElement=this.pdfViewerBase.getElement("_annotation_color"),this.colorPalette=this.createColorPicker(this.colorDropDownElement.id),this.colorPalette.change=this.onColorPickerChange.bind(this),this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,"e-pv-annotation-color-icon",this.colorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Color edit")),this.colorDropDown.beforeOpen=this.colorDropDownBeforeOpen.bind(this),this.colorDropDown.open=this.colorDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_color-popup").addEventListener("click",this.onColorPickerCancelClick.bind(this))),!E.isDevice||this.pdfViewer.enableDesktopMode){this.strokeDropDownElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id),this.strokeColorPicker.change=this.onStrokePickerChange.bind(this),this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,"e-pv-annotation-stroke-icon",this.strokeColorPicker.element.parentElement,this.pdfViewer.localeObj.getConstant("Stroke edit")),this.strokeDropDown.beforeOpen=this.strokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=this.strokeDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_stroke-popup").addEventListener("click",this.onStrokePickerCancelClick.bind(this)),this.thicknessElement=this.pdfViewerBase.getElement("_annotation_thickness");var r=this.createThicknessSlider(this.thicknessElement.id);this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,"e-pv-annotation-thickness-icon",r,this.pdfViewer.localeObj.getConstant("Change thickness")),this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this),this.thicknessSlider.change=this.thicknessChange.bind(this),this.thicknessSlider.changed=this.thicknessChange.bind(this),this.pdfViewer.enableRtl||(this.thicknessDropDown.open=this.thicknessDropDownOpen.bind(this))}if(!e){this.opacityDropDownElement=this.pdfViewerBase.getElement("_annotation_opacity");var o=this.createSlider(this.opacityDropDownElement.id);this.opacityDropDown=this.createDropDownButton(this.opacityDropDownElement,"e-pv-annotation-opacity-icon",o,this.pdfViewer.localeObj.getConstant("Opacity edit")),this.opacityDropDown.beforeOpen=this.opacityDropDownBeforeOpen.bind(this),this.opacitySlider.change=this.opacityChange.bind(this),this.opacitySlider.changed=this.opacityChange.bind(this),this.pdfViewer.enableRtl||(this.opacityDropDown.open=this.opacityDropDownOpen.bind(this))}(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.fontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.createDropDownListForFamily(this.fontFamilyElement),this.fontFamilyElement.addEventListener("change",function(){t.onFontFamilyChange.bind(t)}),this.fontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.createDropDownListForSize(this.fontSizeElement),this.fontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.fontColorPalette=this.createColorPicker(this.fontColorElement.id),this.fontColorPalette.change=this.onFontColorChange.bind(this),this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,"e-pv-annotation-textcolor-icon",this.fontColorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Font color")),this.textAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.alignmentToolbar=this.createShapeOptions(this.textAlignElement.id,void 0,!0),this.textAlignDropDown=this.createDropDownButton(this.textAlignElement,"e-pv-annotation-textalign-icon",this.alignmentToolbar.element,this.pdfViewer.localeObj.getConstant("Text Align")),this.textAlignDropDown.beforeOpen=this.textAlignDropDownBeforeOpen.bind(this),this.textPropElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.propertiesToolbar=this.createShapeOptions(this.textPropElement.id,void 0,!1,!0),this.textPropertiesDropDown=this.createPropDropDownButton(this.textPropElement,"e-pv-annotation-textprop-icon",this.propertiesToolbar.element,this.pdfViewer.localeObj.getConstant("Text Properties")),this.textPropertiesDropDown.beforeOpen=this.textPropertiesDropDownBeforeOpen.bind(this))},s.prototype.mobileColorpicker=function(e){var t=this;this.opacityDropDownElement=this.pdfViewerBase.getElement("_annotation_opacity");var i=this.createSlider(this.opacityDropDownElement.id);if(this.opacityDropDown=this.createDropDownButton(this.opacityDropDownElement,"e-pv-annotation-opacity-icon",i,this.pdfViewer.localeObj.getConstant("Opacity edit")),this.opacityDropDown.beforeOpen=this.opacityDropDownBeforeOpen.bind(this),this.opacitySlider.change=this.opacityChange.bind(this),this.opacitySlider.changed=this.opacityChange.bind(this),this.pdfViewer.enableRtl||(this.opacityDropDown.open=this.opacityDropDownOpen.bind(this)),e===this.pdfViewer.element.id+"_annotation_shapes"?e=this.pdfViewer.element.id+"_annotation_shapesIcon":e===this.pdfViewer.element.id+"_annotation_calibrate"?e=this.pdfViewer.element.id+"_annotation_calibrateIcon":e===this.pdfViewer.element.id+"_highlight"?e=this.pdfViewer.element.id+"_highlightIcon":e===this.pdfViewer.element.id+"_underline"?e=this.pdfViewer.element.id+"_underlineIcon":e===this.pdfViewer.element.id+"_strikethrough"&&(e=this.pdfViewer.element.id+"_strikethroughIcon"),(e===this.pdfViewer.element.id+"_annotation_shapesIcon"||e===this.pdfViewer.element.id+"_annotation_calibrateIcon"||e===this.pdfViewer.element.id+"_annotation_freeTextEdit"||e===this.pdfViewer.element.id+"_highlightIcon"||e===this.pdfViewer.element.id+"_underlineIcon"||e===this.pdfViewer.element.id+"_strikethroughIcon"||e===this.pdfViewer.element.id+"_annotation_inkIcon"||e===this.pdfViewer.element.id+"_annotation_handwrittenSign")&&(e!==this.pdfViewer.element.id+"_annotation_handwrittenSign"&&e!==this.pdfViewer.element.id+"_annotation_inkIcon"&&(this.colorDropDownElement=this.pdfViewerBase.getElement("_annotation_color"),this.colorPalette=this.createColorPicker(this.colorDropDownElement.id),this.colorPalette.change=this.onColorPickerChange.bind(this),this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,"e-pv-annotation-color-icon",this.colorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Color edit")),this.colorDropDown.beforeOpen=this.colorDropDownBeforeOpen.bind(this),this.colorDropDown.open=this.colorDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_color-popup").addEventListener("click",this.onColorPickerCancelClick.bind(this))),e===this.pdfViewer.element.id+"_annotation_freeTextEdit"&&(this.fontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.createDropDownListForFamily(this.fontFamilyElement),this.fontFamilyElement.style.textAlign="left",this.fontFamilyElement.addEventListener("change",function(){t.onFontFamilyChange.bind(t)}),this.fontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.createDropDownListForSize(this.fontSizeElement),this.fontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.fontColorPalette=this.createColorPicker(this.fontColorElement.id),this.fontColorPalette.change=this.onFontColorChange.bind(this),this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,"e-pv-annotation-textcolor-icon",this.fontColorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Font color")),this.textAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.alignmentToolbar=this.createShapeOptions(this.textAlignElement.id,void 0,!0),this.textAlignDropDown=this.createDropDownButton(this.textAlignElement,"e-pv-annotation-textalign-icon",this.alignmentToolbar.element,this.pdfViewer.localeObj.getConstant("Text Align")),this.textAlignDropDown.beforeOpen=this.textAlignDropDownBeforeOpen.bind(this),this.textPropElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.propertiesToolbar=this.createShapeOptions(this.textPropElement.id,void 0,!1,!0),this.textPropertiesDropDown=this.createPropDropDownButton(this.textPropElement,"e-pv-annotation-textprop-icon",this.propertiesToolbar.element,this.pdfViewer.localeObj.getConstant("Text Properties")),this.textPropertiesDropDown.beforeOpen=this.textPropertiesDropDownBeforeOpen.bind(this)),e===this.pdfViewer.element.id+"_annotation_shapesIcon"||e===this.pdfViewer.element.id+"_annotation_calibrateIcon"||e===this.pdfViewer.element.id+"_annotation_freeTextEdit"||e===this.pdfViewer.element.id+"_annotation_inkIcon"||e===this.pdfViewer.element.id+"_annotation_handwrittenSign")){this.thicknessElement=this.pdfViewerBase.getElement("_annotation_thickness");var n=this.createThicknessSlider(this.thicknessElement.id);this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,"e-pv-annotation-thickness-icon",n,this.pdfViewer.localeObj.getConstant("Change thickness")),this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this),this.thicknessSlider.change=this.thicknessChange.bind(this),this.thicknessSlider.changed=this.thicknessChange.bind(this),this.pdfViewer.enableRtl||(this.thicknessDropDown.open=this.thicknessDropDownOpen.bind(this)),this.strokeDropDownElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id),this.strokeColorPicker.change=this.onStrokePickerChange.bind(this),this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,"e-pv-annotation-stroke-icon",this.strokeColorPicker.element.parentElement,this.pdfViewer.localeObj.getConstant("Stroke edit")),this.strokeDropDown.beforeOpen=this.strokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=this.strokeDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_stroke-popup").addEventListener("click",this.onStrokePickerCancelClick.bind(this))}},s.prototype.opacityDropDownOpen=function(e){E.isDevice&&!this.pdfViewer.enableDesktopMode?(e.element.parentElement.style.left="0px",e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight+"px"):this.calculateToolbarPosition(e)},s.prototype.onColorPickerCancelClick=function(e){e.target.classList.contains("e-cancel")&&this.colorDropDown.toggle()},s.prototype.onStrokePickerCancelClick=function(e){e.target.classList.contains("e-cancel")&&this.strokeDropDown.toggle()},s.prototype.colorDropDownBeforeOpen=function(e){this.colorPalette.noColor=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.colorPalette.value=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color:this.setCurrentColorInPicker()),1===this.pdfViewer.selectedItems.annotations.length?(this.colorPalette.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,this.colorPalette.noColor=!0):this.setCurrentColorInPicker(),this.colorPalette.refresh(),this.updateColorInIcon(this.colorDropDownElement,this.colorPalette.value)},s.prototype.setCurrentColorInPicker=function(){if(!X()){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule)switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);break;case"Underline":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);break;case"Strikethrough":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor)}if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode){case"Line":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.lineFillColor);break;case"Arrow":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.arrowFillColor);break;case"Rectangle":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleFillColor);break;case"Circle":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.circleFillColor);break;case"Polygon":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.polygonFillColor)}this.colorDropDownElement&&this.updateColorInIcon(this.colorDropDownElement,this.colorPalette.value)}},s.prototype.colorDropDownOpen=function(e){E.isDevice&&!this.pdfViewer.enableDesktopMode&&(e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight/2+"px"),this.popupPosition(e,this.colorDropDownElement),this.colorPalette.refresh()},s.prototype.strokeDropDownBeforeOpen=function(e){1===this.pdfViewer.selectedItems.annotations.length?this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor:this.setCurrentStrokeColorInPicker(),this.strokeColorPicker.refresh(),this.updateColorInIcon(this.strokeDropDownElement,this.strokeColorPicker.value),this.updateInkannotationItems()},s.prototype.setCurrentStrokeColorInPicker=function(){if(!X()&&this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode){case"Line":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.lineStrokeColor);break;case"Arrow":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.arrowStrokeColor);break;case"Rectangle":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleStrokeColor);break;case"Circle":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.circleStrokeColor);break;case"Polygon":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.polygonStrokeColor)}},s.prototype.strokeDropDownOpen=function(e){E.isDevice&&!this.pdfViewer.enableDesktopMode&&(e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight/2+"px"),this.popupPosition(e,this.strokeDropDownElement),this.strokeColorPicker.refresh()},s.prototype.onFontColorChange=function(e){var t;t=X()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyFontColor(t):(this.pdfViewer.freeTextSettings.fontColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),X()?(this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),this.updateColorInIcon(this.fontColorElementInBlazor,t)):(this.updateColorInIcon(this.fontColorElement,t),this.fontColorDropDown.toggle())},s.prototype.onFontFamilyChange=function(e){var t;t=X()?e:e&&e.fontFamily&&e.fontFamily.value?e.fontFamily.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyFontFamily(t):(this.pdfViewer.freeTextSettings.fontFamily=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},s.prototype.onFontSizeChange=function(e,t){var i;i=X()?e:e&&e.fontSize&&e.fontSize.value?e.fontSize.value:"";var n=parseFloat(i);1===this.pdfViewer.selectedItems.annotations.length&&i?this.pdfViewer.annotation.modifyFontSize(n,t):(this.pdfViewer.freeTextSettings.fontSize=n,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},s.prototype.textAlignDropDownBeforeOpen=function(e){if(1===this.pdfViewer.selectedItems.annotations.length&&e.element.getElementsByTagName("button")&&e.element.getElementsByTagName("button").length>0)for(var t=e.element.getElementsByTagName("button"),i=this.pdfViewer.selectedItems.annotations[0],n=0;n<t.length;n++)t[n]&&(t[n].classList.remove("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_left_align"&&"Left"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_right_align"&&"Right"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_center_align"&&"Center"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_justify_align"&&"Justify"===i.textAlign&&t[n].classList.add("textprop-option-active"))},s.prototype.textPropertiesDropDownBeforeOpen=function(e){if(1===this.pdfViewer.selectedItems.annotations.length&&e.element.getElementsByTagName("button")&&e.element.getElementsByTagName("button").length>0)for(var t=e.element.getElementsByTagName("button"),i=this.pdfViewer.selectedItems.annotations[0],n=0;n<t.length;n++)t[n]&&(t[n].classList.remove("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_bold"&&i.font.isBold&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_italic"&&i.font.isItalic&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_strikeout"&&i.font.isStrikeout&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_underline_textinput"&&i.font.isUnderline&&t[n].classList.add("textprop-option-active"))},s.prototype.onClickTextAlignment=function(e){var t;t=X()?e[0]:e&&e.item&&e.item.value?e.item.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyTextAlignment(t):(this.pdfViewer.freeTextSettings.textAlignment=e.item.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),this.updateTextAlignInIcon(t)},s.prototype.onClickTextProperties=function(e){var t;if(t=X()?e[0]:e&&e.item&&e.item.value?e.item.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t){var i={isBold:void 0,isItalic:void 0,isStrikeout:void 0,isUnderline:void 0};"bold"===t?i.isBold=!this.pdfViewer.selectedItems.annotations[0].font.isBold:"italic"===t?i.isItalic=!this.pdfViewer.selectedItems.annotations[0].font.isItalic:"underline"===t?i.isUnderline=!this.pdfViewer.selectedItems.annotations[0].font.isUnderline:"strikeout"===t&&(i.isStrikeout=!this.pdfViewer.selectedItems.annotations[0].font.isStrikeout),this.pdfViewer.annotation.modifyTextProperties(i,t)}else"bold"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold=!1:(this.pdfViewer.freeTextSettings.fontStyle=1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"italic"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic=!1:(this.pdfViewer.freeTextSettings.fontStyle=2,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"underline"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1:(this.pdfViewer.freeTextSettings.fontStyle=4,this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"strikeout"===t&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1:(this.pdfViewer.freeTextSettings.fontStyle=8,this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()));this.updateTextPropertySelection(t)},s.prototype.opacityChange=function(e){var t;if(t=e&&1===e.length?e[0]:e.value,this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)X()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,t):this.isCurrentAnnotationOpacitySet&&"changed"===e.name?this.isCurrentAnnotationOpacitySet=!1:this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(e);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity=t/100;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity=t/100;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity=t/100}if(1===this.pdfViewer.selectedItems.annotations.length){var i=this.pdfViewer.selectedItems.annotations[0];if(null==i||"Stamp"!==i.shapeAnnotationType&&"Image"!==i.shapeAnnotationType)X()?this.pdfViewer.annotation.modifyOpacity(t,!0):"changed"===e.name&&e.value!==e.previousValue&&this.pdfViewer.annotation.modifyOpacity(e);else{var n=st(i),r=st(i);r.opacity=t/100,this.pdfViewer.nodePropertyChange(i,{opacity:t/100}),this.pdfViewer.annotation.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex,null,this.pdfViewer.selectedItems.annotations[0],"stampOpacity","",n,r),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0],null,"opacity")}}else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity=t/100;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity=t/100;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity=t/100;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity=t/100;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity=t/100}var o=this.pdfViewer.annotation;o&&o.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.opacity=t/100),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.opacity=t/100,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.opacity=t/100,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}X()||this.updateOpacityIndicator()},s.prototype.opacityDropDownBeforeOpen=function(e){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.isCurrentAnnotationOpacitySet=!0,this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity;else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity;break;case"Underline":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity;break;case"Strikethrough":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity}if(1===this.pdfViewer.selectedItems.annotations.length)this.opacitySlider.value=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity;else if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity;break;case"Arrow":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity;break;case"Rectangle":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity;break;case"Circle":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity;break;case"Polygon":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity}this.updateOpacityIndicator(),this.updateInkannotationItems()},s.prototype.thicknessDropDownBeforeOpen=function(){if(1===this.pdfViewer.selectedItems.annotations.length)this.thicknessSlider.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;else if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.lineThickness;break;case"Arrow":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness;break;case"Rectangle":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness;break;case"Circle":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.circleThickness;break;case"Polygon":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness}this.updateThicknessIndicator(),this.updateInkannotationItems()},s.prototype.thicknessDropDownOpen=function(e){E.isDevice&&!this.pdfViewer.enableDesktopMode?(e.element.parentElement.style.left="0px",e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight+"px"):this.calculateToolbarPosition(e)},s.prototype.calculateToolbarPosition=function(e){if(e.element&&e.element.parentElement){var t=parseFloat(e.element.parentElement.style.left),i=e.element.parentElement.offsetWidth;t+i<this.pdfViewer.element.offsetWidth+10&&(e.element.parentElement.style.left=t-i+"px")}},s.prototype.thicknessChangeInBlazor=function(e){1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyThickness(e[0]):this.ShapeThickness(e[0])},s.prototype.thicknessChange=function(e){if(1===this.pdfViewer.selectedItems.annotations.length){if("changed"===e.name){this.pdfViewer.annotation.modifyThickness(e.value),X()||this.updateThicknessIndicator();var t=this.pdfViewer.annotation,i=this.pdfViewer.selectedItems.annotations[0];t&&t.inkAnnotationModule&&i&&"Ink"===i.shapeAnnotationType&&(this.pdfViewer.inkAnnotationSettings.thickness=e.value)}}else this.ShapeThickness(e.value)},s.prototype.ShapeThickness=function(e){if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineThickness=e;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness=e;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness=e;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleThickness=e;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness=e}var t=this.pdfViewer.annotation;t&&t.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.thickness=e.value),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e.value),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.thickness=e),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),X()||this.updateThicknessIndicator()},s.prototype.createDropDownButton=function(e,t,i,n){var r=new Br({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(r.enableRtl=!0),r.appendTo(e),this.primaryToolbar.createTooltip(e,n),r},s.prototype.createShapeOptions=function(e,t,i,n){var o,r=F("div",{id:e+"_target",className:"e-pv-shapes-toolbar"});return document.body.appendChild(r),i?((o=new tr({items:this.textAlignmentToolbarItems(),overflowMode:"MultiRow"},r)).isStringTemplate=!0,this.afterAlignmentToolbarCreation()):n?((o=new tr({items:this.textPropertiesToolbarItems(),overflowMode:"MultiRow"},r)).isStringTemplate=!0,this.afterPropertiesToolbarCreation()):t?!E.isDevice||this.pdfViewer.enableDesktopMode?((o=new tr({items:this.createShapeToolbarItems(),overflowMode:"MultiRow",clicked:this.onShapeToolbarClicked.bind(this)},r)).isStringTemplate=!0,this.afterShapeToolbarCreation()):(this.toolbarElement=F("div",{id:e+"_target",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),(o=new tr({items:this.createShapeToolbarItemsForMobile(),overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this)},this.toolbarElement)).isStringTemplate=!0,this.afterShapeToolbarCreationForMobile()):((o=new tr({items:this.createCalibrateToolbarItems(),overflowMode:"MultiRow",clicked:this.onCalibrateToolbarClicked.bind(this)},r)).isStringTemplate=!0,this.afterCalibrateToolbarCreation()),o},s.prototype.createPropertyToolbarForMobile=function(e){var t=this,i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),n=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),r=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),o=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),a=this.getTemplate("input","_annotation_fontname","e-pv-annotation-fontname-container"),l=this.getTemplate("input","_annotation_fontsize","e-pv-annotation-fontsize-container"),h=this.getTemplate("span","_annotation_textcolor","e-pv-annotation-textcolor-container"),d=this.getTemplate("span","_annotation_textalign","e-pv-annotation-textalign-container"),p=this.getTemplate("span","_annotation_textproperties","e-pv-annotation-textprop-container"),u=[];return"Polygon"===e||"Rectangle"===e||"Ellipse"===e||"Line"===e||"LineWidthArrowHead"===e||"Distance"===e||"Perimeter"===e||"Radius"===e||"FreeText"===e?("FreeText"===e&&(u.push({prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container"}),u.push({type:"Separator",align:"Left"}),u.push({template:a}),u.push({template:l}),u.push({template:h}),u.push({template:d}),u.push({template:p})),"Polygon"===e?"Area"===this.pdfViewer.selectedItems.annotations[0].measureType?(u.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Volume"===this.pdfViewer.selectedItems.annotations[0].measureType?(u.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):(u.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Rectangle"===e?(u.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Ellipse"===e?(u.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Line"===e?"Perimeter"===this.pdfViewer.selectedItems.annotations[0].measureType?(u.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):(u.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"LineWidthArrowHead"===e?(u.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Distance"===e?(u.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Perimeter"===e?(u.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Radius"===e&&(u.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})),u.push({template:i}),u.push({template:n}),u.push({template:r})):"Path"===e||"Ink"===e||"HandWrittenSignature"===e||"SignatureText"===e?("Path"===e||"Ink"===e?(u.push({prefixIcon:"e-pv-inkannotation-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):("HandWrittenSignature"===e||"SignatureText"===e)&&(u.push({prefixIcon:"e-pv-handwritten-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})),u.push({template:n}),u.push({template:r})):"Underline"===e||"Highlight"===e||"Strikethrough"===e?("Highlight"===e?(u.push({prefixIcon:"e-pv-highlight-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Underline"===e?(u.push({prefixIcon:"e-pv-underline-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"Strikethrough"===e&&(u.push({prefixIcon:"e-pv-strikethrough-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})),u.push({template:i})):"Stamp"===e||"Image"===e?(u.push({prefixIcon:"e-pv-stamp-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})):"StickyNotes"===e&&(u.push({prefixIcon:"e-pv-comment-icon e-pv-icon"}),u.push({type:"Separator",align:"Left"})),u.push({template:o}),u.push({prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right",click:function(f){t.pdfViewer.annotationModule.showCommentsPanel()}}),u.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"Right",click:function(f){t.pdfViewer.annotationModule.deleteAnnotation(),t.propertyToolbar.destroy(),t.toolbarCreated=!1,t.createAnnotationToolbarForMobile(),t.adjustMobileViewer()}}),u},s.prototype.createStampToolbarItemsForMobile=function(){var e=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),t=[];return t.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),t.push({type:"Separator",align:"Left"}),t.push({template:e}),t},s.prototype.createShapeToolbarItemsForMobile=function(){var e=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),t=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),r=[];return r.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),r.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_line",text:this.pdfViewer.localeObj.getConstant("Line Shape"),align:"Left"}),r.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_arrow",text:this.pdfViewer.localeObj.getConstant("Arrow Shape"),align:"Left"}),r.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_rectangle",text:this.pdfViewer.localeObj.getConstant("Rectangle Shape"),align:"Left"}),r.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_circle",text:this.pdfViewer.localeObj.getConstant("Circle Shape"),align:"Left"}),r.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_pentagon",text:this.pdfViewer.localeObj.getConstant("Pentagon Shape"),align:"Left"}),r.push({type:"Separator",align:"Left"}),r.push({template:e}),r.push({template:t}),r.push({template:i}),r.push({template:n}),r},s.prototype.createCalibrateToolbarItemsForMobile=function(){var e=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),t=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),r=[];return r.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),r.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_distance",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),r.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_perimeter",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),r.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_area",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),r.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_radius",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),r.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_volume",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),r.push({type:"Separator",align:"Left"}),r.push({template:e}),r.push({template:t}),r.push({template:i}),r.push({template:n}),r},s.prototype.handleShapeTool=function(e){if(!X()&&E.isDevice)for(var t=document.querySelectorAll(".e-pv-select"),i=0;i<t.length;i++)t[i].id!==e&&t[i].id!==this.pdfViewer.element.id+"_annotation"&&t[i].classList.remove("e-pv-select")},s.prototype.createPropDropDownButton=function(e,t,i,n){var r=new Br({iconCss:t+" e-pv-icon",target:i,cssClass:"e-caret-hide"});return this.pdfViewer.enableRtl&&(r.enableRtl=!0),r.appendTo(e),this.primaryToolbar.createTooltip(e,n),r},s.prototype.textAlignmentToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-left-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_left_align",align:"Left",value:"Left",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-center-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_center_align",align:"Left",value:"Center",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-right-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_right_align",align:"Left",value:"Right",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-justfiy-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_justify_align",align:"Left",value:"Justify",click:this.onClickTextAlignment.bind(this)}),e},s.prototype.afterAlignmentToolbarCreation=function(){this.alignLeftElement=this.primaryToolbar.addClassToolbarItem("_left_align","e-pv-left-align",this.pdfViewer.localeObj.getConstant("Align left")),this.alignRightElement=this.primaryToolbar.addClassToolbarItem("_right_align","e-pv-right-align",this.pdfViewer.localeObj.getConstant("Align right")),this.alignCenterElement=this.primaryToolbar.addClassToolbarItem("_center_align","e-pv-center-align",this.pdfViewer.localeObj.getConstant("Center")),this.alignJustifyElement=this.primaryToolbar.addClassToolbarItem("_justify_align","e-pv-justfiy-align",this.pdfViewer.localeObj.getConstant("Justify"))},s.prototype.afterPropertiesToolbarCreation=function(){this.boldElement=this.primaryToolbar.addClassToolbarItem("_bold","e-pv-bold",this.pdfViewer.localeObj.getConstant("Bold")),this.italicElement=this.primaryToolbar.addClassToolbarItem("_italic","e-pv-italic",this.pdfViewer.localeObj.getConstant("Italic")),this.fontStyleStrikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikeout","e-pv-strikeout",this.pdfViewer.localeObj.getConstant("Strikethroughs")),this.fontStyleUnderlineItem=this.primaryToolbar.addClassToolbarItem("_underline_textinput","e-pv-underlinetext",this.pdfViewer.localeObj.getConstant("Underlines"))},s.prototype.createDropDownListForSize=function(e){var t=this,i=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","28px","36px","48px","72px","96px"];this.fontSize=new yp(this.pdfViewer.enableRtl?{dataSource:i,cssClass:"e-pv-prop-dropdown-rtl",allowCustom:!0,showClearButton:!1,width:"80px",popupWidth:"100px",enableRtl:!0}:{dataSource:i,cssClass:"e-pv-prop-dropdown",allowCustom:!0,showClearButton:!1,width:"80px",popupWidth:"100px"}),this.fontSize.value="16px",this.fontSize.appendTo(e),this.primaryToolbar.createTooltip(e,this.pdfViewer.localeObj.getConstant("Font size")),this.fontSize.addEventListener("change",function(n){t.onFontSizeChange(t,n.isInteracted)})},s.prototype.createDropDownListForFamily=function(e){var t=this,i=[{FontName:"Helvetica"},{FontName:"Courier"},{FontName:"Symbol"},{FontName:"Times New Roman"}];this.fontFamily=new yp(this.pdfViewer.enableRtl?{dataSource:i,query:(new Me).select(["FontName"]),fields:{text:"FontName",value:"FontName"},cssClass:"e-pv-prop-dropdown-rtl",itemTemplate:oo(function(n){return'<span style="font-family: '+n.FontName+';">'+n.FontName+"</span>"}),allowCustom:!0,showClearButton:!1,width:"110px",popupWidth:"190px",enableRtl:!0}:{dataSource:i,query:(new Me).select(["FontName"]),fields:{text:"FontName",value:"FontName"},cssClass:"e-pv-prop-dropdown",itemTemplate:oo(function(n){return'<span style="font-family: '+n.FontName+';">'+n.FontName+"</span>"}),allowCustom:!0,showClearButton:!1,width:"110px",popupWidth:"190px"}),this.fontFamily.isStringTemplate=!0,this.fontFamily.value="Helvetica",this.fontFamily.appendTo(e),this.primaryToolbar.createTooltip(e,this.pdfViewer.localeObj.getConstant("Font family")),this.fontFamily.addEventListener("change",function(){t.onFontFamilyChange(t)})},s.prototype.textPropertiesToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-bold-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_bold",align:"Left",value:"bold",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-italic-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_italic",align:"Left",value:"italic",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-strikeout-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_strikeout",align:"Left",value:"strikeout",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-underlinetext-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_underline_textinput",align:"Left",value:"underline",click:this.onClickTextProperties.bind(this)}),e},s.prototype.createShapeToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_line",text:this.pdfViewer.localeObj.getConstant("Line Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_arrow",text:this.pdfViewer.localeObj.getConstant("Arrow Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_rectangle",text:this.pdfViewer.localeObj.getConstant("Rectangle Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_circle",text:this.pdfViewer.localeObj.getConstant("Circle Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_pentagon",text:this.pdfViewer.localeObj.getConstant("Pentagon Shape"),align:"Left"}),e},s.prototype.createCalibrateToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_distance",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_perimeter",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_area",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_radius",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_volume",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e},s.prototype.onCalibrateToolbarClicked=function(e){var t=this.pdfViewer.element.id,i=this.pdfViewer.annotation.measureAnnotationModule;switch(this.deselectAllItems(),this.resetFreeTextAnnot(),E.isDevice&&!X()&&this.pdfViewer.toolbarModule.selectItem(e.originalEvent.target.parentElement),e.originalEvent.target.id){case t+"_calibrate_distance":case t+"_calibrate_distanceIcon":i.setAnnotationType("Distance"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.distanceFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.distanceStrokeColor),this.handleShapeTool(t+"_calibrate_distance");break;case t+"_calibrate_perimeter":case t+"_calibrate_perimeterIcon":i.setAnnotationType("Perimeter"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.perimeterFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.perimeterStrokeColor),this.handleShapeTool(t+"_calibrate_perimeter");break;case t+"_calibrate_area":case t+"_calibrate_areaIcon":i.setAnnotationType("Area"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.areaFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.areaStrokeColor),this.handleShapeTool(t+"_calibrate_area");break;case t+"_calibrate_radius":case t+"_calibrate_radiusIcon":i.setAnnotationType("Radius"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.radiusFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.radiusStrokeColor),this.handleShapeTool(t+"_calibrate_radius");break;case t+"_calibrate_volume":case t+"_calibrate_volumeIcon":i.setAnnotationType("Volume"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.volumeFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.volumeStrokeColor),this.handleShapeTool(t+"_calibrate_volume")}},s.prototype.onShapeDrawSelection=function(e){E.isDevice||(this.updateInteractionTools(),this.enableAnnotationPropertiesTools(!0),e?this.shapeDropDown.toggle():this.calibrateDropDown.toggle()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent()},s.prototype.afterCalibrateToolbarCreationForMobile=function(){this.primaryToolbar.addClassToolbarItem("_calibrate_distance","e-pv-calibrate-distance",this.pdfViewer.localeObj.getConstant("Calibrate Distance")),this.primaryToolbar.addClassToolbarItem("_calibrate_perimeter","e-pv-calibrate-perimeter",this.pdfViewer.localeObj.getConstant("Calibrate Perimeter")),this.primaryToolbar.addClassToolbarItem("_calibrate_area","e-pv-calibrate-area",this.pdfViewer.localeObj.getConstant("Calibrate Area")),this.primaryToolbar.addClassToolbarItem("_calibrate_radius","e-pv-calibrate-radius",this.pdfViewer.localeObj.getConstant("Calibrate Radius")),this.primaryToolbar.addClassToolbarItem("_calibrate_volume","e-pv-calibrate-volume",this.pdfViewer.localeObj.getConstant("Calibrate Volume"))},s.prototype.afterShapeToolbarCreationForMobile=function(){this.primaryToolbar.addClassToolbarItem("_annotation_color","e-pv-annotation-color-container",this.pdfViewer.localeObj.getConstant("Change Color")),this.primaryToolbar.addClassToolbarItem("_annotation_stroke","e-pv-annotation-stroke-container",this.pdfViewer.localeObj.getConstant("Change Stroke Color")),this.primaryToolbar.addClassToolbarItem("_annotation_thickness","e-pv-annotation-thickness-container",this.pdfViewer.localeObj.getConstant("Chnage Border Thickness")),this.primaryToolbar.addClassToolbarItem("_annotation_opacity","e-annotation-opacity-container",this.pdfViewer.localeObj.getConstant("Change Opacity")),this.primaryToolbar.addClassToolbarItem("_shape_line","e-pv-shape-line",this.pdfViewer.localeObj.getConstant("Add line")),this.primaryToolbar.addClassToolbarItem("_shape_arrow","e-pv-shape-arrow",this.pdfViewer.localeObj.getConstant("Add arrow")),this.primaryToolbar.addClassToolbarItem("_shape_rectangle","e-pv-shape-rectangle",this.pdfViewer.localeObj.getConstant("Add rectangle")),this.primaryToolbar.addClassToolbarItem("_shape_circle","e-pv-shape-circle",this.pdfViewer.localeObj.getConstant("Add circle")),this.primaryToolbar.addClassToolbarItem("_shape_pentagon","e-pv-shape-pentagon",this.pdfViewer.localeObj.getConstant("Add polygon"))},s.prototype.afterShapeToolbarCreation=function(){this.lineElement=this.primaryToolbar.addClassToolbarItem("_shape_line","e-pv-shape-line",this.pdfViewer.localeObj.getConstant("Add line")),this.arrowElement=this.primaryToolbar.addClassToolbarItem("_shape_arrow","e-pv-shape-arrow",this.pdfViewer.localeObj.getConstant("Add arrow")),this.rectangleElement=this.primaryToolbar.addClassToolbarItem("_shape_rectangle","e-pv-shape-rectangle",this.pdfViewer.localeObj.getConstant("Add rectangle")),this.circleElement=this.primaryToolbar.addClassToolbarItem("_shape_circle","e-pv-shape-circle",this.pdfViewer.localeObj.getConstant("Add circle")),this.polygonElement=this.primaryToolbar.addClassToolbarItem("_shape_pentagon","e-pv-shape-pentagon",this.pdfViewer.localeObj.getConstant("Add polygon"))},s.prototype.afterCalibrateToolbarCreation=function(){this.calibrateDistance=this.primaryToolbar.addClassToolbarItem("_calibrate_distance","e-pv-calibrate-distance",this.pdfViewer.localeObj.getConstant("Calibrate Distance")),this.calibratePerimeter=this.primaryToolbar.addClassToolbarItem("_calibrate_perimeter","e-pv-calibrate-perimeter",this.pdfViewer.localeObj.getConstant("Calibrate Perimeter")),this.calibrateArea=this.primaryToolbar.addClassToolbarItem("_calibrate_area","e-pv-calibrate-area",this.pdfViewer.localeObj.getConstant("Calibrate Area")),this.calibrateRadius=this.primaryToolbar.addClassToolbarItem("_calibrate_radius","e-pv-calibrate-radius",this.pdfViewer.localeObj.getConstant("Calibrate Radius")),this.calibrateVolume=this.primaryToolbar.addClassToolbarItem("_calibrate_volume","e-pv-calibrate-volume",this.pdfViewer.localeObj.getConstant("Calibrate Volume"))},s.prototype.afterMobileToolbarCreation=function(){this.highlightItem=this.primaryToolbar.addClassToolbarItem("_highlight","e-pv-highlight",this.pdfViewer.localeObj.getConstant("Highlight")),this.underlineItem=this.primaryToolbar.addClassToolbarItem("_underline","e-pv-underline",this.pdfViewer.localeObj.getConstant("Underline")),this.strikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikethrough","e-pv-strikethrough",this.pdfViewer.localeObj.getConstant("Strikethrough")),this.shapesItem=this.primaryToolbar.addClassToolbarItem("_annotation_shapes","e-pv-annotation-shapes",this.pdfViewer.localeObj.getConstant("Add Shapes")),this.calibrateItem=this.primaryToolbar.addClassToolbarItem("_annotation_calibrate","e-pv-annotation-calibrate",this.pdfViewer.localeObj.getConstant("Calibrate")),this.freeTextEditItem=this.primaryToolbar.addClassToolbarItem("_annotation_freeTextEdit","e-pv-annotation-freeTextEdit",this.pdfViewer.localeObj.getConstant("Free Text")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_comment","e-pv-comment",this.pdfViewer.localeObj.getConstant("Add Comments")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_annotation_commentPanel","e-pv-annotation-comment-panel",this.pdfViewer.localeObj.getConstant("Comment Panel")),this.inkAnnotationItem=this.primaryToolbar.addClassToolbarItem("_annotation_ink","e-pv-annotation-ink",this.pdfViewer.localeObj.getConstant("Draw Ink")),this.selectAnnotationDeleteItem(!1),this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel)},s.prototype.createColorPicker=function(e){var t;t=document.getElementById(e+"_target")||F("input",{id:e+"_target"}),document.body.appendChild(t);var n=new xm({inline:!0,mode:"Palette",cssClass:"e-show-value",enableOpacity:!1,value:"#000000",showButtons:!1,modeSwitcher:!1});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(t),n},s.prototype.onColorPickerChange=function(e){var t;if(t=X()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(t);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=t;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=t;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=t}if(1===this.pdfViewer.selectedItems.annotations.length)X()?e[0]!==e[1]&&this.pdfViewer.annotation.modifyFillColor(t):e.currentValue.hex!==e.previousValue.hex&&this.pdfViewer.annotation.modifyFillColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor=t}this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.fillColor=t,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.fillColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}X()?(this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.updateColorInIcon(this.colorDropDownElementInBlazor,t)):(this.updateColorInIcon(this.colorDropDownElement,t),this.colorDropDown.toggle())},s.prototype.onStrokePickerChange=function(e){var t;if(t=X()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,1===this.pdfViewer.selectedItems.annotations.length)X()?e[0]!==e[1]&&this.pdfViewer.annotation.modifyStrokeColor(t):e.currentValue.hex!==e.previousValue.hex&&this.pdfViewer.annotation.modifyStrokeColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor=t}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.strokeColor=t),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.strokeColor=t),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}X()?(this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.updateColorInIcon(this.strokeDropDownElementInBlazor,t)):(this.updateColorInIcon(this.strokeDropDownElement,t),this.strokeDropDown.toggle())},s.prototype.updateColorInIcon=function(e,t){X()?e&&(e.children[0].style.borderBottomColor=t):e&&e.childNodes[0]&&(e.childNodes[0].style.borderBottomColor=t)},s.prototype.updateTextPropertySelection=function(e){"bold"===e?document.getElementById(this.pdfViewer.element.id+"_bold").classList.toggle("textprop-option-active"):"italic"===e?document.getElementById(this.pdfViewer.element.id+"_italic").classList.toggle("textprop-option-active"):"underline"===e?(document.getElementById(this.pdfViewer.element.id+"_underline_textinput").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.element.id+"_strikeout").classList.remove("textprop-option-active")):"strikeout"===e&&(document.getElementById(this.pdfViewer.element.id+"_strikeout").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.element.id+"_underline_textinput").classList.remove("textprop-option-active"))},s.prototype.updateFontFamilyInIcon=function(e){this.fontFamily.value=e},s.prototype.updateTextAlignInIcon=function(e){var t="e-btn-icon e-pv-left-align-icon e-pv-icon",i=document.getElementById(this.pdfViewer.element.id+"_left_align"),n=document.getElementById(this.pdfViewer.element.id+"_right_align"),r=document.getElementById(this.pdfViewer.element.id+"_center_align"),o=document.getElementById(this.pdfViewer.element.id+"_justify_align");X()||(i.classList.remove("textprop-option-active"),n.classList.remove("textprop-option-active"),r.classList.remove("textprop-option-active"),o.classList.remove("textprop-option-active")),"Left"===e?i.classList.add("textprop-option-active"):"Right"===e?(t="e-btn-icon e-pv-right-align-icon e-pv-icon",n.classList.add("textprop-option-active")):"Center"===e?(t="e-btn-icon e-pv-center-align-icon e-pv-icon",r.classList.add("textprop-option-active")):"Justify"===e&&(t="e-btn-icon e-pv-justfiy-align-icon e-pv-icon",o.classList.add("textprop-option-active")),document.getElementById(this.pdfViewer.element.id+"_annotation_textalign").children[0].className=t},s.prototype.updateFontSizeInIcon=function(e){this.fontSize.value=e+"px"},s.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=parseInt(Math.round(this.opacitySlider.value).toString())+"%"},s.prototype.updateThicknessIndicator=function(){this.thicknessIndicator.textContent=this.thicknessSlider.value+" pt"},s.prototype.createSlider=function(e){var t=F("div",{className:"e-pv-annotation-opacity-popup-container"});document.body.appendChild(t);var i=F("span",{id:e+"_label",className:"e-pv-annotation-opacity-label"});i.textContent=this.pdfViewer.localeObj.getConstant("Opacity");var n=F("div",{id:e+"_slider"});return this.opacitySlider=new $u({type:"MinRange",cssClass:"e-pv-annotation-opacity-slider",max:100,min:0}),this.opacityIndicator=F("div",{id:e+"_opacity_indicator",className:"e-pv-annotation-opacity-indicator"}),this.opacityIndicator.textContent="100%",this.pdfViewer.enableRtl?(t.appendChild(this.opacityIndicator),t.appendChild(n),this.opacitySlider.enableRtl=!0,this.opacitySlider.appendTo(n),this.opacitySlider.element.parentElement.classList.add("e-pv-annotation-opacity-slider-container"),t.appendChild(i)):(t.appendChild(i),t.appendChild(n),this.opacitySlider.appendTo(n),this.opacitySlider.element.parentElement.classList.add("e-pv-annotation-opacity-slider-container"),t.appendChild(this.opacityIndicator)),t},s.prototype.createThicknessSlider=function(e){var t=F("div",{className:"e-pv-annotation-thickness-popup-container"});document.body.appendChild(t);var i=F("span",{id:e+"_label",className:"e-pv-annotation-thickness-label"});i.textContent=this.pdfViewer.localeObj.getConstant("Line Thickness");var n=F("div",{id:e+"_slider"});return this.thicknessSlider=new $u({type:"MinRange",cssClass:"e-pv-annotation-thickness-slider",max:12,min:0}),this.thicknessIndicator=F("div",{id:e+"_thickness_indicator",className:"e-pv-annotation-thickness-indicator"}),this.thicknessIndicator.textContent="0 pt",this.pdfViewer.enableRtl?(t.appendChild(this.thicknessIndicator),t.appendChild(n),this.thicknessSlider.enableRtl=!0,this.thicknessSlider.appendTo(n),t.appendChild(i)):(t.appendChild(i),t.appendChild(n),this.thicknessSlider.appendTo(n),t.appendChild(this.thicknessIndicator)),this.thicknessSlider.element.parentElement.classList.add("e-pv-annotation-thickness-slider-container"),t},s.prototype.afterToolbarCreation=function(){this.highlightItem=this.primaryToolbar.addClassToolbarItem("_highlight","e-pv-highlight",this.pdfViewer.localeObj.getConstant("Highlight")),this.underlineItem=this.primaryToolbar.addClassToolbarItem("_underline","e-pv-underline",this.pdfViewer.localeObj.getConstant("Underline")),this.strikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikethrough","e-pv-strikethrough",this.pdfViewer.localeObj.getConstant("Strikethrough")),this.deleteItem=this.primaryToolbar.addClassToolbarItem("_annotation_delete","e-pv-annotation-delete",this.pdfViewer.localeObj.getConstant("Delete")),this.freeTextEditItem=this.primaryToolbar.addClassToolbarItem("_annotation_freeTextEdit","e-pv-annotation-freeTextEdit",this.pdfViewer.localeObj.getConstant("Free Text")),this.inkAnnotationItem=this.primaryToolbar.addClassToolbarItem("_annotation_ink","e-pv-annotation-ink",this.pdfViewer.localeObj.getConstant("Draw Ink")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_annotation_commentPanel","e-pv-annotation-comment-panel",this.pdfViewer.localeObj.getConstant("Comment Panel")),this.closeItem=this.primaryToolbar.addClassToolbarItem("_annotation_close","e-pv-annotation-tools-close",null),this.selectAnnotationDeleteItem(!1),this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel)},s.prototype.onToolbarClicked=function(e){var t=this.pdfViewer.selectedItems.annotations[0];switch(e.originalEvent.target.id&&this.pdfViewer.toolbarModule.updateStampItems(),this.pdfViewer.toolbarModule.deSelectCommentAnnotation(),e.originalEvent.target.id){case this.pdfViewer.element.id+"_highlight":case this.pdfViewer.element.id+"_highlightIcon":this.pdfViewer.tool="",E.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Highlight"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleHighlight()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_underline":case this.pdfViewer.element.id+"_underlineIcon":this.pdfViewer.tool="",E.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Underline"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleUnderline()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_strikethrough":case this.pdfViewer.element.id+"_strikethroughIcon":this.pdfViewer.tool="",E.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Strikethrough"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleStrikethrough()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_annotation_delete":case this.pdfViewer.element.id+"_annotation_deleteIcon":this.pdfViewer.annotationModule.deleteAnnotation(),this.resetFreeTextAnnot();break;case this.pdfViewer.element.id+"_annotation_commentPanel":case this.pdfViewer.element.id+"_annotation_commentPanelIcon":this.inkAnnotationSelected=!1;var i=document.getElementById(this.pdfViewer.element.id+"_commantPanel");this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),"block"===i.style.display?this.pdfViewerBase.navigationPane.closeCommentPanelContainer():this.pdfViewer.annotationModule.showCommentsPanel();break;case this.pdfViewer.element.id+"_annotation_close":case this.pdfViewer.element.id+"_annotation_closeIcon":this.inkAnnotationSelected=!1,"block"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display&&this.pdfViewerBase.navigationPane.closeCommentPanelContainer(),this.showAnnotationToolbar(this.primaryToolbar.annotationItem);break;case this.pdfViewer.element.id+"_annotation_freeTextEdit":case this.pdfViewer.element.id+"_annotation_freeTextEditIcon":E.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("FreeText"),this.FreeTextForMobile()):(this.resetFreeTextAnnot(),this.handleFreeTextEditor());break;case this.pdfViewer.element.id+"_annotation_signature":case this.pdfViewer.element.id+"_annotation_signatureIcon":this.inkAnnotationSelected=!1,this.updateSignatureCount();break;case this.pdfViewer.element.id+"_annotation_ink":case this.pdfViewer.element.id+"_annotation_inkIcon":if(t&&this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.inkAnnotationModule){var r=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;r&&""!==r&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(r)),this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected?this.inkAnnotationSelected=!1:(this.deselectAllItems(),this.drawInkAnnotation());break;case this.pdfViewer.element.id+"_annotation_shapesIcon":case this.pdfViewer.element.id+"_annotation_shapes":E.isDevice&&this.shapeToolMobile(e);break;case this.pdfViewer.element.id+"_annotation_calibrateIcon":case this.pdfViewer.element.id+"_annotation_calibrate":E.isDevice&&this.calibrateToolMobile(e);break;case this.pdfViewer.element.id+"_commentIcon":case this.pdfViewer.element.id+"_comment":this.pdfViewerBase.isAddComment=!0,this.pdfViewerBase.isCommentIconAdded=!0,document.getElementById(this.pdfViewer.element.id+"_comment").classList.add("e-pv-select"),this.pdfViewer.toolbarModule.addComments(e)}},s.prototype.addInkAnnotation=function(){if(this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),X()?(this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewerBase.focusViewerContainer()):this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected?this.inkAnnotationSelected=!1:(this.deselectAllItemsInBlazor(),this.drawInkAnnotation())},s.prototype.deselectInkAnnotation=function(){X()?(this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewerBase.focusViewerContainer()):this.primaryToolbar.deSelectItem(this.inkAnnotationItem)},s.prototype.drawInkAnnotation=function(){this.inkAnnotationSelected=!0,X()?this.primaryToolbar.selectItem(this.InkAnnotationElement):this.primaryToolbar.selectItem(this.inkAnnotationItem),this.enableSignaturePropertiesTools(!0),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.annotationModule.inkAnnotationModule.drawInk()},s.prototype.resetFreeTextAnnot=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot=!1,E.isDevice||(this.freeTextEditItem&&!X()?this.primaryToolbar.deSelectItem(this.freeTextEditItem):X()&&this.primaryToolbar.deSelectItem(this.FreeTextElement),this.enableFreeTextAnnotationPropertiesTools(!1))),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),X()?this.primaryToolbar.deSelectItem(this.InkAnnotationElement):this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected=!1},s.prototype.updateInkannotationItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule&&this.inkAnnotationSelected){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink",this.pdfViewer.clearSelection(e))}},s.prototype.showSignaturepanel=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.pdfViewerBase.signatureModule.showSignatureDialog(!0)},s.prototype.handleFreeTextEditor=function(){var e=this.pdfViewer.selectedItems.annotations[0];this.enableFreeTextAnnotationPropertiesTools(!0),e&&this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageIndex,e),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.textMarkupAnnotationModule&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.isStrikethroughEnabled=!1,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1;var t=this.pdfViewer.annotation.freeTextAnnotationModule;t.setAnnotationType("FreeText"),t.isNewFreeTextAnnot=!0,t.isNewAddedAnnot=!0,this.updateInteractionTools(),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.selectItem(this.freeTextEditItem),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.fillColor),this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.borderColor),this.updateColorInIcon(this.fontColorElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.fontColor),this.updateFontFamilyInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontFamily),this.updateFontSizeInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontSize),this.updateTextAlignInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.textAlign),this.updateFontFamily()},s.prototype.updateFontFamily=function(){this.updateFontFamilyIcon("_bold",!!this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold),this.updateFontFamilyIcon("_italic",!!this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic),this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?(this.updateFontFamilyIcon("_underline_textinput",!0),this.updateFontFamilyIcon("_strikeout",!1)):this.updateFontFamilyIcon("_underline_textinput",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?(this.updateFontFamilyIcon("_strikeout",!0),this.updateFontFamilyIcon("_underline_textinput",!1)):this.updateFontFamilyIcon("_strikeout",!1)},s.prototype.updateFontFamilyIcon=function(e,t){var i=document.getElementById(this.pdfViewer.element.id+e);t?i.classList.add("textprop-option-active"):i.classList.remove("textprop-option-active")},s.prototype.showAnnotationToolbar=function(e,t){if(!E.isDevice||this.pdfViewer.enableDesktopMode){if(this.isToolbarHidden){var n=void 0;this.toolbarElement&&(n=this.toolbarElement.style.display,this.toolbarElement.style.display="block"),t||(this.pdfViewer.isAnnotationToolbarVisible=!0),e?this.primaryToolbar.selectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem),"none"===n&&this.adjustViewer(!0)}else{var i=this.pdfViewer.annotationModule;e?this.primaryToolbar.deSelectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.deSelectItem(this.primaryToolbar.annotationItem),this.adjustViewer(!1),i&&i.textMarkupAnnotationModule&&i.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.enablePropertiesTool(i):this.deselectAllItems(),this.toolbarElement.style.display="none",t||(this.pdfViewer.isAnnotationToolbarVisible=!1),this.primaryToolbar.updateInteractionTools(!this.pdfViewerBase.isPanMode)}this.pdfViewer.magnification&&"fitToPage"===this.pdfViewer.magnification.fitType&&this.pdfViewer.magnification.fitToPage(),this.enableAnnotationAddTools(!0),this.isToolbarHidden=!this.isToolbarHidden}},s.prototype.enablePropertiesTool=function(e){this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.pdfViewerBase.isTextMarkupAnnotationModule()&&(e.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.updateColorInIcon(this.colorDropDownElement,e.textMarkupAnnotationModule.currentTextMarkupAnnotation.color),this.selectAnnotationDeleteItem(!0)},s.prototype.applyAnnotationToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("HighlightTool")?this.showHighlightTool(!0,0,0):this.showHighlightTool(!1,0,0),-1!==e.indexOf("UnderlineTool")?this.showUnderlineTool(!0,1,1):this.showUnderlineTool(!1,1,1),-1!==e.indexOf("StrikethroughTool")?this.showStrikethroughTool(!0,2,2):this.showStrikethroughTool(!1,2,2),-1!==e.indexOf("ShapeTool")?this.showShapeAnnotationTool(!0,4,4):this.showShapeAnnotationTool(!1,4,4),-1!==e.indexOf("CalibrateTool")?this.showCalibrateAnnotationTool(!0,6,6):this.showCalibrateAnnotationTool(!1,6,6),-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,22,22):this.showColorEditTool(!1,22,22),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,23,23):this.showStrokeColorEditTool(!1,23,23),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,24,24):this.showThicknessEditTool(!1,24,24),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,25,25):this.showOpacityEditTool(!1,25,25),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,27,27):this.showAnnotationDeleteTool(!1,27,27),-1!==e.indexOf("StampAnnotationTool")?this.showStampAnnotationTool(!0,10,10):this.showStampAnnotationTool(!1,10,10),-1!==e.indexOf("HandWrittenSignatureTool")?this.showSignatureTool(!0,12,12):this.showSignatureTool(!1,12,12),-1!==e.indexOf("FreeTextAnnotationTool")?this.showFreeTextAnnotationTool(!0,8,8):this.showFreeTextAnnotationTool(!1,8,8),-1!==e.indexOf("FontFamilyAnnotationTool")?this.showFontFamilyAnnotationTool(!0,16,16):this.showFontFamilyAnnotationTool(!1,16,16),-1!==e.indexOf("FontSizeAnnotationTool")?this.showFontSizeAnnotationTool(!0,17,17):this.showFontSizeAnnotationTool(!1,17,17),-1!==e.indexOf("FontStylesAnnotationTool")?this.showFontStylesAnnotationTool(!0,20,20):this.showFontStylesAnnotationTool(!1,20,20),-1!==e.indexOf("FontAlignAnnotationTool")?this.showFontAlignAnnotationTool(!0,18,18):this.showFontAlignAnnotationTool(!1,18,18),-1!==e.indexOf("FontColorAnnotationTool")?this.showFontColorAnnotationTool(!0,19,19):this.showFontColorAnnotationTool(!1,19,19),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,28,28):this.showCommentPanelTool(!1,28,28),this.showInkAnnotationTool(),this.showSeparator())},s.prototype.applyMobileAnnotationToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(e){-1!==e.indexOf("HighlightTool")?this.showHighlightTool(!0,2,2):this.showHighlightTool(!1,2,2),-1!==e.indexOf("UnderlineTool")?this.showUnderlineTool(!0,3,3):this.showUnderlineTool(!1,3,3),-1!==e.indexOf("StrikethroughTool")?this.showStrikethroughTool(!0,4,4):this.showStrikethroughTool(!1,4,4),-1!==e.indexOf("ShapeTool")?this.showShapeAnnotationTool(!0,6,6):this.showShapeAnnotationTool(!1,6,6),-1!==e.indexOf("CalibrateTool")?this.showCalibrateAnnotationTool(!0,8,8):this.showCalibrateAnnotationTool(!1,8,8);var t=this.pdfViewer.toolbarSettings.toolbarItems;t&&-1!==t.indexOf("CommentTool")?this.showStickyNoteToolInMobile(!0):this.showStickyNoteToolInMobile(!1),-1!==e.indexOf("StampAnnotationTool")?this.showStampAnnotationTool(!0,12,12):this.showStampAnnotationTool(!1,12,12),-1!==e.indexOf("HandWrittenSignatureTool")?this.showSignatureTool(!0,14,14):this.showSignatureTool(!1,14,14),-1!==e.indexOf("FreeTextAnnotationTool")?this.showFreeTextAnnotationTool(!0,10,10):this.showFreeTextAnnotationTool(!1,10,10),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,18,18):this.showCommentPanelTool(!1,18,18),-1!==e.indexOf("InkAnnotationTool")?this.showInkTool(!0,16,16):this.showInkTool(!1,16,16),this.showSeparatorInMobile()}},s.prototype.showStickyNoteToolInMobile=function(e){this.isCommentBtnVisible=e,this.applyHideToToolbar(e,0,0)},s.prototype.showSeparatorInMobile=function(){this.isCommentBtnVisible||this.applyHideToToolbar(!1,1,1),!this.isHighlightBtnVisible&&!this.isUnderlineBtnVisible&&!this.isStrikethroughBtnVisible&&this.applyHideToToolbar(!1,5,5),this.isShapeBtnVisible||this.applyHideToToolbar(!1,7,7),this.isCalibrateBtnVisible||this.applyHideToToolbar(!1,9,9),this.isFreeTextBtnVisible||this.applyHideToToolbar(!1,11,11),this.isStampBtnVisible||this.applyHideToToolbar(!1,13,13),this.isSignatureBtnVisible||this.applyHideToToolbar(!1,15,15),this.isInkBtnVisible||this.applyHideToToolbar(!1,17,17)},s.prototype.showInkAnnotationTool=function(){-1!==this.pdfViewer.toolbarSettings.annotationToolbarItems.indexOf("InkAnnotationTool")?this.showInkTool(!0,14,14):this.showInkTool(!1,14,14)},s.prototype.showSeparator=function(){!this.isHighlightBtnVisible&&!this.isUnderlineBtnVisible&&!this.isStrikethroughBtnVisible&&this.applyHideToToolbar(!1,3,3),this.isShapeBtnVisible||this.applyHideToToolbar(!1,5,5),this.isCalibrateBtnVisible||this.applyHideToToolbar(!1,7,7),this.isFreeTextBtnVisible||this.applyHideToToolbar(!1,9,9),this.isStampBtnVisible||this.applyHideToToolbar(!1,11,11),this.isSignatureBtnVisible||this.applyHideToToolbar(!1,13,13),this.isInkBtnVisible||this.applyHideToToolbar(!1,15,15),!this.isFontFamilyToolVisible&&!this.isFontSizeToolVisible&&!this.isFontColorToolVisible&&!this.isFontAlignToolVisible&&!this.isFontStylesToolVisible&&this.applyHideToToolbar(!1,21,21),(!this.isColorToolVisible&&!this.isStrokeColorToolVisible&&!this.isThicknessToolVisible&&!this.isOpacityToolVisible||!this.isDeleteAnnotationToolVisible)&&this.applyHideToToolbar(!1,26,26)},s.prototype.showHighlightTool=function(e,t,i){this.isHighlightBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showUnderlineTool=function(e,t,i){this.isUnderlineBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showStrikethroughTool=function(e,t,i){this.isStrikethroughBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showShapeAnnotationTool=function(e,t,i){this.isShapeBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showCalibrateAnnotationTool=function(e,t,i){this.isCalibrateBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFreeTextAnnotationTool=function(e,t,i){this.isFreeTextBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showStampAnnotationTool=function(e,t,i){this.isStampBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showSignatureTool=function(e,t,i){this.isSignatureBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showInkTool=function(e,t,i){this.isInkBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontFamilyAnnotationTool=function(e,t,i){this.isFontFamilyToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontSizeAnnotationTool=function(e,t,i){this.isFontSizeToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontAlignAnnotationTool=function(e,t,i){this.isFontAlignToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontColorAnnotationTool=function(e,t,i){this.isFontColorToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontStylesAnnotationTool=function(e,t,i){this.isFontStylesToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showColorEditTool=function(e,t,i){this.isColorToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showStrokeColorEditTool=function(e,t,i){this.isStrokeColorToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showThicknessEditTool=function(e,t,i){this.isThicknessToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showOpacityEditTool=function(e,t,i){this.isOpacityToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showAnnotationDeleteTool=function(e,t,i){this.isDeleteAnnotationToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showCommentPanelTool=function(e,t,i){this.isCommentPanelBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,r=t;r<=i;r++){var o=void 0,a=this.propertyToolbar&&this.propertyToolbar.element?this.propertyToolbar.element:null,l=this.toolbar&&this.toolbar.element?this.toolbar.element:null;if(l&&l.children&&l.children.length>0?o=this.toolbar:E.isDevice&&a&&a.children&&a.children.length>0&&(o=this.propertyToolbar),o&&o.items[r]){var h=o.items[r].cssClass;if(h&&""!==h){var d=o.element.querySelector("."+h);d&&this.toolbar.hideItem(d,n)}else o.hideItem(r,n)}}},s.prototype.adjustViewer=function(e){var t,i,n;if(X()){t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),i=this.pdfViewer.element.querySelector(".e-pv-toolbar");var r=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar");n=this.getToolbarHeight(r)}else t=this.pdfViewerBase.getElement("_sideBarToolbarSplitter"),i=this.pdfViewerBase.getElement("_toolbarContainer"),n=this.getToolbarHeight(this.toolbarElement);var o=this.getToolbarHeight(i),a=this.pdfViewerBase.navigationPane.sideBarToolbar,l=this.pdfViewerBase.navigationPane.sideBarContentContainer,h=this.pdfViewerBase.navigationPane.commentPanelContainer,d=this.pdfViewerBase.navigationPane.commentPanelResizer,p="";e?(this.pdfViewer.enableToolbar?(a.style.top=o+n+"px",l.style.top=o+n+"px",t.style.top=o+n+"px",h.style.top=o+n+"px",d.style.top=o+n+"px"):(a.style.top=n+"px",l.style.top=n+"px",t.style.top=n+"px",h.style.top=n+"px",d.style.top=o+n+"px"),this.pdfViewer.enableToolbar||(o=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n+o)+"px",p=this.getNavigationToolbarHeight(n+o),a.style.height=p,t.style.height=p,d.style.height=p,l.style.height=p):(this.pdfViewer.enableToolbar?(a.style.top=o+"px",l.style.top=o+"px",t.style.top=o+"px",h.style.top=o+"px",d.style.top=o+"px"):(a.style.top="1px",a.style.height="100%",l.style.top="1px",l.style.height="100%",t.style.top="1px",t.style.height="100%",h.style.top="1px",h.style.height="100%",d.style.top="1px",d.style.height="100%"),this.pdfViewer.enableToolbar||(o=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n)+"px",p=this.getNavigationToolbarHeight(o),a.style.height=p,t.style.height=p,d.style.height=p,l.style.height=p,"0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(a.style.top)+"px"))},s.prototype.updateContentContainerHeight=function(e,t){var i;if(t){var n=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar");i=this.getToolbarHeight(n)}else i=this.getToolbarHeight(this.toolbarElement);var r=this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();0!==r.height&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=e?r.height-i+"px":r.height+i+"px")},s.prototype.getToolbarHeight=function(e){var t=e.getBoundingClientRect().height;return 0===t&&e===this.pdfViewerBase.getElement("_toolbarContainer")&&(t=parseFloat(window.getComputedStyle(e).height)+this.toolbarBorderHeight),t},s.prototype.getNavigationToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},s.prototype.handleHighlight=function(){this.isHighlightEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Highlight"),this.primaryToolbar.selectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor),this.isHighlightEnabled=!0,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1)},s.prototype.handleUnderline=function(){this.isUnderlineEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Underline"),this.primaryToolbar.selectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor),this.isUnderlineEnabled=!0,this.isHighlightEnabled=!1,this.isStrikethroughEnabled=!1)},s.prototype.handleStrikethrough=function(){this.isStrikethroughEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Strikethrough"),this.primaryToolbar.selectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor),this.isStrikethroughEnabled=!0,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1)},s.prototype.deselectAllItemsInBlazor=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(!0)),(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.primaryToolbar.deSelectItem(this.FreeTextElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateTextMarkupButtons",!1,!1,!1)),this.resetFreeTextAnnot(),this.clearTextMarkupMode(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.tool="",(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableFreeTextAnnotationPropertiesTools(!1),this.updateColorInIcon(this.colorDropDownElement,"#000000"),this.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.updateColorInIcon(this.fontColorElement,"#000000"),this.selectAnnotationDeleteItem(!1)),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=!1)},s.prototype.deselectAllItems=function(){var e=X();this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(!0)),(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(e?(this.primaryToolbar.deSelectItem(this.pdfViewer.toolbar.SelectToolElement),this.primaryToolbar.selectItem(this.pdfViewer.toolbar.PanElement),this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.primaryToolbar.deSelectItem(this.FreeTextElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement)):(this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem))),this.resetFreeTextAnnot(),this.clearTextMarkupMode(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.tool="",(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableFreeTextAnnotationPropertiesTools(!1),this.updateColorInIcon(this.colorDropDownElement,"#000000"),this.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.updateColorInIcon(this.fontColorElement,"#000000"),this.selectAnnotationDeleteItem(!1)),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=!1)},s.prototype.updateInteractionTools=function(){this.pdfViewer.enableTextSelection?(this.pdfViewerBase.initiateTextSelectMode(),E.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!0)):E.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!1)},s.prototype.selectAnnotationDeleteItem=function(e,t){if(X()||E.isDevice)E.isDevice&&!this.pdfViewer.enableDesktopMode||(e?(i=this.pdfViewer.annotationModule.findCurrentAnnotation())&&(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)?this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e):this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(!1):this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e)):this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e),t&&this.pdfViewerBase.focusViewerContainer());else if(this.toolbar)if(e){var i;(i=this.pdfViewer.annotationModule.findCurrentAnnotation())&&(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)?this.toolbar.enableItems(this.deleteItem.parentElement,e):this.toolbar.enableItems(this.deleteItem.parentElement,!1):this.toolbar.enableItems(this.deleteItem.parentElement,e))}else this.toolbar.enableItems(this.deleteItem.parentElement,e)},s.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){E.isDevice||(X()?this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(e):(this.toolbar.enableItems(this.colorDropDownElement.parentElement,e),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(this.toolbar.enableItems(this.strokeDropDownElement.parentElement,!1),this.toolbar.enableItems(this.thicknessElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))))},s.prototype.checkAnnotationPropertiesChange=function(){var e=this.pdfViewer.selectedItems.annotations[0];return!(e&&e.annotationSettings&&e.annotationSettings.isLock)||!!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e)},s.prototype.enableAnnotationPropertiesTools=function(e){if(!E.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),X()?this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(e,t):t&&(this.toolbar.enableItems(this.colorDropDownElement.parentElement,(!this.pdfViewer.selectedItems.annotations[0]||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)&&e),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.pdfViewer.enableShapeLabel&&(this.toolbar.enableItems(this.fontFamilyElement.parentElement,e),this.toolbar.enableItems(this.fontSizeElement.parentElement,e),this.toolbar.enableItems(this.fontColorElement.parentElement,e)),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))}},s.prototype.enableSignaturePropertiesTools=function(e){if(!E.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),X()?this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(e,t):t&&(this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1))}},s.prototype.enableStampAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),X()?this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(e,t):t&&(this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,!1),this.toolbar.enableItems(this.thicknessElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))},s.prototype.enableFreeTextAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),X()?this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(e,t):t&&(this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.colorDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.toolbar.enableItems(this.fontFamilyElement.parentElement,e),this.toolbar.enableItems(this.fontSizeElement.parentElement,e),this.toolbar.enableItems(this.fontColorElement.parentElement,e),this.toolbar.enableItems(this.textAlignElement.parentElement,e),this.toolbar.enableItems(this.textPropElement.parentElement,e))},s.prototype.enableAnnotationAddTools=function(e){this.toolbar&&!E.isDevice&&(this.pdfViewer.enableTextMarkupAnnotation&&(this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e)),this.pdfViewer.enableShapeAnnotation&&this.toolbar.enableItems(this.shapeElement.parentElement,e),this.pdfViewer.enableStampAnnotations&&this.toolbar.enableItems(this.stampElement.parentElement,e),this.pdfViewer.enableMeasureAnnotation&&this.pdfViewerBase.isCalibrateAnnotationModule()&&this.toolbar.enableItems(this.calibrateElement.parentElement,e),this.pdfViewer.enableFreeText&&this.toolbar.enableItems(this.freeTextEditItem.parentElement,e),this.pdfViewer.enableHandwrittenSignature&&this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,e),this.pdfViewer.enableInkAnnotation&&this.toolbar.enableItems(this.inkAnnotationItem.parentElement,e),this.pdfViewer.enableCommentPanel&&this.enableCommentPanelTool(e))},s.prototype.isAnnotationButtonsEnabled=function(){var e=!1;return(this.isHighlightEnabled||this.isUnderlineEnabled||this.isStrikethroughEnabled)&&(e=!0),e},s.prototype.enableCommentPanelTool=function(e){this.toolbar&&this.toolbar.enableItems(this.commentItem.parentElement,e)},s.prototype.updateToolbarItems=function(){this.enableTextMarkupAddTools(!!this.pdfViewer.enableTextMarkupAnnotation),this.toolbar.enableItems(this.shapeElement.parentElement,this.pdfViewer.enableShapeAnnotation),this.toolbar.enableItems(this.stampElement.parentElement,this.pdfViewer.enableStampAnnotations),this.toolbar.enableItems(this.calibrateElement.parentElement,this.pdfViewer.enableMeasureAnnotation),this.toolbar.enableItems(this.freeTextEditItem.parentElement,this.pdfViewer.enableFreeText),this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,this.pdfViewer.enableHandwrittenSignature),this.toolbar.enableItems(this.inkAnnotationItem.parentElement,this.pdfViewer.enableInkAnnotation)},s.prototype.enableTextMarkupAddTools=function(e){this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e)},s.prototype.updateAnnnotationPropertyItems=function(){X()?(this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),1===this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,"fillColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,"strokeColor")),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,"fontColor")),this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily),this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize))):(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,"#000000"))):1===this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,"fillColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,"strokeColor")),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,"fontColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily),this.pdfViewer.toolbar.annotationToolbarModule.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize),this.pdfViewer.toolbar.annotationToolbarModule.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign))):(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement,"#000000"))},s.prototype.getColorHexValue=function(e,t){return"#ffffff00"===e&&(e="#ffffff"),"red"===e.toLowerCase()&&(e="#FF0000"),"transparent"!==e?X()?e:this.colorPalette.getValue(e,"hex"):"fontColor"===t||"strokeColor"===t?"#000000":"#ffffff"},s.prototype.setColorInPicker=function(e,t){e&&e.setProperties({value:t},!0)},s.prototype.resetToolbar=function(){this.updateToolbarItems(),(this.pdfViewer.isAnnotationToolbarOpen||this.pdfViewer.isAnnotationToolbarVisible)&&this.pdfViewer.enableAnnotationToolbar?(this.adjustViewer(!1),this.toolbarElement.style.display="",this.isToolbarHidden=!1,this.adjustViewer(!0),this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.refreshOverflow(),this.pdfViewer.isAnnotationToolbarVisible=!0):(this.toolbarElement.style.display="none",this.isToolbarHidden=!0,this.pdfViewer.isAnnotationToolbarVisible=!1)},s.prototype.clearTextMarkupMode=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(X()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="")},s.prototype.clearShapeMode=function(){this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode="")},s.prototype.clearMeasureMode=function(){this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode="")},s.prototype.clear=function(){this.deselectAllItems()},s.prototype.destroy=function(){this.destroyComponent(),this.shapeDropDown&&this.shapeDropDown.destroy(),this.calibrateDropDown&&this.calibrateDropDown.destroy(),this.fontColorDropDown&&this.fontColorDropDown.destroy(),this.textAlignDropDown&&this.textAlignDropDown.destroy(),this.colorDropDown&&this.colorDropDown.destroy(),this.strokeDropDown&&this.strokeDropDown.destroy(),this.thicknessDropDown&&this.thicknessDropDown.destroy(),this.opacityDropDown&&this.opacityDropDown.destroy(),this.textPropertiesDropDown&&this.textPropertiesDropDown.destroy(),this.toolbar&&this.toolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_stampElement");e&&e.parentElement.removeChild(e)},s.prototype.destroyComponent=function(){for(var e=[this.highlightItem,this.underlineItem,this.strikethroughItem,this.lineElement,this.arrowElement,this.rectangleElement,this.circleElement,this.polygonElement,this.calibrateDistance,this.calibrateArea,this.calibrateRadius,this.calibrateVolume,this.calibratePerimeter,this.freeTextEditItem,this.stampElement,this.handWrittenSignatureItem,this.inkAnnotationItem,this.fontFamilyElement,this.fontSizeElement,this.alignLeftElement,this.alignRightElement,this.alignCenterElement,this.alignJustifyElement,this.boldElement,this.italicElement,this.fontStyleStrikethroughItem,this.fontStyleUnderlineItem,this.deleteItem,this.commentItem,this.shapeDropDown?this.shapeDropDown.activeElem[0]:null,this.calibrateDropDown?this.calibrateDropDown.activeElem[0]:null,this.fontColorDropDown?this.fontColorDropDown.activeElem[0]:null,this.textAlignDropDown?this.textAlignDropDown.activeElem[0]:null,this.colorDropDown?this.colorDropDown.activeElem[0]:null,this.strokeDropDown?this.strokeDropDown.activeElem[0]:null,this.thicknessDropDown?this.thicknessDropDown.activeElem[0]:null,this.opacityDropDown?this.opacityDropDown.activeElem[0]:null,this.textPropertiesDropDown?this.textPropertiesDropDown.activeElem[0]:null],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},s.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},s.prototype.getElementHeight=function(e){try{return e.getBoundingClientRect().height}catch{return 0}},s.prototype.updateViewerHeight=function(e,t){return this.getElementHeight(this.pdfViewer.element)-t},s.prototype.resetViewerHeight=function(e,t){return e+t},s.prototype.afterAnnotationToolbarCreationInBlazor=function(){this.HighlightElement=document.getElementById(this.pdfViewer.element.id+"_highLight").children[0],this.UnderlineElement=document.getElementById(this.pdfViewer.element.id+"_underline").children[0],this.StrikethroughElement=document.getElementById(this.pdfViewer.element.id+"_strikethrough").children[0],this.InkAnnotationElement=document.getElementById(this.pdfViewer.element.id+"_annotation_ink").children[0],this.InkAnnotationElement.classList.add("e-pv-tbar-btn"),this.FreeTextElement=document.getElementById(this.pdfViewer.element.id+"_annotation_freeTextEdit").children[0],this.HighlightElement=this.addClassToToolbarInBlazor(this.HighlightElement,"e-pv-highlight","_highLight"),this.UnderlineElement=this.addClassToToolbarInBlazor(this.UnderlineElement,"e-pv-underline","_underline"),this.StrikethroughElement=this.addClassToToolbarInBlazor(this.StrikethroughElement,"e-pv-strikethrough","_strikethrough")},s.prototype.addClassToToolbarInBlazor=function(e,t,i){if(e.classList.add(t),e.classList.add("e-pv-tbar-btn"),e.childNodes.length>0){var n=e.childNodes[0];n&&n.classList&&(n.id=this.pdfViewer.element.id+i+"Icon",n.classList.remove("e-icons"),n.classList.remove("e-btn-icon"),this.pdfViewer.enableRtl&&n.classList.add("e-right"))}return e},s.prototype.handleHighlightInBlazor=function(){this.HighlightElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.HighlightElement):this.HighlightElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.HighlightElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},s.prototype.handleUnderlineInBlazor=function(){this.UnderlineElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.UnderlineElement):this.UnderlineElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.UnderlineElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement)},s.prototype.handleStrikethroughInBlazor=function(){this.StrikethroughElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.StrikethroughElement):this.StrikethroughElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},s.prototype.AnnotationSliderOpened=function(){this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].wrapper&&this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateAnnotationSlider",100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth)},s.prototype.DropDownOpened=function(e){if(e&&e[0].element){var t=e[0].element.getBoundingClientRect(),i=this.pdfViewerBase.navigationPane.sideBarToolbar,n=i?i.getBoundingClientRect().width:0;t.left>this.pdfViewerBase.viewerContainer.clientWidth+t.width+n&&(e[0].element.style.left=t.left-this.pdfViewerBase.viewerContainer.clientHeight/2+"px")}},s}(),Dt=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),D=function(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},HE=function(s,e,t,i){return new(t||(t=Promise))(function(n,r){function o(h){try{l(i.next(h))}catch(d){r(d)}}function a(h){try{l(i.throw(h))}catch(d){r(d)}}function l(h){h.done?n(h.value):new t(function(d){d(h.value)}).then(o,a)}l((i=i.apply(s,e||[])).next())})},_E=function(s,e){var i,n,r,o,t={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(d){return function l(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(r=2&h[0]?n.return:h[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,h[1])).done)return r;switch(n=0,r&&(h=[2&h[0],r.value]),h[0]){case 0:case 1:r=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,n=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(!(r=(r=t.trys).length>0&&r[r.length-1])&&(6===h[0]||2===h[0])){t=0;continue}if(3===h[0]&&(!r||h[1]>r[0]&&h[1]<r[3])){t.label=h[1];break}if(6===h[0]&&t.label<r[1]){t.label=r[1],r=h;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(h);break}r[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(s,t)}catch(d){h=[6,d],n=0}finally{i=r=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,d])}}},jLe=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.signatureCollection=[],n.fileName=null,n.zIndex=-1,n.nameTable={},n.clipboardData={},n.zIndexTable=[],n.isTextSelectionStarted=!1,n.touchPadding=10,n.paddingDifferenceValue=10,n.defaultLocale={PdfViewer:"PDF Viewer",Cancel:"Cancel","Download file":"Download file",Download:"Download","Enter Password":"This document is password protected. Please enter a password.","File Corrupted":"File Corrupted","File Corrupted Content":"The file is corrupted and cannot be opened.","Fit Page":"Fit Page","Fit Width":"Fit Width",Automatic:"Automatic","Go To First Page":"Show first page","Invalid Password":"Incorrect Password. Please try again.","Next Page":"Show next page",OK:"OK",Open:"Open file","Page Number":"Current page number","Previous Page":"Show previous page","Go To Last Page":"Show last page",Zoom:"Zoom","Zoom In":"Zoom in","Zoom Out":"Zoom out","Page Thumbnails":"Page thumbnails",Bookmarks:"Bookmarks",Print:"Print file","Password Protected":"Password Required",Copy:"Copy","Text Selection":"Text selection tool",Panning:"Pan mode","Text Search":"Find text","Find in document":"Find in document","Match case":"Match case",Apply:"Apply",GoToPage:"Go to Page","No matches":"Viewer has finished searching the document. No more matches were found","No Text Found":"No Text Found",Undo:"Undo",Redo:"Redo",Annotation:"Add or Edit annotations",FormDesigner:"Add and Edit Form Fields",Highlight:"Highlight Text",Underline:"Underline Text",Strikethrough:"Strikethrough Text",Delete:"Delete annotation",Opacity:"Opacity","Color edit":"Change Color","Opacity edit":"Change Opacity","Highlight context":"Highlight","Underline context":"Underline","Strikethrough context":"Strikethrough","Server error":"Web-service is not listening. PDF Viewer depends on web-service for all it's features. Please start the web service to continue.","Client error":"Client-side error is found. Please check the custom headers provided in the AjaxRequestSettings property and web action methods in the ServerActionSettings property.","Open text":"Open","First text":"First Page","Previous text":"Previous Page","Next text":"Next Page","Last text":"Last Page","Zoom in text":"Zoom In","Zoom out text":"Zoom Out","Selection text":"Selection","Pan text":"Pan","Print text":"Print","Search text":"Search","Annotation Edit text":"Edit Annotation","FormDesigner Edit text":"Add and Edit Form Fields","Line Thickness":"Line Thickness","Line Properties":"Line Properties","Start Arrow":"Start Arrow","End Arrow":"End Arrow","Line Style":"Line Style","Fill Color":"Fill Color","Line Color":"Line Color",None:"None","Open Arrow":"Open","Closed Arrow":"Closed","Round Arrow":"Round","Square Arrow":"Square","Diamond Arrow":"Diamond",Butt:"Butt",Cut:"Cut",Paste:"Paste","Delete Context":"Delete",Properties:"Properties","Add Stamp":"Add Stamp","Add Shapes":"Add Shapes","Stroke edit":"Change Stroke Color","Change thickness":"Change Border Thickness","Add line":"Add Line","Add arrow":"Add Arrow","Add rectangle":"Add Rectangle","Add circle":"Add Circle","Add polygon":"Add Polygon","Add Comments":"Add Comments",Comments:"Comments",SubmitForm:"Submit Form","No Comments Yet":"No Comments Yet",Accepted:"Accepted",Completed:"Completed",Cancelled:"Cancelled",Rejected:"Rejected","Leader Length":"Leader Length","Scale Ratio":"Scale Ratio",Calibrate:"Calibrate","Calibrate Distance":"Calibrate Distance","Calibrate Perimeter":"Calibrate Perimeter","Calibrate Area":"Calibrate Area","Calibrate Radius":"Calibrate Radius","Calibrate Volume":"Calibrate Volume",Depth:"Depth",Closed:"Closed",Round:"Round",Square:"Square",Diamond:"Diamond",Edit:"Edit",Comment:"Comment","Comment Panel":"Comment Panel","Set Status":"Set Status",Post:"Post",Page:"Page","Add a comment":"Add a comment","Add a reply":"Add a reply","Import Annotations":"Import annotations from JSON file","Export Annotations":"Export annotation to JSON file","Export XFDF":"Export annotation to XFDF file","Import XFDF":"Import annotations from XFDF file",Add:"Add",Clear:"Clear",Bold:"Bold",Italic:"Italic",Strikethroughs:"Strikethrough",Underlines:"Underline",Superscript:"Superscript",Subscript:"Subscript","Align left":"Align Left","Align right":"Align Right",Center:"Center",Justify:"Justify","Font color":"Font Color","Text Align":"Text Align","Text Properties":"Font Style",SignatureFieldDialogHeaderText:"Add Signature",HandwrittenSignatureDialogHeaderText:"Add Signature",InitialFieldDialogHeaderText:"Add Initial",HandwrittenInitialDialogHeaderText:"Add Initial","Draw Ink":"Draw Ink",Create:"Create","Font family":"Font Family","Font size":"Font Size","Free Text":"Free Text","Import Failed":"Invalid JSON file type or file name; please select a valid JSON file","Import PDF Failed":"Invalid PDF file type or PDF file not found. Please select a valid PDF file","File not found":"Imported JSON file is not found in the desired location","Export Failed":"Export annotations action has failed; please ensure annotations are added properly",of:"of ",Dynamic:"Dynamic","Standard Business":"Standard Business","Sign Here":"Sign Here","Custom Stamp":"Custom Stamp","Enter Signature as Name":"Enter your name","Draw-hand Signature":"DRAW","Type Signature":"TYPE","Upload Signature":"UPLOAD","Browse Signature Image":"BROWSE","Save Signature":"Save Signature","Save Initial":"Save Initial",Textbox:"Textbox",Password:"Password","Check Box":"Checkbox","Radio Button":"Radio Button",Dropdown:"Drop Down","List Box":"List Box",Signature:"Signature","Delete FormField":"Delete Form Field","Textbox Properties":"Textbox Properties",Name:"Name",Tooltip:"Tooltip",Value:"Value","Form Field Visibility":"Form Field Visibility","Read Only":"Read Only",Required:"Required",Checked:"Checked","Show Printing":"Show Printing",Formatting:"Format",Fill:"Fill",Border:"Border","Border Color":"Border Color",Thickness:"Thickness","Max Length":"Max Length","List Item":"Item Name","Export Value":"Item Value","Dropdown Item List":"Dropdown Item List","List Box Item List":"List Box Item List",General:"GENERAL",Appearance:"APPEARANCE",Options:"OPTIONS","Delete Item":"Delete",Up:"Up",Down:"Down",Multiline:"Multiline",Revised:"Revised",Reviewed:"Reviewed",Received:"Received",Confidential:"Confidential",Approved:"Approved","Not Approved":"Not Approved",Witness:"Witness","Initial Here":"Initial Here",Draft:"Draft",Final:"Final","For Public Release":"For Public Release","Not For Public Release":"Not For Public Release","For Comment":"For Comment",Void:"Void","Preliminary Results":"Preliminary Results","Information Only":"Information Only",in:"in",m:"m",ft_in:"ft_in",ft:"ft",p:"p",cm:"cm",mm:"mm",pt:"pt",cu:"cu",sq:"sq",Initial:"Initial"},n.viewerBase=new PLe(n),n.drawing=new TAe(n),n}return Dt(e,s),Object.defineProperty(e.prototype,"zoomPercentage",{get:function(){return 100*this.magnificationModule.zoomFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bookmark",{get:function(){return this.bookmarkViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"print",{get:function(){return this.printModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"magnification",{get:function(){return this.magnificationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"navigation",{get:function(){return this.navigationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textSearch",{get:function(){return this.textSearchModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toolbar",{get:function(){return this.toolbarModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailView",{get:function(){return this.thumbnailViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"annotation",{get:function(){return this.annotationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDesigner",{get:function(){return this.formDesignerModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textSelection",{get:function(){return this.textSelectionModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accessibilityTags",{get:function(){return this.accessibilityTagsModule},enumerable:!0,configurable:!0}),e.prototype.preRender=function(){this.localeObj=new mi(this.getModuleName(),this.defaultLocale,this.locale),!c(this.element)&&""==this.element.id&&(this.element.id=this.getUniqueElementId()),E.isDevice&&(this.touchPadding=16)},e.prototype.getUniqueElementId=function(){return"pdfViewer_"+Date.now().toString(36)+Math.random().toString(36).substring(2)},e.prototype.render=function(){this.viewerBase.initializeComponent(),this.enableFormFields||(this.formFieldsModule=new d2(this,this.viewerBase),this.formFieldsModule.formFieldsReadOnly(this.enableFormFields)),this.enableTextSelection&&this.textSelectionModule?this.textSelectionModule.enableTextSelectionMode():this.viewerBase.disableTextSelectionMode(),this.drawing.renderLabels(this),this.renderComplete()},e.prototype.getModuleName=function(){return"PdfViewer"},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setJsonData=function(t){this.viewerBase.ajaxData=t},e.prototype.onPropertyChanged=function(t,i){if(!this.isDestroyed)for(var r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];switch(a){case"locale":if(this.viewerBase.loadedData){var l=null;if(this.formFieldsModule&&(l=this.viewerBase.getItemFromSessionStorage("_formfields")),l){this.viewerBase.formfieldvalue=JSON.parse(l);var h=this.annotationCollection,d=this.viewerBase.jsonDocumentId;s.prototype.refresh.call(this),this.load(this.viewerBase.loadedData,null),this.addAnnotation(h),this.viewerBase.loadedData=null,this.downloadFileName=d,this.fileName=d}}break;case"toolbarSettings":!E.isDevice||this.enableDesktopMode?(this.toolbar.applyToolbarSettings(),this.toolbar.annotationToolbarModule.applyAnnotationToolbarSettings(),this.toolbar.formDesignerToolbarModule.applyFormDesignerToolbarSettings()):(this.toolbar.applyToolbarSettingsForMobile(),this.toolbar.annotationToolbarModule.applyMobileAnnotationToolbarSettings());break;case"enableToolbar":this.notify("",{module:"toolbar",enable:this.enableToolbar});break;case"enableCommentPanel":this.notify("",{module:"annotation",enable:this.enableCommentPanel}),this.toolbarModule&&this.toolbarModule.annotationToolbarModule&&this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel),this.enableCommentPanel||this.viewerBase.navigationPane&&this.viewerBase.navigationPane.closeCommentPanelContainer();break;case"documentPath":X()?this._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",t.documentPath):this.load(t.documentPath,null);break;case"interactionMode":this.interactionMode=t.interactionMode,"Pan"===t.interactionMode?(this.viewerBase.initiatePanning(),this.toolbar&&this.toolbar.updateInteractionTools(!1)):"TextSelection"===t.interactionMode&&(this.viewerBase.initiateTextSelectMode(),this.toolbar&&this.toolbar.updateInteractionTools(!0));break;case"height":this.height=t.height,this.viewerBase.updateHeight(),this.viewerBase.onWindowResize(),this.toolbar&&this.toolbar.annotationToolbarModule&&this.toolbar.annotationToolbarModule.adjustViewer(!this.toolbar.annotationToolbarModule.isToolbarHidden);break;case"width":this.width=t.width,this.viewerBase.updateWidth(),this.viewerBase.onWindowResize();break;case"customStamp":this.renderCustomerStamp(this.customStamp[0]);break;case"customStampSettings":t.customStampSettings.customStamps&&this.renderCustomerStamp(this.customStampSettings.customStamps[0]);break;case"enableFormFields":if(this.enableFormFields&&this.formFieldsModule)for(var p=0;p<this.pageCount;p++)this.formFieldsModule.renderFormFields(p,!1);else this.formFieldsModule=new d2(this,this.viewerBase),this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);break;case"designerMode":this.formDesignerModule.setMode(this.designerMode?"designer":"edit");break;case"highlightSettings":case"underlineSettings":case"strikethroughSettings":this.annotationModule&&this.annotationModule.textMarkupAnnotationModule&&this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(a);break;case"signatureFieldSettings":case"initialFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateSignatureSettings(t[a],"initialFieldSettings"===a);break;case"textFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateTextFieldSettings(t[a]);break;case"passwordFieldSettings":this.formDesignerModule&&this.formDesignerModule.updatePasswordFieldSettings(t[a]);break;case"checkBoxFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateCheckBoxFieldSettings(t[a]);break;case"radioButtonFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateRadioButtonFieldSettings(t[a]);break;case"DropdownFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateDropDownFieldSettings(t[a]);break;case"listBoxFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateListBoxFieldSettings(t[a]);break;case"isFormDesignerToolbarVisible":(!E.isDevice||this.enableDesktopMode)&&(this.toolbarModule&&this.formDesignerModule&&!i.isFormDesignerToolbarVisible&&t.isFormDesignerToolbarVisible?(this.toolbarModule.annotationToolbarModule&&this.isAnnotationToolbarVisible&&(this.isAnnotationToolbarVisible=!1,this.toolbarModule.annotationToolbarModule.showAnnotationToolbar()),this.toolbarModule.formDesignerToolbarModule.resetFormDesignerToolbar()):!c(this.toolbarModule)&&!c(this.formDesignerModule)&&this.toolbarModule.formDesignerToolbarModule&&!this.isFormDesignerToolbarVisible&&(this.isFormDesignerToolbarVisible=!1,this.formDesignerModule.setMode("edit"),this.toolbarModule.formDesignerToolbarModule.resetFormDesignerToolbar()));break;case"isAnnotationToolbarVisible":(!E.isDevice||this.enableDesktopMode)&&this.toolbarModule&&this.annotationModule&&!i.isAnnotationToolbarVisible&&t.isAnnotationToolbarVisible&&(this.toolbarModule.formDesignerToolbarModule&&this.isFormDesignerToolbarVisible&&(this.isFormDesignerToolbarVisible=!1,this.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar()),this.toolbarModule.annotationToolbarModule.resetToolbar())}}},e.prototype.renderCustomerStamp=function(t){this.annotation.stampAnnotationModule.isStampAddMode=!0,this.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.viewerBase.stampAdded=!0,this.viewerBase.isAlreadyAdded=!1,this.annotation.stampAnnotationModule.createCustomStampAnnotation(t.customStampImageSource,t.customStampName)},e.prototype.getPersistData=function(){return"PdfViewer"},e.prototype.requiredModules=function(){var t=[];return this.enableMagnification&&t.push({member:"Magnification",args:[this,this.viewerBase]}),this.enableNavigation&&t.push({member:"Navigation",args:[this,this.viewerBase]}),(this.enableToolbar||this.enableNavigationToolbar||this.enableAnnotationToolbar||this.enableFormDesignerToolbar)&&t.push({member:"Toolbar",args:[this,this.viewerBase]}),this.enableHyperlink&&t.push({member:"LinkAnnotation",args:[this,this.viewerBase]}),this.enableThumbnail&&t.push({member:"ThumbnailView",args:[this,this.viewerBase]}),this.enableBookmark&&t.push({member:"BookmarkView",args:[this,this.viewerBase]}),this.enableTextSelection&&t.push({member:"TextSelection",args:[this,this.viewerBase]}),this.enableTextSearch&&t.push({member:"TextSearch",args:[this,this.viewerBase]}),this.enablePrint&&t.push({member:"Print",args:[this,this.viewerBase]}),this.enableAnnotation&&t.push({member:"Annotation",args:[this,this.viewerBase]}),this.enableFormFields&&t.push({member:"FormFields",args:[this,this.viewerBase]}),this.enableFormDesigner&&!X()&&t.push({member:"FormDesigner",args:[this,this.viewerBase]}),t.push({member:"AccessibilityTags",args:[this,this.viewerBase]}),t},e.prototype.load=function(t,i){this.viewerBase.clear(0!==this.pageCount),this.pageCount=0,this.currentPageNumber=0,X()?this.viewerBase.blazorUIAdaptor.resetToolbar():this.toolbarModule&&this.toolbarModule.resetToolbar(),this.viewerBase.initiatePageRender(t,i)},e.prototype.loadDocument=function(t,i,n){this.viewerBase.clear(0!==this.pageCount),this.pageCount=0,this.currentPageNumber=0,this.viewerBase.blazorUIAdaptor.resetToolbar(),this.fileName=n,this.viewerBase.initiateLoadDocument(t,i,n)},e.prototype.loadSuccess=function(t,i){this.viewerBase.loadSuccess(t,i)},e.prototype.focusElement=function(t){document.getElementById(t)?.focus()},e.prototype.download=function(){this.enableDownload&&this.viewerBase.download()},e.prototype.saveAsBlob=function(){var t=this;return this.enableDownload?new Promise(function(i,n){i(t.viewerBase.saveAsBlob())}):null},e.prototype.updateViewerContainer=function(){this.viewerBase.updateViewerContainer()},e.prototype.showNotificationPopup=function(t){this.viewerBase.showNotificationPopup(t)},e.prototype.focusFormField=function(t){var i=this;if("string"==typeof t)for(var n=this.retrieveFormFields(),r=0;r<n.length;r++)n[r].name===t&&(t=n[r]);if(t){if(this.viewerBase.isFocusField=!0,this.viewerBase.focusField=t,this.formDesignerModule)this.navigationModule.goToPage(t.pageIndex+1);else{var o=parseFloat(t.id.split("_")[1]);this.navigationModule.goToPage(o+1)}setTimeout(function(){var a=document.getElementById(t.id);i.formDesignerModule&&"Checkbox"===t.type&&(a=document.getElementById(t.id+"_input")),a&&(!i.formDesignerModule||"SignatureField"!==t.type&&"InitialField"!==t.type?(a.focus(),i.viewerBase.isFocusField=!1,i.viewerBase.focusField=[]):a.parentElement.focus())},100)}},e.prototype.updateFormFieldsValue=function(t){var i=document.getElementById(t.id),n=!1;if(i)if((i=i||document.getElementById(t.id+"_content_html_element").children[0].children[0])&&"Textbox"===t.type||"Password"===t.type||"PasswordField"===t.type?i.value=t.value:"Checkbox"===t.type||"RadioButton"===t.type||"CheckBox"===t.type?("CheckBox"===t.type&&(i.style.appearance="auto"),this.formDesignerModule?this.formDesignerModule.updateFormField(t,"RadioButton"===t.type?{isSelected:t.isSelected}:{isChecked:t.isChecked}):"RadioButton"===t.type?i.selected=t.isSelected:i.checked=t.isChecked):"DropDown"!==t.type&&"ListBox"!==t.type&&"DropdownList"!==t.type||(this.formDesignerModule?(n=!0,this.formDesignerModule.updateFormField(t,{options:t.value})):i.value=t.value),"SignatureField"===t.type||"InitialField"===t.type){(t.signatureType||t.initialType)&&(t.signatureType="string"==typeof t.signatureType?t.signatureType:t.initialType),t.fontName=t.fontName?t.fontName:t.fontFamily;var l=t.value,h=this.getFormFieldByID(t.id),d=this.formDesignerModule?h.value===t.value:h.Value===t.value;i.classList.contains("e-pdfviewer-signatureformfields-signature")&&!d&&this.annotation.deleteAnnotationById(this.formDesignerModule?t.id.split("_")[0]+"_content":t.id),(!t.signatureType||!t.value)&&(t.value=l,t.signatureType=this.viewerBase.isSignaturePathData(t.value)?"Path":this.viewerBase.isSignatureImageData(t.value)?"Image":"Type"),d||this.formFieldsModule.drawSignature(t.signatureType,t.value,i,t.fontName)}else n||this.formFieldsModule.updateDataInSession(i);else{var p=this.viewerBase.getItemFromSessionStorage("_formfields");if(p)for(var u=JSON.parse(p),f=function(){var b,y=u[m];b="Checkbox"===t.type||"RadioButton"===t.type||"CheckBox"===t.type?y.GroupName:"DropDown"===t.type||"ListBox"===t.type||"DropdownList"===t.type?y.Text:y.FieldName;var w=u.filter(function(I){return I.FieldName===y.FieldName.split("_")[0]});if(!c(w)&&!c(w[0])&&("SignatureField"===w[0].Name||"InitialField"===w[0].Name)&&(b=y.FieldName.split("_")[0],y.LineBounds=u.filter(function(I){return I.FieldName===b})[0].LineBounds),b===t.name){if("Textbox"===t.type||"Password"===t.type||"PasswordField"===t.type)t.value&&(y.Text=t.value,y.Value=t.value);else if("Checkbox"===t.type||"RadioButton"===t.type||"CheckBox"===t.type)y.Selected=!(!t.isSelected&&!t.isChecked);else if("DropDown"===t.type||"ListBox"===t.type||"DropdownList"===t.type){y.SelectedValue=t.value;var S=y.TextList?y.TextList.indexOf(t.value):0;y.selectedIndex=S>-1?S:0,"ListBox"===t.type&&(y.SelectedListed=[y.selectedIndex])}else("SignatureField"===t.type||"InitialField"===t.type)&&t.value&&(y.Value=t.value,y=g.updateSignatureValue(y,t));g.formFieldsModule.updateFormFieldsCollection(y)}},g=this,m=0;m<u.length;m++)f();window.sessionStorage.removeItem(this.viewerBase.documentId+"_formfields"),this.viewerBase.setItemInSessionStorage(u,"_formfields")}},e.prototype.getFormFieldByID=function(t){if(this.formDesignerModule)return this.nameTable[t.split("_")[0]];var i=window.sessionStorage.getItem(this.viewerBase.documentId+"_formfields"),n=JSON.parse(i);return n[n.findIndex(function(r){return r.uniqueID===t})]},e.prototype.ConvertPointToPixel=function(t){return t*(96/72)},e.prototype.updateSignatureValue=function(t,i){i.signatureType||(i.signatureType=this.viewerBase.isSignatureImageData(i.value)?"Image":this.viewerBase.isSignaturePathData(i.value)?"Path":"Type");var h,n=t.LineBounds,r=this.ConvertPointToPixel(n.X),o=this.ConvertPointToPixel(n.Y),a=this.ConvertPointToPixel(n.Width),l=this.ConvertPointToPixel(n.Height);if("Type"===i.signatureType){t.FontFamily||(t.FontFamily="Helvetica"),h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),r,o,a,l),"Default"===this.signatureFitMode&&(h=this.formFieldsModule.getDefaultBoundsforSign(h)),t.Bounds=h;var d=h.height/1.35,p=this.formFieldsModule.getTextWidth(t.value,d,t.FontFamily),u=1;p>h.width&&(u=h.width/p),t.FontSize=this.formFieldsModule.getFontSize(Math.floor(d*u))}else if("Image"===i.signatureType){h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),r,o,a,l);var f=new Image;f.src=t.Value;var g=this;f.onload=function(){g.imageOnLoad(h,f,t)}}else{if(-1!==t.Value.indexOf("base64"))h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),r,o,a,l),"Default"===this.signatureFitMode&&(h=this.formFieldsModule.getDefaultBoundsforSign(h));else if("Default"===this.signatureFitMode){var m=this.formFieldsModule.updateSignatureAspectRatio(t.Value,!1,null,t);(h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),r,o,m.width,m.height,!0)).x=h.x+m.left,h.y=h.y+m.top}else h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),r,o,a,l);t.Bounds=h}return t},e.prototype.imageOnLoad=function(t,i,n){if("Default"===this.signatureFitMode){var r=Math.min(t.height/this.paddingDifferenceValue,t.width/this.paddingDifferenceValue),l=i.width,h=i.height,d=t.width,p=t.height,u=Math.min((t.width-r)/l,(t.height-r)/h);t.width=l*u,t.height=h*u,t.x=t.x+(d-t.width)/2,t.y=t.y+(p-t.height)/2;var f=this.viewerBase.getItemFromSessionStorage("_formfields");if(f){for(var g=JSON.parse(f),m=0;m<g.length;m++)g[m].FieldName==n.FieldName&&(g[m].Bounds=t,this.formFieldsModule.updateFormFieldsCollection(g[m]));window.sessionStorage.removeItem(this.viewerBase.documentId+"_formfields"),this.viewerBase.setItemInSessionStorage(g,"_formfields")}}},e.prototype.undo=function(){this.annotationModule&&this.annotationModule.undo()},e.prototype.redo=function(){this.annotationModule&&this.annotationModule.redo()},e.prototype.unload=function(){this.viewerBase.clear(!0),this.pageCount=0,X()?this.viewerBase.blazorUIAdaptor.resetToolbar():this.toolbarModule&&(this.viewerBase.pageCount=0,this.toolbarModule.resetToolbar()),this.magnificationModule.zoomTo(100)},e.prototype.destroy=function(){s.prototype.destroy.call(this),c(this.element)||(this.refreshing||this.element.classList.remove("e-pdfviewer"),this.element.innerHTML=""),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!1),this.viewerBase.destroy(),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!0)},e.prototype.importAnnotation=function(t,i){if(this.annotationModule)if("string"==typeof t){var n=t.indexOf(".xfdf")>-1||i.indexOf("Xfdf")>-1;if(i)if(t.indexOf("</xfdf>")>-1)this.viewerBase.importAnnotations(t,i,!1);else if("Json"==i)if(t.includes("pdfAnnotation"))this.importAnnotationsAsJson(t);else if("json"===t.split(".")[1])this.viewerBase.isPDFViewerJson=!0,this.viewerBase.importAnnotations(t,i,n);else{var r=t.split(",")[1]?t.split(",")[1]:t.split(",")[0];t=decodeURIComponent(escape(atob(r))),this.importAnnotationsAsJson(t)}else this.viewerBase.importAnnotations(t,i,n);else"json"===t.split(".")[1]?(t.includes("pdfAnnotation")||(r=t.split(",")[1]?t.split(",")[1]:t.split(",")[0],t=decodeURIComponent(escape(atob(r)))),this.importAnnotationsAsJson(t)):this.viewerBase.importAnnotations(t,Yo.Xfdf,n)}else{var o=t.pdfAnnotation;"object"==typeof t&&!c(o)&&!c(Object.keys(o))&&!c(Object.keys(o)[0])&&Object.keys(o[Object.keys(o)[0]]).length>1?this.viewerBase.importAnnotations(t):(t=JSON.stringify(t),this.viewerBase.isPDFViewerJson=!1,this.viewerBase.importAnnotations(btoa(t),Yo.Json))}},e.prototype.importAnnotationsAsJson=function(t){var i=JSON.parse(t),n=i.pdfAnnotation[Object.keys(i.pdfAnnotation)[0]];Object.keys(i.pdfAnnotation).length>=1&&(n.textMarkupAnnotation||n.measureShapeAnnotation||n.freeTextAnnotation||n.stampAnnotations||n.signatureInkAnnotation||n.shapeAnnotation&&n.shapeAnnotation[0].Bounds)?(this.viewerBase.isPDFViewerJson=!0,this.viewerBase.importAnnotations(i,Yo.Json)):(this.viewerBase.isPDFViewerJson=!1,this.viewerBase.importAnnotations(btoa(t),Yo.Json))},e.prototype.exportAnnotation=function(t){this.annotationModule&&this.viewerBase.exportAnnotations(t&&"Xfdf"===t?Yo.Xfdf:Yo.Json)},e.prototype.exportAnnotationsAsObject=function(){var t=this;return this.annotationModule?new Promise(function(i,n){t.viewerBase.exportAnnotationsAsObject().then(function(r){var o=JSON.parse(r),a=JSON.stringify(o);i(a)})}):null},e.prototype.exportAnnotationsAsBase64String=function(t){var i=this;return this.annotationModule?new Promise(function(n,r){i.viewerBase.createRequestForExportAnnotations(!1,t,!0).then(function(o){n(o)})}):null},e.prototype.addAnnotation=function(t){this.viewerBase&&this.viewerBase.addAnnotation(t)},e.prototype.importFormFields=function(t,i){this.formFieldsModule&&(c(i)&&(i=TS.Json),this.viewerBase.importFormFields(t,i))},e.prototype.exportFormFields=function(t,i){this.formFieldsModule&&this.viewerBase.exportFormFields(t,i)},e.prototype.exportFormFieldsAsObject=function(t){var i=this;return this.formFieldsModule?new Promise(function(n,r){i.viewerBase.exportFormFieldsAsObject(t).then(function(o){n(o)})}):null},e.prototype.resetFormFields=function(){this.formFieldsModule.resetFormFields()},e.prototype.clearFormFields=function(t){this.formFieldsModule.clearFormFields(t)},e.prototype.deleteAnnotations=function(){this.annotationModule&&this.viewerBase.deleteAnnotations()},e.prototype.retrieveFormFields=function(){return this.formFieldCollections},e.prototype.updateFormFields=function(t){this.updateFormFieldsValue(t),this.formFieldsModule.updateFormFieldValues(t)},e.prototype.fireAjaxRequestInitiate=function(t){this.trigger("ajaxRequestInitiate",{name:"ajaxRequestInitiate",JsonData:t})},e.prototype.fireButtonFieldClickEvent=function(t,i,n){this.trigger("buttonFieldClick",{name:"buttonFieldClicked",buttonFieldValue:t,buttonFieldName:i,id:n})},e.prototype.fireFormFieldClickEvent=function(t,i,n,r){return HE(this,void 0,void 0,function(){var o,a,l,h;return _E(this,function(d){switch(d.label){case 0:return o={name:t,field:i,cancel:n},X()?[4,this.triggerEvent("formFieldClick",o)]:[3,2];case 1:return(o=d.sent()||o).field.type=i.type,[3,3];case 2:this.triggerEvent("formFieldClick",o),d.label=3;case 3:return("SignatureField"===i.type||"InitialField"===i.type)&&(this.viewerBase.isInitialField="InitialField"===i.type,"hidden"===(a=document.getElementById(i.id)).style.visibility&&(a.disabled=!0),a=a||(document.getElementById(i.id+"_content_html_element")?document.getElementById(i.id+"_content_html_element").children[0].children[0]:null),(l=this.formFieldCollections.filter(function(p){return p.id===i.id}))&&((h=l[0].isReadOnly)||o.cancel||!a||a.disabled||!a.classList.contains("e-pdfviewer-signatureformfields")||!r&&!c(r)?h&&(a.disabled=!0):this.viewerBase.signatureModule.showSignatureDialog(!0))),[2]}})})},e.prototype.fireFormFieldAddEvent=function(t,i,n){var r={name:t,field:i,pageIndex:n};this.viewerBase.isFormFieldSelect=!1,this.trigger("formFieldAdd",r)},e.prototype.fireFormFieldRemoveEvent=function(t,i,n){this.trigger("formFieldRemove",{name:t,field:i,pageIndex:n})},e.prototype.fireFormFieldDoubleClickEvent=function(t){return this.trigger("formFieldDoubleClick",t),t},e.prototype.fireFormFieldPropertiesChangeEvent=function(t,i,n,r,o,a,l,h,d,p,u,f,g,m,y,b,w,S,I,x,T){var L={name:t,field:i,pageIndex:n,isValueChanged:r,isFontFamilyChanged:o,isFontSizeChanged:a,isFontStyleChanged:l,isColorChanged:h,isBackgroundColorChanged:d,isBorderColorChanged:p,isBorderWidthChanged:u,isAlignmentChanged:f,isReadOnlyChanged:g,isVisibilityChanged:m,isMaxLengthChanged:y,isRequiredChanged:b,isPrintChanged:w,isToolTipChanged:S,oldValue:I,newValue:x,isNameChanged:!c(T)&&T};this.trigger("formFieldPropertiesChange",L)},e.prototype.fireFormFieldMouseLeaveEvent=function(t,i,n){this.trigger("formFieldMouseLeave",{name:t,field:i,pageIndex:n})},e.prototype.fireFormFieldMouseoverEvent=function(t,i,n,r,o,a,l){this.trigger("formFieldMouseover",{name:t,field:i,pageIndex:n,pageX:r,pageY:o,X:a,Y:l})},e.prototype.fireFormFieldMoveEvent=function(t,i,n,r,o){this.trigger("formFieldMove",{name:t,field:i,pageIndex:n,previousPosition:r,currentPosition:o})},e.prototype.fireFormFieldResizeEvent=function(t,i,n,r,o){this.trigger("formFieldResize",{name:t,field:i,pageIndex:n,previousPosition:r,currentPosition:o})},e.prototype.fireFormFieldSelectEvent=function(t,i,n,r){this.trigger("formFieldSelect",{name:t,field:i,pageIndex:n,isProgrammaticSelection:r})},e.prototype.fireFormFieldUnselectEvent=function(t,i,n){this.trigger("formFieldUnselect",{name:t,field:i,pageIndex:n})},e.prototype.fireDocumentLoad=function(t){this.trigger("documentLoad",{name:"documentLoad",documentName:this.fileName,pageData:t}),X()&&(this._dotnetInstance.invokeMethodAsync("LoadDocument",null),this.viewerBase.blazorUIAdaptor.loadDocument())},e.prototype.fireDocumentUnload=function(t){this.trigger("documentUnload",{name:"documentUnload",documentName:t})},e.prototype.fireDocumentLoadFailed=function(t,i){this.trigger("documentLoadFailed",{name:"documentLoadFailed",documentName:this.fileName,isPasswordRequired:t,password:i})},e.prototype.fireAjaxRequestFailed=function(t,i,n,r){var o={name:"ajaxRequestFailed",documentName:this.fileName,errorStatusCode:t,errorMessage:i,action:n};r&&(o.retryCount=!0),this.trigger("ajaxRequestFailed",o)},e.prototype.fireAjaxRequestSuccess=function(t,i){var n={name:"ajaxRequestSuccess",documentName:this.fileName,action:t,data:i,cancel:!1};return this.trigger("ajaxRequestSuccess",n),!!n.cancel},e.prototype.fireValidatedFailed=function(t){var i;X()?((i={}).documentName=this.fileName,i.formFields=this.formFieldCollections,i.nonFillableFields=this.viewerBase.nonFillableFields,this.trigger("validateFormFields",i)):this.trigger("validateFormFields",i={formField:this.formFieldCollections,documentName:this.fileName,nonFillableFields:this.viewerBase.nonFillableFields})},e.prototype.firePageClick=function(t,i,n){this.trigger("pageClick",{name:"pageClick",documentName:this.fileName,x:t,y:i,pageNumber:n})},e.prototype.firePageChange=function(t){this.trigger("pageChange",{name:"pageChange",documentName:this.fileName,currentPageNumber:this.currentPageNumber,previousPageNumber:t}),X()&&this.viewerBase.blazorUIAdaptor.pageChanged(this.currentPageNumber)},e.prototype.fireZoomChange=function(){this.trigger("zoomChange",{name:"zoomChange",zoomValue:100*this.magnificationModule.zoomFactor,previousZoomValue:100*this.magnificationModule.previousZoomFactor})},e.prototype.fireHyperlinkClick=function(t,i){return HE(this,void 0,void 0,function(){var n;return _E(this,function(r){switch(r.label){case 0:return n={name:"hyperlinkClick",hyperlink:t,hyperlinkElement:i,cancel:!1},X()?[4,this.triggerEvent("hyperlinkClick",n)]:[3,2];case 1:return n=r.sent()||n,[3,3];case 2:this.triggerEvent("hyperlinkClick",n),r.label=3;case 3:return n.hyperlinkElement.href!=n.hyperlink&&(i.href=n.hyperlink),n.cancel?[2,!1]:[2,!0]}})})},e.prototype.fireHyperlinkHover=function(t){this.trigger("hyperlinkMouseOver",{name:"hyperlinkMouseOver",hyperlinkElement:t})},e.prototype.fireFocusOutFormField=function(t,i){this.trigger("formFieldFocusOut",{name:"formFieldFocusOut",fieldName:t,value:i})},e.prototype.fireAnnotationAdd=function(t,i,n,r,o,a,l,h,d,p,u){var f={name:"annotationAdd",pageIndex:t,annotationId:i,annotationType:n,annotationBound:r,annotationSettings:o};a&&(X()?(f.annotationSettings.textMarkupContent=a,f.annotationSettings.textMarkupStartIndex=l,f.annotationSettings.textMarkupEndIndex=h):(f.textMarkupContent=a,f.textMarkupStartIndex=l,f.textMarkupEndIndex=h)),d&&(f.labelSettings=d),p&&(f.multiplePageCollection=p),"Image"===n&&(f.customStampName=u),this.viewerBase.isAnnotationSelect=!1,this.trigger("annotationAdd",f),X()&&this.viewerBase.blazorUIAdaptor.annotationAdd()},e.prototype.fireAnnotationRemove=function(t,i,n,r,o,a,l,h){var d={name:"annotationRemove",pageIndex:t,annotationId:i,annotationType:n,annotationBounds:r};o&&(d.textMarkupContent=o,d.textMarkupStartIndex=a,d.textMarkupEndIndex=l),h&&(d.multiplePageCollection=h),this.trigger("annotationRemove",d)},e.prototype.fireBeforeAddFreeTextAnnotation=function(t){this.trigger("beforeAddFreeText",{name:"beforeAddFreeText",value:t})},e.prototype.fireCommentAdd=function(t,i,n){this.trigger("commentAdd",{name:"CommentAdd",id:t,text:i,annotation:n})},e.prototype.fireCommentEdit=function(t,i,n){this.trigger("commentEdit",{name:"CommentEdit",id:t,text:i,annotation:n})},e.prototype.fireCommentDelete=function(t,i,n){this.trigger("commentDelete",{name:"CommentDelete",id:t,text:i,annotation:n})},e.prototype.fireCommentSelect=function(t,i,n){this.trigger("commentSelect",{name:"CommentSelect",id:t,text:i,annotation:n})},e.prototype.fireCommentStatusChanged=function(t,i,n,r){this.trigger("commentStatusChanged",{name:"CommentStatusChanged",id:t,text:i,annotation:n,status:r})},e.prototype.fireAnnotationPropertiesChange=function(t,i,n,r,o,a,l,h,d,p,u){var f={name:"annotationPropertiesChange",pageIndex:t,annotationId:i,annotationType:n,isColorChanged:r,isOpacityChanged:o,isTextChanged:a,isCommentsChanged:l};h&&(f.textMarkupContent=h,f.textMarkupStartIndex=d,f.textMarkupEndIndex=p),u&&(f.multiplePageCollection=u),this.trigger("annotationPropertiesChange",f)},e.prototype.fireSignatureAdd=function(t,i,n,r,o,a,l,h){var d={pageIndex:t,id:i,type:n,bounds:r,opacity:o};l&&(d.thickness=l),a&&(d.strokeColor=a),h&&(d.data=h),this.trigger("addSignature",d)},e.prototype.fireSignatureRemove=function(t,i,n,r){this.trigger("removeSignature",{pageIndex:t,id:i,type:n,bounds:r})},e.prototype.fireSignatureMove=function(t,i,n,r,o,a,l,h){this.trigger("moveSignature",{pageIndex:t,id:i,type:n,opacity:r,strokeColor:o,thickness:a,previousPosition:l,currentPosition:h})},e.prototype.fireSignaturePropertiesChange=function(t,i,n,r,o,a,l,h){this.trigger("signaturePropertiesChange",{pageIndex:t,id:i,type:n,isStrokeColorChanged:r,isOpacityChanged:o,isThicknessChanged:a,oldValue:l,newValue:h})},e.prototype.fireSignatureResize=function(t,i,n,r,o,a,l,h){this.trigger("resizeSignature",{pageIndex:t,id:i,type:n,opacity:r,strokeColor:o,thickness:a,currentPosition:l,previousPosition:h})},e.prototype.fireSignatureSelect=function(t,i,n){this.trigger("signatureSelect",{id:t,pageIndex:i,signature:n})},e.prototype.fireAnnotationSelect=function(t,i,n,r,o,a,l){var h={name:"annotationSelect",annotationId:t,pageIndex:i,annotation:n};if(r&&(h={name:"annotationSelect",annotationId:t,pageIndex:i,annotation:n,annotationCollection:r}),o&&(h.multiplePageCollection=o),a&&(h.isProgrammaticSelection=a),l&&(h.annotationAddMode=l),X()){if("FreeText"===n.type){var d={isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1};1===n.fontStyle?d.isBold=!0:2===n.fontStyle?d.isItalic=!0:3===n.fontStyle?d.isStrikeout=!0:4===n.fontStyle&&(d.isUnderline=!0),n.fontStyle=d}this.viewerBase.blazorUIAdaptor.annotationSelect(n.type)}this.trigger("annotationSelect",h)},e.prototype.fireAnnotationUnSelect=function(t,i,n){X()&&this.viewerBase.blazorUIAdaptor.annotationUnSelect(),this.trigger("annotationUnSelect",{name:"annotationUnSelect",annotationId:t,pageIndex:i,annotation:n})},e.prototype.fireAnnotationDoubleClick=function(t,i,n){this.trigger("annotationDoubleClick",{name:"annotationDblClick",annotationId:t,pageIndex:i,annotation:n})},e.prototype.fireTextSelectionStart=function(t){this.isTextSelectionStarted=!0,this.trigger("textSelectionStart",{pageIndex:t})},e.prototype.fireTextSelectionEnd=function(t,i,n){this.isTextSelectionStarted&&(this.trigger("textSelectionEnd",{pageIndex:t,textContent:i,textBounds:n}),this.isTextSelectionStarted=!1)},e.prototype.renderDrawing=function(t,i){c(i)&&this.viewerBase.activeElements.activePageID&&!this.viewerBase.isPrint&&(i=this.viewerBase.activeElements.activePageID),this.annotation?this.annotation.renderAnnotations(i,null,null,null,t):this.formDesignerModule&&this.formDesignerModule.updateCanvas(i,t)},e.prototype.fireAnnotationResize=function(t,i,n,r,o,a,l,h,d,p){var u={name:"annotationResize",pageIndex:t,annotationId:i,annotationType:n,annotationBound:r,annotationSettings:o};a&&(u.textMarkupContent=a,u.textMarkupStartIndex=l,u.textMarkupEndIndex=h),d&&(u.labelSettings=d),p&&(u.multiplePageCollection=p),this.trigger("annotationResize",u)},e.prototype.fireAnnotationMoving=function(t,i,n,r,o,a){this.trigger("annotationMoving",{name:"annotationMoving",pageIndex:t,annotationId:i,annotationType:n,annotationSettings:r,previousPosition:o,currentPosition:a})},e.prototype.fireAnnotationMove=function(t,i,n,r,o,a){this.trigger("annotationMove",{name:"annotationMove",pageIndex:t,annotationId:i,annotationType:n,annotationSettings:r,previousPosition:o,currentPosition:a})},e.prototype.fireAnnotationMouseover=function(t,i,n,r,o,a,l){var h={name:"annotationMouseover",annotationId:t,pageIndex:i,annotationType:n,annotationBounds:r,annotation:o,pageX:a.left,pageY:a.top,X:l.left,Y:l.top};X()&&("Perimeter calculation"===o.subject?h.annotationType="Perimeter":"Area calculation"===o.subject?h.annotationType="Area":"Volume calculation"===o.subject?h.annotationType="Volume":"Arrow"===o.subject?h.annotationType="Arrow":"Circle"===o.subject&&(h.annotationType="Circle")),this.trigger("annotationMouseover",h)},e.prototype.fireAnnotationMouseLeave=function(t){this.trigger("annotationMouseLeave",{name:"annotationMouseLeave",pageIndex:t})},e.prototype.firePageMouseover=function(t,i){this.trigger("pageMouseover",{pageX:t,pageY:i})},e.prototype.fireDownloadStart=function(t){this.trigger("downloadStart",{fileName:t})},e.prototype.fireDownloadEnd=function(t,i){this.trigger("downloadEnd",{fileName:t,downloadDocument:i})},e.prototype.firePrintStart=function(){return HE(this,void 0,void 0,function(){var t;return _E(this,function(i){switch(i.label){case 0:return t={fileName:this.downloadFileName,cancel:!1},X?[4,this.triggerEvent("printStart",t)]:[3,2];case 1:return t=i.sent()||t,[3,3];case 2:this.triggerEvent("printStart",t),i.label=3;case 3:return t.cancel||this.printModule.print(),[2]}})})},e.prototype.triggerEvent=function(t,i){return HE(this,void 0,void 0,function(){var n;return _E(this,function(r){switch(r.label){case 0:return[4,this.trigger(t,i)];case 1:return n=r.sent(),X&&"string"==typeof n&&(n=JSON.parse(n)),[2,n]}})})},e.prototype.firePrintEnd=function(t){this.trigger("printEnd",{fileName:t})},e.prototype.fireThumbnailClick=function(t){this.trigger("thumbnailClick",{name:"thumbnailClick",pageNumber:t})},e.prototype.fireBookmarkClick=function(t,i,n,r){this.trigger("bookmarkClick",{name:"bookmarkClick",pageNumber:t,position:i,text:n,fileName:r})},e.prototype.fireImportStart=function(t){this.trigger("importStart",{name:"importAnnotationsStart",importData:t,formFieldData:null})},e.prototype.fireExportStart=function(t){this.trigger("exportStart",{name:"exportAnnotationsStart",exportData:t,formFieldData:null})},e.prototype.fireImportSuccess=function(t){this.trigger("importSuccess",{name:"importAnnotationsSuccess",importData:t,formFieldData:null})},e.prototype.fireExportSuccess=function(t,i){this.trigger("exportSuccess",{name:"exportAnnotationsSuccess",exportData:t,fileName:i,formFieldData:null})},e.prototype.fireImportFailed=function(t,i){this.trigger("importFailed",{name:"importAnnotationsFailed",importData:t,errorDetails:i,formFieldData:null})},e.prototype.fireExportFailed=function(t,i){this.trigger("exportFailed",{name:"exportAnnotationsFailed",exportData:t,errorDetails:i,formFieldData:null})},e.prototype.fireFormImportStarted=function(t){this.trigger("importStart",{name:"importFormFieldsStart",importData:null,formFieldData:t})},e.prototype.fireFormExportStarted=function(t){this.trigger("exportStart",{name:"exportFormFieldsStart",exportData:null,formFieldData:t})},e.prototype.fireFormImportSuccess=function(t){this.trigger("importSuccess",{name:"importFormFieldsSuccess",importData:t,formFieldData:t})},e.prototype.fireFormExportSuccess=function(t,i){this.trigger("exportSuccess",{name:"exportFormFieldsSuccess",exportData:t,fileName:i,formFieldData:t})},e.prototype.fireFormImportFailed=function(t,i){this.trigger("importFailed",{name:"importFormFieldsfailed",importData:t,errorDetails:i,formFieldData:t})},e.prototype.fireFormExportFailed=function(t,i){this.trigger("exportFailed",{name:"exportFormFieldsFailed",exportData:t,errorDetails:i,formFieldData:t})},e.prototype.fireTextExtractionCompleted=function(t){this.trigger("extractTextCompleted",{documentTextCollection:t})},e.prototype.fireTextSearchStart=function(t,i){this.trigger("textSearchStart",{name:"textSearchStart",searchText:t,matchCase:i})},e.prototype.fireTextSearchComplete=function(t,i){this.trigger("textSearchComplete",{name:"textSearchComplete",searchText:t,matchCase:i})},e.prototype.fireTextSearchHighlight=function(t,i,n,r){this.trigger("textSearchHighlight",{name:"textSearchHighlight",searchText:t,matchCase:i,bounds:n,pageNumber:r})},e.prototype.renderAdornerLayer=function(t,i,n,r){WK(t,i,n,r,this)},e.prototype.renderSelector=function(t,i){this.drawing.renderSelector(t,i)},e.prototype.select=function(t,i,n,r){var o=this.allowServerDataBinding;if(this.enableServerDataBinding(!1),this.annotationModule){var a=this.annotationModule.textMarkupAnnotationModule,l=a&&a.selectTextMarkupCurrentPage,h=this.selectedItems.annotations[0];if(l){var d=this.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(l,!0),this.fireAnnotationUnSelect(d.annotName,d.pageNumber,d)}n||this.viewerBase.activeElements&&this.viewerBase.activeElements.activePageID>=0&&!this.viewerBase.isNewStamp&&h&&"HandWrittenSignature"!==h.shapeAnnotationType&&"SignatureText"!==h.shapeAnnotationType&&"SignatureImage"!==h.shapeAnnotationType&&this.fireAnnotationUnSelect(h.annotName,h.pageIndex,h)}if(this.formDesignerModule){var p=this.selectedItems.formFields[0];p&&this.formDesignerModule&&p&&p.formFieldAnnotationType&&this.fireFormFieldUnselectEvent("formFieldUnselect",{name:p.name,id:p.id,value:p.value,fontFamily:p.fontFamily,fontSize:p.fontSize,fontStyle:p.fontStyle,color:p.color,backgroundColor:p.backgroundColor,borderColor:p.borderColor,thickness:p.thickness,alignment:p.alignment,isReadonly:p.isReadonly,visibility:p.visibility,maxLength:p.maxLength,isRequired:p.isRequired,isPrint:p.isPrint,rotation:p.rotateAngle,tooltip:p.tooltip,options:p.options,isChecked:p.isChecked,isSelected:p.isSelected},p.pageIndex)}var f=this;this.viewerBase.renderedPagesList.forEach(function(g){f.clearSelection(g)}),this.drawing.select(t,i,n,r),this.enableServerDataBinding(o,!0)},e.prototype.getPageTable=function(t){return this.drawing.getPageTable(t)},e.prototype.dragSelectedObjects=function(t,i,n,r,o){return this.drawing.dragSelectedObjects(t,i,n,r,o)},e.prototype.scaleSelectedItems=function(t,i,n){return this.drawing.scaleSelectedItems(t,i,n)},e.prototype.dragConnectorEnds=function(t,i,n,r,o,a,l){return this.drawing.dragConnectorEnds(t,i,n,r,o,null,l)},e.prototype.clearSelection=function(t){var i=this.allowServerDataBinding;this.enableServerDataBinding(!1);var n=this.selectedItems;if(n.annotations.length>0?(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.annotations=[],n.wrapper=null):n.formFields.length>0&&(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.formFields=[],n.wrapper=null),this.drawing.clearSelectorLayer(t),this.viewerBase.isAnnotationSelect=!1,this.viewerBase.isFormFieldSelect=!1,this.annotationModule){var o=this.annotationModule.textMarkupAnnotationModule;if(o){var a=o.selectTextMarkupCurrentPage;this.annotationModule.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(a)}}this.enableServerDataBinding(i,!0)},e.prototype.getPageNumberFromClientPoint=function(t){return this.viewerBase.getPageNumberFromClientPoint(t)},e.prototype.convertClientPointToPagePoint=function(t,i){return this.viewerBase.convertClientPointToPagePoint(t,i)},e.prototype.convertPagePointToClientPoint=function(t,i){return this.viewerBase.convertPagePointToClientPoint(t,i)},e.prototype.convertPagePointToScrollingPoint=function(t,i){return this.viewerBase.convertPagePointToScrollingPoint(t,i)},e.prototype.zoomToRect=function(t){this.magnificationModule.zoomToRect(t)},e.prototype.add=function(t){return this.drawing.add(t)},e.prototype.remove=function(t){return this.drawing.remove(t)},e.prototype.copy=function(){return this.annotation?this.annotation.isShapeCopied=!0:this.formDesigner&&this.designerMode&&(this.formDesigner.isShapeCopied=!0),this.drawing.copy()},e.prototype.rotate=function(t,i){return this.drawing.rotate(this.selectedItems,t,null,i)},e.prototype.paste=function(t){var i;return this.viewerBase.activeElements.activePageID&&(i=this.viewerBase.activeElements.activePageID),this.drawing.paste(t,i||0)},e.prototype.refresh=function(){for(var t=0;t<this.annotations.length;t++){if(void 0!==this.zIndexTable.length){for(var i=0;i<this.zIndexTable.length;i++){for(var n=this.zIndexTable[i].objects,r=0;r<n.length;r++)n.splice(r,1);delete this.zIndexTable[i]}this.annotations[t]&&delete this.annotations[t],this.selectedItems.annotations&&this.selectedItems.annotations[t]&&delete this.selectedItems.annotations[t],this.zIndexTable=[],this.renderDrawing()}this.annotations&&0!==this.annotations.length&&(this.annotations.length=0,this.selectedItems.annotations.length=0)}},e.prototype.cut=function(){var t;return this.viewerBase.activeElements.activePageID&&(t=this.viewerBase.activeElements.activePageID),this.annotation?this.annotation.isShapeCopied=!0:this.formDesigner&&this.designerMode&&(this.formDesigner.isShapeCopied=!0),this.drawing.cut(t||0)},e.prototype.nodePropertyChange=function(t,i){this.drawing.nodePropertyChange(t,i)},e.prototype.enableServerDataBinding=function(t,i){void 0===i&&(i=!1),X()&&(this.allowServerDataBinding=t,i&&(this.bulkChanges={}))},e.prototype.checkBoundaryConstraints=function(t,i,n,r,o,a){return this.drawing.checkBoundaryConstraints(t,i,n,r,o,a)},D([v()],e.prototype,"serviceUrl",void 0),D([v(0)],e.prototype,"pageCount",void 0),D([v(!1)],e.prototype,"isDocumentEdited",void 0),D([v(0)],e.prototype,"currentPageNumber",void 0),D([v()],e.prototype,"documentPath",void 0),D([v(null)],e.prototype,"exportAnnotationFileName",void 0),D([v()],e.prototype,"downloadFileName",void 0),D([v("auto")],e.prototype,"height",void 0),D([v("auto")],e.prototype,"width",void 0),D([v(!0)],e.prototype,"enableToolbar",void 0),D([v(1)],e.prototype,"retryCount",void 0),D([v([500])],e.prototype,"retryStatusCodes",void 0),D([v(0)],e.prototype,"retryTimeout",void 0),D([v(2)],e.prototype,"initialRenderPages",void 0),D([v(!0)],e.prototype,"showNotificationDialog",void 0),D([v(!0)],e.prototype,"enableNavigationToolbar",void 0),D([v(!0)],e.prototype,"enableCommentPanel",void 0),D([v(!1)],e.prototype,"isCommandPanelOpen",void 0),D([v(!1)],e.prototype,"enableTextMarkupResizer",void 0),D([v(!1)],e.prototype,"enableMultiLineOverlap",void 0),D([v(!1)],e.prototype,"isValidFreeText",void 0),D([v(!1)],e.prototype,"isAnnotationToolbarOpen",void 0),D([v(!1)],e.prototype,"isAnnotationToolbarVisible",void 0),D([v(!1)],e.prototype,"isFormDesignerToolbarVisible",void 0),D([v(!1)],e.prototype,"enableMultiPageAnnotation",void 0),D([v(!0)],e.prototype,"enableDownload",void 0),D([v(!0)],e.prototype,"enablePrint",void 0),D([v(!0)],e.prototype,"enablePrintRotation",void 0),D([v(!0)],e.prototype,"enableThumbnail",void 0),D([v(!1)],e.prototype,"isThumbnailViewOpen",void 0),D([v(!1)],e.prototype,"isSignatureEditable",void 0),D([v(!0)],e.prototype,"enableBookmark",void 0),D([v(!1)],e.prototype,"enableBookmarkStyles",void 0),D([v(!0)],e.prototype,"enableHyperlink",void 0),D([v(!0)],e.prototype,"enableHandwrittenSignature",void 0),D([v(!0)],e.prototype,"enableInkAnnotation",void 0),D([v(!1)],e.prototype,"restrictZoomRequest",void 0),D([v("CurrentTab")],e.prototype,"hyperlinkOpenState",void 0),D([v("RightClick")],e.prototype,"contextMenuOption",void 0),D([v([])],e.prototype,"disableContextMenuItems",void 0),D([v({name:"",id:"",type:"",isReadOnly:!1,isSelected:!1,isChecked:!1,value:"",signatureType:[""],fontName:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",visibility:"visible",maxLength:0,isRequired:!1,isPrint:!1,tooltip:"",pageIndex:-1,options:[],signatureIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"}})],e.prototype,"formFieldCollections",void 0),D([v(!0)],e.prototype,"enableNavigation",void 0),D([v(!0)],e.prototype,"enableAutoComplete",void 0),D([v(!0)],e.prototype,"enableMagnification",void 0),D([v(!1)],e.prototype,"enableShapeLabel",void 0),D([v(!0)],e.prototype,"enableImportAnnotationMeasurement",void 0),D([v(!0)],e.prototype,"enablePinchZoom",void 0),D([v(!0)],e.prototype,"enableTextSelection",void 0),D([v(!0)],e.prototype,"enableTextSearch",void 0),D([v(!0)],e.prototype,"enableAnnotation",void 0),D([v(!0)],e.prototype,"enableFormFields",void 0),D([v(!0)],e.prototype,"enableFormDesigner",void 0),D([v(!1)],e.prototype,"designerMode",void 0),D([v(!1)],e.prototype,"enableFormFieldsValidation",void 0),D([v(!1)],e.prototype,"isFormFieldDocument",void 0),D([v(!1)],e.prototype,"enableDesktopMode",void 0),D([v(!1)],e.prototype,"hideSaveSignature",void 0),D([v(!0)],e.prototype,"enableFreeText",void 0),D([v(!0)],e.prototype,"enableTextMarkupAnnotation",void 0),D([v(!0)],e.prototype,"enableShapeAnnotation",void 0),D([v(!0)],e.prototype,"enableMeasureAnnotation",void 0),D([v(!0)],e.prototype,"enableStampAnnotations",void 0),D([v(!0)],e.prototype,"enableStickyNotesAnnotation",void 0),D([v(!0)],e.prototype,"enableAnnotationToolbar",void 0),D([v(!0)],e.prototype,"enableFormDesignerToolbar",void 0),D([v(!1)],e.prototype,"isBookmarkPanelOpen",void 0),D([v(!1)],e.prototype,"isInitialFieldToolbarSelection",void 0),D([v("TextSelection")],e.prototype,"interactionMode",void 0),D([v("Default")],e.prototype,"zoomMode",void 0),D([v("Default")],e.prototype,"signatureFitMode",void 0),D([v("Default")],e.prototype,"printMode",void 0),D([v(0)],e.prototype,"zoomValue",void 0),D([v(!0)],e.prototype,"enableZoomOptimization",void 0),D([v(!1)],e.prototype,"isExtractText",void 0),D([v(!1)],e.prototype,"isMaintainSelection",void 0),D([v(!1)],e.prototype,"hideEmptyDigitalSignatureFields",void 0),D([v(!0)],e.prototype,"showDigitalSignatureAppearance",void 0),D([v(!0)],e.prototype,"enableAccessibilityTags",void 0),D([v("M/d/yyyy h:mm:ss a")],e.prototype,"dateTimeFormat",void 0),D([v({showTooltip:!0,toolbarItems:["OpenOption","UndoRedoTool","PageNavigationTool","MagnificationTool","PanTool","SelectionTool","CommentTool","SubmitForm","AnnotationEditTool","FormDesignerEditTool","FreeTextAnnotationOption","InkAnnotationOption","ShapeAnnotationOption","StampAnnotation","SignatureOption","SearchOption","PrintOption","DownloadOption"],annotationToolbarItems:["HighlightTool","UnderlineTool","StrikethroughTool","ColorEditTool","OpacityEditTool","AnnotationDeleteTool","StampAnnotationTool","HandWrittenSignatureTool","InkAnnotationTool","ShapeTool","CalibrateTool","StrokeColorEditTool","ThicknessEditTool","FreeTextAnnotationTool","FontFamilyAnnotationTool","FontSizeAnnotationTool","FontStylesAnnotationTool","FontAlignAnnotationTool","FontColorAnnotationTool","CommentPanelTool"],formDesignerToolbarItems:["TextboxTool","PasswordTool","CheckBoxTool","RadioButtonTool","DropdownTool","ListboxTool","DrawSignatureTool","DeleteTool"]})],e.prototype,"toolbarSettings",void 0),D([v({ajaxHeaders:[],withCredentials:!1})],e.prototype,"ajaxRequestSettings",void 0),D([v({customStampName:"",customStampImageSource:""})],e.prototype,"customStamp",void 0),D([v({load:"Load",renderPages:"RenderPdfPages",unload:"Unload",download:"Download",renderThumbnail:"RenderThumbnailImages",print:"PrintImages",renderComments:"RenderAnnotationComments",importAnnotations:"ImportAnnotations",exportAnnotations:"ExportAnnotations",importFormFields:"ImportFormFields",exportFormFields:"ExportFormFields",renderTexts:"RenderPdfTexts"})],e.prototype,"serverActionSettings",void 0),D([v({name:"",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",thickness:1,signatureIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"},signatureDialogSettings:{displayMode:Bi.Draw|Bi.Text|Bi.Upload,hideSaveSignature:!1}})],e.prototype,"signatureFieldSettings",void 0),D([v({name:"",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",thickness:1,initialIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"},initialDialogSettings:{displayMode:Bi.Draw|Bi.Text|Bi.Upload,hideSaveSignature:!1}})],e.prototype,"initialFieldSettings",void 0),D([v({opacity:1,color:"#FFDF56",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"highlightSettings",void 0),D([v({opacity:1,color:"#ff0000",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"strikethroughSettings",void 0),D([v({opacity:1,color:"#00ff00",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"underlineSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"None",lineHeadEndStyle:"None",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"lineSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Closed",lineHeadEndStyle:"Closed",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"arrowSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"rectangleSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",borderColor:"#ff0000",fontColor:"#000",fontSize:16,labelHeight:24.6,labelMaxWidth:151,labelContent:"Label"})],e.prototype,"shapeLabelSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"circleSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"polygonSettings",void 0),D([v({opacity:1,author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,dynamicStamps:[Wl.Revised,Wl.Reviewed,Wl.Received,Wl.Confidential,Wl.Approved,Wl.NotApproved],signStamps:[Go.Witness,Go.InitialHere,Go.SignHere,Go.Accepted,Go.Rejected],standardBusinessStamps:[ls.Approved,ls.NotApproved,ls.Draft,ls.Final,ls.Completed,ls.Confidential,ls.ForPublicRelease,ls.NotForPublicRelease,ls.ForComment,ls.Void,ls.PreliminaryResults,ls.InformationOnly],allowedInteractions:["None"],isPrint:!0})],e.prototype,"stampSettings",void 0),D([v({opacity:1,author:"Guest",width:0,height:0,left:0,top:0,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,enableCustomStamp:!0,allowedInteractions:["None"],isPrint:!0})],e.prototype,"customStampSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Closed",lineHeadEndStyle:"Closed",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,leaderLength:40,resizeCursorType:xS.move,allowedInteractions:["None"],isPrint:!0})],e.prototype,"distanceSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Open",lineHeadEndStyle:"Open",minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],e.prototype,"perimeterSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],e.prototype,"areaSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"radiusSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],e.prototype,"volumeSettings",void 0),D([v({author:"Guest",opacity:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"stickyNotesSettings",void 0),D([v({opacity:1,fillColor:"#ffffff00",borderColor:"#ffffff00",author:"Guest",borderWidth:1,width:151,fontSize:16,height:24.6,fontColor:"#000",fontFamily:"Helvetica",defaultText:"Type Here",textAlignment:"Left",fontStyle:Io.None,allowTextOnly:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0,isReadonly:!1,enableAutoFit:!1})],e.prototype,"freeTextSettings",void 0),D([v({conversionUnit:"in",displayUnit:"in",scaleRatio:1,depth:96})],e.prototype,"measurementSettings",void 0),D([v({selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null})],e.prototype,"annotationSelectorSettings",void 0),D([v({searchHighlightColor:"#fdd835",searchColor:"#8b4c12"})],e.prototype,"textSearchColorSettings",void 0),D([v({displayMode:Bi.Draw|Bi.Text|Bi.Upload,hideSaveSignature:!1})],e.prototype,"signatureDialogSettings",void 0),D([v({displayMode:Bi.Draw|Bi.Text|Bi.Upload,hideSaveSignature:!1})],e.prototype,"initialDialogSettings",void 0),D([v({signatureItem:["Signature","Initial"],saveSignatureLimit:1,saveInitialLimit:1,opacity:1,strokeColor:"#000000",width:150,height:100,thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},allowedInteractions:["None"],signatureDialogSettings:{displayMode:Bi.Draw|Bi.Text|Bi.Upload,hideSaveSignature:!1},initialDialogSettings:{displayMode:Bi.Draw|Bi.Text|Bi.Upload,hideSaveSignature:!1}})],e.prototype,"handWrittenSignatureSettings",void 0),D([v({author:"Guest",opacity:1,strokeColor:"#ff0000",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Gt.Corners|Gt.Edges,resizerCursorType:null},isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"inkAnnotationSettings",void 0),D([v({author:"Guest",minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,skipPrint:!1,skipDownload:!1,allowedInteractions:["None"]})],e.prototype,"annotationSettings",void 0),D([v({enableTileRendering:!0,x:0,y:0})],e.prototype,"tileRenderingSettings",void 0),D([v({delayPageRequestTimeOnScroll:100})],e.prototype,"scrollSettings",void 0),D([v({name:"",value:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",borderColor:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",maxLength:0,isRequired:!1,isPrint:!0,tooltip:"",thickness:1,isMultiline:!1})],e.prototype,"textFieldSettings",void 0),D([v({name:"",value:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",borderColor:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",maxLength:0,isRequired:!1,isPrint:!0,tooltip:"",thickness:1})],e.prototype,"passwordFieldSettings",void 0),D([v({name:"",isChecked:!1,backgroundColor:"white",isReadOnly:!1,visibility:"visible",isPrint:!0,tooltip:"",isRequired:!1,thickness:1,borderColor:"black"})],e.prototype,"checkBoxFieldSettings",void 0),D([v({name:"",isSelected:!1,backgroundColor:"white",isReadOnly:!1,visibility:"visible",isPrint:!0,tooltip:"",isRequired:!1,thickness:1,borderColor:"black"})],e.prototype,"radioButtonFieldSettings",void 0),D([v({name:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",options:[],thickness:1,borderColor:"black"})],e.prototype,"DropdownFieldSettings",void 0),D([v({name:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!1,tooltip:"",options:[],thickness:1,borderColor:"black"})],e.prototype,"listBoxFieldSettings",void 0),D([v({contextMenuAction:"RightClick",contextMenuItems:[xo.Comment,xo.Copy,xo.Cut,xo.Delete,xo.Highlight,xo.Paste,xo.Properties,xo.ScaleRatio,xo.Strikethrough,xo.Underline]})],e.prototype,"contextMenuSettings",void 0),D([Fe({},Tu)],e.prototype,"selectedItems",void 0),D([V()],e.prototype,"created",void 0),D([V()],e.prototype,"documentLoad",void 0),D([V()],e.prototype,"documentUnload",void 0),D([V()],e.prototype,"documentLoadFailed",void 0),D([V()],e.prototype,"ajaxRequestFailed",void 0),D([V()],e.prototype,"ajaxRequestSuccess",void 0),D([V()],e.prototype,"validateFormFields",void 0),D([V()],e.prototype,"pageClick",void 0),D([V()],e.prototype,"pageChange",void 0),D([V()],e.prototype,"hyperlinkClick",void 0),D([V()],e.prototype,"hyperlinkMouseOver",void 0),D([V()],e.prototype,"zoomChange",void 0),D([V()],e.prototype,"annotationAdd",void 0),D([V()],e.prototype,"annotationRemove",void 0),D([V()],e.prototype,"annotationPropertiesChange",void 0),D([V()],e.prototype,"annotationResize",void 0),D([V()],e.prototype,"addSignature",void 0),D([V()],e.prototype,"removeSignature",void 0),D([V()],e.prototype,"moveSignature",void 0),D([V()],e.prototype,"signaturePropertiesChange",void 0),D([V()],e.prototype,"resizeSignature",void 0),D([V()],e.prototype,"signatureSelect",void 0),D([V()],e.prototype,"annotationSelect",void 0),D([V()],e.prototype,"annotationUnSelect",void 0),D([V()],e.prototype,"annotationDoubleClick",void 0),D([V()],e.prototype,"annotationMove",void 0),D([V()],e.prototype,"annotationMoving",void 0),D([V()],e.prototype,"annotationMouseover",void 0),D([V()],e.prototype,"annotationMouseLeave",void 0),D([V()],e.prototype,"pageMouseover",void 0),D([V()],e.prototype,"importStart",void 0),D([V()],e.prototype,"exportStart",void 0),D([V()],e.prototype,"importSuccess",void 0),D([V()],e.prototype,"exportSuccess",void 0),D([V()],e.prototype,"importFailed",void 0),D([V()],e.prototype,"exportFailed",void 0),D([V()],e.prototype,"extractTextCompleted",void 0),D([V()],e.prototype,"thumbnailClick",void 0),D([V()],e.prototype,"bookmarkClick",void 0),D([V()],e.prototype,"textSelectionStart",void 0),D([V()],e.prototype,"textSelectionEnd",void 0),D([V()],e.prototype,"downloadStart",void 0),D([V()],e.prototype,"buttonFieldClick",void 0),D([V()],e.prototype,"formFieldClick",void 0),D([V()],e.prototype,"downloadEnd",void 0),D([V()],e.prototype,"printStart",void 0),D([V()],e.prototype,"printEnd",void 0),D([V()],e.prototype,"textSearchStart",void 0),D([V()],e.prototype,"textSearchComplete",void 0),D([V()],e.prototype,"textSearchHighlight",void 0),D([V()],e.prototype,"ajaxRequestInitiate",void 0),D([V()],e.prototype,"commentAdd",void 0),D([V()],e.prototype,"commentEdit",void 0),D([V()],e.prototype,"commentDelete",void 0),D([V()],e.prototype,"commentSelect",void 0),D([V()],e.prototype,"commentStatusChanged",void 0),D([V()],e.prototype,"beforeAddFreeText",void 0),D([V()],e.prototype,"formFieldFocusOut",void 0),D([V()],e.prototype,"formFieldAdd",void 0),D([V()],e.prototype,"formFieldRemove",void 0),D([V()],e.prototype,"formFieldPropertiesChange",void 0),D([V()],e.prototype,"formFieldMouseLeave",void 0),D([V()],e.prototype,"formFieldMouseover",void 0),D([V()],e.prototype,"formFieldMove",void 0),D([V()],e.prototype,"formFieldResize",void 0),D([V()],e.prototype,"formFieldSelect",void 0),D([V()],e.prototype,"formFieldUnselect",void 0),D([V()],e.prototype,"formFieldDoubleClick",void 0),D([Sn([],TE)],e.prototype,"annotations",void 0),D([Sn([],ME)],e.prototype,"formFields",void 0),D([v()],e.prototype,"drawingObject",void 0),D([et],e)}(Lt),qLe=function(){function s(e,t){var i=this;this.childNavigateCount=0,this.bookmarkClick=function(n){if(n.event.target.classList.contains("e-icons"))i.childNavigateCount++;else{var r=n.data.Id;i.childNavigateCount=0,i.pdfViewerBase.navigationPane.goBackToToolbar();var o=i.bookmarkList.getSelectedItems();i.navigateToBookmark(r,n.text,o.data.FileName)}return!1},this.nodeClick=function(n){i.setHeight(n.node);var r=Number(n.nodeData.id),o=i.treeObj.getTreeData(n.node);if(i.navigateToBookmark(r,n.node.textContent,o[0].FileName),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var a=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(a)}return!1},this.bookmarkPanelBeforeOpen=function(n){if(i.pdfViewer.enableBookmarkStyles)for(var r=0;r<i.bookmarkStyles.length;r++)if(n.text.trim()===i.bookmarkStyles[r].Text.trim()){var o=n.node.lastElementChild;if(o){for(var a=i.bookmarkStyles[r].FontStyle.split(","),l=0;l<a.length;l++)switch(a[l].trim()){case"Italic":o.style.fontStyle="italic";break;case"Bold":o.style.fontWeight="Bold"}var h=o.getElementsByClassName("e-pv-bookmark-title")[0];h?h.style.color=i.bookmarkStyles[r].Color:o.children[0].style.color=i.bookmarkStyles[r].Color}break}},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createRequestForBookmarks=function(){var e=this,t={hashId:this.pdfViewerBase.hashId,action:"Bookmarks",elementId:this.pdfViewer.element.id,uniqueId:this.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(t.documentId=this.pdfViewerBase.jsonDocumentId),this.pdfViewer.enableBookmarkStyles&&(t.bookmarkStyles=this.pdfViewer.enableBookmarkStyles),this.bookmarkRequestHandler=new hs(this.pdfViewer),this.bookmarkRequestHandler.url=e.pdfViewer.serviceUrl+"/Bookmarks",this.bookmarkRequestHandler.responseType="json",this.bookmarkRequestHandler.send(t),this.bookmarkRequestHandler.onSuccess=function(i){e.pdfViewerBase.navigationPane&&e.pdfViewerBase.navigationPane.disableBookmarkButton();var n=i.data;if(!e.pdfViewerBase.checkRedirection(n)){if(n){if("object"!=typeof n)try{n=JSON.parse(n)}catch{e.pdfViewerBase.onControlError(500,n,"Bookmarks"),n=null}n&&n.uniqueId===e.pdfViewerBase.documentId&&(e.pdfViewer.fireAjaxRequestSuccess("Bookmarks",n),e.bookmarks={bookMark:n.Bookmarks},e.bookmarkStyles=n.Bookmarkstyles,e.bookmarksDestination={bookMarkDestination:n.BookmarksDestination},X())&&e.pdfViewer&&e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",{bookmarks:e.bookmarks,bookmarksDestination:e.bookmarksDestination})}e.pdfViewerBase.navigationPane&&(null==e.bookmarks?(e.pdfViewerBase.navigationPane.disableBookmarkButton(),X()&&e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",null)):(e.pdfViewerBase.navigationPane.enableBookmarkButton(),e.isBookmarkViewDiv=!1,e.pdfViewer.isBookmarkPanelOpen&&e.pdfViewerBase.navigationPane.openBookmarkcontentInitially()))}},this.bookmarkRequestHandler.onFailure=function(i){e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,"Bookmarks")},this.bookmarkRequestHandler.onError=function(i){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,"Bookmarks")}},s.prototype.renderBookmarkcontent=function(){var e=this;if(!this.isBookmarkViewDiv){var t=X();this.bookmarkView=t?this.pdfViewer.element.querySelector(".e-pv-bookmark-view"):F("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);var i=F("div",{id:this.pdfViewer.element.id+"_bookmark_iconview",className:"e-pv-bookmark-icon-view"});if(this.pdfViewer.enableRtl){var n=F("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon e-right"});i.appendChild(n)}else n=F("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon"}),i.appendChild(n);var r=F("div",{id:this.pdfViewer.element.id+"_bookmark_Title",className:"e-pv-bookmark-title"});this.pdfViewer.enableRtl&&(r.style.paddingRight="26px"),r.innerText="${Title}",i.appendChild(r),t||(this.treeObj=new rN({fields:{dataSource:this.bookmarks.bookMark,id:"Id",text:"Title",child:"Child",hasChildren:"HasChild"},nodeTemplate:oo(function(l){return i.outerHTML.replace("${Title}",l.Title)}),nodeSelected:this.nodeClick.bind(this),drawNode:this.bookmarkPanelBeforeOpen.bind(this)}),this.treeObj.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.treeObj.enableRtl=!0),this.treeObj.appendTo(this.bookmarkView));for(var o=["mouseover","keydown"],a=0;a<o.length;a++)this.bookmarkView.addEventListener(o[a],function(l){e.setHeight(l.target)});this.isBookmarkViewDiv=!0}this.bookmarkView.style.display="block"},s.prototype.renderBookmarkContentMobile=function(){null!=this.bookmarkView&&this.bookmarkView.remove(),this.bookmarkView=F("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.getElement("_bookmarks_container").appendChild(this.bookmarkView),this.bookmarkList=new Kge({dataSource:this.bookmarks.bookMark,fields:{id:"Id",text:"Title",child:"Child"},showHeader:!1,select:this.bookmarkClick.bind(this)}),this.bookmarkList.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.bookmarkList.enableRtl=!0),this.bookmarkList.appendTo(this.bookmarkView)},s.prototype.setHeight=function(e){this.treeObj&&this.treeObj.fullRowSelect&&e.classList&&(e.classList.contains("e-treeview")&&e.classList.contains(".e-active")?e=e.querySelector(".e-active").querySelector(".e-fullrow"):e.classList.contains("e-treeview")||e.classList.contains("e-list-parent")?e=e.querySelector(".e-fullrow"):"e-fullrow"!==e.classList.value&&(e.closest&&e.closest(".e-list-item")?e=e.closest(".e-list-item").querySelector(".e-fullrow"):e.classList.contains("e-list-item")?e=e.querySelector(".e-fullrow"):e.classList.contains("e-icons")&&e.classList.contains("interaction")&&e.parentElement.parentElement.classList.contains("e-list-item")&&(e=e.parentElement.parentElement.querySelector(".e-fullrow"))),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))},s.prototype.setBookmarkContentHeight=function(){if(this.treeObj){var e=this.treeObj.element;this.treeObj.fullRowSelect&&(e.classList.contains("e-treeview")&&e.classList.contains(".e-active")?e=e.querySelector(".e-active").querySelector(".e-fullrow"):e.classList.contains("e-treeview")&&(e=e.querySelector(".e-fullrow")),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))}},s.prototype.navigateToBookmark=function(e,t,i){var n=this.bookmarksDestination.bookMarkDestination[e].PageIndex,r=this.bookmarksDestination.bookMarkDestination[e].Y;-1!==n&&this.goToBookmark(n,r),this.pdfViewer.fireBookmarkClick(-1!==n?n+1:n,r,t,i)},s.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination)return{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination}},s.prototype.goToBookmark=function(e,t){var n=this.pdfViewerBase.pageSize[e].height,o=(0===t?this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor():this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor()+(n-t)*this.pdfViewerBase.getZoomFactor()).toString();return this.pdfViewerBase.viewerContainer.scrollTop=parseInt(o),E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="",this.pdfViewerBase.updateMobileScrollerPosition()),this.pdfViewerBase.focusViewerContainer(),!1},s.prototype.clear=function(){if(this.pdfViewerBase.navigationPane&&(this.pdfViewerBase.navigationPane.disableBookmarkButton(),this.pdfViewerBase.navigationPane.updateViewerContainerOnClose()),this.bookmarks&&(this.bookmarks.bookMark=[],this.bookmarks=null),this.bookmarksDestination&&(this.bookmarksDestination.bookMarkDestination=[]),null!=this.bookmarkView&&!X())for(null!==this.bookmarkView.parentElement&&this.bookmarkView.parentElement.removeChild(this.bookmarkView);this.bookmarkView.hasChildNodes();)this.bookmarkView.removeChild(this.bookmarkView.lastChild);this.bookmarkRequestHandler&&this.bookmarkRequestHandler.clear()},s.prototype.destroy=function(){this.clear()},s.prototype.getModuleName=function(){return"BookmarkView"},s}(),WLe=function(){function s(e,t){var i=this;this.isTextSelection=!1,this.selectionStartPage=null,this.isBackwardPropagatedSelection=!1,this.contextMenuHeight=144,this.backwardStart=0,this.selectionRangeArray=[],this.selectionAnchorTouch=null,this.selectionFocusTouch=null,this.scrollMoveTimer=0,this.isMouseLeaveSelection=!1,this.isTouchSelection=!1,this.previousScrollDifference=0,this.topStoreLeft=null,this.topStoreRight=null,this.isTextSearched=!1,this.isSelectionStartTriggered=!1,this.allTextContent="",this.onLeftTouchSelectElementTouchStart=function(n){i.initiateSelectionByTouch()},this.onRightTouchSelectElementTouchStart=function(n){i.initiateSelectionByTouch()},this.onLeftTouchSelectElementTouchEnd=function(n){i.terminateSelectionByTouch(n)},this.onRightTouchSelectElementTouchEnd=function(n){i.terminateSelectionByTouch(n)},this.onLeftTouchSelectElementTouchMove=function(n){var o;n.preventDefault(),n.target.style.zIndex="0";var a=i.dropDivElementRight,l=i.isTouchedWithinContainer(n);if(a&&l){var h=a.getBoundingClientRect(),d=n.changedTouches[0].clientX,p=n.changedTouches[0].clientY;if(n.target.style.zIndex="1000",o=i.getNodeElement(void 0,d,p,n,o)){var u=Math.sqrt((p-h.top)*(p-h.top)+(d-h.left)*(d-h.left)),f=i.isCloserTouchScroll(u),g=!1;if(p<=h.top?(i.dropElementLeft.style.transform="rotate(0deg)",i.dropElementRight.style.transform="rotate(-90deg)",g=i.selectTextByTouch(o.parentElement,d,p,!1,"left",f)):(i.dropElementLeft.style.transform="rotate(-90deg)",i.dropElementRight.style.transform="rotate(0deg)",g=i.selectTextByTouch(o.parentElement,d,p,!0,"left",f)),g){var m=i.dropDivElementLeft.getBoundingClientRect(),y=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,b=i.getClientValueTop(p,i.pdfViewerBase.currentPageNumber-1),S=d-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.dropDivElementLeft.style.top=y*i.pdfViewerBase.getZoomFactor()+b+"px",i.topStoreLeft={pageTop:y,topClientValue:i.getMagnifiedValue(b),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(S),isHeightNeeded:!1},i.dropDivElementLeft.style.left=d-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-m.width/2+"px",i.previousScrollDifference=u}}}},this.onRightTouchSelectElementTouchMove=function(n){var o;n.preventDefault(),n.target.style.zIndex="0";var a=i.dropDivElementLeft,l=i.isTouchedWithinContainer(n);if(a&&l){var h=a.getBoundingClientRect(),d=n.changedTouches[0].clientX,p=n.changedTouches[0].clientY;if(n.target.style.zIndex="1000",o=i.getNodeElement(void 0,d,p,n,o)){var u=Math.sqrt((p-h.top)*(p-h.top)+(d-h.left)*(d-h.left)),f=i.isCloserTouchScroll(u),g=!1;if(p>=h.top?(i.dropElementRight.style.transform="rotate(-90deg)",i.dropElementLeft.style.transform="rotate(0deg)",g=i.selectTextByTouch(o.parentElement,d,p,!0,"right",f)):(i.dropElementRight.style.transform="rotate(0deg)",i.dropElementLeft.style.transform="rotate(-90deg)",g=i.selectTextByTouch(o.parentElement,d,p,!1,"right",f)),g){var m=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,y=i.getClientValueTop(p,i.pdfViewerBase.currentPageNumber-1),b=i.dropDivElementRight.getBoundingClientRect();i.dropDivElementRight.style.top=m*i.pdfViewerBase.getZoomFactor()+y+"px";var S=d-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.topStoreRight={pageTop:m,topClientValue:i.getMagnifiedValue(y),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(S),isHeightNeeded:!1},i.dropDivElementRight.style.left=d-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-b.width/2+"px",i.previousScrollDifference=u}}}},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.textSelectionOnMouseMove=function(e,t,i,n){var r=e;if(this.isTextSearched=!0,r.nodeType===r.TEXT_NODE){!this.isSelectionStartTriggered&&!this.pdfViewerBase.getTextMarkupAnnotationMode()&&(this.pdfViewer.fireTextSelectionStart(this.pdfViewerBase.currentPageNumber),this.isSelectionStartTriggered=!0),this.isBackwardPropagatedSelection=!1;var o=r.ownerDocument.createRange(),a=window.getSelection();if(null!==a.anchorNode){var l=a.anchorNode.compareDocumentPosition(a.focusNode);(!l&&a.anchorOffset>a.focusOffset||l===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}o.selectNodeContents(r);for(var h=0,d=o.endOffset;h<d;){o.setStart(r,h),o.setEnd(r,h+1);var u=(p=o.getBoundingClientRect()).right;n&&(u=parseInt(p.right.toString())),p.left<=t&&u>=t&&parseInt(p.top.toString())<=i&&p.bottom>=i&&(null!==a.anchorNode&&a.anchorNode.parentNode.classList.contains("e-pv-text")&&o.setStart(a.anchorNode,a.anchorOffset>h?0!=this.backwardStart?this.backwardStart:a.anchorOffset+1:a.anchorOffset),a.removeAllRanges(),a.addRange(o),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,!!document.documentMode||(this.isBackwardPropagatedSelection||o.endOffset>h?(this.backwardStart!=o.startOffset&&o.startOffset>=h&&(this.backwardStart=o.endOffset),a.extend(r,0===h&&1!=o.endOffset?h:h+1)):a.extend(r,n?h:h+1)),o.detach()),h+=1}var g=this.pdfViewer.annotationModule;if(g&&g.textMarkupAnnotationModule&&g.textMarkupAnnotationModule.isEnableTextMarkupResizer(g.textMarkupAnnotationModule.currentTextMarkupAddMode)){var m=document.getElementById(this.pdfViewer.element.id+"_droplet_left");if(this.pdfViewerBase.isSelection&&a&&a.rangeCount>0){var b=a.getRangeAt(0).getBoundingClientRect();this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(b.left,b.top),this.pdfViewerBase.isSelection=!1}else m&&"none"===m.style.display&&this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(t,i);this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}}else for(var I=0;I<r.childNodes.length;I++)if(r.childNodes[I].nodeType===r.TEXT_NODE){var p;(p=(o=this.getSelectionRange(I,r)).getBoundingClientRect()).left<=t&&p.right>=parseInt(t.toString())&&parseInt(p.top.toString())<=i&&p.bottom>=i?(o.detach(),this.textSelectionOnMouseMove(r.childNodes[I],t,i,n)):o.detach()}},s.prototype.textSelectionOnDrag=function(e,t,i,n){var r=e;if(this.isTextSearched=!0,r.nodeType===r.TEXT_NODE){this.isBackwardPropagatedSelection=!1;var o=r.ownerDocument.createRange(),a=window.getSelection();if(null!==a.anchorNode){var l=a.anchorNode.compareDocumentPosition(a.focusNode);(!l&&a.anchorOffset>a.focusOffset||l===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}o.selectNodeContents(r);for(var h=0,d=o.endOffset;h<d;){if(o.setStart(r,h),o.setEnd(r,h+1),(p=o.getBoundingClientRect()).left<=t&&p.right>=t&&parseInt(p.top.toString())<=i&&p.bottom>=i)return n?(null!==a.anchorNode&&a.anchorNode.parentNode.classList.contains("e-pv-text")&&o.setStart(a.anchorNode,a.anchorOffset),a.removeAllRanges(),a.addRange(o),a.extend(r,h)):a.focusNode&&(o.setEnd(a.focusNode,a.focusOffset),a.removeAllRanges(),a.addRange(o)),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,o.detach(),!0;h+=1}if(this.pdfViewerBase.isSelection){var f=a.getRangeAt(0).getBoundingClientRect();this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(f.left,f.top),this.pdfViewerBase.isSelection=!1}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}else for(var y=0;y<r.childNodes.length;y++)if(r.childNodes[y].nodeType===r.TEXT_NODE){var p;(p=(o=this.getSelectionRange(y,r)).getBoundingClientRect()).left<=t&&p.right>=t&&parseInt(p.top.toString())<=i&&p.bottom>=i?(o.detach(),this.textSelectionOnDrag(r.childNodes[y],t,i,n)):o.detach()}return null},s.prototype.selectTextRegion=function(e,t){for(var i=null,n=e-1,r=0;r<t.length;r++){var o=t[r],a=(o.left?o.left:o.Left)*this.pdfViewerBase.getZoomFactor(),l=(o.top?o.top:o.Top)*this.pdfViewerBase.getZoomFactor(),h=(o.width?o.width:o.Width)*this.pdfViewerBase.getZoomFactor(),p=this.pdfViewerBase.getElement("_textLayer_"+n);if(p){for(var u=p.childNodes,f=0;f<u.length;f++)if(u[f]){var g=u[f].getBoundingClientRect(),m=this.getClientValueTop(g.top,n),y=g.left-this.pdfViewerBase.getElement("_pageDiv_"+n).getBoundingClientRect().left,b=y+g.width,w=parseInt(u[f].style.left),S=parseInt(u[f].style.top),I=this.checkLeftBounds(y,w,b,a),x=this.checkTopBounds(m,S,l);if(I&&x){i=u[f];break}}if(null!=i){var T=this.pdfViewerBase.getElement("_textLayer_"+n).getBoundingClientRect();this.textSelectionOnMouseMove(i,a+T.left,l+T.top,!1),t.length-1===r&&this.textSelectionOnMouseMove(i,a+T.left+h,l+T.top,!1)}}}},s.prototype.checkLeftBounds=function(e,t,i,n){var r=!1;return(e===parseInt(n.toString())||parseInt(e.toString())===parseInt(n.toString())||e+1===parseInt(n.toString())||e-1===parseInt(n.toString())||t===parseInt(n.toString())||t===n||i>=n&&e<=n)&&(r=!0),r},s.prototype.checkTopBounds=function(e,t,i){var n=!1;return(e===parseInt(i.toString())||parseInt(e.toString())===parseInt(i.toString())||parseInt((e+1).toString())===parseInt(i.toString())||parseInt((e-1).toString())===parseInt(i.toString())||t===parseInt(i.toString())||t===i)&&(n=!0),n},s.prototype.textSelectionOnMouseLeave=function(e){var t=this;e.preventDefault(),this.pdfViewer.magnificationModule&&"fitToPage"===this.pdfViewer.magnificationModule.fitType||(this.scrollMoveTimer=e.clientY>this.pdfViewerBase.viewerContainer.offsetTop?setInterval(function(){t.scrollForwardOnSelection()},500):setInterval(function(){t.scrollBackwardOnSelection()},500))},s.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},s.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},s.prototype.clear=function(){this.scrollMoveTimer&&(this.isMouseLeaveSelection=!1,clearInterval(this.scrollMoveTimer))},s.prototype.selectAWord=function(e,t,i,n){if(e.nodeType===e.TEXT_NODE){var r=window.getSelection();(o=e.ownerDocument.createRange()).selectNodeContents(e);for(var a=0,l=o.endOffset;a<l;){if(o.setStart(e,a),o.setEnd(e,a+1),(h=o.getBoundingClientRect()).left<=t&&h.right>=t&&h.top<=i&&h.bottom>=i){for(var d=e.textContent,p=[],u=void 0,f=void 0,g=0;g<d.length;g++)" "===d[g]&&p.push(g);for(var m=0;m<p.length;m++){if(a===p[m]&&(u=p[m],f=p[m]),p[0]>a){u=0,f=p[m];break}a>p[m]&&a<p[m+1]?(u=p[m],f=p[m+1]):a>p[m]&&(p[m+1]||(u=p[m]))}f||(f=d.length),o.setStart(e,0===u?u:u+1),o.setEnd(e,f),r.removeAllRanges(),r.addRange(o),this.isTextSelection=!0;var y=c(o.startContainer.parentElement)?o.startContainer.parentNode:o.startContainer.parentElement;this.selectionStartPage=parseInt(y.id.split("_text_")[1]),n&&(this.selectionAnchorTouch={anchorNode:r.anchorNode.parentElement.id,anchorOffset:r.anchorOffset},this.selectionFocusTouch={focusNode:r.focusNode.parentElement.id,focusOffset:r.focusOffset}),E.isIE||o.detach();break}a+=1}}else for(g=0;g<e.childNodes.length;g++){var o,h;(h=(o=this.getSelectionRange(g,e)).getBoundingClientRect()).left<=t&&h.right>=t&&h.top<=i&&h.bottom>=i?(o.detach(),this.selectAWord(e.childNodes[g],t,i,n)):o.detach()}},s.prototype.getSelectionRange=function(e,t){var i=t.childNodes[e].ownerDocument.createRange();return i.selectNodeContents(t.childNodes[e]),i},s.prototype.selectEntireLine=function(e){var t=[],i=e.target,n=i.getBoundingClientRect(),r=parseInt((n.top+n.height/2).toString()),o=parseInt(e.target.id.split("_text_")[1]),a=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+"_text_"+o+'"]');if(i.classList.contains("e-pv-text")){this.pdfViewer.fireTextSelectionStart(o+1);for(var l=0;l<a.length;l++){var h=a[l].getBoundingClientRect(),d=parseInt(h.top.toString()),p=parseInt(h.bottom.toString());if(d<=r&&p>r&&n.bottom+10>p){var u=a[l].id;""!==u&&t.push(u)}}var f=window.getSelection();f.removeAllRanges();var g=document.createRange(),m=t.length-1,y=document.getElementById(t[0]),b=document.getElementById(t[m]);b.childNodes.length>0?(g.setStart(y.childNodes[0],0),g.setEnd(b.childNodes[0],b.textContent.length)):(g.setStart(y.childNodes[0],0),g.setEnd(b,1)),this.selectionStartPage=parseInt(g.startContainer.parentElement.id.split("_text_")[1]),f.addRange(g),this.isTextSelection=!0,null!=f&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&this.calculateContextMenuPosition(e.clientY,e.clientY)}},s.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=!1,c(this.pdfViewerBase.viewerContainer)||(this.pdfViewerBase.viewerContainer.classList.remove("e-disable-text-selection"),this.pdfViewerBase.viewerContainer.classList.add("e-enable-text-selection"),this.pdfViewerBase.viewerContainer.addEventListener("selectstart",function(){return!0}))},s.prototype.clearTextSelection=function(){if(this.isTextSelection){if(this.pdfViewerBase.textLayer.clearDivSelection(),window.getSelection&&window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),this.pdfViewer.linkAnnotationModule){var e=this.pdfViewerBase.currentPageNumber-3,t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e=e<0?0:e;i<=t;i++)this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,!1)}this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),this.selectionRangeArray=[],this.isTextSelection=!1,this.isTouchSelection=!1,this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()}},s.prototype.removeTouchElements=function(){this.dropDivElementLeft&&(this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft),this.dropDivElementLeft=null,this.dropElementLeft.style.transform="rotate(0deg)"),this.dropDivElementRight&&(this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight),this.dropDivElementRight=null,this.dropElementRight.style.transform="rotate(-90deg)")},s.prototype.resizeTouchElements=function(){var e=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var t=this.dropDivElementLeft.getBoundingClientRect(),i=0,n=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+n.left-e-t.width/2+"px",this.topStoreLeft.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}if(this.dropDivElementRight){t=this.dropDivElementRight.getBoundingClientRect(),i=0;var r=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+r.left-e-t.width/2+"px",this.topStoreRight.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}},s.prototype.textSelectionOnMouseup=function(e){if(this.clear(),null!==window.getSelection().anchorNode){if(this.isMouseLeaveSelection=!1,this.isSelectionStartTriggered=!1,this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.pdfViewerBase.textLayer.getTextSearchStatus()){this.pdfViewerBase.textLayer.clearDivSelection();for(var i=this.pdfViewer.textSearchModule.getIndexes(),n=parseFloat(i.lowerPageValue.toString()),r=parseFloat(i.higherPageValue.toString()),o=n;o<r;o++)this.applySelectionRangeOnScroll(o);this.pdfViewer.textSearchModule.searchAfterSelection()}else this.applySpanForSelection();this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,!1),this.isTextSearched&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(this.calculateContextMenuPosition(e.clientY,e.clientX),this.isTextSearched=!1)}else this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()},s.prototype.fireTextSelectEnd=function(){if(0!==this.selectionRangeArray.length){for(var e=0,t="",i=[],n=0;n<this.selectionRangeArray.length;n++){t+=this.selectionRangeArray[n].textContent;for(var r=0;r<this.selectionRangeArray[n].rectangleBounds.length;r++){var o=this.selectionRangeArray[n].rectangleBounds[r];i.push({left:o.left,right:o.right,top:o.top,bottom:o.bottom,width:o.width,height:o.height,pageIndex:this.selectionRangeArray[n].pageNumber+1})}(this.selectionRangeArray[n].isBackward&&0===n||!this.selectionRangeArray[n].isBackward&&n===this.selectionRangeArray.length-1)&&(e=this.selectionRangeArray[n].pageNumber+1)}this.pdfViewer.fireTextSelectionEnd(e,t,i)}},s.prototype.maintainSelectionOnZoom=function(e,t){var i=window.getSelection();if("Range"===i.type||!i.type&&!i.isCollapsed){var n=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(null!==i.anchorNode){var r=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(this.isTouchSelection&&isNaN(o)&&i.focusNode===this.pdfViewerBase.pageContainer){var l=this.pdfViewerBase.pageContainer.lastChild;l.classList.contains("e-pv-touch-select-drop")?o=parseInt(l.previousSibling.previousSibling.id.split("_pageDiv_")[1]):l.classList.contains("e-pv-page-div")&&(o=parseInt(l.id.split("_pageDiv_")[1]))}if(n)for(var h=r;h>=o;h--)this.maintainSelectionOnScroll(h,t);else for(h=r;h<=o;h++)this.maintainSelectionOnScroll(h,t)}e||i.removeAllRanges()}},s.prototype.isSelectionAvailableOnScroll=function(e){for(var t=!1,i=this.selectionRangeArray,n=0;n<i.length;n++)if(null!==i[n]&&e===i[n].pageNumber){t=!0,this.isTouchSelection&&!this.pdfViewerBase.getMagnified()&&(t=!1);break}return t},s.prototype.applySelectionRangeOnScroll=function(e){this.isMouseLeaveSelection?this.applySelectionMouseScroll(e):this.applySelectionRange(e)},s.prototype.getSelectionRangeFromArray=function(e){for(var t=!1,i=null,n=this.selectionRangeArray,r=0;r<n.length;r++)if(null!==n[r]&&e===n[r].pageNumber){i=n[r],t=!0;break}return{isSelectionAvailable:t,selectionRange:i}},s.prototype.applySelectionRange=function(e){var t=this.getSelectionRangeFromArray(e),i=t.isSelectionAvailable,n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(n&&i&&0!==n.childNodes.length){var r=t.selectionRange,o=void 0,a=void 0,l=void 0,h=void 0;if(r.isBackward){var d=parseInt(r.endNode.split("_text_")[1].split("_")[1]),p=parseInt(r.startNode.split("_text_")[1].split("_")[1]);d<p?(o=d,l=r.endOffset,h=r.startOffset,a=p):(o=p,l=r.endOffset,a=d,h=r.startOffset)}else o=parseInt(r.startNode.split("text_")[1].split("_")[1]),a=parseInt(r.endNode.split("text_")[1].split("_")[1]),l=r.startOffset,h=r.endOffset;window.getSelection().removeAllRanges(),this.pdfViewerBase.textLayer.applySpanForSelection(e,e,o,a,l,h),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},s.prototype.applySelectionMouseScroll=function(e){var t=this.getSelectionRangeFromArray(e);if(t.isSelectionAvailable){var n=t.selectionRange,r=window.getSelection(),o=document.getElementById(n.startNode).childNodes[0],a=document.getElementById(n.endNode).childNodes[0],l=document.createRange();if(null===r.anchorNode)n.isBackward?(l.setStart(a,n.endOffset),l.setEnd(o,n.startOffset)):(l.setStart(o,n.startOffset),l.setEnd(a,n.endOffset));else{var h=isNaN(parseInt(r.anchorNode.parentElement.id.split("_text_")[1]))?parseInt(r.anchorNode.id.split("_pageDiv_")[1]):parseInt(r.anchorNode.parentElement.id.split("_text_")[1]);isNaN(h)&&(h=parseInt(r.anchorNode.id.split("_text_")[1]));var d=isNaN(parseInt(r.focusNode.parentElement.id.split("_text_")[1]))?parseInt(r.focusNode.id.split("_pageDiv_")[1]):parseInt(r.focusNode.parentElement.id.split("_text_")[1]),p=parseInt(n.startNode.split("_text_")[1]);if(h===d&&h===p)n.isBackward?(l.setStart(a,n.endOffset),l.setEnd(o,n.startOffset)):(l.setStart(o,n.startOffset),l.setEnd(a,n.endOffset));else if(isNaN(h))isNaN(h)&&(n.isBackward?(l.setStart(a,n.endOffset),l.setEnd(o,n.startOffset)):(l.setStart(o,n.startOffset),l.setEnd(a,n.endOffset)));else if(isNaN(h)||n.isBackward){var u=this.pdfViewerBase.textLayer.isBackWardSelection(r);if(h>p&&p>d&&h!==d)u?r.extend(r.focusNode,r.focusOffset):(l.setStart(r.anchorNode,r.anchorOffset),l.setEnd(r.focusNode,r.focusOffset));else if(h<p&&p<d&&h!==d)u?r.extend(r.focusNode,r.focusOffset):(l.setStart(r.anchorNode,r.anchorOffset),l.setEnd(r.focusNode,r.focusOffset));else if(h<p)u?p!==this.selectionRangeArray[0].pageNumber?this.extendCurrentSelection(a.parentElement,n.endOffset,r,l):this.extendCurrentSelection(o.parentElement,n.startOffset,r,l):p!==this.selectionRangeArray[0].pageNumber?(l.setStart(r.anchorNode,r.anchorOffset),l.setEnd(a,n.endOffset)):(l.setStart(r.anchorNode,r.anchorOffset),l.setEnd(o,n.startOffset));else if(h===p)p===d?(l.setStart(o,n.startOffset),l.setEnd(o,n.startOffset),r.removeAllRanges(),r.addRange(l),l=document.createRange(),r.extend(a,n.endOffset)):u?this.extendCurrentSelection(a.parentElement,n.endOffset,r,l):(l.setStart(a,n.endOffset),l.setEnd(r.focusNode,r.focusOffset));else if(d===p)u?r.extend(r.focusNode,r.focusOffset):(l.setStart(r.anchorNode,r.anchorOffset),l.setEnd(r.focusNode,r.focusOffset));else if(h>p){var f=parseInt(n.startNode.split("_"+p+"_")[1]),g=parseInt(n.endNode.split("_"+p+"_")[1]);u?p!==this.selectionRangeArray[0].pageNumber?f<g?this.extendCurrentSelection(o.parentElement,n.startOffset,r,l):(l.setStart(a.parentElement,n.endOffset),l.setEnd(r.anchorNode,r.anchorOffset)):this.extendCurrentSelection(a.parentElement,n.endOffset,r,l):f<g?(l.setStart(o,n.startOffset),l.setEnd(r.focusNode,r.focusOffset)):(l.setStart(a,n.endOffset),l.setEnd(r.focusNode,r.focusOffset))}}else h<p&&p<d&&h!==d?(l.setStart(r.anchorNode,r.anchorOffset),l.setEnd(r.focusNode,r.focusOffset)):h<p?(l.setStart(r.anchorNode,r.anchorOffset),l.setEnd(a,n.endOffset)):(l.setStart(o,n.startOffset),l.setEnd(r.focusNode,r.focusOffset))}""!==l.toString()&&(r.removeAllRanges(),r.addRange(l))}},s.prototype.maintainSelectionOnScroll=function(e,t){var i=this.isSelectionAvailableOnScroll(e);this.isTextSelection&&!i&&this.maintainSelection(e,t)},s.prototype.maintainSelection=function(e,t){var i=window.getSelection();if(this.isTextSelection&&("Range"===i.type||!i.type&&!i.isCollapsed)){var n=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),r=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(isNaN(r)&&null!==i.anchorNode)if(this.pdfViewerBase.textLayer.isBackWardSelection(i))r=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split("_pageDiv_")[1]);else{var a=this.pdfViewerBase.pageContainer.lastChild;r=a.classList.contains("e-pv-touch-select-drop")?parseInt(a.previousSibling.previousSibling.id.split("_pageDiv_")[1]):parseInt(a.id.split("_pageDiv_")[1])}var l=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(this.isTouchSelection&&e>r&&e>n)return;if(n===r){var h=null,d=this.getSelectionBounds(i.getRangeAt(0),e),p=this.getSelectionRectangleBounds(i.getRangeAt(0),e),u=1===this.getNodeElementFromNode(i.anchorNode).childNodes.length?i.anchorOffset:this.getCorrectOffset(i.anchorNode,i.anchorOffset),f=1===this.getNodeElementFromNode(i.focusNode).childNodes.length?i.focusOffset:this.getCorrectOffset(i.focusNode,i.focusOffset);h={isBackward:l,startNode:this.getNodeElementFromNode(i.anchorNode).id,startOffset:u,endNode:this.getNodeElementFromNode(i.focusNode).id,endOffset:f,textContent:this.allTextContent,pageNumber:e,bound:d,rectangleBounds:p},this.pushSelectionRangeObject(h,e)}else(h=this.createRangeObjectOnScroll(e,n,r))&&(this.pushSelectionRangeObject(h,e),t&&this.stichSelection(l,i,e))}},s.prototype.getCorrectOffset=function(e,t){for(var i=0,n=this.getNodeElementFromNode(e),r=0;r<n.childNodes.length;r++){if(n.childNodes[r]===e){i+=t;break}i+=n.childNodes[r].textContent.length}return i},s.prototype.pushSelectionRangeObject=function(e,t){if(this.isTouchSelection){var i=this.selectionRangeArray.filter(function(d){return d.pageNumber===t});if(i.length>0){var n=this.selectionRangeArray.indexOf(i[0]);return void this.selectionRangeArray.splice(n,1,e)}}var r=this.selectionRangeArray.filter(function(d){return d.pageNumber===t+1});if(0===r.length)if(this.isTouchSelection&&0!==this.selectionRangeArray.length){var o=this.selectionRangeArray.filter(function(d){return d.pageNumber===t-1});if(0!==o.length){var a=this.selectionRangeArray.indexOf(o[0]);this.selectionRangeArray.splice(a+1,0,e)}else t<this.selectionRangeArray[0].pageNumber?this.selectionRangeArray.splice(0,0,e):this.selectionRangeArray.push(e)}else this.selectionRangeArray.push(e);else{var h=this.selectionRangeArray.indexOf(r[0]);this.selectionRangeArray.splice(h,0,e)}},s.prototype.extendCurrentSelection=function(e,t,i,n){var r=i.focusOffset,o=i.focusNode.parentElement.id,a=isNaN(parseInt(o.split("_text_")[1]))?parseInt(i.focusNode.id.split("_pageDiv_")[1]):parseInt(o.split("_text_")[1]);isNaN(parseInt(o.split("_text_")[1]))&&(o=this.pdfViewerBase.getElement("_textLayer_"+(a+1)).firstChild.id),n.setStart(e.childNodes[0],t),n.setEnd(e.childNodes[0],t),i.removeAllRanges(),i.addRange(n),i.extend(document.getElementById(o).childNodes[0],r)},s.prototype.stichSelection=function(e,t,i){var r,n=document.createRange();if(e)if(r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-1)))(o=r.lastChild)||(o=(r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-2))).lastChild),this.extendCurrentSelection(o,this.getTextLastLength(o),t,n);else{var o;r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1)),this.extendCurrentSelection(o=r.firstChild,0,t,n)}else if(r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1))){var a=r.firstChild;a||(a=(r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+2))).firstChild),n.setStart(a.childNodes[0],0),n.setEnd(t.focusNode,t.focusOffset),t.removeAllRanges(),t.addRange(n)}},s.prototype.textSelectionOnMouseWheel=function(e){this.isMouseLeaveSelection=!0,this.stichSelectionOnScroll(e)},s.prototype.stichSelectionOnScroll=function(e){var t=window.getSelection();if(this.isTextSelection){var i=parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]),r=void 0;if(i!==e&&n!==e)if(this.pdfViewerBase.textLayer.isBackWardSelection(t))(r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1)))&&(a=r.firstChild)&&this.extendSelectionStich(a.childNodes[0],0,t);else if(r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1))){var a;(a=r.lastChild)?this.extendSelectionStich(a.childNodes[0]?a.childNodes[0]:a,this.getTextLastLength(a),t):(r=this.pdfViewerBase.getElement("_textLayer_"+e),this.extendSelectionStich(r.firstChild.childNodes[0],0,t))}this.maintainSelectionArray()}},s.prototype.extendSelectionStich=function(e,t,i){i.extend&&i.extend(e,t)},s.prototype.createRangeObjectOnScroll=function(e,t,i){var r=window.getSelection();if(null!==r.anchorNode){var o=this.pdfViewerBase.textLayer.isBackWardSelection(r),a=void 0,l=void 0,h=void 0,d=void 0,p=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(p.childNodes){if(o?e===t?(a=this.getNodeElementFromNode(r.anchorNode),l=p.firstChild,h=this.getCorrectOffset(r.anchorNode,r.anchorOffset),d=0):e<t&&e>i?(a=p.firstChild,h=0,d=this.getTextLastLength(l=p.lastChild)):e===i&&(a=this.getNodeElementFromNode(r.focusNode),l=p.lastChild,h=this.getCorrectOffset(r.focusNode,r.focusOffset),d=this.getTextLastLength(l)):e===t?(a=this.getNodeElementFromNode(r.anchorNode),l=p.lastChild,h=this.getCorrectOffset(r.anchorNode,r.anchorOffset),d=this.getTextLastLength(l)):e>t&&e<i?(a=p.firstChild,h=0,d=this.getTextLastLength(l=p.lastChild)):e===i&&(a=p.firstChild,-1!==this.getNodeElementFromNode(r.focusNode).id.indexOf(i.toString())?(l=this.getNodeElementFromNode(r.focusNode),d=this.getCorrectOffset(r.focusNode,r.focusOffset)):(l=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+i).lastChild,d=this.getTextLastLength(l)),h=0),a&&l){var f=this.getSelectionRangeObject(a.id,h,l.id,d,e),m=(f.toString(),this.getSelectionBounds(f,e)),y=this.getSelectionRectangleBounds(f,e);return{isBackward:o,startNode:a.id,startOffset:h,endNode:l.id,endOffset:d,textContent:this.allTextContent,pageNumber:e,bound:m,rectangleBounds:y}}return null}}return null},s.prototype.getSelectionRangeObject=function(e,t,i,n,r){var o=document.getElementById(e),a=document.getElementById(i);o.childNodes[0]&&(o=o.childNodes[0]),a.childNodes[0]&&(a=a.childNodes[0]);var l=parseInt(e.split("_"+r+"_")[1]),h=parseInt(i.split("_"+r+"_")[1]),d=document.createRange();return l<=h?(d.setStart(o,t),d.setEnd(a,n)):(d.setStart(a,n),d.setEnd(o,t)),d},s.prototype.getSelectionBounds=function(e,t){var r=null;if(this.getNodeElementFromNode(e.startContainer)!==this.getNodeElementFromNode(e.endContainer)){var o=document.createRange(),a=this.createRangeForSelection(e.startContainer,e.endContainer,e.startOffset,e.endOffset,o);r=this.normalizeBounds(a.getBoundingClientRect(),t)}else r=this.normalizeBounds(e.getBoundingClientRect(),t);return r},s.prototype.getSelectionRectangleBounds=function(e,t){var i=[],n=this.getNodeElementFromNode(e.startContainer),r=this.getNodeElementFromNode(e.endContainer),o=null,a=[];if(this.allTextContent="",n!==r){for(var l=0,h=0,p=this.pdfViewerBase.textLayer.getPageIndex(e.startContainer),u=this.pdfViewerBase.textLayer.getTextIndex(e.startContainer,p),f=this.pdfViewerBase.textLayer.getPageIndex(e.endContainer),g=this.pdfViewerBase.textLayer.getTextIndex(e.endContainer,f),m=this.pdfViewerBase.getElement("_textLayer_"+f).childNodes,y=t===p?u:0;y<m.length;y++){var b=m[y];if(h=y===g?e.endOffset:b.textContent.length,0!==(l=y===u?e.startOffset:0)||0!==h){for(var w=document.createRange(),S=0;S<b.childNodes.length;S++){var I=b.childNodes[S];w.setStart(I,l),w.setEnd(I,h)}var x=this.normalizeBounds(w.getBoundingClientRect(),t);i.push(x);var T=w.toString();if(a.push(T),w.detach(),y===g)break}}for(var L=0;L<a.length;L++){var N=a[L];(0!=L&&" "===N&&a[L-1].includes("\r\n")||L!=a.length-1&&" "===a[L]&&"\r\n"===a[L+1])&&(N=""),N.slice(N.length-2),this.allTextContent+=N}}else o=this.normalizeBounds(e.getBoundingClientRect(),t),this.allTextContent=e.toString(),i.push(o);return i},s.prototype.getTextId=function(e){var t=e.lastIndexOf("_"),i=e.substring(t+1,e.length);return parseInt(i)},s.prototype.normalizeBounds=function(e,t){var n=this.pdfViewerBase.getElement("_pageDiv_"+t);if(this.pdfViewerBase.isMixedSizeDocument){var r=this.pdfViewerBase.getElement("_textLayer_"+t);r&&(n=r)}var o=n.getBoundingClientRect();return{bottom:this.getMagnifiedValue(e.bottom-o.top),height:this.getMagnifiedValue(e.height),left:this.getMagnifiedValue(e.left-o.left),top:this.getMagnifiedValue(e.top-o.top),right:this.getMagnifiedValue(e.right-o.left),width:this.getMagnifiedValue(e.width)}},s.prototype.getMagnifiedValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},s.prototype.getCurrentSelectionBounds=function(e){for(var t=null,i=this.selectionRangeArray,n=0;n<i.length;n++)null!==i[n]&&e===i[n].pageNumber&&(t=i[n].bound);return t},s.prototype.createRangeForSelection=function(e,t,i,n,r){return r.setStart(e,i),r.setEnd(t,n),r},s.prototype.maintainSelectionArray=function(){var e=this;if(0!==this.selectionRangeArray.length){var t=window.getSelection(),i=this.pdfViewerBase.textLayer.isBackWardSelection(t),n=isNaN(parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]))?parseInt(t.anchorNode.id.split("_pageDiv_")[1]):parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]);isNaN(n)&&(n=parseInt(t.anchorNode.id.split("_text_")[1]));var r=isNaN(parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_pageDiv_")[1]):parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]);isNaN(r)&&(r=isNaN(parseInt(t.focusNode.id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_textLayer_")[1]):parseInt(t.focusNode.id.split("_text_")[1]));var o=[];if((o=this.selectionRangeArray.filter(i?function(h){return!(r<h.pageNumber&&h.pageNumber<=e.selectionStartPage)}:function(h){return!(e.selectionStartPage<=h.pageNumber&&h.pageNumber<r)})).length>0){for(var a=0;a<o.length;a++){var l=this.selectionRangeArray.indexOf(o[a]);-1!==l&&this.selectionRangeArray.splice(l,1)}1===this.selectionRangeArray.length&&(this.selectionRangeArray[0].pageNumber===n||this.selectionRangeArray[0].pageNumber===r)&&(o=[])}}},s.prototype.applySpanForSelection=function(){var e=window.getSelection();if(e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset&&!e.isCollapsed&&e.removeAllRanges(),null!==e.anchorNode&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(e.anchorNode))){var i=void 0,n=void 0,r=void 0,o=void 0,a=void 0,l=void 0;if(this.pdfViewerBase.textLayer.isBackWardSelection(e))i=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1]),r=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1].split("_")[1]),o=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1].split("_")[1]),a=e.focusOffset,l=e.anchorOffset;else{var h=this.getNodeElementFromNode(e.anchorNode),d=this.getNodeElementFromNode(e.focusNode);i=-1!==h.id.indexOf("text_")?parseInt(h.id.split("text_")[1]):parseInt(h.id.split("_textLayer_")[1]),n=-1!==d.id.indexOf("text_")?parseInt(d.id.split("text_")[1]):parseInt(d.id.split("_textLayer_")[1]);var p=!1;if(this.isTouchSelection&&e.focusNode===this.pdfViewerBase.pageContainer){var u=this.pdfViewerBase.pageContainer.lastChild;if(u.classList.contains("e-pv-touch-select-drop")){var f=u.previousSibling.previousSibling;n=parseInt(f.id.split("_pageDiv_")[1]),d=this.pdfViewerBase.getElement("_textLayer_"+n).lastChild,p=!0}else u.classList.contains("e-pv-page-div")&&(f=u,n=parseInt(f.id.split("_pageDiv_")[1]),d=this.pdfViewerBase.getElement("_textLayer_"+n).lastChild,p=!0)}h.classList.contains("e-pv-maintaincontent")&&(h=this.getNodeElementFromNode(h),i=parseInt(h.id.split("text_")[1])),d.classList.contains("e-pv-maintaincontent")&&(d=this.getNodeElementFromNode(d),n=parseInt(d.id.split("text_")[1])),i===n&&(h.contains(d)&&(h=d),d.contains(h)&&(d=h)),r=h.id.split("text_")[1]?parseInt(h.id.split("text_")[1].split("_")[1]):null,o=d.id.split("text_")[1]?parseInt(d.id.split("text_")[1].split("_")[1]):null,r=isNaN(r)?o:r,o=isNaN(o)?r:o,a=e.anchorOffset,l=p?d.textContent.length:e.focusOffset}this.pdfViewerBase.checkIsNormalText()&&(e.removeAllRanges(),this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.textLayer.applySpanForSelection(i,n,r,o,a,l)),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},s.prototype.initiateTouchSelection=function(e,t,i){this.pdfViewerBase.isShapeBasedAnnotationsEnabled()&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);var n=e.target,r=document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY);0!==r.length&&r[0].classList.contains("e-pv-hyperlink")&&r[1].classList.contains("e-pv-text")&&(n=r[1]);var o=parseFloat(n.id.split("_")[2]);this.pdfViewer.fireTextSelectionStart(o+1),this.selectAWord(n,t,i,!0),this.createTouchSelectElement(e),this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.applySpanForSelection()},s.prototype.selectTextByTouch=function(e,t,i,n,r,o){var a=!1;if(e.nodeType===e.TEXT_NODE){var l=e.ownerDocument.createRange(),h=window.getSelection();l.selectNodeContents(e);for(var d=0,p=l.endOffset;d<p;){if(l.setStart(e,d),l.setEnd(e,d+1),(u=l.getBoundingClientRect()).left<=t&&u.right>=t&&u.top<=i&&u.bottom>=i)return null!=h.anchorNode&&(n&&l.setStart(h.anchorNode,h.anchorOffset),l=this.setTouchSelectionStartPosition(h,l,n,r,e,d,o),n&&h.extend(e,d),a=!0),l.detach(),a;d+=1}}else for(var f=0;f<e.childNodes.length;f++){var u,g=e.childNodes[f].ownerDocument.createRange();if(g.selectNodeContents(e.childNodes[f]),(u=g.getBoundingClientRect()).left<=t&&u.right>=t&&u.top<=i&&u.bottom>=i)return g.detach(),this.selectTextByTouch(e.childNodes[f],t,i,n,r,o);g.detach()}return a},s.prototype.setTouchSelectionStartPosition=function(e,t,i,n,r,o,a){if(i)if("left"===n){var l=this.getTouchFocusElement(e,!0);t.setStart(l.focusNode,l.focusOffset),t.setEnd(r,o),this.selectionAnchorTouch={anchorNode:t.endContainer.parentElement.id,anchorOffset:t.endOffset}}else"right"===n&&(l=this.getTouchAnchorElement(e,!1),t.setStart(l.anchorNode,l.anchorOffset),t.setEnd(r,o),this.selectionFocusTouch={focusNode:t.endContainer.parentElement.id,focusOffset:t.endOffset});else"left"===n?a?(t.setStart(r,o),t.setEnd(e.focusNode,e.focusOffset),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}):(l=this.getTouchFocusElement(e,!1),t.setStart(r,o),t.setEnd(l.focusNode,l.focusOffset),""===t.toString()&&(t.setStart(r,o),t.setEnd(e.focusNode,e.focusOffset)),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}):"right"===n&&(l=this.getTouchAnchorElement(e,!0),t.setStart(r,o),t.setEnd(l.anchorNode,l.anchorOffset),""===t.toString()&&(t.setStart(l.anchorNode,l.anchorOffset),t.setEnd(r,o)),this.selectionFocusTouch={focusNode:t.startContainer.parentElement.id,focusOffset:t.startOffset});return e.removeAllRanges(),e.addRange(t),t},s.prototype.getTouchAnchorElement=function(e,t){var i=document.getElementById(this.selectionAnchorTouch.anchorNode.toString()),n=null,r=0;return i?(n=i.childNodes[0],r=parseInt(this.selectionAnchorTouch.anchorOffset.toString())):t?(n=e.focusNode,r=e.focusOffset):(n=e.anchorNode,r=e.anchorOffset),{anchorNode:n,anchorOffset:r}},s.prototype.getTouchFocusElement=function(e,t){var i=document.getElementById(this.selectionFocusTouch.focusNode.toString()),n=null,r=0;return i?(n=i.childNodes[0],r=parseInt(this.selectionFocusTouch.focusOffset.toString())):t?(n=e.anchorNode,r=e.anchorOffset):(n=e.focusNode,r=e.focusOffset),{focusNode:n,focusOffset:r}},s.prototype.createTouchSelectElement=function(e){this.isTouchSelection=!0;var i=window.getSelection();if("Range"===i.type){this.dropDivElementLeft=F("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_left",className:"e-pv-touch-select-drop"}),this.dropDivElementRight=F("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_right",className:"e-pv-touch-select-drop"}),this.dropElementLeft=F("div",{className:"e-pv-touch-ellipse"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivElementLeft.appendChild(this.dropElementLeft),this.dropElementRight=F("div",{className:"e-pv-touch-ellipse"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropElementRight.style.margin="0 9px 0 0",this.dropDivElementRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var r=i.getRangeAt(0).getBoundingClientRect(),o=this.dropDivElementLeft.getBoundingClientRect(),a=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,l=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left,h=this.getClientValueTop(r.top,this.pdfViewerBase.currentPageNumber-1),d=h+a*this.pdfViewerBase.getZoomFactor()+o.height/2*this.pdfViewerBase.getZoomFactor()+"px";this.dropDivElementLeft.style.top=d,this.dropDivElementLeft.style.left=r.left-(l+o.width)+"px",this.dropDivElementRight.style.top=d,this.dropDivElementRight.style.left=r.left+r.width-l+"px";var p=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,u=r.left-p;this.topStoreLeft={pageTop:a,topClientValue:this.getMagnifiedValue(h),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(u),isHeightNeeded:!0},this.topStoreRight={pageTop:a,topClientValue:this.getMagnifiedValue(h),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(u+r.width),isHeightNeeded:!0},this.dropDivElementLeft.addEventListener("touchstart",this.onLeftTouchSelectElementTouchStart),this.dropDivElementLeft.addEventListener("touchmove",this.onLeftTouchSelectElementTouchMove),this.dropDivElementLeft.addEventListener("touchend",this.onLeftTouchSelectElementTouchEnd),this.dropDivElementRight.addEventListener("touchstart",this.onRightTouchSelectElementTouchStart),this.dropDivElementRight.addEventListener("touchmove",this.onRightTouchSelectElementTouchMove),this.dropDivElementRight.addEventListener("touchend",this.onRightTouchSelectElementTouchEnd),this.calculateContextMenuPosition(e.touches[0].clientY+this.dropDivElementLeft.clientHeight+10,parseInt(this.dropDivElementLeft.style.left,10)-10)}},s.prototype.calculateContextMenuPosition=function(e,t){var i=this;if(E.isDevice&&!this.pdfViewer.enableDesktopMode){var r=e-this.contextMenuHeight;r<this.pdfViewerBase.toolbarHeight?e+=this.contextMenuHeight:e=r,e+this.contextMenuHeight>window.innerHeight&&(e-=this.contextMenuHeight)}"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(t-=50);var o=this;setTimeout(function(){var l=document.getElementsByClassName("e-pv-maintaincontent")[0]?document.getElementsByClassName("e-pv-maintaincontent")[0].getBoundingClientRect():null;if(l){e=l.bottom+o.contextMenuHeight+o.pdfViewerBase.toolbarHeight>window.innerHeight?l.top-(o.contextMenuHeight+o.pdfViewerBase.toolbarHeight-10):l.bottom+o.pdfViewerBase.toolbarHeight-10,t=l.left-35;var h=i.pdfViewer.toolbarModule?i.pdfViewer.toolbarModule.annotationToolbarModule:"null";(!h||!h.textMarkupToolbarElement||0===h.textMarkupToolbarElement.children.length)&&o.pdfViewerBase.contextMenuModule.open(e,t,o.pdfViewerBase.viewerContainer)}})},s.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.contextMenuModule.close();var e=this.pdfViewerBase.currentPageNumber-3,t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e=e<0?0:e;i<=t;i++){var n=this.pdfViewerBase.getElement("_textLayer_"+i);n&&null!==n.childNodes&&this.applySelectionMouseScroll(i)}this.selectionRangeArray.length>0&&this.pdfViewer.fireTextSelectionStart(this.selectionRangeArray[0].pageNumber+1)},s.prototype.terminateSelectionByTouch=function(e){if(this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection(),this.pdfViewerBase.getTextMarkupAnnotationMode())this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);else{this.fireTextSelectEnd();var i,n=this.getSpanBounds();i=n.bottom+this.contextMenuHeight+this.pdfViewerBase.toolbarHeight>window.innerHeight?n.top-(this.contextMenuHeight+this.pdfViewerBase.toolbarHeight):n.bottom+this.pdfViewerBase.toolbarHeight-10,this.pdfViewerBase.contextMenuModule.open(i,(n.right-n.left)/2,this.pdfViewerBase.viewerContainer)}},s.prototype.getSpanBounds=function(){var e=[],t=[],i=[],n=0,r=document.getElementsByClassName("e-pv-maintaincontent");if(r.length>0){for(var o=0;o<r.length;o++){var a=r[o].getBoundingClientRect();n+=a.height,e.push(a.width),t.push(a.right),i.push(a.left)}return{top:r[0].getBoundingClientRect().top,bottom:r[r.length-1].getBoundingClientRect().bottom,left:Math.min.apply(null,i),right:Math.max.apply(null,t),width:Math.max.apply(null,e),height:n}}},s.prototype.getNodeElement=function(e,t,i,n,r){if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t,i),r=this.onTouchElementScroll(e,r,i,n);else if(document.caretPositionFromPoint){var o=document.caretPositionFromPoint(t,i),a=document.caretPositionFromPoint(t,i);(e=document.createRange()).setStart(o.offsetNode,o.offset),e.setEnd(a.offsetNode,a.offset),r=this.onTouchElementScroll(e,r,i,n)}return r},s.prototype.isTouchedWithinContainer=function(e){var i=!1;return 0!==document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY).length&&(i=!0),i},s.prototype.onTouchElementScroll=function(e,t,i,n){var r=this.pdfViewerBase.viewerContainer.scrollTop;if(null!=e){t=e.startContainer;var o=this.isScrolledOnScrollBar(n);(!this.pdfViewerBase.viewerContainer.contains(t.parentElement)||o)&&(this.pdfViewerBase.viewerContainer.scrollTop=i<this.pdfViewerBase.viewerContainer.clientHeight?r-30:r+30)}else this.pdfViewerBase.viewerContainer.scrollTop=i<this.pdfViewerBase.viewerContainer.clientHeight?r-30:r+30;return t},s.prototype.isCloserTouchScroll=function(e){var t=!1;return this.previousScrollDifference>e&&(t=!0),t},s.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},s.prototype.isScrolledOnScrollBar=function(e){var t=!1;return e.touches&&this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<e.touches[0].clientY&&e.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop&&(t=!0),t},s.prototype.getTextLastLength=function(e){return e?e.textContent.length:0},s.prototype.getNodeElementFromNode=function(e){return e.parentElement?e.parentElement:e.parentNode},s.prototype.copyText=function(){var e="";if(this.maintainSelectionOnZoom(!0,!1),this.selectionRangeArray.length>0)for(var t=0;t<this.selectionRangeArray.length;t++)e+=this.selectionRangeArray[t].textContent;if(e.length>0){this.pdfViewer.annotation&&(this.pdfViewer.annotation.isShapeCopied=!1);var i=document.createElement("textarea");i.contentEditable="true",i.textContent=e,this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.selectedText=e),i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch(n){console.warn("Copy to clipboard failed.",n)}finally{i&&document.body.removeChild(i)}}},s.prototype.destroy=function(){this.clear()},s.prototype.getModuleName=function(){return"TextSelection"},s}(),ULe=function(){function s(e,t){var i=this;this.isTextSearch=!1,this.searchCount=0,this.searchIndex=0,this.currentSearchIndex=0,this.startIndex=null,this.searchPageIndex=null,this.searchString=null,this.isMatchCase=!1,this.searchRequestHandler=null,this.textContents=new Array,this.searchMatches=new Array,this.searchCollection=new Array,this.searchedPages=[],this.isPrevSearch=!1,this.searchTextDivzIndex="-1",this.tempElementStorage=new Array,this.isMessagePopupOpened=!1,this.isTextRetrieved=!1,this.isTextSearched=!1,this.isTextSearchEventTriggered=!1,this.isSearchText=!1,this.checkBoxOnChange=function(n){if(i.isMatchCase=X()?!(!n.currentTarget||!n.currentTarget.checked):!!n.checked,i.isTextSearch){i.resetVariables(),i.clearAllOccurrences();var r=i.searchInput.value;i.searchIndex=0,i.textSearch(r)}},this.searchKeypressHandler=function(n){i.enableNextButton(!0),i.enablePrevButton(!0),13===n.which?(i.initiateTextSearch(i.searchInput),i.updateSearchInputIcon(!1)):i.resetVariables()},this.searchClickHandler=function(n){i.searchButtonClick(i.searchBtn,i.searchInput)},this.nextButtonOnClick=function(n){i.nextSearch()},this.prevButtonOnClick=function(n){i.prevSearch()},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createTextSearchBox=function(){var t,e=this;this.searchBox=F("div",{id:this.pdfViewer.element.id+"_search_box",className:"e-pv-search-bar"}),(t=X()?document.getElementById("toolbarContainer"):this.pdfViewerBase.getElement("_toolbarContainer"))&&(this.searchBox.style.top=(X(),t.clientHeight+"px"));var i=F("div",{id:this.pdfViewer.element.id+"_search_box_elements",className:"e-pv-search-bar-elements"}),n=F("div",{id:this.pdfViewer.element.id+"_search_input_container",className:"e-input-group e-pv-search-input"});this.searchInput=F("input",{id:this.pdfViewer.element.id+"_search_input",className:"e-input"}),this.searchInput.type="text",X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Findindocument").then(function(p){e.searchInput.placeholder=p}):this.searchInput.placeholder=this.pdfViewer.localeObj.getConstant("Find in document"),this.searchBtn=F("span",{id:this.pdfViewer.element.id+"_search_box-icon",className:"e-input-group-icon e-input-search-group-icon e-pv-search-icon"}),n.appendChild(this.searchInput),n.appendChild(this.searchBtn),i.appendChild(n),this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence",this.pdfViewer.enableRtl?"e-pv-next-search":"e-pv-prev-search"),this.prevSearchBtn.setAttribute("aria-label","Previous Search text"),i.appendChild(this.prevSearchBtn),this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence",this.pdfViewer.enableRtl?"e-pv-prev-search":"e-pv-next-search"),this.nextSearchBtn.setAttribute("aria-label","Next Search text"),i.appendChild(this.nextSearchBtn);var o=F("div",{id:this.pdfViewer.element.id+"_match_case_container",className:"e-pv-match-case-container"}),a=F("input",{id:this.pdfViewer.element.id+"_match_case"});if(a.type="checkbox",X()&&(a.style.height="17px",a.style.width="17px",a.addEventListener("change",this.checkBoxOnChange.bind(this))),o.appendChild(a),this.searchBox.appendChild(i),this.searchBox.appendChild(o),this.pdfViewerBase.mainContainer.appendChild(this.searchBox),X()){var l=F("span",{id:this.pdfViewer.element.id+"_search_box_text",styles:"position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px"});this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Matchcase").then(function(u){l.textContent=u}),o.appendChild(l)}else new Os({cssClass:"e-pv-match-case",label:this.pdfViewer.localeObj.getConstant("Match case"),change:this.checkBoxOnChange.bind(this)}).appendTo(a);var d=F("div",{id:this.pdfViewer.element.id+"_textSearchLoadingIndicator"});n.appendChild(d),d.style.position="absolute",d.style.top="15px",d.style.left=n.clientWidth-46+"px",DS({target:d,cssClass:"e-spin-center"}),this.setLoaderProperties(d),this.showSearchBox(!1),this.pdfViewer.enableRtl?(this.searchBox.classList.add("e-rtl"),this.searchBox.style.left="88.3px"):(this.searchBox.classList.remove("e-rtl"),this.searchBox.style.right="88.3px"),this.searchInput.addEventListener("focus",function(){e.searchInput.parentElement.classList.add("e-input-focus")}),this.searchInput.addEventListener("blur",function(){e.searchInput.parentElement.classList.remove("e-input-focus")}),this.searchInput.addEventListener("keydown",this.searchKeypressHandler.bind(this)),this.searchBtn.addEventListener("click",this.searchClickHandler.bind(this)),this.nextSearchBtn.addEventListener("click",this.nextButtonOnClick.bind(this)),this.prevSearchBtn.addEventListener("click",this.prevButtonOnClick.bind(this))},s.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="18px",t.style.width="18px",t.style.transformOrigin="9px 9px 9px")},s.prototype.showLoadingIndicator=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_textSearchLoadingIndicator");t&&(e?ly(t):Ul(t))},s.prototype.textSearchBoxOnResize=function(){if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar){var e=this.pdfViewerBase.getElement("_toolbarContainer_popup");e&&e.contains(this.pdfViewerBase.getElement("_search").parentElement)&&(this.searchBox.style.right="0px")}else this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth?(this.searchBox.style.right="0px",this.searchBox.style.width=parseInt(this.searchBox.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px",this.searchInput.style.width=parseInt(this.searchInput.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px"):(this.searchBox.style.right="88.3px",this.searchBox.style.width="",this.searchInput.style.width="")},s.prototype.showSearchBox=function(e){e?this.searchBox.style.display="block":(this.searchBox.style.display="none",this.searchInput.value=""),this.onTextSearchClose()},s.prototype.searchAfterSelection=function(){this.isTextSearch&&(this.initSearch(this.searchPageIndex,!0),this.highlightOthers())},s.prototype.initiateTextSearch=function(e){var t=e.value;t&&t.length>0&&" "===t[t.length-1]&&(t=t.slice(0,t.length-1)),this.initiateSearch(t)},s.prototype.initiateSearch=function(e){e!==this.searchString&&(this.isTextSearch=!1,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1),this.clearAllOccurrences(),""!==e&&(this.searchMatches[this.searchPageIndex]&&e===this.searchString?0===this.searchMatches[this.searchPageIndex].length?this.initSearch(this.searchPageIndex,!1):this.nextSearch():(this.resetVariables(),this.searchIndex=0,this.textSearch(e)))},s.prototype.textSearch=function(e){if(""!==e||e){if(this.searchString=e,this.isTextSearch=!0,this.isSearchText=!0,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1,this.searchCount=0,this.isTextSearchEventTriggered=!1,this.showLoadingIndicator(!0),this.pdfViewer.fireTextSearchStart(e,this.isMatchCase),this.pdfViewer.isExtractText)if(this.isTextRetrieved)for(var t=0;t<this.pdfViewerBase.pageCount;t++)this.initSearch(t,!1,!0);else for(this.isTextSearched=!0,t=0;t<this.documentTextCollection.length;t++)this.initSearch(t,!1,!0);this.initSearch(this.searchPageIndex,!1),this.highlightOthers()}},s.prototype.nextSearch=function(){this.isPrevSearch=!1,this.isTextSearch=!0,this.isSearchText=!1,this.searchString?(this.clearAllOccurrences(),this.searchIndex=this.searchIndex+1,this.searchMatches[this.searchPageIndex]?(this.searchIndex>=this.searchMatches[this.searchPageIndex].length?(this.searchIndex=0,this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,this.pdfViewerBase.pageCount>1?this.initSearch(this.searchPageIndex,!1):(this.initSearch(this.searchPageIndex,!0),this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0)):this.initiateTextSearch(this.searchInput)):this.initiateTextSearch(this.searchInput)},s.prototype.prevSearch=function(){this.isPrevSearch=!0,this.isTextSearch=!0,this.isSearchText=!1,this.searchString?(this.clearAllOccurrences(),this.searchIndex=this.searchIndex-1,this.searchIndex<0?(this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.initSearch(this.searchPageIndex,!1),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0)):(this.searchIndex=this.searchIndex-1,this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.textSearch(this.searchInput.value))},s.prototype.initSearch=function(e,t,i){var n=this.pdfViewerBase.getStoredData(e,!0),r=null,o=null,a=null;if(i){if(0!==this.documentTextCollection.length){var l=this.documentTextCollection[e][e];this.documentTextCollection[e]&&l&&this.getSearchTextContent(e,this.searchString,l.pageText?l.pageText:l.PageText,o,t,this.documentTextCollection[e])}}else n?(r=n.pageText,a=this.pdfViewerBase.textLayer.characterBound[e],this.textContents[e]=o=n.textContent,this.getPossibleMatches(e,this.searchString,r,o,t,a)):t||this.createRequestForSearch(e);this.pdfViewerBase.pageCount===(this.searchedPages&&this.searchedPages.length)&&(this.isTextSearchEventTriggered||(this.isTextSearchEventTriggered=!0,this.pdfViewer.fireTextSearchComplete(this.searchString,this.isMatchCase)))},s.prototype.getPossibleMatches=function(e,t,i,n,r,o){var a;if(this.searchMatches&&!this.searchMatches[e]){var l=i,h=t,d=l.replace(/(\s\r\n)/gm," ").replace(/(\r\n)/gm," "),p=i.replace(/(\s\r\n)/gm,"  ").replace(/(\r\n)/gm," "),u=d.replace(/[^a-zA-z0-9" "]/g,""),f=t.length;this.isMatchCase||(h=t.toLowerCase(),l=i.toLowerCase(),d=d.toLowerCase(),p=p.toLowerCase(),u=u.toLowerCase());for(var g=[],m=[],y=-f,b=-f,w=-f,S=-f,I=-f;(0!==y||0===y)&&""!==h&&" "!==h&&h;){if(y=l.indexOf(h,y+f),-1!==h.indexOf(" ")){var x=t.replace(" ","\r\n");b=l.indexOf(x,b+f),(b=-1)<=-1||b<y&&g.push(b)}if(y<=-1&&b<=-1)break;y<=-1||g.push(y),b>y&&!(b<=-1)&&g.push(b)}if(0==g.length){if(w=d.indexOf(h,w+f),S=p.indexOf(h,S+f),I=u.indexOf(h,I+f),-1!==w){y=-(a=this.correctLinetext(t,y,l))[0].length;for(var T=0;T<a.length;T++)y=l.indexOf(a[T].trim(),y+(void 0===a[T-1]?a[0].length:a[T-1].length)),m.push(y),m.length>1&&(m[1]-(m[0]+a[0].length)<=3?(g.push(m),this.searchMatches[e]=g):(T=-1,y=m[0]+a[0].length,m.splice(0,m.length)))}else if(-1!==I)for(y=-(a=this.correctLinetext(t,y,l))[0].length,T=0;T<a.length;T++)y=l.indexOf(a[T].trim(),y+(void 0===a[T-1]?a[0].length:a[T-1].length)),m.push(y),m.length>1&&(m[1]-(m[0]+a[0].length)<=3?(g.push(m),this.searchMatches[e]=g):(T=-1,y=m[0]+a[0].length,m.splice(0,m.length)));else if(-1!==S)for(y=-(a=this.correctLinetext(t,y,l))[0].length,T=0;T<a.length;T++)y=l.indexOf(a[T].trim(),y+(void 0===a[T-1]?a[0].length:a[T-1].length)),m.push(y),m.length>1&&(m[1]-(m[0]+a[0].length)<=3?(g.push(m),this.searchMatches[e]=g):(T=-1,y=m[0]+a[0].length,m.splice(0,m.length)));g.length>1&&g.splice(1,g.length)}this.searchMatches&&g.length>0&&(this.searchMatches[e]=g)}if(r||(-1===this.searchedPages.indexOf(e)&&(this.searchedPages.push(e),this.startIndex=this.searchedPages[0]),this.updateSearchInputIcon(!1)),this.searchMatches&&this.searchMatches[e]&&0!==this.searchMatches[e].length)r||(this.isPrevSearch&&(this.searchIndex=this.searchMatches[e].length-1),this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex?(this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&this.searchPageIndex===this.currentSearchIndex?(!this.isMessagePopupOpened&&!this.isSearchText&&this.onMessageBoxOpen(),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[this.searchPageIndex]):this.isPrevSearch&&this.searchMatches&&this.searchMatches.length>0&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex-1===this.searchPageIndex&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex]),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex===this.searchPageIndex&&this.pdfViewerBase.pageCount>1&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex])),this.highlightSearchedTexts(e,r,a);else if(!r)if(this.searchPageIndex=this.isPrevSearch?this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1:this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,-1===this.searchedPages.indexOf(this.searchPageIndex)&&this.searchedPages.length!==this.pdfViewerBase.pageCount)this.showLoadingIndicator(!0),this.initSearch(this.searchPageIndex,!1);else{var L=this.getSearchPage(e);this.searchMatches&&c(this.searchMatches[this.searchPageIndex])&&this.searchedPages.length===this.pdfViewerBase.pageCount?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.startIndex)):this.searchMatches&&this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&L===this.currentSearchIndex?(this.isPrevSearch?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=L,this.searchedPages=[L],this.searchIndex=-1):(!this.isMessagePopupOpened&&1!==this.pdfViewerBase.currentPageNumber&&!this.isSearchText&&this.onMessageBoxOpen(),this.searchPageIndex=L,this.searchedPages=[L],this.searchIndex=0),this.highlightSearchedTexts(this.searchPageIndex,r,void 0)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=this.startIndex,this.searchedPages=[this.searchPageIndex],this.searchIndex=0,this.pdfViewerBase.updateScrollTop(this.startIndex),this.highlightSearchedTexts(this.searchPageIndex,r,void 0))}},s.prototype.correctLinetext=function(e,t,i){var n=[],r=e.split(/[" "]+/);this.isMatchCase||(r=e.toLowerCase().split(/[" "]+/)),t=0;var o="",a=i.replace(/ \r\n/g," ");a=(a=a.replace(/\r\n/g," ")).replace(/[^a-zA-Z0-9 ]/g,""),e=e.replace(/[^a-zA-Z0-9 ]/g,"");var l=a.match(e);if(this.isMatchCase||(l=a.match(e.toLowerCase())),c(l))return n;for(var h=l=i.slice(l.index,i.length),d=0;d<r.length;d++)t=i.indexOf(o+r[d],t),("\n"===(h=h?h.replace(r[d-1],""):i.replace(r[d-1],""))[h.indexOf(r[d])-1]&&"\n"===h[h.indexOf(r[d+1])-1]||"\n"===h[h.indexOf(r[d])-1]&&c(h[h.indexOf(r[d+1])-1]))&&(t=-1,""===o&&(o=r[d],d+=1)),-1!==t?(o+=r[d]+" ",d==r.length-1&&n.push(o)):(n.push(o),o=r[d]+" ","\n"==h[h.indexOf(r[d])-1]&&"\n"==h[h.indexOf(r[d+1])-1]&&(n.push(o),o=r[d+1]+" ",h=h?h.replace(r[d-1],""):i.replace(r[d-1],""),d+=1),d==r.length-1&&n.push(o));return n},s.prototype.getSearchTextContent=function(e,t,i,n,r,o){var a=i,l=t,h=t.length;this.isMatchCase||(l=t.toLowerCase(),a=i.toLowerCase());for(var d=[],p=-h,u=-h;0!==p&&""!==l&&" "!==l&&l;){if(p=a.indexOf(l,p+h),-1!==l.indexOf(" ")){var f=t.replace(" ","\r\n");(u=a.indexOf(f,u+h))<=-1||u<p&&d.push(u)}if(p<=-1&&u<=-1)break;p<=-1||d.push(p),u>p&&!(u<=-1)&&d.push(u)}0!==d.length&&(this.searchCount=this.searchCount+d.length),this.searchMatches[e]=d},s.prototype.getSearchPage=function(e){var t=null;if(this.isPrevSearch){for(var i=e;i>=0;i--)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)for(var n=this.pdfViewerBase.pageCount-1;n>e;n--)if(this.searchMatches[n]){t=n;break}}else{for(i=e;i<this.pdfViewerBase.pageCount;i++)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)if(0===e)t=e;else for(n=0;n<e;n++)if(this.searchMatches[n]){t=n;break}}return t},s.prototype.highlightSearchedTexts=function(e,t,i){var o,n=this.searchMatches[e],r={y:-100,x:-100},a=this.searchString,l=this.pdfViewerBase.textLayer.characterBound[e];if(t&&this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex&&this.searchMatches.length>0&&this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),l){for(var h=0;h<n.length;h++){if(void 0!==n[h].length&&void 0!==i)if(h===this.searchIndex&&e===this.searchPageIndex)for(var d=0;d<i.length;d++)o="e-pv-search-text-highlight",this.searchString=i[d].trim(),this.addDivForSearch(h,e,l,this.searchString.length,o,d);else for(d=0;d<i.length;d++)o="e-pv-search-text-highlightother",this.searchString=i[d].trim(),this.addDivForSearch(h,e,l,this.searchString.length,o,d);else o=h===this.searchIndex&&e===this.searchPageIndex?"e-pv-search-text-highlight":"e-pv-search-text-highlightother";null==n[h].length&&this.addDivForSearch(h,e,l,this.searchString.length,o,void 0)}if(this.searchString=a,e===this.searchPageIndex&&!t){var p=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);if(p){var u=this.getScrollElement(p);this.scrollToSearchStr(u,r)}else{this.pdfViewerBase.updateScrollTop(e);var f=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);f&&(u=this.getScrollElement(f),this.scrollToSearchStr(u,r))}}}},s.prototype.addDivForSearch=function(e,t,i,n,r,o){var l;c(this.pdfViewerBase.getElement("_textLayer_"+t))&&"e-pv-search-text-highlight"===r&&this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(t+1);for(var h=l=void 0!==this.searchMatches[t][e].length?this.searchMatches[t][e][o]:this.searchMatches[t][e],d=0;l<h+n;)l=this.addDivElement(l,i,n,r,e,t,h,d,o),d++;"e-pv-search-text-highlight"===r&&this.showLoadingIndicator(!1)},s.prototype.addDivElement=function(e,t,i,n,r,o,a,l,h){var d=0,p=0,u=0,f=0,g=!1;t[e]&&(f=t[e].X,u=t[e].Y);var m=0;for(e-a!=0&&(m=e-a,i+=1);m<i;m++)t[e]&&(f>(y=t[e]).X+y.Width&&(g=!0),d=d>(b=(u=u<y.Y?u:y.Y)<y.Y?y.Y-u:u-y.Y)+y.Height?d:b+y.Height,e++);var w=!1;if(g){var y,b;f=(y=t[a+i-1]).X,p=t[a].X-t[a+i-1].X,d=d>(b=(u=u<y.Y?u:y.Y)<y.Y?y.Y-u:u-y.Y)+y.Height?d:b+y.Height;for(var T=t[a-1].Y-t[a].Y,L=a+i-1;L>=a;L--)0===(y=t[L]).Width&&(T=y.Y-t[L-1].Y);p+=T}else if(a+i!==e)w=!0,t[e-1]&&(p=t[e-1].X-f);else{w=!1;var S=this.pdfViewerBase.getStoredData(o,!0),I=null;if(S)I=S.pageText;else if(this.pdfViewer.isExtractText&&0!==this.documentTextCollection.length){var x=this.documentTextCollection[o][o];I=x.pageText?x.pageText:x.PageText}t[e]?p=!I||""!==I[e]&&" "!==I[e]&&"\r"!==I[e]&&"\n"!==I[e]||0!==t[e].Width?t[e].X-f:t[e-1].X-f+t[e-1].Width:t[e-1]&&(p=t[e-1].X-f)}return this.createSearchTextDiv(r,o,d,p,u,f,n,w,l,h),e},s.prototype.createSearchTextDiv=function(e,t,i,n,r,o,a,l,h,d){var p="_searchtext_"+t+"_"+e;if(l&&(p+="_"+h),void 0!==d&&this.pdfViewerBase.getElement(p)){var u=F("div",{id:this.pdfViewer.element.id+p+"_"+d});this.calculateBounds(u,i,n,r,o,this.pdfViewerBase.pageSize[t]),u.classList.add(a),"e-pv-search-text-highlight"===a?(u.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor,this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,{left:o,top:r,width:n,height:i},t+1)):"e-pv-search-text-highlightother"===a&&(u.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor);var m=this.pdfViewerBase.getElement("_textLayer_"+t);u.style.zIndex=this.searchTextDivzIndex,m&&m.appendChild(u)}this.pdfViewerBase.getElement(p)||(u=F("div",{id:this.pdfViewer.element.id+p}),this.calculateBounds(u,i,n,r,o,this.pdfViewerBase.pageSize[t]),u.classList.add(a),"e-pv-search-text-highlight"===a?(u.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor,this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,{left:o,top:r,width:n,height:i},t+1)):"e-pv-search-text-highlightother"===a&&(u.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor),m=this.pdfViewerBase.getElement("_textLayer_"+t),u.style.zIndex=this.searchTextDivzIndex,m&&m.appendChild(u))},s.prototype.calculateBounds=function(e,t,i,n,r,o){0===o.rotation||2===o.rotation?(e.style.height=Math.ceil(t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=i*this.pdfViewerBase.getZoomFactor()+"px",2===o.rotation?(e.style.top=(o.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=Math.ceil(o.width-r-i)*this.pdfViewerBase.getZoomFactor()+"px"):(e.style.top=n*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=r*this.pdfViewerBase.getZoomFactor()+"px")):1===o.rotation?(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=r*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(o.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px"):3===o.rotation&&(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(o.width-o.height+n)*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(o.height-r-i)*this.pdfViewerBase.getZoomFactor()+"px")},s.prototype.isClassAvailable=function(){for(var e=!1,t=0;t<this.tempElementStorage.length;t++)if(this.tempElementStorage[t].classString&&("e-pv-search-text-highlight"===this.tempElementStorage[t].classString||"e-pv-search-text-highlightother"===this.tempElementStorage[t].classString)){e=!0;break}return e},s.prototype.getScrollElement=function(e){var t=e;if(e.childNodes.length>0)for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].classList&&e.childNodes[i].classList.contains("e-pv-search-text-highlight")&&(t=e.childNodes[i]);return t},s.prototype.scrollToSearchStr=function(e,t){for(var i=e.offsetParent,n=e.offsetTop+e.clientTop,r=e.offsetLeft+e.clientLeft;i.id!==this.pdfViewerBase.viewerContainer.id;)n+=i.offsetTop,r+=i.offsetLeft,i=i.offsetParent;t&&(n+=t.y,r+=t.x,(E.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewerBase.getZoomFactor()>1.5)&&(i.scrollLeft=r)),i.scrollTop=n,this.pdfViewerBase.updateMobileScrollerPosition()},s.prototype.resizeSearchElements=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+"_searchtext_"+e+'"]'),i=0;i<t.length;i++){var n=t[i],r=1;this.pdfViewer.magnificationModule&&(r=this.pdfViewer.magnificationModule.previousZoomFactor);var o=e+"_"+r+"_"+this.pdfViewerBase.getZoomFactor();n.getAttribute("name")!==o&&(n.style.width=parseFloat(n.style.width)/r*this.pdfViewerBase.getZoomFactor()+"px",n.style.height=parseFloat(n.style.height)/r*this.pdfViewerBase.getZoomFactor()+"px",n.style.top=parseFloat(n.style.top)/r*this.pdfViewerBase.getZoomFactor()+"px",n.style.left=parseFloat(n.style.left)/r*this.pdfViewerBase.getZoomFactor()+"px",n.setAttribute("name",o))}},s.prototype.highlightOtherOccurrences=function(e){this.initSearch(e,!0)},s.prototype.highlightOthers=function(e){for(var t=this.getIndexes(),i=parseFloat(t.lowerPageValue.toString()),n=parseFloat(t.higherPageValue.toString()),r=i;r<=n;r++)this.highlightOtherOccurrences(r);e&&this.showLoadingIndicator(!1)},s.prototype.clearAllOccurrences=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_searchtext_"]'),t=0;t<e.length;t++)e[t].parentElement.removeChild(e[t])},s.prototype.getIndexes=function(){var e=this.pdfViewerBase.currentPageNumber-3,t=this.pdfViewerBase.currentPageNumber+1;return{lowerPageValue:e=e>0?e:0,higherPageValue:t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1}},s.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled)for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),n=t;n<=i;n++)this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(n)},s.prototype.resetTextSearch=function(){this.resetVariables(),this.onTextSearchClose(),this.searchPageIndex=null,this.searchIndex=0,this.updateSearchInputIcon(!0),this.enableNextButton(!1),this.enablePrevButton(!1),this.documentTextCollection=[],this.isTextRetrieved=!1,this.isTextSearched=!1,this.isSearchText=!1,this.searchRequestHandler&&this.searchRequestHandler.clear()},s.prototype.onTextSearchClose=function(){this.isPrevSearch=!1,this.isTextSearch=!1,this.pdfViewerBase.pageCount>0&&this.clearAllOccurrences()},s.prototype.createRequestForSearch=function(e){var t=this,i=816,n=this.pdfViewer.element.clientHeight,r=this.pdfViewerBase.pageSize[e].width,a=this.pdfViewerBase.getTileCount(r),l=i>=r?1:a,h=i>=r?1:a,d=!1,p=this.pdfViewer.tileRenderingSettings;p.enableTileRendering&&p.x>0&&p.y>0&&(l=i>=r?1:p.x,h=i>=r?1:p.y),l>1&&h>1&&(d=!0);for(var u=function(m){for(var y=function(w){var S=void 0;S={xCoordinate:m,yCoordinate:w,pageNumber:e,viewPortWidth:i,viewPortHeight:n,documentId:t.pdfViewerBase.getDocumentId(),hashId:t.pdfViewerBase.hashId,zoomFactor:t.pdfViewerBase.getZoomFactor(),tilecount:a,action:"Search",elementId:t.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId,tileXCount:l,tileYCount:h},f.pdfViewerBase.jsonDocumentId&&(S.documentId=f.pdfViewerBase.jsonDocumentId),f.searchRequestHandler=new hs(f.pdfViewer),f.searchRequestHandler.url=f.pdfViewer.serviceUrl+"/"+f.pdfViewer.serverActionSettings.renderPages,f.searchRequestHandler.responseType="json",f.searchRequestHandler.send(S),f.searchRequestHandler.onSuccess=function(I){var x=I.data;if(x){if("object"!=typeof x)try{x=JSON.parse(x)}catch{t.pdfViewerBase.onControlError(500,x,this.pdfViewer.serverActionSettings.renderPages),x=null}if(x)if(c(x.pageText)||x.uniqueId!==t.pdfViewerBase.documentId)d&&x.uniqueId===t.pdfViewerBase.documentId&&(t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,x),t.pdfViewerBase.storeWinData(x,T=void 0!==x.pageNumber?x.pageNumber:e,x.tileX,x.tileY),m===l-1&&w===h-1&&t.initSearch(e,!1));else{t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,x);var T=void 0!==x.pageNumber?x.pageNumber:e;i>=r?t.pdfViewerBase.storeWinData(x,T):t.pdfViewerBase.storeWinData(x,T,x.tileX,x.tileY),d?m===l-1&&w===h-1&&t.initSearch(e,!1):t.initSearch(e,!1)}}},f.searchRequestHandler.onFailure=function(I){t.pdfViewer.fireAjaxRequestFailed(I.status,I.statusText,this.pdfViewer.serverActionSettings.renderPages)},f.searchRequestHandler.onError=function(I){t.pdfViewerBase.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(I.status,I.statusText,this.pdfViewer.serverActionSettings.renderPages)}},b=0;b<h;b++)y(b)},f=this,g=0;g<l;g++)u(g)},s.prototype.getPDFDocumentTexts=function(){var t=50,i=this.pdfViewerBase.pageCount;t>=i&&(t=i),this.createRequestForGetPdfTexts(0,t)},s.prototype.createRequestForGetPdfTexts=function(e,t){var n,i=this;n={pageStartIndex:e,pageEndIndex:t,documentId:i.pdfViewerBase.getDocumentId(),hashId:i.pdfViewerBase.hashId,action:"RenderPdfTexts",elementId:i.pdfViewer.element.id,uniqueId:i.pdfViewerBase.documentId},this.pdfViewerBase.jsonDocumentId&&(n.documentId=this.pdfViewerBase.jsonDocumentId),this.searchRequestHandler=new hs(this.pdfViewer),this.searchRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.searchRequestHandler.responseType="json",this.searchRequestHandler.send(n),this.searchRequestHandler.onSuccess=function(r){var o=r.data;if(o){if("object"!=typeof o)try{o=JSON.parse(o)}catch{i.pdfViewerBase.onControlError(500,o,this.pdfViewer.serverActionSettings.renderTexts),o=null}if(o&&o.documentTextCollection&&o.uniqueId===i.pdfViewerBase.documentId){i.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts,o),i.documentTextCollection.length>0?(i.documentTextCollection=o.documentTextCollection.concat(i.documentTextCollection),i.documentTextCollection=i.orderPdfTextCollections(i.documentTextCollection)):i.documentTextCollection=o.documentTextCollection;var a=i.pdfViewerBase.pageCount;t!==a?(e=t,(t+=50)>=a&&(t=a),i.createRequestForGetPdfTexts(e,t)):(i.isTextRetrieved=!0,i.pdfViewer.fireTextExtractionCompleted(i.documentTextCollection),i.isTextSearched&&i.searchString.length>0&&(i.textSearch(i.searchString),i.isTextSearched=!1))}}},this.searchRequestHandler.onFailure=function(r){i.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText,this.pdfViewer.serverActionSettings.renderTexts)},this.searchRequestHandler.onError=function(r){i.pdfViewerBase.openNotificationPopup(),i.pdfViewer.fireAjaxRequestFailed(r.status,r.statusText,this.pdfViewer.serverActionSettings.renderTexts)}},s.prototype.orderPdfTextCollections=function(e){for(var t=[],i=0;i<e.length;i++)if(0===t.length)t.push(e[i]);else if(parseInt(Object.keys(e[i])[0])>parseInt(Object.keys(t[t.length-1])[0]))t.push(e[i]);else for(var n=0;n<t.length;n++)if(parseInt(Object.keys(e[i])[0])<parseInt(Object.keys(t[n])[0])){t.splice(n,0,e[i]);break}return t},s.prototype.createSearchBoxButtons=function(e,t){var i=F("button",{id:this.pdfViewer.element.id+"_"+e,className:"e-btn e-icon-btn e-pv-search-btn "+t});i.setAttribute("type","button");var n=F("span",{id:this.pdfViewer.element.id+"_"+e+"Icon",className:"e-pv-icon-search "+t+"-icon"});return i.disabled=!0,i.appendChild(n),i},s.prototype.enablePrevButton=function(e){(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(e?this.prevSearchBtn.removeAttribute("disabled"):this.prevSearchBtn&&(this.prevSearchBtn.disabled=!0))},s.prototype.enableNextButton=function(e){(!E.isDevice||this.pdfViewer.enableDesktopMode)&&(e?this.nextSearchBtn.removeAttribute("disabled"):this.nextSearchBtn&&(this.nextSearchBtn.disabled=!0))},s.prototype.resetVariables=function(){this.searchedPages=[],this.searchMatches=new Array},s.prototype.searchButtonClick=function(e,t){this.isMessagePopupOpened=!1,X()&&E.isDevice&&!this.pdfViewer.enableDesktopMode&&(e=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0],t=this.pdfViewerBase.getElement("_search_input")),e.classList.contains("e-pv-search-icon")?this.initiateTextSearch(t):e.classList.contains("e-pv-search-close")&&(this.showLoadingIndicator(!1),t.value="",this.resetTextSearch(),t.focus())},s.prototype.updateSearchInputIcon=function(e){X()&&this.searchBtn&&E.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0]),this.searchBtn&&(e?(this.searchBtn.classList.remove("e-pv-search-close"),this.searchBtn.classList.add("e-pv-search-icon")):(this.searchBtn.classList.remove("e-pv-search-icon"),this.searchBtn.classList.add("e-pv-search-close")))},s.prototype.onMessageBoxOpen=function(){var e=this;this.showLoadingIndicator(!1),this.pdfViewerBase.getElement("_search_input").blur(),this.isMessagePopupOpened=!0,!E.isDevice||this.pdfViewer.enableDesktopMode?X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Nomatches").then(function(i){e.pdfViewerBase.textLayer.createNotificationPopup(i)}):this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("No matches")):X()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoTextFound").then(function(n){e.pdfViewerBase.navigationPane.createTooltipMobile(n)}):this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant("No Text Found"))},s.prototype.searchText=function(e,t){e&&e.length>0&&" "===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.searchString=e,this.isMatchCase=t,this.searchIndex=0,this.textSearch(e)},s.prototype.searchNext=function(){this.nextSearch()},s.prototype.searchPrevious=function(){this.prevSearch()},s.prototype.cancelTextSearch=function(){this.resetTextSearch()},s.prototype.destroy=function(){this.searchMatches=void 0},s.prototype.getModuleName=function(){return"TextSearch"},s}(),GLe=function(){function s(e,t){this.printHeight=1056,this.printWidth=816,this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.print=function(){var t,e=this;this.pdfViewerBase.pageCount>0&&(this.printViewerContainer=F("div",{id:this.pdfViewer.element.id+"_print_viewer_container",className:"e-pv-print-viewer-container"}),"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!0),this.iframe=document.createElement("iframe"),this.iframe.className="iframeprint",this.iframe.id="iframePrint",this.iframe.style.position="fixed",this.iframe.style.top="-100000000px",document.body.appendChild(this.iframe),this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument,this.frameDoc.document.open()):(this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight),this.createPrintLoadingIndicator(this.printWindow.document.body)),setTimeout(function(){for(t=0;t<e.pdfViewerBase.pageCount;t++){var i=e.pdfViewerBase.pageSize[t].width,n=e.pdfViewerBase.pageSize[t].height,r=793,o=1122;e.printWidth=816,e.printHeight=1056,i>n&&(r=1122,o=793),!(i>=r+10||i<=r-10)&&!(n>=o+10||n<=o-10)&&(e.printWidth=783,e.printHeight=1110),e.pdfViewer.printModule.createRequestForPrint(t,i,n,e.pdfViewerBase.pageCount)}e.pdfViewer.firePrintEnd(e.pdfViewer.downloadFileName)},100))},s.prototype.createRequestForPrint=function(e,t,i,n){var r=this,o={pageNumber:e.toString(),documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:"2",action:"PrintImages",elementId:this.pdfViewer.element.id,uniqueId:this.pdfViewerBase.documentId,digitalSignaturePresent:this.pdfViewerBase.digitalSignaturePresent(e)};this.pdfViewerBase.jsonDocumentId&&(o.documentId=this.pdfViewerBase.jsonDocumentId),r.pdfViewerBase.createFormfieldsJsonData(),r.printRequestHandler=new hs(r.pdfViewer),r.printRequestHandler.url=r.pdfViewer.serviceUrl+"/"+r.pdfViewer.serverActionSettings.print,r.printRequestHandler.responseType=null,r.printRequestHandler.mode=!1,this.pdfViewerBase.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(r.pdfViewer.serverActionSettings.download),this.pdfViewerBase.validateForm=!1,this.pdfViewerBase.showPrintLoadingIndicator(!1)):r.printRequestHandler.send(o),r.printRequestHandler.onSuccess=function(a){r.pdfViewerBase.isPrint=!0;var l=a.data;if(r.pdfViewerBase.checkRedirection(l))r.pdfViewerBase.showPrintLoadingIndicator(!1);else{if(l&&"object"!=typeof l)try{"object"!=typeof(l=JSON.parse(l))&&(r.pdfViewerBase.onControlError(500,l,r.pdfViewer.serverActionSettings.print),l=null)}catch{r.pdfViewerBase.onControlError(500,l,r.pdfViewer.serverActionSettings.print),l=null}if(l&&l.uniqueId===r.pdfViewerBase.documentId){r.pdfViewer.fireAjaxRequestSuccess(r.pdfViewer.serverActionSettings.print,l);var d="";if(!r.pdfViewer.annotationSettings.skipPrint){var p=r.pdfViewerBase.documentAnnotationCollections;if(p&&p[l.pageNumber]&&r.pdfViewerBase.isTextMarkupAnnotationModule()){var u=p[l.pageNumber];d=r.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(u.textMarkupAnnotation,l.pageNumber,u.stampAnnotations,u.shapeAnnotation,u.measureShapeAnnotation,r.pdfViewerBase.isImportAction?u.stickyNotesAnnotation:u.stickyNoteAnnotation)}r.pdfViewerBase.isAnnotationCollectionRemoved&&(d=r.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null,l.pageNumber,null,null,null,null))}var w=l.pageNumber;r.printCanvas=F("canvas",{id:r.pdfViewer.element.id+"_printCanvas_"+e,className:"e-pv-print-canvas"}),r.printCanvas.style.width=t+"px",r.printCanvas.style.height=i+"px",r.printCanvas.height=2*r.printHeight*window.devicePixelRatio,r.printCanvas.width=2*r.printWidth*window.devicePixelRatio;var I=r.printCanvas.getContext("2d"),x=new Image,T=new Image;x.onload=function(){i>t||!r.pdfViewer.enablePrintRotation?(I.drawImage(x,0,0,r.printCanvas.width,r.printCanvas.height),d&&I.drawImage(T,0,0,r.printCanvas.width,r.printCanvas.height)):(I.translate(.5*r.printCanvas.width,.5*r.printCanvas.height),I.rotate(-.5*Math.PI),I.translate(.5*-r.printCanvas.height,.5*-r.printCanvas.width),I.drawImage(x,0,0,r.printCanvas.height,r.printCanvas.width),d&&I.drawImage(T,0,0,r.printCanvas.height,r.printCanvas.width)),w===r.pdfViewerBase.pageCount-1&&r.printWindowOpen(),r.pdfViewer.renderDrawing(null,e)},x.src=l.image,T.src=d,r.printViewerContainer.appendChild(r.printCanvas)}}r.pdfViewerBase.isPrint=!1},this.printRequestHandler.onFailure=function(a){r.pdfViewer.fireAjaxRequestFailed(a.status,a.statusText,r.pdfViewer.serverActionSettings.print)},this.printRequestHandler.onError=function(a){r.pdfViewerBase.openNotificationPopup(),r.pdfViewer.fireAjaxRequestFailed(a.status,a.statusText,r.pdfViewer.serverActionSettings.print)}},s.prototype.renderFieldsForPrint=function(e,t,i){var r,n=null;if(r="Default"===this.pdfViewer.printMode?this.frameDoc.document.getElementById("fields_"+e):this.printWindow.document.getElementById("fields_"+e),this.pdfViewer.formFieldsModule&&(n=this.pdfViewerBase.getItemFromSessionStorage("_formfields")),this.pdfViewer.formDesignerModule){var T=null;if(this.pdfViewer.formDesignerModule&&(T=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),T)for(var L=JSON.parse(T),a=0;a<L.length;a++)if((l=L[a].FormField).pageNumber-1===e&&l.isPrint){var N=this.pdfViewer.nameTable[L[a].Key.split("_")[0]],O=N.wrapper.children[0],_=void 0;if(O)if("RadioButton"===l.formFieldAnnotationType)for(var B=0;B<l.radiobuttonItem.length;B++)N=this.pdfViewer.nameTable[l.radiobuttonItem[B].id.split("_")[0]],(_=this.createFormDesignerFields(l.radiobuttonItem[B],O,N))&&(this.applyPosition(_,p=l.radiobuttonItem[B].lineBound,l.radiobuttonItem[B].fontFamily,t,i,!0,l.radiobuttonItem[B].zoomValue,l.pageNumber-1),r.appendChild(_));else(_=this.createFormDesignerFields(l,O,N))&&(this.applyPosition(_,p=l.lineBound,l.fontFamily,t,i,!0,l.zoomValue,l.pageNumber-1),r.appendChild(_))}}else if(n){var o=JSON.parse(n);for(a=0;a<o.length;a++){var l=o[a];if(parseFloat(l.PageIndex)===e){var d=this.pdfViewer.formFieldsModule.createFormFields(l,e,a,r).currentField;if(d){var p;if(this.applyPosition(d,p=l.LineBounds,l.Font,t,i),d.InsertSpaces=l.InsertSpaces,d.InsertSpaces){var f=parseInt(d.style.width)/d.maxLength-parseFloat(d.style.fontSize)/2-.6;d.style.letterSpacing=f+"px",d.style.fontFamily="monospace"}var g=this.pdfViewerBase.pageSize[e];if(g.width>g.height&&this.pdfViewer.enablePrintRotation){var m=this.pdfViewer.formFieldsModule.ConvertPointToPixel(p.X),y=this.pdfViewer.formFieldsModule.ConvertPointToPixel(p.Y),I=this.pdfViewer.formFieldsModule.ConvertPointToPixel(p.Width),x=this.pdfViewer.formFieldsModule.ConvertPointToPixel(p.Height),w=g.width-m-x,S=y+x;d.style.transform="rotate(-90deg)",d.style.transformOrigin="left bottom",d.style.left=S+"px",d.style.top=w+"px",d.style.height=x+"px",d.style.width=I+"px"}d.style.backgroundColor="transparent",l.IsSignatureField||(d.style.borderColor="transparent"),r.appendChild(d)}}}}},s.prototype.createFormDesignerFields=function(e,t,i){var n,r;return r=this.pdfViewer.formDesignerModule.createHtmlElement("div",{id:"form_field_"+t.id+"_html_element",class:"foreign-object"}),n=this.pdfViewer.formDesignerModule.createHtmlElement("div",{id:t.id+"_html_element",class:"foreign-object"}),"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType?(this.pdfViewer.formDesignerModule.disableSignatureClickEvent=!0,t.template=n.appendChild(this.pdfViewer.formDesignerModule.createSignatureDialog(this.pdfViewer,i,null,!0)),this.pdfViewer.formDesignerModule.disableSignatureClickEvent=!1):t.template=n.appendChild("DropdownList"===e.formFieldAnnotationType?this.pdfViewer.formDesignerModule.createDropDownList(t,i,!0):"ListBox"===e.formFieldAnnotationType?this.pdfViewer.formDesignerModule.createListBox(t,i,!0):this.pdfViewer.formDesignerModule.createInputElement(e.formFieldAnnotationType,i,null,!0)),r.appendChild(n),n},s.prototype.applyPosition=function(e,t,i,n,r,o,a,l){if(t){var p,d=void 0,u=void 0,f=void 0,g=this.pdfViewerBase.pageSize[l],m=g?g.width:0;o&&(g?g.height:0)<m&&this.pdfViewer.enablePrintRotation?(p=m-t.X/a-t.Height/a,d=(t.Y+t.Height)/a,u=t.Width/a,f=t.Height/a,e.style.transform="rotate(-90deg)",e.style.transformOrigin="left bottom"):(d=o?t.X/a/r:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.X)/r,p=o?t.Y/a/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Y)/n,u=o?t.Width/a/r:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Width)/r,f=o?t.Height/a/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Height)/n);var b=0;null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),b=this.pdfViewerBase.ConvertPointToPixel(i.Size)),E.isIE&&(p-=1),this.pdfViewerBase.setStyleToTextDiv(e,d,p,b,u,f,!0)}},s.prototype.printWindowOpen=function(){var i,e=this,t=navigator.userAgent;i="Default"===this.pdfViewer.printMode?this.frameDoc.document:this.printWindow.document;for(var n=0;n<this.printViewerContainer.children.length;n++){var r=this.printViewerContainer.children[n].toDataURL();if(i.write('<div style="margin:0mm;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;position:relative"><img src="'+r+'" id="image_'+n+'" /><div id="fields_'+n+'" style="margin:0px;top:0px;left:0px;position:absolute;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;z-index:2"></div></div>'),this.pdfViewer.formFieldsModule||this.pdfViewer.formDesignerModule){var l,h,o=this.pdfViewerBase.pageSize[n].width,a=this.pdfViewerBase.pageSize[n].height;a<o&&this.pdfViewer.enablePrintRotation?(l=a/this.printWidth,h=o/this.printHeight):(l=a/this.printHeight,h=o/this.printWidth),this.renderFieldsForPrint(n,l,h)}0===n&&(-1!==t.indexOf("Chrome")||-1!==t.indexOf("Safari")||-1!==t.indexOf("Firefox")?(i.write("<!DOCTYPE html>"),i.write("<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; width:100% } img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; } img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+"px; }</style></head><body>")):(i.write("<!DOCTYPE html>"),i.write("<html><head><style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+"px; }</style></head><body>")))}if(E.isIE||"edge"===E.info.name)try{"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.document.execCommand("print",!1,null)):this.printWindow.document.execCommand("print",!1,null)}catch{"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.print()):this.printWindow.print()}else setTimeout(function(){if("Default"===e.pdfViewer.printMode)if(e.pdfViewerBase.showPrintLoadingIndicator(!1),e.iframe.contentWindow.print(),e.iframe.contentWindow.focus(),e.pdfViewerBase.isDeviceiOS||E.isDevice){var d=e;window.onafterprint=function(p){document.body.removeChild(d.iframe)}}else document.body.removeChild(e.iframe);else e.printWindow&&(e.printWindow.print(),e.printWindow.focus(),(!E.isDevice||e.pdfViewerBase.isDeviceiOS)&&e.printWindow.close())},200)},s.prototype.createPrintLoadingIndicator=function(e){var t=F("div",{id:this.pdfViewer.element.id+"_printWindowcontainer"});t.style.height="100%",t.style.width="100%",t.style.position="absolute",t.style.zIndex=2e3,t.style.left=0,t.style.top=0,t.style.overflow="auto",t.style.backgroundColor="rgba(0, 0, 0, 0.3)",e.appendChild(t);var i=F("div",{id:this.pdfViewer.element.id+"_printLoadingContainer"});i.style.position="absolute",i.style.width="50px",i.style.height="50px",i.style.left="46%",i.style.top="45%",t.style.zIndex=3e3,t.appendChild(i);var n=new Image;n.src="data:image/gif;base64,R0lGODlhNgA3APMAAP///wAAAHh4eBwcHA4ODtjY2FRUVNzc3MTExEhISIqKigAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAANgA3AAAEzBDISau9OOvNu/9gKI5kaZ4lkhBEgqCnws6EApMITb93uOqsRC8EpA1Bxdnx8wMKl51ckXcsGFiGAkamsy0LA9pAe1EFqRbBYCAYXXUGk4DWJhZN4dlAlMSLRW80cSVzM3UgB3ksAwcnamwkB28GjVCWl5iZmpucnZ4cj4eWoRqFLKJHpgSoFIoEe5ausBeyl7UYqqw9uaVrukOkn8LDxMXGx8ibwY6+JLxydCO3JdMg1dJ/Is+E0SPLcs3Jnt/F28XXw+jC5uXh4u89EQAh+QQJCgAAACwAAAAANgA3AAAEzhDISau9OOvNu/9gKI5kaZ5oqhYGQRiFWhaD6w6xLLa2a+iiXg8YEtqIIF7vh/QcarbB4YJIuBKIpuTAM0wtCqNiJBgMBCaE0ZUFCXpoknWdCEFvpfURdCcM8noEIW82cSNzRnWDZoYjamttWhphQmOSHFVXkZecnZ6foKFujJdlZxqELo1AqQSrFH1/TbEZtLM9shetrzK7qKSSpryixMXGx8jJyifCKc1kcMzRIrYl1Xy4J9cfvibdIs/MwMue4cffxtvE6qLoxubk8ScRACH5BAkKAAAALAAAAAA2ADcAAATOEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwyZKxhqhgJJeSQVdraBNFSsVUVPHsEAzJrEtnJNSELXRN2bKcwjw19f0QG7PjA7B2EGfn+FhoeIiYoSCAk1CQiLFQpoChlUQwhuBJEWcXkpjm4JF3w9P5tvFqZsLKkEF58/omiksXiZm52SlGKWkhONj7vAxcbHyMkTmCjMcDygRNAjrCfVaqcm11zTJrIjzt64yojhxd/G28XqwOjG5uTxJhEAIfkECQoAAAAsAAAAADYANwAABM0QyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/i8qmCoGQoacT8FZ4AXbFopfTwEBhhnQ4w2j0GRkgQYiEOLPI6ZUkgHZwd6EweLBqSlq6ytricICTUJCKwKkgojgiMIlwS1VEYlspcJIZAkvjXHlcnKIZokxJLG0KAlvZfAebeMuUi7FbGz2z/Rq8jozavn7Nev8CsRACH5BAkKAAAALAAAAAA2ADcAAATLEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwzJNCmPzheUyJuKijVrZ2cTlrg1LwjcO5HFyeoJeyM9U++mfE6v2+/4PD6O5F/YWiqAGWdIhRiHP4kWg0ONGH4/kXqUlZaXmJlMBQY1BgVuUicFZ6AhjyOdPAQGQF0mqzauYbCxBFdqJao8rVeiGQgJNQkIFwdnB0MKsQrGqgbJPwi2BMV5wrYJetQ129x62LHaedO21nnLq82VwcPnIhEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/g8Po7kX9haKoAZZ0iFGIc/iRaDQ40Yfj+RepSVlpeYAAgJNQkIlgo8NQqUCKI2nzNSIpynBAkzaiCuNl9BIbQ1tl0hraewbrIfpq6pbqsioaKkFwUGNQYFSJudxhUFZ9KUz6IGlbTfrpXcPN6UB2cHlgfcBuqZKBEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7yJEopZA4CsKPDUKfxIIgjZ+P3EWe4gECYtqFo82P2cXlTWXQReOiJE5bFqHj4qiUhmBgoSFho59rrKztLVMBQY1BgWzBWe8UUsiuYIGTpMglSaYIcpfnSHEPMYzyB8HZwdrqSMHxAbath2MsqO0zLLorua05OLvJxEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhfohELYHQuGBDgIJXU0Q5CKqtOXsdP0otITHjfTtiW2lnE37StXUwFNaSScXaGZvm4r0jU1RWV1hhTIWJiouMjVcFBjUGBY4WBWw1A5RDT3sTkVQGnGYYaUOYPaVip3MXoDyiP3k3GAeoAwdRnRoHoAa5lcHCw8TFxscduyjKIrOeRKRAbSe3I9Um1yHOJ9sjzCbfyInhwt3E2cPo5dHF5OLvJREAOwAAAAAAAAAAAA==",n.style.width="50px",n.style.height="50px",i.appendChild(n);var r=F("div",{id:this.pdfViewer.element.id+"_printLabelContainer"});r.style.position="absolute",r.textContent="Loading ...",r.style.fontWeight="Bold",r.style.left="46%",r.style.top="54.5%",r.style.zIndex="3000",t.appendChild(r)},s.prototype.destroy=function(){this.printViewerContainer=void 0,this.frameDoc=void 0,this.printWindow=void 0},s.prototype.getModuleName=function(){return"Print"},s}(),d2=function(){function s(e,t){this.maintainTabIndex={},this.maintanMinTabindex={},this.isSignatureField=!1,this.paddingDifferenceValue=10,this.indicatorPaddingValue=4,this.isKeyDownCheck=!1,this.readOnlyCollection=[],this.isSignatureRendered=!1,this.signatureFieldCollection=[],this.selectedIndex=[],this.renderedPageList=[],this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.renderFormFields=function(e,t){if(this.maxTabIndex=0,this.minTabIndex=-1,-1===this.renderedPageList.indexOf(e)||t?this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"):(this.data=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),(!this.data||"[]"===this.data)&&(this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"))),this.data){this.formFieldsData=JSON.parse(this.data);var i=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),n=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+e),r=void 0;if(null!==this.formFieldsData&&null!==n&&null!==i){for(var o=!1,a=0;a<this.formFieldsData.length;a++){var l=this.formFieldsData[a];!o&&c(l.ActualFieldName)&&l.PageIndex===e&&(r=parseInt(l.FieldName.slice(l.FieldName.lastIndexOf("_")+1)),o=!0)}-1===this.renderedPageList.indexOf(e)&&this.renderedPageList.push(e);for(var p,u,h=function(b){var w=d.formFieldsData[b];if(""!==w.FieldName){w.IsInitialField&&(w.Name="InitialField");var S=w.Font;if(d.pdfViewer.formDesigner){if(parseFloat(w.PageIndex)==e){var I=void 0,x=void 0,T=void 0;null!==S&&S.Height&&(I=S.Name,S.Italic&&(x="Italic"),S.Bold&&(x="Bold"),S.Strikeout&&(x="Strikethrough"),S.Underline&&(x="Underline"),T=d.ConvertPointToPixel(S.Size));var L=2===w.Alignment?"right":1===w.Alignment?"center":"left",N=w.BackColor,O=w.LineBounds,_="rgba("+N.R+","+N.G+","+N.B+",1)";!0===w.IsTransparent&&(_="rgba(0,0,0,0)"),"#000000ff"===(_=d.rgbaToHex(_))&&(_="#daeaf7ff");var B=w.FontColor,Y={left:d.ConvertPointToPixel(O.X),top:d.ConvertPointToPixel(O.Y),width:d.ConvertPointToPixel(O.Width),height:d.ConvertPointToPixel(O.Height)},U=!1,J=0;0!==w.Rotation?(-90===w.RotationAngle||-270===w.RotationAngle||-180===w.RotationAngle)&&(Y=d.getBounds(Y,e,0,U)):(Y=d.getBounds(Y,e,0,U=!0),J=d.getAngle(e));var $="rgba("+B.R+","+B.G+","+B.B+",1)";$=d.rgbaToHex($);var ye=w.BorderColor,fe="rgba("+ye.R+","+ye.G+","+ye.B+",1)";fe=d.rgbaToHex(fe);var ve=w.BorderWidth;d.selectedIndex=[],"",p="RadioButton"===w.Name||"CheckBox"===w.Name?w.Text?w.Text:w.Value:w.Text;var Te={bounds:{X:Y.left,Y:Y.top,Width:Y.width,Height:Y.height},pageNumber:parseFloat(w.PageIndex)+1,name:w.ActualFieldName,tooltip:w.ToolTip,value:p,insertSpaces:w.InsertSpaces,isChecked:w.Selected,isSelected:w.Selected,fontFamily:I,fontStyle:x,backgroundColor:_,color:$,borderColor:fe,thickness:ve,fontSize:T,isMultiline:w.Multiline,rotateAngle:J,isReadOnly:w.IsReadonly,isRequired:w.IsRequired,alignment:L,options:d.getListValues(w),selectedIndex:d.selectedIndex,maxLength:w.MaxLength,visibility:1===w.Visible?"hidden":"visible",font:{isItalic:!c(S)&&S.Italic,isBold:!c(S)&&S.Bold,isStrikeout:!c(S)&&S.Strikeout,isUnderline:!c(S)&&S.Underline},isTransparent:w.IsTransparent};!w.id&&d.pdfViewer.formFieldCollections[b]&&!c(w.ActualFieldName)&&(Te.id=d.pdfViewer.formFieldCollections[b].id),("DropDown"===w.Name||"ListBox"===w.Name)&&(Te.value=w.SelectedValue);var Ne=d.getFormFieldType(w);if(("SignatureText"!==w.Name||"SignatureImage"!==w.Name)&&!c(d.getFormFieldType(w))){if(w.IsRequired){var Ue=Te.thickness;Te.thickness=Ue=Ue>0?Ue:1}var Pe=d.pdfViewer.formDesignerModule.addFormField(Ne,Te,!1,Te.id);Pe&&Pe.parentElement&&(w.id=Pe.parentElement.id.split("_")[0]),Pe&&"hidden"===Pe.style.visibility&&(Pe.childNodes[0].disabled=!0)}("SignatureField"===Ne||"InitialField"===Ne)&&(d.addSignaturePath(w,r),c(w.Value)||(d.renderExistingAnnnot(w,parseFloat(w.PageIndex)+1,null,U),d.isSignatureRendered=!0,r++)),null===w.ActualFieldName&&0===d.formFieldsData.filter(function(xe){return xe.FieldName.includes(w.FieldName.replace(/_\d$/,""))}).filter(function(xe){return"ink"!=xe.Name}).length&&(d.renderExistingAnnnot(w,parseFloat(w.PageIndex)+1,null,U),d.pdfViewerBase.signatureModule.storeSignatureData(e,w),d.isSignatureRendered=!0,r++),d.pdfViewerBase.isLoadedFormFieldAdded=!0}}else if(parseFloat(w.PageIndex)==e){var rt=d.createFormFields(w,e,b,null,r),Ye=rt.currentField,dt=rt.count;if(U=!1,null===w.ActualFieldName&&0===d.formFieldsData.filter(function(At){return At.FieldName.includes(w.FieldName.replace(/_\d$/,""))}).filter(function(At){return"ink"!=At.Name}).length&&(d.renderExistingAnnnot(w,parseFloat(w.PageIndex)+1,null,U),d.pdfViewerBase.signatureModule.storeSignatureData(e,w),d.isSignatureRendered=!0,r++),Ye){var Z=d.createParentElement(w,e),te=(O=w.LineBounds,w.Font);if(u=0,0===w.Rotation&&(U=!0,u=d.getAngle(e)),Z?Z.style.transform="rotate("+u+"deg)":Ye.style.transform="rotate("+u+"deg)",d.applyPosition(Ye,O,te,e,0,U),Ye.InsertSpaces=w.InsertSpaces,Ye.InsertSpaces){var we=d.pdfViewerBase.getZoomFactor(),Be=parseInt(Ye.style.width)/Ye.maxLength-parseFloat(Ye.style.fontSize)/2-.6*we;Ye.style.letterSpacing=Be+"px",Ye.style.fontFamily="monospace",Ye.style.paddingLeft=Be/2+"px"}w.uniqueID=d.pdfViewer.element.id+"input_"+e+"_"+b;for(var Ge=0;Ge<d.pdfViewer.formFieldCollections.length;Ge++)("text"===Ye.type||"password"===Ye.type||"textarea"===Ye.type)&&"SignatureField"!==w.Name&&w.uniqueID===d.pdfViewer.formFieldCollections[Ge].id&&(d.pdfViewer.formFieldCollections[Ge].value=w.Text);c(w.Value)&&(w.Value=w.Text),w.ToolTip&&d.setToolTip(w.ToolTip,Ye),d.applyCommonProperties(Ye,e,b,w,U),d.checkIsReadonly(w,Ye),d.applyTabIndex(w,Ye,e),d.checkIsRequiredField(w,Ye),d.applyDefaultColor(Ye),d.updateFormFieldsCollection(w),Z?(Z.appendChild(Ye),i.appendChild(Z)):(Ye.style.position="absolute",i.appendChild(Ye)),Ye.addEventListener("focus",d.focusFormFields.bind(d)),Ye.addEventListener("blur",d.blurFormFields.bind(d)),Ye.addEventListener("click",d.updateFormFields.bind(d)),Ye.addEventListener("change",d.changeFormFields.bind(d)),Ye.addEventListener("keydown",d.updateFormFieldsValue.bind(d)),Ye.addEventListener("keyup",d.updateSameFieldsValue.bind(d)),r=dt}}}},d=this,f=0;f<this.formFieldsData.length;f++)h(f);this.pdfViewer.formDesigner||(window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}if(this.pdfViewerBase.isFocusField&&this.pdfViewerBase.focusField){var g=document.getElementById(this.pdfViewerBase.focusField.id);g&&("SignatureField"!==this.pdfViewerBase.focusField.type&&"InitialField"!==this.pdfViewerBase.focusField.type||!this.pdfViewer.formDesignerModule?g.focus():this.pdfViewer.bookmark.goToBookmark(this.pdfViewerBase.focusField.pageIndex,this.pdfViewerBase.pageSize[e].height-this.pdfViewerBase.focusField.bounds.y),this.pdfViewerBase.isFocusField=!1,this.pdfViewerBase.focusField=[])}},s.prototype.setToolTip=function(e,t){new za({content:oo(function(){return e})}).appendTo(t)},s.prototype.trim=function(e){return e.replace(/^\s+|\s+$/gm,"")},s.prototype.rgbaToHex=function(e){var t=e.substring(e.indexOf("(")).split(","),i=parseInt(this.trim(t[0].substring(1)),10),n=parseInt(this.trim(t[1]),10),r=parseInt(this.trim(t[2]),10),o=parseFloat(parseFloat(this.trim(t[3].substring(0,t[3].length-1))).toFixed(2)),a=[i.toString(16),n.toString(16),r.toString(16),Math.round(255*o).toString(16).substring(0,2)];return a.forEach(function(l,h){1===l.length&&(a[h]="0"+l)}),"#"+a.join("")},s.prototype.getListValues=function(e){for(var t=e.TextList,i=[],n=0;n<t.length;n++)t[n]===e.SelectedValue&&this.selectedIndex.push(n),i.push({itemName:t[n],itemValue:t[n]});return"ListBox"===this.getFormFieldType(e)&&(this.selectedIndex=e.SelectedList),i},s.prototype.createParentElement=function(e,t){var i;if("Textbox"===e.Name||"Password"===e.Name){(i=document.createElement("div")).style.background="white",e.InsertSpaces&&(i.style.background="transparent");var n=e.LineBounds,r=e.Font;i.style.position="absolute";var o=!1;0===e.Rotation&&(o=!0),this.applyPosition(i,n,r,t,0,o)}return i},s.prototype.getAngle=function(e){var t=0,i=this.pdfViewerBase.pageSize[e];if(i&&i.rotation)switch(i.rotation){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},s.prototype.nextField=function(){this.signatureFieldNavigate(!0)},s.prototype.previousField=function(){this.signatureFieldNavigate(!1)},s.prototype.signatureFieldNavigate=function(e){var r,t=e,i=this.signatureFieldCollection,n=this.pdfViewer.formFieldCollections;if(0===i.length&&(i=this.getSignField()),this.currentTarget){if(this.pdfViewer.formDesignerModule){for(var o=0;o<n.length;o++)if(this.currentTarget.id===(r=n[o]).id){this.currentTarget=document.getElementById(r.id),this.getSignatureIndex(o,n.length,t);break}}else for(o=0;o<i.length;o++)if(this.currentTarget.id===(r=this.pdfViewer.formDesignerModule?i[o].FormField:i[o]).uniqueID){this.currentTarget=document.getElementById(r.uniqueID),this.getSignatureIndex(o,i.length,t);break}}else e&&(this.pdfViewer.formDesignerModule?(r=i[0]).id&&(this.currentTarget=document.getElementById(r.id),this.getSignatureIndex(0,i.length,t,!0)):(r=i[0]).uniqueID&&(this.currentTarget=document.getElementById(r.uniqueID),this.getSignatureIndex(0,i.length,t,!0)))},s.prototype.getSignatureIndex=function(e,t,i,n){var r=e;n||(i?r++:r--),1===t?this.renderSignatureField(0):r<t&&r>=0?this.renderSignatureField(r):i?r>=t&&this.renderSignatureField(0):r<=0&&this.renderSignatureField(t-1)},s.prototype.renderSignatureField=function(e){var r,t=e,i=this.signatureFieldCollection,n=this.pdfViewer.formFieldCollections;if(t<n.length){for(var o=0;o<n.length;o++)if(this.pdfViewer.formDesignerModule){if(n[t].id===(l=n[o]).id){var h=l.pageIndex>=0?l.pageIndex:l.pageNumber;this.pdfViewer.annotationModule.findRenderPageList(h)||(this.pdfViewer.navigation.goToPage(h+1),this.renderFormFields(h,!1)),this.currentTarget=document.getElementById(l.id),r=l;break}}else{var l;if((this.pdfViewer.formDesignerModule?i[t].FormField.uniqueID:i[t].uniqueID)===(l=this.pdfViewer.formDesignerModule?i[o].FormField:i[o]).uniqueID){var p=l.PageIndex>=0?l.PageIndex:l.pageNumber;this.pdfViewer.annotationModule.findRenderPageList(p)||(this.pdfViewer.navigation.goToPage(p+1),this.renderFormFields(p,!1)),this.currentTarget=document.getElementById(l.uniqueID),r=l;break}}null===this.currentTarget&&(this.pdfViewer.navigation.goToPage(r.PageIndex>=0?r.PageIndex:r.pageNumber),this.currentTarget=document.getElementById(r.uniqueID)),this.currentTarget&&("e-pdfviewer-signatureformfields-signature"!==this.currentTarget.className||this.pdfViewer.formDesignerModule?("e-pdfviewer-signatureformfields"===this.currentTarget.className||"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className)&&(this.pdfViewer.formDesignerModule?document.getElementById(this.currentTarget.id).parentElement.focus():document.getElementById(this.currentTarget.id).focus()):(document.getElementById(this.currentTarget.id).focus(),this.pdfViewer.select([this.currentTarget.id],null)))}},s.prototype.setFocus=function(e){e?(this.removeFocus(),document.getElementById(e).classList.add("e-pv-signature-focus")):this.currentTarget&&document.getElementById(this.currentTarget.id).focus()},s.prototype.removeFocus=function(){if(this.signatureFieldCollection){var e=this.signatureFieldCollection;0===e.length&&(e=this.getSignField());for(var t=0;t<this.signatureFieldCollection.length;t++){var n=document.getElementById(this.pdfViewer.formDesignerModule?this.signatureFieldCollection[t].FormField.uniqueID:this.signatureFieldCollection[t].uniqueID);n&&n.classList.remove("e-pv-signature-focus")}this.pdfViewer.formFieldsModule.currentTarget&&this.pdfViewer.formFieldsModule.currentTarget.classList.remove("e-pv-signature-focus")}},s.prototype.getSignField=function(){return this.signatureFieldCollection=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection):this.getFormFieldSignField(),this.signatureFieldCollection},s.prototype.getFormFieldSignField=function(){var t,e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e)for(var i=JSON.parse(e),n=0;n<i.length;n++)("SignatureField"===(t=i[n]).Name||"InitialField"===t.Name)&&(t.uniqueID=this.pdfViewer.element.id+"input_"+t.PageIndex+"_"+n,this.signatureFieldCollection.push(i[n]));return this.signatureFieldCollection},s.prototype.formFieldCollections=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e)for(var t=JSON.parse(e),i=0;i<t.length;i++){var n=t[i],r=n.Name;if(this.pdfViewer.formDesignerModule)"ink"!==n.Name&&"SignatureImage"!==n.Name&&"SignatureText"!==n.Name&&this.retreiveFormFieldsData(n,!0);else if("ink"!==n.Name){var o={name:this.retriveFieldName(n),id:this.pdfViewer.element.id+"input_"+parseFloat(n.PageIndex)+"_"+i,isReadOnly:!1,type:n.IsInitialField?"InitialField":r,value:this.retriveCurrentValue(n),fontName:"",isRequired:n.IsRequired};this.pdfViewer.formFieldCollections.push(o)}}},s.prototype.retreiveFormFieldsData=function(e,t){var i,n,r;if(""!==e.FieldName){e.IsInitialField&&(e.Name="InitialField");var o=e.Font;null!==o&&o.Height&&(i=o.Name,o.Italic&&(n="Italic"),o.Bold&&(n="Bold"),o.Strikeout&&(n="Strikethrough"),o.Underline&&(n="Underline"),r=this.ConvertPointToPixel(o.Size));var a=2===e.Alignment?"right":1===e.Alignment?"center":"left",l=e.BackColor,h=e.LineBounds,d="rgba("+l.R+","+l.G+","+l.B+",1)";d=this.rgbaToHex(d),!0===e.IsTransparent?d="rgba(0,0,0,0)":"#000000ff"===d&&(d="#daeaf7ff");var p=e.FontColor,y={left:this.ConvertPointToPixel(h.X),top:this.ConvertPointToPixel(h.Y),width:this.ConvertPointToPixel(h.Width),height:this.ConvertPointToPixel(h.Height)},b="rgba("+p.R+","+p.G+","+p.B+",1)";b=this.rgbaToHex(b);var w=e.BorderColor,S="rgba("+w.R+","+w.G+","+w.B+",1)";S=this.rgbaToHex(S);var I=e.BorderWidth;this.selectedIndex=[];var x={bounds:{X:y.left,Y:y.top,Width:y.width,Height:y.height},pageNumber:parseFloat(e.PageIndex)+1,name:e.ActualFieldName,tooltip:e.ToolTip,value:e.Text,isChecked:e.Selected,isSelected:e.Selected,fontFamily:i,fontStyle:n,backgroundColor:d,color:b,borderColor:S,thickness:I,fontSize:r,isMultiline:e.Multiline,isReadOnly:e.IsReadonly,isRequired:e.IsRequired,insertSpaces:e.InsertSpaces,alignment:a,options:this.getListValues(e),selectedIndex:this.selectedIndex,maxLength:e.MaxLength,visibility:1===e.Visible?"hidden":"visible",font:{isItalic:!c(o)&&o.Italic,isBold:!c(o)&&o.Bold,isStrikeout:!c(o)&&o.Strikeout,isUnderline:!c(o)&&o.Underline}};("DropDown"===e.Name||"ListBox"===e.Name)&&(x.value=e.SelectedValue);var T=this.getFormFieldType(e);return("SignatureField"===T||"InitialField"===T)&&(this.addSignaturePath(e),this.isSignatureField&&(x.value=e.Value)),this.pdfViewer.formDesignerModule.addFormField(T,x,t)}return null},s.prototype.updateFormFieldsCollection=function(e){var t=e.Name,i={name:this.retriveFieldName(e),id:e.uniqueID,isReadOnly:e.IsReadonly,isRequired:e.IsRequired,isSelected:"CheckBox"!==t&&e.Selected,isChecked:"RadioButton"!==t&&e.Selected,type:t,value:"ListBox"===t||"DropDown"===t?e.SelectedValue:e.Value,fontName:e.FontFamily?e.FontFamily:""};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(n){return n.id===i.id})]=i},s.prototype.updateFormFieldValues=function(e){if(this.readOnlyCollection.push(e.id),e){var t=document.getElementById(e.id);t&&(e.isReadOnly?(t.disabled=!0,t.style.backgroundColor="",t.style.cursor="default"):(""===t.style.backgroundColor&&(t.style.backgroundColor="rgba(0, 20, 200, 0.2)"),t.disabled=!1,t.style.cursor="")),this.updateDataInSession(t)}},s.prototype.retriveFieldName=function(e){var t;switch(e.Name){case"Textbox":case"Password":case"SignatureField":case"InitialField":t=e.FieldName;break;case"RadioButton":case"CheckBox":t=e.GroupName;break;case"DropDown":case"ListBox":t=e.Text}return t},s.prototype.retriveCurrentValue=function(e){var t;switch(e.Name){case"Textbox":case"Password":t=e.Text;break;case"SignatureField":t=e.Value;break;case"RadioButton":case"CheckBox":t=e.Selected;break;case"DropDown":t=e.SelectedValue;break;case"ListBox":t=e.SelectedList}return t},s.prototype.getSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[i],r=0;switch(n.rotation){case 0:r=t;break;case 1:r={x:t.x+e.Width+t.width/3.5,y:n.width-e.X+t.height/4};break;case 2:r={x:n.width-t.x-t.width,y:n.height-t.y-t.height};break;case 3:r={x:t.y-t.width/2+t.height,y:t.x+t.width/3}}return r},s.prototype.downloadFormFieldsData=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e){for(var t=JSON.parse(e),i={},n=[],r=0;r<t.length;r++){var o=t[r],a=o.IsRequired;if("Textbox"===o.Name||"Password"===o.Name||o.Multiline)!a||""!==o.Text&&null!==o.Text?delete this.pdfViewerBase.nonFillableFields[o.FieldName]:(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[o.FieldName]=o.Text),i[o.FieldName]=n={fieldValue:o.Text,isReadOnly:o.IsReadonly};else if("RadioButton"===o.Name&&o.Selected)a&&!1===o.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[o.GroupName]=o.Value):delete this.pdfViewerBase.nonFillableFields[o.GroupName],i[o.GroupName]=n={fieldValue:o.Value,isReadOnly:o.IsReadonly};else if("CheckBox"===o.Name)a&&!1===o.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[o.GroupName]=o.Selected):delete this.pdfViewerBase.nonFillableFields[o.GroupName],o.CheckboxIndex&&o.Selected?i[o.GroupName]=n={fieldValue:o.CheckboxIndex,isReadOnly:o.IsReadonly}:null==i[o.GroupName]&&(i[o.GroupName]=n={fieldValue:o.Selected,isReadOnly:o.IsReadonly});else if("DropDown"===o.Name)a&&""===o.SelectedValue?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[o.Text]=o.SelectedValue):delete this.pdfViewerBase.nonFillableFields[o.Text],i[o.Text]=n={fieldValue:o.SelectedValue,isReadOnly:o.IsReadonly};else if("ListBox"===o.Name){for(var l=o.TextList,h=[],d=0;d<o.SelectedList.length;d++)h.push(l[o.SelectedList[d]]);n={fieldValue:JSON.stringify(h),isReadOnly:o.IsReadonly},i[o.Text]=n}else if("SignatureField"===o.Name||"InitialField"===o.Name){var u=void 0;if((null===o.Value||""===o.Value)&&this.addSignaturePath(o),o.Value&&""!==o.Value){u=o.Value;var f=o.fontFamily?o.fontFamily:o.FontFamily;f?(i[o.FieldName+"fontName"]=f,i[o.FieldName+"fontSize"]=o.fontSize?o.fontSize:o.FontSize):o.Value.split("base64,")[1]?i[o.FieldName+"ImageData"]=!0:u=ia(Cs(o.Value))}if(a&&null===o.Value||""===o.Value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[o.FieldName]=JSON.stringify(u)):delete this.pdfViewerBase.nonFillableFields[o.FieldName],i[o.FieldName]=JSON.stringify(u),o.Bounds){var m=this.getSignatureBounds(o.LineBounds,o.Bounds,o.PageIndex);o.Bounds.x=m.x,o.Bounds.y=m.y,i[o.FieldName+"bounds"]=JSON.stringify(o.Bounds)}else{var y=o.LineBounds;m={x:this.ConvertPointToPixel(y.X),y:this.ConvertPointToPixel(y.Y),width:this.ConvertPointToPixel(y.Width),height:this.ConvertPointToPixel(y.Height)},i[o.FieldName+"bounds"]=JSON.stringify(m)}i[o.FieldName+"isReadOnly"]=o.IsReadonly}}return JSON.stringify(i)}},s.prototype.focusFormFields=function(e){var t=e.target;if(t&&"e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className){var i=t.style.backgroundColor,n=i.lastIndexOf(","),r=i.slice(0,n+1)+0+")";t.style.backgroundColor=r,"checkbox"===t.type&&(t.style.webkitAppearance=""),t.style.boxShadow="0 0 5px "+("transparent"===t.style.borderColor?"#000000":t.style.borderColor)}else t&&("e-pdfviewer-signatureformfields"===t.className||"e-pdfviewer-signatureformfields-signature"===t.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===t.className||"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"===t.className)&&this.setFocus(t.id)},s.prototype.blurFormFields=function(e){var t=e.target;if(t.InsertSpaces&&this.isKeyDownCheck){var i=parseInt(t.style.width)-parseInt(t.style.height)/2;t.style.width=i+"px",this.isKeyDownCheck=!1}this.pdfViewer.fireFocusOutFormField(t.name,"checkbox"===t.type?t.checked:t.value);var n=t.style.backgroundColor,r=n.lastIndexOf(","),o=n.slice(0,r+1)+.2+")";t.style.backgroundColor=o,t.style.boxShadow="none",t.style.webkitAppearance="checkbox"!==t.type||t.checked?"":"none"},s.prototype.updateFormFields=function(e){var t=e.target;"e-pdfviewer-ListBox"===t.className?this.updateDataInSession(t=t.parentElement):"e-pdfviewer-signatureformfields"===t.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===t.className?this.currentTarget=t:("e-pv-buttonItem"===t.className||"button"===t.type)&&this.pdfViewer.fireButtonFieldClickEvent(t.value,t.name,t.id);for(var i=0;i<this.pdfViewer.formFieldCollections.length;i++)t.id===this.pdfViewer.formFieldCollections[i].id&&((this.pdfViewer.formDesignerModule||this.pdfViewer.annotationModule)&&this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[i]),("e-pdfviewer-signatureformfields"===t.className||"e-pdfviewer-signatureformfields-signature"===t.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===t.className||"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"===t.className)&&this.setFocus(t.id))},s.prototype.drawSignature=function(e,t,i,n){var r,a,l,h,d,o=this;d=this.pdfViewerBase.getItemFromSessionStorage(this.pdfViewer.formDesigner?"_formDesigner":"_formfields");var p=JSON.parse(d);if(this.pdfViewer.formDesignerModule)var u=this.currentTarget&&this.currentTarget.offsetParent?this.currentTarget.offsetParent.name:this.currentTarget?this.currentTarget.name:i.name?i.name:i.offsetParent.name;else u=this.currentTarget?this.currentTarget.name:i.name?i.name:i.offsetParent.name;for(var f=function(){var y=g.pdfViewer.formDesigner?p[m].FormField.name:p[m].FieldName;if(g.pdfViewer.formDesigner?y===u:y===u&&!c(p[m].ActualFieldName)){var b=i=g.pdfViewer.formDesigner?document.getElementById(p[m].Key.split("_")[0]):document.getElementById(p[m].uniqueID),w=b.offsetParent.offsetParent.id.split("_")[0],S=g.pdfViewer.nameTable[w];i&&i.offsetParent&&S&&(l=i.getBoundingClientRect(),h=i.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),g.pdfViewerBase.drawSignatureWithTool=!0,i.nextSibling&&-1!==i.nextSibling.id.indexOf("initial")&&(g.pdfViewer.isInitialFieldToolbarSelection=!0));var j,G,I=t||g.pdfViewerBase.signatureModule.outputString,x=n||g.pdfViewerBase.signatureModule.fontName,T=g.pdfViewerBase.getZoomFactor(),L=g.pdfViewerBase.drawSignatureWithTool?l.width/T:parseFloat(b.style.width)/T,N=g.pdfViewerBase.drawSignatureWithTool?l.height/T:parseFloat(b.style.height)/T,O=g.pdfViewerBase.drawSignatureWithTool?(l.left-h.left)/T:parseFloat(b.style.left)/T,_=g.pdfViewerBase.drawSignatureWithTool?(l.top-h.top)/T:parseFloat(b.style.top)/T,B=g.pdfViewerBase.drawSignatureWithTool&&i.nextElementSibling?parseFloat(i.nextElementSibling.id.split("_")[1]):parseFloat(b.id.split("_")[1]),q=g.pdfViewerBase.drawSignatureWithTool&&i.nextElementSibling?parseFloat(i.nextElementSibling.id.split("_")[2]):parseFloat(b.id.split("_")[2]),W=g.pdfViewerBase.signatureModule.saveImageString,Y=b.offsetParent.offsetParent.style.transform?b.offsetParent.offsetParent.style.transform:b.style.transform,U=(Y=Y.substring(Y.indexOf("(")+1,Y.indexOf("d")))?parseInt(Y):0;if("Type"===e){if(x||(x="Helvetica"),a=g.getSignBounds(q,U,B,T,O,_,L,N),"Default"===g.pdfViewer.signatureFitMode&&(a=g.getDefaultBoundsforSign(a)),"SignatureText"===(r={id:b.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:B,data:I,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:U,annotName:"SignatureText",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:x,fontSize:90===U||270===U?a.width/1.35:a.height/1.35}).shapeAnnotationType){var J=g.getTextWidth(r.data,r.fontSize,r.fontFamily),$=1;J>a.width&&($=a.width/J),r.fontSize=g.getFontSize(Math.floor(r.fontSize*$))}W=r.data,j=r.fontFamily,G=r.fontSize}else if("Image"===e){a=g.getSignBounds(q,U,B,T,O,_,L,N);var ye=new Image;ye.src=I,ye.onload=function(){o.imageOnLoad(a,ye,I,B,U,b,S,W,j,G,i)}}else if(-1!==I.indexOf("base64"))a=g.getSignBounds(q,U,B,T,O,_,L,N),"Default"===g.pdfViewer.signatureFitMode&&(a=g.getDefaultBoundsforSign(a)),W=(r={id:b.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:B,data:I,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:U,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}).data;else{if("Default"===g.pdfViewer.signatureFitMode){var fe=g.updateSignatureAspectRatio(I,!1,b);(a=g.getSignBounds(q,U,B,T,O,_,fe.width,fe.height,!0)).x=a.x+fe.left,a.y=a.y+fe.top}else a=g.getSignBounds(q,U,B,T,O,_,L,N);r={id:b.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:B,data:I,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:U,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}if(g.pdfViewerBase.drawSignatureWithTool&&S&&"Image"!==e){r.id=S.id+"_content";var ve=g.pdfViewer.add(r);S.wrapper.children.push(ve.wrapper)}else"Image"!==e&&g.pdfViewer.add(r);if(r&&"Path"===r.shapeAnnotationType&&""!==I&&(g.pdfViewerBase.currentSignatureAnnot=r,g.pdfViewerBase.signatureModule.addSignatureCollection(a,{currentHeight:N,currentWidth:L,currentLeft:O,currentTop:_}),W=g.pdfViewerBase.signatureModule.saveImageString,g.pdfViewerBase.currentSignatureAnnot=null),"Image"!==e){var Ne=document.getElementById(g.pdfViewer.element.id+"_annotationCanvas_"+B);if(g.pdfViewer.renderDrawing(Ne,B),g.pdfViewerBase.signatureModule.showSignatureDialog(!1),b.className="e-pdfviewer-signatureformfields e-pv-signature-focus"===b.className?"e-pdfviewer-signatureformfields-signature e-pv-signature-focus":"e-pdfviewer-signatureformfields-signature",g.pdfViewerBase.drawSignatureWithTool&&S){var Ue=i.offsetParent.offsetParent.id.split("_")[0]+"_content";r.bounds={x:a.x*T,y:a.y*T,width:a.width*T,height:a.height*T},g.updateSignatureDataInSession(r,Ue)}else g.updateDataInSession(b,r.data,r.bounds,j,G);b.style.pointerEvents="none",g.pdfViewer.annotation&&g.pdfViewer.annotation.addAction(r.pageIndex,null,r,"FormField Value Change","",r,r),("Path"===r.shapeAnnotationType||"SignatureText"===r.shapeAnnotationType)&&g.pdfViewer.fireSignatureAdd(r.pageIndex,r.id,r.shapeAnnotationType,r.bounds,r.opacity,null,null,W),g.pdfViewer.fireFocusOutFormField(b.name,I)}}},g=this,m=0;m<p.length;m++)f();"Image"!==e&&(this.pdfViewerBase.signatureModule.hideSignaturePanel(),this.pdfViewerBase.drawSignatureWithTool=!1,this.pdfViewer.isInitialFieldToolbarSelection=!1)},s.prototype.imageOnLoad=function(e,t,i,n,r,o,a,l,h,d,p){var u;if(p&&p.offsetParent&&a&&(this.pdfViewerBase.drawSignatureWithTool=!0,p.nextSibling&&-1!==p.nextSibling.id.indexOf("initial")&&(this.pdfViewer.isInitialFieldToolbarSelection=!0)),"Default"===this.pdfViewer.signatureFitMode){var f=Math.min(e.height/this.paddingDifferenceValue,e.width/this.paddingDifferenceValue),y=t.width,b=t.height,w=e.width,S=e.height,I=Math.min((e.width-f)/y,(e.height-f)/b);if(e.width=y*I,e.height=b*I,e.x=e.x+(w-e.width)/2,e.y=e.y+(S-e.height)/2,l=(u={id:o.id,bounds:{x:e.x,y:e.y,width:e.width,height:e.height},pageIndex:n,data:i,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:r,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}).data,this.pdfViewerBase.drawSignatureWithTool&&a){u.id=a.id+"_content";var x=this.pdfViewer.add(u);a.wrapper.children.push(x.wrapper)}else this.pdfViewer.add(u);var T=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n);if(this.pdfViewer.renderDrawing(T,n),this.pdfViewerBase.signatureModule.showSignatureDialog(!1),o.className="e-pdfviewer-signatureformfields e-pv-signature-focus"===o.className?"e-pdfviewer-signatureformfields-signature e-pv-signature-focus":"e-pdfviewer-signatureformfields-signature",this.pdfViewerBase.drawSignatureWithTool&&a){var L=this.pdfViewerBase.getZoomFactor(),N=p.offsetParent.offsetParent.id.split("_")[0]+"_content";u.bounds={x:e.x*L,y:e.y*L,width:e.width*L,height:e.height*L},this.updateSignatureDataInSession(u,N)}else this.updateDataInSession(o,u.data,u.bounds,h,d);o.style.pointerEvents="none",this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(u.pageIndex,null,u,"FormField Value Change","",u,u),"SignatureImage"===u.shapeAnnotationType&&this.pdfViewer.fireSignatureAdd(u.pageIndex,u.id,u.shapeAnnotationType,u.bounds,u.opacity,null,null,l),this.pdfViewer.fireFocusOutFormField(o.name,i)}this.pdfViewerBase.signatureModule.hideSignaturePanel(),this.pdfViewerBase.drawSignatureWithTool=!1,this.pdfViewer.isInitialFieldToolbarSelection=!1},s.prototype.updateSignatureDataInSession=function(e,t){var i=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),n=JSON.parse(i);if(!c(n))for(var r=function(l){if(n[l].Key===t){var h=o.pdfViewer.formFieldCollection.findIndex(function(u){return u.id===n[l].FormField.id.split("_")[0]});if("SignatureText"===e.shapeAnnotationType?(n[l].FormField.signatureType="Text",o.pdfViewerBase.formFieldCollection[l].FormField.signatureType="Text",o.pdfViewer.nameTable[t].signatureType="Text",n[l].FormField.fontFamily="TimesRoman"===e.fontFamily?"Times New Roman":e.fontFamily,o.pdfViewerBase.formFieldCollection[l].FormField.fontFamily=e.fontFamily,o.pdfViewer.nameTable[t].fontFamily=e.fontFamily,n[l].FormField.fontSize=e.fontSize,o.pdfViewerBase.formFieldCollection[l].FormField.fontSize=e.fontSize,o.pdfViewer.nameTable[t].fontSize=e.fontSize,h>-1&&(o.pdfViewer.formFieldCollection[h].signatureType="Text")):"SignatureImage"===e.shapeAnnotationType?(n[l].FormField.signatureType="Image",o.pdfViewerBase.formFieldCollection[l].FormField.signatureType="Image",o.pdfViewer.nameTable[t].signatureType="Image",h>-1&&(o.pdfViewer.formFieldCollection[h].signatureType="Image")):(n[l].FormField.signatureType="Path",o.pdfViewerBase.formFieldCollection[l].FormField.signatureType="Path",o.pdfViewer.nameTable[t].signatureType="Path",h>-1&&(o.pdfViewer.formFieldCollection[h].signatureType="Path")),n[l].FormField.signatureBound=e.bounds,o.pdfViewerBase.formFieldCollection[l].FormField.signatureBound=e.bounds,o.pdfViewer.nameTable[t].signatureBound=e.bounds,h>-1&&(o.pdfViewer.formFieldCollection[h].signatureBound=e.bounds),"Path"===e.shapeAnnotationType){var p=ia(Cs(e.data));n[l].FormField.value=JSON.stringify(p),o.pdfViewer.nameTable[t].value=e.data,o.pdfViewer.nameTable[t.split("_")[0]].value=e.data,o.pdfViewerBase.formFieldCollection[l].FormField.value=JSON.stringify(p),h>-1&&(o.pdfViewer.formFieldCollection[h].value=JSON.stringify(p))}else n[l].FormField.value=e.data,o.pdfViewerBase.formFieldCollection[l].FormField.value=e.data,o.pdfViewer.nameTable[t.split("_")[0]].value=e.data,o.pdfViewer.nameTable[t].value=e.data,h>-1&&(o.pdfViewer.formFieldCollection[h].value=e.data);o.pdfViewer.formDesigner.updateFormFieldCollections(n[l].FormField),o.pdfViewer.formDesigner.updateFormFieldPropertiesChanges("formFieldPropertiesChange",n[l].FormField,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,"",n[l].FormField.value)}},o=this,a=0;a<n.length;a++)r(a);this.pdfViewerBase.setItemInSessionStorage(n,"_formDesigner")},s.prototype.getDefaultBoundsforSign=function(e){return{x:e.x+4,y:e.y+4,width:e.width-8,height:e.height-8}},s.prototype.getSignBounds=function(e,t,i,n,r,o,a,l,h){var u=document.getElementById((this.pdfViewer.isInitialFieldToolbarSelection?"initialIcon":"signIcon")+"_"+i+"_"+e),g=r*n-(u?parseFloat(u.style.left)*n:0)/n;return 90===t||270===t?(this.rotateAngle=0,""!==u.style.left?h?{x:r-g/n-n,y:o+g/n+n,width:a,height:l}:{x:r-g/n-n,y:o+g/n+n,width:l,height:a}:(g=10,h?{x:r-a,y:o+a,width:l,height:a}:{x:r-a-g/2,y:o+a+g,width:l,height:a})):(this.rotateAngle=0,{x:r,y:o,width:a,height:l})},s.prototype.updateSameFieldsValue=function(e){if(this.formFieldsData)for(var t=0;t<this.formFieldsData.length;t++){var i=this.formFieldsData[t];if(e.target.name===i.FieldName&&e.target.id!==i.uniqueID){var n=document.getElementById(this.formFieldsData[t].uniqueID);n?n.value=e.target.value:(i.Text=e.target.value,this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}},s.prototype.updateFormFieldsValue=function(e){var i,n,t=e.target;if(t.InsertSpaces&&!this.isKeyDownCheck){var r=parseInt(t.style.width)+parseInt(t.style.height)/2;t.style.width=r+"px",this.isKeyDownCheck=!0}if(9===e.which&&t&&("e-pdfviewer-formFields"===t.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===t.className||"e-pdfviewer-signatureformfields-signature"===t.className)){var o=t.id.split("input_")[1].split("_")[0],l=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+parseInt(o)).getElementsByClassName("e-pdfviewer-formFields"),h=!0;i=this.pdfViewer.formFieldCollections.findIndex(function(y){return y.id===t.id}),!e.shiftKey&&"Tab"===e.key&&(n=i+1<this.pdfViewer.formFieldCollections.length?this.pdfViewer.formFieldCollections[i+1]:this.pdfViewer.formFieldCollections[0]),this.pdfViewer.focusFormField(n),h=!0,e.preventDefault();for(var d=t.tabIndex+1;!h;){for(var p=0;p<l.length;p++)if(h=!1,l[p].tabIndex===d){l[p].focus(),h=!0,e.preventDefault();break}this.maintainTabIndex[o]===d&&(h=!0),d+=1}}if(e.shiftKey&&"Tab"===e.key){var u=this.pdfViewer.formFieldCollections.findIndex(function(y){return y.id===t.id});this.pdfViewer.focusFormField(u>0?this.pdfViewer.formFieldCollections[u-1]:this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length-1]),e.preventDefault()}if(e.currentTarget.classList.contains("e-pdfviewer-signatureformfields")||e.currentTarget.classList.contains("e-pdfviewer-signatureformfields-signature"))if("Enter"===e.key)for(var g=e.target,m=0;m<this.pdfViewer.formFieldCollections.length;m++)g.id===this.pdfViewer.formFieldCollections[m].id&&(this.setFocus(g.id),this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[m]));else e.preventDefault()},s.prototype.changeFormFields=function(e){this.updateDataInSession(e.target)},s.prototype.calculateSignatureBounds=function(e,t,i,n,r,o,a){var l=i/e,h=n/t,d=this.pdfViewerBase.getZoomFactor(),p=0,u=0,f=!1,g=!1,m=0,y=0;if(r)p=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:150,u=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;else{var b=o?"100%"===o.style.width?o.clientWidth:parseFloat(o.style.width):this.ConvertPointToPixel(a.LineBounds.Width),w=o?"100%"===o.style.height?o.clientHeight:parseFloat(o.style.height):this.ConvertPointToPixel(a.LineBounds.Height),S=b/w,I=w/b,x=e/t,T=t/e,L=o?o.offsetParent.offsetParent.style.transform?o.offsetParent.offsetParent.style.transform:o.style.transform:a.RotationAngle;if(S>x||I>x||Math.abs(S-I)<=1){var N=0;I>x||Math.abs(S-I)<=1?(g=!0,N=I/T):(f=!0,N=S/x),"rotate(90deg)"===L||"rotate(270deg)"===L?(p=w/d,u=b/d):(f&&(m=b/d,p=b/N/d,u=w/d),g&&(y=w/d,p=b/d,u=w/N/d))}else"rotate(90deg)"===L||"rotate(270deg)"===L?(p=w/d,u=b/d):(p=b/d,u=w/d)}var O=(e-i)/2,_=(t-n)/2;return f?(O=O/e*m,O+=(m*l-p*l)/2,_=_/t*u):g?(O=O/e*p,_=_/t*y,_+=(y*h-u*h)/2):(O=O/e*p,_=_/t*u),{currentLeftDiff:O,currentTopDiff:_,currentWidth:p*=l,currentHeight:u*=h}},s.prototype.updateSignatureAspectRatio=function(e,t,i,n){for(var o=ia(Cs(e)),a=-1,l=-1,h=-1,d=-1,p=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),g=0;g<o.length;g++){var m=o[g];if(-1===a)a=parseFloat(m.x.toString()),h=parseFloat(m.x.toString()),l=parseFloat(m.y.toString()),d=parseFloat(m.y.toString());else{var y=parseFloat(m.x.toString()),b=parseFloat(m.y.toString());a>=y&&(a=y),l>=b&&(l=b),h<=y&&(h=y),d<=b&&(d=b)}}var I=this.calculateSignatureBounds(p?p.clientWidth:650,p?p.clientHeight:300,h-a,d-l,t,i,n);if(t){var x=this.pdfViewerBase.getZoomFactor(),L=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));return{x:(parseFloat(L.style.width)/2-I.currentWidth/2)/x,y:(parseFloat(L.style.height)/2-I.currentHeight/2)/x,width:I.currentWidth,height:I.currentHeight}}return{left:I.currentLeftDiff,top:I.currentTopDiff,width:I.currentWidth,height:I.currentHeight}},s.prototype.updateDataInSession=function(e,t,i,n,r){this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=[],a=" ",h=0,d=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(d&&!this.pdfViewer.formDesignerModule){var p=JSON.parse(d);(o=p.filter(function(B){return B.uniqueID===e.id})).length>0&&(a=o[0].FieldName,h=p.filter(function(B){return B.FieldName===a}).length);for(var u=0;u<p.length;u++){var f=p[u];if(f.uniqueID===e.id||a===f.FieldName){if(e&&"text"===e.type||"password"===e.type||"textarea"===e.type){var g=e;g.classList.contains("e-pdfviewer-signatureformfields")||g.classList.contains("e-pdfviewer-signatureformfields-signature")?(t&&(f.Value=t),i&&(f.Bounds=i),n&&(f.FontFamily=n,f.FontSize=r)):(f.Text=e.value,f.Value=e.value)}else if("radio"===e.type){if(e.checked){for(var m=0;m<p.length;m++){var y=p[m];p[m].GroupName===e.name&&(p[m].Selected=!1)}if(e.value==f.Value){f.Selected=!0;break}f.Selected=!1}}else if("checkbox"===e.type){var b=e.id,w=p.filter(function(B){return B.GroupName===e.name&&"CheckBox"==B.Name});for(m=0;m<w.length;m++){(y=w[m]).Selected=!1,y.checked=!1;var S=document.getElementById(y.uniqueID);S&&b!==S.id&&(S.Selected=!1,S.checked=!1,S.style.webkitAppearance="none")}f.Selected=!!e.checked}else if("select-one"===e.type&&0===e.size)for(var I=e.options[e.selectedIndex].text,x=e.children,T=0;T<x.length;T++)x[T].text===I&&(f.SelectedValue=I);else if("select-multiple"===e.type||e.size>0){I=e.selectedOptions,f.SelectedList=[];for(var L=0;L<I.length;L++)for(x=e.children,T=0;T<x.length;T++)x[T]===I[L]&&f.SelectedList.push(T);f.SelectedValue=e.value;var N=f.TextList?f.TextList.indexOf(e.value):0;f.selectedIndex=N>-1?N:0,f.SelectedList=[f.selectedIndex]}if(e.disabled&&(f.IsReadonly=!0),this.updateFormFieldsCollection(f),0==--h)break}else e&&null!=e.getAttribute("list")&&"text"===e.type&&f.uniqueID===e.list.id&&(f.SelectedValue=e.value);this.updateFormFieldsCollection(f)}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.pdfViewerBase.setItemInSessionStorage(p,"_formfields")}if(this.pdfViewer.formDesignerModule&&e&&e.id){var O=this.pdfViewer.nameTable[e.id.split("_")[0]];if(O&&O.wrapper&&O.wrapper.children[0]){O.value=e.value;var _=Ao(O.wrapper.children[0]).topLeft;this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(_,O.wrapper.children[0],O.formFieldAnnotationType,O)}}},s.prototype.removeExistingFormFields=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),t=JSON.parse(e);if(t)for(var i=0;i<t.length;i++){if("RadioButton"===t[i].FormField.formFieldAnnotationType){var n;n=t[i].FormField.radiobuttonItem;for(var r=t[i].FormField.id.split("_")[0],o=0;o<n.length;o++){var a=n[o];a.id.split("_")[0]!==r&&this.pdfViewer.formDesignerModule.deleteFormField(a.id.split("_")[0])}}t[i].Key&&this.pdfViewer.formDesignerModule.deleteFormField(t[i].Key.split("_")[0])}},s.prototype.applyCommonProperties=function(e,t,i,n,r){var o=document.getElementById(this.pdfViewer.element.id+"input_"+t+"_"+i);if(o){var a=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t);"text"===e.type&&o.parentElement!==a&&o.parentElement.remove(),"e-pdfviewer-signatureformfields e-pv-signature-focus"!==o.className&&o.remove()}var f,g,y,l=document.getElementById("signIcon_"+t+"_"+i),h=parseFloat(e.style.left),d=parseInt(e.style.top),p=parseFloat(e.style.width),u=parseFloat(e.style.height),b=this.pdfViewerBase.getZoomFactor();l&&!r&&(f=parseFloat(l.style.width),g=parseFloat(l.style.height),"rotate(90deg)"==l.style.transform&&(l.style.transform="rotate(0deg)",l.style.left=h-(u/2-f*b)+(y=f*b)/2+"px"),"rotate(180deg)"==l.style.transform&&(l.style.transform="rotate(0deg)",l.style.left=h+"px",l.style.top=d+"px"),"rotate(270deg)"==l.style.transform&&(l.style.transform="rotate(0deg)",l.style.left=h-(u/2-(y=f*b))+y/2+"px",l.style.top=d+(p+g*b)+g*b/2+"px")),n.IsSignatureField&&this.isSignatureField?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):n.IsSignatureField?n.Value?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):e.className="e-pdfviewer-signatureformfields":"Button"!==n.Name&&(e.className="e-pdfviewer-formFields"),e.id=this.pdfViewer.element.id+"input_"+t+"_"+i,e.ariaLabel=this.pdfViewer.element.id+"input_"+t,e.style.zIndex=1e3},s.prototype.createFormFields=function(e,t,i,n,r){var o;switch(e.Name){case"Textbox":o=this.createTextBoxField(e,t,"text");break;case"Password":o=this.createTextBoxField(e,t,"password");break;case"RadioButton":o=this.createRadioBoxField(e,t,"radio");break;case"CheckBox":o=this.createRadioBoxField(e,t,"checkbox",n);break;case"DropDown":o=this.createDropDownField(e,t,i,n);break;case"ListBox":o=this.createListBoxField(e,t);break;case"InitialField":case"SignatureField":o=this.createSignatureField(e,t,i,n,r);var a=!1;0===e.Rotation&&(a=!0),e.Value&&""!==e.Value&&(this.renderExistingAnnnot(e,i,n,a),this.isSignatureRendered=!0,r++);break;case"Button":o=this.createButtonField(e,t);break;case"ink":this.pdfViewer.formDesignerModule&&e.Value&&""!==e.Value&&!this.isSignatureRendered&&this.renderExistingAnnnot(e,i,n);break;case"SignatureText":case"SignatureImage":e.Value&&""!==e.Value&&!this.isSignatureRendered&&this.renderExistingAnnnot(e,i,n)}return{currentField:o,count:r}},s.prototype.getFormFieldType=function(e){var t;switch(e.Name){case"Textbox":t="Textbox";break;case"Password":t="Password";break;case"RadioButton":t="RadioButton";break;case"CheckBox":t="CheckBox";break;case"DropDown":t="DropDown";break;case"ListBox":t="ListBox";break;case"SignatureField":t="SignatureField",e.IsInitialField&&(t="InitialField");break;case"InitialField":t="InitialField"}return t},s.prototype.createButtonField=function(e,t){var i=document.createElement("input");return e.Value&&(this.isBase64(e.Value)||this.isURL(e.Value))?(i.type="image",i.src=e.Value):i.type="button",i.className="e-pv-buttonItem",i.value=""!==e.Text?e.Text:"",i.name=e.FieldName,i},s.prototype.isBase64=function(e){return/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);base64,/.test(e)},s.prototype.isURL=function(e){try{return new URL(e),!0}catch{return!1}},s.prototype.createTextBoxField=function(e,t,i){var n;if(1!==e.Visible)return e.Multiline?(n=document.createElement("textarea")).style.resize="none":(n=document.createElement("input")).type=i,e.MaxLength>0&&(n.maxLength=e.MaxLength),this.addAlignmentPropety(e,n),n.value=""!==e.Text?e.Text:"",this.pdfViewer.enableAutoComplete||(n.autocomplete="off"),n.name=e.FieldName,n},s.prototype.checkIsReadonly=function(e,t){for(var i=!1,n=0;n<this.readOnlyCollection.length;n++)if(t.id===this.readOnlyCollection[n]){i=!0;break}if(!this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&(e.IsInitialField||e.IsSignatureField)&&(i=!0),e.IsReadonly||!this.pdfViewer.enableFormFields||i)t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent";else{var r=e.BackColor;t.style.backgroundColor="rgba("+r.R+","+r.G+","+r.B+",0.2)";var o=e.FontColor;t.style.color="rgba("+o.R+","+o.G+","+o.B+",1)"}},s.prototype.formFieldsReadOnly=function(e){var t=document.getElementsByClassName("e-pdfviewer-formFields");this.makeformFieldsReadonly(t,e);var i=document.getElementsByClassName("e-pdfviewer-signatureformfields");this.makeformFieldsReadonly(i,e)},s.prototype.makeformFieldsReadonly=function(e,t){for(var i=0;i<e.length;i++)if(e[i]){var n=e[i];t?n.disabled=!1:(n.disabled=!0,n.style.cursor="default")}},s.prototype.applyTabIndex=function(e,t,i){t.tabIndex=e.TabIndex,this.maxTabIndex=Math.max(this.maxTabIndex,t.tabIndex),-1===this.minTabIndex&&(this.minTabIndex=t.tabIndex),this.minTabIndex=Math.min(this.minTabIndex,t.tabIndex),this.maintainTabIndex[i.toString()]=this.maxTabIndex,this.maintanMinTabindex[i.toString()]=this.minTabIndex},s.prototype.checkIsRequiredField=function(e,t){if(e.IsRequired)t.required=!0,t.style.border="1px solid red";else{var i=e.BorderColor;t.style.border=e.BorderWidth,t.style.borderColor="rgba("+i.R+","+i.G+","+i.B+",1)"}"checkbox"!==t.type&&"radio"!==t.type&&this.addBorderStylePropety(e.BorderStyle,t)},s.prototype.applyDefaultColor=function(e){("button"!==e.type&&("rgba(255, 255, 255, 0.2)"===e.style.backgroundColor||"rgba(0, 0, 0, 0.2)"===e.style.backgroundColor)||"rgba(218, 234, 247, 0.2)"===e.style.backgroundColor)&&(e.style.backgroundColor="rgba(0, 20, 200, 0.2)"),"rgba(255, 255, 255, 0.2)"===e.style.color&&(e.style.color="black")},s.prototype.addAlignmentPropety=function(e,t){switch(e.Alignment){case 0:t.style.textAlign="left";break;case 1:t.style.textAlign="center";break;case 2:t.style.textAlign="right";break;case 3:t.style.textAlign="justify"}},s.prototype.addBorderStylePropety=function(e,t){switch(e){case 0:t.style.borderStyle="solid";break;case 1:t.style.borderStyle="dashed";break;case 2:case 4:t.style.borderStyle="outset";break;case 3:case 6:t.style.borderStyle="inset";break;case 5:t.style.borderStyle="dotted"}},s.prototype.createRadioBoxField=function(e,t,i,n){var r=document.createElement("input");return r.type=i,e.Selected?r.checked=!0:"checkbox"===i&&!n&&(r.style.webkitAppearance="none"),r.name=e.GroupName,r.value=e.Value,r},s.prototype.createDropDownField=function(e,t,i,n){var r=document.createElement("select"),o=e.TextList;if(e.Selected&&!n){var a=document.getElementById("editableDropdown"+t+"_"+i);a&&a.remove();var l=document.createElement("input");l.id="editableDropdown"+t+"_"+i,l.setAttribute("list",this.pdfViewer.element.id+"input_"+t+"_"+i);var h=e.LineBounds,d=e.Font;l.style.position="absolute",l.style.border="0px",this.applyPosition(l,h,d,t,e.Rotation),l.style.backgroundColor="rgba(0, 20, 200, 0.2)",l.className="e-pdfviewer-formFields",-1===e.selectedIndex&&(l.value=e.SelectedValue),n?n.appendChild(l):document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t).appendChild(l),l.addEventListener("focus",this.focusFormFields.bind(this)),l.addEventListener("blur",this.blurFormFields.bind(this)),l.addEventListener("click",this.updateFormFields.bind(this)),l.addEventListener("change",this.changeFormFields.bind(this)),l.addEventListener("keydown",this.updateFormFieldsValue.bind(this)),r=document.createElement("DATALIST")}for(var u=0;u<o.length;u++){var f=document.createElement("option");f.className="e-dropdownSelect",f.selected=e.SelectedValue===o[u]||e.selectedIndex===u,f.innerHTML=o[u],r.appendChild(f)}return r.name=e.Text,r},s.prototype.createListBoxField=function(e,t){var i=document.createElement("select"),n=e.TextList;e.MultiSelect?i.multiple=!0:(i.multiple=!1,i.size=n.length);for(var r=0;r<n.length;r++){var o=document.createElement("option");o.className="e-pdfviewer-ListBox";for(var a=0;a<e.SelectedList.length;a++)e.SelectedList[a]===r&&(o.selected=!0);o.innerHTML=n[r],i.appendChild(o)}return i.name=e.Text,i},s.prototype.createSignatureField=function(e,t,i,n,r){var o=document.createElement("input");o.type="text",o.name=e.FieldName;var a=this.pdfViewerBase.getZoomFactor(),l=document.getElementById("signIcon_"+t+"_"+i);l&&!n&&l.remove(),this.pdfViewerBase.isInitialField=e.IsInitialField;var h=this.pdfViewerBase.isInitialField?"Initial":"Sign",d=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings?19===this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width?this.pdfViewerBase.isInitialField?27:19:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width:19,p=document.createElement("span"),u=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t),f=e.LineBounds,m=this.ConvertPointToPixel(f.X),y=this.ConvertPointToPixel(f.Y),b=this.ConvertPointToPixel(f.Width),w=this.ConvertPointToPixel(f.Height),S=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height>w*a/2?w*a/2:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height:w*a/2,I=d>b*a/2?b*a/2:d,x=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize>S/2?10:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize:10,T=x>I?I/2:x>S?S/2:x;p.style.position="absolute",p.id="signIcon_"+t+"_"+i;var L=this.getAngle(t),O=this.getBounds({left:m,top:y,width:I,height:S},t);return p.style.transform="rotate("+L+"deg)",p.style.left=O.left*a+"px",p.style.top=O.top*a+"px",E.isDevice&&!this.pdfViewer.enableDesktopMode?(p.style.height="5px",p.style.width="10px",p.style.fontSize="3px"):(p.style.height=S+"px",p.style.width=I+"px",p.style.fontSize=T+"px",X()&&(p.style.fontSize=T-1+"px")),!(S+this.indicatorPaddingValue>w*a)&&!(I+this.indicatorPaddingValue>b*a)&&(p.style.padding="2px"),p.style.textAlign="center",p.style.boxSizing="content-box",p.innerHTML=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings&&this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text:h,p.style.color=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings&&this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color:"black",p.style.backgroundColor=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings&&this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor:"orange",p.style.opacity=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings&&this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity:1,c(u)||u.appendChild(p),this.addSignaturePath(e,r),o},s.prototype.addSignaturePath=function(e,t){this.isSignatureField=!1;var i=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(i)for(var n=JSON.parse(i),r=0;r<n.length;r++){var o=n[r];if(null===o.ActualFieldName&&t&&("ink"===o.Name||"SignatureField"===o.Name||"SignatureImage"===o.Name||"SignatureText"===o.Name)&&(this.pdfViewer.formDesigner?o.FieldName.split("_")[0]===e.ActualFieldName||o.FieldName.split("_")[0]===e.FieldName:o.FieldName.split("_")[0]===e.FieldName&&!c(e.ActualFieldName)&&o.Value&&""!==o.Value)&&(e.Value=o.Value,e.FontFamily=o.FontFamily,e.FontSize=o.FontSize,this.isSignatureField=!0,e.Bounds=o.LineBounds),null===o.ActualFieldName&&t&&("ink"===o.Name||"SignatureField"===o.Name||"SignatureImage"===o.Name||"SignatureText"===o.Name)&&this.pdfViewer.formDesigner?o.FieldName===e.ActualFieldName+"_"+t||o.FieldName===e.FieldName+"_"+t:(o.FieldName===e.FieldName+"_"+t||o.FieldName===e.ActualFieldName+"_"+t)&&!c(e.ActualFieldName)&&o.Value&&""!==o.Value){e.Value=o.Value,e.FontFamily=o.FontFamily,e.FontSize=o.FontSize,this.isSignatureField=!0,e.Bounds||(e.Bounds=o.LineBounds);break}}return this.isSignatureField},s.prototype.getBounds=function(e,t,i,n){var r=this.pdfViewerBase.pageSize[t];return this.getBoundsPosition(i>0?i:r.rotation,e,r,n)},s.prototype.getBoundsPosition=function(e,t,i,n){var r;if(n){switch(e){case 0:r=t;break;case 1:r={left:i.width-t.top-t.height-(t.width/2-t.height/2),top:t.left+(t.width/2-t.height/2),width:t.width,height:t.height};break;case 2:r={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 3:r={left:t.top-(t.width/2-t.height/2),top:i.height-t.left-t.width+(t.width/2-t.height/2),width:t.width,height:t.height}}r||(r=t)}else{switch(e){case 90:case 1:r={left:i.width-t.top-t.height,top:t.left,width:t.height,height:t.width};break;case 180:case 2:r={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 270:case 3:r={left:t.top,top:i.height-t.left-t.width,width:t.height,height:t.width};break;case 0:r=t}r||(r=t)}return r},s.prototype.applyPosition=function(e,t,i,n,r,o){if(t){var a=this.ConvertPointToPixel(t.X),l=this.ConvertPointToPixel(t.Y),h=this.ConvertPointToPixel(t.Width),d=this.ConvertPointToPixel(t.Height),p=0,f=this.getBounds({left:a,top:l,width:h,height:d},n,r,o);null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),p=this.ConvertPointToPixel(i.Size)),this.pdfViewerBase.setStyleToTextDiv(e,f.left,f.top,p,f.width,f.height,!1)}},s.prototype.renderExistingAnnnot=function(e,t,i,n){if(!i){var r,o=void 0,a=void 0,l=void 0,h=void 0;(r=e.Bounds&&"ink"!==e.Name?e.Bounds:e.LineBounds).x||r.y||r.width||r.height?(o=r.x,a=r.y,l=r.width,h=r.height):(o=this.ConvertPointToPixel(r.X),a=this.ConvertPointToPixel(r.Y),l=this.ConvertPointToPixel(r.Width),h=this.ConvertPointToPixel(r.Height));var d=parseFloat(e.PageIndex),u=this.updateSignatureBounds({left:o,top:a,width:l,height:h},d,n),f=void 0,g=e.FontFamily?e.FontFamily:e.fontFamily;if(this.pdfViewerBase.isSignatureImageData(e.Value))f={id:this.pdfViewer.element.id+"input_"+d+"_"+t,bounds:u,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:n?this.getAngle(d):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}};else if(this.pdfViewerBase.isSignaturePathData(e.Value)){var m;m=this.updateSignatureBounds({left:u.x,top:u.y,width:u.width,height:u.height},d,!1),f={id:this.pdfViewer.element.id+"input_"+d+"_"+t,bounds:m,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}else(f={id:this.pdfViewer.element.id+"input_"+d+"_"+t,bounds:u,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:n?this.getAngle(d):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:e.FontFamily,fontSize:e.FontSize}).fontFamily="TimesRoman"===g?"Times New Roman":g,f.fontSize=e.FontSize?e.FontSize:e.fontSize;if("SignatureField"!==e.Name&&"InitialField"!==e.Name||c(e.id)){var T=document.getElementById(f.id);T&&T.classList.contains("e-pdfviewer-signatureformfields-signature")&&this.pdfViewer.annotation.deleteAnnotationById(f.id),this.pdfViewer.add(f),T&&(this.updateDataInSession(T,f.data,f.bounds),this.pdfViewer.fireSignatureAdd(f.pageIndex,f.id,f.shapeAnnotationType,f.bounds,f.opacity,f.strokeColor,f.thickness,f.data))}else{var b=e.id,w=document.getElementById(b+"_content_html_element"),S=this.pdfViewer.nameTable[b];f.id=S.id+"_content";var I=this.pdfViewer.add(f);if(S.wrapper.children.push(I.wrapper),!c(w)&&this.isSignatureField)(x=w.children[0].children[0]).style.pointerEvents="none",x.className="e-pdfviewer-signatureformfields-signature",x.parentElement.style.pointerEvents="none";else if(!c(w)&&e.Value){var x;(x=w.children[0].children[0]).style.pointerEvents="none",x.className="e-pdfviewer-signatureformfields-signature",x.parentElement.style.pointerEvents="none"}}if(e.Bounds=f.bounds,this.pdfViewer.formDesignerModule){var L=this.pdfViewerBase.getZoomFactor();f.bounds={x:o*L,y:a*L,width:l*L,height:h*L},this.updateSignatureDataInSession(f,f.id)}var N=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+d);this.pdfViewer.renderDrawing(N,d)}},s.prototype.updateSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[t];return n?i?1===n.rotation?{x:n.width-e.top-e.height-(e.width/2-e.height/2),y:e.left+(e.width/2-e.height/2),width:e.width,height:e.height}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top-(e.width/2-e.height/2),y:n.height-e.left-e.width+(e.width/2-e.height/2),width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}:1===n.rotation?{x:n.width-e.top-e.height,y:e.left,width:e.height,height:e.width}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top,y:n.height-e.left-e.width,width:e.height,height:e.width}:{x:e.left,y:e.top,width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}},s.prototype.resetFormFields=function(){for(var e=this.pdfViewer.formFieldCollections,t=0;t<e.length;t++){var i=e[t];if(this.currentTarget=document.getElementById(i.id),"Textbox"===i.type)this.currentTarget.value=i.value;else if("RadioButton"===i.type)this.currentTarget.checked=i.value,i.value&&this.updateDataInSession(this.currentTarget);else if("DropDown"===i.type)this.currentTarget.value=i.value;else if("CheckBox"===i.type)this.currentTarget.checked=i.value;else if("SignatureField"===i.type){var n=this.pdfViewer.nameTable[i.id];n&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.updateDataInSession(this.currentTarget,"")),this.pdfViewer.remove(n),this.pdfViewer.renderDrawing())}"RadioButton"!==i.type&&"SignatureField"!==i.type&&this.updateDataInSession(this.currentTarget)}},s.prototype.clearFormFieldStorage=function(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024),this.pdfViewerBase.isStorageExceed){for(var t=window.sessionStorage.length,i=[],n=0;n<t;n++)window.sessionStorage.key(n)&&window.sessionStorage.key(n).split("_")[3]&&("formfields"===window.sessionStorage.key(n).split("_")[3]||"formDesigner"===window.sessionStorage.key(n).split("_")[3])&&(this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(n)]=window.sessionStorage.getItem(window.sessionStorage.key(n)),i.push(window.sessionStorage.key(n)));if(i)for(n=0;n<i.length;n++)window.sessionStorage.removeItem(i[n])}},s.prototype.clearFormFields=function(e){var t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t){var i;i=e?[e]:JSON.parse(t);for(var n=!0,r=0;r<i.length;r++){var o=i[r];if(e&&(o.uniqueID=e.id,o.Name=e.type),this.currentTarget=document.getElementById(o.uniqueID),"Textbox"===o.Name)this.currentTarget.value="";else if("RadioButton"===o.Name)n&&(this.currentTarget.checked=!0,this.updateDataInSession(this.currentTarget),n=!1);else if("DropDown"===o.Name)this.currentTarget.value=o.TextList[0];else if("CheckBox"===o.Name)this.currentTarget.checked=!1;else if("SignatureField"===o.Name||"InitialField"===o.Name){var a=this.pdfViewer.nameTable[o.uniqueID];"annotations"!==a.propName&&(a=this.pdfViewer.nameTable[o.uniqueID+"_content"]),a&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.currentTarget.parentElement.style.pointerEvents="",this.updateDataInSession(this.currentTarget,""),e&&(e.value="",e.signatureType=[e.signatureType],e.signatureType[0]="")),this.pdfViewer.annotation.deleteAnnotationById(a.id))}"SignatureField"!==o.Name&&"ink"!==o.Name&&"RadioButton"!==o.Name&&this.updateDataInSession(this.currentTarget)}}},s.prototype.ConvertPointToPixel=function(e){return e*(96/72)},s.prototype.destroy=function(){this.currentTarget=null,this.readOnlyCollection=[],this.pdfViewerBase&&this.pdfViewerBase.signatureModule&&this.pdfViewerBase.signatureModule.destroy()},s.prototype.getModuleName=function(){return"FormFields"},s.prototype.getTextWidth=function(e,t,i){var o,r=document.createElement("canvas").getContext("2d");return t&&(o=t+"px "+i),r.font=o||getComputedStyle(document.body).font,r.measureText(e).width},s.prototype.getFontSize=function(e){return e},s}(),YLe=function(){function s(e,t){this.isFormFieldExistingInCollection=!1,this.multilineCheckboxCheckedState=!1,this.formFieldListItemCollection=[],this.formFieldListItemDataSource=[],this.isInitialField=!1,this.isSetFormFieldMode=!1,this.increasedSize=5,this.defaultZoomValue=1,this.signatureFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isVisibilityChanged:!1,isNameChanged:!1,isPrintChanged:!1,isTooltipChanged:!1,isThicknessChanged:!1},this.initialFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isVisibilityChanged:!1,isNameChanged:!1,isPrintChanged:!1,isTooltipChanged:!1,isThicknessChanged:!1},this.textFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isAlignmentChanged:!1,isFontSizeChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelected:!1,isFontFamilyChanged:!1,isFontStyle:!1,isValueChanged:!1,isMaXLength:!1,isColorChanged:!1,isMultilineChanged:!1},this.passwordFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isAlignmentChanged:!1,isFontSizeChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelected:!1,isFontFamilyChanged:!1,isFontStyle:!1,isValueChanged:!1,isMaXLength:!1,isColorChanged:!1},this.checkBoxFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isCheckedChanged:!1},this.radioButtonFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelectedChanged:!1},this.dropdownFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isAlignmentChanged:!1,isFontSizeChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelected:!1,isFontFamilyChanged:!1,isFontStyle:!1,isColorChanged:!1,isOptionChanged:!1},this.listBoxFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isAlignmentChanged:!1,isFontSizeChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelected:!1,isFontFamilyChanged:!1,isFontStyle:!1,isColorChanged:!1,isOptionChanged:!1},this.disableSignatureClickEvent=!1,this.formFieldIndex=0,this.formFieldIdIndex=0,this.isProgrammaticSelection=!1,this.isShapeCopied=!1,this.isDrawHelper=!1,this.isFormFieldUpdated=!1,this.isPropertyDialogOpen=!1,this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.drawHelper=function(e,t,i){var n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+this.pdfViewerBase.activeElements.activePageID);if(null!==document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+this.pdfViewerBase.activeElements.activePageID)&&null!==n){var o=this.pdfViewerBase.getZoomFactor(),a=void 0,h=this.updateFormFieldInitialSize(t,e);a=this.createHtmlElement("div",{id:"FormField_helper_html_element",class:"foreign-object"}),this.isDrawHelper=!0,a.appendChild("SignatureField"===e||"InitialField"===e?this.createSignatureDialog(this.pdfViewer,t,h):"DropdownList"===e?this.createDropDownList({id:"dropdown_helper"},t):"ListBox"===e?this.createListBox({id:"listbox_helper"},t):this.createInputElement(e,t,h)),n.appendChild(a);var p=this.pdfViewerBase.getMousePosition(i);a.setAttribute("style","height:"+h.height*o+"px; width:"+h.width*o+"px;left:"+p.x*o+"px; top:"+p.y*o+"px;position:absolute;opacity: 0.5;")}},s.prototype.drawHTMLContent=function(e,t,i,n,r,o){var a=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+n),l=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+n);if(null===document.getElementById("form_field_"+t.id+"_html_element")&&null!==t&&null!==l&&a){var d=this.pdfViewerBase.getZoomFactor(),p=void 0,u=void 0;u=this.createHtmlElement("div",{id:"form_field_"+t.id+"_html_element",class:"foreign-object"}),p=this.createHtmlElement("div",{id:t.id+"_html_element",class:"foreign-object"}),t.template=p.appendChild("SignatureField"===e||"InitialField"===e?this.createSignatureDialog(r,i):"DropdownList"===e?this.createDropDownList(t,i):"ListBox"===e?this.createListBox(t,i):this.createInputElement(e,i)),this.isSetFormFieldMode=!1;var m=document.createElement("div");if(m.id=i.id+"_designer_name",m.style.fontSize=i.fontSize?i.fontSize*d+"px":10*d+"px",m.className="e-pv-show-designer-name",this.pdfViewer.designerMode?(m.innerHTML=i.name,m.style.position="absolute"):(m.innerHTML="",m.style.position="initial"),"Checkbox"===e&&E.isDevice){var y=void 0,w=(b=i.bounds).height+this.increasedSize,S=b.width+this.increasedSize;(y=F("div",{id:i.id+"_outer_div",className:"e-pv-checkbox-outer-div"})).setAttribute("style","height:"+w*d+"px; width:"+S*d+"px;left:"+b.x*d+"px; top:"+b.y*d+"px;position:absolute; opacity: 1;"),p.appendChild(m),y.addEventListener("click",this.setCheckBoxState.bind(this)),u.appendChild(p),a.appendChild(y),y.appendChild(u)}else p.appendChild(m),u.appendChild(p),a.appendChild(u);if("RadioButton"===e&&document.getElementsByClassName("e-pv-radiobtn-span").length>0)for(var x=document.getElementsByClassName("e-pv-radiobtn-span"),T=0;T<x.length;T++){var b=this.getCheckboxRadioButtonBounds(i);x[T].style.width=b.width/2+"px",x[T].style.height=b.height/2+"px",(parseInt(x[T].style.width,10)<=1||parseInt(x[T].style.height,10)<=1)&&(x[T].style.width="1px",x[T].style.height="1px",x[T].style.margin="1px")}var L=Ao(t).topLeft;if(p.setAttribute("style","Checkbox"===e&&E.isDevice?"height:"+t.actualSize.height*d+"px; width:"+t.actualSize.width*d+"px;left:"+L.x*d+"px; top:"+L.y*d+"px;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";":"height:"+t.actualSize.height*d+"px; width:"+t.actualSize.width*d+"px;left:"+L.x*d+"px; top:"+L.y*d+"px;position:absolute;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";"),this.updateFormDesignerFieldInSessionStorage(L,t,e,i),("SignatureField"===e||"InitialField"===e)&&i.value){var O=this.pdfViewer.nameTable[o+"_content"].value,_=O.indexOf("base64")>-1?"Image":O.startsWith("M")&&O.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type";this.pdfViewer.formFieldsModule.drawSignature(_,O,t.template,i.fontFamily)}this.pdfViewer.fireFormFieldAddEvent("formFieldAdd",{name:i.name,id:i.id,value:i.value,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,color:i.color,backgroundColor:i.backgroundColor,alignment:i.alignment,isReadonly:i.isReadonly,visibility:i.visibility,maxLength:i.maxLength,isRequired:i.isRequired,isPrint:i.isPrint,rotation:i.rotateAngle,tooltip:i.tooltip,borderColor:i.borderColor,thickness:i.thickness,options:i.options,pageNumber:i.pageNumber,isChecked:i.isChecked,isSelected:i.isSelected},this.pdfViewerBase.activeElements.activePageID)}else L=Ao(t).topLeft,this.updateFormDesignerFieldInSessionStorage(L,t,e,i);return t.template},s.prototype.updateFormDesignerFieldInSessionStorage=function(e,t,i,n){var r=this.pdfViewerBase.getZoomFactor(),o={id:t.id,lineBound:{X:e.x*r,Y:e.y*r,Width:t.actualSize.width*r,Height:t.actualSize.height*r},name:n.name,zoomValue:r,pageNumber:n.pageNumber,value:n.value,formFieldAnnotationType:i,isMultiline:n.isMultiline,signatureType:n.signatureType,signatureBound:n.signatureBound,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontColor:this.getRgbCode(n.color),borderColor:this.getRgbCode(n.borderColor),thickness:n.thickness,backgroundColor:this.getRgbCode(n.backgroundColor),textAlign:n.alignment,isChecked:n.isChecked,isSelected:n.isSelected,isReadonly:n.isReadonly,font:{isBold:n.font.isBold,isItalic:n.font.isItalic,isStrikeout:n.font.isStrikeout,isUnderline:n.font.isUnderline},selectedIndex:n.selectedIndex,radiobuttonItem:null,option:n.options?n.options:[],visibility:n.visibility,maxLength:n.maxLength,isRequired:n.isRequired,isPrint:n.isPrint,rotation:n.rotateAngle,tooltip:n.tooltip,insertSpaces:n.insertSpaces};if("RadioButton"===o.formFieldAnnotationType&&(o.radiobuttonItem=[],o.radiobuttonItem.push({id:t.id,lineBound:{X:e.x*r,Y:e.y*r,Width:t.actualSize.width*r,Height:t.actualSize.height*r},name:n.name,zoomValue:r,pageNumber:n.pageNumber,value:n.value,formFieldAnnotationType:i,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontColor:this.getRgbCode(n.color),borderColor:this.getRgbCode(n.borderColor),thickness:n.thickness,backgroundColor:this.getRgbCode(n.backgroundColor),textAlign:n.alignment,isChecked:n.isChecked,isSelected:n.isSelected,isReadonly:n.isReadonly,visibility:n.visibility,maxLength:n.maxLength,isRequired:n.isRequired,isPrint:n.isPrint,rotation:0,tooltip:n.tooltip})),!this.getRadioButtonItem(o,n)){for(var l=0;l<this.pdfViewerBase.formFieldCollection.length;l++)this.pdfViewerBase.formFieldCollection[l].Key===o.id&&(this.pdfViewerBase.formFieldCollection.splice(l,1),this.pdfViewerBase.formFieldCollection.push({Key:t.id,FormField:o}),this.isFormFieldExistingInCollection=!0);this.isFormFieldExistingInCollection||this.pdfViewerBase.formFieldCollection.push({Key:t.id,FormField:o}),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.isFormFieldExistingInCollection=!1,this.pdfViewerBase.enableFormFieldButton(this.pdfViewerBase.formFieldCollection.length>0)}},s.prototype.getRadioButtonItem=function(e,t){var i=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(i){for(var n=JSON.parse(i),r=!1,o=0;o<n.length;o++){var a=n[o],l=void 0;if("RadioButton"===e.formFieldAnnotationType&&e.radiobuttonItem&&a.FormField.radiobuttonItem)for(var h=0;h<a.FormField.radiobuttonItem.length;h++){if(a.FormField.radiobuttonItem[h].id===e.id){l={lineBound:e.lineBound,id:e.id,name:e.name,zoomValue:e.zoomValue,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(t.color),borderColor:this.getRgbCode(t.borderColor),thickness:t.thickness,backgroundColor:this.getRgbCode(t.backgroundColor),textAlign:e.textAlign,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip},a.FormField.radiobuttonItem.splice(h,1),a.FormField.radiobuttonItem.push(l),c(this.pdfViewerBase.formFieldCollection[o])||this.pdfViewerBase.formFieldCollection[o].FormField.name===a.FormField.name&&(this.pdfViewerBase.formFieldCollection[o].FormField.radiobuttonItem=a.FormField.radiobuttonItem,r=!0);break}if(e.formFieldAnnotationType===a.FormField.formFieldAnnotationType&&e.name===a.FormField.name){l={lineBound:e.lineBound,id:e.id,name:e.name,zoomValue:e.zoomValue,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(t.color),borderColor:this.getRgbCode(t.borderColor),thickness:t.thickness,backgroundColor:this.getRgbCode(t.backgroundColor),textAlign:e.textAlign,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip};for(var d=!1,p=0;p<a.FormField.radiobuttonItem.length;p++)if(a.FormField.radiobuttonItem[p].id===l.id){a.FormField.radiobuttonItem[p]=l,d=!0;break}if(d||a.FormField.radiobuttonItem.push(l),!c(this.pdfViewerBase.formFieldCollection[o])){this.pdfViewerBase.formFieldCollection[o].FormField.radiobuttonItem=a.FormField.radiobuttonItem,r=!0;for(var u=0;u<this.pdfViewerBase.formFieldCollection.length;u++)this.pdfViewerBase.formFieldCollection[u].Key===l.id&&this.pdfViewerBase.formFieldCollection.splice(u,1)}}}}r&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}return r},s.prototype.getRgbCode=function(e){if(!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){var t=this.nameToHash(e);""!=t&&(e=t)}var i=e.split(",");c(i[1])&&(i=(e=this.getValue(e,"rgba")).split(","));var n=parseInt(i[0].split("(")[1]),r=parseInt(i[1]),o=parseInt(i[2]),a=100*parseFloat(i[3]);return isNaN(a)&&(a=0),{r:n,g:r,b:o,a}},s.prototype.nameToHash=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",yellow:"#ffff00",yellowgreen:"#9acd32",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkred:"#8b0000",darksalmon:"#e9967a",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",indigo:"#4b0082",ivory:"#fffff0",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",pink:"#ffc0cb",plum:"#dda0dd",steelblue:"#4682b4",violet:"#ee82ee",powderblue:"#b0e0e6",purple:"#800080",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0"};return typeof t[e.toLowerCase()]<"u"?t[e.toLowerCase()]:""},s.prototype.getValue=function(e,t){if(t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0])return i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e)),"rgba"===t?this.convertToRgbString(i):"hex"===t||"hexa"===t?(n=this.rgbToHex(i),"hex"===t?n.slice(0,7):n):"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null";e=this.roundValue(e);var r=this.hexToRgb(e);return("rgb"===t||"hsv"===t)&&(r=r.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(r):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,r)):"hex"===t?e.slice(0,7):"a"===t?r[3].toString():"null"},s.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(function(t,i){return 3!==i?parseInt(t,10):parseFloat(t)})},s.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},s.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},s.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,r=e.length;n<r;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e},s.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(t),n},s.prototype.rgbToHsv=function(e,t,i,n){e/=255,t/=255,i/=255;var a,l,r=Math.max(e,t,i),o=Math.min(e,t,i),h=r,d=r-o;if(l=0===r?0:d/r,r===o)a=0;else{switch(r){case e:a=(t-i)/d+(t<i?6:0);break;case t:a=(i-e)/d+2;break;case i:a=(e-t)/d+4}a/=6}var p=[Math.round(360*a),Math.round(1e3*l)/10,Math.round(1e3*h)/10];return c(n)||p.push(n),p},s.prototype.hsvToRgb=function(e,t,i,n){var r,o,a,l,h,d,p,u;if(i/=100,0==(t/=100))return r=o=a=i,[Math.round(255*r),Math.round(255*o),Math.round(255*a),n];switch(d=i*(1-t),p=i*(1-t*(h=(e/=60)-(l=Math.floor(e)))),u=i*(1-t*(1-h)),l){case 0:r=i,o=u,a=d;break;case 1:r=p,o=i,a=d;break;case 2:r=d,o=i,a=u;break;case 3:r=d,o=p,a=i;break;case 4:r=u,o=d,a=i;break;default:r=i,o=d,a=p}var f=[Math.round(255*r),Math.round(255*o),Math.round(255*a)];return c(n)||f.push(n),f},s.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(c(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},s.prototype.updateCanvas=function(e,t){if(null!=t);else{t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);var i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getZoomRatio(i);if(t){var r=this.pdfViewerBase.pageSize[e].width,o=this.pdfViewerBase.pageSize[e].height;t.width=r*n,t.height=o*n,t.style.width=r*i+"px",t.style.height=o*i+"px"}}this.pdfViewer.drawing.refreshCanvasDiagramLayer(t,e)},s.prototype.rerenderFormFields=function(e){var t=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(i){var n=JSON.parse(i),r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),o=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+e);if(null!==n&&null!==o&&null!==r)for(var a=0;a<n.length;a++){var l=n[a].FormField;if(l.pageNumber===e+1&&!document.getElementById("form_field_"+l.id+"_html_element")){var d=this.pdfViewer.nameTable[n[a].Key.split("_")[0]],p=d.wrapper.children[0];if(p){if("RadioButton"===l.formFieldAnnotationType)for(var u=0;u<l.radiobuttonItem.length;u++)d=this.pdfViewer.nameTable[l.radiobuttonItem[u].id.split("_")[0]],l.radiobuttonItem[u]=this.renderFormFieldsInZooming(p=d.wrapper.children[0],l.radiobuttonItem[u],d,t),this.pdfViewerBase.formFieldCollection[a].FormField.radiobuttonItem[u].lineBound=l.radiobuttonItem[u].lineBound,this.pdfViewerBase.formFieldCollection[a].FormField.radiobuttonItem[u].zoomValue=t;else{var f=this.renderFormFieldsInZooming(p,l,d,t);l.lineBound=f.lineBound,l.signatureBound&&(l.signatureBound=f.signatureBound,this.pdfViewerBase.formFieldCollection[a].FormField.signatureBound=l.signatureBound,this.pdfViewer.nameTable[p.id.split("_")[0]+"_content"].signatureBound=l.signatureBound),this.pdfViewerBase.formFieldCollection[a].FormField.lineBound=l.lineBound,this.pdfViewerBase.formFieldCollection[a].FormField.zoomValue=t}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}if(this.pdfViewerBase.isFocusField&&this.pdfViewerBase.focusField){var g=document.getElementById(this.pdfViewerBase.focusField.id);g&&("SignatureField"!==this.pdfViewerBase.focusField.type&&"InitialField"!==this.pdfViewerBase.focusField.type||!this.pdfViewer.formDesignerModule?g.focus():g.parentElement.focus(),this.pdfViewerBase.isFocusField=!1,this.pdfViewerBase.focusField=[])}}}},s.prototype.renderFormFieldsInZooming=function(e,t,i,n){if(e){var r=void 0,o=void 0;o=this.createHtmlElement("div",{id:"form_field_"+e.id+"_html_element",class:"foreign-object"}),r=this.createHtmlElement("div",{id:e.id+"_html_element",class:"foreign-object"}),"SignatureField"===t.formFieldAnnotationType||"InitialField"===t.formFieldAnnotationType?(this.disableSignatureClickEvent=!0,i.value=t.value,i.signatureType=t.signatureType,i.signatureBound=t.signatureBound,e.template=r.appendChild(this.createSignatureDialog(this.pdfViewer,i)),this.disableSignatureClickEvent=!1):e.template=r.appendChild("DropdownList"===t.formFieldAnnotationType?this.createDropDownList(e,i):"ListBox"===t.formFieldAnnotationType?this.createListBox(e,i):this.createInputElement(t.formFieldAnnotationType,i));var h=document.createElement("div");h.id=i.id+"_designer_name",h.style.fontSize=i.fontSize?i.fontSize*n+"px":10*n+"px",h.className="e-pv-show-designer-name",this.pdfViewer.designerMode?(h.innerHTML=i.name,h.style.position="absolute"):(h.innerHTML="",h.style.position="initial"),r.appendChild(h),o.appendChild(r);var d=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(t.pageNumber-1));d.appendChild(o),"RadioButton"===i.formFieldAnnotationType&&document.getElementsByClassName("e-pv-radiobtn-span").length>0&&(this.getCheckboxRadioButtonBounds(i),document.getElementsByClassName("e-pv-radiobtn-span"));var f=Ao(i.wrapper.children[0]).topLeft;if("Checkbox"===t.formFieldAnnotationType&&E.isDevice){var g=void 0,m=e.actualSize.height+this.increasedSize,y=e.actualSize.width+this.increasedSize;(g=F("div",{id:e.id+"_outer_div",className:"e-pv-checkbox-outer-div"})).setAttribute("style","height:"+m*n+"px; width:"+y*n+"px;left:"+f.x*n+"px; top:"+f.y*n+"px;position:absolute; opacity: 1;"),g.appendChild(o),g.addEventListener("click",this.setCheckBoxState.bind(this)),d.appendChild(g),r.setAttribute("style","height:"+e.actualSize.height*n+"px; width:"+e.actualSize.width*n+"px;left:"+f.x*n+"px; top:"+f.y*n+"px;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";")}else r.setAttribute("style","height:"+e.actualSize.height*n+"px; width:"+e.actualSize.width*n+"px;left:"+f.x*n+"px; top:"+f.y*n+"px;position:absolute;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";");if(t.lineBound={X:f.x*n,Y:f.y*n,Width:e.actualSize.width*n,Height:e.actualSize.height*n},t.signatureBound&&i.wrapper.children[1]){var w=i.wrapper.children[1].bounds;t.signatureBound.x=w.x*n,t.signatureBound.y=w.y*n,t.signatureBound.width=w.width*n,t.signatureBound.height=w.height*n}}return t},s.prototype.updateFormFieldInitialSize=function(e,t){var i=this.pdfViewerBase.getZoomFactor();switch(t){case"Textbox":case"PasswordField":case"DropdownList":e.width=200*i,e.height=24*i;break;case"SignatureField":case"InitialField":e.width=200*i,e.height=63*i;break;case"Checkbox":case"RadioButton":e.width=20*i,e.height=20*i;break;case"ListBox":e.width=198*i,e.height=66*i}return{width:e.width,height:e.height}},s.prototype.updateHTMLElement=function(e){var t=e.wrapper.children[0],i=this.pdfViewerBase.getZoomFactor();if(t){var n=document.getElementById(t.id+"_html_element");if(!c(n)){var r=Ao(e.wrapper.children[0]).topLeft;n.setAttribute("style","height:"+t.actualSize.height*i+"px; width:"+t.actualSize.width*i+"px;left:"+r.x*i+"px; top:"+r.y*i+"px;position:absolute;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";");var o=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if("RadioButton"===e.formFieldAnnotationType){var a=n.firstElementChild.firstElementChild,l=n.firstElementChild.firstElementChild.lastElementChild;t.actualSize.width>t.actualSize.height?(n.firstElementChild.style.display="inherit",a.style.width=a.style.height=t.actualSize.height*i+"px",l.style.width=l.style.height=t.actualSize.height-10+"px"):(n.firstElementChild.style.display="flex",a.style.width=a.style.height=t.actualSize.width*i+"px",l.style.width=l.style.height=t.actualSize.width-10+"px")}if("Checkbox"===e.formFieldAnnotationType&&(a=n.firstElementChild.firstElementChild,l=n.firstElementChild.firstElementChild.lastElementChild.firstElementChild,t.actualSize.width>t.actualSize.height?(n.firstElementChild.style.display="inherit",a.style.width=a.style.height=t.actualSize.height*i+"px",l.style.width=t.actualSize.height/5*i+"px",l.style.height=t.actualSize.height/2.5*i+"px",l.style.left=t.actualSize.height/2.5*i+"px",l.style.top=t.actualSize.height/5*i+"px"):(n.firstElementChild.style.display="flex",a.style.width=a.style.height=t.actualSize.width*i+"px",l.style.width=t.actualSize.width/5*i+"px",l.style.height=t.actualSize.width/2.5*i+"px",l.style.left=t.actualSize.width/2.5*i+"px",l.style.top=t.actualSize.width/5*i+"px"),-1!==l.className.indexOf("e-pv-cb-checked"))){var d=parseInt(a.style.width,10);l.style.borderWidth=d>20?"3px":d<=15?"1px":"2px"}if("SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){var p=n.firstElementChild.firstElementChild,u=p.nextElementSibling,f=this.getBounds(u);this.updateSignatureandInitialIndicator(e,{height:t.actualSize.height,width:t.actualSize.width,signatureIndicatorSettings:{text:u.textContent,width:f.width,height:f.height},initialIndicatorSettings:{text:u.textContent,width:f.width,height:f.height}},p)}for(var m=JSON.parse(o),y=0;y<m.length;y++)if("RadioButton"===m[y].FormField.formFieldAnnotationType){for(var b=0;b<m[y].FormField.radiobuttonItem.length;b++)if(t.id===m[y].FormField.radiobuttonItem[b].id){this.pdfViewerBase.formFieldCollection[y].FormField.radiobuttonItem[b].lineBound={X:r.x*i,Y:r.y*i,Width:t.actualSize.width*i,Height:t.actualSize.height*i},this.pdfViewerBase.formFieldCollection[y].FormField.radiobuttonItem[b].zoomValue=i;break}}else if(m[y].Key===t.id){if(m[y].FormField.lineBound={X:r.x*i,Y:r.y*i,Width:t.actualSize.width*i,Height:t.actualSize.height*i},m[y].FormField.signatureBound){var w=r.x*i+t.actualSize.width*i/2,S=r.y*i+t.actualSize.height*i/2;S-=m[y].FormField.signatureBound.height/2,m[y].FormField.signatureBound.x=w-=m[y].FormField.signatureBound.width/2,m[y].FormField.signatureBound.y=S,this.pdfViewerBase.formFieldCollection[y].FormField.signatureBound=m[y].FormField.signatureBound,this.pdfViewer.nameTable[t.id.split("_")[0]+"_content"].signatureBound=m[y].FormField.signatureBound}this.pdfViewerBase.formFieldCollection[y].FormField.lineBound=m[y].FormField.lineBound}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}},s.prototype.getCheckboxRadioButtonBounds=function(e,t,i){var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor(),r=0,o=0,a="";return t?t.width>t.height?(r=o=t.height*n,a="inherit"):(r=o=t.width*n,a="flex"):e&&(e.bounds.width>e.bounds.height?(r=o=e.bounds.height*n,a="inherit"):(r=o=e.bounds.width*n,a="flex")),{width:r,height:o,display:a}},s.prototype.updateSessionFormFieldProperties=function(e){for(var t=this.pdfViewerBase.getZoomFactor(),i=e.wrapper.children[0],n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),r=JSON.parse(n),o=0;o<r.length;o++)if("RadioButton"===r[o].FormField.formFieldAnnotationType){for(var a=0;a<r[o].FormField.radiobuttonItem.length;a++)if(i.id===r[o].FormField.radiobuttonItem[a].id){var l={id:i.id,lineBound:{X:i.bounds.x*t,Y:i.bounds.y*t,Width:i.bounds.width*t,Height:i.bounds.height*t},name:e.name,zoomValue:t,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(e.color),backgroundColor:this.getRgbCode(e.backgroundColor),borderColor:this.getRgbCode(e.borderColor),thickness:e.thickness,textAlign:e.alignment,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip};r[o].FormField.radiobuttonItem[a]=l,this.pdfViewerBase.formFieldCollection[o]&&this.pdfViewerBase.formFieldCollection[o].FormField&&this.pdfViewerBase.formFieldCollection[o].FormField.radiobuttonItem[a]&&(this.pdfViewerBase.formFieldCollection[o].FormField.radiobuttonItem[a]=l);break}}else if(r[o].Key===i.id){var h={id:i.id,lineBound:{X:i.bounds.x*t,Y:i.bounds.y*t,Width:i.bounds.width*t,Height:i.bounds.height*t},name:e.name,zoomValue:t,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(e.color),backgroundColor:this.getRgbCode(e.backgroundColor),borderColor:this.getRgbCode(e.borderColor),thickness:e.thickness,textAlign:e.alignment,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,font:{isBold:e.font.isBold,isItalic:e.font.isItalic,isStrikeout:e.font.isStrikeout,isUnderline:e.font.isUnderline},selectedIndex:[],radiobuttonItem:null,option:e.options?e.options:[],visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip};if("SignatureField"===r[o].FormField.formFieldAnnotationType||"InitialField"===r[o].FormField.formFieldAnnotationType){var d=e,p={id:i.id,lineBound:{X:i.bounds.x*t,Y:i.bounds.y*t,Width:i.bounds.width*t,Height:i.bounds.height*t},name:e.name,zoomValue:t,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(e.color),backgroundColor:this.getRgbCode(e.backgroundColor),borderColor:this.getRgbCode(e.borderColor),thickness:e.thickness,textAlign:e.alignment,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,font:{isBold:e.font.isBold,isItalic:e.font.isItalic,isStrikeout:e.font.isStrikeout,isUnderline:e.font.isUnderline},selectedIndex:[],radiobuttonItem:null,option:e.options?e.options:[],visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip,signatureType:e.signatureType,signatureBound:d.signatureBound};r[o].FormField=p,this.pdfViewerBase.formFieldCollection[o].FormField=p}else r[o].FormField=h,this.pdfViewerBase.formFieldCollection[o].FormField=h;break}this.pdfViewerBase.enableFormFieldButton(this.pdfViewerBase.formFieldCollection.length>0),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},s.prototype.createSignatureDialog=function(e,t,i,n){this.isInitialField=!c(t.isInitialField)&&t.isInitialField,this.pdfViewerBase.isInitialField=this.isInitialField,this.pdfViewerBase.isInitialField=t.isInitialField;var r=F("div");r.className="foreign-object",r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.addEventListener("focus",this.focusFormFields.bind(this)),r.addEventListener("blur",this.blurFormFields.bind(this));var o=F("div");o.style.width="100%",o.style.height="100%",o.style.position="absolute",o.style.backgroundColor="transparent",c(t.thickness)||(o.className="e-pdfviewer-signatureformfields-signature",o.style.border=t.thickness+"px solid #303030"),c(t.value)||""===t.value?(o.className="e-pdfviewer-signatureformfields",o.style.pointerEvents=""):(o.className="e-pdfviewer-signatureformfields-signature",o.style.pointerEvents="none"),o.id=t.id,o.disabled=t.isReadonly,r.appendChild(o);var h,a=this.pdfViewer.signatureFieldSettings,l=this.pdfViewer.initialFieldSettings;a.signatureIndicatorSettings||(a.signatureIndicatorSettings={opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"}),a.signatureDialogSettings||(a.signatureDialogSettings={displayMode:Bi.Draw|Bi.Text|Bi.Upload,hideSaveSignature:!1});var I,p=(h=t.isInitialField?t.signatureIndicatorSettings?t.signatureIndicatorSettings:l.initialIndicatorSettings:t.signatureIndicatorSettings?t.signatureIndicatorSettings:a.signatureIndicatorSettings).width?h.width:t.signatureIndicatorSettings&&t.signatureIndicatorSettings.width?t.signatureIndicatorSettings.width:19===this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width?t.isInitialField?30:25:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width,f=h.height?h.height:t.signatureIndicatorSettings&&t.signatureIndicatorSettings.height?t.signatureIndicatorSettings.height:10===this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height?13:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height,g=h.backgroundColor?"orange"===h.backgroundColor?"#FFE48559":h.backgroundColor:t.signatureIndicatorSettings&&t.signatureIndicatorSettings.backgroundColor?t.signatureIndicatorSettings.backgroundColor:"#FFE48559",y=t.bounds?t.bounds.width:i.width,b=t.bounds?t.bounds.height:i.height,w=f>b/2?b/2:f,S=p>y/2?y/2:p;I=t.signatureIndicatorSettings&&t.signatureIndicatorSettings.fontSize?t.signatureIndicatorSettings.fontSize>w/2?10:t.signatureIndicatorSettings.fontSize:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize>w/2?10:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize;var x=F("span");l.initialIndicatorSettings||(l.initialIndicatorSettings={opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"}),l.initialDialogSettings||(l.initialDialogSettings={displayMode:Bi.Draw|Bi.Text|Bi.Upload,hideSaveSignature:!1});var T=t.signatureIndicatorSettings?t.signatureIndicatorSettings.text:null;"InitialField"==t.formFieldAnnotationType?(x.id="initialIcon_"+t.pageIndex+"_"+this.setFormFieldIdIndex(),this.setIndicatorText(x,T,this.pdfViewer.initialFieldSettings.initialIndicatorSettings.text,"Initial")):(x.style.height="",x.style.width="",x.id="signIcon_"+t.pageIndex+"_"+this.setFormFieldIdIndex(),this.setIndicatorText(x,T,this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text,"Sign")),x.style.overflow="hidden",x.style.whiteSpace="nowrap",x.style.padding="2px 3px 2px 1px",x.style.boxSizing="border-box";var L=this.pdfViewerBase.getZoomFactor();x.style.textAlign="left",x.style.fontSize=I*L+"px";var N=this.getBounds(x);x.style.backgroundColor=g,x.style.color=h.color,x.style.opacity=h.opacity,x.style.height=f,x.style.width=p,x.style.position="absolute";var O=this.setHeightWidth(y,S,N.width+I,L);x.style.width=O+"px";var _=this.setHeightWidth(b,w,N.height,L);return x.style.height=_+"px",n||r.appendChild(x),this.updateSignInitialFieldProperties(t,t.isInitialField,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),!c(t.tooltip)&&""!=t.tooltip&&this.setToolTip(t.tooltip,r),this.updateSignatureFieldProperties(t,r,n),r},s.prototype.setIndicatorText=function(e,t,i,n){e.innerHTML=t||i||n},s.prototype.getBounds=function(e){var t=e.cloneNode(!0);t.style.height="",t.style.width="",t.id=t.id+"_clonedElement",document.body.appendChild(t);var n=document.getElementById(t.id).getBoundingClientRect();return document.body.removeChild(t),n},s.prototype.updateSignatureandInitialIndicator=function(e,t,i){if(null!==i){var n=i.getBoundingClientRect(),r=this.pdfViewerBase.getZoomFactor(),o=i.nextElementSibling,a=void 0,l=void 0;if("SignatureField"===e.formFieldAnnotationType&&(a=e.signatureIndicatorSettings,l=t.signatureIndicatorSettings),"InitialField"===e.formFieldAnnotationType&&(a=e.signatureIndicatorSettings?e.signatureIndicatorSettings:this.pdfViewer.initialFieldSettings.initialIndicatorSettings,l=t.initialIndicatorSettings),o.style.width="",o.style.height="",l&&a){void 0!==l.text&&(this.setIndicatorText(o,l.text,l.text,"Sign"),a.text=l.text),l.fontSize&&(o.style.fontSize=l.fontSize>e.height/2?10:l.fontSize*r+"px",a.fontSize=l.fontSize);var h=this.getBounds(o);if(l.color&&(o.style.color=l.color,a.color=this.nameToHash(l.color)),l.backgroundColor&&(o.style.backgroundColor=l.backgroundColor,a.backgroundColor=this.nameToHash(l.backgroundColor)),l.opacity&&(o.style.opacity=l.opacity,a.opacity=l.opacity),l.width||t.width||l.text){var d=this.setHeightWidth(n.width,l.width,h.width,r);o.style.width=d+"px",a.width=d}if(l.height||t.height||l.text){var p=this.setHeightWidth(n.height,l.height,h.height,r);o.style.height=p+"px",a.height=p}}return this.updateSignatureFieldProperties(e,i,e.isPrint),e.signatureIndicatorSettings&&a&&(e.signatureIndicatorSettings=a),e}},s.prototype.setHeightWidth=function(e,t,i,n){return e/2>t&&i<t?t*n:i<=e/2?i*n:e/2*n},s.prototype.createDropDownList=function(e,t,i){var n=F("div");n.className="foreign-object",n.style.position="absolute",n.style.width="100%",n.style.height="100%";var r=document.createElement("select");r.addEventListener("change",this.dropdownChange.bind(this)),r.addEventListener("focus",this.focusFormFields.bind(this)),r.addEventListener("blur",this.blurFormFields.bind(this)),r.id=t.id,r.name="editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id,r.setAttribute("aria-label","editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id),r.className="e-pv-formfield-dropdown",r.style.width="100%",r.style.height="100%",r.style.position="absolute",this.updateDropdownFieldSettingsProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode);var o=t.options?t.options:[];this.updateDropdownListProperties(t,r,i);for(var a=0;a<o.length;a++){var l=document.createElement("option");l.className="e-pv-formfield-dropdown",l.value=o[a].itemValue,l.text=o[a].itemName,this.updateDropdownListProperties(t,l),r.appendChild(l)}return r.selectedIndex=c(t.selectedIndex)?0:t.selectedIndex,n.appendChild(r),!c(t.tooltip)&&""!=t.tooltip&&this.setToolTip(t.tooltip,n),n},s.prototype.createListBox=function(e,t,i){var n=F("div");n.className="foreign-object",n.style.position="absolute",n.style.width="100%",n.style.height="100%";var r=document.createElement("select");r.addEventListener("click",this.listBoxChange.bind(this)),r.addEventListener("focus",this.focusFormFields.bind(this)),r.addEventListener("blur",this.blurFormFields.bind(this)),r.id=t.id,r.name="editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id,r.setAttribute("aria-label","editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id),r.className="e-pv-formfield-listbox",r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.multiple=!0,this.updatelistBoxFieldSettingsProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode);var o=t.options?t.options:[];this.updateListBoxProperties(t,r,i);for(var a=0;a<o.length;a++){var l=document.createElement("option");if(l.className="e-pv-formfield-listbox",l.value=o[a].itemValue,l.text=o[a].itemName,!c(t.selectedIndex))for(var h=0;h<t.selectedIndex.length;h++)a===t.selectedIndex[h]&&(l.selected=!0);r.appendChild(l)}return n.appendChild(r),!c(t.tooltip)&&""!=t.tooltip&&this.setToolTip(t.tooltip,n),n},s.prototype.createInputElement=function(e,t,i,n){var r=this.pdfViewerBase.getZoomFactor(),o=F("div");o.className="foreign-object",o.style.position="absolute",o.style.width="100%",o.style.height="100%";var a,l,h,d=F("input"),p=F("textarea");if(d.id=t.id,d.setAttribute("aria-label",this.pdfViewer.element.id+"formfilldesigner"),d.style.position="absolute","Textbox"===e)t.isMultiline?(p=this.createTextAreaElement(d.id),this.updateTextFieldSettingProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updateTextboxProperties(t,p,n)):(d=this.createTextboxElement(d.id),this.updateTextFieldSettingProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updateTextboxProperties(t,d,n));else if("Checkbox"==e){var u=n?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();o.style.display="flex",o.style.alignItems="center";var g=this.getCheckboxRadioButtonBounds(t,i,n);if(o.style.display=g.display,(a=F("label",{className:"e-pv-checkbox-container"})).style.width=t.bounds?t.bounds.width*u+"px":g.width+"px",a.style.height=t.bounds?t.bounds.height*u+"px":g.height+"px",a.style.cursor=this.isDrawHelper?"crosshair":"pointer",l=F("div",{className:"e-pv-checkbox-div"}),E.isDevice||(l.addEventListener("click",this.setCheckBoxState.bind(this)),l.addEventListener("focus",this.focusFormFields.bind(this)),l.addEventListener("blur",this.blurFormFields.bind(this))),l.id=t.id+"_input",(h=F("span",t.isChecked?{className:"e-pv-checkbox-span e-pv-cb-checked"}:{className:"e-pv-checkbox-span e-pv-cb-unchecked"})).id=t.id+"_input_span",a.id=t.id+"_input_label",h.style.width=g.width/5+"px",h.style.height=g.height/2.5+"px",h.style.left=g.width/2.5+"px",h.style.top=g.height/5+"px",-1!==h.className.indexOf("e-pv-cb-checked")){var m=parseInt(a.style.width,10);h.style.borderWidth=m>20?"3px":m<=15?"1px":"2px"}if(n&&(l.style.backgroundColor="rgb(218, 234, 247)",l.style.border="1px solid #303030",l.style.visibility="visible",l.style.height="100%",l.style.width="100%",l.style.position="absolute",-1!==h.className.indexOf("e-pv-cb-checked"))){h.style.border="solid #303030",h.style.position="absolute",h.style.borderLeft="transparent",h.style.borderTop="transparent",h.style.transform="rotate(45deg)";var y=parseInt(a.style.width,10);h.style.borderWidth=y>20?"3px":y<=15?"1px":"2px"}d.type="checkbox",d.style.margin="0px",d.style.width=g.width+"px",d.style.height=g.height+"px",n||this.updateCheckBoxFieldSettingsProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updateCheckboxProperties(t,l),d.appendChild(a),a.appendChild(l),l.appendChild(h),n&&(d.style.outlineWidth=t.thickness+"px",d.style.outlineColor=t.borderColor,d.style.outlineStyle="solid",d.style.background=t.backgroundColor)}else"PasswordField"==e?(d.type="password",d.className="e-pv-formfield-input",d.style.width="100%",d.style.height="100%",d.style.borderStyle="solid",d.addEventListener("click",this.inputElementClick.bind(this)),d.addEventListener("focus",this.focusFormFields.bind(this)),d.addEventListener("blur",this.blurFormFields.bind(this)),d.addEventListener("change",this.getTextboxValue.bind(this)),this.updatePasswordFieldSettingProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updatePasswordFieldProperties(t,d,n)):(o.style.display="flex",o.style.alignItems="center",g=this.getCheckboxRadioButtonBounds(t,i,n),o.style.display=g.display,(a=F("label",{className:"e-pv-radiobtn-container"})).style.width=g.width+"px",a.style.height=g.height+"px",a.style.display="table",a.style.verticalAlign="middle",a.style.borderWidth=t.thickness+"px",a.style.boxShadow=t.borderColor+" 0px 0px 0px "+t.thickness+"px",a.style.borderRadius="50%",a.style.visibility=t.visibility,a.style.cursor=this.isDrawHelper?"crosshair":"pointer",a.style.background=t.backgroundColor,(h=F("span",{className:"e-pv-radiobtn-span"})).id=t.id+"_input_span",h.style.width=Math.floor(g.width/2)+"px",h.style.height=Math.floor(g.height/2)+"px",h.style.margin=r<1&&g.width<=20&&g.height<=20?Math.round(parseInt(a.style.width)/3.5)+"px":Math.round(parseInt(a.style.width)/4)+"px",a.addEventListener("click",this.setRadioButtonState.bind(this)),a.id=t.id+"_input_label",d.type="radio",n||(d.className="e-pv-radio-btn"),d.style.margin="0px",d.addEventListener("click",function(w){w.stopPropagation()}),d.addEventListener("focus",this.focusFormFields.bind(this)),d.addEventListener("blur",this.blurFormFields.bind(this)),d.style.width=g.width+"px",d.style.height=g.height+"px",this.updateRadioButtonFieldSettingProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updateRadioButtonProperties(t,d),a.appendChild(d),a.appendChild(h),t.isRequired&&(a.style.boxShadow="red 0px 0px 0px "+t.thickness+"px"));return o.appendChild(("Checkbox"===e||"RadioButton"===e)&&!n||"Checkbox"===e&&n?a:t.isMultiline?p:d),!c(t.tooltip)&&""!=t.tooltip&&this.setToolTip(t.tooltip,"RadioButton"===e?a:o),this.isDrawHelper=!1,o},s.prototype.listBoxChange=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(i[n].Key.split("_")[0]===e.currentTarget.id.split("_")[0]||this.pdfViewer.nameTable[e.currentTarget.id.split("_")[0]].name===i[n].FormField.name){if(i[n].Key.split("_")[0]!==e.currentTarget.id.split("_")[0])for(var r=document.getElementById(i[n].Key.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild,o=0;o<e.currentTarget.options.length;o++)r.options[o].selected=e.currentTarget.options[o].selected;i[n].FormField.selectedIndex=[];for(var a=this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex,l=0;l<e.currentTarget.selectedOptions.length;l++){var h=e.currentTarget.selectedOptions[l].index,d=0;this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex&&0!==this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex.length&&(this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex[0]>=0&&(d=this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex.pop()),this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex.push(d));var p=i[n].FormField.option[d].itemValue;i[n].FormField.selectedIndex.push(h),this.pdfViewer.nameTable[i[n].Key.split("_")[0]].selectedIndex=i[n].FormField.selectedIndex,this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex=i[n].FormField.selectedIndex;var u=i[n].FormField.option[h].itemValue;this.pdfViewerBase.formFieldCollection[n].FormField.value=u,this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[n].FormField),this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",i[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,p,u)}this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[n].FormField,"FormField Value Change","",a,this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()},s.prototype.dropdownChange=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(i[n].Key.split("_")[0]===e.target.id.split("_")[0]||this.pdfViewer.nameTable[e.target.id.split("_")[0]].name===i[n].FormField.name){this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex=[];var r=document.getElementById(e.currentTarget.id).selectedIndex,o=0;0!==i[n].FormField.selectedIndex.length&&(o=i[n].FormField.selectedIndex.pop(),i[n].FormField.selectedIndex.push(o));var a=i[n].FormField.option[o].itemValue;this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex.push(r),i[n].FormField.selectedIndex=this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex,this.pdfViewer.nameTable[i[n].Key.split("_")[0]].selectedIndex=this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex;var l=i[n].FormField.option[r].itemValue;this.pdfViewerBase.formFieldCollection[n].FormField.value=l,i[n].Key.split("_")[0]!==e.target.id.split("_")[0]&&(document.getElementById(i[n].Key.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild.selectedIndex=r),this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[n].FormField),this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",i[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,l),this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[n].FormField,"FormField Value Change","",o,r)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()},s.prototype.setCheckBoxState=function(e){if(E.isDevice?(""===e.target.className||"e-pv-checkbox-outer-div"===e.target.className||"e-pv-checkbox-div"===e.target.className)&&"e-pv-checkbox-outer-div"===e.currentTarget.className&&!this.pdfViewer.designerMode:!this.pdfViewer.designerMode){var i=!1,n=void 0;if(n=E.isDevice?document.getElementById(e.target.id.split("_")[0]+"_input"):e.target,"undefined_input"!==e.target.id&&!this.pdfViewer.nameTable[e.target.id.split("_")[0]].isReadonly&&!this.pdfViewer.designerMode){n&&n.firstElementChild&&"e-pv-checkbox-span e-pv-cb-checked"===n.firstElementChild.className?(n.firstElementChild.classList.remove("e-pv-cb-checked"),n.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked"),i=!1):"e-pv-checkbox-span e-pv-cb-checked"===n.className?(n.classList.remove("e-pv-cb-checked"),n.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked"),i=!1):(n.firstElementChild.classList.remove("e-pv-cb-unchecked"),n.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-checked"),i=!0);var r=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(i&&-1!==n.firstElementChild.className.indexOf("e-pv-cb-checked")){var o=parseInt(e.target.parentElement.style.width,10);n.firstElementChild.style.borderWidth=o>20?"3px":o<=15?"1px":"2px"}for(var a=JSON.parse(r),l=0;l<a.length;l++)if(a[l].Key.split("_")[0]===e.target.id.split("_")[0]||this.pdfViewer.nameTable[e.target.id.split("_")[0]].name===a[l].FormField.name){this.pdfViewer.nameTable[a[l].Key.split("_")[0]].isChecked=i;var h=this.pdfViewerBase.formFieldCollection[l].FormField.isChecked;if(a[l].FormField.isChecked=i,this.pdfViewerBase.formFieldCollection[l].FormField.isChecked=a[l].FormField.isChecked,a[l].Key.split("_")[0]!==e.target.id.split("_")[0]){var d=document.getElementById(a[l].Key.split("_")[0]+"_input").firstElementChild;i?(d.classList.contains("e-pv-cb-unchecked")&&d.classList.remove("e-pv-cb-unchecked"),d.classList.add("e-pv-cb-checked")):(d.classList.contains("e-pv-cb-checked")&&d.classList.remove("e-pv-cb-checked"),d.classList.add("e-pv-cb-unchecked"))}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[l].FormField),this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",a[l].FormField,this.pdfViewerBase.formFieldCollection[l].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,h,i),this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[l].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[l].FormField,"FormField Value Change","",h,i)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()}}},s.prototype.setCheckedValue=function(e,t){t?(e.firstElementChild.classList.remove("e-pv-cb-unchecked"),e.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-checked")):(e.firstElementChild.classList.remove("e-pv-cb-checked"),e.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked"))},s.prototype.setRadioButtonState=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(null!=i[n].FormField.radiobuttonItem){for(var o=void 0,a=void 0,l=0;l<i[n].FormField.radiobuttonItem.length;l++)i[n].FormField.radiobuttonItem[l].id.split("_")[0]===e.currentTarget.id.split("_")[0]?(this.pdfViewer.nameTable[e.currentTarget.id.split("_")[0]].isSelected=!0,i[n].FormField.radiobuttonItem[l].isSelected=!0,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l].isSelected||(o=this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l]),this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l].isSelected=!0,this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",i[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0)):this.pdfViewer.nameTable[e.currentTarget.id.split("_")[0]].name===i[n].FormField.radiobuttonItem[l].name&&(this.pdfViewer.nameTable[i[n].FormField.radiobuttonItem[l].id.split("_")[0]].isSelected=!1,i[n].FormField.radiobuttonItem[l].isSelected=!1,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l].isSelected&&(a=this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l]),this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l].isSelected=i[n].FormField.radiobuttonItem[l].isSelected,this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",i[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1)),this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l]);(null!=o||null!=a)&&this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[n].FormField,"FormField Value Change","",o,a)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()},s.prototype.getTextboxValue=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(i[n].Key.split("_")[0]===e.target.id.split("_")[0]||this.pdfViewer.nameTable[e.target.id.split("_")[0]].name===i[n].FormField.name){var r=this.pdfViewerBase.formFieldCollection[n].FormField.value;if(i[n].FormField.value=e.target.value,this.pdfViewer.nameTable[i[n].Key.split("_")[0]].value=i[n].FormField.value,this.pdfViewerBase.formFieldCollection[n].FormField.value=i[n].FormField.value,i[n].Key.split("_")[0]!==e.target.id.split("_")[0]){var o=document.getElementById(i[n].Key.split("_")[0]+"_content_html_element");o&&o.firstElementChild&&o.firstElementChild.firstElementChild&&(o.firstElementChild.firstElementChild.value=i[n].FormField.value)}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[n].FormField),this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",this.pdfViewerBase.formFieldCollection[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,r,e.target.value),this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[n].FormField,"FormField Value Change","",r,e.target.value)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()},s.prototype.inputElementClick=function(e){e.target.focus()},s.prototype.updateFormFieldSessions=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields"),t=JSON.parse(e);t&&this.pdfViewer.formFieldCollection.length===t.length&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formfields")},s.prototype.focusFormFields=function(e){var t=e.target;(t||"e-pv-checkbox-outer-div"===t.className)&&(t.style.boxShadow="0 0 5px "+("transparent"===t.style.borderColor?"#000000":t.style.borderColor)),!t||"e-pv-radiobtn-container"!==t.className&&"e-pv-radio-btn"!==t.className&&"e-pv-radiobtn-span"!==t.className||"transparent"!==t.style.borderColor||(t.parentElement.style.boxShadow="0px 0px 5px "+("transparent"===t.style.borderColor?"#000000":t.style.borderColor)),t&&("e-pv-radiobtn-container"===t.className||"e-pv-radio-btn"===t.className||"e-pv-radiobtn-span"===t.className)&&(t.parentElement.style.boxShadow=t.style.borderColor+"0px 0px 5px "+t.style.borderWidth)},s.prototype.blurFormFields=function(e){var t=e.target;t.style.boxShadow="","radio"===t.type&&"transparent"===t.style.borderColor&&(t.parentElement.style.boxShadow="0px 0px 0px "+("transparent"===t.style.borderColor?"#000000":t.style.borderColor)),"radio"===t.type&&(t.parentElement.style.boxShadow=t.style.borderColor+"0px 0px 0px "+t.style.borderWidth)},s.prototype.setTextBoxFontStyle=function(e){return 1===e?{isBold:!0}:2===e?{isItalic:!0}:3===e?{isBold:!0,isItalic:!0}:4===e?{isUnderline:!0}:5===e?{isBold:!0,isUnderline:!0}:6===e?{isUnderline:!0,isItalic:!0}:7===e?{isBold:!0,isItalic:!0,isUnderline:!0}:8===e?{isStrikeout:!0}:9===e?{isBold:!0,isStrikeout:!0}:10===e?{isItalic:!0,isStrikeout:!0}:11===e?{isBold:!0,isItalic:!0,isStrikeout:!0}:12===e?{isUnderline:!0,isStrikeout:!0}:13===e?{isUnderline:!0,isStrikeout:!0,isBold:!0}:14===e?{isItalic:!0,isUnderline:!0,isStrikeout:!0}:15===e?{isBold:!0,isItalic:!0,isUnderline:!0,isStrikeout:!0}:{isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1}},s.prototype.addFormField=function(e,t,i,n){var r={thickness:1,bounds:{x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},fontFamily:c(t.fontFamily)?"Helvetica":t.fontFamily,fontSize:c(t.fontSize)?10:t.fontSize,color:c(t.color)?"black":t.color,backgroundColor:c(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,alignment:c(t.alignment)?"left":t.alignment,isReadonly:!!t.isReadOnly&&t.isReadOnly,rotateAngle:t.rotateAngle,isTransparent:t.isTransparent};switch(r.fontStyle=c(t.fontStyle)?"None":t.fontStyle,r.visibility=c(t.visibility)?"visible":t.visibility,r.value=c(t.value)?"":t.value,r.isRequired=!!t.isRequired&&t.isRequired,r.isPrint=t.isPrint,r.pageNumber=c(t.pageNumber)?this.pdfViewerBase.currentPageNumber:t.pageNumber,r.pageIndex=r.pageNumber-1,r.font=t.font,r.id=n,i&&this.setFormFieldIndex(),e){case"Textbox":r.formFieldAnnotationType=e,r.isMultiline=t.isMultiline,r.name=c(t.name)?"Textbox"+this.formFieldIndex:t.name,r.insertSpaces=t.insertSpaces,r.maxLength=t.maxLength,r.thickness=c(t.thickness)?1:t.thickness,r.borderColor=c(t.borderColor)?"#303030":t.borderColor,t.font?r.font=t.font:this.pdfViewer.textFieldSettings.fontStyle&&(r.font=this.setTextBoxFontStyle(this.pdfViewer.textFieldSettings.fontStyle));break;case"Password":r.formFieldAnnotationType="PasswordField",r.name=c(t.name)?"Password"+this.formFieldIndex:t.name,r.maxLength=t.maxLength,r.thickness=c(t.thickness)?1:t.thickness,r.borderColor=c(t.borderColor)?"#303030":t.borderColor;break;case"DropDown":r.formFieldAnnotationType="DropdownList",r.name=c(t.name)?"Dropdown"+this.formFieldIndex:t.name,r.options=t.options?t.options:[];for(var o=0;o<this.pdfViewer.formFieldCollection.length;o++)if("DropdownList"===(a=this.pdfViewer.formFieldCollection[o]).formFieldAnnotationType&&a.name===r.name){r.options=a.options;break}r.selectedIndex=c(t.selectedIndex)?[0]:t.selectedIndex,r.thickness=c(t.thickness)?1:t.thickness,r.borderColor=c(t.borderColor)?"#303030":t.borderColor;break;case"ListBox":for(r.formFieldAnnotationType=e,r.name=c(t.name)?"List Box"+this.formFieldIndex:t.name,r.options=t.options?t.options:[],o=0;o<this.pdfViewer.formFieldCollection.length;o++){var a;if((a=this.pdfViewer.formFieldCollection[o]).formFieldAnnotationType===e&&a.name===r.name){r.options=a.options;break}}r.selectedIndex=t.selectedIndex,r.thickness=c(t.thickness)?1:t.thickness,r.borderColor=c(t.borderColor)?"#303030":t.borderColor;break;case"CheckBox":r.formFieldAnnotationType="Checkbox",r.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},r.backgroundColor=c(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,r.isReadonly=!!t.isReadOnly&&t.isReadOnly,r.name=c(t.name)?"Check Box"+this.formFieldIndex:t.name,r.isChecked=!!t.isChecked&&t.isChecked,r.visibility=t.visibility?t.visibility:"visible",r.isRequired=!!t.isRequired&&t.isRequired,r.thickness=c(t.thickness)?1:t.thickness,r.borderColor=c(t.borderColor)?"#303030":t.borderColor;break;case"RadioButton":r.formFieldAnnotationType=e,r.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},r.backgroundColor=c(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,r.isReadonly=!!t.isReadOnly&&t.isReadOnly,r.name=c(t.name)?"Radio Button"+this.formFieldIndex:t.name,r.isSelected=!!t.isSelected&&t.isSelected,r.visibility=t.visibility?t.visibility:"visible",r.isRequired=!!t.isRequired&&t.isRequired,r.thickness=c(t.thickness)?1:t.thickness,r.borderColor=c(t.borderColor)?"#303030":t.borderColor;break;case"SignatureField":r.formFieldAnnotationType=e,r.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},r.backgroundColor=c(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,r.fontSize=c(t.fontSize)?10:t.fontSize,r.fontStyle=c(t.fontStyle)?"None":t.fontStyle,r.name=c(t.name)?"Signature"+this.formFieldIndex:t.name,r.isRequired=!!t.isRequired&&t.isRequired,r.isReadonly=!!t.isReadOnly&&t.isReadOnly,r.thickness=c(t.thickness)?1:t.thickness;var l=t.signatureIndicatorSettings?t.signatureIndicatorSettings:t.initialIndicatorSettings;r.signatureIndicatorSettings=l?{opacity:l.opacity?l.opacity:1,backgroundColor:l.backgroundColor?l.backgroundColor:"orange",width:l.width?l.width:19,height:l.height?l.height:10,fontSize:l.fontSize?l.fontSize:10,text:l.text?l.text:null,color:l.color?l.color:"black"}:null;break;case"InitialField":r.formFieldAnnotationType=e,r.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},r.backgroundColor=c(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,r.fontSize=c(t.fontSize)?10:t.fontSize,r.thickness=c(t.thickness)?1:t.thickness,r.fontStyle=c(t.fontStyle)?"None":t.fontStyle,r.name=c(t.name)?"Initial"+this.formFieldIndex:t.name,r.isRequired=!!t.isRequired&&t.isRequired,r.isReadonly=!!t.isReadOnly&&t.isReadOnly,r.isInitialField=!0;var h=t.initialIndicatorSettings?t.initialIndicatorSettings:t.signatureIndicatorSettings;r.signatureIndicatorSettings=h?{opacity:h.opacity?h.opacity:1,backgroundColor:h.backgroundColor?h.backgroundColor:"orange",width:h.width?h.width:19,height:h.height?h.height:10,fontSize:h.fontSize?h.fontSize:10,text:h.text?h.text:null,color:h.color?h.color:"black"}:null}r.tooltip=c(t.tooltip)?"":t.tooltip,this.setFormFieldIndex();var d=null;return i?this.addFieldCollection(r):(this.pdfViewerBase.disableTextSelectionMode(),d=this.drawFormField(r)),d},s.prototype.addFieldCollection=function(e){var t={id:ta(),name:e.name,value:e.value,type:e.formFieldAnnotationType,isReadOnly:e.isReadonly,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color,backgroundColor:e.backgroundColor,isMultiline:e.isMultiline,alignment:e.alignment,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,isSelected:e.isSelected,insertSpaces:e.insertSpaces,isChecked:e.isChecked,tooltip:e.tooltip,bounds:e.bounds,thickness:e.thickness,pageIndex:e.pageIndex,borderColor:e.borderColor,signatureIndicatorSettings:e.signatureIndicatorSettings};this.pdfViewer.formFieldCollections.push(t)},s.prototype.drawFormField=function(e){var t=this.pdfViewer.add(e),i=this.pdfViewer.formFieldCollections.findIndex(function(l){return l.id===t.id});i>-1&&this.isFormFieldUpdated&&this.updateNodeBasedOnCollections(t,this.pdfViewer.formFieldCollections[i]);var r=this.pdfViewer.formFieldCollection.findIndex(function(l){return l.id===t.id});r<0?this.pdfViewer.formFieldCollection.push(t):r>-1&&(this.pdfViewer.formFieldCollection[r]=t);var o={id:t.id,name:t.name,value:t.value,type:t.formFieldAnnotationType,isReadOnly:t.isReadonly,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,color:t.color,backgroundColor:t.backgroundColor,isMultiline:t.isMultiline,alignment:t.alignment,visibility:t.visibility,maxLength:t.maxLength,isRequired:t.isRequired,isPrint:t.isPrint,isSelected:t.isSelected,isChecked:t.isChecked,tooltip:t.tooltip,bounds:t.bounds,pageIndex:t.pageIndex,thickness:t.thickness,borderColor:t.borderColor,signatureIndicatorSettings:t.signatureIndicatorSettings,insertSpaces:t.insertSpaces};return i>-1?this.pdfViewer.formFieldCollections[i]=o:this.pdfViewer.formFieldCollections.push(o),this.drawHTMLContent(t.formFieldAnnotationType,t.wrapper.children[0],t,e.pageNumber-1,this.pdfViewer)},s.prototype.updateNodeBasedOnCollections=function(e,t){e.name=t.name,e.value=t.value,e.isReadonly=t.isReadOnly,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle.toString(),e.color=t.color,e.backgroundColor=t.backgroundColor,e.alignment=t.alignment,e.visibility=t.visibility,e.maxLength=t.maxLength,e.isRequired=t.isRequired,e.isPrint=t.isPrint,e.isSelected=t.isSelected,e.isChecked=t.isChecked,e.tooltip=t.tooltip,e.thickness=t.thickness,e.borderColor=t.borderColor},s.prototype.setFormFieldMode=function(e,t){switch(this.pdfViewer.selectedItems&&!c(this.pdfViewer.selectedItems.annotations)&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewerBase.activeElements&&!c(this.pdfViewerBase.activeElements.activePageID)&&this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),e){case"Textbox":this.activateTextboxElement(e),this.isSetFormFieldMode=!0;break;case"Password":this.activatePasswordField("PasswordField"),this.isSetFormFieldMode=!0;break;case"CheckBox":this.activateCheckboxElement("Checkbox"),this.isSetFormFieldMode=!0;break;case"RadioButton":this.activateRadioButtonElement(e),this.isSetFormFieldMode=!0;break;case"DropDown":this.activateDropDownListElement("DropdownList",t),this.isSetFormFieldMode=!0;break;case"ListBox":this.activateListboxElement(e,t),this.isSetFormFieldMode=!0;break;case"SignatureField":case"InitialField":this.activateSignatureBoxElement(e),this.isSetFormFieldMode=!0}},s.prototype.resetFormField=function(e){var t=this.getFormField(e);if(t){switch(t.formFieldAnnotationType){case"Textbox":this.resetTextboxProperties(t);break;case"PasswordField":this.resetPasswordProperties(t);break;case"Checkbox":this.resetCheckboxProperties(t);break;case"RadioButton":this.resetRadioButtonProperties(t);break;case"DropdownList":this.resetDropdownListProperties(t);break;case"ListBox":this.resetListBoxProperties(t);break;case"SignatureField":case"InitialField":this.resetSignatureTextboxProperties(t)}this.updateSessionFormFieldProperties(t)}},s.prototype.selectFormField=function(e){var t=this.getFormField(e);t&&(this.isProgrammaticSelection=!0,this.pdfViewer.select([t.id]),this.isProgrammaticSelection=!1)},s.prototype.updateFormField=function(e,t){var i=this.getFormField(e);if(this.isFormFieldUpdated=!0,i){if(!i.isReadonly||!c(t.isReadOnly)&&!t.isReadOnly)switch(i.formFieldAnnotationType){case"Textbox":case"PasswordField":case"DropdownList":case"ListBox":case"SignatureField":case"InitialField":var n=document.getElementById(i.id+"_content_html_element");n?this.formFieldPropertyChange(i,t,n=n.firstElementChild.firstElementChild):this.updateFormFieldsInCollections(e,t);break;case"RadioButton":var r=document.getElementById(i.id+"_content_html_element");r?this.formFieldPropertyChange(i,t,r=r.firstElementChild.firstElementChild.firstElementChild):this.updateFormFieldsInCollections(e,t);break;case"Checkbox":var o=document.getElementById(i.id+"_content_html_element");o?this.formFieldPropertyChange(i,t,o=o.firstElementChild.firstElementChild.lastElementChild):this.updateFormFieldsInCollections(e,t)}}else this.updateFormFieldsInCollections(e,t)},s.prototype.updateFormFieldsInCollections=function(e,t){for(var i=this.pdfViewer.formFieldCollections,n=0;n<i.length;n++){var r=i[n];if(r.id===e){this.updateFormFieldData(r,t);var o=this.pdfViewer.formFieldCollections.findIndex(function(a){return a.id===e});this.pdfViewer.formFieldCollections[o]=r}}},s.prototype.updateFormFieldData=function(e,t){if(t.name&&e.name!==t.name&&(e.name=t.name),("SignatureField"!==e.type||"InitialField"!==e.type)&&(t.thickness&&e.thickness!==t.thickness&&(e.thickness=t.thickness),t.borderColor)){var i=this.colorNametoHashValue(t.borderColor);e.borderColor!==i&&(e.borderColor=i)}if(t.backgroundColor){var n=this.colorNametoHashValue(t.backgroundColor);e.backgroundColor!==n&&(e.backgroundColor=n)}if(!c(t.isReadOnly)&&e.isReadonly!==t.isReadOnly&&(e.isReadOnly=t.isReadOnly),!c(t.isRequired)&&e.isRequired!==t.isRequired&&(e.isRequired=t.isRequired),!c(t.isPrint)&&e.isPrint!==t.isPrint&&(e.isPrint=t.isPrint),t.visibility&&e.visibility!==t.visibility&&(e.visibility=t.visibility),t.tooltip&&e.tooltip!==t.tooltip&&(e.tooltip=t.tooltip),"Checkbox"===e.type&&!c(t.isChecked)&&e.isChecked===t.isChecked&&(e.isChecked=t.isChecked),"RadioButton"===e.type&&!c(t.isSelected)&&e.isSelected===t.isSelected&&(e.isSelected=t.isSelected),("DropdownList"===e.type||"ListBox"===e.type)&&t.options&&(e.options=t.options),"Textbox"===e.type||"SignatureField"===e.type||"InitialField"===e.type||"DropdownList"===e.type||"ListBox"===e.type||"PasswordField"===e.type){if(t.value&&e.value!==t.value&&(e.value=t.value),t.fontSize&&e.fontSize!==t.fontSize&&(e.fontSize=t.fontSize),t.color){var r=this.colorNametoHashValue(t.color);e.color!==r&&(e.color=r)}"SignatureField"!==e.type&&(t.alignment&&e.alignment!==t.alignment&&(e.alignment=t.alignment),t.maxLength&&e.maxLength!==t.maxLength&&(e.maxLength=t.maxLength)),"PasswordField"!==e.type&&(t.fontFamily&&e.fontFamily!==t.fontFamily&&(e.fontFamily=t.fontFamily),t.fontStyle&&e.fontStyle!==t.fontStyle&&(e.fontStyle=t.fontStyle))}},s.prototype.getSignatureBackground=function(e){return e.includes("#")&&(e.length>8?e=e.slice(0,-2)+"60":e+="60"),e},s.prototype.formFieldPropertyChange=function(e,t,i){var I,x,n=!1,r=!1,o=!1,a=!1,l=!1,h=!1,d=!1,p=!1,u=!1,f=!1,g=!1,m=!1,y=!1,b=!1,w=!1,S=!1,T=this.pdfViewerBase.getZoomFactor();if(t.name){e.name!==t.name&&(S=!0),e.name=t.name;var L=document.getElementById(e.id+"_designer_name");L.innerHTML=e.name,L.style.fontSize=e.fontSize?e.fontSize*T+"px":10*T+"px",i.name=t.name,this.pdfViewer.nameTable[e.id.split("_")[0]].name=e.name,S&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,I,x,S)}if(e.formFieldAnnotationType&&(c(t.thickness)||(e.thickness!==t.thickness&&(p=!0,I=e.thickness,x=t.thickness),i.style.borderWidth=t.thickness.toString()+"px",e.thickness=t.thickness,this.pdfViewer.nameTable[e.id.split("_")[0]].thickness=t.thickness,p&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,p,!1,!1,!1,!1,!1,!1,!1,I,x)),t.borderColor)){var N=this.colorNametoHashValue(t.borderColor);e.borderColor!==N&&(d=!0,I=e.borderColor,x=N),e.borderColor=N,i.style.borderColor=N,"RadioButton"===e.formFieldAnnotationType&&(i.parentElement.style.boxShadow=N+" 0px 0px 0px "+e.thickness+"px",this.setToolTip(t.tooltip,i.parentElement)),this.pdfViewer.nameTable[e.id.split("_")[0]].borderColor=N,d&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,d,!1,!1,!1,!1,!1,!1,!1,!1,I,x)}if(t.backgroundColor){var O=this.colorNametoHashValue(t.backgroundColor);O=this.getSignatureBackground(O),e.backgroundColor!==O&&(h=!0,I=e.backgroundColor,x=O),e.backgroundColor=O,"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType?i.parentElement.style.background=O:i.style.background=O,"RadioButton"===e.formFieldAnnotationType&&(i.parentElement.style.background=e.backgroundColor),this.pdfViewer.nameTable[e.id.split("_")[0]].backgroundColor=O,h&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,h,!1,!1,!1,!1,!1,!1,!1,!1,!1,I,x)}if(t.bounds){e.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height};var _=this.pdfViewer.nameTable[e.id.split("_")[0]];_.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},_.wrapper.bounds=new $i(t.bounds.X,t.bounds.Y,t.bounds.Width,t.bounds.Height),this.pdfViewer.drawing.nodePropertyChange(_,{bounds:{x:_.wrapper.bounds.x,y:_.wrapper.bounds.y,width:_.wrapper.bounds.width,height:_.wrapper.bounds.height}});var B=_.wrapper.children[0],q=Ao(_.wrapper.children[0]).topLeft,W=document.getElementById(B.id+"_html_element");c(W)||W.setAttribute("style","height:"+B.actualSize.height*T+"px; width:"+B.actualSize.width*T+"px;left:"+q.x*T+"px; top:"+q.y*T+"px;position:absolute;transform:rotate("+(B.rotateAngle+B.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(B.visible?"visible":"hidden")+";opacity:"+B.style.opacity+";")}if(c(t.isReadOnly)||(e.isReadonly!==t.isReadOnly&&(f=!0,I=e.isReadonly,x=t.isReadOnly),e.isReadonly=t.isReadOnly,this.setReadOnlyToElement(e,i,t.isReadOnly),this.setReadOnlyToFormField(e,t.isReadOnly),this.pdfViewer.nameTable[e.id.split("_")[0]].isReadonly=t.isReadOnly,f&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,f,!1,!1,!1,!1,!1,I,x)),c(t.isRequired)||(e.isRequired!==t.isRequired&&(y=!0,I=e.isRequired,x=t.isRequired),e.isRequired=t.isRequired,this.setRequiredToElement(e,i,t.isRequired),this.setRequiredToFormField(e,t.isRequired),this.pdfViewer.nameTable[e.id.split("_")[0]].isRequired=t.isRequired,y&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,y,!1,!1,I,x)),t.visibility){if(e.visibility!==t.visibility&&(g=!0,I=e.visibility,x=t.visibility),e.visibility=t.visibility,i.style.visibility=t.visibility,"RadioButton"===e.formFieldAnnotationType&&(i.parentElement.style.visibility=e.visibility),"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){i.parentElement.style.visibility=e.visibility;var j=this.pdfViewer.nameTable[e.id.split("_")[0]+"_content"],G=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),Y=JSON.parse(G),U=this.getFormFiledIndex(e.id.split("_")[0]);"hidden"===e.visibility?j&&this.hideSignatureValue(e,j,U,Y):j&&this.showSignatureValue(e,I,j,U,Y)}this.pdfViewer.nameTable[e.id.split("_")[0]].visibility=t.visibility,g&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,g,!1,!1,!1,!1,I,x)}if(c(t.isPrint)||(e.isPrint!==t.isPrint&&(b=!0,I=e.isPrint,x=t.isPrint),e.isPrint=t.isPrint,this.pdfViewer.nameTable[e.id.split("_")[0]].isPrint=t.isPrint,b&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,b,!1,I,x)),t.tooltip&&(e.tooltip!==t.tooltip&&(w=!0,I=e.tooltip,x=t.tooltip),e.tooltip=t.tooltip,c(t.tooltip)||this.setToolTip(t.tooltip,"RadioButton"===e.formFieldAnnotationType?i.parentElement:i),this.pdfViewer.nameTable[e.id.split("_")[0]].tooltip=t.tooltip,w&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,w,I,x)),("Checkbox"===e.formFieldAnnotationType&&!c(t.isChecked)||t.isChecked)&&(e.isChecked!==this.checkboxCheckedState&&(n=!0,I=e.isChecked,x=t.isChecked),e.isChecked=t.isChecked,i.checked=t.isChecked,this.setCheckedValue(i,t.isChecked),this.pdfViewer.nameTable[e.id.split("_")[0]].isChecked=t.isChecked,n&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,n,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,I,x)),("RadioButton"===e.formFieldAnnotationType&&!c(t.isSelected)||t.isSelected)&&(e.isSelected!==t.isSelected&&(n=!0,I=e.isSelected,x=this.checkboxCheckedState),e.isSelected=t.isSelected,i.checked=t.isSelected,this.pdfViewer.nameTable[e.id.split("_")[0]].isSelected=t.isSelected,n&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,n,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,I,x)),("DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType)&&t.options&&(e.options=t.options,this.updateDropDownListDataSource(e,i),this.pdfViewer.nameTable[e.id.split("_")[0]].options=e.options),"Textbox"===e.formFieldAnnotationType||"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType||"DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType||"PasswordField"===e.formFieldAnnotationType){if(t.value){if(e.value!==t.value&&(n=!0,I=e.value,x=t.value),e.value=t.value,"DropdownList"!==e.formFieldAnnotationType&&"ListBox"!==e.formFieldAnnotationType)i.value=t.value;else if("DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType)for(var J=0;J<i.options.length;J++)i.options[J].text===t.value&&(i.options.selectedIndex=J);this.pdfViewer.nameTable[e.id.split("_")[0]].value=t.value,n&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,n,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,I,x)}if(t.fontSize&&(e.fontSize!==t.fontSize&&(o=!0,I=e.fontSize,x=t.fontSize),e.fontSize=t.fontSize,i.style.fontSize=t.fontSize*T+"px",this.pdfViewer.nameTable[e.id.split("_")[0]].fontSize=t.fontSize,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,o,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,I,x)),t.color){var $=this.colorNametoHashValue(t.color);e.color!==$&&(l=!0,I=e.color,x=$),e.color=$,i.style.color=$,this.pdfViewer.nameTable[e.id.split("_")[0]].color=$,l&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,l,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,I,x)}if("SignatureField"!==e.formFieldAnnotationType&&(t.alignment&&(e.alignment!==t.alignment&&(u=!0,I=e.alignment,x=t.alignment),e.alignment=t.alignment,i.style.textAlign=t.alignment,this.pdfViewer.nameTable[e.id.split("_")[0]].alignment=t.alignment,u&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,u,!1,!1,!1,!1,!1,!1,I,x)),t.maxLength&&(e.maxLength!==t.maxLength&&(m=!0,I=e.maxLength,x=t.maxLength),e.maxLength=t.maxLength,i.maxLength=t.maxLength,this.pdfViewer.nameTable[e.id.split("_")[0]].maxLength=t.maxLength,m&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,m,!1,!1,!1,I,x))),"PasswordField"!==e.formFieldAnnotationType){t.fontFamily&&(e.fontFamily!==t.fontFamily&&(r=!0,I=e.fontFamily,x=t.fontFamily),e.fontFamily=t.fontFamily,i.style.fontFamily=t.fontFamily,this.pdfViewer.nameTable[e.id.split("_")[0]].fontFamily=t.fontFamily,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,r,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,I,x));var ye="",fe="";t.fontStyle&&(ye+=e.font.isBold?"Bold, ":"",ye+=e.font.isItalic?"Italic, ":"",ye+=e.font.isStrikeout?"Strikethrough, ":"",ye+=e.font.isUnderline?"Underline, ":"",t.fontStyle&Io.Bold&&(i.style.fontWeight="bold",e.fontStyle="Bold",e.font.isBold=!0,this.pdfViewer.nameTable[e.id.split("_")[0]].font.isBold=!0),fe+=e.font.isBold?"Bold, ":"",t.fontStyle&Io.Italic&&(i.style.fontStyle="italic",e.fontStyle="Italic",e.font.isItalic=!0,this.pdfViewer.nameTable[e.id.split("_")[0]].font.isItalic=!0),fe+=e.font.isItalic?"Italic, ":"",t.fontStyle&Io.Strikethrough&&(i.style.textDecoration="line-through",e.font.isStrikeout=!0,e.fontStyle="Strikethrough",this.pdfViewer.nameTable[e.id.split("_")[0]].font.isStrikeout=!0),fe+=e.font.isStrikeout?"Strikethrough, ":"",t.fontStyle&Io.Underline&&(i.style.textDecoration="underline",e.fontStyle="Underline",e.font.isUnderline=!0,this.pdfViewer.nameTable[e.id.split("_")[0]].font.isUnderline=!0),fe+=e.font.isUnderline?"Underline, ":"",(a=!0)&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,a,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,ye,fe))}}("SignatureField"===e.formFieldAnnotationType&&t.signatureIndicatorSettings||"InitialField"===e.formFieldAnnotationType&&t.initialIndicatorSettings)&&(e=this.updateSignatureandInitialIndicator(e,t,i)),this.updateSessionFormFieldProperties(e);var ve={id:e.id,name:e.name,value:e.value,type:e.formFieldAnnotationType,isReadOnly:e.isReadonly,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color,backgroundColor:e.backgroundColor,alignment:e.alignment,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,tooltip:e.tooltip,bounds:e.bounds,thickness:e.thickness,borderColor:e.borderColor,pageIndex:e.pageIndex};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(Te){return Te.id===ve.id})]=ve},s.prototype.colorNametoHashValue=function(e){var t=e;return!t.match(/#([a-z0-9]+)/gi)&&!t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(t=this.nameToHash(t)),""!==t?t:e},s.prototype.getFormField=function(e){var t,i;return"object"==typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e.id))&&(t=this.pdfViewer.nameTable[i.id]),"string"==typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e))&&(t=this.pdfViewer.nameTable[i.id]),t},s.prototype.resetTextboxProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="textboxField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.alignment="left",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,e.maxLength=0,this.updateTextboxProperties(e,t))},s.prototype.resetPasswordProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="passswordField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.alignment="left",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,e.maxLength=0,this.updatePasswordFieldProperties(e,t))},s.prototype.resetCheckboxProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="checkboxField",e.isChecked=!1,e.backgroundColor="#daeaf7ff",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,this.updateCheckboxProperties(e,t))},s.prototype.resetRadioButtonProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="RadioButtonField",e.isSelected=!1,e.backgroundColor="#daeaf7ff",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,this.updateRadioButtonProperties(e,t))},s.prototype.resetDropdownListProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="dropDownField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.alignment="left",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,e.options=[],this.updateDropdownListProperties(e,t),e.options&&this.updateDropDownListDataSource(e,t))},s.prototype.resetListBoxProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="listBoxField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.alignment="left",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,e.options=[],this.updateListBoxProperties(e,t),e.options&&this.updateDropDownListDataSource(e,t))},s.prototype.resetSignatureTextboxProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="signatureField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.isRequired=!1,e.isReadonly=!1,e.tooltip="",e.isPrint=!0,e.visibility="visible",this.updateSignatureFieldProperties(e,t))},s.prototype.deleteFormField=function(e,t){void 0===t&&(t=!0);var i=this.getFormField(e);i&&(this.clearSelection(e),this.pdfViewer.remove(i),this.pdfViewer.renderDrawing(),!c(this.pdfViewer.toolbar)&&!c(this.pdfViewer.toolbar.formDesignerToolbarModule)&&this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!1),this.pdfViewerBase.enableFormFieldButton(this.pdfViewerBase.formFieldCollection.length>0),t&&this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.currentPageNumber,null,i,"Delete","",i,i))},s.prototype.clearSelection=function(e){var t,i;if("object"==typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e.id),t=this.pdfViewer.nameTable[i.id]),"string"==typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e),t=this.pdfViewer.nameTable[i.id]),t&&this.pdfViewer.selectedItems&&!c(this.pdfViewer.selectedItems.properties.formFields)&&this.pdfViewer.selectedItems.properties.formFields.length>0&&this.pdfViewer.selectedItems.properties.formFields[0].id===t.id){var n=c(this.pdfViewerBase.activeElements.activePageID)?t.pageIndex:this.pdfViewerBase.activeElements.activePageID;this.pdfViewer.clearSelection(n)}},s.prototype.setMode=function(e){e&&-1!==e.indexOf("designer")?(this.enableDisableFormFieldsInteraction(!0),this.pdfViewerBase.disableTextSelectionMode()):(this.enableDisableFormFieldsInteraction(!1),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.enableTextSelectionMode())},s.prototype.enableDisableFormFieldsInteraction=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&t.length>0)for(var i=0;i<t.length;i++){var n=document.getElementById(t[i].id+"_content_html_element"),r=document.getElementById(t[i].id+"_designer_name");if(n)if(e){this.pdfViewer.designerMode=!0,n.style.pointerEvents="none",r.innerHTML=t[i].name;var o=this.pdfViewerBase.getZoomFactor();r.style.fontSize=t[i].fontSize?t[i].fontSize*o+"px":10*o+"px",r.style.position="absolute"}else this.pdfViewer.designerMode=!1,n.style.pointerEvents="all",r.innerHTML="",r.style.position="initial","RadioButton"===t[i].formFieldAnnotationType&&this.updateRadioButtonDesignerProperties(t[i],!0),"Checkbox"===t[i].formFieldAnnotationType&&this.updateCheckboxFormDesignerProperties(t[i],!0),this.pdfViewer.clearSelection(t[i].pageIndex)}},s.prototype.getAnnotationsFromAnnotationCollections=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i]},s.prototype.updateSignatureValue=function(e){for(var t=0;t<this.pdfViewerBase.formFieldCollection.length;t++)e===this.pdfViewerBase.formFieldCollection[t].FormField.id&&(this.pdfViewerBase.formFieldCollection[t].FormField.value="",this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[t].FormField.id.split("_")[0]].value="",this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[t].FormField.id].value="",this.pdfViewerBase.formFieldCollection[t].FormField.signatureType="",this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[t].FormField.id.split("_")[0]].signatureType="",this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[t].FormField.id].signatureType="")},s.prototype.removeFieldsFromAnnotationCollections=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(i[n].Key.split("_")[0]===e){i.splice(n,1),this.pdfViewerBase.formFieldCollection.splice(n,1);break}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner");var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(r){var o=JSON.parse(r),a=this.pdfViewer.annotationModule.getPageCollection(o,this.pdfViewerBase.currentPageNumber-1);if(o[a]){for(var l=0;l<o[a].annotations.length;l++)if(e===o[a].annotations[l].id){o[a].annotations.splice(l,1);break}var h=JSON.stringify(o);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape",h)}}var d=this.pdfViewer.formFieldCollection;if(d&&e)for(n=0;n<d.length;n++)d[n].formFieldId===e&&this.pdfViewer.formFieldCollection.splice(n,1)},s.prototype.setFormFieldIndex=function(){return this.formFieldIndex=this.formFieldIndex+1,this.formFieldIndex},s.prototype.setFormFieldIdIndex=function(){return this.formFieldIdIndex=this.formFieldIdIndex+1,this.formFieldIdIndex},s.prototype.activateTextboxElement=function(e){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Textbox"+this.setFormFieldIndex(),value:"",fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",alignment:"left",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}},this.pdfViewer.tool="DrawTool"},s.prototype.activatePasswordField=function(e){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Password"+this.setFormFieldIndex(),value:"",fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",alignment:"left",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}},this.pdfViewer.tool="DrawTool"},s.prototype.activateCheckboxElement=function(e){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Check Box"+this.setFormFieldIndex(),isChecked:!1,fontSize:10*this.pdfViewerBase.getZoomFactor(),backgroundColor:"#daeaf7ff",color:"black",thickness:1,borderColor:"#303030",isReadonly:!1,visibility:"visible",isPrint:!0,rotateAngle:0,tooltip:""},this.pdfViewer.tool="DrawTool"},s.prototype.activateRadioButtonElement=function(e){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Radio Button"+this.setFormFieldIndex(),isSelected:!1,fontSize:10*this.pdfViewerBase.getZoomFactor(),backgroundColor:"#daeaf7ff",color:"black",thickness:1,borderColor:"#303030",isReadonly:!1,visibility:"visible",isPrint:!0,rotateAngle:0,tooltip:""},this.pdfViewer.tool="DrawTool"},s.prototype.activateDropDownListElement=function(e,t){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Dropdown"+this.setFormFieldIndex(),fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",alignment:"left",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",options:t,isMultiSelect:!1,font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}},this.pdfViewer.tool="DrawTool"},s.prototype.activateListboxElement=function(e,t){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"List Box"+this.setFormFieldIndex(),fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",alignment:"left",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",options:t,isMultiSelect:!0,font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}},this.pdfViewer.tool="DrawTool"},s.prototype.activateSignatureBoxElement=function(e){var t={opacity:1,backgroundColor:"rgba(255, 228, 133, 0.35)",width:19,height:10,fontSize:10,text:null,color:"black"};switch(e){case"SignatureField":c(this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings)||(t=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings);break;case"InitialField":c(this.pdfViewer.initialFieldSettings.initialIndicatorSettings)||(t=this.pdfViewer.initialFieldSettings.initialIndicatorSettings)}this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"InitialField"===e||this.pdfViewer.isInitialFieldToolbarSelection?"Initial"+this.setFormFieldIndex():"Signature"+this.setFormFieldIndex(),fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",backgroundColor:"#daeaf7ff",alignment:"left",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1},isInitialField:"InitialField"===e||this.pdfViewer.isInitialFieldToolbarSelection,signatureIndicatorSettings:{opacity:t.opacity,backgroundColor:t.backgroundColor,width:t.width,height:t.height,fontSize:t.fontSize,text:t.text,color:t.color}},this.pdfViewer.tool="DrawTool"},s.prototype.updateTextboxProperties=function(e,t,i){t.name=e.name?e.name:"Textbox"+this.setFormFieldIndex(),t.value=e.value?e.value:"";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();if(e.insertSpaces){var r=e.bounds.width*n/e.maxLength-e.fontSize*n/2-.6*n;t.style.letterSpacing=r+"px",t.style.fontFamily="monospace",t.style.paddingLeft=r/2+"px"}else t.style.fontFamily=e.fontFamily&&this.getFontFamily(e.fontFamily)?e.fontFamily:"Helvetica";t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isUnderline&&e.font.isStrikeout?t.style.textDecoration="underline line-through":e.font.isStrikeout?t.style.textDecoration="line-through":e.font.isUnderline&&(t.style.textDecoration="underline"),e.isTransparent&&"#ffffffff"===e.borderColor?(t.style.backgroundColor="transparent",t.style.borderColor="transparent"):(t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030"),t.style.color=e.color?e.color:"black",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?e.isMultiline?"default":"none":"default",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px"),null!=e.maxLength&&(t.maxLength=0===e.maxLength?524288:e.maxLength),t.tabIndex=this.formFieldIndex,t.setAttribute("aria-label",this.pdfViewer.element.id+"formfilldesigner")},s.prototype.updatePasswordFieldProperties=function(e,t,i){t.name=e.name?e.name:"Password"+this.setFormFieldIndex(),t.value=e.value?e.value:"",t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isStrikeout&&(t.style.textDecoration="line-through"),e.font.isUnderline&&(t.style.textDecoration="underline"),t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px",t.style.color=e.color?e.color:"black",t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px"),null!=e.maxLength&&(t.maxLength=0===e.maxLength?524288:e.maxLength),t.tabIndex=this.formFieldIndex},s.prototype.updateCheckboxProperties=function(e,t){t.name=e.name?e.name:"Check Box"+this.setFormFieldIndex(),t.checked=!!e.isChecked,e.isTransparent&&"#ffffffff"===e.borderColor?(t.style.backgroundColor="transparent",t.style.borderColor="transparent"):(t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030"),t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px"),t.tabIndex=this.formFieldIndex},s.prototype.updateRadioButtonProperties=function(e,t){t.name=e.name?e.name:"Radio Button"+this.setFormFieldIndex(),t.checked=!!e.isSelected,t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px"),t.tabIndex=this.formFieldIndex},s.prototype.updateDropdownListProperties=function(e,t,i){t.name=e.name?e.name:"Dropdown"+this.setFormFieldIndex(),t.value=e.value?e.value:"",t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isStrikeout&&(t.style.textDecoration="line-through"),e.font.isUnderline&&(t.style.textDecoration="underline"),t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px",t.style.color=e.color?e.color:"black",t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px"),t.tabIndex=this.formFieldIndex},s.prototype.updateListBoxProperties=function(e,t,i){t.name=e.name?e.name:"List Box"+this.setFormFieldIndex(),t.value=e.value?e.value:"",t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isStrikeout&&(t.style.textDecoration="line-through"),e.font.isUnderline&&(t.style.textDecoration="underline"),t.style.color=e.color?e.color:"black",t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px"),t.tabIndex=this.formFieldIndex},s.prototype.updateSignatureFieldProperties=function(e,t,i){t.name=e.name?e.name:"Signature"+this.setFormFieldIndex(),t.value=e.value?e.value:"",t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica",t.style.visibility=e.visibility?e.visibility:"visible";var n=this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isStrikeout&&(t.style.textDecoration="line-through"),e.font.isUnderline&&(t.style.textDecoration="underline"),t.style.color=e.color?e.color:"black",t.style.borderWidth=c(e.thickness)?"1px":e.thickness+"px";var r=e.backgroundColor?e.backgroundColor:"#FFE48559";r=this.getSignatureBackground(r),t.style.backgroundColor=i?"transparent":r,e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.firstElementChild?t.firstElementChild.style.border=(e.thickness>0?e.thickness:1)+"px solid red":t.style.border="1px solid red",t.style.borderWidth=e.thickness?e.thickness+"px":"1px"),t.tabIndex=this.formFieldIndex},s.prototype.createHtmlElement=function(e,t){var i=F(e);return this.setAttributeHtml(i,t),i},s.prototype.setAttributeHtml=function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):this.applyStyleAgainstCsp(e,t[i[n]])},s.prototype.applyStyleAgainstCsp=function(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var r=i[n].split(":");2===r.length&&(e.style[r[0].trim()]=r[1].trim())}},s.prototype.getFieldBounds=function(e,t){var n,i=this.pdfViewerBase.pageSize[t];if(e={X:e.X?e.X:e.x,Y:e.Y?e.Y:e.y,Width:e.Width?e.Width:e.width,Height:e.Height?e.Height:e.height},i)switch(i.rotation){case 0:n=e;break;case 1:n={X:e.Y-(e.Width/2-e.Height/2),Y:i.width-e.X-e.Height-(e.Width/2-e.Height/2),Width:e.Width,Height:e.Height};break;case 2:n={X:i.width-e.X-e.Width,Y:i.height-e.Y-e.Height,Width:e.Width,Height:e.Height};break;case 3:n={X:i.height-e.Y-e.Width+(e.Width/2-e.Height/2),Y:e.X+(e.Width/2-e.Height/2),Width:e.Height,Height:e.Width}}return n||(n=e),n},s.prototype.downloadFormDesigner=function(){var e=this,t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(t){var i=JSON.parse(t);if(i.length!=this.pdfViewer.formFieldCollections.length)for(var n=this.pdfViewer.formFieldCollections.filter(function(p){var u=p.id;return!e.pdfViewer.formFieldCollection.some(function(f){return f.id===u})}),r=0;r<n.length;r++){var o=this.loadedFormFieldValue(n[r]);i.push({Key:o.id+"_content",FormField:o})}for(var a=0;a<i.length;a++){var l=i[a].FormField;if(l.Multiline=l.isMultiline,l.isRequired)if("Textbox"===l.formFieldAnnotationType||"PasswordField"===l.formFieldAnnotationType||l.Multiline)null===l.value||""===l.value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.name]=l.value):delete this.pdfViewerBase.nonFillableFields[l.name];else if("RadioButton"===l.formFieldAnnotationType){if(l.radiobuttonItem){for(var h=!1,d=0;d<l.radiobuttonItem.length;d++)if(l.radiobuttonItem[d].isSelected){h=!0;break}h?delete this.pdfViewerBase.nonFillableFields[l.name]:(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.name]=h)}}else"Checkbox"===l.formFieldAnnotationType?!1===l.isChecked?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.name]=l.isChecked):delete this.pdfViewerBase.nonFillableFields[l.name]:"DropdownList"===l.formFieldAnnotationType||"ListBox"===l.formFieldAnnotationType?c(l.selectedIndex)||0===l.selectedIndex.length?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.name]=l.selectedIndex):delete this.pdfViewerBase.nonFillableFields[l.name]:("SignatureField"===l.formFieldAnnotationType||"InitialField"===l.formFieldAnnotationType)&&(null===l.value||""===l.value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.name]=l.value):delete this.pdfViewerBase.nonFillableFields[l.name])}return JSON.stringify(i)}return null},s.prototype.loadedFormFieldValue=function(e){var h,f,t=this.hexToRgb(e.backgroundColor),i=e.bounds,n=e.backgroundColor?{r:t[0],g:t[1],b:t[2],a:t[3]}:{r:218,g:234,b:247,a:100},r=this.hexToRgb(e.color),o=e.color?{r:r[0],g:r[1],b:r[2],a:100}:{r:0,g:0,b:0,a:100},a=this.hexToRgb(e.borderColor),l=e.borderColor?{r:a[0],g:a[1],b:a[2],a:100}:{r:48,g:48,b:48,a:100},d=[],p=[],u=[],g="";if(this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"),!c(this.data)){if(this.formFieldsData=JSON.parse(this.data),"DropdownList"===e.type||"ListBox"===e.type){var m=this.formFieldsData.filter(function(G){return e.name===G.FieldName});if(m.length>0){p=m[0].TextList,u.push(m[0].selectedIndex);for(var y=0;y<p.length;y++)d.push({itemName:p[y],itemValue:p[y]})}}if("InitialField"===e.type||"SignatureField"===e.type){this.formFieldsData=JSON.parse(this.data);var b=this.formFieldsData.filter(function(G){return e.name===G.FieldName});if(b.length>0)for(var w=this.formFieldsData.filter(function(G){return("ink"===G.Name||"SignatureField"===G.Name||"SignatureImage"===G.Name||"SignatureText"===G.Name)&&b[0].FieldName===G.FieldName.split("_")[0]}),S=0;S<w.length;S++)if(b[0].FieldName!==w[S].FieldName){if(h=w[S].Value,e.fontFamily=w[S].FontFamily,e.fontSize=w[S].FontSize,!b.Bounds){var I=w[S].LineBounds,x=void 0,T=void 0,L=void 0,N=void 0,O=parseFloat(w[S].PageIndex);I.x||I.y||I.width||I.height?(x=I.x,T=I.y,L=I.width,N=I.height):(x=this.pdfViewer.formFieldsModule.ConvertPointToPixel(I.X),T=this.pdfViewer.formFieldsModule.ConvertPointToPixel(I.Y),L=this.pdfViewer.formFieldsModule.ConvertPointToPixel(I.Width),N=this.pdfViewer.formFieldsModule.ConvertPointToPixel(I.Height)),f=this.pdfViewer.formFieldsModule.updateSignatureBounds({left:x,top:T,width:L,height:N},O,!1)}if("SignatureImage"===w[S].Name&&(g="Image"),"ink"===w[S].Name&&(g="Path"),"SignatureText"===w[S].Name&&(g="Text"),"Path"===g){var q=ia(Cs(w[S].Value));h=JSON.stringify(q)}break}}}var W={lineBound:{X:i.x,Y:i.y,Width:i.width,Height:i.height},pageNumber:parseFloat(e.pageIndex)+1,name:e.name,tooltip:e.tooltip,value:h||e.value,radiobuttonItem:[],signatureType:e.signatureType?e.signatureType:g,id:e.id,insertSpaces:!!e.insertSpaces&&e.insertSpaces,isChecked:!!e.isChecked&&e.isChecked,isSelected:!!e.isSelected&&e.isSelected,fontFamily:e.fontFamily,fontStyle:e.fontStyle,backgroundColor:n,fontColor:o,borderColor:l,thickness:e.thickness,fontSize:e.fontSize,isMultiline:!!e.isMultiline&&e.isMultiline,rotation:0,isReadOnly:!!e.isReadOnly&&e.isReadOnly,isRequired:!!e.isRequired&&e.isRequired,textAlign:e.alignment,formFieldAnnotationType:e.type,zoomvalue:1,option:d,maxLength:e.maxLength?e.maxLength:0,visibility:e.visibility,font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}};if(f&&(W.signatureBound=f),u.length>0&&(W.selectedIndex=u),"RadioButton"===e.type){var j={lineBound:{X:i.x,Y:i.y,Width:i.width,Height:i.height},pageNumber:parseFloat(e.pageIndex)+1,name:e.name,tooltip:e.tooltip,value:e.value,signatureType:e.signatureType?e.signatureType:"",id:e.id,isChecked:!!e.isChecked&&e.isChecked,isSelected:!!e.isSelected&&e.isSelected,fontFamily:e.fontFamily,fontStyle:e.fontStyle,backgroundColor:n,fontColor:o,borderColor:l,thickness:e.thickness,fontSize:e.fontSize,rotation:0,isReadOnly:!!e.isReadOnly&&e.isReadOnly,isRequired:!!e.isRequired&&e.isRequired,textAlign:e.alignment,formFieldAnnotationType:e.type,zoomvalue:1,maxLength:e.maxLength?e.maxLength:0,visibility:e.visibility,font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}};W.radiobuttonItem.push(j)}else W.radiobuttonItem=[];return W},s.prototype.createAnnotationLayer=function(e,t,i,n,r){var o=this.pdfViewerBase.getElement("_annotationCanvas_"+n);if(o)return this.updateAnnotationCanvas(o,t,i,n),o;var a=F("canvas",{id:this.pdfViewer.element.id+"_annotationCanvas_"+n,className:"e-pv-annotation-canvas"});return this.updateAnnotationCanvas(a,t,i,n),e.appendChild(a),a},s.prototype.resizeAnnotations=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i);n&&(n.style.width=e+"px",n.style.height=t+"px",this.pdfViewerBase.applyElementStyles(n,i))},s.prototype.getEventPageNumber=function(e){var t=e.target;t.classList.contains("e-pv-hyperlink")?t=t.parentElement:(t.parentElement.classList.contains("foreign-object")||t.parentElement.classList.contains("e-pv-radiobtn-container"))&&(t=t.closest(".e-pv-text-layer"));var i=t.id.split("_text_")[1]||t.id.split("_textLayer_")[1]||t.id.split("_annotationCanvas_")[1]||t.id.split("_pageDiv_")[1];return isNaN(i)&&(e=this.pdfViewerBase.annotationEvent)&&(i=(t=e.target).id.split("_text_")[1]||t.id.split("_textLayer_")[1]||t.id.split("_annotationCanvas_")[1]||t.id.split("_pageDiv_")[1]),parseInt(i)},s.prototype.getPropertyPanelHeaderContent=function(e){switch(e){case"Textbox":return this.pdfViewer.localeObj.getConstant("Textbox");case"PasswordField":return this.pdfViewer.localeObj.getConstant("Password");case"Checkbox":return this.pdfViewer.localeObj.getConstant("Check Box");case"RadioButton":return this.pdfViewer.localeObj.getConstant("Radio Button");case"DropdownList":return this.pdfViewer.localeObj.getConstant("Dropdown");case"ListBox":return this.pdfViewer.localeObj.getConstant("List Box");case"InitialField":return this.pdfViewer.localeObj.getConstant("Initial");case"SignatureField":return this.pdfViewer.localeObj.getConstant("Signature")}},s.prototype.createPropertiesWindow=function(){var i,e=this,n=F("div",{id:this.pdfViewer.element.id+"_properties_window",className:"e-pv-properties-form-field-window"}),r=this.createAppearanceTab();this.pdfViewerBase.pageContainer.appendChild(n),i="DropdownList"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"ListBox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?"430px":"505px",this.propertiesDialog=new Or({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:'<div class="e-pv-form-field-property-header"> '+this.getPropertyPanelHeaderContent(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType)+" "+this.pdfViewer.localeObj.getConstant("Properties")+"</div>",minHeight:i,target:this.pdfViewer.element,content:r,beforeOpen:function(){e.isPropertyDialogOpen=!0},allowDragging:!0,close:function(){e.destroyPropertiesWindow(),e.isPropertyDialogOpen=!1}}),this.propertiesDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)}],this.pdfViewer.enableRtl&&(this.propertiesDialog.enableRtl=!0);var o=F("div");o.className="e-pv-properties-bottom-spliter",n.appendChild(o),this.propertiesDialog.appendTo(n)},s.prototype.onOkClicked=function(e){var t=this.pdfViewer.selectedItems.formFields[0],i=st(t);if(t){switch(t.formFieldAnnotationType){case"Textbox":case"PasswordField":if(this.formFieldMultiline&&this.formFieldMultiline.checked&&"Textbox"===t.formFieldAnnotationType&&this.multilineCheckboxCheckedState?this.renderMultilineText(t):"Textbox"===t.formFieldAnnotationType&&this.multilineCheckboxCheckedState&&this.renderTextbox(t),"PasswordField"===t.formFieldAnnotationType&&this.updateTextboxFormDesignerProperties(t),"Textbox"===t.formFieldAnnotationType){var n=this.checkTextboxName(t);if(n&&n.length>0)for(var r=0;r<n.length;r++){var o=n[r];o.id===t.id&&(t.isMultiline?this.renderMultilineText(o):this.renderTextbox(o),document.getElementById(o.id+"_content_html_element")?this.updateTextboxFormDesignerProperties(o):this.updateFormFieldPropertiesInCollections(o))}}this.multilineCheckboxCheckedState=!1;var a=Ao(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(a,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"Checkbox":this.updateCheckboxFormDesignerProperties(t,!1);var l=Ao(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(l,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"RadioButton":this.updateRadioButtonDesignerProperties(t,!1);var h=Ao(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(h,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"SignatureField":case"InitialField":this.updateSignatureTextboxProperties(t);var d=Ao(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(d,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"DropdownList":this.updateDropdownFormDesignerProperties(t);var p=Ao(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(p,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"ListBox":this.updateListBoxFormDesignerProperties(t);var u=Ao(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(u,t.wrapper.children[0],t.formFieldAnnotationType,t)}this.updateFormFieldCollections(t);var f=st(t);this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.currentPageNumber,null,t,"FormDesigner Properties Change","",i,f)}this.propertiesDialog.hide()},s.prototype.updateFormFieldPropertiesInCollections=function(e){for(var t=this.pdfViewer.formFieldCollections,i=0;i<t.length;i++){var n=t[i];if(n.id===e.id&&n.name===e.name){this.formFieldName&&this.formFieldName.value&&(n.name=this.formFieldName.value),this.formFieldValue&&e.value!==this.formFieldValue.value&&(n.value=this.formFieldValue.value),this.formFieldAlign&&e.alignment!==this.formFieldAlign&&(n.alignment=this.formFieldAlign),this.formFieldPrinting&&e.isPrint!==this.formFieldPrinting.checked&&(n.isPrint=this.formFieldPrinting.checked),this.formFieldTooltip&&e.tooltip!==this.formFieldTooltip.value&&(n.tooltip=this.formFieldTooltip.value),this.formFieldVisibility&&e.visibility!==this.formFieldVisibility.value&&(n.visibility=this.formFieldVisibility),this.formFieldFontFamily&&this.formFieldFontFamily.value&&(n.fontFamily=this.formFieldFontFamily.value),this.formFieldFontSize&&this.formFieldFontSize.value&&(n.fontSize=parseInt(this.formFieldFontSize.value.toString())),this.fontColorValue&&e.color!==this.fontColorValue&&(n.color=this.fontColorValue),this.backgroundColorValue&&e.backgroundColor!==this.backgroundColorValue&&(n.backgroundColor=this.backgroundColorValue),this.borderColorValue&&e.borderColor!==this.borderColorValue&&(n.borderColor=this.borderColorValue),this.formFieldBorderWidth&&e.thickness!==parseInt(this.formFieldBorderWidth)&&(n.thickness=parseInt(this.formFieldBorderWidth)),this.formFieldReadOnly&&e.isReadonly!==this.formFieldReadOnly.checked&&(n.isReadOnly=this.formFieldReadOnly.checked),this.formFieldRequired&&e.isRequired!==this.formFieldRequired.checked&&(n.isRequired=this.formFieldRequired.checked),n.fontStyle=0!==i&&i<this.pdfViewer.formFieldCollection.length?this.pdfViewer.formFieldCollection[i-1].fontStyle:this.pdfViewer.formFieldCollection[i+1].fontStyle;var r=this.pdfViewer.formFieldCollections.findIndex(function(o){return o.id===e.id});this.pdfViewer.formFieldCollections[r]=n}}},s.prototype.checkTextboxName=function(e){for(var t=[],i=0;i<this.pdfViewer.formFieldCollection.length;i++){var n=this.pdfViewer.formFieldCollection[i];n.name===e.name&&"Textbox"===n.formFieldAnnotationType&&t.push(n)}return t},s.prototype.renderMultilineText=function(e,t){t?this.reRenderMultilineTextbox(e,"e-pv-formfield-input"):this.addMultilineTextbox(e,"e-pv-formfield-input",!0)},s.prototype.renderTextbox=function(e,t){t?this.reRenderMultilineTextbox(e,"e-pv-formfield-textarea"):this.addMultilineTextbox(e,"e-pv-formfield-textarea",!1)},s.prototype.addMultilineTextbox=function(e,t,i){var n=e.wrapper.children[0];if(e.isMultiline=i,document.getElementById(n.id+"_html_element")){var r=document.getElementById(n.id+"_html_element").children[0],o=r.children[0].id;if(document.getElementById(r.children[0].id).remove(),-1!==t.indexOf("e-pv-formfield-textarea")){var a=this.createTextboxElement(o);n.template=r.appendChild(a)}else{var l=this.createTextAreaElement(o);n.template=r.appendChild(l)}var h=this.getFormFiledIndex(e.id.split("_")[0]);this.pdfViewerBase.formFieldCollection[h].FormField.isMultiline=e.isMultiline,this.pdfViewer.nameTable[e.id.split("_")[0]].isMultiline=e.isMultiline}},s.prototype.reRenderMultilineTextbox=function(e,t){var i=document.getElementById(e.id+"_content_html_element");if(i){var n=i.firstElementChild.firstElementChild,r=n.id;if(n.remove(),-1!==t.indexOf("e-pv-formfield-textarea")){var o=this.createTextboxElement(r);i.firstElementChild.appendChild(o)}else o=this.createTextAreaElement(r),i.firstElementChild.appendChild(o)}},s.prototype.createTextAreaElement=function(e){var t=F("textarea");return t.id=e,t.className="e-pv-formfield-textarea",t.style.width="100%",t.style.height="100%",t.style.borderStyle="solid",t.addEventListener("click",this.inputElementClick.bind(this)),t.addEventListener("change",this.getTextboxValue.bind(this)),t},s.prototype.createTextboxElement=function(e){var t=F("input");return t.id=e,t.type="text",t.className="e-pv-formfield-input",t.autocomplete="off",t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.borderStyle="solid",t.addEventListener("click",this.inputElementClick.bind(this)),t.addEventListener("change",this.getTextboxValue.bind(this)),t.addEventListener("focus",this.focusFormFields.bind(this)),t.addEventListener("blur",this.blurFormFields.bind(this)),t},s.prototype.updateFormFieldCollections=function(e){var t={id:e.id.split("_")[0],name:e.name,value:e.value,type:e.type?e.type:e.formFieldAnnotationType,isReadOnly:e.isReadonly,fontFamily:e.fontFamily,isMultiline:e.isMultiline,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color?e.color:this.getRgbToHex(e.fontColor),backgroundColor:"string"==typeof e.backgroundColor?e.backgroundColor:this.getRgbToHex(e.backgroundColor),alignment:e.alignment?e.alignment:e.textAlign,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,isSelected:e.isSelected,isChecked:e.isChecked,tooltip:e.tooltip,bounds:e.bounds?e.bounds:e.lineBound,thickness:e.thickness,borderColor:"string"==typeof e.borderColor?e.borderColor:this.getRgbToHex(e.borderColor),pageIndex:c(e.pageNumber)?e.pageIndex:e.pageNumber-1};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(i){return i.id===t.id})]=t},s.prototype.getRgbToHex=function(e){return"#"+this.hex(e.r)+this.hex(e.g)+this.hex(e.b)},s.prototype.updateDropdownFormDesignerProperties=function(e,t){var i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;if(this.pdfViewer.designerMode||t){var n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),r=JSON.parse(n),o=this.getFormFiledIndex(e.id.split("_")[0]);e.options=this.createDropdownDataSource(e),this.updateDropDownListDataSource(e,i),e.selectedIndex=[],o>-1&&(r[o].FormField.option=e.options,this.pdfViewerBase.formFieldCollection[o].FormField.option=e.options,!c(e.options)&&e.options.length>0&&e.selectedIndex.push(r[o]&&r[o].FormField.value?e.options.findIndex(function(a){return a.itemValue===r[o].FormField.value}):0)),this.pdfViewer.nameTable[e.id.split("_")[0]].options=e.options,(this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,o,r),(this.formFieldValue&&r[o]&&r[o].FormField.value||t)&&this.updateValuePropertyChange(e,i,t,o,r),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,o,r),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,o,r),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,o,r),(this.formFieldFontFamily&&this.formFieldFontFamily.value||t)&&this.updateFontFamilyPropertyChange(e,i,t,o,r),(this.formFieldFontSize&&this.formFieldFontSize.value||t)&&this.updateFontSizePropertyChange(e,i,t,o,r),this.updateFontStylePropertyChange(e,i,t,o,r),(this.formFieldAlign||t)&&this.updateAlignmentPropertyChange(e,i,t,o,r),(this.fontColorValue||t)&&this.updateColorPropertyChange(e,i,t,o,r),(this.backgroundColorValue||t)&&this.updateBackgroundColorPropertyChange(e,i,t,o,r),(this.borderColorValue||t)&&this.updateBorderColorPropertyChange(e,i,t,o,r),(!c(this.formFieldBorderWidth)||t)&&this.updateBorderThicknessPropertyChange(e,i,t,o,r),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,o,r),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,o,r)}t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},s.prototype.updateListBoxFormDesignerProperties=function(e,t){var i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;if(this.pdfViewer.designerMode||t){var n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),r=JSON.parse(n),o=this.getFormFiledIndex(e.id.split("_")[0]);e.options=this.createDropdownDataSource(e),this.updateDropDownListDataSource(e,i),e.selectedIndex=[],o>-1&&(r[o].FormField.option=e.options,this.pdfViewerBase.formFieldCollection[o].FormField.option=e.options,!c(e.options)&&e.options.length>0&&e.selectedIndex.push(r[o]&&r[o].FormField.value?e.options.findIndex(function(a){return a.itemValue===r[o].FormField.value}):0)),this.pdfViewer.nameTable[e.id.split("_")[0]].options=e.options,(this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,o,r),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,o,r),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,o,r),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,o,r),(this.formFieldFontFamily&&this.formFieldFontFamily.value||t)&&this.updateFontFamilyPropertyChange(e,i,t,o,r),(this.formFieldFontSize&&this.formFieldFontSize.value||t)&&this.updateFontSizePropertyChange(e,i,t,o,r),this.updateFontStylePropertyChange(e,i,t,o,r),(this.formFieldAlign||t)&&this.updateAlignmentPropertyChange(e,i,t,o,r),(this.fontColorValue||t)&&this.updateColorPropertyChange(e,i,t,o,r),(this.backgroundColorValue||t)&&this.updateBackgroundColorPropertyChange(e,i,t,o,r),(this.borderColorValue||t)&&this.updateBorderColorPropertyChange(e,i,t,o,r),(!c(this.formFieldBorderWidth)||t)&&this.updateBorderThicknessPropertyChange(e,i,t,o,r),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,o,r),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,o,r)}t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},s.prototype.updateDropDownListDataSource=function(e,t){for(;t.firstChild;)t.firstChild.remove();for(var i=0;i<e.options.length;i++){var n=document.createElement("option");n.className="e-pv-formfield-dropdown",n.value=e.options[i].itemValue,n.text=e.options[i].itemName,t.appendChild(n)}},s.prototype.createDropdownDataSource=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(this.formFieldListItemDataSource=[],t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.formFieldListItemDataSource.push({itemName:n.innerHTML,itemValue:n.innerHTML})}else e&&e.options.length>0&&(this.formFieldListItemDataSource=e.options);return this.formFieldListItemDataSource},s.prototype.updateSignatureTextboxProperties=function(e,t){var i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild,n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),r=JSON.parse(n),o=this.getFormFiledIndex(e.id.split("_")[0]);(this.pdfViewer.designerMode||t)&&((this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,o,r),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,o,r),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,o,r),(!c(this.formFieldBorderWidth)||t)&&this.updateBorderThicknessPropertyChange(e,i,t,o,r),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,o,r),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,o,r),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,o,r)),t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},s.prototype.updateCheckboxFormDesignerProperties=function(e,t,i){var n=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild,r=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),o=JSON.parse(r),a=this.getFormFiledIndex(e.id.split("_")[0]);(this.formFieldName&&this.formFieldName.value||i)&&this.updateNamePropertyChange(e,n,i,a,o),(this.formFieldValue||i)&&this.updateValuePropertyChange(e,n,i,a,o,t),(this.backgroundColorValue||i)&&this.updateBackgroundColorPropertyChange(e,n,i,a,o),(this.borderColorValue||i)&&this.updateBorderColorPropertyChange(e,n,i,a,o),(!c(this.formFieldBorderWidth)||i)&&this.updateBorderThicknessPropertyChange(e,n,i,a,o),this.formFieldChecked&&(this.checkboxCheckedState=this.formFieldChecked.checked),(this.formFieldPrinting||i)&&this.updateIsPrintPropertyChange(e,i,a,o),(this.formFieldTooltip||i)&&this.updateTooltipPropertyChange(e,n,i,a,o),(this.formFieldVisibility||i)&&this.updateVisibilityPropertyChange(e,n,i,a,o),(null!=this.checkboxCheckedState||i)&&this.updateIsCheckedPropertyChange(e,n,i,a,o),(this.pdfViewer.designerMode&&this.borderColorValue||i)&&this.updateBorderColorPropertyChange(e,n,i,a,o),(this.pdfViewer.designerMode&&this.formFieldBorderWidth||i)&&this.updateBorderThicknessPropertyChange(e,n,i,a,o),(this.formFieldReadOnly||i)&&this.updateIsReadOnlyPropertyChange(e,n,i,a,o),(this.formFieldRequired||i)&&this.updateIsRequiredPropertyChange(e,n,i,a,o),i&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},s.prototype.updateRadioButtonDesignerProperties=function(e,t,i){var n=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild,r=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),o=JSON.parse(r),a=this.getFormFiledIndex(e.id.split("_")[0]);if((this.formFieldName&&this.formFieldName.value||i)&&this.updateNamePropertyChange(e,n,i,a,o),(this.formFieldValue||i)&&this.updateValuePropertyChange(e,n,i,a,o,t),this.formFieldChecked&&(this.checkboxCheckedState=this.formFieldChecked.checked),(this.formFieldPrinting||i)&&this.updateIsPrintPropertyChange(e,i,a,o),(this.formFieldTooltip||i)&&this.updateTooltipPropertyChange(e,n,i,a,o),(this.formFieldVisibility||i)&&this.updateVisibilityPropertyChange(e,n,i,a,o),(this.pdfViewer.designerMode&&!c(this.formFieldBorderWidth)||i)&&this.updateBorderThicknessPropertyChange(e,n,i,a,o),(this.backgroundColorValue||i)&&this.updateBackgroundColorPropertyChange(e,n,i,a,o),(this.borderColorValue||i)&&this.updateBorderColorPropertyChange(e,n,i,a,o),(null!=this.checkboxCheckedState||i)&&this.updateIsSelectedPropertyChange(e,n,i,a,o),(this.formFieldReadOnly||i)&&this.updateIsReadOnlyPropertyChange(e,n,i,a,o),(this.formFieldRequired||i)&&this.updateIsRequiredPropertyChange(e,n,i,a,o),i){var l=this.pdfViewer.nameTable[e.id.split("_")[0]],h=Ao(l.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(h,l.wrapper.children[0],l.formFieldAnnotationType,l)}},s.prototype.updateTextboxFormDesignerProperties=function(e,t){var r,o,i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild,n=!1,a=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),l=JSON.parse(a),h=this.getFormFiledIndex(e.id.split("_")[0]);if(this.pdfViewer.designerMode||t){if((this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,h,l),(this.formFieldValue||t)&&this.updateValuePropertyChange(e,i,t,h,l),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,h,l),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,h,l),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,h,l),(this.formFieldFontFamily&&this.formFieldFontFamily.value||t)&&this.updateFontFamilyPropertyChange(e,i,t,h,l),(this.formFieldFontSize&&this.formFieldFontSize.value||t)&&this.updateFontSizePropertyChange(e,i,t,h,l),this.updateFontStylePropertyChange(e,i,t,h,l),(this.formFieldAlign||t||this.multilineCheckboxCheckedState)&&this.updateAlignmentPropertyChange(e,i,t,h,l),this.maxLengthItem||t){this.maxLengthItem&&e.maxLength!==this.maxLengthItem.value&&(n=!0,r=e.maxLength,o=this.maxLengthItem.value);var d=0===this.maxLengthItem.value?524288:this.maxLengthItem.value;t&&0!==e.maxLength?i.maxLength=e.maxLength:(i.maxLength=d,e.maxLength=this.maxLengthItem.value),h>-1&&(l[h].FormField.maxLength=e.maxLength,this.pdfViewerBase.formFieldCollection[h].FormField.maxLength=e.maxLength),this.pdfViewer.nameTable[e.id.split("_")[0]].maxLength=e.maxLength,n&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,!1,!1,!1,r,o)}(this.fontColorValue||t||this.multilineCheckboxCheckedState)&&this.updateColorPropertyChange(e,i,t,h,l),(this.backgroundColorValue||t||this.multilineCheckboxCheckedState)&&this.updateBackgroundColorPropertyChange(e,i,t,h,l),(this.borderColorValue||t||this.multilineCheckboxCheckedState)&&this.updateBorderColorPropertyChange(e,i,t,h,l),(!c(this.formFieldBorderWidth)||t)&&this.updateBorderThicknessPropertyChange(e,i,t,h,l),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,h,l),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,h,l)}!this.pdfViewer.designerMode&&this.formFieldVisibility&&this.formFieldVisibility.value&&(e.visibility=this.formFieldVisibility.value,document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild.style.visibility=e.visibility),this.updateFormFieldCollections(e),t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},s.prototype.updateIsCheckedPropertyChange=function(e,t,i,n,r){if(this.pdfViewer.designerMode||i){var o=!1,a=void 0,l=void 0;e.isChecked!==this.checkboxCheckedState&&(o=!0,a=e.isChecked,l=this.checkboxCheckedState),i||(e.isChecked=this.checkboxCheckedState),n>-1&&(r[n].FormField.isChecked=e.isChecked,this.pdfViewerBase.formFieldCollection[n].FormField.isChecked=e.isChecked),this.pdfViewer.nameTable[e.id.split("_")[0]].isChecked=e.isChecked,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,o,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,l)}if(!this.pdfViewer.designerMode||i){var h=document.getElementById(e.id+"_input").firstElementChild;e.isChecked?(h.classList.contains("e-pv-cb-unchecked")&&h.classList.remove("e-pv-cb-unchecked"),h.classList.add("e-pv-cb-checked")):(h.classList.contains("e-pv-cb-checked")&&h.classList.remove("e-pv-cb-checked"),h.classList.add("e-pv-cb-unchecked"))}},s.prototype.updateIsSelectedPropertyChange=function(e,t,i,n,r){if(this.pdfViewer.designerMode||i){var o=!1,a=void 0,l=void 0;if(e.isSelected!==this.checkboxCheckedState&&(o=!0,a=e.isSelected,l=this.checkboxCheckedState),i||(e.isSelected=this.checkboxCheckedState),n>-1){r[n].FormField.isSelected=e.isSelected,this.pdfViewerBase.formFieldCollection[n].FormField.isSelected=e.isSelected;for(var h=0;h<r[n].FormField.radiobuttonItem.length;h++)r[n].FormField.radiobuttonItem[h].id.split("_")[0]===e.id.split("_")[0]&&(r[n].FormField.radiobuttonItem[h].isSelected=e.isSelected,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[h].isSelected=e.isSelected)}this.pdfViewer.nameTable[e.id.split("_")[0]].isSelected=e.isSelected,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,o,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,l)}if(!this.pdfViewer.designerMode||i){if(t.checked=e.isSelected,n>-1)for(r[n].FormField.isSelected=e.isSelected,this.pdfViewerBase.formFieldCollection[n].FormField.isSelected=e.isSelected,h=0;h<r[n].FormField.radiobuttonItem.length;h++)r[n].FormField.radiobuttonItem[h].id.split("_")[0]===e.id.split("_")[0]&&(r[n].FormField.radiobuttonItem[h].isSelected=e.isSelected,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[h].isSelected=e.isSelected);this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.pdfViewer.nameTable[e.id.split("_")[0]].isSelected=e.isSelected}},s.prototype.updateValuePropertyChange=function(e,t,i,n,r,o){var l,h,a=!1;"DropdownList"!==e.formFieldAnnotationType&&this.formFieldValue&&e.value!==this.formFieldValue.value?(a=!0,l=e.value,h=this.formFieldValue.value):"DropdownList"===e.formFieldAnnotationType&&this.formFieldValue&&e.value!==r[n].FormField.value&&(a=!0,l=e.value,h=r[n].FormField.value),i?t.value=e.value:o?a=!1:(e.value="DropdownList"===e.formFieldAnnotationType?r[n].FormField.value:this.formFieldValue.value,t.value="DropdownList"===e.formFieldAnnotationType?r[n].FormField.value:this.formFieldValue.value),n>-1&&(r[n].FormField.value=e.value,this.pdfViewerBase.formFieldCollection[n].FormField.value=e.value),this.pdfViewer.nameTable[e.id.split("_")[0]].value=e.value,a&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,a,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,l,h)},s.prototype.updateFontStylePropertyChange=function(e,t,i,n,r){var o,a,l,h=this.updateFontStyle(t,e,i,n,r);o=h[0],a=h[1],l=h[2],n>-1&&(r[n].FormField.fontStyle=e.fontStyle,this.pdfViewerBase.formFieldCollection[n].FormField.fontStyle=e.fontStyle),this.pdfViewer.nameTable[e.id.split("_")[0]].fontStyle=e.fontStyle,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,o,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,l)},s.prototype.updateBorderThicknessPropertyChange=function(e,t,i,n,r){var a,l,o=!1,h=parseInt(this.formFieldBorderWidth);e.thickness!==h&&(o=!0,a=e.thickness,l=h||e.thickness),i?t.style.borderWidth=e.thickness.toString():(t.style.borderWidth=this.formFieldBorderWidth?this.formFieldBorderWidth+"px":e.thickness+"px",e.thickness=h),n>-1&&(r[n].FormField.thickness=e.thickness,this.pdfViewerBase.formFieldCollection[n].FormField.thickness=e.thickness),this.pdfViewer.nameTable[e.id.split("_")[0]].thickness=e.thickness,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,o,!1,!1,!1,!1,!1,!1,!1,a,l)},s.prototype.updateBorderColorPropertyChange=function(e,t,i,n,r){var a,l,o=!1;e.borderColor!==this.borderColorValue&&(o=!0,a=e.borderColor,l=this.borderColorValue?this.borderColorValue:e.borderColor),i?t.style.borderColor=e.borderColor:(t.style.borderColor=this.borderColorValue?this.borderColorValue:e.borderColor,e.borderColor=this.borderColorValue?this.borderColorValue:e.borderColor),"RadioButton"==e.formFieldAnnotationType&&(t.parentElement.style.boxShadow=this.borderColorValue+" 0px 0px 0px "+e.thickness+"px"),n>-1&&(r[n].FormField.borderColor=this.getRgbCode(e.borderColor),this.pdfViewerBase.formFieldCollection[n].FormField.borderColor=this.getRgbCode(e.borderColor)),this.pdfViewer.nameTable[e.id.split("_")[0]].borderColor=e.borderColor,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,o,!1,!1,!1,!1,!1,!1,!1,!1,a,l)},s.prototype.updateBackgroundColorPropertyChange=function(e,t,i,n,r){var a,l,o=!1;e.backgroundColor!==this.backgroundColorValue&&(o=!0,a=e.backgroundColor,l=this.backgroundColorValue?this.backgroundColorValue:e.backgroundColor),i?"RadioButton"==e.formFieldAnnotationType?t.parentElement.style.background=e.backgroundColor:t.style.background=e.backgroundColor:("RadioButton"==e.formFieldAnnotationType?t.parentElement.style.background=this.backgroundColorValue?this.backgroundColorValue:e.backgroundColor:t.style.background=this.backgroundColorValue?this.backgroundColorValue:e.backgroundColor,e.backgroundColor=this.backgroundColorValue?this.backgroundColorValue:e.backgroundColor),n>-1&&(r[n].FormField.backgroundColor=this.getRgbCode(e.backgroundColor),this.pdfViewerBase.formFieldCollection[n].FormField.backgroundColor=this.getRgbCode(e.backgroundColor)),this.pdfViewer.nameTable[e.id.split("_")[0]].backgroundColor=e.backgroundColor,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,o,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,l)},s.prototype.updateColorPropertyChange=function(e,t,i,n,r){var a,l,o=!1;e.color!==this.fontColorValue&&(o=!0,a=e.color,l=this.fontColorValue?this.fontColorValue:e.color),i?t.style.color=e.color:(t.style.color=this.fontColorValue?this.fontColorValue:e.color,e.color=this.fontColorValue?this.fontColorValue:e.color),n>-1&&(r[n].FormField.color=this.getRgbCode(e.color),this.pdfViewerBase.formFieldCollection[n].FormField.color=this.getRgbCode(e.color)),this.pdfViewer.nameTable[e.id.split("_")[0]].color=e.color,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,o,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,l)},s.prototype.updateAlignmentPropertyChange=function(e,t,i,n,r){var a,l,o=!1;if(e.alignment!==this.formFieldAlign&&(o=!0,a=e.alignment,l=this.formFieldAlign?this.formFieldAlign:e.alignment),i){if(t.style.textAlign=e.alignment,("ListBox"==e.formFieldAnnotationType||"DropdownList"==e.formFieldAnnotationType)&&t.children.length>0){t.style.textAlignLast=e.alignment;for(var h=0;h<t.children.length;h++)(d=t.children[h]).style.textAlignLast=e.alignment,d.style.textAlign=e.alignment}}else if(t.style.textAlign=this.formFieldAlign?this.formFieldAlign:e.alignment,e.alignment=this.formFieldAlign?this.formFieldAlign:e.alignment,("ListBox"==e.formFieldAnnotationType||"DropdownList"==e.formFieldAnnotationType)&&t.children.length>0)for(t.style.textAlignLast=this.formFieldAlign?this.formFieldAlign:e.alignment,h=0;h<t.children.length;h++){var d;(d=t.children[h]).style.textAlignLast=this.formFieldAlign?this.formFieldAlign:e.alignment,d.style.textAlign=this.formFieldAlign?this.formFieldAlign:e.alignment}n>-1&&(r[n].FormField.alignment=e.alignment,this.pdfViewerBase.formFieldCollection[n].FormField.alignment=e.alignment),this.pdfViewer.nameTable[e.id.split("_")[0]].alignment=e.alignment,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,o,!1,!1,!1,!1,!1,!1,a,l)},s.prototype.updateFontSizePropertyChange=function(e,t,i,n,r){var a,l,o=!1,h=this.pdfViewerBase.getZoomFactor(),d=this.formFieldFontSize?parseInt(this.formFieldFontSize.value.toString()):null;parseInt(e.fontSize)!==d&&(o=!0,a=e.fontSize,l=d),i?t.style.fontSize=e.fontSize*h+"px".toString():(e.fontSize=d,t.style.fontSize=parseInt(this.formFieldFontSize.value.toString())*h+"px"),n>-1&&(r[n].FormField.fontSize=e.fontSize,this.pdfViewerBase.formFieldCollection[n].FormField.fontSize=e.fontSize),this.pdfViewer.nameTable[e.id.split("_")[0]].fontSize=e.fontSize,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,o,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,l)},s.prototype.updateFontFamilyPropertyChange=function(e,t,i,n,r){var a,l,o=!1,h=this.formFieldFontFamily?this.formFieldFontFamily.value.toString():"";e.fontFamily!==h&&(o=!0,a=e.fontFamily,l=h),i?t.style.fontFamily=e.fontFamily:(e.fontFamily=h,t.style.fontFamily=h),n>-1&&(r[n].FormField.fontFamily=e.fontFamily,this.pdfViewerBase.formFieldCollection[n].FormField.fontFamily=e.fontFamily),this.pdfViewer.nameTable[e.id.split("_")[0]].fontFamily=e.fontFamily,o&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,o,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,l)},s.prototype.updateVisibilityPropertyChange=function(e,t,i,n,r){var a,l,o=!1;if(this.formFieldVisibility&&e.visibility!==this.formFieldVisibility.value&&(o=!0,a=e.visibility,l=this.formFieldVisibility.value),i||(e.visibility=this.formFieldVisibility.value),t.style.visibility=e.visibility,"RadioButton"===e.formFieldAnnotationType&&(t.parentElement.style.visibility=e.visibility),"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){var h=document.getElementById(e.id+"_content_html_element").firstElementChild.children[1];h.style.visibility=e.visibility,h.parentElement.style.visibility=e.visibility;var d=this.pdfViewer.nameTable[e.id.split("_")[0]+"_content"];"hidden"===e.visibility?d&&this.hideSignatureValue(e,d,n,r):d&&this.showSignatureValue(e,a,d,n,r)}n>-1&&(r[n].FormField.visibility=e.visibility,this.pdfViewerBase.formFieldCollection[n].FormField.visibility=e.visibility),this.pdfViewer.nameTable[e.id.split("_")[0]].visibility=e.visibility,o&&(this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,o,!1,!1,!1,!1,a,l))},s.prototype.hideSignatureValue=function(e,t,i,n){e.wrapper.children.splice(e.wrapper.children.indexOf(t.wrapper.children[0]),1),e.value="",e.signatureType="",n[i].FormField.value="",n[i].FormField.signatureType="",this.pdfViewerBase.formFieldCollection[i].FormField.value="",this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="",this.pdfViewer.remove(t),this.pdfViewer.renderDrawing()},s.prototype.showSignatureValue=function(e,t,i,n,r){if("SignatureText"===i.shapeAnnotationType)e.value=i.data,e.signatureType="Text",r[n].FormField.signatureType="Text",r[n].FormField.value=i.data,this.pdfViewerBase.formFieldCollection[n].FormField.value=i.data,this.pdfViewerBase.formFieldCollection[n].FormField.signatureType="Text";else if("SignatureImage"===i.shapeAnnotationType)e.value=i.data,e.signatureType="Image",r[n].FormField.signatureType="Image",r[n].FormField.value=i.data,this.pdfViewerBase.formFieldCollection[n].FormField.value=i.data,this.pdfViewerBase.formFieldCollection[n].FormField.signatureType="Image";else{r[n].FormField.signatureType="Path",e.signatureType="Path",this.pdfViewerBase.formFieldCollection[n].FormField.signatureType="Path";var a=ia(Cs(i.data));e.value=JSON.stringify(a),r[n].FormField.value=JSON.stringify(a),this.pdfViewerBase.formFieldCollection[n].FormField.value=JSON.stringify(a)}if(e.signatureBound=i.signatureBound,"hidden"===t){this.pdfViewer.add(i),e.wrapper.children.push(i.wrapper);var l=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(l,e.pageIndex)}this.pdfViewer.renderDrawing()},s.prototype.updateTooltipPropertyChange=function(e,t,i,n,r){var a,l,o=!1;this.formFieldTooltip&&e.tooltip!==this.formFieldTooltip.value&&(o=!0,a=e.tooltip,l=this.formFieldTooltip.value),i?(this.formFieldTooltip=new Hs,this.formFieldTooltip.value=e.tooltip):e.tooltip=this.formFieldTooltip?this.formFieldTooltip.value:e.tooltip,n>-1&&(r[n].FormField.tooltip=e.tooltip,this.pdfViewerBase.formFieldCollection[n].FormField.tooltip=e.tooltip),this.pdfViewer.nameTable[e.id.split("_")[0]].tooltip=this.formFieldTooltip.value,!c(this.formFieldTooltip.value)&&""!==this.formFieldTooltip.value&&this.setToolTip(this.formFieldTooltip.value,"RadioButton"==e.formFieldAnnotationType||"DropdownList"==e.formFieldAnnotationType?t.parentElement:t),o&&(this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,o,a,l))},s.prototype.updateNamePropertyChange=function(e,t,i,n,r){var o=document.getElementById(e.id+"_designer_name"),a=this.pdfViewerBase.getZoomFactor();if(o.style.fontSize=e.fontSize?e.fontSize*a+"px":10*a+"px",i||(e.name=this.formFieldName?this.formFieldName.value:e.name),o.innerHTML=e.name,n>-1&&(r[n].FormField.name!==e.name&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,null,null,!0,r[n].FormField.name),r[n].FormField.name=e.name,this.pdfViewerBase.formFieldCollection[n].FormField.name=e.name),t.name=e.name,this.pdfViewer.nameTable[e.id.split("_")[0]].name=e.name,"DropdownList"==e.formFieldAnnotationType||"ListBox"==e.formFieldAnnotationType)for(var l=0;l<this.pdfViewer.formFieldCollection.length;l++){var h=this.pdfViewer.formFieldCollection[l];if(("DropdownList"===h.formFieldAnnotationType||"ListBox"===h.formFieldAnnotationType)&&h.name===e.name&&h.id!==e.id){e.options=h.options,this.updateDropDownListDataSource(e,t);break}}},s.prototype.updateIsReadOnlyPropertyChange=function(e,t,i,n,r){var a,l,o=!1;this.formFieldReadOnly&&e.isReadonly!==this.formFieldReadOnly.checked&&(o=!0,a=e.isReadonly,l=this.formFieldReadOnly.checked),i?(this.formFieldReadOnly=new Os,this.formFieldReadOnly.checked=e.isReadonly):e.isReadonly=this.formFieldReadOnly.checked,n>-1&&(r[n].FormField.isReadonly=e.isReadonly,this.pdfViewerBase.formFieldCollection[n].FormField.isReadonly=e.isReadonly),this.pdfViewer.nameTable[e.id.split("_")[0]].isReadonly=e.isReadonly,this.setReadOnlyToElement(e,t,e.isReadonly),this.setReadOnlyToFormField(e,e.isReadonly),o&&(this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,o,!1,!1,!1,!1,!1,a,l))},s.prototype.updateIsRequiredPropertyChange=function(e,t,i,n,r){var a,l,o=!1;if(this.formFieldRequired&&e.isRequired!==this.formFieldRequired.checked&&(o=!0,a=e.isRequired,l=this.formFieldRequired.checked),i?(this.formFieldRequired=new Os,this.formFieldRequired.checked=e.isRequired):e.isRequired=this.formFieldRequired.checked,n>-1&&(r[n].FormField.isRequired=e.isRequired,this.pdfViewerBase.formFieldCollection[n].FormField.isRequired=e.isRequired,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem)){for(var h=0;h<this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem.length;h++)this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[h].isRequired=e.isRequired,this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[h].id.split("_")[0]].isRequired=e.isRequired;this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}this.pdfViewer.nameTable[e.id.split("_")[0]].isRequired=e.isRequired,this.setRequiredToElement(e,t,e.isRequired),this.setRequiredToFormField(e,e.isRequired),o&&(this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,o,!1,!1,a,l))},s.prototype.updateIsPrintPropertyChange=function(e,t,i,n){var o,a,r=!1;this.formFieldPrinting&&e.isPrint!==this.formFieldPrinting.checked&&(r=!0,o=e.isPrint,a=this.formFieldPrinting.checked),t?(this.formFieldPrinting=new Os,this.formFieldPrinting.checked=e.isPrint):e.isPrint=this.formFieldPrinting.checked,i>-1&&(n[i].FormField.isPrint=e.isPrint,this.pdfViewerBase.formFieldCollection[i].FormField.isPrint=e.isPrint),this.pdfViewer.nameTable[e.id.split("_")[0]].isPrint=e.isPrint,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,r,!1,o,a)},s.prototype.getFormFiledIndex=function(e){if(null==this.pdfViewerBase.formFieldCollection||0==this.pdfViewerBase.formFieldCollection.length)return-1;var t=this.pdfViewerBase.formFieldCollection.findIndex(function(r){return r.Key.split("_")[0]===e});if(t>-1)return t;for(var i=0;i<this.pdfViewerBase.formFieldCollection.length;i++)if("RadioButton"===this.pdfViewerBase.formFieldCollection[i].FormField.formFieldAnnotationType&&this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem)for(var n=0;n<this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem.length;n++)if(this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[n].id.split("_")[0]===e)return i;return-1},s.prototype.updateFontStyle=function(e,t,i,n,r){var o=!1,a="",l="";return this.formFieldBold?("Bold"!==t.fontStyle&&(o=!0,a+=t.font.isBold?"Bold, ":""),i?t.font.isBold?this.setFontStyleValues(t,"Bold",this.formFieldBold,e,!0,"bold",n,r):this.setFontStyleValues(t,"None",this.formFieldBold,e,!1,"",n,r):"bold"===this.formFieldBold?this.setFontStyleValues(t,"Bold",this.formFieldBold,e,!0,"bold",n,r):this.setFontStyleValues(t,"None","bold",e,!1,"",n,r)):t.font.isBold&&this.setFontStyleValues(t,"None","bold",e,!1,"",n,r),l+=t.font.isBold?"Bold, ":"",this.formFieldItalic?("Italic"!==t.fontStyle&&(o=!0,a+=t.font.isItalic?"Italic, ":""),i?t.font.isItalic?this.setFontStyleValues(t,"Italic",this.formFieldItalic,e,!0,"italic",n,r):this.setFontStyleValues(t,"None",this.formFieldItalic,e,!1,"",n,r):"italic"===this.formFieldItalic?this.setFontStyleValues(t,"Italic",this.formFieldItalic,e,!0,"italic",n,r):this.setFontStyleValues(t,"None","italic",e,!1,"",n,r)):t.font.isItalic&&this.setFontStyleValues(t,"None","italic",e,!1,"",n,r),l+=t.font.isItalic?"Italic, ":"",this.formFieldUnderline?("Underline"!==t.fontStyle&&(o=!0,a+=t.font.isUnderline?"Underline, ":""),i?t.font.isUnderline?this.setFontStyleValues(t,"Underline",this.formFieldUnderline,e,!0,"underline",n,r):this.setFontStyleValues(t,"None",this.formFieldUnderline,e,!1,"",n,r):"underline"===this.formFieldUnderline?this.setFontStyleValues(t,"Underline",this.formFieldUnderline,e,!0,"underline",n,r):this.setFontStyleValues(t,"None","underline",e,!1,"",n,r)):t.font.isUnderline&&this.setFontStyleValues(t,"None","underline",e,!1,"",n,r),l+=t.font.isUnderline?"Underline, ":"",this.formFieldStrikeOut?("Strikethrough"!==t.fontStyle&&(o=!0,a+=t.font.isStrikeout?"Strikethrough, ":""),i?t.font.isStrikeout?this.setFontStyleValues(t,"Strikethrough",this.formFieldStrikeOut,e,!0,"line-through",n,r):this.setFontStyleValues(t,"None",this.formFieldStrikeOut,e,!1,"",n,r):"line-through"===this.formFieldStrikeOut?this.setFontStyleValues(t,"Strikethrough",this.formFieldStrikeOut,e,!0,"line-through",n,r):this.setFontStyleValues(t,"None","line-through",e,!1,"",n,r)):t.font.isStrikeout&&this.setFontStyleValues(t,"None","line-through",e,!1,"",n,r),[o,a,l+=t.font.isStrikeout?"Strikethrough, ":""]},s.prototype.setFontStyleValues=function(e,t,i,n,r,o,a,l){"bold"===i?(e.fontStyle=t,e.font.isBold=r,n.style.fontWeight=o,this.setDropdownFontStyleValue(n,i,o),a>-1&&(l[a].FormField.font.isBold=r,this.pdfViewerBase.formFieldCollection[a].FormField.font.isBold=r),this.pdfViewer.nameTable[e.id.split("_")[0]].font.isBold=r):"italic"===i?(n.style.fontStyle=o,this.setDropdownFontStyleValue(n,i,o),e.fontStyle=t,e.font.isItalic=r,a>-1&&(l[a].FormField.font.isItalic=r,this.pdfViewerBase.formFieldCollection[a].FormField.font.isItalic=r),this.pdfViewer.nameTable[e.id.split("_")[0]].font.isItalic=r):"underline"===i?(this.setDropdownFontStyleValue(n,i,o),n.style.textDecoration=o,e.fontStyle=t,e.font.isUnderline=r,a>-1&&(l[a].FormField.font.isUnderline=r,this.pdfViewerBase.formFieldCollection[a].FormField.font.isUnderline=r),this.pdfViewer.nameTable[e.id.split("_")[0]].font.isUnderline=r):"line-through"===i&&(this.setDropdownFontStyleValue(n,i,o),n.style.textDecoration=o,e.fontStyle=t,e.font.isStrikeout=r,a>-1&&(l[a].FormField.font.isStrikeout=r,this.pdfViewerBase.formFieldCollection[a].FormField.font.isStrikeout=r),this.pdfViewer.nameTable[e.id.split("_")[0]].font.isStrikeout=r)},s.prototype.setDropdownFontStyleValue=function(e,t,i){if(e.length>0)for(var n=0;n<e.length;n++)"bold"===t?e[n].style.fontWeight=i:"italic"===t?e[n].style.fontStyle=i:("underline"===t||"line-through"===t)&&(e[n].style.textDecoration=i)},s.prototype.updateFormFieldPropertiesChanges=function(e,t,i,n,r,o,a,l,h,d,p,u,f,g,m,y,b,w,S,I,x){this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",{name:t.name,id:t.id,value:t.value,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,color:t.color,backgroundColor:t.backgroundColor,alignment:t.alignment,isReadonly:t.isReadonly,visibility:t.visibility,maxLength:t.maxLength,isRequired:t.isRequired,isPrint:t.isPrint,rotation:t.rotateAngle,tooltip:t.tooltip,options:t.options,isChecked:t.isChecked,isSelected:t.isSelected,previousName:x,currentName:t.name},t.pageIndex,i,n,r,o,a,l,h,d,p,u,f,g,m,y,b,w,S,I)},s.prototype.onCancelClicked=function(e){this.propertiesDialog.hide()},s.prototype.createAppearanceTab=function(){var t=F("div",{id:this.pdfViewer.element.id+"_properties_appearance"});t.style.height="DropdownList"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"ListBox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?"260px":"336px";var i=F("div");i.className="e-pv-properties-header-spliter",t.appendChild(i);var n=F("div",{className:"e-pv-properties-tab-style-prop"});return t.appendChild(n),this.tabControl=new $I(!this.pdfViewer.selectedItems||"ListBox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"DropdownList"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?!this.pdfViewer.selectedItems||"SignatureField"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"InitialField"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?{items:[{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("General")+"</div>"},content:this.createGeneralProperties()},{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("Appearance")+"</div>"},content:this.createAppearanceProperties()}]}:{items:[{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("General")+"</div>"},content:this.createGeneralProperties()}]}:{items:[{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("General")+"</div>"},content:this.createGeneralProperties()},{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("Appearance")+"</div>"},content:this.createAppearanceProperties()},{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("Options")+"</div>"},content:this.createOptionProperties()}]},n),n.children[1].style.height="100%",t},s.prototype.createGeneralProperties=function(){var e=this.pdfViewer.selectedItems.formFields?this.pdfViewer.selectedItems.formFields[0]:null,n=F("div",{id:this.pdfViewer.element.id+"_general_prop_appearance"}),r=F("div",{className:"e-pv-properties-text-edit-prop"});n.appendChild(r);var o=F("div",{className:"e-pv-properties-form-field-name-main-div"}),a=F("div",{className:"e-pv-properties-name-edit-prop"}),l=F("input",{className:"e-pv-properties-name-edit-input e-input"});a.appendChild(l),o.appendChild(a),this.formFieldName=new Hs({type:"text",floatLabelType:"Always",placeholder:this.pdfViewer.localeObj.getConstant("Name"),value:e.name,cssClass:"e-pv-properties-formfield-name"},l),r.appendChild(o);var h=F("div",{className:"e-pv-properties-form-field-tooltip-main-div"}),d=F("div",{className:"e-pv-properties-tooltip-edit-prop"}),p=F("input",{className:"e-pv-properties-tooltip-prop-input e-input"});d.appendChild(p),h.appendChild(d),this.formFieldTooltip=new Hs({type:"text",floatLabelType:"Always",placeholder:this.pdfViewer.localeObj.getConstant("Tooltip"),value:e.tooltip,cssClass:"e-pv-properties-formfield-tooltip"},p),r.appendChild(h);var u=F("div",{className:"e-pv-properties-visibility-style-prop"});n.appendChild(u);var f=F("div",{className:"e-pv-properties-form-field-value-main-div"}),g=F("div",{className:"e-pv-properties-value-edit-prop"}),m=F("input",{className:"e-pv-properties-value-input e-input"});g.appendChild(m),f.appendChild(g),this.formFieldValue=new Hs("PasswordField"==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?{type:"password",floatLabelType:"Always",placeholder:this.pdfViewer.localeObj.getConstant("Value"),value:e.value,cssClass:"e-pv-properties-formfield-value"}:{type:"text",floatLabelType:"Always",placeholder:this.pdfViewer.localeObj.getConstant("Value"),value:e.value,cssClass:"e-pv-properties-formfield-value"},m),"Textbox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"PasswordField"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"RadioButton"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"Checkbox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&(this.formFieldValue.enabled=!1,this.formFieldValue.value=""),u.appendChild(f);var y=F("div",{className:"e-pv-properties-form-field-visibility-main-div"}),b=F("div",{className:"e-pv-properties-visibility-edit-prop"}),w=F("input",{className:"e-pv-properties-formfield-visibility"});b.appendChild(w),y.appendChild(b),this.formFieldVisibility=new yh({dataSource:["visible","hidden"],floatLabelType:"Always",index:"visible"===e.visibility?0:1,value:e.visibility,placeholder:this.pdfViewer.localeObj.getConstant("Form Field Visibility"),cssClass:"e-pv-properties-formfield-visibility"},w),u.appendChild(y);var I=F("div",{className:"e-pv-properties-checkbox-main-div-prop"}),x=F("input",{className:"e-pv-properties-checkbox-readonly-input e-input"});if(I.appendChild(x),this.formFieldReadOnly=new Os({label:this.pdfViewer.localeObj.getConstant("Read Only"),checked:e.isReadonly,cssClass:"e-pv-properties-form-field-checkbox"},x),"Checkbox"===this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType||"RadioButton"===this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType){var T=F("input",{className:"e-pv-properties-checkbox-checked-input e-input"});I.appendChild(T),this.formFieldChecked=new Os({label:this.pdfViewer.localeObj.getConstant("Checked"),cssClass:"e-pv-properties-form-field-checkbox",checked:e.isChecked||e.isSelected,change:this.checkBoxChange.bind(this)},T)}var L=F("input",{className:"e-pv-properties-checkbox-required-input e-input"});I.appendChild(L),this.formFieldRequired=new Os({label:this.pdfViewer.localeObj.getConstant("Required"),checked:e.isRequired,cssClass:"e-pv-properties-form-field-checkbox"},L);var N=F("input",{className:"e-pv-properties-checkbox-printing-input e-input"});if(I.appendChild(N),this.formFieldPrinting=new Os({label:this.pdfViewer.localeObj.getConstant("Show Printing"),checked:e.isPrint,cssClass:"e-pv-properties-form-field-checkbox"},N),"Textbox"===e.formFieldAnnotationType){var O=F("input",{className:"e-pv-properties-checkbox-multiline-input e-input"});I.appendChild(O),this.formFieldMultiline=new Os({label:this.pdfViewer.localeObj.getConstant("Multiline"),checked:e.isMultiline,cssClass:"e-pv-properties-form-field-checkbox",change:this.multilineCheckboxChange.bind(this)},O)}return n.appendChild(I),n},s.prototype.checkBoxChange=function(e){this.checkboxCheckedState=e.checked},s.prototype.multilineCheckboxChange=function(e){this.multilineCheckboxCheckedState=!0},s.prototype.setToolTip=function(e,t){var i=new za({content:oo(function(){return e})});i.appendTo(t),i.beforeOpen=this.tooltipBeforeOpen.bind(this)},s.prototype.tooltipBeforeOpen=function(e){var t=this.pdfViewer.nameTable[e.target.id.split("_")[0]];c(t)||(e.element.children[0].innerHTML=t.tooltip)},s.prototype.createAppearanceProperties=function(){var e=this.pdfViewer.selectedItems.formFields?this.pdfViewer.selectedItems.formFields[0]:null,n=this.pdfViewer.element.id,r=F("div",{id:n+"_formatting_text_prop_appearance"}),o=F("div",{className:"e-pv-properties-format-text-style-prop"});r.appendChild(o),this.createLabelElement(this.pdfViewer.localeObj.getConstant("Formatting"),o,!0,"e-pv-properties-formfield-label",n+"_properties_formfield_formatting");var a=F("div",{className:"e-pv-properties-font-items-container"}),l=F("div",{className:"e-pv-properties-font-family-container"}),h=F("input",{className:"e-pv-properties-format-font-family-prop"});l.appendChild(h),a.appendChild(l),this.formFieldFontFamily=new yh({dataSource:["Helvetica","Courier","Times New Roman","Symbol","ZapfDingbats"],value:this.getFontFamily(e.fontFamily)?e.fontFamily:"Helvetica",cssClass:"e-pv-properties-formfield-fontfamily"},h),this.setToolTip(this.pdfViewer.localeObj.getConstant("Font family"),l);var d=F("div",{className:"e-pv-properties-font-size-container"}),p=F("input",{className:"e-pv-properties-format-font-family-prop"});d.appendChild(p),a.appendChild(d),this.formFieldFontSize=new yh({dataSource:["6px","8px","10px","12px","14px","16px","18px","20px","24px","28px","32px","36px","40px"],value:e.fontSize+"px",cssClass:"e-pv-properties-formfield-fontsize"},p),this.setToolTip(this.pdfViewer.localeObj.getConstant("Font size"),d);var u=F("div",{className:"e-pv-properties-form-field-font-style"});u.onclick=this.fontStyleClicked.bind(this),u.appendChild(this.addClassFontItem("_formField_bold","e-pv-bold-icon",e.font.isBold)),u.appendChild(this.addClassFontItem("_formField_italic","e-pv-italic-icon",e.font.isItalic)),u.appendChild(this.addClassFontItem("_formField_underline_textinput","e-pv-underlinetext-icon",e.font.isUnderline)),u.appendChild(this.addClassFontItem("_formField_strikeout","e-pv-strikeout-icon",e.font.isStrikeout)),a.appendChild(u),this.getFontStyle(e.font),r.appendChild(a);var f=F("div",{className:"e-pv-properties-font-color-container"}),g=F("div",{className:"e-pv-properties-form-field-font-align"});g.onclick=this.fontAlignClicked.bind(this);var m=e.alignment.toLowerCase();g.appendChild(this.addClassFontItem("_formField_left_align","e-pv-left-align-icon","left"===m)),g.appendChild(this.addClassFontItem("_formField_center_align","e-pv-center-align-icon","center"===m)),g.appendChild(this.addClassFontItem("_formField_right_align","e-pv-right-align-icon","right"===m)),this.getAlignment(m),f.appendChild(g),this.fontColorElement=F("div",{className:"e-pv-formfield-textcolor-icon",id:this.pdfViewer.element.id+"formField_textColor"}),this.fontColorElement.setAttribute("role","combobox"),this.fontColorPalette=this.createColorPicker(this.fontColorElement.id,e.color),"black"!==e.color&&(this.fontColorValue=e.color),this.fontColorPalette.change=this.onFontColorChange.bind(this),this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,"e-pv-annotation-textcolor-icon",this.fontColorPalette.element.parentElement),f.appendChild(this.fontColorElement),this.setToolTip(this.pdfViewer.localeObj.getConstant("Font color"),this.fontColorDropDown.element),this.updateColorInIcon(this.fontColorElement,this.pdfViewer.selectedItems.formFields[0].color),("Checkbox"===e.formFieldAnnotationType||"RadioButton"===e.formFieldAnnotationType)&&(this.fontColorPalette.disabled=!0,this.fontColorDropDown.disabled=!0,this.fontColorElement.style.pointerEvents="none",this.fontColorElement.style.opacity="0.5",g.style.pointerEvents="none",g.style.opacity="0.5",this.formFieldFontSize.enabled=!1,this.formFieldFontFamily.enabled=!1,l.style.pointerEvents="none",d.style.pointerEvents="none",u.style.pointerEvents="none",u.style.opacity="0.5");var y=F("div",{className:"e-pv-formfield-maxlength-group",id:this.pdfViewer.element.id+"formField_maxlength_group"}),b=F("div",{className:"e-pv-formfield-maxlength-icon",id:this.pdfViewer.element.id+"formField_maxlength"});y.appendChild(b),this.createLabelElement(this.pdfViewer.localeObj.getConstant("Max Length"),b,!0,"e-pv-properties-formfield-label",n+"_properties_formfield_maxlength");var w=F("div",{className:"e-pv-formfield-maxlength",id:this.pdfViewer.element.id+"formField_maxlength_container"}),S=F("input",{className:"e-pv-formfield-maxlength-input e-input"});S.setAttribute("aria-label","Max Length"),w.appendChild(S),y.appendChild(w),this.maxLengthItem=new zr({format:"n",value:0!==e.maxLength?e.maxLength:0,min:0},S),f.appendChild(y),this.setToolTip(this.pdfViewer.localeObj.getConstant("Max Length"),this.maxLengthItem.element),"Textbox"!==e.formFieldAnnotationType&&"PasswordField"!==e.formFieldAnnotationType&&(this.maxLengthItem.enabled=!1,b.style.pointerEvents="none"),r.appendChild(f);var I=F("div",{className:"e-pv-properties-color-container-style-prop"}),x=F("div",{className:"e-pv-properties-fill-color-style-prop"});r.appendChild(x),this.createLabelElement(this.pdfViewer.localeObj.getConstant("Fill"),x,!0,"e-pv-properties-formfield-label",n+"_properties_formfield_fontcolor"),this.colorDropDownElement=F("div",{className:"e-pv-formfield-fontcolor-icon",id:this.pdfViewer.element.id+"formField_fontColor"}),this.colorDropDownElement.setAttribute("role","combobox"),this.colorPalette=this.createColorPicker(this.colorDropDownElement.id,e.backgroundColor),this.colorPalette.change=this.onColorPickerChange.bind(this),this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,"e-pv-annotation-color-icon",this.colorPalette.element.parentElement),this.setToolTip(this.pdfViewer.localeObj.getConstant("Fill Color"),this.colorDropDown.element),x.appendChild(this.colorDropDownElement),I.appendChild(x),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.selectedItems.formFields[0].backgroundColor);var T=F("div",{className:"e-pv-properties-stroke-color-style-prop"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("Border"),T,!0,"e-pv-properties-formfield-label",n+"_properties_formfield_strokecolor"),this.strokeDropDownElement=F("div",{className:"e-pv-formfield-strokecolor-icon",id:this.pdfViewer.element.id+"formField_strokeColor"}),this.strokeDropDownElement.setAttribute("role","combobox"),this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id,e.borderColor),this.strokeColorPicker.change=this.onStrokePickerChange.bind(this),this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,"e-pv-annotation-stroke-icon",this.strokeColorPicker.element.parentElement),this.setToolTip(this.pdfViewer.localeObj.getConstant("Border Color"),this.strokeDropDown.element),T.appendChild(this.strokeDropDownElement),I.appendChild(T),this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.formFields[0].borderColor);var L=F("div",{className:"e-pv-properties-stroke-thickness-style-prop"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("Thickness"),L,!0,"e-pv-properties-formfield-label",n+"_properties_formfield_strokethickness"),this.thicknessElement=F("div",{className:"e-pv-formfield-strokethickness-icon",id:this.pdfViewer.element.id+"formField_strokethickness"}),this.thicknessElement.setAttribute("role","combobox");var N=this.createThicknessSlider(this.thicknessElement.id);return this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,"e-pv-annotation-thickness-icon",N),this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this),this.setToolTip(this.pdfViewer.localeObj.getConstant("Thickness"),this.thicknessDropDown.element),this.thicknessSlider.change=this.thicknessChange.bind(this),this.thicknessSlider.changed=this.thicknessChange.bind(this),L.appendChild(this.thicknessElement),I.appendChild(L),r.appendChild(I),r},s.prototype.thicknessChange=function(e){1===this.pdfViewer.selectedItems.formFields.length&&(this.formFieldBorderWidth=e.value,this.updateThicknessIndicator())},s.prototype.thicknessDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.formFields.length&&(this.formFieldBorderWidth=this.pdfViewer.selectedItems.formFields[0].thickness.toString(),this.thicknessSlider.value=this.pdfViewer.selectedItems.formFields[0].thickness),this.updateThicknessIndicator()},s.prototype.updateThicknessIndicator=function(){this.thicknessIndicator.textContent=this.thicknessSlider.value+" pt"},s.prototype.createOptionProperties=function(){var e=this,t=this.pdfViewer.element.id,i=F("div",{id:t+"_option_prop_appearance"}),n=F("div",{className:"e-pv-properties-form-field-list-add-div"}),r=F("div",{className:"e-pv-properties-form-field-list-item-main-div"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("List Item"),r,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_listitem");var o=F("div",{className:"e-pv-properties-list-item-edit-prop"}),a=F("input",{className:"e-pv-properties-list-item-input e-input"});a.setAttribute("aria-label","Item Name"),a.addEventListener("keyup",function(q){if(e.formFieldAddButton.disabled=!0,e.formFieldListItem.value=q.target.value,q.target&&q.target.value)if(e.formFieldListItemCollection.length>0)for(var W=0;W<e.formFieldListItemCollection.length;W++){if(e.formFieldListItemCollection[W]===q.target.value){e.formFieldAddButton.disabled=!0;break}e.formFieldAddButton.disabled=!1}else e.formFieldAddButton.disabled=!1}),o.appendChild(a),r.appendChild(o),this.formFieldListItem=new Hs({type:"text",cssClass:"e-pv-properties-formfield-listitem"},a),n.appendChild(r),i.appendChild(n);var l=F("div",{className:"e-pv-properties-form-field-list-btn-div"}),h=F("button",{className:"e-btn"});h.addEventListener("click",this.addListItemOnClick.bind(this)),l.appendChild(h),this.formFieldAddButton=new li({content:this.pdfViewer.localeObj.getConstant("Add"),disabled:!0,cssClass:"e-pv-properties-dropdown-btn"},h),n.appendChild(l);var d=F("div",{className:"e-pv-properties-form-field-export-value-div"}),p=F("div",{className:"e-pv-properties-form-field-export-value-main-div"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("Export Value"),p,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_exportValue");var u=F("div",{className:"e-pv-properties-export-value-edit-prop"}),f=F("input",{className:"e-pv-properties-export-value-input e-input"});f.setAttribute("aria-label","Item Value"),u.appendChild(f),p.appendChild(u),this.formFieldListItem=new Hs({type:"text",cssClass:"e-pv-properties-formfield-exportvalue"},f),d.appendChild(p),i.appendChild(d);var g=F("div",{className:"e-pv-properties-form-field-option-dropdown-list-div"}),m=F("div",{className:"e-pv-properties-form-field-option-dropdown-list-item-div"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("DropdownList"===this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?"Dropdown Item List":"List Box Item List"),m,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_dropdown_listitem"),g.appendChild(m);var b=F("div",{className:"e-pv-properties-form-field-btn-textarea-container"}),w=F("div",{className:"e-pv-properties-formfield-textarea",styles:"width:300px;height:123px;border:1px solid #E0E0E0;margin-right:15px;overflow:auto"}),S=F("ul",{id:this.pdfViewer.element.id+"_ul_list_item",className:"e-pv-form-designer-ul-list-items"}),I=this.createListElement(S);w.appendChild(S),b.appendChild(w);var x=F("div",{className:"e-pv-properties-form-field-group-btn-div"}),T=F("div",{className:"e-pv-properties-form-field-delete-btn-div"}),L=F("button",{className:"e-btn"});L.addEventListener("click",this.deleteListItem.bind(this)),T.appendChild(L),this.formFieldDeleteButton=new li({content:this.pdfViewer.localeObj.getConstant("Delete Item"),disabled:!(I>0),cssClass:"e-pv-properties-dropdown-btn"},L),x.appendChild(T);var N=F("div",{className:"e-pv-properties-form-field-up-btn-div"}),O=F("button",{className:"e-btn"});O.addEventListener("click",this.moveUpListItem.bind(this)),N.appendChild(O),this.formFieldUpButton=new li({content:this.pdfViewer.localeObj.getConstant("Up"),disabled:!(I>1),cssClass:"e-pv-properties-dropdown-btn"},O),x.appendChild(N);var _=F("div",{className:"e-pv-properties-form-field-down-btn-div"}),B=F("button",{className:"e-btn"});return B.addEventListener("click",this.moveDownListItem.bind(this)),_.appendChild(B),this.formFieldDownButton=new li({content:this.pdfViewer.localeObj.getConstant("Down"),disabled:!0,cssClass:"e-pv-properties-dropdown-btn"},B),x.appendChild(_),b.appendChild(x),g.appendChild(b),i.appendChild(g),i},s.prototype.addListItemOnClick=function(){var e=this.formFieldListItem.value;this.formFieldListItemCollection.push(e);var t=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i];n.classList.contains("e-pv-li-select")&&n.classList.remove("e-pv-li-select")}var r=F("li",{className:"e-pv-formfield-li-element"});r.addEventListener("click",this.listItemOnClick.bind(this)),r.innerHTML=e,r.classList.add("e-pv-li-select"),t.appendChild(r),this.formFieldDeleteButton.disabled=!1,this.formFieldAddButton.disabled=!0,r.previousElementSibling&&(this.formFieldUpButton.disabled=!1),r.nextElementSibling||(this.formFieldDownButton.disabled=!0)},s.prototype.listItemOnClick=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i];n.classList.contains("e-pv-li-select")&&n.classList.remove("e-pv-li-select")}e.target&&e.target.classList.add("e-pv-li-select"),this.formFieldDownButton.disabled=!e.target.nextElementSibling,this.formFieldUpButton.disabled=!e.target.previousElementSibling},s.prototype.deleteListItem=function(){var e=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(e.children&&e.children.length>0)for(var t=0;t<e.children.length;t++){var i=e.children[t];i.classList.contains("e-pv-li-select")&&(i.classList.remove("e-pv-li-select"),this.formFieldListItemCollection.splice(t,1),i.previousElementSibling?(i.previousElementSibling.classList.add("e-pv-li-select"),i.previousElementSibling.previousElementSibling||(this.formFieldUpButton.disabled=!0)):i.nextElementSibling&&(i.nextElementSibling.classList.add("e-pv-li-select"),i.nextElementSibling.nextElementSibling||(this.formFieldDownButton.disabled=!0)),i.remove())}e.children&&0===e.children.length&&(this.formFieldDeleteButton.disabled=!0,this.formFieldUpButton.disabled=!0,this.formFieldDownButton.disabled=!0),e.children&&1===e.children.length&&(this.formFieldDeleteButton.disabled=!1,this.formFieldUpButton.disabled=!0,this.formFieldDownButton.disabled=!0)},s.prototype.moveUpListItem=function(){var e=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(e.children&&e.children.length>0)for(var t=0;t<e.children.length;t++){var i=e.children[t];i.classList.contains("e-pv-li-select")&&(i.previousElementSibling?(i.parentNode.insertBefore(i,i.previousElementSibling),i.previousElementSibling||(this.formFieldUpButton.disabled=!0)):this.formFieldUpButton.disabled=!0,i.nextElementSibling&&(this.formFieldDownButton.disabled=!1))}},s.prototype.moveDownListItem=function(){var e,t=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++)if((e=t.children[i]).classList.contains("e-pv-li-select")){if(e.nextElementSibling){e.parentNode.insertBefore(e.nextElementSibling,e);break}this.formFieldDownButton.disabled=!0}e.nextElementSibling||(this.formFieldDownButton.disabled=!0),e.previousElementSibling&&(this.formFieldUpButton.disabled=!1)},s.prototype.createListElement=function(e){var t=this.pdfViewer.selectedItems.formFields[0];if(t&&t.options&&t.options.length>0){for(var i=0;i<t.options.length;i++){var n=t.options[i].itemName;if(this.formFieldListItemCollection[i]!==t.options[i].itemName){this.formFieldListItemCollection.push(n);var r=F("li",{className:"e-pv-formfield-li-element"});r.addEventListener("click",this.listItemOnClick.bind(this)),r.addEventListener("focus",this.focusFormFields.bind(this)),r.addEventListener("blur",this.blurFormFields.bind(this)),r.innerHTML=n,e.appendChild(r)}}e.children[e.children.length-1].classList.add("e-pv-li-select")}return e.children.length},s.prototype.createThicknessSlider=function(e){var t=F("div",{className:"e-pv-annotation-thickness-popup-container"});document.body.appendChild(t);var i=F("span",{id:e+"_label",className:"e-pv-annotation-thickness-label"});i.textContent=this.pdfViewer.localeObj.getConstant("Line Thickness");var n=F("div",{id:e+"_slider"});return this.thicknessSlider=new $u({type:"MinRange",cssClass:"e-pv-annotation-thickness-slider",max:12,min:0}),this.thicknessIndicator=F("div",{id:e+"_thickness_indicator",className:"e-pv-annotation-thickness-indicator"}),this.thicknessIndicator.textContent="0 pt",this.pdfViewer.enableRtl?(t.appendChild(this.thicknessIndicator),t.appendChild(n),this.thicknessSlider.enableRtl=!0,this.thicknessSlider.appendTo(n),t.appendChild(i)):(t.appendChild(i),t.appendChild(n),this.thicknessSlider.appendTo(n),t.appendChild(this.thicknessIndicator)),this.thicknessSlider.element.parentElement.classList.add("e-pv-annotation-thickness-slider-container"),t},s.prototype.createColorPicker=function(e,t){var i=F("input",{id:e+"_target"});document.body.appendChild(i);var n=new xm({inline:!0,mode:"Palette",cssClass:"e-show-value",enableOpacity:!1,value:t,showButtons:!1,modeSwitcher:!1});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(i),n},s.prototype.fontStyleClicked=function(e){if(e.target)if(-1!==e.target.id.indexOf("formField_bold"))(t=-1!==e.target.id.indexOf("formField_bold_div")?e.target:e.target.parentElement).classList.contains("e-pv-li-select")&&(this.isBold=!0),this.isBold=!this.isBold,this.isBold?(this.formFieldBold="bold",t.classList.add("e-pv-li-select")):(this.formFieldBold="normal",t.classList.remove("e-pv-li-select"));else if(-1!==e.target.id.indexOf("formField_italic"))(t=-1!==e.target.id.indexOf("formField_italic_div")?e.target:e.target.parentElement).classList.contains("e-pv-li-select")&&(this.isItalic=!0),this.isItalic=!this.isItalic,this.isItalic?(this.formFieldItalic="italic",t.classList.add("e-pv-li-select")):(this.formFieldItalic="normal",t.classList.remove("e-pv-li-select"));else if(-1!==e.target.id.indexOf("formField_underline"))(t=-1!==e.target.id.indexOf("formField_underline_textinput_div")?e.target:e.target.parentElement).classList.contains("e-pv-li-select")&&(this.isUnderline=!0),this.isUnderline=!this.isUnderline,this.isUnderline?(this.formFieldUnderline="underline",this.isStrikeThrough=!1,t.classList.add("e-pv-li-select")):(this.formFieldUnderline="none",t.classList.remove("e-pv-li-select"));else if(-1!==e.target.id.indexOf("formField_strikeout")){var t;(t=-1!==e.target.id.indexOf("formField_strikeout_div")?e.target:e.target.parentElement).classList.contains("e-pv-li-select")&&(this.isStrikeThrough=!0),this.isStrikeThrough=!this.isStrikeThrough,this.isStrikeThrough?(this.formFieldStrikeOut="line-through",this.isUnderline=!1,t.classList.add("e-pv-li-select")):(this.formFieldStrikeOut="none",t.classList.remove("e-pv-li-select"))}},s.prototype.clearFontAlignIconSelection=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.contains("e-pv-li-select")&&e.children[t].classList.remove("e-pv-li-select")},s.prototype.fontAlignClicked=function(e){if(e.target)if(e.target.classList.remove("e-pv-li-select"),-1!==e.target.id.indexOf("_formField_left_align")){var t=-1!==e.target.id.indexOf("_formField_left_align_div")?e.target:e.target.parentElement;this.formFieldAlign="left",this.clearFontAlignIconSelection(e.currentTarget),t.classList.add("e-pv-li-select")}else-1!==e.target.id.indexOf("_formField_right_align")?(t=-1!==e.target.id.indexOf("_formField_right_align_div")?e.target:e.target.parentElement,this.formFieldAlign="right",this.clearFontAlignIconSelection(e.currentTarget),t.classList.add("e-pv-li-select")):(t=-1!==e.target.id.indexOf("_formField_center_align_div")?e.target:e.target.parentElement,this.formFieldAlign="center",this.clearFontAlignIconSelection(e.currentTarget),t.classList.add("e-pv-li-select"))},s.prototype.onFontColorChange=function(e){this.fontColorValue=""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.updateColorInIcon(this.fontColorElement,this.fontColorValue),this.fontColorDropDown.toggle()},s.prototype.onColorPickerChange=function(e){this.backgroundColorValue=""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.updateColorInIcon(this.colorDropDownElement,this.backgroundColorValue),this.colorDropDown.toggle()},s.prototype.updateColorInIcon=function(e,t){e.childNodes[0].style.borderBottomColor=t},s.prototype.onStrokePickerChange=function(e){this.borderColorValue=""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.updateColorInIcon(this.strokeDropDownElement,this.borderColorValue),this.strokeDropDown.toggle()},s.prototype.createDropDownButton=function(e,t,i){var n=document.getElementById(i.id+"-popup");n&&n.remove();var r=new Br({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(r.enableRtl=!0),r.appendTo(e),r},s.prototype.addClassFontItem=function(e,t,i){var n=F("div",{id:this.pdfViewer.element.id+e+"_div"});n.classList.add(t+"-div");var r=F("span",{id:this.pdfViewer.element.id+e+"_span"});switch(r.classList.add(t),r.classList.add("e-pv-icon"),t){case"e-pv-bold-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Bold"),n);break;case"e-pv-italic-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Italic"),n);break;case"e-pv-underlinetext-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Underlines"),n);break;case"e-pv-strikeout-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Strikethroughs"),n);break;case"e-pv-left-align-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Align left"),n);break;case"e-pv-center-align-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Center"),n);break;case"e-pv-right-align-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Align right"),n)}return i&&n.classList.add("e-pv-li-select"),n.appendChild(r),n},s.prototype.createLabelElement=function(e,t,i,n,r){var o=F("div",{id:r+"_container",className:n+"-container"}),a=null;i&&((a=F("div",{id:r+"_label",className:n})).textContent=e,o.appendChild(a)),t.appendChild(a)},s.prototype.setReadOnlyToFormField=function(e,t){for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var n=this.pdfViewer.formFieldCollection[i];if(n.formFieldAnnotationType===e.formFieldAnnotationType&&n.name===e.name&&n.id===e.id)switch(n.isReadonly=t,n.formFieldAnnotationType){case"Textbox":case"PasswordField":case"DropdownList":case"ListBox":case"SignatureField":case"InitialField":var r=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild;this.setReadOnlyToElement(n,r,t);break;case"RadioButton":var o=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild;this.setReadOnlyToElement(n,o,t);break;case"Checkbox":var a=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;this.setReadOnlyToElement(n,a,t)}}},s.prototype.getFormDesignerSignField=function(e){for(var i,t=this.pdfViewer.formFieldCollections,n=0;n<t.length;n++)("SignatureField"===(i=t[n].type)||"InitialField"===i)&&e.push(t[n]);return e},s.prototype.setRequiredToFormField=function(e,t){for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var n=this.pdfViewer.formFieldCollection[i];if(n.formFieldAnnotationType===e.formFieldAnnotationType&&n.name===e.name&&n.id===e.id)switch(n.isRequired=t,n.formFieldAnnotationType){case"Textbox":case"PasswordField":case"DropdownList":case"SignatureField":case"InitialField":var r=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild;this.setRequiredToElement(n,r,t);break;case"RadioButton":var o=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild;this.setRequiredToElement(n,o,t),this.updateFormFieldCollections(n);break;case"Checkbox":var a=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;this.setRequiredToElement(n,a,t)}}},s.prototype.setReadOnlyToElement=function(e,t,i){if(i)if(t.disabled=!0,"RadioButton"===e.formFieldAnnotationType)t.parentElement.style.cursor="default",t.parentElement.style.backgroundColor="transparent";else if("SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){t.parentElement.style.backgroundColor="transparent";var n=c(e.thickness)?e.thickness:1;t.parentElement.style.borderWidth=n}else t.style.cursor="default",t.style.backgroundColor="transparent";else t.disabled=!1,"RadioButton"===e.formFieldAnnotationType?t.parentElement.style.backgroundColor=e.backgroundColor:"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType?t.parentElement.style.backgroundColor=this.getSignatureBackground(e.backgroundColor?e.backgroundColor:"#FFE48559"):t.style.backgroundColor=e.backgroundColor},s.prototype.setRequiredToElement=function(e,t,i){i?(t.required=!0,t.style.border="1px solid red","RadioButton"===e.formFieldAnnotationType?t.parentElement.style.boxShadow="red 0px 0px 0px "+(0===e.thickness?1:e.thickness)+"px":"SignatureField"!==e.formFieldAnnotationType&&"InitialField"!==e.formFieldAnnotationType||(t.style.border=(e.thickness>0?e.thickness:1)+"px solid red")):(t.required=!1,t.style.borderWidth="SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType?e.thickness:e.thickness+"px",t.style.borderColor=e.borderColor,"RadioButton"===e.formFieldAnnotationType&&(t.parentElement.style.boxShadow=e.borderColor+" 0px 0px 0px "+e.thickness+"px"))},s.prototype.destroyPropertiesWindow=function(){this.formFieldListItemCollection=[],this.formFieldListItemDataSource=[],this.formFieldFontFamily=null,this.formFieldFontSize=null,this.formFieldAlign=null,this.fontColorValue=null,this.backgroundColorValue=null,this.borderColorValue=null,this.formFieldBorderWidth=null,this.formFieldName=null,this.formFieldChecked=null,this.formFieldReadOnly=null,this.formFieldRequired=null,this.formFieldTooltip=null,this.formFieldPrinting=null,this.formFieldMultiline=null,this.formFieldVisibility=null;var e=this.pdfViewerBase.getElement("_properties_window");e&&e.parentElement.removeChild(e)},s.prototype.destroy=function(){this.destroyPropertiesWindow()},s.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},s.prototype.getModuleName=function(){return"FormDesigner"},s.prototype.updateAnnotationCanvas=function(e,t,i,n){var r=this.pdfViewerBase.getZoomRatio();e.width=t*r,e.height=i*r,e.style.width=t+"px",e.style.height=i+"px",e.style.position="absolute",e.style.zIndex="1",this.pdfViewerBase.applyElementStyles(e,n)},s.prototype.getFontFamily=function(e){return["Helvetica","Courier","TimesRoman","Symbol","ZapfDingbats"].indexOf(e)>-1},s.prototype.updateTextFieldSettingProperties=function(e,t,i){var n=this.pdfViewer.textFieldSettings;!c(n.isReadOnly)&&this.textFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!c(n.isRequired)&&this.textFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.value&&this.textFieldPropertyChanged.isValueChanged&&(e.value=n.value),n.backgroundColor&&"white"!==n.backgroundColor&&this.textFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.textFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.alignment&&"Left"!==n.alignment&&this.textFieldPropertyChanged.isAlignmentChanged&&(e.alignment=n.alignment),n.color&&"black"!==n.color&&this.textFieldPropertyChanged.isColorChanged&&(e.color=n.color),n.fontFamily&&"Helvetica"!==n.fontFamily&&this.textFieldPropertyChanged.isFontFamilyChanged&&(e.fontFamily=n.fontFamily),n.fontSize&&10!==n.fontSize&&this.textFieldPropertyChanged.isFontSizeChanged&&(e.fontSize=n.fontSize),n.fontStyle&&this.textFieldPropertyChanged.isFontStyleChanged&&(e.fontStyle=this.getFontStyleName(n.fontStyle,e)),n.name&&this.textFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.textFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.textFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.maxLength&&this.textFieldPropertyChanged.isMaxLengthChanged&&(e.maxLength=n.maxLength),n.visibility&&this.textFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!c(n.isPrint)&&this.textFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),!c(n.isMultiline)&&this.textFieldPropertyChanged.isMultilineChanged&&(e.isMultiline=n.isMultiline)},s.prototype.updatePasswordFieldSettingProperties=function(e,t,i){var n=this.pdfViewer.passwordFieldSettings;!c(n.isReadOnly)&&this.passwordFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!c(n.isRequired)&&this.passwordFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.value&&this.passwordFieldPropertyChanged.isValueChanged&&(e.value=n.value),n.backgroundColor&&"white"!==n.backgroundColor&&this.passwordFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.passwordFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.alignment&&"Left"!==n.alignment&&this.passwordFieldPropertyChanged.isAlignmentChanged&&(e.alignment=n.alignment),n.color&&"black"!==n.color&&this.passwordFieldPropertyChanged.isColorChanged&&(e.color=n.color),n.fontFamily&&"Helvetica"!==n.fontFamily&&this.passwordFieldPropertyChanged.isFontFamilyChanged&&(e.fontFamily=n.fontFamily),n.fontSize&&10!==n.fontSize&&this.passwordFieldPropertyChanged.isFontSizeChanged&&(e.fontSize=n.fontSize),n.fontStyle&&this.passwordFieldPropertyChanged.isFontStyleChanged&&(e.fontStyle=this.getFontStyleName(n.fontStyle,e)),n.name&&this.passwordFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.passwordFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.passwordFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.maxLength&&this.passwordFieldPropertyChanged.isMaxLengthChanged&&(e.maxLength=n.maxLength),n.visibility&&this.passwordFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!c(n.isPrint)&&this.passwordFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint)},s.prototype.updateCheckBoxFieldSettingsProperties=function(e,t,i){var n=this.pdfViewer.checkBoxFieldSettings;!c(n.isReadOnly)&&this.checkBoxFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!c(n.isRequired)&&this.checkBoxFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.backgroundColor&&"white"!==n.backgroundColor&&this.checkBoxFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.checkBoxFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.name&&this.checkBoxFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.checkBoxFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.checkBoxFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.visibility&&this.checkBoxFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!c(n.isPrint)&&this.checkBoxFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),!c(n.isChecked)&&this.checkBoxFieldPropertyChanged.isCheckedChanged&&(e.isChecked=n.isChecked)},s.prototype.updateRadioButtonFieldSettingProperties=function(e,t,i){var n=this.pdfViewer.radioButtonFieldSettings;!c(n.isReadOnly)&&this.radioButtonFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!c(n.isRequired)&&this.radioButtonFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.backgroundColor&&"white"!==n.backgroundColor&&this.radioButtonFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.radioButtonFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.name&&this.radioButtonFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.radioButtonFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.radioButtonFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.visibility&&this.radioButtonFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!c(n.isPrint)&&this.radioButtonFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),!c(n.isSelected)&&this.radioButtonFieldPropertyChanged.isSelectedChanged&&(e.isSelected=n.isSelected)},s.prototype.updateDropdownFieldSettingsProperties=function(e,t,i){var n=this.pdfViewer.DropdownFieldSettings;!c(n.isReadOnly)&&this.dropdownFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!c(n.isRequired)&&this.dropdownFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.backgroundColor&&"white"!==n.backgroundColor&&this.dropdownFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.dropdownFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.alignment&&"Left"!==n.alignment&&this.dropdownFieldPropertyChanged.isAlignmentChanged&&(e.alignment=n.alignment),n.color&&"black"!==n.color&&this.dropdownFieldPropertyChanged.isColorChanged&&(e.color=n.color),n.fontFamily&&"Helvetica"!==n.fontFamily&&this.dropdownFieldPropertyChanged.isFontFamilyChanged&&(e.fontFamily=n.fontFamily),n.fontSize&&10!==n.fontSize&&this.dropdownFieldPropertyChanged.isFontSizeChanged&&(e.fontSize=n.fontSize),n.fontStyle&&this.dropdownFieldPropertyChanged.isFontStyleChanged&&(e.fontStyle=this.getFontStyleName(n.fontStyle,e)),n.name&&this.dropdownFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.dropdownFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n&&1!==n.thickness&&this.dropdownFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.visibility&&this.dropdownFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!c(n.isPrint)&&this.dropdownFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),n.options&&this.dropdownFieldPropertyChanged.isOptionChanged&&(e.options=e.options&&e.options.length>0?e.options:n.options)},s.prototype.updatelistBoxFieldSettingsProperties=function(e,t,i){var n=this.pdfViewer.listBoxFieldSettings;!c(n.isReadOnly)&&this.listBoxFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!c(n.isRequired)&&this.listBoxFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.backgroundColor&&"white"!==n.backgroundColor&&this.listBoxFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.listBoxFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.alignment&&"Left"!==n.alignment&&this.listBoxFieldPropertyChanged.isAlignmentChanged&&(e.alignment=n.alignment),n.color&&"black"!==n.color&&this.listBoxFieldPropertyChanged.isColorChanged&&(e.color=n.color),n.fontFamily&&"Helvetica"!==n.fontFamily&&this.listBoxFieldPropertyChanged.isFontFamilyChanged&&(e.fontFamily=n.fontFamily),n.fontSize&&10!==n.fontSize&&this.listBoxFieldPropertyChanged.isFontSizeChanged&&(e.fontSize=n.fontSize),n.fontStyle&&this.listBoxFieldPropertyChanged.isFontStyleChanged&&(e.fontStyle=this.getFontStyleName(n.fontStyle,e)),n.name&&this.listBoxFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.listBoxFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.listBoxFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.visibility&&this.listBoxFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!c(n.isPrint)&&this.listBoxFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),n.options&&this.listBoxFieldPropertyChanged.isOptionChanged&&(e.options=e.options&&e.options.length>0?e.options:n.options)},s.prototype.updateSignInitialFieldProperties=function(e,t,i,n){var r=this.pdfViewer.initialFieldSettings,o=this.pdfViewer.signatureFieldSettings;t?(!c(r.isReadOnly)&&this.initialFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=r.isReadOnly),!c(r.isRequired)&&this.initialFieldPropertyChanged.isRequiredChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.isRequired=r.isRequired),r.visibility&&this.initialFieldPropertyChanged.isVisibilityChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.visibility=r.visibility),r.tooltip&&this.initialFieldPropertyChanged.isTooltipChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.tooltip=r.tooltip),!c(r.thickness)&&!0===n&&this.initialFieldPropertyChanged.isThicknessChanged&&(e.thickness=r.thickness),r.name&&this.initialFieldPropertyChanged.isNameChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.name=r.name),!c(r.isPrint)&&this.initialFieldPropertyChanged.isPrintChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.isPrint=r.isPrint)):(!c(o.isReadOnly)&&this.signatureFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=o.isReadOnly),!c(o.isRequired)&&this.signatureFieldPropertyChanged.isRequiredChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.isRequired=o.isRequired),o.visibility&&this.signatureFieldPropertyChanged.isVisibilityChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.visibility=o.visibility),o.tooltip&&this.signatureFieldPropertyChanged.isTooltipChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.tooltip=o.tooltip),!c(o.thickness)&&!0===n&&this.signatureFieldPropertyChanged.isThicknessChanged&&(e.thickness=o.thickness),o.name&&this.signatureFieldPropertyChanged.isNameChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.name=o.name),!c(o.isPrint)&&this.signatureFieldPropertyChanged.isPrintChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.isPrint=o.isPrint))},s.prototype.updateSignatureSettings=function(e,t){(t=!c(t)&&t)?(this.initialFieldPropertyChanged.isReadOnlyChanged=!c(e.isReadOnly),this.initialFieldPropertyChanged.isRequiredChanged=!c(e.isRequired),this.initialFieldPropertyChanged.isVisibilityChanged=!c(e.visibility),this.initialFieldPropertyChanged.isTooltipChanged=!c(e.tooltip),this.initialFieldPropertyChanged.isNameChanged=!c(e.name),this.initialFieldPropertyChanged.isPrintChanged=!c(e.isPrint),this.initialFieldPropertyChanged.isThicknessChanged=!c(e.thickness)):(this.signatureFieldPropertyChanged.isReadOnlyChanged=!c(e.isReadOnly),this.signatureFieldPropertyChanged.isRequiredChanged=!c(e.isRequired),this.signatureFieldPropertyChanged.isVisibilityChanged=!c(e.visibility),this.signatureFieldPropertyChanged.isTooltipChanged=!c(e.tooltip),this.signatureFieldPropertyChanged.isNameChanged=!c(e.name),this.signatureFieldPropertyChanged.isPrintChanged=!c(e.isPrint),this.signatureFieldPropertyChanged.isThicknessChanged=!c(e.thickness))},s.prototype.updateTextFieldSettings=function(e){this.textFieldPropertyChanged.isReadOnlyChanged=!c(e.isReadOnly),this.textFieldPropertyChanged.isRequiredChanged=!c(e.isRequired),this.textFieldPropertyChanged.isValueChanged=!c(e.value),this.textFieldPropertyChanged.isBackgroundColorChanged=!c(e.backgroundColor),this.textFieldPropertyChanged.isBorderColorChanged=!c(e.borderColor),this.textFieldPropertyChanged.isAlignmentChanged=!c(e.alignment),this.textFieldPropertyChanged.isColorChanged=!c(e.color),this.textFieldPropertyChanged.isFontFamilyChanged=!c(e.fontFamily),this.textFieldPropertyChanged.isFontSizeChanged=!c(e.fontSize),this.textFieldPropertyChanged.isFontStyleChanged=!c(e.fontStyle),this.textFieldPropertyChanged.isNameChanged=!c(e.name),this.textFieldPropertyChanged.isToolTipChanged=!c(e.tooltip),this.textFieldPropertyChanged.isThicknessChanged=!c(e.thickness),this.textFieldPropertyChanged.isMaxLengthChanged=!c(e.maxLength),this.textFieldPropertyChanged.isVisibilityChanged=!c(e.visibility),this.textFieldPropertyChanged.isPrintChanged=!c(e.isPrint),this.textFieldPropertyChanged.isMultilineChanged=!c(e.isMultiline)},s.prototype.updatePasswordFieldSettings=function(e){this.passwordFieldPropertyChanged.isReadOnlyChanged=!c(e.isReadOnly),this.passwordFieldPropertyChanged.isRequiredChanged=!c(e.isRequired),this.passwordFieldPropertyChanged.isValueChanged=!c(e.value),this.passwordFieldPropertyChanged.isBackgroundColorChanged=!c(e.backgroundColor),this.passwordFieldPropertyChanged.isBorderColorChanged=!c(e.borderColor),this.passwordFieldPropertyChanged.isAlignmentChanged=!c(e.alignment),this.passwordFieldPropertyChanged.isColorChanged=!c(e.color),this.passwordFieldPropertyChanged.isFontFamilyChanged=!c(e.fontFamily),this.passwordFieldPropertyChanged.isFontSizeChanged=!c(e.fontSize),this.passwordFieldPropertyChanged.isFontStyleChanged=!c(e.fontStyle),this.passwordFieldPropertyChanged.isNameChanged=!c(e.name),this.passwordFieldPropertyChanged.isToolTipChanged=!c(e.tooltip),this.passwordFieldPropertyChanged.isThicknessChanged=!c(e.thickness),this.passwordFieldPropertyChanged.isMaxLengthChanged=!c(e.maxLength),this.passwordFieldPropertyChanged.isVisibilityChanged=!c(e.visibility),this.passwordFieldPropertyChanged.isPrintChanged=!c(e.isPrint)},s.prototype.updateCheckBoxFieldSettings=function(e){this.checkBoxFieldPropertyChanged.isReadOnlyChanged=!c(e.isReadOnly),this.checkBoxFieldPropertyChanged.isRequiredChanged=!c(e.isRequired),this.checkBoxFieldPropertyChanged.isBackgroundColorChanged=!c(e.backgroundColor),this.checkBoxFieldPropertyChanged.isBorderColorChanged=!c(e.borderColor),this.checkBoxFieldPropertyChanged.isNameChanged=!c(e.name),this.checkBoxFieldPropertyChanged.isToolTipChanged=!c(e.tooltip),this.checkBoxFieldPropertyChanged.isThicknessChanged=!c(e.thickness),this.checkBoxFieldPropertyChanged.isVisibilityChanged=!c(e.visibility),this.checkBoxFieldPropertyChanged.isPrintChanged=!c(e.isPrint),this.checkBoxFieldPropertyChanged.isCheckedChanged=!c(e.isChecked)},s.prototype.updateRadioButtonFieldSettings=function(e){this.radioButtonFieldPropertyChanged.isReadOnlyChanged=!c(e.isReadOnly),this.radioButtonFieldPropertyChanged.isRequiredChanged=!c(e.isRequired),this.radioButtonFieldPropertyChanged.isBackgroundColorChanged=!c(e.backgroundColor),this.radioButtonFieldPropertyChanged.isBorderColorChanged=!c(e.borderColor),this.radioButtonFieldPropertyChanged.isNameChanged=!c(e.name),this.radioButtonFieldPropertyChanged.isToolTipChanged=!c(e.tooltip),this.radioButtonFieldPropertyChanged.isThicknessChanged=!c(e.thickness),this.radioButtonFieldPropertyChanged.isVisibilityChanged=!c(e.visibility),this.radioButtonFieldPropertyChanged.isPrintChanged=!c(e.isPrint),this.radioButtonFieldPropertyChanged.isSelectedChanged=!c(e.isSelected)},s.prototype.updateDropDownFieldSettings=function(e){this.dropdownFieldPropertyChanged.isReadOnlyChanged=!c(e.isReadOnly),this.dropdownFieldPropertyChanged.isRequiredChanged=!c(e.isRequired),this.dropdownFieldPropertyChanged.isValueChanged=!c(e.value),this.dropdownFieldPropertyChanged.isBackgroundColorChanged=!c(e.backgroundColor),this.dropdownFieldPropertyChanged.isBorderColorChanged=!c(e.borderColor),this.dropdownFieldPropertyChanged.isAlignmentChanged=!c(e.alignment),this.dropdownFieldPropertyChanged.isColorChanged=!c(e.color),this.dropdownFieldPropertyChanged.isFontFamilyChanged=!c(e.fontFamily),this.dropdownFieldPropertyChanged.isFontSizeChanged=!c(e.fontSize),this.dropdownFieldPropertyChanged.isFontStyleChanged=!c(e.fontStyle),this.dropdownFieldPropertyChanged.isNameChanged=!c(e.name),this.dropdownFieldPropertyChanged.isToolTipChanged=!c(e.tooltip),this.dropdownFieldPropertyChanged.isThicknessChanged=!c(e.thickness),this.dropdownFieldPropertyChanged.isVisibilityChanged=!c(e.visibility),this.dropdownFieldPropertyChanged.isPrintChanged=!c(e.isPrint),this.dropdownFieldPropertyChanged.isOptionChanged=!c(e.options)},s.prototype.updateListBoxFieldSettings=function(e){this.listBoxFieldPropertyChanged.isReadOnlyChanged=!c(e.isReadOnly),this.listBoxFieldPropertyChanged.isRequiredChanged=!c(e.isRequired),this.listBoxFieldPropertyChanged.isBackgroundColorChanged=!c(e.backgroundColor),this.listBoxFieldPropertyChanged.isBorderColorChanged=!c(e.borderColor),this.listBoxFieldPropertyChanged.isAlignmentChanged=!c(e.alignment),this.listBoxFieldPropertyChanged.isColorChanged=!c(e.color),this.listBoxFieldPropertyChanged.isFontFamilyChanged=!c(e.fontFamily),this.listBoxFieldPropertyChanged.isFontSizeChanged=!c(e.fontSize),this.listBoxFieldPropertyChanged.isFontStyleChanged=!c(e.fontStyle),this.listBoxFieldPropertyChanged.isNameChanged=!c(e.name),this.listBoxFieldPropertyChanged.isToolTipChanged=!c(e.tooltip),this.listBoxFieldPropertyChanged.isThicknessChanged=!c(e.thickness),this.listBoxFieldPropertyChanged.isVisibilityChanged=!c(e.visibility),this.listBoxFieldPropertyChanged.isPrintChanged=!c(e.isPrint),this.listBoxFieldPropertyChanged.isOptionChanged=!c(e.options)},s.prototype.getFontStyleName=function(e,t){var i="None";return 1===e&&(t.font.isBold=!0,i="Bold"),2===e&&(t.font.isItalic=!0,i="Italic"),3===e&&(t.font.isBold=!0,t.font.isItalic=!0,i="Bold Italic"),4===e&&(t.font.isUnderline=!0,i="Underline"),5===e&&(t.font.isBold=!0,t.font.isUnderline=!0,i="Bold Underline"),6===e&&(t.font.isUnderline=!0,t.font.isItalic=!0,i="Underline Italic"),7===e&&(t.font.isBold=!0,t.font.isItalic=!0,t.font.isUnderline=!0,i="Bold Italic Underline"),8===e&&(t.font.isStrikeout=!0,i="Strikethrough"),9===e&&(t.font.isBold=!0,t.font.isStrikeout=!0,i="Bold Strikethrough"),10===e&&(t.font.isItalic=!0,t.font.isStrikeout=!0,i="Italic Strikethrough"),11===e&&(t.font.isBold=!0,t.font.isItalic=!0,t.font.isStrikeout=!0,i="Bold Italic Strikethrough"),12===e&&(t.font.isUnderline=!0,t.font.isStrikeout=!0,i="Underline Strikethrough"),13===e&&(t.font.isBold=!0,t.font.isUnderline=!0,t.font.isStrikeout=!0,i="Bold Underline Strikethrough"),14===e&&(t.font.isItalic=!0,t.font.isUnderline=!0,t.font.isStrikeout=!0,i="Italic Underline Strikethrough"),15===e&&(t.font.isBold=!0,t.font.isItalic=!0,t.font.isUnderline=!0,t.font.isStrikeout=!0,i="Bold Italic Underline Strikethrough"),i},s.prototype.getAlignment=function(e){var t;"left"===e?t="left":"right"===e?t="right":"center"===e&&(t="center"),this.formFieldAlign=t},s.prototype.getFontStyle=function(e){e.isBold&&(this.formFieldBold="bold"),e.isItalic&&(this.formFieldItalic="italic"),e.isUnderline&&(this.formFieldUnderline="underline"),e.isStrikeout&&(this.formFieldStrikeOut="line-through")},s}(),QLe=function(){function s(e,t){this.createTag=function(i){var n=this,r=i.TagType,o=i.ParentTagType,a=i.Text,l=i.AltText,h=i.Bounds,d=i.ChildElements,p=document.createElement(this.getTag(r));return p.style="padding:0px;margin:0px","Document"!=o&&"Part"!=o&&(p.style.position="absolute"),h&&(this.setStyleToTaggedTextDiv(p,h,i.FontSize,i.FontName,i.FontStyle),this.setTextElementProperties(p)),""!=a.trim()&&(p.innerText=a),l&&""!==l.trim()&&("Image"===r||"Figure"===r)&&(p.alt=l,p.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII="),d&&d.length>0&&d.forEach(function(u){"Table"===r?u.ChildElements&&u.ChildElements.forEach(function(f){p.appendChild(n.createTag(f))}):p.appendChild(n.createTag(u))}),p},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.addTaggedLayer=function(e){var t;if(this.pdfViewer.enableAccessibilityTags&&this.pdfViewerBase.isTaggedPdf){var i=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);t=document.getElementById(this.pdfViewer.element.id+"_taggedLayer_"+e);var n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);n&&n.setAttribute("aria-hidden","true"),t||(t=F("div",{id:this.pdfViewer.element.id+"_taggedLayer_"+e,className:"e-pv-tagged-layer e-pv-text-layer"})),t.innerHTML="",t.style.width=this.pdfViewerBase.pageSize[parseInt(e.toString(),10)].width*this.pdfViewerBase.getZoomFactor()+"px",t.style.height=this.pdfViewerBase.pageSize[parseInt(e.toString(),10)].height*this.pdfViewerBase.getZoomFactor()+"px",t.style.pointerEvents="none",i&&i.appendChild(t)}return t},s.prototype.renderAccessibilityTags=function(e,t){for(var i=this.addTaggedLayer(e),n=0;n<t.length;n++){var r=F("div",{id:this.pdfViewer.element.id+"_taggedText_"+e+"_"+parseInt(n.toString(),10),className:"e-pv-text",attrs:{tabindex:"-1"}}),o=t[parseInt(n.toString(),10)].Bounds;"Paragraph"===t[parseInt(parseInt(n.toString(),10).toString(),10)].TagType&&null===t[parseInt(n.toString(),10)].ChildElements&&""===t[parseInt(n.toString(),10)].Text.trim()||(r.appendChild(this.createTag(t[parseInt(n.toString(),10)])),r.style.display="inline",this.setStyleToTaggedTextDiv(r,o,t[parseInt(n.toString(),10)].FontSize,t[parseInt(n.toString(),10)].FontName,t[parseInt(n.toString(),10)].FontStyle),this.setTextElementProperties(r),i.appendChild(r))}},s.prototype.getTag=function(e){switch(e){case"Paragraph":case"ListBody":default:return"p";case"Figure":case"Image":return"img";case"Article":return"art";case"Annotation":return"annot";case"BibliographyEntry":return"bibentry";case"BlockQuotation":return"blockQuote";case"Caption":return"caption";case"Code":return"code";case"Division":return"div";case"Document":return"document";case"Form":return"form";case"Formula":return"formula";case"Index":return"index";case"Heading":return"h";case"HeadingLevel1":return"h1";case"HeadingLevel2":return"h2";case"HeadingLevel3":return"h3";case"HeadingLevel4":return"h4";case"HeadingLevel5":return"h5";case"HeadingLevel6":return"h6";case"Label":return"label";case"Link":return"a";case"List":return"ul";case"ListItem":return"li";case"Note":return"note";case"Part":return"part";case"Quotation":return"quote";case"Reference":return"reference";case"Section":return"sect";case"Span":return"span";case"Table":return"table";case"TableDataCell":return"td";case"TableHeader":return"th";case"TableOfContent":return"toc";case"TableOfContentItem":return"toci";case"TableRow":return"tr"}},s.prototype.setStyleToTaggedTextDiv=function(e,t,i,n,r){var o=this.pdfViewerBase.getZoomFactor();e.style.left=this.pdfViewerBase.ConvertPointToPixel(t.X)*o+"px",e.style.top=this.pdfViewerBase.ConvertPointToPixel(t.Y)*o+"px",e.style.width=this.pdfViewerBase.ConvertPointToPixel(t.Width)*o+"px";var a=this.pdfViewerBase.ConvertPointToPixel(t.Height)*o;e.style.height=a+"px",e.style.fontSize=this.pdfViewerBase.ConvertPointToPixel(i)*o+"px",!n||"Wingdings"!==n&&"Symbol"!==n?n&&(e.style.fontFamily=n):e.style.fontFamily="Verdana",r&&(e.style.fontWeight=r),e.style.color="transparent"},s.prototype.setTextElementProperties=function(e){e.style.transformOrigin="0%"},s.prototype.getModuleName=function(){return"AccessibilityTags"},s.prototype.destroy=function(){return!0},s}();const XLe=["addSignature","ajaxRequestFailed","ajaxRequestInitiate","ajaxRequestSuccess","annotationAdd","annotationDoubleClick","annotationMouseLeave","annotationMouseover","annotationMove","annotationMoving","annotationPropertiesChange","annotationRemove","annotationResize","annotationSelect","annotationUnSelect","beforeAddFreeText","bookmarkClick","buttonFieldClick","commentAdd","commentDelete","commentEdit","commentSelect","commentStatusChanged","created","documentLoad","documentLoadFailed","documentUnload","downloadEnd","downloadStart","exportFailed","exportStart","exportSuccess","extractTextCompleted","formFieldAdd","formFieldClick","formFieldDoubleClick","formFieldFocusOut","formFieldMouseLeave","formFieldMouseover","formFieldMove","formFieldPropertiesChange","formFieldRemove","formFieldResize","formFieldSelect","formFieldUnselect","hyperlinkClick","hyperlinkMouseOver","importFailed","importStart","importSuccess","moveSignature","pageChange","pageClick","pageMouseover","printEnd","printStart","removeSignature","resizeSignature","signaturePropertiesChange","signatureSelect","textSearchComplete","textSearchHighlight","textSearchStart","textSelectionEnd","textSelectionStart","thumbnailClick","validateFormFields","zoomChange"],ZLe=[];let KLe=(()=>{let s=class extends jLe{constructor(t,i,n,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=n,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let o=this.injector.get("PdfViewerLinkAnnotation");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerBookmarkView");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerMagnification");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerThumbnailView");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerToolbar");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerNavigation");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerPrint");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerTextSelection");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerTextSearch");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerAnnotation");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerFormDesigner");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("PdfViewerFormFields");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}this.registerEvents(XLe),this.addTwoWay.call(this,ZLe),function $pe(s,e,t){for(var i=s.replace(/\[/g,".").replace(/\]/g,"").split("."),n=t||{},r=0;r<i.length;r++){var o=i[r];r+1===i.length?n[o]=void 0===e?{}:e:void 0===n[o]&&(n[o]={}),n=n[o]}}("currentInstance",this,this.viewContainerRef),this.context=new s7}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.context.ngAfterContentChecked(this)}};return s.\u0275fac=function(t){return new(t||s)(jt(Ou),jt(mk),jt(Jl),jt(lc))},s.\u0275cmp=pD({type:s,selectors:[["ejs-pdfviewer"]],inputs:{DropdownFieldSettings:"DropdownFieldSettings",ajaxRequestSettings:"ajaxRequestSettings",annotationSelectorSettings:"annotationSelectorSettings",annotationSettings:"annotationSettings",annotations:"annotations",areaSettings:"areaSettings",arrowSettings:"arrowSettings",checkBoxFieldSettings:"checkBoxFieldSettings",circleSettings:"circleSettings",contextMenuOption:"contextMenuOption",contextMenuSettings:"contextMenuSettings",currentPageNumber:"currentPageNumber",customStamp:"customStamp",customStampSettings:"customStampSettings",dateTimeFormat:"dateTimeFormat",designerMode:"designerMode",disableContextMenuItems:"disableContextMenuItems",distanceSettings:"distanceSettings",documentPath:"documentPath",downloadFileName:"downloadFileName",drawingObject:"drawingObject",enableAccessibilityTags:"enableAccessibilityTags",enableAnnotation:"enableAnnotation",enableAnnotationToolbar:"enableAnnotationToolbar",enableAutoComplete:"enableAutoComplete",enableBookmark:"enableBookmark",enableBookmarkStyles:"enableBookmarkStyles",enableCommentPanel:"enableCommentPanel",enableDesktopMode:"enableDesktopMode",enableDownload:"enableDownload",enableFormDesigner:"enableFormDesigner",enableFormDesignerToolbar:"enableFormDesignerToolbar",enableFormFields:"enableFormFields",enableFormFieldsValidation:"enableFormFieldsValidation",enableFreeText:"enableFreeText",enableHandwrittenSignature:"enableHandwrittenSignature",enableHyperlink:"enableHyperlink",enableImportAnnotationMeasurement:"enableImportAnnotationMeasurement",enableInkAnnotation:"enableInkAnnotation",enableMagnification:"enableMagnification",enableMeasureAnnotation:"enableMeasureAnnotation",enableMultiLineOverlap:"enableMultiLineOverlap",enableMultiPageAnnotation:"enableMultiPageAnnotation",enableNavigation:"enableNavigation",enableNavigationToolbar:"enableNavigationToolbar",enablePersistence:"enablePersistence",enablePinchZoom:"enablePinchZoom",enablePrint:"enablePrint",enablePrintRotation:"enablePrintRotation",enableRtl:"enableRtl",enableShapeAnnotation:"enableShapeAnnotation",enableShapeLabel:"enableShapeLabel",enableStampAnnotations:"enableStampAnnotations",enableStickyNotesAnnotation:"enableStickyNotesAnnotation",enableTextMarkupAnnotation:"enableTextMarkupAnnotation",enableTextMarkupResizer:"enableTextMarkupResizer",enableTextSearch:"enableTextSearch",enableTextSelection:"enableTextSelection",enableThumbnail:"enableThumbnail",enableToolbar:"enableToolbar",enableZoomOptimization:"enableZoomOptimization",exportAnnotationFileName:"exportAnnotationFileName",formFieldCollections:"formFieldCollections",formFields:"formFields",freeTextSettings:"freeTextSettings",handWrittenSignatureSettings:"handWrittenSignatureSettings",height:"height",hideEmptyDigitalSignatureFields:"hideEmptyDigitalSignatureFields",hideSaveSignature:"hideSaveSignature",highlightSettings:"highlightSettings",hyperlinkOpenState:"hyperlinkOpenState",initialDialogSettings:"initialDialogSettings",initialFieldSettings:"initialFieldSettings",initialRenderPages:"initialRenderPages",inkAnnotationSettings:"inkAnnotationSettings",interactionMode:"interactionMode",isAnnotationToolbarOpen:"isAnnotationToolbarOpen",isAnnotationToolbarVisible:"isAnnotationToolbarVisible",isBookmarkPanelOpen:"isBookmarkPanelOpen",isCommandPanelOpen:"isCommandPanelOpen",isDocumentEdited:"isDocumentEdited",isExtractText:"isExtractText",isFormDesignerToolbarVisible:"isFormDesignerToolbarVisible",isFormFieldDocument:"isFormFieldDocument",isInitialFieldToolbarSelection:"isInitialFieldToolbarSelection",isMaintainSelection:"isMaintainSelection",isSignatureEditable:"isSignatureEditable",isThumbnailViewOpen:"isThumbnailViewOpen",isValidFreeText:"isValidFreeText",lineSettings:"lineSettings",listBoxFieldSettings:"listBoxFieldSettings",locale:"locale",measurementSettings:"measurementSettings",pageCount:"pageCount",passwordFieldSettings:"passwordFieldSettings",perimeterSettings:"perimeterSettings",polygonSettings:"polygonSettings",printMode:"printMode",radioButtonFieldSettings:"radioButtonFieldSettings",radiusSettings:"radiusSettings",rectangleSettings:"rectangleSettings",restrictZoomRequest:"restrictZoomRequest",retryCount:"retryCount",retryStatusCodes:"retryStatusCodes",retryTimeout:"retryTimeout",scrollSettings:"scrollSettings",selectedItems:"selectedItems",serverActionSettings:"serverActionSettings",serviceUrl:"serviceUrl",shapeLabelSettings:"shapeLabelSettings",showDigitalSignatureAppearance:"showDigitalSignatureAppearance",showNotificationDialog:"showNotificationDialog",signatureDialogSettings:"signatureDialogSettings",signatureFieldSettings:"signatureFieldSettings",signatureFitMode:"signatureFitMode",stampSettings:"stampSettings",stickyNotesSettings:"stickyNotesSettings",strikethroughSettings:"strikethroughSettings",textFieldSettings:"textFieldSettings",textSearchColorSettings:"textSearchColorSettings",tileRenderingSettings:"tileRenderingSettings",toolbarSettings:"toolbarSettings",underlineSettings:"underlineSettings",volumeSettings:"volumeSettings",width:"width",zoomMode:"zoomMode",zoomValue:"zoomValue"},outputs:{addSignature:"addSignature",ajaxRequestFailed:"ajaxRequestFailed",ajaxRequestInitiate:"ajaxRequestInitiate",ajaxRequestSuccess:"ajaxRequestSuccess",annotationAdd:"annotationAdd",annotationDoubleClick:"annotationDoubleClick",annotationMouseLeave:"annotationMouseLeave",annotationMouseover:"annotationMouseover",annotationMove:"annotationMove",annotationMoving:"annotationMoving",annotationPropertiesChange:"annotationPropertiesChange",annotationRemove:"annotationRemove",annotationResize:"annotationResize",annotationSelect:"annotationSelect",annotationUnSelect:"annotationUnSelect",beforeAddFreeText:"beforeAddFreeText",bookmarkClick:"bookmarkClick",buttonFieldClick:"buttonFieldClick",commentAdd:"commentAdd",commentDelete:"commentDelete",commentEdit:"commentEdit",commentSelect:"commentSelect",commentStatusChanged:"commentStatusChanged",created:"created",documentLoad:"documentLoad",documentLoadFailed:"documentLoadFailed",documentUnload:"documentUnload",downloadEnd:"downloadEnd",downloadStart:"downloadStart",exportFailed:"exportFailed",exportStart:"exportStart",exportSuccess:"exportSuccess",extractTextCompleted:"extractTextCompleted",formFieldAdd:"formFieldAdd",formFieldClick:"formFieldClick",formFieldDoubleClick:"formFieldDoubleClick",formFieldFocusOut:"formFieldFocusOut",formFieldMouseLeave:"formFieldMouseLeave",formFieldMouseover:"formFieldMouseover",formFieldMove:"formFieldMove",formFieldPropertiesChange:"formFieldPropertiesChange",formFieldRemove:"formFieldRemove",formFieldResize:"formFieldResize",formFieldSelect:"formFieldSelect",formFieldUnselect:"formFieldUnselect",hyperlinkClick:"hyperlinkClick",hyperlinkMouseOver:"hyperlinkMouseOver",importFailed:"importFailed",importStart:"importStart",importSuccess:"importSuccess",moveSignature:"moveSignature",pageChange:"pageChange",pageClick:"pageClick",pageMouseover:"pageMouseover",printEnd:"printEnd",printStart:"printStart",removeSignature:"removeSignature",resizeSignature:"resizeSignature",signaturePropertiesChange:"signaturePropertiesChange",signatureSelect:"signatureSelect",textSearchComplete:"textSearchComplete",textSearchHighlight:"textSearchHighlight",textSearchStart:"textSearchStart",textSelectionEnd:"textSelectionEnd",textSelectionStart:"textSelectionStart",thumbnailClick:"thumbnailClick",validateFormFields:"validateFormFields",zoomChange:"zoomChange"},features:[Ok],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),s=function S2(s,e,t,i){var o,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r}([Jpe([s7])],s),s})(),JLe=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=wg({type:s}),s.\u0275inj=ku({imports:[[U_]]}),s})();const sJ={provide:"PdfViewerLinkAnnotation",useValue:BAe},oJ={provide:"PdfViewerBookmarkView",useValue:qLe},aJ={provide:"PdfViewerMagnification",useValue:OLe},lJ={provide:"PdfViewerThumbnailView",useValue:zLe},hJ={provide:"PdfViewerToolbar",useValue:_Le},dJ={provide:"PdfViewerNavigation",useValue:BLe},pJ={provide:"PdfViewerPrint",useValue:GLe},cJ={provide:"PdfViewerTextSelection",useValue:WLe},uJ={provide:"PdfViewerTextSearch",useValue:ULe},fJ={provide:"PdfViewerAnnotation",useValue:OAe},gJ={provide:"PdfViewerFormDesigner",useValue:YLe},mJ={provide:"PdfViewerFormFields",useValue:d2},$Le=["pdfviewer"];let eVe=(()=>{class s{constructor(){this.service="https://ej2services.syncfusion.com/production/web-services/api/pdfviewer",this.document="formfield.pdf"}documentLoaded(t){let i=[{itemName:"item1",itemValue:"item1"},{itemName:"item2",itemValue:"item2"},{itemName:"item3",itemValue:"item3"}];this.pdfviewerControl?.formDesignerModule.addFormField("Textbox",{name:"First Name",bounds:{X:280,Y:180,Width:200,Height:24},isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"Textbox",thickness:2,fontFamily:"Courier",fontSize:10,fontStyle:Io.None,color:"black",borderColor:"black",alignment:"Left",maxLength:0,isMultiline:!1}),this.pdfviewerControl?.formDesignerModule.addFormField("Password",{name:"Password",bounds:{X:280,Y:280,Width:200,Height:24},isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"Password",thickness:2,fontFamily:"Courier",fontSize:10,fontStyle:Io.None,color:"black",borderColor:"black",alignment:"Left",maxLength:0}),this.pdfviewerControl?.formDesignerModule.addFormField("CheckBox",{name:"CheckBox1",bounds:{X:280,Y:380,Width:20,Height:20},isChecked:!1,thickness:2}),this.pdfviewerControl?.formDesignerModule.addFormField("CheckBox",{name:"CheckBox2",bounds:{X:450,Y:380,Width:20,Height:20},isChecked:!1,thickness:2}),this.pdfviewerControl?.formDesignerModule.addFormField("RadioButton",{bounds:{X:280,Y:480,Width:18,Height:18},name:"RadioButton",isSelected:!1,thickness:2}),this.pdfviewerControl?.formDesignerModule.addFormField("RadioButton",{bounds:{X:450,Y:480,Width:18,Height:18},name:"RadioButton",isSelected:!1,thickness:2}),this.pdfviewerControl?.formDesignerModule.addFormField("ListBox",{bounds:{X:280,Y:560,Width:210,Height:67},name:"ListBox",thickness:2,options:i}),this.pdfviewerControl?.formDesignerModule.addFormField("DropDown",{bounds:{X:280,Y:680,Width:210,Height:24},name:"DropDown",thickness:2,options:i}),this.pdfviewerControl?.formDesignerModule.addFormField("SignatureField",{name:"Sign",bounds:{X:280,Y:770,Width:205,Height:65},thickness:2}),this.pdfviewerControl?.formDesignerModule.addFormField("InitialField",{name:"Initial",bounds:{X:280,Y:880,Width:205,Height:65},thickness:2})}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=pD({type:s,selectors:[["app-container"]],viewQuery:function(t,i){if(1&t&&VH($Le,5),2&t){let n;LH(n=function PH(){return function Goe(s,e){return s[_h].queries[e].queryList}(Ae(),mz())}())&&(i.pdfviewerControl=n.first)}},features:[cH([sJ,oJ,aJ,lJ,hJ,dJ,uJ,cJ,pJ,fJ,gJ,mJ])],decls:3,vars:1,consts:[[1,"content-wrapper"],["id","pdfViewer",2,"height","640px","display","block",3,"serviceUrl","documentLoad"],["pdfviewer",""]],template:function(t,i){1&t&&(LC(0,"div",0)(1,"ejs-pdfviewer",1,2),Uk("documentLoad",function(r){return i.documentLoaded(r)}),VC()()),2&t&&(function $3(s){e4(Mi(),Ae(),Eo()+s,!1)}(1),Hk("serviceUrl",i.service))},dependencies:[KLe],encapsulation:2}),s})(),tVe=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=wg({type:s,bootstrap:[eVe]}),s.\u0275inj=ku({providers:[sJ,oJ,aJ,lJ,hJ,dJ,uJ,cJ,pJ,fJ,gJ,mJ],imports:[fde,JLe]}),s})();ude().bootstrapModule(tVe)}},Mr=>{Mr(Mr.s=90)}]);