"use strict";(self.webpackChunksyncfusion_component=self.webpackChunksyncfusion_component||[]).push([[179],{619:()=>{function ni(s){return"function"==typeof s}function lc(s){const e=s(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const hc=lc(s=>function(e){s(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,n)=>`${n+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function sl(s,t){if(s){const e=s.indexOf(t);0<=e&&s.splice(e,1)}}class Er{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const r of e)r.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(ni(i))try{i()}catch(r){t=r instanceof hc?r.errors:[r]}const{_finalizers:n}=this;if(n){this._finalizers=null;for(const r of n)try{tC(r)}catch(o){t=t??[],o instanceof hc?t=[...t,...o.errors]:t.push(o)}}if(t)throw new hc(t)}}add(t){var e;if(t&&t!==this)if(this.closed)tC(t);else{if(t instanceof Er){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&sl(e,t)}remove(t){const{_finalizers:e}=this;e&&sl(e,t),t instanceof Er&&t._removeParent(this)}}Er.EMPTY=(()=>{const s=new Er;return s.closed=!0,s})();const Jb=Er.EMPTY;function eC(s){return s instanceof Er||s&&"closed"in s&&ni(s.remove)&&ni(s.add)&&ni(s.unsubscribe)}function tC(s){ni(s)?s():s.unsubscribe()}const io={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},cc={setTimeout(s,t,...e){const{delegate:i}=cc;return i?.setTimeout?i.setTimeout(s,t,...e):setTimeout(s,t,...e)},clearTimeout(s){const{delegate:t}=cc;return(t?.clearTimeout||clearTimeout)(s)},delegate:void 0};function iC(s){cc.setTimeout(()=>{const{onUnhandledError:t}=io;if(!t)throw s;t(s)})}function nC(){}const hj=Nd("C",void 0,void 0);function Nd(s,t,e){return{kind:s,value:t,error:e}}let no=null;function uc(s){if(io.useDeprecatedSynchronousErrorHandling){const t=!no;if(t&&(no={errorThrown:!1,error:null}),s(),t){const{errorThrown:e,error:i}=no;if(no=null,e)throw i}}else s()}class kd extends Er{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,eC(t)&&t.add(this)):this.destination=gj}static create(t,e,i){return new ol(t,e,i)}next(t){this.isStopped?Rd(function uj(s){return Nd("N",s,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Rd(function cj(s){return Nd("E",void 0,s)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Rd(hj,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dj=Function.prototype.bind;function zd(s,t){return dj.call(s,t)}class fj{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){pc(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){pc(i)}else pc(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){pc(e)}}}class ol extends kd{constructor(t,e,i){let n;if(super(),ni(t)||!t)n={next:t??void 0,error:e??void 0,complete:i??void 0};else{let r;this&&io.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),n={next:t.next&&zd(t.next,r),error:t.error&&zd(t.error,r),complete:t.complete&&zd(t.complete,r)}):n=t}this.destination=new fj(n)}}function pc(s){io.useDeprecatedSynchronousErrorHandling?function pj(s){io.useDeprecatedSynchronousErrorHandling&&no&&(no.errorThrown=!0,no.error=s)}(s):iC(s)}function Rd(s,t){const{onStoppedNotification:e}=io;e&&cc.setTimeout(()=>e(s,t))}const gj={closed:!0,next:nC,error:function vj(s){throw s},complete:nC},Fd="function"==typeof Symbol&&Symbol.observable||"@@observable";function rC(s){return s}let cn=(()=>{class s{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new s;return i.source=this,i.operator=e,i}subscribe(e,i,n){const r=function yj(s){return s&&s instanceof kd||function mj(s){return s&&ni(s.next)&&ni(s.error)&&ni(s.complete)}(s)&&eC(s)}(e)?e:new ol(e,i,n);return uc(()=>{const{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=oC(i))((n,r)=>{const o=new ol({next:a=>{try{e(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:n});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Fd](){return this}pipe(...e){return function sC(s){return 0===s.length?rC:1===s.length?s[0]:function(e){return s.reduce((i,n)=>n(i),e)}}(e)(this)}toPromise(e){return new(e=oC(e))((i,n)=>{let r;this.subscribe(o=>r=o,o=>n(o),()=>i(r))})}}return s.create=t=>new s(t),s})();function oC(s){var t;return null!==(t=s??io.Promise)&&void 0!==t?t:Promise}const bj=lc(s=>function(){s(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Hd=(()=>{class s extends cn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new aC(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new bj}next(e){uc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){uc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){uc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:n,observers:r}=this;return i||n?Jb:(this.currentObservers=null,r.push(e),new Er(()=>{this.currentObservers=null,sl(r,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:n,isStopped:r}=this;i?e.error(n):r&&e.complete()}asObservable(){const e=new cn;return e.source=this,e}}return s.create=(t,e)=>new aC(t,e),s})();class aC extends Hd{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:Jb}}function al(s){return t=>{if(function Cj(s){return ni(s?.lift)}(t))return t.lift(function(e){try{return s(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function dc(s,t,e,i,n){return new Mj(s,t,e,i,n)}class Mj extends kd{constructor(t,e,i,n,r,o){super(t),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=n?function(a){try{n(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Yd(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r}function Ts(s){return this instanceof Ts?(this.v=s,this):new Ts(s)}function uC(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=function Vd(s){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&s[t],i=0;if(e)return e.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(r){e[r]=s[r]&&function(o){return new Promise(function(a,l){!function n(r,o,a,l){Promise.resolve(l).then(function(h){r({value:h,done:a})},o)}(a,l,(o=s[r](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const pC=s=>s&&"number"==typeof s.length&&"function"!=typeof s;function dC(s){return ni(s?.then)}function fC(s){return ni(s[Fd])}function vC(s){return Symbol.asyncIterator&&ni(s?.[Symbol.asyncIterator])}function gC(s){return new TypeError(`You provided ${null!==s&&"object"==typeof s?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const mC=function Uj(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yC(s){return ni(s?.[mC])}function bC(s){return function cC(s,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=e.apply(s,t||[]),r=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(d){i[d]&&(n[d]=function(f){return new Promise(function(v,g){r.push([d,f,v,g])>1||a(d,f)})})}function a(d,f){try{!function l(d){d.value instanceof Ts?Promise.resolve(d.value.v).then(h,c):u(r[0][2],d)}(i[d](f))}catch(v){u(r[0][3],v)}}function h(d){a("next",d)}function c(d){a("throw",d)}function u(d,f){d(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}(this,arguments,function*(){const e=s.getReader();try{for(;;){const{value:i,done:n}=yield Ts(e.read());if(n)return yield Ts(void 0);yield yield Ts(i)}}finally{e.releaseLock()}})}function CC(s){return ni(s?.getReader)}function ro(s){if(s instanceof cn)return s;if(null!=s){if(fC(s))return function Vj(s){return new cn(t=>{const e=s[Fd]();if(ni(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(s);if(pC(s))return function Wj(s){return new cn(t=>{for(let e=0;e<s.length&&!t.closed;e++)t.next(s[e]);t.complete()})}(s);if(dC(s))return function Xj(s){return new cn(t=>{s.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,iC)})}(s);if(vC(s))return MC(s);if(yC(s))return function qj(s){return new cn(t=>{for(const e of s)if(t.next(e),t.closed)return;t.complete()})}(s);if(CC(s))return function Qj(s){return MC(bC(s))}(s)}throw gC(s)}function MC(s){return new cn(t=>{(function $j(s,t){var e,i,n,r;return function lC(s,t,e,i){return new(e||(e=Promise))(function(r,o){function a(c){try{h(i.next(c))}catch(u){o(u)}}function l(c){try{h(i.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):function n(r){return r instanceof e?r:new e(function(o){o(r)})}(c.value).then(a,l)}h((i=i.apply(s,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=uC(s);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(o){n={error:o}}finally{try{i&&!i.done&&(r=e.return)&&(yield r.call(e))}finally{if(n)throw n.error}}t.complete()})})(s,t).catch(e=>t.error(e))})}function Ds(s,t,e,i=0,n=!1){const r=t.schedule(function(){e(),n?s.add(this.schedule(null,i)):this.unsubscribe()},i);if(s.add(r),!n)return r}function SC(s,t,e=1/0){return ni(t)?SC((i,n)=>function Sj(s,t){return al((e,i)=>{let n=0;e.subscribe(dc(i,r=>{i.next(s.call(t,r,n++))}))})}((r,o)=>t(i,r,n,o))(ro(s(i,n))),e):("number"==typeof t&&(e=t),al((i,n)=>function Gj(s,t,e,i,n,r,o,a){const l=[];let h=0,c=0,u=!1;const d=()=>{u&&!l.length&&!h&&t.complete()},f=g=>h<i?v(g):l.push(g),v=g=>{r&&t.next(g),h++;let b=!1;ro(e(g,c++)).subscribe(dc(t,M=>{n?.(M),r?f(M):t.next(M)},()=>{b=!0},void 0,()=>{if(b)try{for(h--;l.length&&h<i;){const M=l.shift();o?Ds(t,o,()=>v(M)):v(M)}d()}catch(M){t.error(M)}}))};return s.subscribe(dc(t,f,()=>{u=!0,d()})),()=>{a?.()}}(i,n,s,e)))}const wC=new cn(s=>s.complete());function Wd(s){return s[s.length-1]}function IC(s,t=0){return al((e,i)=>{e.subscribe(dc(i,n=>Ds(i,s,()=>i.next(n),t),()=>Ds(i,s,()=>i.complete(),t),n=>Ds(i,s,()=>i.error(n),t)))})}function OC(s,t=0){return al((e,i)=>{i.add(s.schedule(()=>e.subscribe(i),t))})}function TC(s,t){if(!s)throw new Error("Iterable cannot be null");return new cn(e=>{Ds(e,t,()=>{const i=s[Symbol.asyncIterator]();Ds(e,t,()=>{i.next().then(n=>{n.done?e.complete():e.next(n.value)})},0,!0)})})}function hA(...s){const t=function eA(s){return function Jj(s){return s&&ni(s.schedule)}(Wd(s))?s.pop():void 0}(s),e=function tA(s,t){return"number"==typeof Wd(s)?s.pop():t}(s,1/0),i=s;return i.length?1===i.length?ro(i[0]):function Zj(s=1/0){return SC(rC,s)}(e)(function lA(s,t){return t?function aA(s,t){if(null!=s){if(fC(s))return function iA(s,t){return ro(s).pipe(OC(t),IC(t))}(s,t);if(pC(s))return function rA(s,t){return new cn(e=>{let i=0;return t.schedule(function(){i===s.length?e.complete():(e.next(s[i++]),e.closed||this.schedule())})})}(s,t);if(dC(s))return function nA(s,t){return ro(s).pipe(OC(t),IC(t))}(s,t);if(vC(s))return TC(s,t);if(yC(s))return function sA(s,t){return new cn(e=>{let i;return Ds(e,t,()=>{i=s[mC](),Ds(e,t,()=>{let n,r;try{({value:n,done:r}=i.next())}catch(o){return void e.error(o)}r?e.complete():e.next(n)},0,!0)}),()=>ni(i?.return)&&i.return()})}(s,t);if(CC(s))return function oA(s,t){return TC(bC(s),t)}(s,t)}throw gC(s)}(s,t):ro(s)}(i,t)):wC}function Xd(s,t,...e){if(!0===t)return void s();if(!1===t)return;const i=new ol({next:()=>{i.unsubscribe(),s()}});return t(...e).subscribe(i)}function jt(s){for(let t in s)if(s[t]===jt)return t;throw Error("Could not find renamed property on target object.")}function qd(s,t){for(const e in t)t.hasOwnProperty(e)&&!s.hasOwnProperty(e)&&(s[e]=t[e])}function kt(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(kt).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const t=s.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Qd(s,t){return null==s||""===s?null===t?"":t:null==t||""===t?s:s+" "+t}const uA=jt({__forward_ref__:jt});function $d(s){return s.__forward_ref__=$d,s.toString=function(){return kt(this())},s}function Ee(s){return function Gd(s){return"function"==typeof s&&s.hasOwnProperty(uA)&&s.__forward_ref__===$d}(s)?s():s}function Zd(s){return s&&!!s.\u0275providers}class Ce extends Error{constructor(t,e){super(fc(t,e)),this.code=t}}function fc(s,t){return`NG0${Math.abs(s)}${t?": "+t.trim():""}`}function wt(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():function ze(s){return"string"==typeof s?s:null==s?"":String(s)}(s)}function vc(s,t){throw new Ce(-201,!1)}function kn(s,t){null==s&&function It(s,t,e,i){throw new Error(`ASSERTION ERROR: ${s}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,s,null,"!=")}function Vt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function so(s){return{providers:s.providers||[],imports:s.imports||[]}}function gc(s){return EC(s,mc)||EC(s,PC)}function EC(s,t){return s.hasOwnProperty(t)?s[t]:null}function xC(s){return s&&(s.hasOwnProperty(Kd)||s.hasOwnProperty(yA))?s[Kd]:null}const mc=jt({\u0275prov:jt}),Kd=jt({\u0275inj:jt}),PC=jt({ngInjectableDef:jt}),yA=jt({ngInjectorDef:jt});var Le=(()=>((Le=Le||{})[Le.Default=0]="Default",Le[Le.Host=1]="Host",Le[Le.Self=2]="Self",Le[Le.SkipSelf=4]="SkipSelf",Le[Le.Optional=8]="Optional",Le))();let Jd;function zn(s){const t=Jd;return Jd=s,t}function jC(s,t,e){const i=gc(s);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Le.Optional?null:void 0!==t?t:void vc(kt(s))}const Bt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ll={},ef="__NG_DI_FLAG__",yc="ngTempTokenPath",CA="ngTokenPath",MA=/\n/gm,SA="\u0275",AC="__source";let hl;function Ho(s){const t=hl;return hl=s,t}function wA(s,t=Le.Default){if(void 0===hl)throw new Ce(-203,!1);return null===hl?jC(s,void 0,t):hl.get(s,t&Le.Optional?null:void 0,t)}function bt(s,t=Le.Default){return(function bA(){return Jd}()||wA)(Ee(s),t)}function bc(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function tf(s){const t=[];for(let e=0;e<s.length;e++){const i=Ee(s[e]);if(Array.isArray(i)){if(0===i.length)throw new Ce(900,!1);let n,r=Le.Default;for(let o=0;o<i.length;o++){const a=i[o],l=OA(a);"number"==typeof l?-1===l?n=a.token:r|=l:n=a}t.push(bt(n,r))}else t.push(bt(i))}return t}function OA(s){return s[ef]}function $r(s){return{toString:s}.toString()}var xr=(()=>((xr=xr||{})[xr.OnPush=0]="OnPush",xr[xr.Default=1]="Default",xr))(),Pr=(()=>{return(s=Pr||(Pr={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Pr;var s})();const Gr={},Ct=[],Cc=jt({\u0275cmp:jt}),nf=jt({\u0275dir:jt}),rf=jt({\u0275pipe:jt}),NC=jt({\u0275mod:jt}),Zr=jt({\u0275fac:jt}),ul=jt({__NG_ELEMENT_ID__:jt});let EA=0;function sf(s){return $r(()=>{const t=function zC(s){const t={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:t,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Ct,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kC(s.inputs,t),outputs:kC(s.outputs)}}(s),e={...t,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===xr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Pr.Emulated,id:"c"+EA++,styles:s.styles||Ct,_:null,schemas:s.schemas||null,tView:null};!function RC(s){s.features?.forEach(t=>t(s))}(e);const i=s.dependencies;return e.directiveDefs=Mc(i,!1),e.pipeDefs=Mc(i,!0),e})}function PA(s){return Ot(s)||Ui(s)}function jA(s){return null!==s}function Bo(s){return $r(()=>({type:s.type,bootstrap:s.bootstrap||Ct,declarations:s.declarations||Ct,imports:s.imports||Ct,exports:s.exports||Ct,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function kC(s,t){if(null==s)return Gr;const e={};for(const i in s)if(s.hasOwnProperty(i)){let n=s[i],r=n;Array.isArray(n)&&(r=n[1],n=n[0]),e[n]=i,t&&(t[n]=r)}return e}function Ot(s){return s[Cc]||null}function Ui(s){return s[nf]||null}function pn(s){return s[rf]||null}function Mc(s,t){if(!s)return null;const e=t?pn:PA;return()=>("function"==typeof s?s():s).map(i=>e(i)).filter(jA)}const Kr=0,pe=1,Xe=2,ri=3,rr=4,oo=5,Vi=6,_o=7,li=8,Sc=9,wc=10,$e=11,of=12,dl=13,FC=14,Yo=15,Wi=16,fl=17,Uo=18,jr=19,vl=20,HC=21,_t=22,af=1,BC=2,Ic=7,Oc=8,Vo=9,nn=10;function Dn(s){return Array.isArray(s)&&"object"==typeof s[af]}function sr(s){return Array.isArray(s)&&!0===s[af]}function lf(s){return 0!=(4&s.flags)}function gl(s){return s.componentOffset>-1}function Tc(s){return 1==(1&s.flags)}function or(s){return!!s.template}function LA(s){return 0!=(256&s[Xe])}function ao(s,t){return s.hasOwnProperty(Zr)?s[Zr]:null}class zA{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function UC(s){return s.type.prototype.ngOnChanges&&(s.setInput=FA),RA}function RA(){const s=WC(this),t=s?.current;if(t){const e=s.previous;if(e===Gr)s.previous=t;else for(let i in t)e[i]=t[i];s.current=null,this.ngOnChanges(t)}}function FA(s,t,e,i){const n=this.declaredInputs[e],r=WC(s)||function HA(s,t){return s[VC]=t}(s,{previous:Gr,current:null}),o=r.current||(r.current={}),a=r.previous,l=a[n];o[n]=new zA(l&&l.currentValue,t,a===Gr),s[i]=t}const VC="__ngSimpleChanges__";function WC(s){return s[VC]||null}const Fn=function(s,t,e){};function Li(s){for(;Array.isArray(s);)s=s[Kr];return s}function En(s,t){return Li(t[s.index])}function QC(s,t){return s.data[t]}function dn(s,t){const e=t[s];return Dn(e)?e:e[Kr]}function xc(s){return 64==(64&s[Xe])}function xs(s,t){return null==t?null:s[t]}function $C(s){s[Uo]=0}function cf(s,t){s[oo]+=t;let e=s,i=s[ri];for(;null!==i&&(1===t&&1===e[oo]||-1===t&&0===e[oo]);)i[oo]+=t,e=i,i=i[ri]}const Re={lFrame:o0(null),bindingsEnabled:!0};function ZC(){return Re.bindingsEnabled}function J(){return Re.lFrame.lView}function ct(){return Re.lFrame.tView}function Ni(){let s=KC();for(;null!==s&&64===s.type;)s=s.parent;return s}function KC(){return Re.lFrame.currentTNode}function Ar(s,t){const e=Re.lFrame;e.currentTNode=s,e.isParent=t}function uf(){return Re.lFrame.isParent}function eL(s,t){const e=Re.lFrame;e.bindingIndex=e.bindingRootIndex=s,df(t)}function df(s){Re.lFrame.currentDirectiveIndex=s}function n0(){return Re.lFrame.currentQueryIndex}function vf(s){Re.lFrame.currentQueryIndex=s}function iL(s){const t=s[pe];return 2===t.type?t.declTNode:1===t.type?s[Vi]:null}function r0(s,t,e){if(e&Le.SkipSelf){let n=t,r=s;for(;!(n=n.parent,null!==n||e&Le.Host||(n=iL(r),null===n||(r=r[Yo],10&n.type))););if(null===n)return!1;t=n,s=r}const i=Re.lFrame=s0();return i.currentTNode=t,i.lView=s,!0}function gf(s){const t=s0(),e=s[pe];Re.lFrame=t,t.currentTNode=e.firstChild,t.lView=s,t.tView=e,t.contextLView=s,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function s0(){const s=Re.lFrame,t=null===s?null:s.child;return null===t?o0(s):t}function o0(s){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=t),t}function a0(){const s=Re.lFrame;return Re.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const l0=a0;function mf(){const s=a0();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function sn(){return Re.lFrame.selectedIndex}function lo(s){Re.lFrame.selectedIndex=s}function Pc(s,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const r=s.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:h,ngOnDestroy:c}=r;o&&(s.contentHooks??(s.contentHooks=[])).push(-e,o),a&&((s.contentHooks??(s.contentHooks=[])).push(e,a),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(e,a)),l&&(s.viewHooks??(s.viewHooks=[])).push(-e,l),h&&((s.viewHooks??(s.viewHooks=[])).push(e,h),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(e,h)),null!=c&&(s.destroyHooks??(s.destroyHooks=[])).push(e,c)}}function jc(s,t,e){h0(s,t,3,e)}function Ac(s,t,e,i){(3&s[Xe])===e&&h0(s,t,e,i)}function yf(s,t){let e=s[Xe];(3&e)===t&&(e&=2047,e+=1,s[Xe]=e)}function h0(s,t,e,i){const r=i??-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&s[Uo]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(s[Uo]+=65536),(a<r||-1==r)&&(uL(s,e,t,l),s[Uo]=(4294901760&s[Uo])+l+2),l++}function uL(s,t,e,i){const n=e[i]<0,r=e[i+1],a=s[n?-e[i]:e[i]];if(n){if(s[Xe]>>11<s[Uo]>>16&&(3&s[Xe])===t){s[Xe]+=2048,Fn(4,a,r);try{r.call(a)}finally{Fn(5,a,r)}}}else{Fn(4,a,r);try{r.call(a)}finally{Fn(5,a,r)}}}const qo=-1;class yl{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Cf(s,t,e){let i=0;for(;i<e.length;){const n=e[i];if("number"==typeof n){if(0!==n)break;i++;const r=e[i++],o=e[i++],a=e[i++];s.setAttribute(t,o,a,r)}else{const r=n,o=e[++i];u0(r)?s.setProperty(t,r,o):s.setAttribute(t,r,o),i++}}return i}function c0(s){return 3===s||4===s||6===s}function u0(s){return 64===s.charCodeAt(0)}function bl(s,t){if(null!==t&&0!==t.length)if(null===s||0===s.length)s=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const n=t[i];"number"==typeof n?e=n:0===e||p0(s,e,n,null,-1===e||2===e?t[++i]:null)}}return s}function p0(s,t,e,i,n){let r=0,o=s.length;if(-1===t)o=-1;else for(;r<s.length;){const a=s[r++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=r-1;break}}}for(;r<s.length;){const a=s[r];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==n&&(s[r+1]=n));if(i===s[r+1])return void(s[r+2]=n)}r++,null!==i&&r++,null!==n&&r++}-1!==o&&(s.splice(o,0,t),r=o+1),s.splice(r++,0,e),null!==i&&s.splice(r++,0,i),null!==n&&s.splice(r++,0,n)}function d0(s){return s!==qo}function Lc(s){return 32767&s}function Nc(s,t){let e=function vL(s){return s>>16}(s),i=t;for(;e>0;)i=i[Yo],e--;return i}let Mf=!0;function kc(s){const t=Mf;return Mf=s,t}const f0=255,v0=5;let gL=0;const Lr={};function zc(s,t){const e=g0(s,t);if(-1!==e)return e;const i=t[pe];i.firstCreatePass&&(s.injectorIndex=t.length,Sf(i.data,s),Sf(t,null),Sf(i.blueprint,null));const n=wf(s,t),r=s.injectorIndex;if(d0(n)){const o=Lc(n),a=Nc(n,t),l=a[pe].data;for(let h=0;h<8;h++)t[r+h]=a[o+h]|l[o+h]}return t[r+8]=n,r}function Sf(s,t){s.push(0,0,0,0,0,0,0,0,t)}function g0(s,t){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===t[s.injectorIndex+8]?-1:s.injectorIndex}function wf(s,t){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let e=0,i=null,n=t;for(;null!==n;){if(i=w0(n),null===i)return qo;if(e++,n=n[Yo],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return qo}function If(s,t,e){!function mL(s,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(ul)&&(i=e[ul]),null==i&&(i=e[ul]=gL++);const n=i&f0;t.data[s+(n>>v0)]|=1<<n}(s,t,e)}function m0(s,t,e){if(e&Le.Optional||void 0!==s)return s;vc()}function y0(s,t,e,i){if(e&Le.Optional&&void 0===i&&(i=null),!(e&(Le.Self|Le.Host))){const n=s[Sc],r=zn(void 0);try{return n?n.get(t,i,e&Le.Optional):jC(t,i,e&Le.Optional)}finally{zn(r)}}return m0(i,0,e)}function b0(s,t,e,i=Le.Default,n){if(null!==s){if(1024&t[Xe]){const o=function wL(s,t,e,i,n){let r=s,o=t;for(;null!==r&&null!==o&&1024&o[Xe]&&!(256&o[Xe]);){const a=C0(r,o,e,i|Le.Self,Lr);if(a!==Lr)return a;let l=r.parent;if(!l){const h=o[HC];if(h){const c=h.get(e,Lr,i);if(c!==Lr)return c}l=w0(o),o=o[Yo]}r=l}return n}(s,t,e,i,Lr);if(o!==Lr)return o}const r=C0(s,t,e,i,Lr);if(r!==Lr)return r}return y0(t,e,i,n)}function C0(s,t,e,i,n){const r=function CL(s){if("string"==typeof s)return s.charCodeAt(0)||0;const t=s.hasOwnProperty(ul)?s[ul]:void 0;return"number"==typeof t?t>=0?t&f0:ML:t}(e);if("function"==typeof r){if(!r0(t,s,i))return i&Le.Host?m0(n,0,i):y0(t,e,i,n);try{const o=r(i);if(null!=o||i&Le.Optional)return o;vc()}finally{l0()}}else if("number"==typeof r){let o=null,a=g0(s,t),l=qo,h=i&Le.Host?t[Wi][Vi]:null;for((-1===a||i&Le.SkipSelf)&&(l=-1===a?wf(s,t):t[a+8],l!==qo&&S0(i,!1)?(o=t[pe],a=Lc(l),t=Nc(l,t)):a=-1);-1!==a;){const c=t[pe];if(M0(r,a,c.data)){const u=bL(a,t,e,o,i,h);if(u!==Lr)return u}l=t[a+8],l!==qo&&S0(i,t[pe].data[a+8]===h)&&M0(r,a,t)?(o=c,a=Lc(l),t=Nc(l,t)):a=-1}}return n}function bL(s,t,e,i,n,r){const o=t[pe],a=o.data[s+8],c=Rc(a,o,e,null==i?gl(a)&&Mf:i!=o&&0!=(3&a.type),n&Le.Host&&r===a);return null!==c?ho(t,o,c,a):Lr}function Rc(s,t,e,i,n){const r=s.providerIndexes,o=t.data,a=1048575&r,l=s.directiveStart,c=r>>20,d=n?a+c:s.directiveEnd;for(let f=i?a:a+c;f<d;f++){const v=o[f];if(f<l&&e===v||f>=l&&v.type===e)return f}if(n){const f=o[l];if(f&&or(f)&&f.type===e)return l}return null}function ho(s,t,e,i){let n=s[e];const r=t.data;if(function pL(s){return s instanceof yl}(n)){const o=n;o.resolving&&function pA(s,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${s}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${s}${e}`)}(wt(r[e]));const a=kc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?zn(o.injectImpl):null;r0(s,i,Le.Default);try{n=s[e]=o.factory(void 0,r,s,i),t.firstCreatePass&&e>=i.directiveStart&&function cL(s,t,e){const{ngOnChanges:i,ngOnInit:n,ngDoCheck:r}=t.type.prototype;if(i){const o=UC(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(s,o),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(s,o)}n&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-s,n),r&&((e.preOrderHooks??(e.preOrderHooks=[])).push(s,r),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(s,r))}(e,r[e],t)}finally{null!==l&&zn(l),kc(a),o.resolving=!1,l0()}}return n}function M0(s,t,e){return!!(e[t+(s>>v0)]&1<<s)}function S0(s,t){return!(s&Le.Self||s&Le.Host&&t)}class Qo{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return b0(this._tNode,this._lView,t,bc(i),e)}}function ML(){return new Qo(Ni(),J())}function w0(s){const t=s[pe],e=t.type;return 2===e?t.declTNode:1===e?s[Vi]:null}class Ge{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Vt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function co(s,t){s.forEach(e=>Array.isArray(e)?co(e,t):t(e))}function O0(s,t,e){t>=s.length?s.push(e):s.splice(t,0,e)}function Fc(s,t){return t>=s.length-1?s.pop():s.splice(t,1)[0]}var fn=(()=>((fn=fn||{})[fn.Important=1]="Important",fn[fn.DashCase=2]="DashCase",fn))();const kf=new Map;let $L=0;const Rf="__ngContext__";function Xi(s,t){Dn(t)?(s[Rf]=t[vl],function ZL(s){kf.set(s[vl],s)}(t)):s[Rf]=t}let Ff;function Hf(s,t){return Ff(s,t)}function Tl(s){const t=s[ri];return sr(t)?t[ri]:t}function Bf(s){return X0(s[dl])}function _f(s){return X0(s[rr])}function X0(s){for(;null!==s&&!sr(s);)s=s[rr];return s}function ta(s,t,e,i,n){if(null!=i){let r,o=!1;sr(i)?r=i:Dn(i)&&(o=!0,i=i[Kr]);const a=Li(i);0===s&&null!==e?null==n?K0(t,e,a):uo(t,e,a,n||null,!0):1===s&&null!==e?uo(t,e,a,n||null,!0):2===s?function Qf(s,t,e){const i=Vc(s,t);i&&function mN(s,t,e,i){s.removeChild(t,e,i)}(s,i,t,e)}(t,a,o):3===s&&t.destroyNode(a),null!=r&&function CN(s,t,e,i,n){const r=e[Ic];r!==Li(e)&&ta(t,s,i,r,n);for(let a=nn;a<e.length;a++){const l=e[a];Dl(l[pe],l,s,t,i,r)}}(t,s,r,e,n)}}function Uf(s,t,e){return s.createElement(t,e)}function Q0(s,t){const e=s[Vo],i=e.indexOf(t),n=t[ri];512&t[Xe]&&(t[Xe]&=-513,cf(n,-1)),e.splice(i,1)}function Vf(s,t){if(s.length<=nn)return;const e=nn+t,i=s[e];if(i){const n=i[fl];null!==n&&n!==s&&Q0(n,i),t>0&&(s[e-1][rr]=i[rr]);const r=Fc(s,nn+t);!function hN(s,t){Dl(s,t,t[$e],2,null,null),t[Kr]=null,t[Vi]=null}(i[pe],i);const o=r[jr];null!==o&&o.detachView(r[pe]),i[ri]=null,i[rr]=null,i[Xe]&=-65}return i}function $0(s,t){if(!(128&t[Xe])){const e=t[$e];e.destroyNode&&Dl(s,t,e,3,null,null),function pN(s){let t=s[dl];if(!t)return Wf(s[pe],s);for(;t;){let e=null;if(Dn(t))e=t[dl];else{const i=t[nn];i&&(e=i)}if(!e){for(;t&&!t[rr]&&t!==s;)Dn(t)&&Wf(t[pe],t),t=t[ri];null===t&&(t=s),Dn(t)&&Wf(t[pe],t),e=t&&t[rr]}t=e}}(t)}}function Wf(s,t){if(!(128&t[Xe])){t[Xe]&=-65,t[Xe]|=128,function gN(s,t){let e;if(null!=s&&null!=(e=s.destroyHooks))for(let i=0;i<e.length;i+=2){const n=t[e[i]];if(!(n instanceof yl)){const r=e[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=n[r[o]],l=r[o+1];Fn(4,a,l);try{l.call(a)}finally{Fn(5,a,l)}}else{Fn(4,n,r);try{r.call(n)}finally{Fn(5,n,r)}}}}}(s,t),function vN(s,t){const e=s.cleanup,i=t[_o];let n=-1;if(null!==e)for(let r=0;r<e.length-1;r+=2)if("string"==typeof e[r]){const o=e[r+3];o>=0?i[n=o]():i[n=-o].unsubscribe(),r+=2}else{const o=i[n=e[r+1]];e[r].call(o)}if(null!==i){for(let r=n+1;r<i.length;r++)(0,i[r])();t[_o]=null}}(s,t),1===t[pe].type&&t[$e].destroy();const e=t[fl];if(null!==e&&sr(t[ri])){e!==t[ri]&&Q0(e,t);const i=t[jr];null!==i&&i.detachView(s)}!function KL(s){kf.delete(s[vl])}(t)}}function G0(s,t,e){return function Z0(s,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[Kr];{const{componentOffset:n}=i;if(n>-1){const{encapsulation:r}=s.data[i.directiveStart+n];if(r===Pr.None||r===Pr.Emulated)return null}return En(i,e)}}(s,t.parent,e)}function uo(s,t,e,i,n){s.insertBefore(t,e,i,n)}function K0(s,t,e){s.appendChild(t,e)}function J0(s,t,e,i,n){null!==i?uo(s,t,e,i,n):K0(s,t,e)}function Vc(s,t){return s.parentNode(t)}let Xf,Zf,iM=function tM(s,t,e){return 40&s.type?En(s,e):null};function Wc(s,t,e,i){const n=G0(s,i,t),r=t[$e],a=function eM(s,t,e){return iM(s,t,e)}(i.parent||t[Vi],i,t);if(null!=n)if(Array.isArray(e))for(let l=0;l<e.length;l++)J0(r,n,e[l],a,!1);else J0(r,n,e,a,!1);void 0!==Xf&&Xf(r,i,t,e,n)}function Xc(s,t){if(null!==t){const e=t.type;if(3&e)return En(t,s);if(4&e)return qf(-1,s[t.index]);if(8&e){const i=t.child;if(null!==i)return Xc(s,i);{const n=s[t.index];return sr(n)?qf(-1,n):Li(n)}}if(32&e)return Hf(t,s)()||Li(s[t.index]);{const i=rM(s,t);return null!==i?Array.isArray(i)?i[0]:Xc(Tl(s[Wi]),i):Xc(s,t.next)}}return null}function rM(s,t){return null!==t?s[Wi][Vi].projection[t.projection]:null}function qf(s,t){const e=nn+s+1;if(e<t.length){const i=t[e],n=i[pe].firstChild;if(null!==n)return Xc(i,n)}return t[Ic]}function $f(s,t,e,i,n,r,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&Xi(Li(a),i),e.flags|=2),32!=(32&e.flags))if(8&l)$f(s,t,e.child,i,n,r,!1),ta(t,s,n,a,r);else if(32&l){const h=Hf(e,i);let c;for(;c=h();)ta(t,s,n,c,r);ta(t,s,n,a,r)}else 16&l?sM(s,t,i,e,n,r):ta(t,s,n,a,r);e=o?e.projectionNext:e.next}}function Dl(s,t,e,i,n,r){$f(e,i,s.firstChild,t,n,r,!1)}function sM(s,t,e,i,n,r){const o=e[Wi],l=o[Vi].projection[i.projection];if(Array.isArray(l))for(let h=0;h<l.length;h++)ta(t,s,n,l[h],r);else $f(s,t,l,o[ri],n,r,!0)}function oM(s,t,e){""===e?s.removeAttribute(t,"class"):s.setAttribute(t,"class",e)}function aM(s,t,e){const{mergedAttrs:i,classes:n,styles:r}=e;null!==i&&Cf(s,t,i),null!==n&&oM(s,t,n),null!==r&&function SN(s,t,e){s.setAttribute(t,"style",e)}(s,t,r)}const MM=new Ge("ENVIRONMENT_INITIALIZER"),SM=new Ge("INJECTOR",-1),wM=new Ge("INJECTOR_DEF_TYPES");class IM{get(t,e=ll){if(e===ll){const i=new Error(`NullInjectorError: No provider for ${kt(t)}!`);throw i.name="NullInjectorError",i}return e}}function GN(...s){return{\u0275providers:OM(0,s),\u0275fromNgModule:!0}}function OM(s,...t){const e=[],i=new Set;let n;return co(t,r=>{const o=r;nv(o,e,[],i)&&(n||(n=[]),n.push(o))}),void 0!==n&&TM(n,e),e}function TM(s,t){for(let e=0;e<s.length;e++){const{providers:n}=s[e];rv(n,r=>{t.push(r)})}}function nv(s,t,e,i){if(!(s=Ee(s)))return!1;let n=null,r=xC(s);const o=!r&&Ot(s);if(r||o){if(o&&!o.standalone)return!1;n=s}else{const l=s.ngModule;if(r=xC(l),!r)return!1;n=l}const a=i.has(n);if(o){if(a)return!1;if(i.add(n),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const h of l)nv(h,t,e,i)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let h;i.add(n);try{co(r.imports,c=>{nv(c,t,e,i)&&(h||(h=[]),h.push(c))})}finally{}void 0!==h&&TM(h,t)}if(!a){const h=ao(n)||(()=>new n);t.push({provide:n,useFactory:h,deps:Ct},{provide:wM,useValue:n,multi:!0},{provide:MM,useValue:()=>bt(n),multi:!0})}const l=r.providers;null==l||a||rv(l,c=>{t.push(c)})}}return n!==s&&void 0!==s.providers}function rv(s,t){for(let e of s)Zd(e)&&(e=e.\u0275providers),Array.isArray(e)?rv(e,t):t(e)}const ZN=jt({provide:String,useValue:jt});function sv(s){return null!==s&&"object"==typeof s&&ZN in s}function po(s){return"function"==typeof s}const ov=new Ge("Set Injector scope."),Gc={},JN={};let av;function Zc(){return void 0===av&&(av=new IM),av}class na{}class xM extends na{get destroyed(){return this._destroyed}constructor(t,e,i,n){super(),this.parent=e,this.source=i,this.scopes=n,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hv(t,o=>this.processProvider(o)),this.records.set(SM,ra(void 0,this)),n.has("environment")&&this.records.set(na,ra(void 0,this));const r=this.records.get(ov);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(wM.multi,Ct,Le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Ho(this),i=zn(void 0);try{return t()}finally{Ho(e),zn(i)}}get(t,e=ll,i=Le.Default){this.assertNotDestroyed(),i=bc(i);const n=Ho(this),r=zn(void 0);try{if(!(i&Le.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function r1(s){return"function"==typeof s||"object"==typeof s&&s instanceof Ge}(t)&&gc(t);a=l&&this.injectableDefInScope(l)?ra(lv(t),Gc):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&Le.Self?Zc():this.parent).get(t,e=i&Le.Optional&&e===ll?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[yc]=o[yc]||[]).unshift(kt(t)),n)throw o;return function TA(s,t,e,i){const n=s[yc];throw t[AC]&&n.unshift(t[AC]),s.message=function DA(s,t,e,i=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==SA?s.slice(2):s;let n=kt(t);if(Array.isArray(t))n=t.map(kt).join(" -> ");else if("object"==typeof t){let r=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):kt(a)))}n=`{${r.join(", ")}}`}return`${e}${i?"("+i+")":""}[${n}]: ${s.replace(MA,"\n  ")}`}("\n"+s.message,n,e,i),s[CA]=n,s[yc]=null,s}(o,t,"R3InjectorError",this.source)}throw o}finally{zn(r),Ho(n)}}resolveInjectorInitializers(){const t=Ho(this),e=zn(void 0);try{const i=this.get(MM.multi,Ct,Le.Self);for(const n of i)n()}finally{Ho(t),zn(e)}}toString(){const t=[],e=this.records;for(const i of e.keys())t.push(kt(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(t){let e=po(t=Ee(t))?t:Ee(t&&t.provide);const i=function t1(s){return sv(s)?ra(void 0,s.useValue):ra(function PM(s,t,e){let i;if(po(s)){const n=Ee(s);return ao(n)||lv(n)}if(sv(s))i=()=>Ee(s.useValue);else if(function EM(s){return!(!s||!s.useFactory)}(s))i=()=>s.useFactory(...tf(s.deps||[]));else if(function DM(s){return!(!s||!s.useExisting)}(s))i=()=>bt(Ee(s.useExisting));else{const n=Ee(s&&(s.useClass||s.provide));if(!function i1(s){return!!s.deps}(s))return ao(n)||lv(n);i=()=>new n(...tf(s.deps))}return i}(s),Gc)}(t);if(po(t)||!0!==t.multi)this.records.get(e);else{let n=this.records.get(e);n||(n=ra(void 0,Gc,!0),n.factory=()=>tf(n.multi),this.records.set(e,n)),e=t,n.multi.push(t)}this.records.set(e,i)}hydrate(t,e){return e.value===Gc&&(e.value=JN,e.value=e.factory()),"object"==typeof e.value&&e.value&&function n1(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Ee(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function lv(s){const t=gc(s),e=null!==t?t.factory:ao(s);if(null!==e)return e;if(s instanceof Ge)throw new Ce(204,!1);if(s instanceof Function)return function e1(s){const t=s.length;if(t>0)throw function Sl(s,t){const e=[];for(let i=0;i<s;i++)e.push(t);return e}(t,"?"),new Ce(204,!1);const e=function mA(s){return s&&(s[mc]||s[PC])||null}(s);return null!==e?()=>e.factory(s):()=>new s}(s);throw new Ce(204,!1)}function ra(s,t,e=!1){return{factory:s,value:t,multi:e?[]:void 0}}function hv(s,t){for(const e of s)Array.isArray(e)?hv(e,t):e&&Zd(e)?hv(e.\u0275providers,t):t(e)}class s1{}class jM{}class a1{resolveComponentFactory(t){throw function o1(s){const t=Error(`No component factory found for ${kt(s)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=s,t}(t)}}let Kc=(()=>{class s{}return s.NULL=new a1,s})();function l1(){return sa(Ni(),J())}function sa(s,t){return new fo(En(s,t))}let fo=(()=>{class s{constructor(e){this.nativeElement=e}}return s.__NG_ELEMENT_ID__=l1,s})();function h1(s){return s instanceof fo?s.nativeElement:s}class LM{}let cv=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function c1(){const s=J(),e=dn(Ni().index,s);return(Dn(e)?e:s)[$e]}(),s})(),u1=(()=>{class s{}return s.\u0275prov=Vt({token:s,providedIn:"root",factory:()=>null}),s})();class uv{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const p1=new uv("15.2.9"),pv={},dv="ngOriginalError";function fv(s){return s[dv]}class oa{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&fv(t);for(;e&&fv(e);)e=fv(e);return e||null}}function kM(s,t,e){let i=s.length;for(;;){const n=s.indexOf(t,e);if(-1===n)return n;if(0===n||s.charCodeAt(n-1)<=32){const r=t.length;if(n+r===i||s.charCodeAt(n+r)<=32)return n}e=n+1}}const zM="ng-template";function w1(s,t,e){let i=0,n=!0;for(;i<s.length;){let r=s[i++];if("string"==typeof r&&n){const o=s[i++];if(e&&"class"===r&&-1!==kM(o.toLowerCase(),t,0))return!0}else{if(1===r){for(;i<s.length&&"string"==typeof(r=s[i++]);)if(r.toLowerCase()===t)return!0;return!1}"number"==typeof r&&(n=!1)}}return!1}function RM(s){return 4===s.type&&s.value!==zM}function I1(s,t,e){return t===(4!==s.type||e?s.value:zM)}function O1(s,t,e){let i=4;const n=s.attrs||[],r=function E1(s){for(let t=0;t<s.length;t++)if(c0(s[t]))return t;return s.length}(n);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!I1(s,l,e)||""===l&&1===t.length){if(ar(i))return!1;o=!0}}else{const h=8&i?l:t[++a];if(8&i&&null!==s.attrs){if(!w1(s.attrs,h,e)){if(ar(i))return!1;o=!0}continue}const u=T1(8&i?"class":l,n,RM(s),e);if(-1===u){if(ar(i))return!1;o=!0;continue}if(""!==h){let d;d=u>r?"":n[u+1].toLowerCase();const f=8&i?d:null;if(f&&-1!==kM(f,h,0)||2&i&&h!==d){if(ar(i))return!1;o=!0}}}}else{if(!o&&!ar(i)&&!ar(l))return!1;if(o&&ar(l))continue;o=!1,i=l|1&i}}return ar(i)||o}function ar(s){return 0==(1&s)}function T1(s,t,e,i){if(null===t)return-1;let n=0;if(i||!e){let r=!1;for(;n<t.length;){const o=t[n];if(o===s)return n;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=t[++n];for(;"string"==typeof a;)a=t[++n];continue}if(4===o)break;if(0===o){n+=4;continue}}n+=r?1:2}return-1}return function x1(s,t){let e=s.indexOf(4);if(e>-1)for(e++;e<s.length;){const i=s[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,s)}function FM(s,t,e=!1){for(let i=0;i<t.length;i++)if(O1(s,t[i],e))return!0;return!1}function HM(s,t){return s?":not("+t.trim()+")":t}function j1(s){let t=s[0],e=1,i=2,n="",r=!1;for(;e<s.length;){let o=s[e];if("string"==typeof o)if(2&i){const a=s[++e];n+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?n+="."+o:4&i&&(n+=" "+o);else""!==n&&!ar(o)&&(t+=HM(r,n),n=""),i=o,r=r||!ar(i);e++}return""!==n&&(t+=HM(r,n)),t}const Fe={};function _M(s,t,e,i){if(!i)if(3==(3&t[Xe])){const r=s.preOrderCheckHooks;null!==r&&jc(t,r,e)}else{const r=s.preOrderHooks;null!==r&&Ac(t,r,0,e)}lo(e)}function WM(s,t=null,e=null,i){const n=XM(s,t,e,i);return n.resolveInjectorInitializers(),n}function XM(s,t=null,e=null,i,n=new Set){const r=[e||Ct,GN(s)];return i=i||("object"==typeof s?void 0:kt(s)),new xM(r,t||Zc(),i||null,n)}let js=(()=>{class s{static create(e,i){if(Array.isArray(e))return WM({name:""},i,e,"");{const n=e.name??"";return WM({name:n},e.parent,e.providers,n)}}}return s.THROW_IF_NOT_FOUND=ll,s.NULL=new IM,s.\u0275prov=Vt({token:s,providedIn:"any",factory:()=>bt(SM)}),s.__NG_ELEMENT_ID__=-1,s})();function _e(s,t=Le.Default){const e=J();return null===e?bt(s,t):b0(Ni(),e,Ee(s),t)}function JM(s,t){const e=s.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i+1];if(-1!==r){const o=s.data[r];vf(e[i]),o.contentQueries(2,t[r],r)}}}function eu(s,t,e,i,n,r,o,a,l,h,c){const u=t.blueprint.slice();return u[Kr]=n,u[Xe]=76|i,(null!==c||s&&1024&s[Xe])&&(u[Xe]|=1024),$C(u),u[ri]=u[Yo]=s,u[li]=e,u[wc]=o||s&&s[wc],u[$e]=a||s&&s[$e],u[of]=l||s&&s[of]||null,u[Sc]=h||s&&s[Sc]||null,u[Vi]=r,u[vl]=function GL(){return $L++}(),u[HC]=c,u[Wi]=2==t.type?s[Wi]:u,u}function ha(s,t,e,i,n){let r=s.data[t];if(null===r)r=function bv(s,t,e,i,n){const r=KC(),o=uf(),l=s.data[t]=function rk(s,t,e,i,n,r){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:n,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,e,t,i,n);return null===s.firstChild&&(s.firstChild=l),null!==r&&(o?null==r.child&&null!==l.parent&&(r.child=l):null===r.next&&(r.next=l,l.prev=r)),l}(s,t,e,i,n),function JA(){return Re.lFrame.inI18n}()&&(r.flags|=32);else if(64&r.type){r.type=e,r.value=i,r.attrs=n;const o=function ml(){const s=Re.lFrame,t=s.currentTNode;return s.isParent?t:t.parent}();r.injectorIndex=null===o?-1:o.injectorIndex}return Ar(r,!0),r}function jl(s,t,e,i){if(0===e)return-1;const n=t.length;for(let r=0;r<e;r++)t.push(i),s.blueprint.push(i),s.data.push(null);return n}function Cv(s,t,e){gf(t);try{const i=s.viewQuery;null!==i&&xv(1,i,e);const n=s.template;null!==n&&eS(s,t,n,1,e),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&JM(s,t),s.staticViewQueries&&xv(2,s.viewQuery,e);const r=s.components;null!==r&&function tk(s,t){for(let e=0;e<t.length;e++)Ik(s,t[e])}(t,r)}catch(i){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),i}finally{t[Xe]&=-5,mf()}}function tu(s,t,e,i){const n=t[Xe];if(128!=(128&n)){gf(t);try{$C(t),function e0(s){return Re.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==e&&eS(s,t,e,2,i);const o=3==(3&n);if(o){const h=s.preOrderCheckHooks;null!==h&&jc(t,h,null)}else{const h=s.preOrderHooks;null!==h&&Ac(t,h,0,null),yf(t,0)}if(function Sk(s){for(let t=Bf(s);null!==t;t=_f(t)){if(!t[BC])continue;const e=t[Vo];for(let i=0;i<e.length;i++){const n=e[i];512&n[Xe]||cf(n[ri],1),n[Xe]|=512}}}(t),function Mk(s){for(let t=Bf(s);null!==t;t=_f(t))for(let e=nn;e<t.length;e++){const i=t[e],n=i[pe];xc(i)&&tu(n,i,n.template,i[li])}}(t),null!==s.contentQueries&&JM(s,t),o){const h=s.contentCheckHooks;null!==h&&jc(t,h)}else{const h=s.contentHooks;null!==h&&Ac(t,h,1),yf(t,1)}!function J1(s,t){const e=s.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const n=e[i];if(n<0)lo(~n);else{const r=n,o=e[++i],a=e[++i];eL(o,r),a(2,t[r])}}}finally{lo(-1)}}(s,t);const a=s.components;null!==a&&function ek(s,t){for(let e=0;e<t.length;e++)wk(s,t[e])}(t,a);const l=s.viewQuery;if(null!==l&&xv(2,l,i),o){const h=s.viewCheckHooks;null!==h&&jc(t,h)}else{const h=s.viewHooks;null!==h&&Ac(t,h,2),yf(t,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),t[Xe]&=-41,512&t[Xe]&&(t[Xe]&=-513,cf(t[ri],-1))}finally{mf()}}}function eS(s,t,e,i,n){const r=sn(),o=2&i;try{lo(-1),o&&t.length>_t&&_M(s,t,_t,!1),Fn(o?2:0,n),e(i,n)}finally{lo(r),Fn(o?3:1,n)}}function Mv(s,t,e){if(lf(t)){const n=t.directiveEnd;for(let r=t.directiveStart;r<n;r++){const o=s.data[r];o.contentQueries&&o.contentQueries(1,e[r],r)}}}function tS(s){const t=s.tView;return null===t||t.incompleteFirstPass?s.tView=Iv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):t}function Iv(s,t,e,i,n,r,o,a,l,h){const c=_t+i,u=c+n,d=function ik(s,t){const e=[];for(let i=0;i<t;i++)e.push(i<s?null:Fe);return e}(c,u),f="function"==typeof h?h():h;return d[pe]={type:s,blueprint:d,template:e,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function iS(s,t,e,i){const n=lS(t);null===e?n.push(i):(n.push(e),s.firstCreatePass&&hS(s).push(i,n.length-1))}function nS(s,t,e,i){for(let n in s)if(s.hasOwnProperty(n)){e=null===e?{}:e;const r=s[n];null===i?rS(e,t,n,r):i.hasOwnProperty(n)&&rS(e,t,i[n],r)}return e}function rS(s,t,e,i){s.hasOwnProperty(e)?s[e].push(t,i):s[e]=[t,i]}function sS(s,t,e,i,n,r){for(let h=0;h<i.length;h++)If(zc(e,t),s,i[h].type);!function gk(s,t,e){s.flags|=1,s.directiveStart=t,s.directiveEnd=t+e,s.providerIndexes=t}(e,s.data.length,i.length);for(let h=0;h<i.length;h++){const c=i[h];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=jl(s,t,i.length,null);for(let h=0;h<i.length;h++){const c=i[h];e.mergedAttrs=bl(e.mergedAttrs,c.hostAttrs),mk(s,e,t,l,c),vk(l,c,n),null!==c.contentQueries&&(e.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(e.flags|=64);const u=c.type.prototype;!o&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(e.index),o=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function sk(s,t,e){const n=t.directiveEnd,r=s.data,o=t.attrs,a=[];let l=null,h=null;for(let c=t.directiveStart;c<n;c++){const u=r[c],d=e?e.get(u):null,v=d?d.outputs:null;l=nS(u.inputs,c,l,d?d.inputs:null),h=nS(u.outputs,c,h,v);const g=null===l||null===o||RM(t)?null:Ck(l,c,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=h}(s,e,r)}function oS(s,t,e){const i=e.directiveStart,n=e.directiveEnd,r=e.index,o=function tL(){return Re.lFrame.currentDirectiveIndex}();try{lo(r);for(let a=i;a<n;a++){const l=s.data[a],h=t[a];df(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&pk(l,h)}}finally{lo(-1),df(o)}}function pk(s,t){null!==s.hostBindings&&s.hostBindings(1,t)}function Tv(s,t,e){t.componentOffset=e,(s.components??(s.components=[])).push(t.index)}function vk(s,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=s;or(t)&&(e[""]=s)}}function mk(s,t,e,i,n){s.data[i]=n;const r=n.factory||(n.factory=ao(n.type)),o=new yl(r,or(n),_e);s.blueprint[i]=o,e[i]=o,function hk(s,t,e,i,n){const r=n.hostBindings;if(r){let o=s.hostBindingOpCodes;null===o&&(o=s.hostBindingOpCodes=[]);const a=~t.index;(function ck(s){let t=s.length;for(;t>0;){const e=s[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,i,r)}}(s,t,i,jl(s,e,n.hostVars,Fe),n)}function bk(s,t,e,i,n,r){const o=r[t];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const h=o[l++],c=o[l++],u=o[l++];null!==a?i.setInput(e,u,h,c):e[c]=u}}}function Ck(s,t,e){let i=null,n=0;for(;n<e.length;){const r=e[n];if(0!==r)if(5!==r){if("number"==typeof r)break;if(s.hasOwnProperty(r)){null===i&&(i=[]);const o=s[r];for(let a=0;a<o.length;a+=2)if(o[a]===t){i.push(r,o[a+1],e[n+1]);break}}n+=2}else n+=2;else n+=4}return i}function wk(s,t){const e=dn(t,s);if(xc(e)){const i=e[pe];48&e[Xe]?tu(i,e,i.template,e[li]):e[oo]>0&&Ev(e)}}function Ev(s){for(let i=Bf(s);null!==i;i=_f(i))for(let n=nn;n<i.length;n++){const r=i[n];if(xc(r))if(512&r[Xe]){const o=r[pe];tu(o,r,o.template,r[li])}else r[oo]>0&&Ev(r)}const e=s[pe].components;if(null!==e)for(let i=0;i<e.length;i++){const n=dn(e[i],s);xc(n)&&n[oo]>0&&Ev(n)}}function Ik(s,t){const e=dn(t,s),i=e[pe];(function Ok(s,t){for(let e=t.length;e<s.blueprint.length;e++)t.push(s.blueprint[e])})(i,e),Cv(i,e,e[li])}function iu(s,t){return s[dl]?s[FC][rr]=t:s[dl]=t,s[FC]=t,t}function nu(s){for(;s;){s[Xe]|=32;const t=Tl(s);if(LA(s)&&!t)return s;s=t}return null}function ru(s,t,e,i=!0){const n=t[wc];n.begin&&n.begin();try{tu(s,t,s.template,e)}catch(o){throw i&&uS(t,o),o}finally{n.end&&n.end()}}function xv(s,t,e){vf(0),t(s,e)}function lS(s){return s[_o]||(s[_o]=[])}function hS(s){return s.cleanup||(s.cleanup=[])}function uS(s,t){const e=s[Sc],i=e?e.get(oa,null):null;i&&i.handleError(t)}function Pv(s,t,e,i,n){for(let r=0;r<e.length;){const o=e[r++],a=e[r++],l=t[o],h=s.data[o];null!==h.setInput?h.setInput(l,n,i,a):l[a]=n}}function su(s,t,e){let i=e?s.styles:null,n=e?s.classes:null,r=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?r=a:1==r?n=Qd(n,a):2==r&&(i=Qd(i,a+": "+t[++o]+";"))}e?s.styles=i:s.stylesWithoutHost=i,e?s.classes=n:s.classesWithoutHost=n}function ou(s,t,e,i,n=!1){for(;null!==e;){const r=t[e.index];if(null!==r&&i.push(Li(r)),sr(r))for(let a=nn;a<r.length;a++){const l=r[a],h=l[pe].firstChild;null!==h&&ou(l[pe],l,h,i)}const o=e.type;if(8&o)ou(s,t,e.child,i);else if(32&o){const a=Hf(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=rM(t,e);if(Array.isArray(a))i.push(...a);else{const l=Tl(t[Wi]);ou(l[pe],l,a,i,!0)}}e=n?e.projectionNext:e.next}return i}class Al{get rootNodes(){const t=this._lView,e=t[pe];return ou(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[li]}set context(t){this._lView[li]=t}get destroyed(){return 128==(128&this._lView[Xe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[ri];if(sr(t)){const e=t[Oc],i=e?e.indexOf(this):-1;i>-1&&(Vf(t,i),Fc(e,i))}this._attachedToViewContainer=!1}$0(this._lView[pe],this._lView)}onDestroy(t){iS(this._lView[pe],this._lView,null,t)}markForCheck(){nu(this._cdRefInjectingView||this._lView)}detach(){this._lView[Xe]&=-65}reattach(){this._lView[Xe]|=64}detectChanges(){ru(this._lView[pe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uN(s,t){Dl(s,t,t[$e],2,null,null)}(this._lView[pe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=t}}class Tk extends Al{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;ru(t[pe],t,t[li],!1)}checkNoChanges(){}get context(){return null}}class pS extends Kc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ot(t);return new Ll(e,this.ngModule)}}function dS(s){const t=[];for(let e in s)s.hasOwnProperty(e)&&t.push({propName:s[e],templateName:e});return t}class Ek{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=bc(i);const n=this.injector.get(t,pv,i);return n!==pv||e===pv?n:this.parentInjector.get(t,e,i)}}class Ll extends jM{get inputs(){return dS(this.componentDef.inputs)}get outputs(){return dS(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function A1(s){return s.map(j1).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,n){let r=(n=n||this.ngModule)instanceof na?n:n?.injector;r&&null!==this.componentDef.getStandaloneInjector&&(r=this.componentDef.getStandaloneInjector(r)||r);const o=r?new Ek(t,r):t,a=o.get(LM,null);if(null===a)throw new Ce(407,!1);const l=o.get(u1,null),h=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function nk(s,t,e){return s.selectRootElement(t,e===Pr.ShadowDom)}(h,i,this.componentDef.encapsulation):Uf(h,c,function Dk(s){const t=s.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(c)),d=this.componentDef.onPush?288:272,f=Iv(0,null,null,1,0,null,null,null,null,null),v=eu(null,f,null,d,null,null,a,h,l,o,null);let g,b;gf(v);try{const M=this.componentDef;let w,S=null;M.findHostDirectiveDefs?(w=[],S=new Map,M.findHostDirectiveDefs(M,w,S),w.push(M)):w=[M];const I=function Pk(s,t){const e=s[pe],i=_t;return s[i]=t,ha(e,i,2,"#host",null)}(v,u),P=function jk(s,t,e,i,n,r,o,a){const l=n[pe];!function Ak(s,t,e,i){for(const n of s)t.mergedAttrs=bl(t.mergedAttrs,n.hostAttrs);null!==t.mergedAttrs&&(su(t,t.mergedAttrs,!0),null!==e&&aM(i,e,t))}(i,s,t,o);const h=r.createRenderer(t,e),c=eu(n,tS(e),null,e.onPush?32:16,n[s.index],s,r,h,a||null,null,null);return l.firstCreatePass&&Tv(l,s,i.length-1),iu(n,c),n[s.index]=c}(I,u,M,w,v,a,h);b=QC(f,_t),u&&function Nk(s,t,e,i){if(i)Cf(s,e,["ng-version",p1.full]);else{const{attrs:n,classes:r}=function L1(s){const t=[],e=[];let i=1,n=2;for(;i<s.length;){let r=s[i];if("string"==typeof r)2===n?""!==r&&t.push(r,s[++i]):8===n&&e.push(r);else{if(!ar(n))break;n=r}i++}return{attrs:t,classes:e}}(t.selectors[0]);n&&Cf(s,e,n),r&&r.length>0&&oM(s,e,r.join(" "))}}(h,M,u,i),void 0!==e&&function kk(s,t,e){const i=s.projection=[];for(let n=0;n<t.length;n++){const r=e[n];i.push(null!=r?Array.from(r):null)}}(b,this.ngContentSelectors,e),g=function Lk(s,t,e,i,n,r){const o=Ni(),a=n[pe],l=En(o,n);sS(a,n,o,e,null,i);for(let c=0;c<e.length;c++)Xi(ho(n,a,o.directiveStart+c,o),n);oS(a,n,o),l&&Xi(l,n);const h=ho(n,a,o.directiveStart+o.componentOffset,o);if(s[li]=n[li]=h,null!==r)for(const c of r)c(h,t);return Mv(a,o,s),h}(P,M,w,S,v,[zk]),Cv(f,v,null)}finally{mf()}return new xk(this.componentType,g,sa(b,v),v,b)}}class xk extends s1{constructor(t,e,i,n,r){super(),this.location=i,this._rootLView=n,this._tNode=r,this.instance=e,this.hostView=this.changeDetectorRef=new Tk(n),this.componentType=t}setInput(t,e){const i=this._tNode.inputs;let n;if(null!==i&&(n=i[t])){const r=this._rootLView;Pv(r[pe],r,n,t,e),nu(dn(this._tNode.index,r))}}get injector(){return new Qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function zk(){const s=Ni();Pc(J()[pe],s)}function jv(s){let t=function fS(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),e=!0;const i=[s];for(;t;){let n;if(or(s))n=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ce(903,!1);n=t.\u0275dir}if(n){if(e){i.push(n);const o=s;o.inputs=Av(s.inputs),o.declaredInputs=Av(s.declaredInputs),o.outputs=Av(s.outputs);const a=n.hostBindings;a&&Bk(s,a);const l=n.viewQuery,h=n.contentQueries;if(l&&Fk(s,l),h&&Hk(s,h),qd(s.inputs,n.inputs),qd(s.declaredInputs,n.declaredInputs),qd(s.outputs,n.outputs),or(n)&&n.data.animation){const c=s.data;c.animation=(c.animation||[]).concat(n.data.animation)}}const r=n.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(s),a===jv&&(e=!1)}}t=Object.getPrototypeOf(t)}!function Rk(s){let t=0,e=null;for(let i=s.length-1;i>=0;i--){const n=s[i];n.hostVars=t+=n.hostVars,n.hostAttrs=bl(n.hostAttrs,e=bl(e,n.hostAttrs))}}(i)}function Av(s){return s===Gr?{}:s===Ct?[]:s}function Fk(s,t){const e=s.viewQuery;s.viewQuery=e?(i,n)=>{t(i,n),e(i,n)}:t}function Hk(s,t){const e=s.contentQueries;s.contentQueries=e?(i,n,r)=>{t(i,n,r),e(i,n,r)}:t}function Bk(s,t){const e=s.hostBindings;s.hostBindings=e?(i,n)=>{t(i,n),e(i,n)}:t}function Nv(s,t,e){const i=J();return function qi(s,t,e){return!Object.is(s[t],e)&&(s[t]=e,!0)}(i,function Xo(){return Re.lFrame.bindingIndex++}(),t)&&function Pn(s,t,e,i,n,r,o,a){const l=En(t,e);let c,h=t.inputs;!a&&null!=h&&(c=h[i])?(Pv(s,e,c,i,n),gl(t)&&function ak(s,t){const e=dn(t,s);16&e[Xe]||(e[Xe]|=32)}(e,t.index)):3&t.type&&(i=function ok(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(i),n=null!=o?o(n,t.value||"",i):n,r.setProperty(l,i,n))}(ct(),function Gt(){const s=Re.lFrame;return QC(s.tView,s.selectedIndex)}(),i,s,t,i[$e],e,!1),Nv}function kv(s,t,e,i,n){const o=n?"class":"style";Pv(s,e,t.inputs[o],o,i)}function kl(s,t,e,i){const n=J(),r=ct(),o=_t+s,a=n[$e],l=r.firstCreatePass?function ez(s,t,e,i,n,r){const o=t.consts,l=ha(t,s,2,i,xs(o,n));return function Ov(s,t,e,i){if(ZC()){const n=null===i?null:{"":-1},r=function dk(s,t){const e=s.directiveRegistry;let i=null,n=null;if(e)for(let r=0;r<e.length;r++){const o=e[r];if(FM(t,o.selectors,!1))if(i||(i=[]),or(o))if(null!==o.findHostDirectiveDefs){const a=[];n=n||new Map,o.findHostDirectiveDefs(o,a,n),i.unshift(...a,o),Tv(s,t,a.length)}else i.unshift(o),Tv(s,t,0);else n=n||new Map,o.findHostDirectiveDefs?.(o,i,n),i.push(o)}return null===i?null:[i,n]}(s,e);let o,a;null===r?o=a=null:[o,a]=r,null!==o&&sS(s,t,e,o,n,a),n&&function fk(s,t,e){if(t){const i=s.localNames=[];for(let n=0;n<t.length;n+=2){const r=e[t[n+1]];if(null==r)throw new Ce(-301,!1);i.push(t[n],r)}}}(e,i,n)}e.mergedAttrs=bl(e.mergedAttrs,e.attrs)}(t,e,l,xs(o,r)),null!==l.attrs&&su(l,l.attrs,!1),null!==l.mergedAttrs&&su(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,r,n,t,e,i):r.data[o],h=n[o]=Uf(a,t,function hL(){return Re.lFrame.currentNamespace}()),c=Tc(l);return Ar(l,!0),aM(a,h,l),32!=(32&l.flags)&&Wc(r,n,h,l),0===function WA(){return Re.lFrame.elementDepthCount}()&&Xi(h,n),function XA(){Re.lFrame.elementDepthCount++}(),c&&(function Sv(s,t,e){ZC()&&(function uk(s,t,e,i){const n=e.directiveStart,r=e.directiveEnd;gl(e)&&function yk(s,t,e){const i=En(t,s),n=tS(e),r=s[wc],o=iu(s,eu(s,n,null,e.onPush?32:16,i,t,r,r.createRenderer(i,e),null,null,null));s[t.index]=o}(t,e,s.data[n+e.componentOffset]),s.firstCreatePass||zc(e,t),Xi(i,t);const o=e.initialInputs;for(let a=n;a<r;a++){const l=s.data[a],h=ho(t,s,a,e);Xi(h,t),null!==o&&bk(0,a-n,h,l,0,o),or(l)&&(dn(e.index,t)[li]=ho(t,s,a,e))}}(s,t,e,En(e,t)),64==(64&e.flags)&&oS(s,t,e))}(r,n,l),Mv(r,l,n)),null!==i&&function wv(s,t,e=En){const i=t.localNames;if(null!==i){let n=t.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?e(t,s):s[o];s[n++]=a}}}(n,l),kl}function zl(){let s=Ni();uf()?function pf(){Re.lFrame.isParent=!1}():(s=s.parent,Ar(s,!1));const t=s;!function qA(){Re.lFrame.elementDepthCount--}();const e=ct();return e.firstCreatePass&&(Pc(e,s),lf(s)&&e.queries.elementEnd(s)),null!=t.classesWithoutHost&&function dL(s){return 0!=(8&s.flags)}(t)&&kv(e,t,J(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function fL(s){return 0!=(16&s.flags)}(t)&&kv(e,t,J(),t.stylesWithoutHost,!1),zl}function Fv(s){return!!s&&"function"==typeof s.then}const nz=function PS(s){return!!s&&"function"==typeof s.subscribe};function hu(s,t,e,i){const n=J(),r=ct(),o=Ni();return function AS(s,t,e,i,n,r,o){const a=Tc(i),h=s.firstCreatePass&&hS(s),c=t[li],u=lS(t);let d=!0;if(3&i.type||o){const g=En(i,t),b=o?o(g):g,M=u.length,w=o?I=>o(Li(I[i.index])):i.index;let S=null;if(!o&&a&&(S=function rz(s,t,e,i){const n=s.cleanup;if(null!=n)for(let r=0;r<n.length-1;r+=2){const o=n[r];if(o===e&&n[r+1]===i){const a=t[_o],l=n[r+2];return a.length>l?a[l]:null}"string"==typeof o&&(r+=2)}return null}(s,t,n,i.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=r,S.__ngLastListenerFn__=r,d=!1;else{r=NS(i,t,c,r,!1);const I=e.listen(b,n,r);u.push(r,I),h&&h.push(n,w,M,M+1)}}else r=NS(i,t,c,r,!1);const f=i.outputs;let v;if(d&&null!==f&&(v=f[n])){const g=v.length;if(g)for(let b=0;b<g;b+=2){const P=t[v[b]][v[b+1]].subscribe(r),H=u.length;u.push(r,P),h&&h.push(n,i.index,H,-(H+1))}}}(r,n,n[$e],o,s,t,i),hu}function LS(s,t,e,i){try{return Fn(6,t,e),!1!==e(i)}catch(n){return uS(s,n),!1}finally{Fn(7,t,e)}}function NS(s,t,e,i,n){return function r(o){if(o===Function)return i;nu(s.componentOffset>-1?dn(s.index,t):t);let l=LS(t,e,i,o),h=r.__ngNextListenerFn__;for(;h;)l=LS(t,e,h,o)&&l,h=h.__ngNextListenerFn__;return n&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}const Ma="en-US";let Ew=Ma;class Sa{}class GR{}class eI extends Sa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pS(this);const i=function Tn(s,t){const e=s[NC]||null;if(!e&&!0===t)throw new Error(`Type ${kt(s)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function is(s){return s instanceof Function?s():s}(i.bootstrap),this._r3Injector=XM(t,e,[{provide:Sa,useValue:this},{provide:Kc,useValue:this.componentFactoryResolver}],kt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Zv extends GR{constructor(t){super(),this.moduleType=t}create(t){return new eI(this.moduleType,t)}}function Jv(s){return t=>{setTimeout(s,void 0,t)}}const _n=class TF extends Hd{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let n=t,r=e||(()=>null),o=i;if(t&&"object"==typeof t){const l=t;n=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=Jv(r),n&&(n=Jv(n)),o&&(o=Jv(o)));const a=super.subscribe({next:n,error:r,complete:o});return t instanceof Er&&t.add(a),a}};function DF(){return this._results[Symbol.iterator]()}class eg{get changes(){return this._changes||(this._changes=new _n)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=eg.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=DF)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const n=function Hn(s){return s.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function OL(s,t,e){if(s.length!==t.length)return!1;for(let i=0;i<s.length;i++){let n=s[i],r=t[i];if(e&&(n=e(n),r=e(r)),r!==n)return!1}return!0}(i._results,n,e))&&(i._results=n,i.length=n.length,i.last=n[this.length-1],i.first=n[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let rs=(()=>{class s{}return s.__NG_ELEMENT_ID__=PF,s})();const EF=rs,xF=class extends EF{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(t,e){const i=this._declarationTContainer.tView,n=eu(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,e||null);n[fl]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[jr];return null!==o&&(n[jr]=o.createEmbeddedView(i)),Cv(i,n,t),new Al(n)}};function PF(){return gu(Ni(),J())}function gu(s,t){return 4&s.type?new xF(t,s,sa(s,t)):null}let cr=(()=>{class s{}return s.__NG_ELEMENT_ID__=jF,s})();function jF(){return vI(Ni(),J())}const AF=cr,dI=class extends AF{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new Qo(this._hostTNode,this._hostLView)}get parentInjector(){const t=wf(this._hostTNode,this._hostLView);if(d0(t)){const e=Nc(t,this._hostLView),i=Lc(t);return new Qo(e[pe].data[i+8],e)}return new Qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=fI(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-nn}createEmbeddedView(t,e,i){let n,r;"number"==typeof i?n=i:null!=i&&(n=i.index,r=i.injector);const o=t.createEmbeddedView(e||{},r);return this.insert(o,n),o}createComponent(t,e,i,n,r){const o=t&&!function Ml(s){return"function"==typeof s}(t);let a;if(o)a=e;else{const u=e||{};a=u.index,i=u.injector,n=u.projectableNodes,r=u.environmentInjector||u.ngModuleRef}const l=o?t:new Ll(Ot(t)),h=i||this.parentInjector;if(!r&&null==l.ngModule){const d=(o?h:this.parentInjector).get(na,null);d&&(r=d)}const c=l.create(h,n,void 0,r);return this.insert(c.hostView,a),c}insert(t,e){const i=t._lView,n=i[pe];if(function VA(s){return sr(s[ri])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const u=i[ri],d=new dI(u,u[Vi],u[ri]);d.detach(d.indexOf(t))}}const r=this._adjustIndex(e),o=this._lContainer;!function dN(s,t,e,i){const n=nn+i,r=e.length;i>0&&(e[n-1][rr]=t),i<r-nn?(t[rr]=e[n],O0(e,nn+i,t)):(e.push(t),t[rr]=null),t[ri]=e;const o=t[fl];null!==o&&e!==o&&function fN(s,t){const e=s[Vo];t[Wi]!==t[ri][ri][Wi]&&(s[BC]=!0),null===e?s[Vo]=[t]:e.push(t)}(o,t);const a=t[jr];null!==a&&a.insertView(s),t[Xe]|=64}(n,i,o,r);const a=qf(r,o),l=i[$e],h=Vc(l,o[Ic]);return null!==h&&function cN(s,t,e,i,n,r){i[Kr]=n,i[Vi]=t,Dl(s,i,e,1,n,r)}(n,o[Vi],l,i,h,a),t.attachToViewContainerRef(),O0(tg(o),r,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=fI(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=Vf(this._lContainer,e);i&&(Fc(tg(this._lContainer),e),$0(i[pe],i))}detach(t){const e=this._adjustIndex(t,-1),i=Vf(this._lContainer,e);return i&&null!=Fc(tg(this._lContainer),e)?new Al(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function fI(s){return s[Oc]}function tg(s){return s[Oc]||(s[Oc]=[])}function vI(s,t){let e;const i=t[s.index];if(sr(i))e=i;else{let n;if(8&s.type)n=Li(i);else{const r=t[$e];n=r.createComment("");const o=En(s,t);uo(r,Vc(r,o),n,function yN(s,t){return s.nextSibling(t)}(r,o),!1)}t[s.index]=e=function aS(s,t,e,i){return[s,!0,!1,t,null,0,i,e,null,null]}(i,t,n,s),iu(t,e)}return new dI(e,s,t)}class ig{constructor(t){this.queryList=t,this.matches=null}clone(){return new ig(this.queryList)}setDirty(){this.queryList.setDirty()}}class ng{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,n=[];for(let r=0;r<i;r++){const o=e.getByIndex(r);n.push(this.queries[o.indexInDeclarationView].clone())}return new ng(n)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==SI(t,e).matches&&this.queries[e].setDirty()}}class gI{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class rg{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const n=null!==e?e.length:0,r=this.getByIndex(i).embeddedTView(t,n);r&&(r.indexInDeclarationView=i,null!==e?e.push(r):e=[r])}return null!==e?new rg(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class sg{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new sg(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let n=0;n<i.length;n++){const r=i[n];this.matchTNodeWithReadOption(t,e,LF(e,r)),this.matchTNodeWithReadOption(t,e,Rc(e,t,r,!1,!1))}else i===rs?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Rc(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const n=this.metadata.read;if(null!==n)if(n===fo||n===cr||n===rs&&4&e.type)this.addMatch(e.index,-2);else{const r=Rc(e,t,n,!1,!1);null!==r&&this.addMatch(e.index,r)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function LF(s,t){const e=s.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function kF(s,t,e,i){return-1===e?function NF(s,t){return 11&s.type?sa(s,t):4&s.type?gu(s,t):null}(t,s):-2===e?function zF(s,t,e){return e===fo?sa(t,s):e===rs?gu(t,s):e===cr?vI(t,s):void 0}(s,t,i):ho(s,s[pe],e,t)}function mI(s,t,e,i){const n=t[jr].queries[i];if(null===n.matches){const r=s.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const h=o[l];a.push(h<0?null:kF(t,r[h],o[l+1],e.metadata.read))}n.matches=a}return n.matches}function og(s,t,e,i){const n=s.queries.getByIndex(e),r=n.matches;if(null!==r){const o=mI(s,t,n,e);for(let a=0;a<r.length;a+=2){const l=r[a];if(l>0)i.push(o[a/2]);else{const h=r[a+1],c=t[-l];for(let u=nn;u<c.length;u++){const d=c[u];d[fl]===d[ri]&&og(d[pe],d,h,i)}if(null!==c[Vo]){const u=c[Vo];for(let d=0;d<u.length;d++){const f=u[d];og(f[pe],f,h,i)}}}}}return i}function ag(s){const t=J(),e=ct(),i=n0();vf(i+1);const n=SI(e,i);if(s.dirty&&function UA(s){return 4==(4&s[Xe])}(t)===(2==(2&n.metadata.flags))){if(null===n.matches)s.reset([]);else{const r=n.crossesNgTemplate?og(e,t,i,[]):mI(e,t,n,i);s.reset(r,h1),s.notifyOnChanges()}return!0}return!1}function lg(){return function RF(s,t){return s[jr].queries[t].queryList}(J(),n0())}function CI(s,t,e){const i=new eg(4==(4&e));iS(s,t,i,i.destroy),null===t[jr]&&(t[jr]=new ng),t[jr].queries.push(new ig(i))}function MI(s,t,e){null===s.queries&&(s.queries=new rg),s.queries.track(new sg(t,e))}function SI(s,t){return s.queries.getByIndex(t)}function yu(...s){}const _I=new Ge("Application Initializer");let bu=(()=>{class s{constructor(e){this.appInits=e,this.resolve=yu,this.reject=yu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,n)=>{this.resolve=i,this.reject=n})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const r=this.appInits[n]();if(Fv(r))e.push(r);else if(nz(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(n=>{this.reject(n)}),0===e.length&&i(),this.initialized=!0}}return s.\u0275fac=function(e){return new(e||s)(bt(_I,8))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Xl=new Ge("AppId",{providedIn:"root",factory:function YI(){return`${dg()}${dg()}${dg()}`}});function dg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const UI=new Ge("Platform Initializer"),VI=new Ge("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ss=new Ge("LocaleId",{providedIn:"root",factory:()=>function IA(s,t=Le.Default){return bt(s,bc(t))}(ss,Le.Optional|Le.SkipSelf)||function s2(){return typeof $localize<"u"&&$localize.locale||Ma}()}),c2=(()=>Promise.resolve(0))();function fg(s){typeof Zone>"u"?c2.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Qi{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=!i&&e,n.shouldCoalesceRunChangeDetection=i,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function u2(){let s=Bt.requestAnimationFrame,t=Bt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&t){const e=s[Zone.__symbol__("OriginalDelegate")];e&&(s=e);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function f2(s){const t=()=>{!function d2(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Bt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,gg(s),s.isCheckStableRunning=!0,vg(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),gg(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,n,r,o,a)=>{try{return qI(s),e.invokeTask(n,r,o,a)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||s.shouldCoalesceRunChangeDetection)&&t(),QI(s)}},onInvoke:(e,i,n,r,o,a,l)=>{try{return qI(s),e.invoke(n,r,o,a,l)}finally{s.shouldCoalesceRunChangeDetection&&t(),QI(s)}},onHasTask:(e,i,n,r)=>{e.hasTask(n,r),i===n&&("microTask"==r.change?(s._hasPendingMicrotasks=r.microTask,gg(s),vg(s)):"macroTask"==r.change&&(s.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,i,n,r)=>(e.handleError(n,r),s.runOutsideAngular(()=>s.onError.emit(r)),!1)})}(n)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qi.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(Qi.isInAngularZone())throw new Ce(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,n){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+n,t,p2,yu,yu);try{return r.runTask(o,e,i)}finally{r.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const p2={};function vg(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function gg(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function qI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function QI(s){s._nesting--,vg(s)}class v2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,n){return t.apply(e,i)}}const $I=new Ge(""),Cu=new Ge("");let bg,mg=(()=>{class s{constructor(e,i,n){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bg||(function g2(s){bg=s}(n),n.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qi.assertNotInAngularZone(),fg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fg(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,n){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,i,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,n){return[]}}return s.\u0275fac=function(e){return new(e||s)(bt(Qi),bt(yg),bt(Cu))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})(),yg=(()=>{class s{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return bg?.findTestabilityInTree(this,e,i)??null}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const os=!1;let Ls=null;const GI=new Ge("AllowMultipleToken"),Cg=new Ge("PlatformDestroyListeners"),m2=new Ge("appBootstrapListener");function KI(s,t,e=[]){const i=`Platform: ${t}`,n=new Ge(i);return(r=[])=>{let o=Mg();if(!o||o.injector.get(GI,!1)){const a=[...e,...r,{provide:n,useValue:!0}];s?s(a):function C2(s){if(Ls&&!Ls.get(GI,!1))throw new Ce(400,!1);Ls=s;const t=s.get(eO);(function ZI(s){const t=s.get(UI,null);t&&t.forEach(e=>e())})(s)}(function JI(s=[],t){return js.create({name:t,providers:[{provide:ov,useValue:"platform"},{provide:Cg,useValue:new Set([()=>Ls=null])},...s]})}(a,i))}return function S2(s){const t=Mg();if(!t)throw new Ce(401,!1);return t}()}}function Mg(){return Ls?.get(eO)??null}let eO=(()=>{class s{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const n=function iO(s,t){let e;return e="noop"===s?new v2:("zone.js"===s?void 0:s)||new Qi(t),e}(i?.ngZone,function tO(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(i)),r=[{provide:Qi,useValue:n}];return n.run(()=>{const o=js.create({providers:r,parent:this.injector,name:e.moduleType.name}),a=e.create(o),l=a.injector.get(oa,null);if(!l)throw new Ce(402,!1);return n.runOutsideAngular(()=>{const h=n.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{Mu(this._modules,a),h.unsubscribe()})}),function nO(s,t,e){try{const i=e();return Fv(i)?i.catch(n=>{throw t.runOutsideAngular(()=>s.handleError(n)),n}):i}catch(i){throw t.runOutsideAngular(()=>s.handleError(i)),i}}(l,n,()=>{const h=a.injector.get(bu);return h.runInitializers(),h.donePromise.then(()=>(function xw(s){kn(s,"Expected localeId to be defined"),"string"==typeof s&&(Ew=s.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ss,Ma)||Ma),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,i=[]){const n=rO({},i);return function y2(s,t,e){const i=new Zv(e);return Promise.resolve(i)}(0,0,e).then(r=>this.bootstrapModuleFactory(r,n))}_moduleDoBootstrap(e){const i=e.injector.get(Sg);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(n=>i.bootstrap(n));else{if(!e.instance.ngDoBootstrap)throw new Ce(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(Cg,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(e){return new(e||s)(bt(js))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function rO(s,t){return Array.isArray(t)?t.reduce(rO,s):{...s,...t}}let Sg=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,i,n){this._zone=e,this._injector=i,this._exceptionHandler=n,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const r=new cn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new cn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Qi.assertNotInAngularZone(),fg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{Qi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),h.unsubscribe()}});this.isStable=hA(r,o.pipe(function cA(s={}){const{connector:t=(()=>new Hd),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:n=!0}=s;return r=>{let o,a,l,h=0,c=!1,u=!1;const d=()=>{a?.unsubscribe(),a=void 0},f=()=>{d(),o=l=void 0,c=u=!1},v=()=>{const g=o;f(),g?.unsubscribe()};return al((g,b)=>{h++,!u&&!c&&d();const M=l=l??t();b.add(()=>{h--,0===h&&!u&&!c&&(a=Xd(v,n))}),M.subscribe(b),!o&&h>0&&(o=new ol({next:w=>M.next(w),error:w=>{u=!0,d(),a=Xd(f,e,w),M.error(w)},complete:()=>{c=!0,d(),a=Xd(f,i),M.complete()}}),ro(g).subscribe(o))})(r)}}()))}bootstrap(e,i){const n=e instanceof jM;if(!this._injector.get(bu).done){!n&&function pl(s){const t=Ot(s)||Ui(s)||pn(s);return null!==t&&t.standalone}(e);throw new Ce(405,os)}let o;o=n?e:this._injector.get(Kc).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function b2(s){return s.isBoundToModule}(o)?void 0:this._injector.get(Sa),h=o.create(js.NULL,[],i||o.selector,a),c=h.location.nativeElement,u=h.injector.get($I,null);return u?.registerApplication(c),h.onDestroy(()=>{this.detachView(h.hostView),Mu(this.components,h),u?.unregisterApplication(c)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Mu(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(m2,[]);i.push(...this._bootstrapListeners),i.forEach(n=>n(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Mu(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ce(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(e){return new(e||s)(bt(Qi),bt(na),bt(oa))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Mu(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}const H2=KI(null,"core",[]);let B2=(()=>{class s{constructor(e){}}return s.\u0275fac=function(e){return new(e||s)(bt(Sg))},s.\u0275mod=Bo({type:s}),s.\u0275inj=so({}),s})(),Dg=null;function Ou(){return Dg}class U2{}const as=new Ge("DocumentToken");let jO=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=Bo({type:s}),s.\u0275inj=so({}),s})();class RH extends U2{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Vg extends RH{static makeCurrent(){!function Y2(s){Dg||(Dg=s)}(new Vg)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function FH(){return Zl=Zl||document.querySelector("base"),Zl?Zl.getAttribute("href"):null}();return null==e?null:function HH(s){Ru=Ru||document.createElement("a"),Ru.setAttribute("href",s);const t=Ru.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Zl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function E4(s,t){t=encodeURIComponent(t);for(const e of s.split(";")){const i=e.indexOf("="),[n,r]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(n.trim()===t)return decodeURIComponent(r)}return null}(document.cookie,t)}}let Ru,Zl=null;const FO=new Ge("TRANSITION_ID"),_H=[{provide:_I,useFactory:function BH(s,t,e){return()=>{e.get(bu).donePromise.then(()=>{const i=Ou(),n=t.querySelectorAll(`style[ng-transition="${s}"]`);for(let r=0;r<n.length;r++)i.remove(n[r])})}},deps:[FO,as,js],multi:!0}];let UH=(()=>{class s{build(){return new XMLHttpRequest}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();const Fu=new Ge("EventManagerPlugins");let Hu=(()=>{class s{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(n=>{n.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,n){return this._findPluginFor(i).addEventListener(e,i,n)}addGlobalEventListener(e,i,n){return this._findPluginFor(i).addGlobalEventListener(e,i,n)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const n=this._plugins;for(let r=0;r<n.length;r++){const o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return s.\u0275fac=function(e){return new(e||s)(bt(Fu),bt(Qi))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();class HO{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const n=Ou().getGlobalEventTarget(this._doc,t);if(!n)throw new Error(`Unsupported event target ${n} for event ${e}`);return this.addEventListener(n,e,i)}}let BO=(()=>{class s{constructor(){this.usageCount=new Map}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,i){const n=this.usageCount;let r=n.get(e)??0;return r+=i,r>0?n.set(e,r):n.delete(e),r}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})(),Kl=(()=>{class s extends BO{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.forEach(r=>r.remove()),i.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,i){const n=this.doc.createElement("style");n.textContent=i,e.appendChild(n);const r=this.styleRef.get(i);r?r.push(n):this.styleRef.set(i,[n])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return s.\u0275fac=function(e){return new(e||s)(bt(as))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();const Wg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xg=/%COMP%/g,UO=new Ge("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function VO(s,t){return t.flat(100).map(e=>e.replace(Xg,s))}function WO(s){return t=>{if("__ngUnwrap__"===t)return s;!1===s(t)&&(t.preventDefault(),t.returnValue=!1)}}let qg=(()=>{class s{constructor(e,i,n,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=n,this.removeStylesOnCompDestory=r,this.rendererByCompId=new Map,this.defaultRenderer=new Qg(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;const n=this.getOrCreateRenderer(e,i);return n instanceof QO?n.applyToHost(e):n instanceof $g&&n.applyStyles(),n}getOrCreateRenderer(e,i){const n=this.rendererByCompId;let r=n.get(i.id);if(!r){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(i.encapsulation){case Pr.Emulated:r=new QO(o,a,i,this.appId,l);break;case Pr.ShadowDom:return new GH(o,a,e,i);default:r=new $g(o,a,i,l)}r.onDestroy=()=>n.delete(i.id),n.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return s.\u0275fac=function(e){return new(e||s)(bt(Hu),bt(Kl),bt(Xl),bt(UO))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();class Qg{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Wg[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(qO(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(qO(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,n){if(n){e=n+":"+e;const r=Wg[n];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const n=Wg[i];n?t.removeAttributeNS(n,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,n){n&(fn.DashCase|fn.Important)?t.style.setProperty(e,i,n&fn.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&fn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,WO(i)):this.eventManager.addEventListener(t,e,WO(i))}}function qO(s){return"TEMPLATE"===s.tagName&&void 0!==s.content}class GH extends Qg{constructor(t,e,i,n){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=VO(n.id,n.styles);for(const o of r){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class $g extends Qg{constructor(t,e,i,n,r=i.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=n,this.rendererUsageCount=0,this.styles=VO(r,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class QO extends $g{constructor(t,e,i,n,r){const o=n+"-"+i.id;super(t,e,i,r,o),this.contentAttr=function qH(s){return"_ngcontent-%COMP%".replace(Xg,s)}(o),this.hostAttr=function QH(s){return"_nghost-%COMP%".replace(Xg,s)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let ZH=(()=>{class s extends HO{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,n){return e.addEventListener(i,n,!1),()=>this.removeEventListener(e,i,n)}removeEventListener(e,i,n){return e.removeEventListener(i,n)}}return s.\u0275fac=function(e){return new(e||s)(bt(as))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();const $O=["alt","control","meta","shift"],KH={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JH={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey};let eB=(()=>{class s extends HO{constructor(e){super(e)}supports(e){return null!=s.parseEventName(e)}addEventListener(e,i,n){const r=s.parseEventName(i),o=s.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ou().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const r=s._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),$O.forEach(h=>{const c=i.indexOf(h);c>-1&&(i.splice(c,1),o+=h+".")}),o+=r,0!=i.length||0===r.length)return null;const l={};return l.domEventName=n,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let n=KH[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(n=e.code,r="code."),!(null==n||!n)&&(n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),$O.forEach(o=>{o!==n&&(0,JH[o])(e)&&(r+=o+".")}),r+=n,r===i)}static eventCallback(e,i,n){return r=>{s.matchEventFullKeyCode(r,e)&&n.runGuarded(()=>i(r))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return s.\u0275fac=function(e){return new(e||s)(bt(as))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();const ZO=[{provide:VI,useValue:"browser"},{provide:UI,useValue:function tB(){Vg.makeCurrent()},multi:!0},{provide:as,useFactory:function nB(){return function TN(s){Zf=s}(document),document},deps:[]}],rB=KI(H2,"browser",ZO),KO=new Ge(""),JO=[{provide:Cu,useClass:class YH{addToWindow(t){Bt.getAngularTestability=(i,n=!0)=>{const r=t.findTestabilityInTree(i,n);if(null==r)throw new Error("Could not find testability for element.");return r},Bt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Bt.getAllAngularRootElements=()=>t.getAllRootElements(),Bt.frameworkStabilizers||(Bt.frameworkStabilizers=[]),Bt.frameworkStabilizers.push(i=>{const n=Bt.getAllAngularTestabilities();let r=n.length,o=!1;const a=function(l){o=o||l,r--,0==r&&i(o)};n.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?Ou().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:$I,useClass:mg,deps:[Qi,yg,Cu]},{provide:mg,useClass:mg,deps:[Qi,yg,Cu]}],eT=[{provide:ov,useValue:"root"},{provide:oa,useFactory:function iB(){return new oa},deps:[]},{provide:Fu,useClass:ZH,multi:!0,deps:[as,Qi,VI]},{provide:Fu,useClass:eB,multi:!0,deps:[as]},{provide:qg,useClass:qg,deps:[Hu,Kl,Xl,UO]},{provide:LM,useExisting:qg},{provide:BO,useExisting:Kl},{provide:Kl,useClass:Kl,deps:[as]},{provide:Hu,useClass:Hu,deps:[Fu,Qi]},{provide:class cH{},useClass:UH,deps:[]},[]];let sB=(()=>{class s{constructor(e){}static withServerTransition(e){return{ngModule:s,providers:[{provide:Xl,useValue:e.appId},{provide:FO,useExisting:Xl},_H]}}}return s.\u0275fac=function(e){return new(e||s)(bt(KO,12))},s.\u0275mod=Bo({type:s}),s.\u0275inj=so({providers:[...eT,...JO],imports:[jO,B2]}),s})();typeof window<"u"&&window;var Jl="ej2_instances",dB=0,Kg=!1;function Bu(s,t){var e=t;return e.unshift(void 0),new(Function.prototype.bind.apply(s,e))}function j(s,t){for(var e=t,i=s.replace(/\[/g,".").replace(/\]/g,"").split("."),n=0;n<i.length&&!ve(e);n++)e=e[i[parseInt(n.toString(),10)]];return e}function Oe(s,t,e){var o,l,i=s.replace(/\[/g,".").replace(/\]/g,"").split("."),n=e||{},r=n,a=i.length;for(o=0;o<a;o++)l=i[parseInt(o.toString(),10)],o+1===a?r[""+l]=void 0===t?{}:t:p(r[""+l])&&(r[""+l]={}),r=r[""+l];return n}function _u(s,t){delete s[""+t]}var Oa=typeof window<"u"?window:{};function fr(s){return!p(s)&&s.constructor==={}.constructor}function wi(s,t){if(!p(t))for(var e=s,i=t,r="deepMerge",o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];p(e[""+r])||-1===e[""+r].indexOf(l)||!fr(i[""+l])&&!Array.isArray(i[""+l])?e[""+l]=i[""+l]:C(e[""+l],e[""+l],i[""+l],!0)}}function C(s,t,e,i){var n=s&&"object"==typeof s?s:{},r=arguments.length;i&&(r-=1);for(var o=function(h){if(!a[h])return"continue";var c=a[h];Object.keys(c).forEach(function(u){var v,d=n[""+u],f=c[""+u],g=Array.isArray(f)&&Array.isArray(d)&&f.length!==d.length,b=!z()||!(d instanceof Event||g);i&&b&&(fr(f)||Array.isArray(f))?fr(f)?(v=d||{},Array.isArray(v)&&v.hasOwnProperty("isComplexArray")?C(v,{},f,i):n[""+u]=C(v,{},f,i)):(v=z()?d&&Object.keys(f).length:d||[],n[""+u]=C([],v,f,v&&v.length||f&&f.length)):n[""+u]=f})},a=arguments,l=1;l<r;l++)o(l);return n}function p(s){return null==s}function ve(s){return typeof s>"u"}function at(s){return s+"_"+dB++}function Yu(s,t){return s===t||!(s===document||!s)&&Yu(s.parentNode,t)}function eh(s){try{throw new Error(s)}catch(t){throw t.message+"\n"+t.stack}}function te(s){var t=s+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function z(){return Kg}function oi(s,t){var e="string"==typeof s?document.querySelector(s):s;if(e[""+Jl])for(var i=0,n=e[""+Jl];i<n.length;i++){var r=n[i];if(r instanceof t)return r}return null}var th,s,t,yB={latn:{_digits:"0123456789",_type:"numeric"}},rT={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},sT=[0,1,2,3,4,5,6,7,8,9],Yt=function(){function s(){}return s.getMainObject=function(t,e){return j(z()?e:"main."+e,t)},s.getNumberingSystem=function(t){return j("supplemental.numberingSystems",t)||this.numberingSystems},s.reverseObject=function(t,e){for(var n={},r=0,o=e||Object.keys(t);r<o.length;r++){var a=o[r];n.hasOwnProperty(t[a])||(n[t[a]]=a)}return n},s.getSymbolRegex=function(t){var e=t.map(function(n){return n.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|");return new RegExp(e,"g")},s.getSymbolMatch=function(t){for(var i={},n=0,r=Object.keys(rT);n<r.length;n++){var o=r[n];i[t[o]]=rT[o]}return i},s.constructRegex=function(t){for(var e=t.length,i="",n=0;n<e;n++)i+=n!==e-1?t[parseInt(n.toString(),10)]+"|":t[parseInt(n.toString(),10)];return i},s.convertValueParts=function(t,e,i){return t.replace(e,function(n){return i[n]})},s.getDefaultNumberingSystem=function(t){var e={};return e.obj=j("numbers",t),e.nSystem=j("defaultNumberingSystem",e.obj),e},s.getCurrentNumericOptions=function(t,e,i,n){var r={},o=this.getDefaultNumberingSystem(t);if(!ve(o.nSystem)||n){var a=n?j("obj.mapperDigits",o):j(o.nSystem+"._digits",e);if(!ve(a)){r.numericPair=this.reverseObject(a,sT);var l=RegExp;r.numberParseRegex=new l(this.constructRegex(a),"g"),r.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(r.numericRegex=a[0]+"-"+a[9],r.symbolNumberSystem=j(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),r.symbolMatch=this.getSymbolMatch(r.symbolNumberSystem),r.numberSystem=o.nSystem)}}return r},s.getNumberMapper=function(t,e,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(t);if(!ve(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=j("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=j("timeSeparator",n.numberSymbols);var o=j(r.nSystem+"._digits",e);if(!ve(o))for(var a=0,l=sT;a<l.length;a++){var h=l[a];n.mapper[h]=o[h]}}return n},s.nPair="numericPair",s.nRegex="numericRegex",s.numberingSystems=yB,s}(),bB={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.",BHD:"\u062f.\u0628.",DZD:"\u062f.\u062c.",EGP:"\u062c.\u0645.",ILS:"\u20aa",IQD:"\u062f.\u0639.",JOD:"\u062f.\u0627.",KMF:"CF",KWD:"\u062f.\u0643.",LBP:"\u0644.\u0644.",LYD:"\u062f.\u0644.",MAD:"\u062f.\u0645.",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.",QAR:"\u0631.\u0642.",SAR:"\u0631.\u0633.",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.",TND:"\u062f.\u062a.",YER:"\u0631.\u064a.",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};s=th||(th={}),t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],s.getHijriDate=function e(n){var r=n.getDate(),o=n.getMonth(),a=n.getFullYear(),l=o+1,h=a;l<3&&(h-=1,l+=12);var c=Math.floor(h/100),u=c-Math.floor(c/4)-2,d=Math.floor(365.25*(h+4716))+Math.floor(30.6001*(l+1))+r-u-1524,f=d+(u=(c=Math.floor((d-1867216.25)/36524.25))-Math.floor(c/4)+1)+1524,v=Math.floor((f-122.1)/365.25),g=Math.floor(365.25*v),b=Math.floor((f-g)/30.6001);r=f-g-Math.floor(30.6001*b),(o=Math.floor((f-g)/20.6001))>13&&(v+=1,o-=12),o-=1,a=v-4716;var M=d-24e5,w=10631/30,S=d-1948084,I=Math.floor(S/10631);S-=10631*I;var P=Math.floor((S-.1335)/w),H=30*I+P;S-=Math.floor(P*w+.1335);var G=Math.floor((S+28.5001)/29.5);13===G&&(G=12);for(var ee=S-Math.floor(29.5001*G-29),ue=0;ue<t.length&&!(t[parseInt(ue.toString(),10)]>M);ue++);var Je=ue+16260,U=Math.floor((Je-1)/12),$=U+1,q=Je-12*U,R=M-t[ue-1]+1;return(R+"").length>2&&(R=ee,q=G,$=H),{year:$,month:q,date:R}},s.toGregorian=function i(n,r,o){var g=Math.floor(o+t[12*(n-1)+1+(r-1)-16260-1]-1+24e5+.5),b=Math.floor((g-1867216.25)/36524.25),M=1524+(b=g+1+b-Math.floor(b/4)),w=Math.floor((M-122.1)/365.25),S=Math.floor(365.25*w),I=Math.floor((M-S)/30.6001),P=M-S-Math.floor(30.6001*I),H=I-(I>13.5?13:1),G=w-(H>2.5?4716:4715);return G<=0&&H--,new Date(G+"/"+H+"/"+P)};var MB=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,oT="stand-alone",SB=["sun","mon","tue","wed","thu","fri","sat"],aT={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},wB={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},lT=function(){function s(){}return s.dateFormat=function(t,e,i){var n=this,r=ge.getDependables(i,t,e.calendar),o=j("parserObject.numbers",r),a=r.dateObject,l={isIslamic:ge.islamicRegex.test(e.calendar)};z()&&e.isServerRendered&&(e=ge.compareBlazorDateFormats(e,t));var h=e.format||ge.getResultantPattern(e.skeleton,r.dateObject,e.type,!1,z()?t:"");if(l.dateSeperator=z()?j("dateSeperator",a):ge.getDateSeparator(r.dateObject),ve(h))eh("Format options or type given must be invalid");else{h=ge.ConvertDateToWeekFormat(h),z()&&(h=h.replace(/tt/,"a")),l.pattern=h,l.numMapper=z()?C({},o):Yt.getNumberMapper(r.parserObject,Yt.getNumberingSystem(i));for(var u=0,d=h.match(MB)||[];u<d.length;u++){var f=d[u],v=f.length,g=f[0];switch("K"===g&&(g="h"),g){case"E":case"c":l.weekday=z()?j("days."+ge.monthIndex[v],a):r.dateObject[ge.days][oT][ge.monthIndex[v]];break;case"M":case"L":l.month=z()?j("months."+ge.monthIndex[v],a):r.dateObject[ge.month][oT][ge.monthIndex[v]];break;case"a":l.designator=z()?j("dayPeriods",a):j("dayPeriods.format.wide",a);break;case"G":var b=v<=3?"eraAbbr":4===v?"eraNames":"eraNarrow";l.era=z()?j("eras",a):j("eras."+b,r.dateObject);break;case"z":l.timeZone=j("dates.timeZoneNames",r.parserObject)}}}return function(M){return isNaN(M.getDate())?null:n.intDateFormatter(M,l)}},s.intDateFormatter=function(t,e){for(var n="",r=e.pattern.match(ge.dateParseRegex),o=this.getCurrentDateValue(t,e.isIslamic),a=0,l=r;a<l.length;a++){var h=l[a],c=h.length,u=h[0];"K"===u&&(u="h");var d=void 0,f="",v=void 0,g=void 0,b="";switch(u){case"M":case"L":d=o.month,c>2?n+=e.month[d]:v=!0;break;case"E":case"c":n+=e.weekday[SB[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(v=!0,"d"===u)d=o.date;else if("f"===u){v=!1,g=!0;var M=(f=(f=t[aT[u]]().toString()).substring(0,c)).length;if(c!==M){if(c>3)continue;for(var w=0;w<c-M;w++)f="0"+f.toString()}b+=f}else d=t[aT[u]]();"h"===u&&(d=d%12||12);break;case"y":g=!0,b+=o.year,2===c&&(b=b.substr(b.length-2));break;case"a":var S=t.getHours()<12?"am":"pm";n+=e.designator[S];break;case"G":var I=t.getFullYear()<0?0:1,P=e.era[I];p(P)&&(P=e.era[I?0:1]),n+=P||"";break;case"'":n+="''"===h?"'":h.replace(/'/g,"");break;case"z":var H=t.getTimezoneOffset(),G=c<4?"+H;-H":e.timeZone.hourFormat;G=G.replace(/:/g,e.numMapper.timeSeparator),0===H?n+=e.timeZone.gmtZeroFormat:(g=!0,b=this.getTimeZoneValue(H,G)),b=e.timeZone.gmtFormat.replace(/\{0\}/,b);break;case":":n+=e.numMapper.numberSymbols.timeSeparator;break;case"/":n+=e.dateSeperator;break;case"W":v=!0,d=ge.getWeekOfYear(t);break;default:n+=h}v&&(g=!0,b=this.checkTwodigitNumber(d,c)),g&&(n+=Yt.convertValueParts(b,ge.latnParseRegex,e.numMapper.mapper))}return n},s.getCurrentDateValue=function(t,e){return e?th.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},s.checkTwodigitNumber=function(t,e){var i=t+"";return 2===e&&2!==i.length?"0"+i:i},s.getTimeZoneValue=function(t,e){var i=this,r=e.split(";")[t>0?1:0],o=Math.abs(t);return r.replace(/HH?|mm/g,function(a){var l=a.length,h=-1!==a.indexOf("H");return i.checkTwodigitNumber(Math.floor(h?o/60:o%60),l)})},s}(),hT={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},Ta=["infinity","nan","group","decimal","exponential"],cT=function(){function s(){}return s.numberFormatter=function(t,e,i){var l,n=this,r=C({},e),o={},a={},h=ge.getDependables(i,t,"",!0),c=h.numericObject;a.numberMapper=z()?C({},c):Yt.getNumberMapper(h.parserObject,Yt.getNumberingSystem(i),!0),a.currencySymbol=z()?j("currencySymbol",c):ge.getCurrencySymbol(h.numericObject,r.currency||rh,e.altSymbol),a.percentSymbol=z()?j("numberSymbols.percentSign",c):a.numberMapper.numberSymbols.percentSign,a.minusSymbol=z()?j("numberSymbols.minusSign",c):a.numberMapper.numberSymbols.minusSign;var u=a.numberMapper.numberSymbols;if(e.format&&!ge.formatRegex.test(e.format))o=ge.customFormat(e.format,a,h.numericObject);else{if(C(r,ge.getProperNumericSkeleton(e.format||"N")),r.isCurrency="currency"===r.type,r.isPercent="percent"===r.type,z()||(l=ge.getSymbolPattern(r.type,a.numberMapper.numberSystem,h.numericObject,r.isAccount)),r.groupOne=this.checkValueRange(r.maximumSignificantDigits,r.minimumSignificantDigits,!0),this.checkValueRange(r.maximumFractionDigits,r.minimumFractionDigits,!1,!0),ve(r.fractionDigits)||(r.minimumFractionDigits=r.maximumFractionDigits=r.fractionDigits),ve(r.useGrouping)&&(r.useGrouping=!0),r.isCurrency&&!z()&&(l=l.replace(/\u00A4/g,ge.defaultCurrency)),z())o.nData=C({},{},j(r.type+"nData",c)),o.pData=C({},{},j(r.type+"pData",c)),"currency"===r.type&&e.currency&&ge.replaceBlazorCurrency([o.pData,o.nData],a.currencySymbol,e.currency);else{var d=l.split(";");o.nData=ge.getFormatData(d[1]||"-"+d[0],!0,a.currencySymbol),o.pData=ge.getFormatData(d[0],!1,a.currencySymbol),r.useGrouping&&(r.groupSeparator=u[Ta[2]],r.groupData=this.getGroupingDetails(d[0]))}if(ve(r.minimumFractionDigits)&&(r.minimumFractionDigits=o.nData.minimumFraction),ve(r.maximumFractionDigits)){var v=o.nData.maximumFraction;r.maximumFractionDigits=ve(v)&&r.isPercent?0:v}var g=r.minimumFractionDigits,b=r.maximumFractionDigits;!ve(g)&&!ve(b)&&g>b&&(r.maximumFractionDigits=g)}return C(o.nData,r),C(o.pData,r),function(M){return isNaN(M)?u[Ta[1]]:isFinite(M)?n.intNumberFormatter(M,o,a,e):u[Ta[0]]}},s.getGroupingDetails=function(t){var e={},i=t.match(ge.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];e.primary=o.length-r-1;var a=n.lastIndexOf(",",r-1);-1!==a&&(e.secondary=r-1-a)}}return e},s.checkValueRange=function(t,e,i,n){var r=n?"f":"s",o=0,a=hT["l"+r],l=hT["m"+r];if(ve(t)||(this.checkRange(t,a,n),o++),ve(e)||(this.checkRange(e,l,n),o++),2===o){if(!(t<e))return!0;eh(l+"specified must be less than the"+a)}else i&&1===o&&eh("Both"+l+"and"+l+"must be present");return!1},s.checkRange=function(t,e,i){var n=i?[0,20]:[1,21];(t<n[0]||t>n[1])&&eh(e+"value must be within the range"+n[0]+"to"+n[1])},s.intNumberFormatter=function(t,e,i,n){var r;if(!ve(e.nData.type)){t<0?(t*=-1,r=e.nData):r=0===t&&e.zeroData||e.pData;var o="";if(r.isPercent&&(t*=100),r.groupOne)o=this.processSignificantDigits(t,r.minimumSignificantDigits,r.maximumSignificantDigits);else if(o=this.processFraction(t,r.minimumFractionDigits,r.maximumFractionDigits,n),r.minimumIntegerDigits&&(o=this.processMinimumIntegers(o,r.minimumIntegerDigits)),i.isCustomFormat&&r.minimumFractionDigits<r.maximumFractionDigits&&/\d+\.\d+/.test(o)){for(var a=o.split("."),l=a[1],c=l.length-1;c>=0&&"0"===l[""+c]&&c>=r.minimumFractionDigits;c--)l=l.slice(0,c);o=a[0]+"."+l}return"scientific"===r.type&&(o=(o=t.toExponential(r.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[Ta[4]])),o=o.replace(".",i.numberMapper.numberSymbols[Ta[3]]),o="#,###,,;(#,###,,)"===r.format?this.customPivotFormat(parseInt(o)):o,r.useGrouping&&(o=this.groupNumbers(o,r.groupData.primary,r.groupSeparator||",",i.numberMapper.numberSymbols[Ta[3]]||".",r.groupData.secondary)),o=Yt.convertValueParts(o,ge.latnParseRegex,i.numberMapper.mapper),"N/A"===r.nlead?r.nlead:"0"===o&&n&&"0"===n.format?o+r.nend:r.nlead+o+r.nend}},s.processSignificantDigits=function(t,e,i){var n=t+"";return n.length<e?t.toPrecision(e):+(n=t.toPrecision(i))+""},s.groupNumbers=function(t,e,i,n,r){for(var o=!p(r)&&0!==r,a=t.split(n),l=a[0],h=l.length,c="";h>e;)c=l.slice(h-e,h)+(c.length?i+c:""),h-=e,o&&(e=r,o=!1);return a[0]=l.slice(0,h)+(c.length?i:"")+c,a.join(n)},s.processFraction=function(t,e,i,n){var r=(t+"").split(".")[1],o=r?r.length:0;if(e&&o<e){var a="";if(0!==o){a+=t;for(var l=0;l<e-o;l++)a+="0";return a}return a=t.toFixed(e),t.toFixed(e)}if(!p(i)&&(o>i||0===i))return t.toFixed(i);var h=t+"";return"0"===h[0]&&n&&"###.00"===n.format&&(h=h.slice(1)),h},s.processMinimumIntegers=function(t,e){var i=t.split("."),n=i[0],r=n.length;if(r<e){for(var o=0;o<e-r;o++)n="0"+n;i[0]=n}return i.join(".")},s.customPivotFormat=function(t){if(t>=5e5){var n=(t/=1e6).toString().split(".")[1];return n&&+n.substring(0,1)>=5?Math.ceil(t).toString():Math.floor(t).toString()}return""},s}(),uT="stand-alone",DB=/^[0-9]*$/,pT={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},xB=function(){function s(){}return s.dateParser=function(t,e,i){var n=this,r=ge.getDependables(i,t,e.calendar),o=Yt.getCurrentNumericOptions(r.parserObject,Yt.getNumberingSystem(i),!1,z()),a={};z()&&e.isServerRendered&&(e=ge.compareBlazorDateFormats(e,t));var c,l=e.format||ge.getResultantPattern(e.skeleton,r.dateObject,e.type,!1,z()?t:""),h="";if(ve(l))eh("Format options or type given must be invalid");else{l=ge.ConvertDateToWeekFormat(l),a={isIslamic:ge.islamicRegex.test(e.calendar),pattern:l,evalposition:{},culture:t};for(var u=l.match(ge.dateParseRegex)||[],d=u.length,f=0,v=0,g=!1,b=o.numericRegex,M=z()?r.parserObject.numbers:Yt.getNumberMapper(r.parserObject,Yt.getNumberingSystem(i)),w=0;w<d;w++){var S=u[parseInt(w.toString(),10)],I=S.length,P="K"===S[0]?"h":S[0],H=void 0,G=void 0,ee=wB[P],ue=2===I?"":"?";switch(g&&(f=v,g=!1),P){case"E":case"c":var Je;Je=z()?j("days."+ge.monthIndex[I],r.dateObject):r.dateObject[ge.days][uT][ge.monthIndex[I]];var U=Yt.reverseObject(Je);h+="("+Object.keys(U).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(G=!0,("M"===P||"L"===P)&&I>2){var $;$=z()?j("months."+ge.monthIndex[I],r.dateObject):r.dateObject.months[uT][ge.monthIndex[I]],a[ee]=Yt.reverseObject($),h+="("+Object.keys(a[ee]).join("|")+")"}else if("f"===P){if(I>3)continue;H=!0,h+="("+b+b+"?"+b+"?)"}else H=!0,h+="("+b+b+ue+")";"h"===P&&(a.hour12=!0);break;case"W":h+="("+b+(1===I?"?":"")+b+")";break;case"y":G=H=!0,h+=2===I?"("+b+b+")":"("+b+"{"+I+",})";break;case"a":G=!0;var R=z()?j("dayPeriods",r.dateObject):j("dayPeriods.format.wide",r.dateObject);a[ee]=Yt.reverseObject(R),h+="("+Object.keys(a[ee]).join("|")+")";break;case"G":G=!0;var _=I<=3?"eraAbbr":4===I?"eraNames":"eraNarrow";a[ee]=Yt.reverseObject(z()?j("eras",r.dateObject):j("eras."+_,r.dateObject)),h+="("+Object.keys(a[ee]).join("|")+"?)";break;case"z":G=0!==(new Date).getTimezoneOffset(),a[ee]=j("dates.timeZoneNames",r.parserObject);var k=a[ee],B=(c=I<4)?"+H;-H":k.hourFormat;B=B.replace(/:/g,M.timeSeparator),h+="("+this.parseTimeZoneRegx(B,k,b)+")?",g=!0,v=c?6:12;break;case"'":h+="("+S.replace(/'/g,"")+")?";break;default:h+="([\\D])"}if(G&&(a.evalposition[""+ee]={isNumber:H,pos:w+1+f,hourOnly:c}),w===d-1&&!p(h)){var ne=RegExp;a.parserRegex=new ne("^"+h+"$","i")}}}return function(ye){var ae=n.internalDateParse(ye,a,o);if(p(ae)||!Object.keys(ae).length)return null;if(a.isIslamic){var be={},Me=ae.year,je=ae.day,ce=ae.month,ut=Me?Me+"":"",$t=2===ut.length;(!Me||!ce||!je||$t)&&(be=th.getHijriDate(new Date)),$t&&(Me=parseInt((be.year+"").slice(0,2)+ut,10));var We=th.toGregorian(Me||be.year,ce||be.month,je||be.date);ae.year=We.getFullYear(),ae.month=We.getMonth()+1,ae.day=We.getDate()}return n.getDateObject(ae)}},s.getDateObject=function(t,e){var i=e||new Date;i.setMilliseconds(0);var r=t.year,o=t.designator,a=t.timeZone;ve(r)||((r+"").length<=2&&(r+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(r));for(var c=0,u=["hour","minute","second","milliseconds","month","day"];c<u.length;c++){var d=u[c],f=t[d];if(ve(f)&&"day"===d&&i.setDate(1),!ve(f))if("month"===d){if((f-=1)<0||f>11)return new Date("invalid");var v=i.getDate();i.setDate(1),i[pT[d]](f);var g=new Date(i.getFullYear(),f+1,0).getDate();i.setDate(v<g?v:g)}else{if("day"===d){var b=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(f<1||f>b)return null}i[pT[d]](f)}}if(!ve(o)){var M=i.getHours();"pm"===o?i.setHours(M+(12===M?0:12)):12===M&&i.setHours(0)}if(!ve(a)){var w=a-i.getTimezoneOffset();0!==w&&i.setMinutes(i.getMinutes()+w)}return i},s.internalDateParse=function(t,e,i){var n=t.match(e.parserRegex),r={hour:0,minute:0,second:0};if(p(n))return null;for(var a=0,l=Object.keys(e.evalposition);a<l.length;a++){var h=l[a],c=e.evalposition[""+h],u=n[c.pos];if(c.isNumber)r[h]=this.internalNumberParser(u,i);else if("timeZone"!==h||ve(u))u="month"!==h||e.isIslamic||"en"!==e.culture&&"en-GB"!==e.culture&&"en-US"!==e.culture?u:u[0].toUpperCase()+u.substring(1).toLowerCase(),r[h]=e[h][u];else{var d=c.pos,f=void 0,v=n[d+1],g=!ve(v);c.hourOnly?f=60*this.getZoneValue(g,v,n[d+4],i):(f=60*this.getZoneValue(g,v,n[d+7],i),f+=this.getZoneValue(g,n[d+4],n[d+10],i)),p(f)||(r[""+h]=f)}}return e.hour12&&(r.hour12=!0),r},s.internalNumberParser=function(t,e){return t=Yt.convertValueParts(t,e.numberParseRegex,e.numericPair),DB.test(t)?+t:null},s.parseTimeZoneRegx=function(t,e,i){var r,n=e.gmtFormat,o="("+i+")("+i+")";return r=t.replace("+","\\+"),(r=-1!==t.indexOf("HH")?r.replace(/HH|mm/g,"("+o+")"):r.replace(/H|m/g,"("+o+"?)")).split(";").map(function(l){return n.replace("{0}",l)}).join("|")+"|"+e.gmtZeroFormat},s.getZoneValue=function(t,e,i,n){var r=t?e:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return t?-o:o},s}(),jB=new RegExp("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$"),AB=/,/g,LB=["minusSign","infinity"],NB=function(){function s(){}return s.numberParser=function(t,e,i){var a,n=this,r=ge.getDependables(i,t,"",!0),o={custom:!0};ge.formatRegex.test(e.format)||!e.format?(C(o,ge.getProperNumericSkeleton(e.format||"N")),o.custom=!1,o.fractionDigits||e.maximumFractionDigits&&(o.maximumFractionDigits=e.maximumFractionDigits)):C(o,ge.customFormat(e.format,null,null));var h,l=j("numbers",r.parserObject);if(a=Yt.getCurrentNumericOptions(r.parserObject,Yt.getNumberingSystem(i),!0,z()),o.symbolRegex=Yt.getSymbolRegex(Object.keys(a.symbolMatch)),o.infinity=a.symbolNumberSystem[LB[1]],z())o.nData=C({},{},j(o.type+"nData",l)),o.pData=C({},{},j(o.type+"pData",l)),"currency"===o.type&&e.currency&&ge.replaceBlazorCurrency([o.pData,o.nData],j("currencySymbol",l),e.currency);else if(h=ge.getSymbolPattern(o.type,a.numberSystem,r.numericObject,o.isAccount)){var c=(h=h.replace(/\u00A4/g,ge.defaultCurrency)).split(";");o.nData=ge.getFormatData(c[1]||"-"+c[0],!0,""),o.pData=ge.getFormatData(c[0],!0,"")}return function(u){return n.getParsedNumber(u,o,a)}},s.getParsedNumber=function(t,e,i){var n,r,o,a,l,h;if(-1!==t.indexOf(e.infinity))return 1/0;t=Yt.convertValueParts(t,e.symbolRegex,i.symbolMatch),0===(t=-1!==(t=Yt.convertValueParts(t,i.numberParseRegex,i.numericPair)).indexOf("-")?t.replace("-.","-0."):t).indexOf(".")&&(t="0"+t);var c=t.match(jB);if(p(c))return NaN;a=c[1],o=c[2];var u=c[5];return l=c[6],r=(n=e.custom?a===e.nData.nlead&&l===e.nData.nend:-1!==a.indexOf(e.nData.nlead)&&-1!==l.indexOf(e.nData.nend))?e.nData.isPercent:e.pData.isPercent,o=o.replace(AB,""),u&&(o+=u),h=+o,("percent"===e.type||r)&&(h/=100),(e.custom||e.fractionDigits)&&(h=parseFloat(h.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.fractionDigits))),e.maximumFractionDigits&&(h=this.convertMaxFracDigits(o,e,h,n)),n&&(h*=-1),h},s.convertMaxFracDigits=function(t,e,i,n){var r=t.split(".");return r[1]&&r[1].length>e.maximumFractionDigits&&(i=+i.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.maximumFractionDigits)),i},s}(),ih=function(){function s(t){this.ranArray=[],this.boundedEvents={},!p(t)&&(this.context=t)}return s.prototype.on=function(t,e,i,n){if(!p(e)){var r=i||this.context;if(this.notExist(t))return void(this.boundedEvents[""+t]=[{handler:e,context:r}]);p(n)?this.isHandlerPresent(this.boundedEvents[""+t],e)||this.boundedEvents[""+t].push({handler:e,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[""+t].push({handler:e,context:r,id:n}))}},s.prototype.off=function(t,e,i){if(!this.notExist(t)){var n=j(t,this.boundedEvents);if(e){for(var r=0;r<n.length;r++)if(i){if(n[parseInt(r.toString(),10)].id===i){n.splice(r,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(e===n[parseInt(r.toString(),10)].handler){n.splice(r,1);break}}else delete this.boundedEvents[""+t]}},s.prototype.notify=function(t,e,i,n){if(this.notExist(t))i&&i.call(this,e);else{e&&(e.name=t);var o=j(t,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,e,i,n,0);for(var a=0,l=o;a<l.length;a++){var h=l[a];h.handler.call(h.context,e)}i&&i.call(this,e)}},s.prototype.blazorCallback=function(t,e,i,n,r){var o=this,a=r===t.length-1;if(r<t.length){var l=t[parseInt(r.toString(),10)],h=l.handler.call(l.context,e);if(h&&"function"==typeof h.then){if(!i)return h;h.then(function(c){if(c="string"==typeof c&&o.isJson(c)?JSON.parse(c,o.dateReviver):c,C(e,e,c,!0),!i||!a)return o.blazorCallback(t,e,i,n,r+1);i.call(l.context,e)}).catch(function(c){n&&n.call(l.context,"string"==typeof c&&o.isJson(c)?JSON.parse(c,o.dateReviver):c)})}else{if(!i||!a)return this.blazorCallback(t,e,i,n,r+1);i.call(l.context,e)}}},s.prototype.dateReviver=function(t,e){return z&&"string"==typeof e&&null!==e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e):e},s.prototype.isJson=function(t){try{JSON.parse(t)}catch{return!1}return!0},s.prototype.destroy=function(){this.boundedEvents=this.context=void 0},s.prototype.notExist=function(t){return!1===this.boundedEvents.hasOwnProperty(t)||this.boundedEvents[t].length<=0},s.prototype.isHandlerPresent=function(t,e){for(var i=0,n=t;i<n.length;i++)if(n[i].handler===e)return!0;return!1},s}(),bo=new ih,Jg=!1,Vn={},nh="en-US",rh="USD",em=["numericObject","dateObject"],sh=function(){function s(t){t&&(this.culture=t)}return s.prototype.getDateFormat=function(t){return lT.dateFormat(this.getCulture(),t||{type:"date",skeleton:"short"},Vn)},s.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=rh),z()&&t&&!t.format&&(t.minimumFractionDigits=0),cT.numberFormatter(this.getCulture(),t||{},Vn)},s.prototype.getDateParser=function(t){return xB.dateParser(this.getCulture(),t||{skeleton:"short",type:"date"},Vn)},s.prototype.getNumberParser=function(t){return z()&&t&&!t.format&&(t.minimumFractionDigits=0),NB.numberParser(this.getCulture(),t||{format:"N"},Vn)},s.prototype.formatNumber=function(t,e){return this.getNumberFormat(e)(t)},s.prototype.formatDate=function(t,e){return this.getDateFormat(e)(t)},s.prototype.parseDate=function(t,e){return this.getDateParser(e)(t)},s.prototype.parseNumber=function(t,e){return this.getNumberParser(e)(t)},s.prototype.getDatePattern=function(t,e){return ge.getActualDateTimeFormat(this.getCulture(),t,Vn,e)},s.prototype.getNumberPattern=function(t,e){return ge.getActualNumberFormat(this.getCulture(),t,Vn,e)},s.prototype.getFirstDayOfWeek=function(){return ge.getWeekData(this.getCulture(),Vn)},s.prototype.getCulture=function(){return this.culture||nh},s}();function oh(s,t){var e=ge.getDependables(Vn,s,"",!0)[em[0]],i=ge.getDependables(Vn,s,"")[em[1]],n=j("defaultNumberingSystem",e),r=z()?j("numberSymbols",e):j("symbols-numberSystem-"+n,e),o=ge.getSymbolPattern(t||"decimal",n,e,!1);return C(r,ge.getFormatData(o,!0,"",!0),{dateSeparator:ge.getDateSeparator(i)})}var ge,dT=RegExp,fT={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(s){s.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,s.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,s.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;s.defaultCurrency="$";var e=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,n={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};s.dateConverterMapper=/dddd|ddd/gi;s.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};s.formatRegex=new dT("(^[ncpae]{1})([0-1]?[0-9]|20)?$","i"),s.currencyFormatRegex=new dT("(^[ca]{1})([0-1]?[0-9]|20)?$","i"),s.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(R,_,W,k,B){var Q,ne=W||"date";if(B)Q=d({skeleton:R},B).format||d({skeleton:"d"},"en-US").format;else{if(-1!==s.basicPatterns.indexOf(R)){if(Q=j(ne+"Formats."+R,_),"dateTime"===ne){var ye=j("dateFormats."+R,_),ae=j("timeFormats."+R,_);Q=Q.replace("{1}",ye).replace("{0}",ae)}}else Q=j("dateTimeFormats.availableFormats."+R,_);ve(Q)&&"yMd"===R&&(Q="M/d/y")}return Q}function h(R,_,W,k){var B={},Q=W||"gregorian";if(B.parserObject=Yt.getMainObject(R,_)||(z()?s.blazorDefaultObject:s.defaultObject),k)B.numericObject=j("numbers",B.parserObject);else{var ne=z()?"dates":"dates.calendars."+Q;B.dateObject=j(ne,B.parserObject)}return B}function c(R,_,W,k){return j(R+"Formats-numberSystem-"+_+(k?".accounting":".standard"),W)||(k?j(R+"Formats-numberSystem-"+_+".standard",W):"")}function u(R){var _=R.match(s.dateConverterMapper);return _&&z()?R.replace(s.dateConverterMapper,3===_[0].length?"EEE":"EEEE"):R}function d(R,_){var W=R.format||R.skeleton,k=j((_||"en-US")+"."+W,fT);return k||(k=j("en-US."+W,fT)),k&&(k=u(k),R.format=k.replace(/tt/,"a")),R}function f(R){var _=R.match(s.formatRegex),W={},k=_[1].toUpperCase();return W.isAccount="A"===k,W.type=s.patternMatcher[k],R.length>1&&(W.fractionDigits=parseInt(_[2],10)),W}function v(R,_,W,k){var B=k?{}:{nlead:"",nend:""},Q=R.match(s.customRegex);if(Q){k||(B.nlead=g(Q[1],W),B.nend=g(Q[10],W),B.groupPattern=Q[4]);var ne=Q[7];if(ne&&_){var ye=ne.match(t);B.minimumFraction=p(ye)?0:ye.length,B.maximumFraction=ne.length-1}}return B}function g(R,_){return R?R.replace(s.defaultCurrency,_):""}function b(R,_,W){return j("currencies."+_+(W?"."+W:".symbol"),R)||j("currencies."+_+".symbol-alt-narrow",R)||"$"}function w(R,_,W){var k={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},B=R.match(s.customRegex);if(p(B)||""===B[5]&&"N/A"!==R)return k.type=void 0,k;k.nlead=B[1],k.nend=B[10];var Q=B[6],ne=!!Q.match(/\ $/g),ye=-1!==Q.replace(/\ $/g,"").indexOf(" ");k.useGrouping=-1!==Q.indexOf(",")||ye,Q=Q.replace(/,/g,"");var ae=B[7];if(-1!==Q.indexOf("0")&&(k.minimumIntegerDigits=Q.length-Q.indexOf("0")),p(ae)||(k.minimumFractionDigits=ae.lastIndexOf("0"),k.maximumFractionDigits=ae.lastIndexOf("#"),-1===k.minimumFractionDigits&&(k.minimumFractionDigits=0),(-1===k.maximumFractionDigits||k.maximumFractionDigits<k.minimumFractionDigits)&&(k.maximumFractionDigits=k.minimumFractionDigits)),p(_)?C(k,S([k.nlead,k.nend],"%","%")):(_.isCustomFormat=!0,C(k,S([k.nlead,k.nend],"$",_.currencySymbol)),k.isCurrency||C(k,S([k.nlead,k.nend],"%",_.percentSymbol))),!p(W)){var be=c(k.type,_.numberMapper.numberSystem,W,!1);k.useGrouping&&(k.groupSeparator=ye?" ":_.numberMapper.numberSymbols[e[2]],k.groupData=cT.getGroupingDetails(be.split(";")[0])),k.nlead=k.nlead.replace(/'/g,""),k.nend=ne?" "+k.nend.replace(/'/g,""):k.nend.replace(/'/g,"")}return k}function S(R,_,W){for(var k={nlead:R[0],nend:R[1]},B=0;B<2;B++){var Q=R[parseInt(B.toString(),10)],ne=Q.indexOf(_);if(-1!==ne&&(ne<Q.indexOf("'")||ne>Q.lastIndexOf("'"))){k[a[B]]=Q.substr(0,ne)+W+Q.substr(ne+1),k[a[_]]=!0,k.type=k.isCurrency?"currency":"percent";break}}return k}function ee(R,_,W){R+=".";for(var k=0;k<_;k++)R+="0";if(_<W)for(var B=W-_,Q=0;Q<B;Q++)R+="#";return R}function ue(R,_){for(var W=R.split("."),k="",B=0;B<_;B++)k+="0";return W[1]?k+"."+W[1]:k}function Je(R){var _=R.split("."),W=_[0],k=3-W.length%3;R="";for(var Q=(W=(k&&1===k?"#":2===k?"##":"")+W).length-1;Q>0;Q-=3)R=","+W[Q-2]+W[Q-1]+W[parseInt(Q.toString(),10)]+R;return R=R.slice(1),_[1]?R+"."+_[1]:R}s.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,s.basicPatterns=["short","medium","long","full"],s.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},s.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},s.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},s.month="months",s.days="days",s.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},s.getResultantPattern=l,s.getDependables=h,s.getSymbolPattern=c,s.ConvertDateToWeekFormat=u,s.compareBlazorDateFormats=d,s.getProperNumericSkeleton=f,s.getFormatData=v,s.changeCurrencySymbol=g,s.getCurrencySymbol=b,s.customFormat=function M(R,_,W){for(var k={},B=R.split(";"),Q=["pData","nData","zeroData"],ne=0;ne<B.length;ne++)k[Q[ne]]=w(B[ne],_,W);return p(k.nData)&&(k.nData=C({},k.pData),k.nData.nlead=p(_)?"-"+k.nData.nlead:_.minusSymbol+k.nData.nlead),k},s.customNumberFormat=w,s.isCurrencyPercent=S,s.getDateSeparator=function I(R){var _=(j("dateFormats.short",R)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return _?_[1]:"/"},s.getActualDateTimeFormat=function P(R,_,W,k){var B=h(W,R,_.calendar);z()&&(_=d(_,R));var Q=_.format||l(_.skeleton,B.dateObject,_.type);if(k){if(-1!==(Q=Q.replace(i,function(ce){return n[ce]})).indexOf("z")){var ne=Q.match(/z/g).length,ye=void 0,ae={timeZone:{}};ae.numMapper=Yt.getNumberMapper(B.parserObject,Yt.getNumberingSystem(W)),ae.timeZone=j("dates.timeZoneNames",B.parserObject);var Me=(new Date).getTimezoneOffset(),je=ne<4?"+H;-H":ae.timeZone.hourFormat;je=je.replace(/:/g,ae.numMapper.timeSeparator),0===Me?ye=ae.timeZone.gmtZeroFormat:(ye=lT.getTimeZoneValue(Me,je),ye=ae.timeZone.gmtFormat.replace(/\{0\}/,ye)),Q=Q.replace(/[z]+/,'"'+ye+'"')}Q=Q.replace(/ $/,"")}return Q},s.getActualNumberFormat=function G(R,_,W,k){var ye,We,B=h(W,R,"",!0),Q={custom:!0},ne=B.numericObject,ae={},be=(_.format||"").match(s.currencyFormatRegex),Me=s.formatRegex.test(_.format)?f(_.format||"N"):{},je={};if(be){je.numberMapper=z()?C({},B.numericObject):Yt.getNumberMapper(B.parserObject,Yt.getNumberingSystem(W),!0);var ce=z()?j("currencySymbol",B.numericObject):b(B.numericObject,_.currency||rh,_.altSymbol),ut=c("currency",je.numberMapper.numberSystem,B.numericObject,/a/i.test(_.format)),$t=(ut=ut.replace(/\u00A4/g,ce)).split(";");ae.hasNegativePattern=!!z()||$t.length>1,ae.nData=z()?j(Me.type+"nData",ne):v($t[1]||"-"+$t[0],!0,ce),ae.pData=z()?j(Me.type+"pData",ne):v($t[0],!1,ce),!be[2]&&!_.minimumFractionDigits&&!_.maximumFractionDigits&&(ye=v(ut.split(";")[0],!0,"",!0).minimumFraction)}if(s.formatRegex.test(_.format)||!_.format){if(C(Q,f(_.format||"N")),Q.custom=!1,We="###0",(Q.fractionDigits||_.minimumFractionDigits||_.maximumFractionDigits||ye)&&(Q.fractionDigits&&(_.minimumFractionDigits=_.maximumFractionDigits=Q.fractionDigits),We=ee(We,ye||Q.fractionDigits||_.minimumFractionDigits||0,_.maximumFractionDigits||0)),_.minimumIntegerDigits&&(We=ue(We,_.minimumIntegerDigits)),_.useGrouping&&(We=Je(We)),"currency"===Q.type||Q.type&&z()){z()&&"currency"!==Q.type&&(ae.pData=j(Q.type+"pData",ne),ae.nData=j(Q.type+"nData",ne));var L=We;We=ae.pData.nlead+L+ae.pData.nend,(ae.hasNegativePattern||z())&&(We+=";"+ae.nData.nlead+L+ae.nData.nend)}"percent"===Q.type&&!z()&&(We+=" %")}else We=_.format.replace(/'/g,'"');return Object.keys(je).length>0&&(We=k?We:function H(R,_){if(-1!==R.indexOf(",")){var W=R.split(",");R=W[0]+j("numberMapper.numberSymbols.group",_)+W[1].replace(".",j("numberMapper.numberSymbols.decimal",_))}else R=R.replace(".",j("numberMapper.numberSymbols.decimal",_));return R}(We,je)),We},s.fractionDigitsPattern=ee,s.minimumIntegerPattern=ue,s.groupingPattern=Je,s.getWeekData=function U(R,_){var W="sun",k=j("supplemental.weekData.firstDay",_),B=R;return/en-/.test(B)&&(B=B.slice(3)),B=B.slice(0,2).toUpperCase()+B.substr(2),k&&(W=k[""+B]||k[B.slice(0,2)]||"sun"),o[""+W]},s.replaceBlazorCurrency=function $(R,_,W){var k=function CB(s){return j(s||"",bB)}(W);if(_!==k)for(var B=0,Q=R;B<Q.length;B++){var ne=Q[B];ne.nend=ne.nend.replace(_,k),ne.nlead=ne.nlead.replace(_,k)}},s.getWeekOfYear=function q(R){var k,_=new Date(R.getFullYear(),0,1),W=_.getDay();W=W>=0?W:W+7;var B=Math.floor((R.getTime()-_.getTime()-6e4*(R.getTimezoneOffset()-_.getTimezoneOffset()))/864e5)+1;if(W<4){if((k=Math.floor((B+W-1)/7)+1)>52){var ne=new Date(R.getFullYear()+1,0,1).getDay();k=(ne=ne>=0?ne:ne+7)<4?1:53}}else k=Math.floor((B+W-1)/7);return k}}(ge||(ge={}));var vT=/^(.*?):[ \t]*([^\r\n]*)$/gm,gT="GET",ks=function(){function s(t,e,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof t?(this.url=t,this.type=e?e.toUpperCase():gT,this.mode=!!p(i)||i):"object"==typeof t&&(this.options=t,wi(this,this.options)),this.type=this.type?this.type.toUpperCase():gT,this.contentType=void 0!==this.contentType?this.contentType:n}return s.prototype.send=function(t){var e=this;this.data=p(t)?this.data:t;var i={cancel:!1,httpRequest:null};return new Promise(function(r,o){e.httpRequest=new XMLHttpRequest,e.httpRequest.onreadystatechange=function(){e.stateChange(r,o)},p(e.onLoad)||(e.httpRequest.onload=e.onLoad),p(e.onProgress)||(e.httpRequest.onprogress=e.onProgress),p(e.onAbort)||(e.httpRequest.onabort=e.onAbort),p(e.onError)||(e.httpRequest.onerror=e.onError),p(e.onUploadProgress)||(e.httpRequest.upload.onprogress=e.onUploadProgress),e.httpRequest.open(e.type,e.url,e.mode),!p(e.data)&&null!==e.contentType&&e.httpRequest.setRequestHeader("Content-Type",e.contentType||"application/json; charset=utf-8"),e.beforeSend&&(i.httpRequest=e.httpRequest,e.beforeSend(i)),i.cancel||e.httpRequest.send(p(e.data)?null:e.data)})},s.prototype.successHandler=function(t){return this.onSuccess&&this.onSuccess(t,this),t},s.prototype.failureHandler=function(t){return this.onFailure&&this.onFailure(this.httpRequest),t},s.prototype.stateChange=function(t,e){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch{}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?t(this.successHandler(i)):this.emitError?e(new Error(this.failureHandler(this.httpRequest.statusText))):t())},s.prototype.getResponseHeader=function(t){var e,i;e={};for(var n=vT.exec(this.httpRequest.getAllResponseHeaders());n;)e[n[1].toLowerCase()]=n[2],n=vT.exec(this.httpRequest.getAllResponseHeaders());return p(i=e[t.toLowerCase()])?null:i},s}(),kB=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,zB=/msie|trident/i,RB=/Trident\/7\./,FB=/(ipad|iphone|ipod touch)/i,HB=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,BB=/android/i,_B=/trident|windows phone|edge/i,YB=/(version)[ /]([\w.]+)/i,tm={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};typeof window<"u"&&(window.browserDetails=window.browserDetails||{});var O=function(){function s(){}return s.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,r=Object.keys(tm);n<r.length;n++)if(i=s.userAgent.match(tm[""+r[n]])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,s.userAgent.match(RB)){t.name="msie";break}var a=s.userAgent.match(YB);"safari"===t.name&&a&&(t.version=a[2]);break}return t},s.getEvent=function(t){var e={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return s.isPointer?e[""+t].isPointer:s.isTouch?e[""+t].isTouch+(s.isDevice?"":" "+e[""+t].isDevice):e[""+t].isDevice},s.getTouchStartEvent=function(){return s.getEvent("start")},s.getTouchEndEvent=function(){return s.getEvent("end")},s.getTouchMoveEvent=function(){return s.getEvent("move")},s.getTouchCancelEvent=function(){return s.getEvent("cancel")},s.isSafari=function(){return s.isDevice&&s.isIos&&s.isTouch&&typeof window<"u"&&-1===window.navigator.userAgent.toLowerCase().indexOf("iphone")&&window.navigator.userAgent.toLowerCase().indexOf("safari")>-1},s.getValue=function(t,e){var i=typeof window<"u"?window.browserDetails:{};return typeof navigator<"u"&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===s.isTouch&&!tm.CHROME.test(navigator.userAgent)&&(i.isIos=!0,i.isDevice=!0,i.isTouch=!0,i.isPointer=!0),typeof i[""+t]>"u"?i[""+t]=e.test(s.userAgent):i[""+t]},Object.defineProperty(s,"userAgent",{get:function(){return s.uA},set:function(t){s.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(s,"info",{get:function(){return ve(window.browserDetails.info)?window.browserDetails.info=s.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isIE",{get:function(){return s.getValue("isIE",zB)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isTouch",{get:function(){return ve(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isPointer",{get:function(){return ve(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isMSPointer",{get:function(){return ve(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isDevice",{get:function(){return s.getValue("isDevice",kB)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isIos",{get:function(){return s.getValue("isIos",FB)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isIos7",{get:function(){return s.getValue("isIos7",HB)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isAndroid",{get:function(){return s.getValue("isAndroid",BB)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isWebView",{get:function(){return ve(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!(ve(window.cordova)&&ve(window.PhoneGap)&&ve(window.phonegap)&&"object"!==window.forge)),window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(s,"isWindows",{get:function(){return s.getValue("isWindows",_B)},enumerable:!0,configurable:!0}),Object.defineProperty(s,"touchStartEvent",{get:function(){return ve(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=s.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(s,"touchMoveEvent",{get:function(){return ve(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=s.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(s,"touchEndEvent",{get:function(){return ve(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=s.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(s,"touchCancelEvent",{get:function(){return ve(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=s.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),s.uA=typeof navigator<"u"?navigator.userAgent:"",s}(),y=function(){function s(){}return s.addOrGetEventData=function(t){return"__eventList"in t?t.__eventList.events:(t.__eventList={},t.__eventList.events=[])},s.add=function(t,e,i,n,r){var a,o=s.addOrGetEventData(t);a=r?function vB(s,t){var e;return function(){var i=this,n=arguments;clearTimeout(e),e=setTimeout(function(){return e=null,s.apply(i,n)},t)}}(i,r):i,n&&(a=a.bind(n));for(var l=e.split(" "),h=0;h<l.length;h++)o.push({name:l[parseInt(h.toString(),10)],listener:i,debounce:a}),O.isIE?t.addEventListener(l[parseInt(h.toString(),10)],a):t.addEventListener(l[parseInt(h.toString(),10)],a,{passive:!1});return a},s.remove=function(t,e,i){for(var n=s.addOrGetEventData(t),r=e.split(" "),o=function(l){var c,h=-1;n&&0!==n.length&&n.some(function(u,d){return u.name===r[parseInt(l.toString(),10)]&&u.listener===i&&(h=d,c=u.debounce,!0)}),-1!==h&&n.splice(h,1),c&&t.removeEventListener(r[parseInt(l.toString(),10)],c)},a=0;a<r.length;a++)o(a)},s.clearEvents=function(t){var e,i;i=C([],i,e=s.addOrGetEventData(t));for(var n=0;n<i.length;n++)t.removeEventListener(i[parseInt(n.toString(),10)].name,i[parseInt(n.toString(),10)].debounce),e.shift()},s.trigger=function(t,e,i){for(var r=0,o=s.addOrGetEventData(t);r<o.length;r++){var a=o[r];a.name===e&&a.debounce.call(this,i)}},s}(),UB=/^svg|^path|^g/;function lt(s,t){var e=UB.test(s)?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s);return typeof t>"u"||(e.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(e.className=t.className),void 0!==t.id&&(e.id=t.id),void 0!==t.styles&&e.setAttribute("style",t.styles),void 0!==t.attrs&&re(e,t.attrs)),e}function D(s,t){for(var e=mT(t),i=RegExp,n=0,r=s;n<r.length;n++)for(var o=r[n],a=0,l=e;a<l.length;a++){var h=l[a];if(fr(o)){var c=j("attributes.className",o);p(c)?Oe("attributes.className",h,o):new i("\\b"+h+"\\b","i").test(c)||Oe("attributes.className",c+" "+h,o)}else o.classList.contains(h)||o.classList.add(h)}return s}function N(s,t){for(var e=mT(t),i=0,n=s;i<n.length;i++){var r=n[i],o=fr(r);if(o?j("attributes.className",r):""!==r.className)for(var l=0,h=e;l<h.length;l++){var c=h[l];if(o){var d=j("attributes.className",r).split(" "),f=d.indexOf(c);-1!==f&&d.splice(f,1),Oe("attributes.className",d.join(" "),r)}else r.classList.remove(c)}}return s}function mT(s){var t=[];return"string"==typeof s?t.push(s):t=s,t}function Rt(s){return""===s.style.visibility&&s.offsetWidth>0}function Fr(s,t,e){for(var i=document.createDocumentFragment(),n=0,r=s;n<r.length;n++)i.appendChild(r[n]);return t.insertBefore(i,t.firstElementChild),e&&yT(t),s}function xe(s,t,e){var i=document.createDocumentFragment();if(s instanceof NodeList)for(;s.length>0;)i.appendChild(s[0]);else for(var n=0,r=s;n<r.length;n++)i.appendChild(r[n]);return t.appendChild(i),e&&yT(t),s}function yT(s){s.querySelectorAll("script").forEach(function(e){var i=document.createElement("script");i.text=e.innerHTML,document.head.appendChild(i),X(i)})}function X(s){var t=s.parentNode;if(t)return t.removeChild(s)}function He(s){var t=s.parentNode;y.clearEvents(s),t.removeChild(s)}function re(s,t){for(var i=s,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if(fr(i)){var a=o;"tabindex"===o&&(a="tabIndex"),i.attributes[""+a]=t[""+o]}else i.setAttribute(o,t[""+o])}return i}function T(s,t,e){return void 0===t&&(t=document),s=bT(s),t.querySelector(s)}function Z(s,t,e){return void 0===t&&(t=document),s=bT(s),t.querySelectorAll(s)}function bT(s){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(s.match(/#[0-9]/g)||s.match(t)){for(var e=s.split(","),i=0;i<e.length;i++){for(var n=e[parseInt(i.toString(),10)].split(" "),r=0;r<n.length;r++)if(n[parseInt(r.toString(),10)].indexOf("#")>-1&&!n[parseInt(r.toString(),10)].match(/\[.*\]/)){var o=n[parseInt(r.toString(),10)].split("#");if(o[1].match(/^\d/)||o[1].match(t)){var a=n[parseInt(r.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",n[parseInt(r.toString(),10)]=a.join(".")}}e[parseInt(i.toString(),10)]=n.join(" ")}return e.join(",")}return s}function F(s,t){var e=s;if("function"==typeof e.closest)return e.closest(t);for(;e&&1===e.nodeType;){if(im(e,t))return e;e=e.parentNode}return null}function ie(s,t){void 0!==t&&Object.keys(t).forEach(function(e){s.style[e]=t[e]})}function ki(s,t,e){D([s],t),N([s],e)}function im(s,t){var e=s.matches||s.msMatchesSelector||s.webkitMatchesSelector;return e?e.call(s,t):-1!==[].indexOf.call(document.querySelectorAll(t),s)}var VB=new RegExp("]"),hs=function(){function s(t,e){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new ih(this),ve(e)||(this.element="string"==typeof e?document.querySelector(e):e,p(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),ve(t)||this.setProperties(t,!0),this.isDestroyed=!1}return s.prototype.setProperties=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!e,wi(this,t),!0!==e?(wi(this.changedProperties,t),this.dataBind()):z()&&this.isRendered&&this.serverDataBind(t),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},s.callChildDataBind=function(t,e){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if(e[""+o]instanceof Array)for(var a=0,l=e[""+o];a<l.length;a++){var h=l[a];void 0!==h.dataBind&&h.dataBind()}else e[""+o].dataBind()}},s.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},s.prototype.dataBind=function(){if(s.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,e=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(e,i),this.isProtectedOnChange=t}},s.prototype.serverDataBind=function(t){if(z()){C(this.bulkChanges,{},t=t||{},!0);var e="sfBlazor";this.allowServerDataBinding&&window[""+e].updateModel&&(window[""+e].updateModel(this),this.bulkChanges={})}},s.prototype.saveChanges=function(t,e,i){if(z()){var n={};n[""+t]=e,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[""+t]=i,this.changedProperties[""+t]=e,this.finalUpdate(),this.finalUpdate=function fB(s){var t,e=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(e);var n="ej2"+function mB(s){for(var t="",e=0;e<5;e++)t+=(e?",":"")+s[parseInt(e.toString(),10)];return t}(e),r=function(o){o.source===window&&"string"==typeof o.data&&o.data.length<=32&&o.data===n&&(s(),t())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",r),s=r=n=void 0}}(this.dataBind.bind(this)))},s.prototype.addEventListener=function(t,e){this.modelObserver.on(t,e)},s.prototype.removeEventListener=function(t,e){this.modelObserver.off(t,e)},s.prototype.trigger=function(t,e,i,n){var r=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(t,e,i,n);if(VB.test(t)){var l=j(t,this);if(l)if(window.Blazor){var c=l.call(this,e);c&&"function"==typeof c.then?i?c.then(function(u){i&&(u="string"==typeof u&&r.modelObserver.isJson(u)?JSON.parse(u):u,i.call(r,u))}).catch(function(u){n&&(u="string"==typeof u&&r.modelObserver.isJson(u)?JSON.parse(u):u,n.call(r,u))}):a=c:i&&i.call(this,e)}else l.call(this,e),i&&i.call(this,e);else i&&i.call(this,e)}return this.isProtectedOnChange=o,a}},s.prototype.addInstance=function(){var t="e-"+this.getModuleName().toLowerCase();D([this.element],["e-lib",t]),p(this.element.ej2_instances)?Oe("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},s.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(e){return e!==t}),N([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&N([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},s}();function Qe(s,t){var e,i,n="string"==typeof s?document.getElementById(s):s;for(i=0;i<n.ej2_instances.length;i++)if(e=n.ej2_instances[parseInt(i.toString(),10)],"string"==typeof t){if(t===e.getModuleName())return e}else if(e instanceof t)return e}function Uu(s,t,e,i){return(!s.properties.hasOwnProperty(t)||!(s.properties[t]instanceof i))&&(s.properties[""+t]=Bu(i,[s,t,e])),s.properties[""+t]}function ah(s,t,e,i,n,r){for(var o=[],a=e?e.length:0,l=0;l<a;l++){var h=i;if(r&&(h=i(e[parseInt(l.toString(),10)],s)),n){var c=Bu(h,[s,t,{},!0]);c.setProperties(e[parseInt(l.toString(),10)],!0),o.push(c)}else o.push(Bu(h,[s,t,e[parseInt(l.toString(),10)],!1]))}return o}function CT(s,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[""+t]=s),this.properties[""+t]}}function WB(s,t){return function(e){if(this.properties[""+t]!==e){var i=this.properties.hasOwnProperty(t)?this.properties[t]:s;this.saveChanges(t,e,i),this.properties[""+t]=e}}}function XB(s,t,e){return function(){return Uu(this,t,s,e)}}function qB(s,t,e){return function(i){Uu(this,t,s,e).setProperties(i)}}function GB(s,t,e){return function(){var i=this;if(!this.properties.hasOwnProperty(t)){var n=ah(this,t,s,e,!1);this.properties[""+t]=n}var r=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!this.properties[t].hasOwnProperty("push")&&!r&&["push","pop"].forEach(function(o){var a={value:e3(o,t,0,i.properties[""+t]).bind(i),configurable:!0};Object.defineProperty(i.properties[""+t],o,a)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+t],"isComplexArray",{value:!0}),this.properties[""+t]}}function ZB(s,t,e){return function(i){this.isComplexArraySetter=!0;var n=ah(this,t,s,e,!1),r=ah(this,t,i,e,!0);this.isComplexArraySetter=!1,this.saveChanges(t,r,n),this.properties[""+t]=r}}function e3(s,t,e,i){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(s){case"push":for(var a=0;a<n.length;a++){Array.prototype[""+s].apply(i,[n[parseInt(a.toString(),10)]]);var l=MT(o+(i.length-1),n[parseInt(a.toString(),10)],!this.controlParent,s);this.serverDataBind(l,n[parseInt(a.toString(),10)],!1,s)}break;case"pop":Array.prototype[""+s].apply(i);var h=MT(o+i.length,null,!this.controlParent,s);this.serverDataBind(h,{ejsAction:"pop"},!1,s)}return i}}function MT(s,t,e,i){var n=s;return e&&((n={})[""+s]=t,t&&"object"==typeof t)&&(n[""+s].ejsAction=i),n}function m(s){return function(t,e){var i={set:WB(s,e),get:CT(s,e),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i),Da(t,e,"prop",s)}}function pt(s,t){return function(e,i){var n={set:qB(s,i,t),get:XB(s,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),Da(e,i,"complexProp",s,t)}}function mn(s,t){return function(e,i){var n={set:ZB(s,i,t),get:GB(s,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),Da(e,i,"colProp",s,t)}}function E(){return function(s,t){var e={set:function(i){var n=this.properties[""+t];if(n!==i){var r=wT(this,t);!1===ve(n)&&r.context.removeEventListener(r.prefix,n),r.context.addEventListener(r.prefix,i),this.properties[""+t]=i}},get:CT(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(s,t,e),Da(s,t,"event")}}function Be(s){}function Da(s,t,e,i,n){ve(s.propList)&&(s.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),s.propList[e+"s"].push({propertyName:t,defaultValue:i,type:n}),s.propList[e+"Names"].push(t)}function wT(s,t){if(!1===s.hasOwnProperty("parentObj"))return{context:s,prefix:t};var e=j("propName",s);return e&&(t=e+"-"+t),wT(j("parentObj",s),t)}var t3=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cs=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},$i=function(s){function t(i){var n=s.call(this,i,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var e;return t3(t,s),e=t,t.prototype.animate=function(i,n){var r=this.getModel(n=n||{});if("string"==typeof i)for(var a=0,l=Array.prototype.slice.call(Z(i,document));a<l.length;a++)r.element=l[a],e.delayAnimation(r);else r.element=i,e.delayAnimation(r)},t.stop=function(i,n){i.style.animation="",i.removeAttribute("e-animate");var r=i.getAttribute("e-animation-id");if(r){var o=parseInt(r,10);cancelAnimationFrame(o),i.removeAttribute("e-animation-id")}n&&n.end&&n.end.call(this,n)},t.delayAnimation=function(i){"Disable"===DT?(i.begin&&i.begin.call(this,i),i.end&&i.end.call(this,i)):i.delay?setTimeout(function(){e.applyAnimation(i)},i.delay):e.applyAnimation(i)},t.applyAnimation=function(i){var n=this;i.timeStamp=0;var r=0,o=0,a=0,l=i.duration;i.element.setAttribute("e-animate","true");var h=function(c){try{c?(i.timeStamp=c+i.timeStamp-(a=0===a?c:a),a=c,!r&&i.begin&&i.begin.call(n,i),r+=1,i.timeStamp<l&&i.timeStamp+i.timeStamp/r<l&&i.element.getAttribute("e-animate")?(i.element.style.animation=i.name+" "+i.duration+"ms "+i.timingFunction,i.progress&&i.progress.call(n,i),requestAnimationFrame(h)):(cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.element.removeAttribute("e-animate"),i.element.style.animation="",i.end&&i.end.call(n,i))):(o=requestAnimationFrame(h),i.element.setAttribute("e-animation-id",o.toString()))}catch(d){cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.fail&&i.fail.call(n,d)}};h()},t.prototype.getModel=function(i){return{name:i.name||this.name,delay:i.delay||this.delay,duration:void 0!==i.duration?i.duration:this.duration,begin:i.begin||this.begin,end:i.end||this.end,fail:i.fail||this.fail,progress:i.progress||this.progress,timingFunction:this.easing[i.timingFunction]?this.easing[i.timingFunction]:i.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(i,n){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},cs([m("FadeIn")],t.prototype,"name",void 0),cs([m(400)],t.prototype,"duration",void 0),cs([m("ease")],t.prototype,"timingFunction",void 0),cs([m(0)],t.prototype,"delay",void 0),cs([E()],t.prototype,"progress",void 0),cs([E()],t.prototype,"begin",void 0),cs([E()],t.prototype,"end",void 0),cs([E()],t.prototype,"fail",void 0),e=cs([Be],t)}(hs);function zi(s,t,e){var i=function i3(s){return{selector:s&&s.selector?s.selector:null,ignore:s&&s.ignore?s.ignore:null,rippleFlag:s&&s.rippleFlag,isCenterRipple:s&&s.isCenterRipple,duration:s&&s.duration?s.duration:350}}(t);return!1===i.rippleFlag||void 0===i.rippleFlag&&!Wn?function(){}:(s.setAttribute("data-ripple","true"),y.add(s,"mousedown",IT,{parent:s,rippleOptions:i}),y.add(s,"mouseup",OT,{parent:s,rippleOptions:i,done:e}),y.add(s,"mouseleave",Ea,{parent:s,rippleOptions:i}),O.isPointer&&y.add(s,"transitionend",Ea,{parent:s,rippleOptions:i}),function(){s.removeAttribute("data-ripple"),y.remove(s,"mousedown",IT),y.remove(s,"mouseup",OT),y.remove(s,"mouseleave",Ea),y.remove(s,"transitionend",Ea)})}function IT(s){var t=s.target,e=this.rippleOptions.selector,i=e?F(t,e):t;if(!(!i||this.rippleOptions&&F(t,this.rippleOptions.ignore))){var n=i.getBoundingClientRect(),r=s.pageX-document.body.scrollLeft,o=s.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(r-n.left),Math.abs(r-n.right)),l=Math.max(Math.abs(o-n.top),Math.abs(o-n.bottom)),h=Math.sqrt(a*a+l*l),c=2*h+"px",u=r-n.left-h,d=o-n.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(u=0,d=0,c="100%"),i.classList.add("e-ripple");var g=lt("div",{className:"e-ripple-element",styles:"width: "+c+";height: "+c+";left: "+u+"px;top: "+d+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(g),window.getComputedStyle(g).getPropertyValue("opacity"),g.style.transform="scale(1)",i!==this.parent&&y.add(i,"mouseleave",Ea,{parent:this.parent,rippleOptions:this.rippleOptions})}}function OT(s){TT(s,this)}function Ea(s){TT(s,this)}function TT(s,t){var e=t.rippleOptions.duration,i=s.target,n=t.rippleOptions.selector,r=n?F(i,n):i;if(r&&(!r||-1!==r.className.indexOf("e-ripple"))){var o=Z(".e-ripple-element",r),a=o[o.length-1];a&&(a.style.opacity="0.5"),t.parent!==r&&y.remove(r,"mouseleave",Ea),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),r.getElementsByClassName("e-ripple-element").length||r.classList.remove("e-ripple"),t.done&&t.done(s)},e)}}var nm,Wn=!1,DT="",s3=function(){function s(t){this.loadedModules=[],this.parent=t}return s.prototype.inject=function(t,e){var i=t.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(t);for(var n=0;n<i;n++)for(var r=t[parseInt(n.toString(),10)],o=0,a=e;o<a.length;o++){var l=a[o],h=r.member;if(l&&l.prototype.getModuleName()===r.member&&!this.isModuleLoaded(h)){var c=Bu(l,r.args),u=this.getMemberName(h);Oe(u,r.isProperty?l:c,this.parent);var d=r;d.member=u,this.loadedModules.push(d)}}}else this.clean()},s.prototype.clean=function(){for(var t=0,e=this.loadedModules;t<e.length;t++){var i=e[t];i.isProperty||j(i.member,this.parent).destroy()}this.loadedModules=[]},s.prototype.clearUnusedModule=function(t){for(var e=this,i=t.map(function(l){return e.getMemberName(l.member)}),r=0,o=this.loadedModules.filter(function(l){return-1===i.indexOf(l.member)});r<o.length;r++){var a=o[r];a.isProperty||j(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),_u(this.parent,a.member)}},s.prototype.getMemberName=function(t){return t[0].toLowerCase()+t.substring(1)+"Module"},s.prototype.isModuleLoaded=function(t){for(var e=0,i=this.loadedModules;e<i.length;e++)if(i[e].member===this.getMemberName(t))return!0;return!1},s}(),Ze=function(){function s(t,e,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=j("callChildDataBind",hs),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=e,this.isParentArray=n,this.setProperties(i,!0)}return s.prototype.updateChange=function(t,e){!0===t?this.parentObj.childChangedProperties[""+e]=t:delete this.parentObj.childChangedProperties[""+e],this.parentObj.updateChange&&this.parentObj.updateChange(t,this.parentObj.propName)},s.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var t=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(t)}}},s.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},s.prototype.setProperties=function(t,e){!0===e?(wi(this,t),this.updateChange(!1,this.propName),this.clearChanges()):wi(this,t)},s.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var t=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(Oe(this.propName+"."+t,this.changedProperties,this.parentObj.changedProperties),Oe(this.propName+"."+t,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},s.prototype.saveChanges=function(t,e,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(t,e,!0),this.oldProperties[""+t]=i,this.changedProperties[""+t]=e,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},s.prototype.serverDataBind=function(t,e,i,n){if(z()&&!this.parentObj.isComplexArraySetter){var r,o={},a=i?this.getParentKey(!0)+"."+t:t;if(-1!==a.indexOf(".")){var l=a.split(".");r=o;for(var h=0;h<l.length;h++){var c=h===l.length-1;r[l[parseInt(h.toString(),10)]]=c?e:{},r=c?r:r[l[parseInt(h.toString(),10)]]}}else o[""+a]={},r=o[""+a],o[""+a][""+t]=e;this.isParentArray&&(r.ejsAction=n||"none"),this.controlParent.serverDataBind(o)}},s.prototype.getParentKey=function(t){var e="",i=this.propName;if(this.isParentArray){e=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=t?n:n>0?n-1:0,i+=e=-1!==e?"-"+e:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+e),i},s}(),o3=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","inplaceeditor","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","slider","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],ET=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],xT=function(){function s(t){var e;this.isValidated=!1,this.isLicensed=!0,this.version="22",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats|essentialstudio/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion license key is invalid.</span>",invalidKey:"<span>The included Syncfusion license key is invalid.</span>"},this.manager=(e=null,{setKey:function i(r){e=r},getKey:function n(){return e}}),this.npxManager={getKey:function i(){return"npxKeyReplace"}},this.manager.setKey(t)}return s.prototype.validate=function(){if(!this.isValidated&&Oa&&!j(Vu(ET),Oa)&&!j("Blazor",Oa)){var i=void 0,n=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var r=this.getInfoFromKey();if(r&&r.length)for(var o=0,a=r;o<a.length;o++){var l=a[o];if(!this.platform.test(l.platform)||l.invalidPlatform)i=this.errors.platformMismatched;else if(-1===l.version.indexOf(this.version))i=(i=(i=this.errors.versionMismatched).replace("##LicenseVersion",l.version)).replace("##Requireversion",this.version+".x");else if(l.expiryDate){var h=new Date(l.expiryDate),c=new Date;if(!(h!==c&&h<c))break;i=this.errors.trailExpired}}else i=this.errors.invalidKey}else{var u=j(Vu([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),Oa);n=j(Vu([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),Oa),i=u&&""!==u?u:this.errors.noLicense}if(i&&typeof document<"u"&&!p(document)){var d=lt("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+i+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(nm=n&&""!==n?n:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjI=&utm_source=license&utm_medium=listing&utm_campaign=license-information")+">Claim your free account</a>"});d.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(d),this.isLicensed=!1}this.isValidated=!0,Oe(Vu(ET),this.isValidated,Oa)}return this.isLicensed},s.prototype.getDecryptedData=function(t){try{return atob(t)}catch{return""}},s.prototype.getInfoFromKey=function(){try{var t="",e=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],r=!1,o=!1;this.manager.getKey()?t=this.manager.getKey():(o=!0,t=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var a=t.split(";"),l=0,h=a;l<h.length;l++){var u=this.getDecryptedData(h[l]);if(u){var d=0,f="";if(o){for(var b=u[u.length-1],M=[],v=0;v<u.length;v++)M[parseInt(v.toString(),10)]=u[parseInt(v.toString(),10)].charCodeAt(0)-b.charCodeAt(0);for(v=0;v<M.length;v++)f+=String.fromCharCode(M[parseInt(v.toString(),10)])}else for(v=0;v<u.length;v++,d++){d===e.length&&(d=0);var g=u.charCodeAt(v);f+=String.fromCharCode(g^e[parseInt(d.toString(),10)]>>16)}this.platform.test(f)?(i=f.split(";"),r=!1,i.length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):f&&f.split(";").length>3&&(r=!0)}}return r&&!n.length?[{invalidPlatform:r}]:n.length?n:null}catch{return null}},s}();function Vu(s){for(var t="",e=0,i=s;e<i.length;e++)t+=String.fromCharCode(i[e]);return t}new xT;var sm,l3=function(s){return s&&function a3(s){new xT(s)}(s),!0},c3=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wu=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},rm=0,jT=0,om=0,AT=!0,LT=!1,Mt=function(s){function t(e,i){var n=s.call(this,e,i)||this;return n.randomId=function gB(){if(!(typeof window>"u")){var s=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(s)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,p(n.enableRtl)&&n.setProperties({enableRtl:Jg},!0),p(n.locale)&&n.setProperties({locale:nh},!0),n.moduleLoader=new s3(n),n.localObserver=new ih(n),bo.on("notifyExternalChange",n.detectFunction,n,n.randomId),typeof window<"u"&&typeof document<"u"&&!l3()&&-1!==o3.indexOf(n.getModuleName())&&(om+=1)>5&&(AT=!1),ve(i)||n.appendTo(),n}return c3(t,s),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),!this.refreshing&&(N([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),s.prototype.destroy.call(this),this.moduleLoader.clean(),bo.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new ih(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)},t.prototype.appendTo=function(e){if(p(e)||"string"!=typeof e?p(e)||(this.element=e):this.element=T(e,document),!p(this.element)){var i="e-"+this.getModuleName().toLowerCase();D([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=j("ej2_instances",this.element);(!n||-1===n.indexOf(this))&&s.prototype.addInstance.call(this),this.preRender(),this.injectModules(),!AT&&!LT&&(function(){var s='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create?utm_source=license&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums?utm_source=license&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback?utm_source=license&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks?utm_source=license&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/downloads/metrostudio?utm_source=license&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/?utm_source=license&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers?utm_source=license&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+nm+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if(typeof document<"u"&&!p(document)){var t=lt("div",{innerHTML:s});document.body.appendChild(t)}}(),LT=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){z()&&window.sfBlazor.renderComplete(this.element,e),this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),s.prototype.dataBind.call(this)},t.prototype.on=function(e,i,n){if("string"==typeof e)this.localObserver.on(e,i,n);else for(var r=0,o=e;r<o.length;r++){var a=o[r];this.localObserver.on(a.event,a.handler,a.context)}},t.prototype.off=function(e,i){if("string"==typeof e)this.localObserver.off(e,i);else for(var n=0,r=e;n<r.length;n++){var o=r[n];this.localObserver.off(o.event,o.handler)}},t.prototype.notify=function(e,i){!0!==this.isDestroyed&&this.localObserver.notify(e,i)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[parseInt(n.toString(),10)])&&this.prototype.injectedModules.push(e[parseInt(n.toString(),10)])},t.prototype.createElement=function(e,i,n){return lt(e,i)},t.prototype.triggerStateChange=function(e,i){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:i})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var i=Object.keys(e);i.length&&(this[i[0]]=e[i[0]])},t.prototype.mergePersistData=function(){var e;p(e=window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.renderReactTemplates=function(e){p(e)||e()},t.prototype.clearTemplate=function(e,i){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(rm=0),sm=this.pageID(location.href),jT=history.length,e+"_"+sm+"_"+rm++},t.prototype.pageID=function(e){var i=0;if(0===e.length)return i;for(var n=0;n<e.length;n++)i=(i<<5)-i+e.charCodeAt(n),i&=i;return Math.abs(i)},t.prototype.isHistoryChanged=function(){return sm!==this.pageID(location.href)||jT!==history.length},t.prototype.addOnPersist=function(e){for(var i=this,n={},r=0,o=e;r<o.length;r++){var l,a=o[r];ve(l=j(a,this))||Oe(a,this.getActualProperties(l),n)}return JSON.stringify(n,function(h,c){return i.getActualProperties(c)})},t.prototype.getActualProperties=function(e){return e instanceof Ze?j("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,i){for(var n={},r=function(c){if(-1===i.indexOf(c)){var u=e[c];if("object"!=typeof u||u instanceof Array)n[""+c]=u;else{var d=i.filter(function(f){return new RegExp(c+".").test(f)}).map(function(f){return f.replace(c+".","")});n[""+c]=o.iterateJsonProperties(o.getActualProperties(u),d)}}},o=this,a=0,l=Object.keys(e);a<l.length;a++)r(l[a]);return n},Wu([m(!1)],t.prototype,"enablePersistence",void 0),Wu([m()],t.prototype,"enableRtl",void 0),Wu([m()],t.prototype,"locale",void 0),Wu([Be],t)}(hs);typeof window<"u"&&window.addEventListener("popstate",function(){rm=0});var NT=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),At=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},u3={left:0,top:0,bottom:0,right:0},am={isDragged:!1},p3=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return NT(t,s),At([m(0)],t.prototype,"left",void 0),At([m(0)],t.prototype,"top",void 0),t}(Ze),lh=function(s){function t(i,n){var r=s.call(this,n,i)||this;return r.dragLimit=e.getDefaultPosition(),r.borderWidth=e.getDefaultPosition(),r.padding=e.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.eleTop=0,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}var e;return NT(t,s),e=t,t.prototype.bind=function(){this.toggleEvents(),O.isIE&&D([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return C({},u3)},t.prototype.toggleEvents=function(i){var n;ve(this.handle)||(n=T(this.handle,this.element));var r=this.enableTapHold&&O.isDevice&&O.isTouch?this.mobileInitialize:this.initialize;i?y.remove(n||this.element,O.isSafari()?"touchstart":O.touchStartEvent,r):y.add(n||this.element,O.isSafari()?"touchstart":O.touchStartEvent,r,this)},t.prototype.mobileInitialize=function(i){var n=this,r=i.currentTarget;this.tapHoldTimer=setTimeout(function(){n.externalInitialize=!0,n.removeTapholdTimer(),n.initialize(i,r)},this.tapHoldThreshold),y.add(document,O.isSafari()?"touchmove":O.touchMoveEvent,this.removeTapholdTimer,this),y.add(document,O.isSafari()?"touchend":O.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),y.remove(document,O.isSafari()?"touchmove":O.touchMoveEvent,this.removeTapholdTimer),y.remove(document,O.isSafari()?"touchend":O.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(i,n){return p(i)?null:i[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+n]]>i[{vertical:"clientHeight",horizontal:"clientWidth"}[""+n]]&&("vertical"===n?i.scrollTop>0:i.scrollLeft>0)?("vertical"===n?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?i.scrollTop:i.scrollTop-this.parentScrollY),this.tempScrollHeight=i.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?i.scrollLeft:i.scrollLeft-this.parentScrollX),this.tempScrollWidth=i.scrollWidth),p(i)?i:this.getScrollableParent(i.parentNode,n)):this.getScrollableParent(i.parentNode,n)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(i,n){if(this.currentStateTarget=i.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=i.currentTarget||n,this.dragProcessStarted=!1,this.abort){var r=this.abort;"string"==typeof r&&(r=[r]);for(var o=0;o<r.length;o++)if(!p(F(i.target,r[parseInt(o.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!ve(i.changedTouches)&&"touchstart"!==i.type&&i.preventDefault(),this.element.setAttribute("aria-grabbed","true");var a=this.getCoordinates(i);if(this.initialPosition={x:a.pageX,y:a.pageY},!this.clone){var l=this.element.getBoundingClientRect();this.getScrollableValues(),i.clientX===i.pageX&&(this.parentScrollX=0),i.clientY===i.pageY&&(this.parentScrollY=0),this.relativeXPosition=a.pageX-(l.left+this.parentScrollX),this.relativeYPosition=a.pageY-(l.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(i):(y.add(document,O.isSafari()?"touchmove":O.touchMoveEvent,this.intDragStart,this),y.add(document,O.isSafari()?"touchend":O.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==i.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,y.trigger(document.documentElement,O.isSafari()?"touchstart":O.touchStartEvent,i)}},t.prototype.intDragStart=function(i){this.removeTapholdTimer();var n=!ve(i.changedTouches);if(!n||1===i.changedTouches.length){var o,r=this.getCoordinates(i),a=getComputedStyle(this.element);this.margin={left:parseInt(a.marginLeft,10),top:parseInt(a.marginTop,10),right:parseInt(a.marginRight,10),bottom:parseInt(a.marginBottom,10)};var l=this.element;if(this.clone&&this.dragTarget){var h=F(i.target,this.dragTarget);p(h)||(l=h)}this.isReplaceDragEle&&(l=this.currentStateCheck(i.target,l)),this.offset=this.calculateParentPosition(l),this.position=this.getMousePosition(i,this.isDragScroll);var c=this.initialPosition.x-r.pageX,u=this.initialPosition.y-r.pageY;if(Math.sqrt(c*c+u*u)>=this.distance||this.externalInitialize){var f=this.getHelperElement(i);if(!f||p(f))return;n&&i.preventDefault();var v=this.helperElement=f;if(this.parentClientRect=this.calculateParentPosition(v.offsetParent),this.dragStart){var b={event:i,element:l,target:this.getProperTargetElement(i),bindEvents:z()?this.bindDragEvents.bind(this):null,dragElement:v};this.trigger("dragStart",b)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),o={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var M=getComputedStyle(l),w=parseFloat(M.marginTop);this.clone&&0!==w&&(o.top+=w),this.eleTop=isNaN(parseFloat(M.top))?0:parseFloat(M.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(o.top-=this.parentScrollY,o.left-=this.parentScrollX);var S=this.getProcessedPositionValue({top:o.top-this.diffY+"px",left:o.left-this.diffX+"px"});this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(o.top+=this.dragArea.scrollTop),this.dragElePosition={top:o.top,left:o.left},ie(v,this.getDragPosition({position:"absolute",left:S.left,top:S.top})),y.remove(document,O.isSafari()?"touchmove":O.touchMoveEvent,this.intDragStart),y.remove(document,O.isSafari()?"touchend":O.touchEndEvent,this.intDestroy),z()||this.bindDragEvents(v)}}},t.prototype.bindDragEvents=function(i){Rt(i)?(y.add(document,O.isSafari()?"touchmove":O.touchMoveEvent,this.intDrag,this),y.add(document,O.isSafari()?"touchend":O.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,i)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(i){for(this.top=i.offsetTop,this.left=i.offsetLeft,this.width=i.offsetWidth,this.height=i.offsetHeight;i.offsetParent;)this.top+=(i=i.offsetParent).offsetTop,this.left+=i.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(i){return this.queryPositionInfo?this.queryPositionInfo(i):i},t.prototype.calculateParentPosition=function(i){if(p(i))return{left:0,top:0};var n=i.getBoundingClientRect(),r=getComputedStyle(i);return{left:n.left+window.pageXOffset-parseInt(r.marginLeft,10),top:n.top+window.pageYOffset-parseInt(r.marginTop,10)}},t.prototype.intDrag=function(i){if(ve(i.changedTouches)||1===i.changedTouches.length){var n,r;this.clone&&i.changedTouches&&O.isDevice&&O.isTouch&&i.preventDefault(),this.position=this.getMousePosition(i,this.isDragScroll);var o=this.getDocumentWidthHeight("Height");o<this.position.top&&(this.position.top=o);var a=this.getDocumentWidthHeight("Width");if(a<this.position.left&&(this.position.left=a),this.drag){var l=this.getProperTargetElement(i);this.trigger("drag",{event:i,element:this.element,target:l})}var h=this.checkTargetElement(i);if(h.target&&h.instance){var c=!0;this.hoverObject&&(this.hoverObject.instance!==h.instance?this.triggerOutFunction(i,h):c=!1),c&&(h.instance.dragData[this.scope]=this.droppables[this.scope],h.instance.intOver(i,h.target),this.hoverObject=h)}else this.hoverObject&&this.triggerOutFunction(i,h);var u=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var d=this.parentClientRect.left,f=this.parentClientRect.top,v=this.getCoordinates(i),g=v.pageX,b=v.pageY,M=this.position.left-this.diffX,w=this.position.top-this.diffY,S=getComputedStyle(u);if(this.dragArea){if(this.enableAutoScroll&&this.setDragArea(),this.pageX!==g||this.skipDistanceCheck){var I=u.offsetWidth+(parseFloat(S.marginLeft)+parseFloat(S.marginRight));n=this.dragLimit.left>M&&M>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<M+I&&M>0?M-(M-this.dragLimit.right)+window.pageXOffset-I:M<0?this.dragLimit.left:M}if(this.pageY!==b||this.skipDistanceCheck){var P=u.offsetHeight+(parseFloat(S.marginTop)+parseFloat(S.marginBottom));r=this.dragLimit.top>w&&w>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<w+P&&w>0?w-(w-this.dragLimit.bottom)+window.pageYOffset-P:w<0?this.dragLimit.top:w}}else n=M,r=w;var ee,ue,H=f+this.borderWidth.top,G=d+this.borderWidth.left;if(this.dragProcessStarted&&(p(r)&&(r=this.prevTop),p(n)&&(n=this.prevLeft)),this.helperElement.classList.contains("e-treeview"))this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,ee=r-H<0?this.dragLimit.top:r-this.borderWidth.top,ue=n-G<0?this.dragLimit.left:n-this.borderWidth.left):(ee=r-this.borderWidth.top,ue=n-this.borderWidth.left);else if(this.dragArea){var Je=this.helperElement.classList.contains("e-dialog");this.dragLimit.top=this.clone?this.dragLimit.top:0,ee=r-H<0?this.dragLimit.top:r-H,ue=n-G<0?Je?n-(G-this.borderWidth.left):this.dragElePosition.left:n-G}else ee=r-H,ue=n-G;var U=parseFloat(getComputedStyle(this.element).marginTop);if(U>0&&(this.clone&&(ee+=U,w<0&&(U+w>=0?ee=U+w:ee-=U),ee=this.dragLimit.bottom<ee?this.dragLimit.bottom:ee),r-H<0))if(w+U+(u.offsetHeight-H)>=0){var $=this.dragLimit.top+w-H;$+U+H<0?ee-=U+H:ee=$}else ee-=U+H;this.dragArea&&this.helperElement.classList.contains("e-treeview")&&(ee=ee+(P=u.offsetHeight+(parseFloat(S.marginTop)+parseFloat(S.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-P:ee),this.enableScrollHandler&&!this.clone&&(ee-=this.parentScrollY,ue-=this.parentScrollX),this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(ee+=this.dragArea.scrollTop);var q=this.getProcessedPositionValue({top:ee+"px",left:ue+"px"});ie(u,this.getDragPosition(q)),!this.elementInViewport(u)&&this.enableAutoScroll&&!this.helperElement.classList.contains("e-treeview")&&this.helperElement.scrollIntoView();var R=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===R.length&&(R=this.getPathElements(i));var _=this.getScrollParent(R,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(_,ee):this.elementInViewport(this.helperElement)||(0===(R=[].slice.call(document.querySelectorAll(":hover"))).length&&(R=this.getPathElements(i)),_=this.getScrollParent(R,!0),this.getScrollPosition(_,ee))}this.dragProcessStarted=!0,this.prevLeft=n,this.prevTop=r,this.position.left=n,this.position.top=r,this.pageX=g,this.pageY=b}},t.prototype.getScrollParent=function(i,n){for(var o,r=n?i.reverse():i,a=r.length-1;a>=0;a--)if(("auto"===(o=window.getComputedStyle(r[parseInt(a.toString(),10)])["overflow-y"])||"scroll"===o)&&r[parseInt(a.toString(),10)].scrollHeight>r[parseInt(a.toString(),10)].clientHeight)return r[parseInt(a.toString(),10)];if("visible"===(o=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(i,n){i&&i===document.scrollingElement?i.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<n&&i.getBoundingClientRect().height+this.parentClientRect.top>n?i.scrollTop+=this.helperElement.clientHeight:i.scrollTop>n-this.helperElement.clientHeight&&(i.scrollTop-=this.helperElement.clientHeight):i&&i!==document.scrollingElement&&(i.clientHeight+i.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<n?i.scrollTop+=this.helperElement.clientHeight:i.getBoundingClientRect().top>n-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(i.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(i){return document.elementsFromPoint(i.clientX>0?i.clientX:0,i.clientY>0?i.clientY:0)},t.prototype.triggerOutFunction=function(i,n){this.hoverObject.instance.intOut(i,n.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(i){var n=C({},i);return this.axis&&("x"===this.axis?delete n.top:"y"===this.axis&&delete n.left),n},t.prototype.getDocumentWidthHeight=function(i){var n=document.body,r=document.documentElement;return Math.max(n["scroll"+i],r["scroll"+i],n["offset"+i],r["offset"+i],r["client"+i])},t.prototype.intDragStop=function(i){if(this.dragProcessStarted=!1,ve(i.changedTouches)||1===i.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(i.type)){if(this.dragStop){var r=this.getProperTargetElement(i);this.trigger("dragStop",{event:i,element:this.element,target:r,helper:this.helperElement})}this.intDestroy(i)}else this.element.setAttribute("aria-grabbed","false");var o=this.checkTargetElement(i);o.target&&o.instance&&(o.instance.dragStopCalled=!0,o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intDrop(i,o.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(i){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),y.remove(document,O.isSafari()?"touchmove":O.touchMoveEvent,this.intDragStart),y.remove(document,O.isSafari()?"touchend":O.touchEndEvent,this.intDragStop),y.remove(document,O.isSafari()?"touchend":O.touchEndEvent,this.intDestroy),y.remove(document,O.isSafari()?"touchmove":O.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(i){return i&&(am.isDragged=!am.isDragged),am.isDragged},t.prototype.setDragArea=function(){var i,n,a,r=0,o=0;if(a="string"==typeof this.dragArea?T(this.dragArea):this.dragArea){var h=a.getBoundingClientRect();i=a.scrollWidth?a.scrollWidth:h.right-h.left,n=a.scrollHeight?this.dragArea&&!p(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?a.clientHeight:a.scrollHeight:h.bottom-h.top;for(var c=["Top","Left","Bottom","Right"],u=getComputedStyle(a),d=0;d<c.length;d++){var f=c[parseInt(d.toString(),10)],v=u["border"+f+"Width"],g=u["padding"+f],b=f.toLowerCase();this.borderWidth[""+b]=isNaN(parseFloat(v))?0:parseFloat(v),this.padding[""+b]=isNaN(parseFloat(g))?0:parseFloat(g)}r=this.dragArea&&!p(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?h.top+document.scrollingElement.scrollTop:h.top,this.dragLimit.left=(o=h.left)+this.borderWidth.left+this.padding.left,this.dragLimit.top=a.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+i-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=r+n-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(i){var r,n=this.getCoordinates(i),o=this.helperElement.style.pointerEvents||"",a=-1!==i.type.indexOf("pointer")&&"safari"===O.info.name&&parseInt(O.info.version)>12;return Yu(i.target,this.helperElement)||-1!==i.type.indexOf("touch")||a?(this.helperElement.style.pointerEvents="none",r=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.pointerEvents=o):r=i.target,r},t.prototype.currentStateCheck=function(i,n){return p(this.currentStateTarget)||this.currentStateTarget===i?p(n)?i:n:this.currentStateTarget},t.prototype.getMousePosition=function(i,n){var a,l,r=void 0!==i.srcElement?i.srcElement:i.target,o=this.getCoordinates(i),h=p(r.offsetParent);if(n?(a=this.clone?o.pageX:o.pageX+(h?0:r.offsetParent.scrollLeft)-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+(h?0:r.offsetParent.scrollTop)-this.relativeYPosition):(a=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),document.scrollingElement&&!n&&!this.clone){var c=document.scrollingElement.scrollHeight>0&&document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight&&document.scrollingElement.scrollTop>0;a=document.scrollingElement.scrollWidth>0&&document.scrollingElement.scrollWidth>document.scrollingElement.clientWidth&&document.scrollingElement.scrollLeft>0?a-document.scrollingElement.scrollLeft:a,l=c?l-document.scrollingElement.scrollTop:l}return{left:a-(this.margin.left+this.cursorAt.left),top:l-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(i){return i.type.indexOf("touch")>-1?i.changedTouches[0]:i},t.prototype.getHelperElement=function(i){var n;return this.clone?this.helper?n=this.helper({sender:i,element:this.target}):(n=lt("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(n)):n=this.element,n},t.prototype.setGlobalDroppables=function(i,n,r){this.droppables[this.scope]=i?null:{draggable:n,helper:r,draggedElement:this.element}},t.prototype.checkTargetElement=function(i){var n=this.getProperTargetElement(i),r=this.getDropInstance(n);if(!r&&n&&!p(n.parentNode)){var o=F(n.parentNode,".e-droppable")||n.parentElement;o&&(r=this.getDropInstance(o))}return{target:n,instance:r}},t.prototype.getDropInstance=function(i){var r,o=i&&i.ej2_instances;if(o)for(var a=0,l=o;a<l.length;a++){var h=l[a];if("droppable"===h.getModuleName()){r=h;break}}return r},t.prototype.destroy=function(){this.toggleEvents(!0),s.prototype.destroy.call(this)},At([pt({},p3)],t.prototype,"cursorAt",void 0),At([m(!0)],t.prototype,"clone",void 0),At([m()],t.prototype,"dragArea",void 0),At([m()],t.prototype,"isDragScroll",void 0),At([m()],t.prototype,"isReplaceDragEle",void 0),At([m(!0)],t.prototype,"isPreventSelect",void 0),At([E()],t.prototype,"drag",void 0),At([E()],t.prototype,"dragStart",void 0),At([E()],t.prototype,"dragStop",void 0),At([m(1)],t.prototype,"distance",void 0),At([m()],t.prototype,"handle",void 0),At([m()],t.prototype,"abort",void 0),At([m()],t.prototype,"helper",void 0),At([m("default")],t.prototype,"scope",void 0),At([m("")],t.prototype,"dragTarget",void 0),At([m()],t.prototype,"axis",void 0),At([m()],t.prototype,"queryPositionInfo",void 0),At([m(!1)],t.prototype,"enableTailMode",void 0),At([m(!1)],t.prototype,"skipDistanceCheck",void 0),At([m(!0)],t.prototype,"preventDefault",void 0),At([m(!1)],t.prototype,"enableAutoScroll",void 0),At([m(!1)],t.prototype,"enableTapHold",void 0),At([m(750)],t.prototype,"tapHoldThreshold",void 0),At([m(!1)],t.prototype,"enableScrollHandler",void 0),e=At([Be],t)}(hs),v3=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),qu=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},g3={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},yn=function(s){function t(i,n){var r=s.call(this,n,i)||this;return r.keyPressHandler=function(o){for(var a=o.altKey,l=o.ctrlKey,h=o.shiftKey,c=o.which,d=0,f=Object.keys(r.keyConfigs);d<f.length;d++)for(var v=f[d],b=0,M=r.keyConfigs[""+v].split(",");b<M.length;b++){var S=e.getKeyConfigData(M[b].trim());a===S.altKey&&l===S.ctrlKey&&h===S.shiftKey&&c===S.keyCode&&(o.action=v,r.keyAction&&r.keyAction(o))}},r.bind(),r}var e;return v3(t,s),e=t,t.prototype.destroy=function(){this.unwireEvents(),s.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(i){if(i in this.configCache)return this.configCache[""+i];var n=i.toLowerCase().split("+"),r={altKey:-1!==n.indexOf("alt"),ctrlKey:-1!==n.indexOf("ctrl"),shiftKey:-1!==n.indexOf("shift"),keyCode:null};return r.keyCode=n[n.length-1].length>1&&Number(n[n.length-1])?Number(n[n.length-1]):e.getKeyCode(n[n.length-1]),e.configCache[""+i]=r,r},t.getKeyCode=function(i){return g3[""+i]||i.toUpperCase().charCodeAt(0)},t.configCache={},qu([m({})],t.prototype,"keyConfigs",void 0),qu([m("keyup")],t.prototype,"eventName",void 0),qu([E()],t.prototype,"keyAction",void 0),e=qu([Be],t)}(hs),Hr=function(){function s(t,e,i){this.controlName=t,this.localeStrings=e,this.setLocale(i||nh)}return s.prototype.setLocale=function(t){var e=this.intGetControlConstant(s.locale,t);this.currentLocale=e||this.localeStrings},s.load=function(t){this.locale=C(this.locale,t,{},!0)},s.prototype.getConstant=function(t){return p(this.currentLocale[""+t])?this.localeStrings[""+t]||"":this.currentLocale[""+t]},s.prototype.intGetControlConstant=function(t,e){return t[""+e]?t[""+e][this.controlName]:null},s.locale={},s}(),kT=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),us=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},m3=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return kT(t,s),us([m(50)],t.prototype,"swipeThresholdDistance",void 0),t}(Ze),y3=/(Up|Down)/,Gi=function(s){function t(e,i){var n=s.call(this,i,e)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(r){if(!0===n.touchAction){var o=n.updateChangeTouches(r);void 0!==r.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY},n.startEventData=o,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(r)},n.tapHoldThreshold),y.add(n.element,O.touchMoveEvent,n.moveEvent,n),y.add(n.element,O.touchEndEvent,n.endEvent,n),y.add(n.element,O.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(r){var o=n.updateChangeTouches(r);n.movedPoint=o,n.isTouchMoved=!(o.clientX===n.startPoint.clientX&&o.clientY===n.startPoint.clientY);var a={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(r),a=C(a,{},{startEvents:n.startEventData,originalEvent:r,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(o)}),n.trigger("scroll",a),n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY})},n.cancelEvent=function(r){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(r),y.remove(n.element,O.touchCancelEvent,n.cancelEvent)},n.endEvent=function(r){n.swipeFn(r),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:r,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(r){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var o=n.updateChangeTouches(r),a=o.clientX-n.startPoint.clientX,l=o.clientY-n.startPoint.clientY;a=Math.floor(a<0?-1*a:a),l=Math.floor(l<0?-1*l:a),n.isTouchMoved=a>1||l>1,/Firefox/.test(O.userAgent)&&0===o.clientX&&0===o.clientY&&"mouseup"===r.type&&(n.isTouchMoved=!1),n.endPoint=o,n.calcPoints(r);var c={originalEvent:r,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(o)};if(n.isTouchMoved){var u=void 0,d=n.swipeSettings.swipeThresholdDistance;u=C(u,n.defaultArgs,c);var f=!1,v=n.element,g=n.isScrollable(v),b=y3.test(n.movedDirection);(d<n.distanceX&&!b||d<n.distanceY&&b)&&(f=!g||n.checkSwipe(v,b)),f&&n.trigger("swipe",u)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),y.remove(n.element,O.touchMoveEvent,n.moveEvent),y.remove(n.element,O.touchEndEvent,n.endEvent),y.remove(n.element,O.touchCancelEvent,n.cancelEvent)},n.bind(),n}return kT(t,s),t.prototype.onPropertyChanged=function(e,i){},t.prototype.bind=function(){this.wireEvents(),O.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),s.prototype.destroy.call(this)},t.prototype.wireEvents=function(){y.add(this.element,O.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){y.remove(this.element,O.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var i=getComputedStyle(e);return!!/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY)},t.prototype.tapHoldEvent=function(e){this.tapCount=0,this.touchAction=!0,y.remove(this.element,O.touchMoveEvent,this.moveEvent),y.remove(this.element,O.touchEndEvent,this.endEvent),this.trigger("tapHold",{originalEvent:e}),y.remove(this.element,O.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?i.clientX>this.startPoint.clientX?"Right":"Left":i.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=i.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=i.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var i=e.clientX,n=e.clientY,r=Date.now(),o=i-this.startPoint.clientX,a=n-this.startPoint.clientX,l=r-this.tStampStart;return Math.sqrt(o*o+a*a)/l},t.prototype.checkSwipe=function(e,i){var n=["scroll","offset"],r=i?["Height","Top"]:["Width","Left"];return e[n[0]+r[0]]<=e[n[1]+r[0]]||0===e[n[0]+r[1]]||e[n[1]+r[0]]+e[n[0]+r[1]]>=e[n[0]+r[0]]},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},us([E()],t.prototype,"tap",void 0),us([E()],t.prototype,"tapHold",void 0),us([E()],t.prototype,"swipe",void 0),us([E()],t.prototype,"scroll",void 0),us([m(350)],t.prototype,"tapThreshold",void 0),us([m(750)],t.prototype,"tapHoldThreshold",void 0),us([pt({},m3)],t.prototype,"swipeSettings",void 0),us([Be],t)}(hs),b3=new RegExp("\\n|\\r|\\s\\s+","g"),C3=new RegExp(/'|"/g),M3=new RegExp("if ?\\("),S3=new RegExp("else if ?\\("),zT=new RegExp("else"),w3=new RegExp("for ?\\("),RT=new RegExp("(/if|/for)"),I3=new RegExp("\\((.*)\\)",""),lm=new RegExp("^[0-9]+$","g"),O3=new RegExp("[\\w\"'.\\s+]+","g"),T3=new RegExp('"(.*?)"',"g"),D3=new RegExp("[\\w\"'@#$.\\s-+]+","g"),E3=new RegExp("\\${([^}]*)}","g"),x3=/^\..*/gm,hm=/\\/gi,P3=/\\\\/gi,j3=new RegExp("[\\w\"'@#$.\\s+]+","g"),A3=/\window\./gm;function Pa(s,t,e,i,n){return!t||lm.test(s)||-1!==i.indexOf(s.split(".")[0])||n||"true"===s||"false"===s?s:e+"."+s}function cm(s,t,e,i){return t&&!lm.test(s)&&-1===i.indexOf(s.split(".")[0])?e+'["'+s:s}function FT(s){return s.match(P3)||(s=s.replace(hm,"\\\\")),s}function HT(s,t,e,i){if(s=s.trim(),/\window\./gm.test(s))return s;var r=/'|"/gm;return/@|\$|#/gm.test(s)&&(s=cm(s,-1===e.indexOf(s),t,e)+'"]'),x3.test(s)?function k3(s,t,e,i){return!t||lm.test(s)||-1!==i.indexOf(s.split(".")[0])||/^\..*/gm.test(s)?s:e+"."+s}(s,!r.test(s)&&-1===e.indexOf(s),t,e):Pa(s,!r.test(s)&&-1===e.indexOf(s),t,e,i)}var z3=/^[\n\r.]+<tr|^<tr/,R3=/^[\n\r.]+<svg|^<path|^<g/,zs={};function vt(s,t,e){var i=pm.compile(s,t,e);return function(n,r,o,a,l,h,c,u){var d=i(n,r,o,c,u),f="BlazorTemplateId";if(z()&&!l){var g=a+function BT(){return"-"+Math.random().toString(36).substr(2,5)}();if(zs[""+a]||(zs[""+a]=[]),p(h))n[""+f]=g,zs[""+a].push(n);else for(var M=0,w=Object.keys(zs[""+a][parseInt(h.toString(),10)]);M<w.length;M++){var S=w[M];S!==f&&n[""+S]&&(zs[""+a][parseInt(h.toString(),10)][""+S]=n[""+S]),S===f&&(g=zs[""+a][parseInt(h.toString(),10)][""+S])}return"rowTemplate"===o?[lt("tr",{id:g,className:"e-blazor-template"})]:[lt("div",{id:g,className:"e-blazor-template"})]}return"string"==typeof d?R3.test(d)?lt("svg",{innerHTML:d}).childNodes:lt(z3.test(d)?"table":"div",{innerHTML:d}).childNodes:d}}function um(s,t){var e;return s.prototype.CSPTemplate=!0,p(t)?e=s:(e=s.bind(t)).prototype=Object.create(s.prototype),e}var B3=function(){function s(){}return s.prototype.compile=function(t,e,i){return void 0===e&&(e={}),function L3(s,t,e){if("function"==typeof s)return s;var i="data",n=function N3(s,t,e,i){var n=0,r=[],o=s.match(/class="([^"]+|)\s{2}/g),a="";return o&&o.forEach(function(l){a=l.replace(/\s\s+/g," "),s=s.replace(l,a)}),s.replace(b3,"").replace(T3,"'$1'").replace(E3,function(l,h,c,u){var f=h.match(I3);if(f){var v=f[1];if(S3.test(h))h='";} '+h.replace(f[1],v.replace(O3,function(H){return Pa(H=H.trim(),!C3.test(H)&&-1===r.indexOf(H),t,r,i)}))+'{ \n str = str + "';else if(M3.test(h))h='"; '+h.replace(f[1],v.replace(D3,function(H){return HT(H,t,r,i)}))+'{ \n str = str + "';else if(w3.test(h)){var g=f[1].split(" of ");h='"; '+h.replace(f[1],function(H){return r.push(g[0]),r.push(g[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+Pa(g[1],!0,t,r,i)+".length; i"+n+"++"})+"{ \n "+g[0]+"= "+Pa(g[1],!0,t,r,i)+"[i"+n+"]; \n var "+g[0]+"Index=i"+n+'; \n str = str + "'}else{var b=h.split("("),M=e&&e.hasOwnProperty(b[0])?"this.":"global";M=/\./.test(b[0])?"":M;var w=f[1].split(",");0!==f[1].length&&!/data/.test(w[0])&&!/window./.test(w[0])&&(f[1]="global"===M?t+"."+f[1]:f[1]),A3.test(h)&&/\]\./gm.test(h)||/@|\$|#/gm.test(h)?/@|\$|#|\]\./gm.test(h)&&(h='"+ '+("global"===M?"":M)+h.replace(f[1],v.replace(j3,function(H){return HT(H,t,r,i)}))+'+ "'):h='" + '+("global"===M?"":M)+h.replace(v,Pa(f[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==M,t,r,i))+'+"'}}else zT.test(h)?h='"; '+h.replace(zT,'} else { \n str = str + "'):h.match(RT)?h=h.replace(RT,'"; \n } \n str = str + "'):/@|#|\$/gm.test(h)?(h.match(hm)&&(h=FT(h)),h='"+'+cm(h,-1===r.indexOf(h),t,r)+'"]+"'):h=h.match(hm)?'"+'+cm(h=FT(h),-1===r.indexOf(h),t,r)+'"]+"':""!==h?'"+'+Pa(h.replace(/,/gi,"+"+t+"."),-1===r.indexOf(h),t,r,i)+'+"':" ";return h})}(s,i,t,e);return new Function(i,'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n        var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n        if(str.match(valueRegEx)){\n            var check = str.match(valueRegEx);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(valueRegEx)[i].split('value=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n        else if (str.match(/(?:href='')/) === null) {\n            if(str.match(hrefRegex)) {\n                var check = str.match(hrefRegex);\n                var str1 = str;\n                for (var i=0; i < check.length; i++) {\n                    var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                    if (check1) {\n                        var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                        change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                        str1 = str1.replace(check1, change);\n                    }\n                }\n                str = str.replace(str, str1);\n            }\n        }\n         return str;").bind(t)}(t,e)},s}(),pm={compile:(new B3).compile},_3=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Y3=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],_T=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","oncanplay","oncanplaythrough","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeypress","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onstart","onpropertychange","oncopy","ontoggle","onpointerout","onpointermove","onpointerleave","onpointerenter","onpointerrawupdate","onpointerover","onbeforecopy","onbeforecut","onbeforeinput"],Tt=function(){function s(){}return s.beforeSanitize=function(){return{selectors:{tags:_3,attributes:Y3}}},s.sanitize=function(t){var e=this.beforeSanitize();return this.serializeValue(e,t)},s.serializeValue=function(t,e){this.removeAttrs=t.selectors.attributes,this.removeTags=t.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=e,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},s.removeElement=function(){for(var t=this.wrapElement.children,e=0;e<t.length;e++)for(var i=t[parseInt(e.toString(),10)].attributes,n=0;n<i.length;n++)this.wrapElement.children[parseInt(e.toString(),10)].removeAttribute(i[parseInt(n.toString(),10)].localName)},s.removeXssTags=function(){var t=this.wrapElement.querySelectorAll(this.removeTags.join(","));t.length>0&&t.forEach(function(e){X(e)})},s.removeJsEvents=function(){var t=this.wrapElement.querySelectorAll("["+_T.join("],[")+"]");t.length>0&&t.forEach(function(e){_T.forEach(function(i){e.hasAttribute(i)&&e.removeAttribute(i)})})},s.removeXssAttrs=function(){var t=this;this.removeAttrs.forEach(function(e,i){var n=t.wrapElement.querySelectorAll(e.selector);n.length>0&&n.forEach(function(r){r.removeAttribute(e.attribute)})})},s}();function V3(s){return function(t){!function U3(s,t){t.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){(!s.prototype.hasOwnProperty(i)||e.isFormBase&&"constructor"!==i)&&(s.prototype[i]=e.prototype[i])})})}(t,s)}}function YT(s,t,e){var i={};if(s&&s.length){for(var n=0,r=s;n<r.length;n++){var o=r[n];!0===e?(t.propCollection[o]=new _n(!1),t[o]=t.propCollection[o]):i[o]=new _n(!1)}!0!==e&&t.setProperties(i,!0)}}function UT(s,t,e){var i=Object.keys(s.registeredTemplate);if(i.length)for(var n=t&&t.filter(function(I){return!/\./g.test(I)}),r="tab"===s.getModuleName(),o=0,a=n&&n||i;o<a.length;o++){var l=a[o];if(e&&e.length)for(var h=0;h<e.length;h++)if(r)for(var c=0;c<s.registeredTemplate[l].length;c++)(u=s.registeredTemplate[l][c])&&u===e[h]&&(u.destroy(),s.registeredTemplate[l].splice(c,1));else for(c=0;c<s.registeredTemplate.template.length;c++){var u;(u=s.registeredTemplate.template[c].rootNodes[0])===e[h]&&(d=s.registeredTemplate[l])[c].destroy()}else if(s.registeredTemplate[l])for(var f=0,v=s.registeredTemplate[l];f<v.length;f++){var d;if(!(d=v[f]).destroyed){if(d._view){var g=d._view.renderer.parentNode(d.rootNodes[0]);if(!p(g))for(c=0;c<d.rootNodes.length;c++)g.appendChild(d.rootNodes[c])}d.destroy()}}(!r||!e)&&delete s.registeredTemplate[l]}for(var b=function(I){I.instance&&I.instance.clearTemplate(t&&t.filter(function(P){return!!new RegExp(I.name).test(P)}))},M=0,w=s.tagObjects;M<w.length;M++)b(w[M])}var X3=/Ref$/,VT=(function(){function s(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}s.prototype.ngOnInit=function(){this.registeredTemplate={};for(var t=0,e=this.tags;t<e.length;t++){var i=e[t],n=j("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);n&&this.tagObjects.push({instance:n,name:i})}for(var r=Object.keys(this),o=0;o<r.length;o++){var a=j(r[o],this);"object"==typeof a&&a&&a.elementRef&&(j(-1!==r[o].indexOf("Ref")?r[o]:r[o]+"Ref",this)||Oe(-1!==r[o].indexOf("Ref")?r[o]:r[o]+"Ref",a,this),j("viewContainerRef",this)&&!j("_viewContainerRef",a.elementRef.nativeElement)&&!j("propName",a.elementRef.nativeElement)&&(Oe("_viewContainerRef",j("viewContainerRef",this),a.elementRef.nativeElement),Oe("propName",r[o].replace("Ref",""),a.elementRef.nativeElement)))}for(var l=0,h=r=(r=Object.keys(this)).filter(function(g){return/Ref$/i.test(g)});l<h.length;l++){var u=h[l].replace("Ref","");Oe(u.replace("_","."),j(u,this),this.propCollection)}var d=Object.keys(this);if(this.directivePropList){for(var f=0;f<this.directivePropList.length;f++){var v=this.directivePropList[f];-1!==d.indexOf(v)&&(!1===j(v,this)||j(v,this))&&Oe(v,j(v,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},s.prototype.registerEvents=function(t){YT(t,this,!0)},s.prototype.ngOnChanges=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];this.propCollection[n]=t[n].currentValue}this.isUpdated=!1,this.hasChanges=!0},s.prototype.clearTemplate=function(t){UT(this,t)},s.prototype.getProperties=function(){for(var t=0,e=this.tagObjects;t<e.length;t++){var i=e[t];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},s.prototype.isChanged=function(){var t=this.hasChanges;if(!p(this.propCollection[this.property]))for(var i=Object.keys(this.propCollection[this.property][0]),n=0;n<i.length;n++)if(!p(this.propCollection[i[n]])){var r=j(i[n],this),o=this.propCollection[this.property][0][i[n]];!p(r)&&this.propCollection[i[n]]!==r&&o!==r&&(Oe(i[n],r,this.propCollection[this.property][0]),Oe(i[n],r,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var a=0,l=this.tagObjects;a<l.length;a++)t=t||l[a].instance.hasChanges;return t||this.hasChanges},s.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var t=Object.keys(this),e=0,i=t=t.filter(function(o){return X3.test(o)});e<i.length;e++){var r=i[e].replace("Ref","");Oe(r.replace("_","."),j(r,this),this.propCollection)}},s.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},s.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},s.prototype.ngOnDestroy=function(){this.directivePropList=[]}}(),function(){function s(t){this.list=[],this.hasChanges=!1,this.propertyName=t}s.prototype.ngOnInit=function(){this.isInitChanges=!0},s.prototype.ngAfterContentInit=function(){var t=this,e=0;this.list=this.children.map(function(i){return i.dirIndex=e++,i.property=t.propertyName,i}),this.hasChanges=!0},s.prototype.getProperties=function(){for(var t=[],e=0,i=this.list;e<i.length;e++)t.push(i[e].getProperties());return t},s.prototype.isChanged=function(){var t=this,e=!1,i=0,n=!1,r=this.children.map(function(c){return c});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&(this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),n=JSON.stringify(this.list[o].propCollection.dataSource)!==JSON.stringify(r[o].propCollection.dataSource)),n=this.list[o].hasChanges!==r[o].hasChanges;this.hasNewChildren=!(this.list.length===this.children.length&&!n)||null,this.hasNewChildren&&(this.list=this.children.map(function(c){return c.dirIndex=i++,c.property=t.propertyName,c}));for(var a=0,l=this.list;a<l.length;a++)e=e||l[a].hasChanges;return!!this.list.length&&e},s.prototype.clearTemplate=function(t){for(var e=this,i=0,n=this.list;i<n.length;i++)n[i].clearTemplate(t&&t.map(function(o){return new RegExp(e.propertyName).test(o)?o.replace(e.propertyName+".",""):o}))},s.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var t=0;t<this.list.length;t++)j("childColumns",this.list[t])&&"columns"===j("property",this.list[t])&&Oe("columns",j("childColumns",this.list[t]).getProperties(),this.list[t].propCollection),this.list[t].isUpdated=!0},s.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},s.prototype.ngOnDestroy=function(){this.list=[]}}(),function(){function s(){this.isProtectedOnChange=!0,this.isFormInit=!0}return s.prototype.saveChanges=function(t,e,i){if(!this.isProtectedOnChange){this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate();var n=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(n)}}},s.prototype.ngOnInit=function(t){var e=t||this;e.registeredTemplate={},e.ngBoundedEvents={},e.isAngular=!0,e.isFormInit=!0,t&&(this.tags=t.tags),e.tags=this.tags||[],e.complexTemplate=this.complexTemplate||[],e.tagObjects=[],e.ngAttr=this.getAngularAttr(e.element),e.createElement=function(g,b){var M=e.srenderer?e.srenderer.createElement(g):lt(g);return typeof b>"u"||(M.innerHTML=b.innerHTML?b.innerHTML:"",void 0!==b.className&&(M.className=b.className),void 0!==b.id&&(M.id=b.id),void 0!==b.styles&&M.setAttribute("style",b.styles),void 0!==e.ngAttr&&M.setAttribute(e.ngAttr,""),void 0!==b.attrs&&re(M,b.attrs)),M};for(var i=0,n=e.tags;i<n.length;i++){var r=n[i],o={instance:j("child"+r.substring(0,1).toUpperCase()+r.substring(1),e),name:r};e.tagObjects.push(o)}for(var a=Object.keys(e),l=0;l<a.length;l++){var h=j(a[l],e);"object"==typeof h&&h&&h.elementRef&&("object"==typeof h&&h&&h.elementRef&&-1!==a[l].indexOf("_")&&-1===a[l].indexOf("Ref")&&Oe(a[l]+"Ref",h,e),e.viewContainerRef&&!j("_viewContainerRef",h.elementRef.nativeElement)&&!j("propName",h.elementRef.nativeElement)&&(Oe("_viewContainerRef",e.viewContainerRef,h.elementRef.nativeElement),Oe("propName",a[l].replace("Ref",""),h.elementRef.nativeElement)))}for(var c=0,u=a=(a=Object.keys(e)).filter(function(g){return/Ref$/i.test(g)&&/\_/i.test(g)});c<u.length;c++){var f=u[c].replace("Ref",""),v={};Oe(f.replace("_","."),j(f,e),v),e.setProperties(v,!0)}},s.prototype.getAngularAttr=function(t){for(var n,e=t.attributes,i=e.length,r=0;r<i;r++)/_ngcontent/g.test(e[r].name)&&(n=e[r].name);return n},s.prototype.ngAfterViewInit=function(t){var e=t||this;/ejs-tab|ejs-accordion/g.test(e.ngEle.nativeElement.outerHTML)&&(e.ngEle.nativeElement.style.visibility="hidden");var n=Object.keys(e);n=n.filter(function(u){return/Ref$/i.test(u)});for(var r="DocumentEditor"===e.getModuleName(),o=0,a=n;o<a.length;o++){var h=a[o].replace("Ref","");Oe(h.replace("_","."),j(h+"Ref",e),e)}var c=function(u){(typeof window<"u"&&u.element||u.getModuleName().includes("btn"))&&(u.appendTo(u.element),u.ngEle.nativeElement.style.visibility="")};r?c(e):setTimeout(function(){c(e)})},s.prototype.ngOnDestroy=function(t){var e=t||this;setTimeout(function(){typeof window<"u"&&e.element.classList.contains("e-control")&&(e.destroy(),e.clearTemplate(null),setTimeout(function(){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i],o=e[r];if(o&&/object/.test(typeof o)&&0!==Object.keys(o).length)if(/properties|changedProperties|childChangedProperties|oldProperties|moduleLoader/.test(r))for(var a=0,l=Object.keys(e[r]);a<l.length;a++){var h=l[a],c=o[h];c&&/object/.test(typeof c)&&0!==Object.keys(c).length&&(c.parent||c.parentObj)&&(e[r][h]=null)}else(o.parent||o.parentObj)&&(e[r]=null)}}))})},s.prototype.clearTemplate=function(t,e){UT(this,t,e)},s.prototype.ngAfterContentChecked=function(t){for(var e=t||this,i=0,n=e.tagObjects;i<n.length;i++){var r=n[i];if(!ve(r.instance)&&(r.instance.isInitChanges||r.instance.hasChanges||r.instance.hasNewChildren))if(r.instance.isInitChanges){var o={},a=void 0;(l=j("instance.list",r))&&l.length&&(a=l[0].directivePropList);var h=!0;if(e.getModuleName&&"gantt"===e.getModuleName()&&(h=!1),a&&h&&-1===a.indexOf(r.instance.propertyName))for(var c=Object.keys(r.instance.list[0].propCollection),u=0;u<r.instance.list.length;u++){r.instance.list[u].propCollection[r.instance.propertyName]=[];for(var d={},f=0;f<c.length;f++)d[v=c[f]]=r.instance.list[u].propCollection[v];for(var g=function(ee){var ue=r.instance.list[u].tags[ee],Je=j("child"+ue.substring(0,1).toUpperCase()+ue.substring(1),r.instance.list[u]);if(Je){var U=r.instance.list[u]["child"+ue.substring(0,1).toUpperCase()+ue.substring(1)],$=function(q){var R=[];if(q)for(var _=0;_<q.list.length;_++){var W=q.list[0].tags[0];if(W){var k=j("child"+W.substring(0,1).toUpperCase()+W.substring(1),q.list[_]);k&&(q.list[_].tagObjects.push({instance:k,name:W}),R.push(k))}}if(0!==R.length)for(var B=0;B<R.length;B++)$(R[B])};$(U),r.instance.list[u].tagObjects.push({instance:Je,name:ue})}},b=0;b<r.instance.list[u].tags.length;b++)g(b);r.instance.list[u].propCollection[r.instance.propertyName].push(d)}o[r.name]=r.instance.getProperties(),e.setProperties(o,r.instance.isInitChanges)}else{(e[r.name].length!==r.instance.list.length||/diagram|tab|DashboardLayout/.test(e.getModuleName()))&&(e[r.name]=r.instance.list);for(var M=0,w=r.instance.list;M<w.length;M++){var l,S=r.instance.list.indexOf(l=w[M]),I=j(r.name,e)[S],P=Object.keys(I);if(P=P.filter(function(ue){return/Ref$/i.test(ue)}),I.properties&&0!==Object.keys(I.properties).length)for(var H=0,G=P;H<G.length;H++){var v;v=(v=G[H]).replace(/Ref/,""),I.properties[v]=I.properties[v]?I.properties[v]:I.propCollection[v]}!ve(I)&&!ve(I.setProperties)&&(/diagram|DashboardLayout/.test(e.getModuleName())?I.setProperties(l.getProperties(),!0):I.setProperties(l.getProperties())),l.isUpdated=!0}}}},s.prototype.registerEvents=function(t){YT(t,this)},s.prototype.twoWaySetter=function(t,e){var i=j(e,this.properties);i!==t&&(this.saveChanges(e,t,i),Oe(e,p(t)?null:t,this.properties),j(e+"Change",this).emit(t))},s.prototype.addTwoWay=function(t){for(var e=this,i=function(l){j(l,n),Object.defineProperty(n,l,{get:function(){return j(l,e.properties)},set:function(h){return e.twoWaySetter(h,l)}}),Oe(l+"Change",new _n,n)},n=this,r=0,o=t;r<o.length;r++)i(o[r])},s.prototype.addEventListener=function(t,e){var i=j(t,this);ve(i)||(this.ngBoundedEvents[t]||(this.ngBoundedEvents[t]=new Map),this.ngBoundedEvents[t].set(e,i.subscribe(e)))},s.prototype.removeEventListener=function(t,e){ve(j(t,this))||this.ngBoundedEvents[t].get(e).unsubscribe()},s.prototype.trigger=function(t,e,i){var n=j(t,this),r=this.isProtectedOnChange;this.isProtectedOnChange=!1,e&&(e.name=t),ve(n)||n.next(e);var o=j("local"+t.charAt(0).toUpperCase()+t.slice(1),this);ve(o)||o.call(this,e),this.isProtectedOnChange=r,i&&(this.preventChange=this.isPreventChange,i.call(this,e)),this.isPreventChange=!1},s}()),q3=(function(){function s(){}s.prototype.propagateChange=function(t){},s.prototype.propagateTouch=function(){},s.prototype.localChange=function(t){var e=void 0===t.checked?t.value:t.checked;this.objCheck=fr(e),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(e),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)):e!==this.angularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)},s.prototype.registerOnChange=function(t){this.propagateChange=t},s.prototype.registerOnTouched=function(t){this.propagateTouch=t},s.prototype.twoWaySetter=function(t,e){var i=this.oldValue||j(e,this.properties),n=this.inputElement||this.element;n&&i===t&&this.value===t&&(void 0===n.value||""===n.value)||(this.saveChanges(e,t,i),Oe(e,p(t)?null:t,this.properties),j(e+"Change",this).emit(t))},s.prototype.ngAfterViewInit=function(t){var e=t||this;if(typeof window<"u"){e.appendTo(e.element);var i=e.inputElement||e.element;i.addEventListener("focus",e.ngOnFocus.bind(e)),i.addEventListener("blur",e.ngOnBlur.bind(e))}this.isFormInit=!1},s.prototype.setDisabledState=function(t){this.enabled=!t,this.disabled=t},s.prototype.writeValue=function(t){void 0===this.checked?this.value=t:this.ngEle&&(this.checked="boolean"==typeof t?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?t===this.value:t:t===this.value),this.angularValue=t,this.isUpdated=!0,this.preventChange=!this.isFormInit},s.prototype.ngOnFocus=function(t){!0!==this.skipFromEvent&&this.focus.emit(t)},s.prototype.ngOnBlur=function(t){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(t)},s.isFormBase=!0}(),function H3(){return pm.compile}());function $3(s){return function(t,e){var i={set:G3(e),get:Z3(e,s),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i)}}function G3(s){return function(t){void 0!==t&&(Oe(s+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=s):this.saveChanges&&(this.saveChanges(s,t,void 0),this.dataBind()))}}function Z3(s,t){return function(){return j(s+"Ref",this)||t}}function K3(s){for(var t,e=s.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}!function F3(s){pm.compile=s.compile}({compile:function Q3(s,t){if("string"==typeof s||"function"==typeof s&&s.prototype&&s.prototype.CSPTemplate)return q3(s,t);var e=s.elementRef.nativeElement._viewContainerRef,i=s.elementRef.nativeElement.propName;return function(n,r,o){var l=e||r.viewContainerRef,h=l.createEmbeddedView(s,{$implicit:n});"EJS-MENTION"===j("currentInstance.element.nodeName",l)?h.detectChanges():h.markForCheck();var c=r&&r.registeredTemplate?r.registeredTemplate:j("currentInstance.registeredTemplate",l);return typeof c[o=o&&r.registeredTemplate?o:i]>"u"&&(c[o]=[]),c[o].push(h),h.rootNodes}}});var _r,Mo,fh,vh,So,An,t5=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vr=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Xn_RTL=(new ih,"e-rtl"),Zi=function(s){function t(e,i){return s.call(this,e,i)||this}return t5(t,s),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=zi(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&D([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),!z()||z()&&"progress-btn"!==this.getModuleName()){if(this.content){var e=this.enableHtmlSanitizer?Tt.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss()}this.enableRtl&&this.element.classList.add(Xn_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&y.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&y.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",Xn_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),s.prototype.destroy.call(this),N([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&X(i),this.unWireEvents(),Wn&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),r=0,o=Object.keys(e);r<o.length;r++)switch(o[r]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):X(n):this.setIconCss();break;case"iconPosition":N([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&X(n),this.setIconCss();break;case"cssClass":i.cssClass&&N([this.element],i.cssClass.split(" ")),e.cssClass&&D([this.element],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Xn_RTL):this.element.classList.remove(Xn_RTL);break;case"content":K3(this.element)||this.element.classList.remove("e-icon-btn"),(!z()||z()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(e.content=Tt.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss());break;case"isToggle":e.isToggle?y.add(this.element,"click",this.btnClickHandler,this):(y.remove(this.element,"click",this.btnClickHandler),N([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},vr([m("Left")],t.prototype,"iconPosition",void 0),vr([m("")],t.prototype,"iconCss",void 0),vr([m(!1)],t.prototype,"disabled",void 0),vr([m(!1)],t.prototype,"isPrimary",void 0),vr([m("")],t.prototype,"cssClass",void 0),vr([m("")],t.prototype,"content",void 0),vr([m(!1)],t.prototype,"isToggle",void 0),vr([m()],t.prototype,"locale",void 0),vr([m(!1)],t.prototype,"enableHtmlSanitizer",void 0),vr([E()],t.prototype,"created",void 0),vr([Be],t)}(Mt),Xm=!1;function Ei(s,t,e,i,n){return Mo=void 0,Mo=n,Xm=!!i,s?(t||(t="left"),e||(e="top"),vh=s.ownerDocument,fh=s,function S5(s,t,e){switch(_r=fh.getBoundingClientRect(),t+s){case"topcenter":ps(Gm(),e),ds(tp(),e);break;case"topright":ps($m(),e),ds(tp(),e);break;case"centercenter":ps(Gm(),e),ds(Qm(),e);break;case"centerright":ps($m(),e),ds(Qm(),e);break;case"centerleft":ps(ip(),e),ds(Qm(),e);break;case"bottomcenter":ps(Gm(),e),ds(qm(),e);break;case"bottomright":ps($m(),e),ds(qm(),e);break;case"bottomleft":ps(ip(),e),ds(qm(),e);break;default:ps(ip(),e),ds(tp(),e)}return fh=null,e}(t.toLowerCase(),e.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function ps(s,t){t.left=s}function ds(s,t){t.top=s}function bD(){return vh.documentElement.scrollTop||vh.body.scrollTop}function CD(){return vh.documentElement.scrollLeft||vh.body.scrollLeft}function qm(){return Xm?_r.bottom:_r.bottom+bD()}function Qm(){return tp()+_r.height/2}function tp(){return Xm?_r.top:_r.top+bD()}function ip(){return _r.left+CD()}function $m(){var s=fh&&fh.classList.contains("e-date-range-wrapper")?Mo?Mo.width:0:Mo&&_r.width>=Mo.width?Mo.width:0;return _r.right+CD()-s}function Gm(){return ip()+_r.width/2}function Zm(s,t,e,i){if(void 0===t&&(t=null),void 0===e&&(e={X:!1,Y:!1}),!e.Y&&!e.X)return{left:0,top:0};var n=s.getBoundingClientRect();if(An=t,So=s.ownerDocument,i||(i=Ei(s,"left","top")),e.X){var r=An?OD():PD(),o=ey(),a=ty(),l=o-i.left,h=i.left+n.width-a;n.width>r?i.left=l>0&&h<=0?a-n.width:h>0&&l<=0?o:l>h?a-n.width:o:l>0?i.left+=l:h>0&&(i.left-=h)}if(e.Y){var c=An?TD():xD(),u=Jm(),d=iy(),f=u-i.top,v=i.top+n.height-d;n.height>c?i.top=f>0&&v<=0?d-n.height:v>0&&f<=0?u:f>v?d-n.height:u:f>0?i.top+=f:v>0&&(i.top-=v)}return i}function wo(s,t,e,i){void 0===t&&(t=null);var n=Ei(s,"left","top");e&&(n.left=e),i&&(n.top=i);var r=[];An=t,So=s.ownerDocument;var o=s.getBoundingClientRect(),l=n.left,h=n.left+o.width,u=ID(n.top,n.top+o.height),d=MD(l,h);return u.topSide&&r.push("top"),d.rightSide&&r.push("right"),d.leftSide&&r.push("left"),u.bottomSide&&r.push("bottom"),r}function w5(s,t,e,i,n,r,o,a,l){if(void 0===o&&(o=null),void 0===a&&(a={X:!0,Y:!0}),t&&s&&n&&r&&(a.X||a.Y)){var u,h={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(s).display){var d=s.style.visibility;s.style.visibility="hidden",s.style.display="block",u=s.getBoundingClientRect(),s.style.removeProperty("display"),s.style.visibility=d}else u=s.getBoundingClientRect();var f={posX:n,posY:r,offsetX:e,offsetY:i,position:{left:0,top:0}};An=o,So=t.ownerDocument,function O5(s,t,e,i,n){e.position=Ei(s,e.posX,e.posY,i,n),t.TL=Ei(s,"left","top",i,n),t.TR=Ei(s,"right","top",i,n),t.BR=Ei(s,"left","bottom",i,n),t.BL=Ei(s,"right","bottom",i,n)}(t,h,f,l,u),Km(c,f,u),a.X&&SD(t,c,h,f,u,!0),a.Y&&h.TL.top>-1&&wD(t,c,h,f,u,!0),function I5(s,t,e){var i=0,n=0;if(null!=s.offsetParent&&("absolute"===getComputedStyle(s.offsetParent).position||"relative"===getComputedStyle(s.offsetParent).position)){var r=Ei(s.offsetParent,"left","top",!1,e);i=r.left,n=r.top}s.style.top=t.position.top+t.offsetY-n+"px",s.style.left=t.position.left+t.offsetX-i+"px"}(s,f,u)}}function Km(s,t,e){s.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},s.TR={top:s.TL.top,left:s.TL.left+e.width},s.BL={top:s.TL.top+e.height,left:s.TL.left},s.BR={top:s.TL.top+e.height,left:s.TL.left+e.width}}function MD(s,t){var e=!1,i=!1;return s-rp()<ey()&&(e=!0),t>ty()&&(i=!0),{leftSide:e,rightSide:i}}function SD(s,t,e,i,n,r){var o=MD(t.TL.left,t.TR.left);e.TL.left-rp()<=ey()&&(o.leftSide=!1),e.TR.left>ty()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&(i.posX="right"===i.posX?"left":"right",i.offsetX=i.offsetX+n.width,i.offsetX=-1*i.offsetX,i.position=Ei(s,i.posX,i.posY,!1),Km(t,i,n),r&&SD(s,t,e,i,n,!1))}function wD(s,t,e,i,n,r){var o=ID(t.TL.top,t.BL.top);e.TL.top-np()<=Jm()&&(o.topSide=!1),e.BL.top>=iy()&&s.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&(i.posY="top"===i.posY?"bottom":"top",i.offsetY=i.offsetY+n.height,i.offsetY=-1*i.offsetY,i.position=Ei(s,i.posX,i.posY,!1,n),Km(t,i,n),r&&wD(s,t,e,i,n,!1))}function ID(s,t){var e=!1,i=!1;return s-np()<Jm()&&(e=!0),t>iy()&&(i=!0),{topSide:e,bottomSide:i}}function OD(){return An.getBoundingClientRect().width}function TD(){return An.getBoundingClientRect().height}function DD(){return An.getBoundingClientRect().left}function ED(){return An.getBoundingClientRect().top}function Jm(){return An?ED():0}function ey(){return An?DD():0}function ty(){return An?rp()+DD()+OD():rp()+PD()}function iy(){return An?np()+ED()+TD():np()+xD()}function np(){return So.documentElement.scrollTop||So.body.scrollTop}function rp(){return So.documentElement.scrollLeft||So.body.scrollLeft}function xD(){return window.innerHeight}function PD(){var s=window.innerWidth,t=document.documentElement.getBoundingClientRect();return s-(s-(p(document.documentElement)?0:t.width))}var jD=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ui=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},AD=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return jD(t,s),ui([m("left")],t.prototype,"X",void 0),ui([m("top")],t.prototype,"Y",void 0),t}(Ze),Ii_OPEN="e-popup-open",Ii_CLOSE="e-popup-close",Rs=function(s){function t(e,i){return s.call(this,i,e)||this}return jD(t,s),t.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"width":ie(this.element,{width:te(e.width)});break;case"height":ie(this.element,{height:te(e.height)});break;case"zIndex":ie(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var a=e.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+a).toString()+"px";break;case"offsetY":var l=e.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove("e-popup","e-rtl",Ii_OPEN,Ii_CLOSE),this.content=null,this.relateTo=null,s.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=te(this.width)),"auto"!==this.height&&(e.height=te(this.height)),ie(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){O.isDevice&&y.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)y.add(i[e],"scroll",this.scrollRefresh,this)},t.prototype.unwireEvents=function(){O.isDevice&&y.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)y.remove(i[e],"scroll",this.scrollRefresh)},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||p(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?!p(this.element)&&!(this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),e.target);i||this.targetInvisibleStatus?i&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,i){for(var n=this.getScrollableParent(e),r=0;r<n.length;r++)if(!this.isElementVisible(e,n[r]))return!1;return!0},t.prototype.isElementVisible=function(e,i){var n=this.checkGetBoundingClientRect(e);if(!n.height||!n.width)return!1;if(p(this.checkGetBoundingClientRect(i))){var o=window,a={top:o.scrollY,left:o.scrollX,right:o.scrollX+o.outerWidth,bottom:o.scrollY+o.outerHeight},l=Ei(e),h={top:l.top,left:l.left,right:l.left+n.width,bottom:l.top+n.height},c={top:a.bottom-h.top,left:a.right-h.left,bottom:h.bottom-a.top,right:h.right-a.left};return c.top>0&&c.left>0&&c.right>0&&c.bottom>0}var r=i.getBoundingClientRect();return!(n.bottom<r.top||n.bottom>r.bottom||n.right>r.right||n.left<r.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.setContent=function(){if(!p(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),i=this.content.props;(!e.classList.contains("e-dropdown-btn")||p(i))&&this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,i){p(e)||this.checkFixedParent(e),this.reposition(),i||this.checkCollision()},t.prototype.reposition=function(){var e,i,n=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var r=void 0,o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else if(n){var a=this.element.clientHeight;o=this.element.style.display,this.element.style.display="block",e=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY,a),this.element.style.display=o}else e={left:0,top:0};p(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch{return null}},t.prototype.getAnchorPosition=function(e,i,n,r,o,a){void 0===a&&(a=0);var l=this.checkGetBoundingClientRect(i),h=this.checkGetBoundingClientRect(e);if(p(l)||p(h))return null;var c=e,u={left:0,top:0};switch(i.offsetParent&&"BODY"===i.offsetParent.tagName&&"BODY"===e.tagName?u=Ei(e):(i.classList.contains("e-dlg-modal")&&"BODY"!==c.tagName&&(i=i.parentElement),u=function M5(s,t){var e=!1,i={left:0,top:0},n=s;if(!s||!t)return i;for(p(t.offsetParent)&&"fixed"===t.style.position&&(e=!0);(t.offsetParent||e)&&s&&t.offsetParent!==s;)i.left+=s.offsetLeft,i.top+=s.offsetTop,s=s.offsetParent;for(s=n;(t.offsetParent||e)&&s&&t.offsetParent!==s;)i.left-=s.scrollLeft,i.top-=s.scrollTop,s=s.parentElement;return i}(c,i)),n.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===c.tagName&&"container"===this.targetType?u.left+=window.innerWidth/2-l.width/2:u.left+="container"===this.targetType?h.width/2-l.width/2:h.width/2;break;case"right":i.classList.contains("e-dlg-modal")&&"BODY"===c.tagName&&"container"===this.targetType?u.left+=window.innerWidth-l.width:u.left+="container"===this.targetType?h.width-l.width:h.width}switch(n.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===c.tagName&&"container"===this.targetType?u.top+=window.innerHeight/2-l.height/2:u.top+="container"===this.targetType?h.height/2-l.height/2:h.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&"BODY"===c.tagName&&"container"===this.targetType?u.top+=window.innerHeight-l.height:"container"!==this.targetType||i.classList.contains("e-dialog")?"container"===this.targetType&&i.classList.contains("e-dialog")?u.top+=h.height-a:u.top+=h.height:u.top+=h.height-l.height}return u.left+=r,u.top+=o,u},t.prototype.callFlip=function(e){var i=this.getRelateToElement();w5(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==wo(this.element,this.viewPortElement).length)if(p(this.viewPortElement)){var i=Zm(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=i.left+"px"),e.Y&&(this.element.style.top=i.top+"px")}else{var n=this.checkGetBoundingClientRect(this.element),r=this.checkGetBoundingClientRect(this.viewPortElement);if(p(n)||p(r))return null;e&&!0===e.Y&&(r.top>n.top?this.element.style.top="0px":r.bottom<n.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(n.bottom-r.bottom)+"px")),e&&!0===e.X&&(r.right<n.right?this.element.style.left=parseInt(this.element.style.left,10)-(n.right-r.right)+"px":r.left>n.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(r.left-n.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,i=this.collision.Y;"none"===e&&"none"===i||("flip"===e&&"flip"===i?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===i?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===i&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===i&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,i){var n=this;if(this.getRelateToElement().classList.contains("e-filemanager")&&(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0]),this.wireEvents(),!p(this.fmDialogContainer)&&O.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!p(i)){var o=p(i)?this.element:i;this.zIndex=Io(o),ie(this.element,{zIndex:this.zIndex})}e=p(e)||"object"!=typeof e?this.showAnimation:e,("none"!==this.collision.X||"none"!==this.collision.Y)&&(N([this.element],Ii_CLOSE),D([this.element],Ii_OPEN),this.checkCollision(),N([this.element],Ii_OPEN),D([this.element],Ii_CLOSE)),p(e)?(N([this.element],Ii_CLOSE),D([this.element],Ii_OPEN),this.trigger("open")):(e.begin=function(){n.isDestroyed||(N([n.element],Ii_CLOSE),D([n.element],Ii_OPEN))},e.end=function(){n.isDestroyed||n.trigger("open")},new $i(e).animate(this.element))},t.prototype.hide=function(e){var i=this;e=p(e)||"object"!=typeof e?this.hideAnimation:e,p(e)?(N([this.element],Ii_OPEN),D([this.element],Ii_CLOSE),this.trigger("close")):(e.end=function(){i.isDestroyed||(N([i.element],Ii_OPEN),D([i.element],Ii_CLOSE),i.trigger("close"))},new $i(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),function ny(s,t){for(var e=getComputedStyle(s),i=[],n=/(auto|scroll)/,r=s.parentElement;r&&"HTML"!==r.tagName;){var o=getComputedStyle(r);!("absolute"===e.position&&"static"===o.position)&&n.test(o.overflow+o.overflowY+o.overflowX)&&i.push(r),r=r.parentElement}return t||i.push(document),i}(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var i=e.parentElement;i&&"HTML"!==i.tagName;){var n=getComputedStyle(i);"fixed"===n.position&&!p(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&"hidden"!==getComputedStyle(this.element.offsetParent).overflow&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?te(window.scrollY-parseInt(this.element.style.top,10)):te(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!p(this.element)&&p(this.element.offsetParent)&&"fixed"===n.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},ui([m("auto")],t.prototype,"height",void 0),ui([m("auto")],t.prototype,"width",void 0),ui([m(null)],t.prototype,"content",void 0),ui([m("container")],t.prototype,"targetType",void 0),ui([m(null)],t.prototype,"viewPortElement",void 0),ui([m({X:"none",Y:"none"})],t.prototype,"collision",void 0),ui([m("")],t.prototype,"relateTo",void 0),ui([pt({},AD)],t.prototype,"position",void 0),ui([m(0)],t.prototype,"offsetX",void 0),ui([m(0)],t.prototype,"offsetY",void 0),ui([m(1e3)],t.prototype,"zIndex",void 0),ui([m(!1)],t.prototype,"enableRtl",void 0),ui([m("reposition")],t.prototype,"actionOnScroll",void 0),ui([m(null)],t.prototype,"showAnimation",void 0),ui([m(null)],t.prototype,"hideAnimation",void 0),ui([E()],t.prototype,"open",void 0),ui([E()],t.prototype,"close",void 0),ui([E()],t.prototype,"targetExitViewport",void 0),ui([Be],t)}(Mt);function Io(s){for(var t=s.parentElement,e=[];t&&"BODY"!==t.tagName;){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==i&&"static"!==n&&e.push(i),t=t.parentElement}for(var r=[],o=0;o<document.body.children.length;o++)s.isEqualNode(document.body.children[o])||(i=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&r.push(i));r.push("999");var a=[];if(!p(s.parentElement)&&"BODY"!==s.parentElement.tagName){var l=[].slice.call(s.parentElement.children);for(o=0;o<l.length;o++)s.isEqualNode(l[o])||(i=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&a.push(i))}var h=e.concat(r,a),c=Math.max.apply(Math,h)+1;return c>2147483647?2147483647:c}var gt,Yr,ja,Hs,ay,fs,tt,Bs,ry=["north-west","north","north-east","west","east","south-west","south","south-east"],gh="e-resize-handle",Fs="e-focused-handle",T5="e-dlg-resizable",LD=["e-restrict-left"],ND="e-resize-viewport",D5=["north","west","east","south"],sy=0,oy=0,kD=0,zD=0,mh=0,yh=0,bh=null,ly=null,hy=null,sp=!0,RD=0,cy=!0;function x5(s){uy();var t=lt("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+s),"south"===s&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===s&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===s&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===s&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),gt.appendChild(t)}function FD(s){var t;return p(s)||(t="string"==typeof s?document.querySelector(s):s),t}function HD(s){p(s)&&(s=this);for(var t=gt.querySelectorAll("."+gh),e=0;e<t.length;e++)y.add(Yr=t[e],"mousedown",_D,s),y.add(Yr,"msie"===O.info.name?"pointerdown":"touchstart",YD,s);var n=gt.querySelectorAll(".e-dialog-border-resize");if(!p(n))for(e=0;e<n.length;e++)y.add(Yr=n[e],"mousedown",_D,s),y.add(Yr,"msie"===O.info.name?"pointerdown":"touchstart",YD,s)}function BD(s){return s.indexOf("mouse")>-1?"mouse":"touch"}function _D(s){if(s.preventDefault(),gt=s.target.parentElement,uy(),mh=s.pageX,yh=s.pageY,s.target.classList.add(Fs),p(bh)||!0!==bh(s,this)){this.targetEle&&gt&&gt.querySelector("."+T5)&&(tt="body"===this.target?null:this.targetEle,fs=this.targetEle.clientWidth,Hs=this.targetEle.clientHeight);var t=p(tt)?document:tt;y.add(t,"mousemove",Ch,this),y.add(document,"mouseup",op,this);for(var e=0;e<LD.length;e++)sp=!gt.classList.contains(LD[e])}}function op(s){var t="msie"===O.info.name?"pointermove":"touchmove",e="msie"===O.info.name?"pointerup":"touchend",i=p(tt)?document:tt,n="msie"===O.info.name?"pointerdown":"touchstart";y.remove(i,"mousemove",Ch),y.remove(i,t,Ch),y.remove(i,n,Ch),p(document.body.querySelector("."+Fs))||document.body.querySelector("."+Fs).classList.remove(Fs),p(hy)||hy(s,this),y.remove(document,"mouseup",op),y.remove(document,e,op)}function uy(){sy=parseFloat(getComputedStyle(gt,null).getPropertyValue("width").replace("px","")),oy=parseFloat(getComputedStyle(gt,null).getPropertyValue("height").replace("px","")),kD=gt.getBoundingClientRect().left,zD=gt.getBoundingClientRect().top}function YD(s){gt=s.target.parentElement,uy();var t=gt.classList.contains("e-dialog");(s.target.classList.contains(gh)||s.target.classList.contains("e-dialog-border-resize"))&&t&&s.target.classList.add(Fs);var e=s.touches?s.changedTouches[0]:s;if(mh=e.pageX,yh=e.pageY,p(bh)||!0!==bh(s,this)){var i="msie"===O.info.name?"pointermove":"touchmove",n="msie"===O.info.name?"pointerup":"touchend",r=p(tt)?document:tt;y.add(r,i,Ch,this),y.add(document,n,op,this)}}function Ch(s){if(s.target.classList.contains(gh)&&s.target.classList.contains(Fs)?Yr=s.target:p(document.body.querySelector("."+Fs))||(Yr=document.body.querySelector("."+Fs)),!p(Yr)){for(var t="",e=0;e<ry.length;e++)Yr.classList.contains("e-"+ry[e])&&(t=ry[e]);switch(p(ly)||ly(s,this),t){case"south":py(s);break;case"north":dy(s);break;case"west":fy(s);break;case"east":vy(s);break;case"south-east":py(s),vy(s);break;case"south-west":py(s),fy(s);break;case"north-east":dy(s),vy(s);break;case"north-west":dy(s),fy(s)}}}function Ys(s){return s.getBoundingClientRect()}function py(s){var o,t=document.documentElement.clientHeight,e=!1,n=(s.touches?s.changedTouches[0]:s).pageY,r=Ys(gt);p(tt)||(o=Ys(tt)),p(tt)?p(tt)&&(t-n>=0||r.top<0)&&(e=!0):e=!0;var a=oy+(n-yh);a=a>ja?a:ja;var l=0;p(tt)||(l=o.top);var h=p(tt)?0:tt.offsetHeight-tt.clientHeight,c=r.top-l-h/2;if(c=c<0?0:c,r.top>0&&c+a>Hs){if(e=!1,gt.classList.contains(ND))return;gt.style.height=Hs-parseInt(c.toString(),10)+"px"}else{var u=0;if(e){r.top<0&&t+(r.height+r.top)>0&&a+(u=r.top)<=30&&(a=r.height-(r.height+r.top)+30),a+r.top>=Hs&&(gt.style.height=r.height+(t-(r.height+r.top))+"px");var d=p(tt)?u:c;a>=ja&&a+d<=Hs&&(gt.style.height=a+"px")}}}function dy(s){var e,t=!1,i="mouse"===BD(s.type)?s.pageY:s.touches[0].pageY,n=Ys(gt);p(tt)||(e=Ys(tt)),(!p(tt)&&n.top-e.top>0||p(tt)&&i>0)&&(t=!0);var r=oy-(i-yh);if(t&&r>=ja&&r<=Hs){var o=0;p(tt)||(o=e.top);var a=zD-o+(i-yh);a=a>0?a:1,gt.style.height=r+"px",gt.style.top=a+"px"}}function fy(s){var i,t=document.documentElement.clientWidth,e=!1;p(tt)||(i=Ys(tt));var n="mouse"===BD(s.type)?s.pageX:s.touches[0].pageX,r=Ys(gt),o=p(tt)?0:tt.offsetWidth-tt.clientWidth,a=p(tt)?0:i.left,l=p(tt)?0:i.width;p(Bs)&&(p(tt)?Bs=t:(Bs=r.left-a-o/2+r.width,Bs+=l-o-Bs)),(!p(tt)&&Math.floor(r.left-i.left+r.width+(i.right-r.right))-o<=fs||p(tt)&&n>=0)&&(e=!0);var h=sy-(n-mh);if(sp&&(h=h>Bs?Bs:h),e&&h>=ay&&h<=fs){var c=0;p(tt)||(c=i.left);var u=kD-c+(n-mh);u=u>0?u:1,h!==RD&&cy&&(gt.style.width=h+"px"),sp&&(gt.style.left=u+"px",cy=1!==u)}RD=h}function vy(s){var i,t=document.documentElement.clientWidth,e=!1;p(tt)||(i=Ys(tt));var r=(s.touches?s.changedTouches[0]:s).pageX,o=Ys(gt);(!p(tt)&&(o.left-i.left+o.width<=fs||o.right-i.left>=o.width)||p(tt)&&t-r>0)&&(e=!0);var a=sy+(r-mh),l=0;if(p(tt)||(l=i.left),o.left-l+a>fs){if(e=!1,gt.classList.contains(ND))return;gt.style.width=fs-(o.left-l)+"px"}e&&a>=ay&&a<=fs&&(gt.style.width=a+"px")}function UD(){for(var s=gt.querySelectorAll("."+gh),t=0;t<s.length;t++)X(s[t]);var e=gt.querySelectorAll(".e-dialog-border-resize");if(!p(e))for(t=0;t<e.length;t++)X(e[t])}var tE,gy=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ye=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},L5=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return gy(t,s),Ye([m(!0)],t.prototype,"isFlat",void 0),Ye([m()],t.prototype,"buttonModel",void 0),Ye([m("Button")],t.prototype,"type",void 0),Ye([E()],t.prototype,"click",void 0),t}(Ze),N5=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return gy(t,s),Ye([m("Fade")],t.prototype,"effect",void 0),Ye([m(400)],t.prototype,"duration",void 0),Ye([m(0)],t.prototype,"delay",void 0),t}(Ze),ap="e-dialog",my="e-rtl",yy="e-dlg-header-content",VD="e-dlg-header",Mh="e-footer-content",by="e-dlg-modal",WD="e-icon-dlg-close",Ur="e-dlg-target",mr="e-scroll-disabled",XD="e-device",lp="e-dlg-fullscreen",qD="e-dlg-closeicon-btn",QD="e-popup-open",$D="Information",GD="e-scroll-disabled",ZD="e-alert-dialog",KD="e-confirm-dialog",Cy="e-dlg-resizable",hp="e-restrict-left",JD="e-resize-viewport",My="user action",eE=function(s){function t(e,i){var n=s.call(this,e,i)||this;return n.needsID=!0,n}return gy(t,s),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=te(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=My},t.prototype.preRender=function(){var e=this;if(this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(r){e.dlgClosedBy="close icon",e.hide(r)},this.dlgOverlayClickEventHandler=function(r){e.dlgClosedBy="overlayClick",r.preventFocus=!1,e.trigger("overlayClick",r,function(o){o.preventFocus||e.focusContent(),e.dlgClosedBy=My})},this.l10n=new Hr("dialog",{close:"Close"},this.locale),this.checkPositionData(),p(this.target)){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=n}},t.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!p(this.position)){if(!p(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}p(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(i=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i)}},t.prototype.getEle=function(e,i){for(var n=void 0,r=0;r<e.length;r++)if(e[r].classList.contains(i)){n=e[r];break}return n},t.prototype.getMinHeight=function(){var e="0px",i="0px";p(this.element.querySelector("."+yy))||(e=getComputedStyle(this.headerContent).height);var n=this.getEle(this.element.children,Mh);p(n)||(i=getComputedStyle(n).height);var r=parseInt(e.slice(0,e.indexOf("p")),10),o=parseInt(i.slice(0,i.indexOf("p")),10);return function P5(s){ja=s}(r+30+(isNaN(o)?0:o)),r+30+o},t.prototype.onResizeStart=function(e,i){return i.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e,i){i.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,i){i.trigger("resizeStop",e),this.updatePersistData()},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!p(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(Cy);for(var e=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,n="",r=0;r<this.resizeHandles.length;r++){if("All"===this.resizeHandles[r]){n="south north east west north-east north-west south-east south-west";break}var o="";switch(this.resizeHandles[r].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[r].toString()}n+=o.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===n.trim()?n="south-west":this.enableRtl&&"south-west"===n.trim()&&(n="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(hp):this.isModal&&this.target===document.body&&this.element.classList.add(JD),function E5(s){bh=s.resizeBegin,ly=s.resizing,hy=s.resizeComplete,gt=FD(s.element),tt=FD(s.boundary);for(var t=s.direction.split(" "),e=0;e<t.length;e++)if(D5.indexOf(t[e])>=0&&t[e])x5(t[e]);else if(""!==t[e].trim()){var i=lt("div",{className:"e-icons "+gh+" e-"+t[e]});gt.appendChild(i)}ja=s.minHeight,ay=s.minWidth,fs=s.maxWidth,Hs=s.maxHeight,s.proxy&&s.proxy.element&&s.proxy.element.classList.contains("e-dialog")?HD(s.proxy):HD()}({element:this.element,direction:n,minHeight:parseInt(e.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else UD(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?hp:JD),this.element.classList.remove(Cy)},t.prototype.getFocusElement=function(e){var n=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:n[n.length-1]}},t.prototype.keyDown=function(e){var i=this;if(9===e.keyCode&&this.isModal){var n=void 0;p(this.btnObj)||(n=this.btnObj[this.btnObj.length-1]),p(this.btnObj)&&!p(this.ftrTemplateContent)&&(n=this.getFocusElement(this.ftrTemplateContent)),p(this.btnObj)&&p(this.ftrTemplateContent)&&!p(this.contentEle)&&(n=this.getFocusElement(this.contentEle)),!p(n)&&document.activeElement===n.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),p(n)||n.element.focus())}var h,r=document.activeElement,o=["input","textarea"].indexOf(r.tagName.toLowerCase())>-1,a=!1;if(o||(a=r.hasAttribute("contenteditable")&&"true"===r.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape){this.dlgClosedBy="escape";var l=document.querySelector(".e-popup-open:not(.e-dialog)");!p(l)&&!l.classList.contains("e-toolbar-pop")||this.hide(e)}(13===e.keyCode&&!e.ctrlKey&&"textarea"!==r.tagName.toLowerCase()&&o&&!p(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===r.tagName.toLowerCase()||a)&&!p(this.primaryButtonEle))&&this.buttons.some(function(u,d){h=d;var f=u.buttonModel;return!p(f)&&!0===f.isPrimary})&&"function"==typeof this.buttons[h].click&&setTimeout(function(){i.buttons[h].click.call(i,e)})},t.prototype.initialize=function(){p(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||D([this.element],ap),O.isDevice&&D([this.element],XD),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||re(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&p(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&p(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!p(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||p(this.footerTemplate)?p(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!p(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!p(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(re(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&p(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var i=0,n=this.dlgContainer.children;i<n.length;i++)n[i].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=n[i])}if(!0!==this.element.classList.contains(ZD)&&!0!==this.element.classList.contains(KD)&&!p(this.element.parentElement)){var r=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),r.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}p(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Rs(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(o){var a={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",a,function(l){l.preventFocus||e.focusContent()})},close:function(o){e.isModal&&D([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var a=document.activeElement;!p(a)&&!p(a.blur)&&a.blur(),!p(e.storeActiveElement)&&!p(e.storeActiveElement.focus)&&e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(D([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var n=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));p(n)||(n.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var i;i=p(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this,i="."+yy;this.element.classList.contains("e-draggable")||(this.dragObj=new lh(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:i,dragStart:function(n){e.trigger("dragStart",n,function(r){z()&&r.bindEvents(n.dragElement)})},dragStop:function(n){e.isModal&&(p(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",n),e.element.classList.remove(hp),e.updatePersistData()},drag:function(n){e.trigger("drag",n)}}),p(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var i=p(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),n=this.createElement("button",{className:this.cssClass,attrs:{type:i}});this.buttonContent.push(n.outerHTML)}this.setFooterTemplate()}e=0;for(var r,o=this.element.children;e<o.length;e++)o[e].classList.contains(Mh)&&(r=o[e].querySelectorAll("button"));for(e=0;e<this.buttons.length;e++)this.isBlazorServerRender()||(this.btnObj[e]=new Zi(this.buttons[e].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+Mh)),!p(this.ftrTemplateContent)&&r.length>0&&("function"==typeof this.buttons[e].click&&y.add(r[e],"click",this.buttons[e].click,this),"object"==typeof this.buttons[e].click&&y.add(r[e],"click",this.buttonClickHandler.bind(this,e),this)),!this.isBlazorServerRender()&&!p(this.ftrTemplateContent)&&(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.buttons[e].isFlat&&this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.buttonClickHandler=function(e){this.trigger("buttons["+e+"].click",{})},t.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!p(this.content)&&""!==this.content||!this.initialRender)&&(("string"!=typeof this.content||z())&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),p(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&O.isIE&&""===this.element.style.width&&!p(this.width)&&(this.element.style.width=te(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,i,n){var r,o,a;o=i.classList.contains(VD)?this.element.id+"header":i.classList.contains(Mh)?this.element.id+"footerTemplate":this.element.id+"content",p(e.outerHTML)?("string"==typeof e||"string"!=typeof e||z()&&!this.isStringTemplate)&&("string"==typeof e&&(e=this.sanitizeHelper(e)),this.isVue||"string"!=typeof e?(r=vt(e),a=e):i.innerHTML=e):i.appendChild(e);var l=[];if(!p(r)){for(var c=0,u=r({},this,n,o,!(z()&&!this.isStringTemplate&&0===a.indexOf("<div>Blazor"))||this.isStringTemplate);c<u.length;c++)l.push(u[c]);xe([].slice.call(l),i)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var i=Tt.beforeSanitize();C(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!p(i.helper)?e=i.helper(e):i.cancel||(e=Tt.serializeValue(i,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!p(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,O.isIE&&"auto"===this.height&&!p(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?D([this.element],my):N([this.element],my)),p(this.element.querySelector(".e-resize-handle"))||(UD(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(p(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(n){8!==n.nodeType&&e.innerContentElement.appendChild(n)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:VD}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),re(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!p(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Mh}),""===this.footerTemplate||p(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){p(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:yy}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:qD,attrs:{type:"button"}}),this.closeIconBtnObj=new Zi({cssClass:"e-flat",iconCss:WD+" e-icons"}),this.closeIconTitle(),p(this.headerContent)?(this.createHeaderContent(),Fr([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Fr([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){e&&(N([this.element],e.split(" ")),this.isModal&&!p(this.dlgContainer)&&N([this.dlgContainer],e.split(" "))),this.cssClass&&(D([this.element],this.cssClass.split(" ")),this.isModal&&!p(this.dlgContainer)&&D([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove(QD),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),D([this.element],by),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var i,n=0;n<e.length;n++){if(((i=e[n]).clientHeight>0||"a"===i.tagName.toLowerCase()&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},t.prototype.focusableElements=function(e){if(!p(e)){var n=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(n)}return null},t.prototype.getAutoFocusNode=function(e){var i=e.querySelector("."+qD),r=e.querySelectorAll("[autofocus]"),o=this.getValidFocusNode(r);if(z()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),p(o)){if(!p(o=this.focusableElements(this.contentEle)))return o;if(!p(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else i=o;return i},t.prototype.disableElement=function(e,i){var n=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(n)for(;e;e=e.parentNode)if(e instanceof Element&&n.call(e,i))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),i=p(e)?this.element:e,n=O.userAgent;(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){y.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){y.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return z()&&this.isServerRendered},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,i){if(this.element.classList.contains(ap))for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"content":p(this.content)||""===this.content?p(this.contentEle)||(X(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),p(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||p(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),X(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||p(this.header)?this.headerEle&&(X(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||p(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||p(this.footerTemplate)){if(!this.ftrTemplateContent)return;X(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||p(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(WD).length>0?this.showCloseIcon||""!==this.header&&!p(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():X(this.closeIcon):(X(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":ie(this.element,{height:te(e.height)}),this.updatePersistData();break;case"width":ie(this.element,{width:te(e.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":var a=this.buttons.length;!p(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&(X(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var l=0;l<a;l++)p(this.buttons[l].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!p(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var h=p(i.position)||p(i.position.X)?this.position.X:i.position.X,c=p(i.position)||p(i.position.Y)?this.position.Y:i.position.Y;this.dlgContainer.classList.contains("e-dlg-"+h+"-"+c)&&this.dlgContainer.classList.remove("e-dlg-"+h+"-"+c)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=te(this.minHeight))}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)p(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",p(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(N([this.element],by),N([document.body],[Ur,mr]),X(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&y.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,i){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0;var r=Io(e);this.zIndex=r>this.zIndex?r:this.zIndex,this.isProtectedOnChange=n,i&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){(function j5(s){fs=s})(this.targetEle.clientWidth),function A5(s){Hs=s}(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},t.prototype.destroy=function(){if(!this.isDestroyed){var e=[my,by,Cy,hp,lp,XD],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(N([this.targetEle],[Ur,mr]),!p(this.element)&&this.element.classList.contains(lp)&&N([document.body],[Ur,mr]),this.isModal&&N([p(this.targetEle)?document.body:this.targetEle],mr),this.unWireEvents(),!p(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(p(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),p(this.dragObj)||this.dragObj.destroy(),!p(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),N([this.element],e),!p(this.cssClass)&&""!==this.cssClass&&N([this.element],this.cssClass.split(" ")),!p(this.refElement)&&!p(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),X(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(X(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),X(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!p(this.element.children))for(n=0;n<=this.element.children.length;n++)X(this.element.children[n-=n]);for(n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.isBlazorServerRender()?this.isDestroyed=!0:s.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&y.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&y.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&y.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&y.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!p(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&y.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.show=function(e){var i=this;if(this.element.classList.contains(ap)){if(!this.element.classList.contains(QD)||!p(e)){p(e)||this.fullScreen(e);var n=z()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",n,function(r){if(!r.cancel){i.element.style.maxHeight!==n.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=n.maxHeight),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!p(i.dlgOverlay)&&(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",N([i.dlgOverlay],"e-fade"),p(i.targetEle)?D([document.body],[Ur,mr]):(i.dlgContainer.style.position=i.targetEle===document.body?"fixed":"absolute",i.dlgOverlay.style.position="absolute",i.element.style.position="relative",D([i.targetEle],[Ur,mr])));var o={name:i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.calculatezIndex&&(i.setzIndex(i.isModal?i.element.parentElement:i.element,!0),ie(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),"None"===i.animationSettings.effect?i.popupObj.show():i.popupObj.show(o),i.dialogOpen=!0;var l=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=l}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var i=this;if(this.element.classList.contains(ap)&&this.preventVisibility){var n=z()?{cancel:!1,isInteracted:!!e,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:e}:{cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=n,this.trigger("beforeClose",n,function(r){if(!r.cancel){i.isModal&&(p(i.targetEle)||N([i.targetEle],[Ur,mr])),document.body.classList.contains(Ur)&&document.body.classList.contains(mr)&&N([document.body],[Ur,mr]);var o={name:i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};"None"===i.animationSettings.effect?i.popupObj.hide():i.popupObj.hide(o),i.dialogOpen=!1;var a=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=a}i.dlgClosedBy=My})}},t.prototype.fullScreen=function(e){if(e){this.element.style.top=document.scrollingElement.scrollTop+"px",D([this.element],lp);var r=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=p(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=r,D([document.body],[Ur,mr]),this.allowDragging&&!p(this.dragObj)&&this.dragObj.destroy()}else N([this.element],lp),N([document.body],[Ur,mr]),this.allowDragging&&!p(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return p(e)?this.btnObj:this.btnObj[e]},Ye([m("")],t.prototype,"content",void 0),Ye([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ye([m(!1)],t.prototype,"enablePersistence",void 0),Ye([m(!1)],t.prototype,"showCloseIcon",void 0),Ye([m(!1)],t.prototype,"isModal",void 0),Ye([m("")],t.prototype,"header",void 0),Ye([m(!0)],t.prototype,"visible",void 0),Ye([m(!1)],t.prototype,"enableResize",void 0),Ye([m(["South-East"])],t.prototype,"resizeHandles",void 0),Ye([m("auto")],t.prototype,"height",void 0),Ye([m("")],t.prototype,"minHeight",void 0),Ye([m("100%")],t.prototype,"width",void 0),Ye([m("")],t.prototype,"cssClass",void 0),Ye([m(1e3)],t.prototype,"zIndex",void 0),Ye([m(null)],t.prototype,"target",void 0),Ye([m("")],t.prototype,"footerTemplate",void 0),Ye([m(!1)],t.prototype,"allowDragging",void 0),Ye([mn([{}],L5)],t.prototype,"buttons",void 0),Ye([m(!0)],t.prototype,"closeOnEscape",void 0),Ye([pt({},N5)],t.prototype,"animationSettings",void 0),Ye([pt({X:"center",Y:"center"},AD)],t.prototype,"position",void 0),Ye([E()],t.prototype,"created",void 0),Ye([E()],t.prototype,"open",void 0),Ye([E()],t.prototype,"beforeSanitizeHtml",void 0),Ye([E()],t.prototype,"beforeOpen",void 0),Ye([E()],t.prototype,"close",void 0),Ye([E()],t.prototype,"beforeClose",void 0),Ye([E()],t.prototype,"dragStart",void 0),Ye([E()],t.prototype,"dragStop",void 0),Ye([E()],t.prototype,"drag",void 0),Ye([E()],t.prototype,"overlayClick",void 0),Ye([E()],t.prototype,"resizeStart",void 0),Ye([E()],t.prototype,"resizing",void 0),Ye([E()],t.prototype,"resizeStop",void 0),Ye([E()],t.prototype,"destroyed",void 0),Ye([Be],t)}(Mt);!function(s){function i(c,u){var d=new eE(c);return d.appendTo(u),d}function o(c,u){return c.header=p(u.title)?null:u.title,c.content=p(u.content)?"":u.content,c.isModal=!!p(u.isModal)||u.isModal,c.showCloseIcon=!p(u.showCloseIcon)&&u.showCloseIcon,c.allowDragging=!p(u.isDraggable)&&u.isDraggable,c.closeOnEscape=!p(u.closeOnEscape)&&u.closeOnEscape,c.position=p(u.position)?{X:"center",Y:"top"}:u.position,c.animationSettings=p(u.animationSettings)?{effect:"Fade",duration:400,delay:0}:u.animationSettings,c.cssClass=p(u.cssClass)?"":u.cssClass,c.zIndex=p(u.zIndex)?1e3:u.zIndex,c.open=p(u.open)?null:u.open,c.width=p(u.width)?"auto":u.width,c.height=p(u.height)?"auto":u.height,c}function h(c,u,d){var f=d;return p(u.text)||(f.buttonModel.content=u.text),p(u.icon)||(f.buttonModel.iconCss=u.icon),p(u.cssClass)||(f.buttonModel.cssClass=u.cssClass),p(u.click)||(f.click=u.click),f}s.alert=function t(c){var d,u=lt("div",{className:ZD});return document.body.appendChild(u),(d=i("string"==typeof c?{content:c,position:{X:"center",Y:"top"},isModal:!0,header:$D,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function n(c){var u={buttons:[]};return u=function a(c,u){var d=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return p(u.okButton)?c.buttons=d:c.buttons[0]=h(0,u.okButton,d[0]),c}(u=o(u,c),c),u}(c),u)).close=function(){c&&c.close&&c.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(GD)):d.element.remove()},d},s.confirm=function e(c){var d,u=lt("div",{className:KD});return document.body.appendChild(u),(d=i("string"==typeof c?{position:{X:"center",Y:"top"},content:c,isModal:!0,header:$D,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function r(c){var u={buttons:[]};return u=function l(c,u){var d={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},f={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return c.buttons[0]=p(u.okButton)?d:h(0,u.okButton,d),c.buttons[1]=p(u.cancelButton)?f:h(0,u.cancelButton,f),c}(u=o(u,c),c),u}(c),u)).close=function(){c&&c.close&&c.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(GD)):d.element.remove()},d}}(tE||(tE={}));var iE=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),mt=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Sy="e-tooltip",wy="e-tooltip-wrap",rE="e-tip-content",Sh="e-arrow-tip",sE="e-arrow-tip-outer",cp="e-arrow-tip-inner",wh="e-tip-bottom",Iy="e-tip-top",oE="e-tip-left",Oy="e-tip-right",Ty="e-popup",up="e-popup-open",Dy="e-popup-close",pp="e-lib",aE="e-tooltip-popup-container",i_=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return iE(t,s),mt([m({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),mt([m({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(Ze),dp=function(s){function t(e,i){var n=s.call(this,e,i)||this;return n.mouseMoveEvent=null,n.mouseMoveTarget=null,n.containerElement=null,n.isBodyContainer=!0,n}return iE(t,s),t.prototype.initialize=function(){this.formatPosition(),D([this.element],Sy)},t.prototype.formatPosition=function(){var e,i;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:Sh+" "+this.tipClass});e.appendChild(this.createElement("div",{className:sE+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:cp+" "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){this.tipClass=0===e.indexOf("Right")?oE:0===e.indexOf("Bottom")?Iy:0===e.indexOf("Left")?Oy:wh},t.prototype.renderPopup=function(e){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(pp),this.popupObj=new Rs(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var i=Ei(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.calculateTooltipOffset(this.position),r=this.calculateElementPosition(i,n),l=this.collisionFlipFit(e,r[0],r[1]);return this.tooltipEle.style.display="",l},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(e){if(this.popupObj&&e){var i=this.getTooltipPosition(e);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.closePopupHandler=function(){this.isReact&&!("Click"===this.opensOn&&"function"==typeof this.content)&&this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.calculateTooltipOffset=function(e){var i={top:0,left:0},n=this.tooltipEle.offsetWidth,r=this.tooltipEle.offsetHeight,o=T("."+Sh,this.tooltipEle),a=o?o.offsetWidth:0,l=o?o.offsetHeight:0,h=this.showTipPointer?0:8,c=l/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),u=a/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(h+=2),e){case"RightTop":i.left+=a+h,i.top-=r-c;break;case"RightCenter":i.left+=a+h,i.top-=r/2;break;case"RightBottom":i.left+=a+h,i.top-=c;break;case"BottomRight":i.top+=l+h,i.left-=u;break;case"BottomCenter":i.top+=l+h,i.left-=n/2;break;case"BottomLeft":i.top+=l+h,i.left-=n-u;break;case"LeftBottom":i.left-=a+n+h,i.top-=c;break;case"LeftCenter":i.left-=a+n+h,i.top-=r/2;break;case"LeftTop":i.left-=a+n+h,i.top-=r-c;break;case"TopLeft":i.top-=r+l+h,i.left-=n-u;break;case"TopRight":i.top-=r+l+h,i.left-=u;break;default:i.top-=r+l+h,i.left-=n/2}return i.left+=this.offsetX,i.top+=this.offsetY,i},t.prototype.updateTipPosition=function(e){var i=Z("."+Sh+",."+sE+",."+cp,this.tooltipEle);N(i,[wh,Iy,oE,Oy]),this.setTipClass(e),D(i,this.tipClass)},t.prototype.adjustArrow=function(e,i,n,r){if(!1!==this.showTipPointer){var o,a;this.updateTipPosition(i),this.tooltipEle.style.display="block";var v,l=this.tooltipEle.clientWidth,h=this.tooltipEle.clientHeight,c=T("."+Sh,this.tooltipEle),u=T("."+cp,this.tooltipEle),d=c.offsetWidth,f=c.offsetHeight;this.tooltipEle.style.display="",this.tipClass===wh||this.tipClass===Iy?(this.tipClass===wh?(a="99.9%",u.style.top="-"+(f-2)+"px"):(a=-(f-1)+"px",u.style.top="-"+(f-6)+"px"),e&&(o=(v="Center"!==n||l>e.offsetWidth||this.mouseTrail)&&"Left"===n||!v&&"End"===this.tipPointerPosition?l-d-2+"px":v&&"Right"===n||!v&&"Start"===this.tipPointerPosition?"2px":!v||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?l/2-d/2+"px":"End"===this.tipPointerPosition?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2+2+"px")):(this.tipClass===Oy?(o="99.9%",u.style.left="-"+(d-2)+"px"):(o=-(d-1)+"px",u.style.left=d-2-d+"px"),a=(v="Center"!==r||h>e.offsetHeight||this.mouseTrail)&&"Top"===r||!v&&"End"===this.tipPointerPosition?h-f-2+"px":v&&"Bottom"===r||!v&&"Start"===this.tipPointerPosition?"2px":h/2-f/2+"px"),c.style.top=a,c.style.left=o}},t.prototype.renderContent=function(e){var i=T("."+rE,this.tooltipEle);if(this.cssClass&&D([this.tooltipEle],this.cssClass.split(" ")),e&&!p(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),p(this.content))e&&!p(e.getAttribute("data-content"))&&(i.innerHTML=e.getAttribute("data-content"));else if(i.innerHTML="",this.content instanceof HTMLElement)i.appendChild(this.content);else if("string"==typeof this.content){if(this.enableHtmlSanitizer&&this.setProperties({content:Tt.sanitize(this.content)},!0),r=vt(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))if(this.enableHtmlParse)for(var o=r.length,a=0;a<o;a++)i[(xe(r,i),"innerHTML")]=this.content;else i.textContent=this.content}else{var r;(r=vt(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))&&xe(r,i),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),y.add(e,O.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDataTooltipId=function(e,i){re(e,{"data-tooltip-id":i})},t.prototype.removeDataTooltipId=function(e){e.removeAttribute("data-tooltip-id")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var i=this;this.isSticky||(this.autoCloseTimer=setTimeout(function(){i.close()},1500))},t.prototype.targetClick=function(e){var i;!p(i=this.target?F(e.target,this.target):this.element)&&(null===i.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,i))},t.prototype.targetHover=function(e){var i;if(!(p(i=this.target?F(e.target,this.target):this.element)||null!==i.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var r=0,o=[].slice.call(Z('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));r<o.length;r++)this.restoreElement(o[r]);this.showTooltip(i,this.animation.open,e)}},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&y.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,i,n){var r=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,y.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:n?n.type:null,cancel:!1,target:e,event:n||null,element:this.tooltipEle,isInteracted:!p(n)},this.trigger("beforeRender",this.tooltipEventArgs,function(a){r.beforeRenderCallback(a,e,n,i)}.bind(this))},t.prototype.beforeRenderCallback=function(e,i,n,r){if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove();else if(this.isHidden=!1,p(this.tooltipEle)){if(this.ctrlId=this.element.getAttribute("id")?at(this.element.getAttribute("id")):at("tooltip"),this.tooltipEle=this.createElement("div",{className:wy+" "+Ty+" "+pp,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+te(this.width)+";height:"+te(this.height)+";position:absolute;"}),0!==Object.keys(this.htmlAttributes).length)for(var o in this.htmlAttributes)"class"===o?this.tooltipEle.classList.add(this.htmlAttributes[""+o]):this.tooltipEle.setAttribute(o,this.htmlAttributes[""+o]);this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,n,r,this)}else i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDataTooltipId(i,this.ctrlId+"_content"),this.renderContent(i),$i.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,n,r,this))},t.prototype.appendContainer=function(e){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=T(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||D([this.containerElement],aE),this.containerElement.appendChild(e.tooltipEle)},t.prototype.tooltipBeforeRender=function(e,i){e&&(O.isDevice&&D([i.tooltipEle],"e-bigger"),"auto"!==i.width&&(i.tooltipEle.style.maxWidth=te(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:rE})),this.appendContainer(i),N([i.tooltipEle],"e-hidden"),i.addDataTooltipId(e,i.ctrlId+"_content"),i.renderContent(e),D([i.tooltipEle],up),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(e),i.adjustArrow(e,i.position,i.tooltipPositionX,i.tooltipPositionY),$i.stop(i.tooltipEle),i.reposition(e))},t.prototype.tooltipAfterRender=function(e,i,n,r){e&&(N([r.tooltipEle],up),D([r.tooltipEle],Dy),r.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:r.tooltipEle,isInteracted:!p(i)},r.needTemplateReposition()&&!r.mouseTrail&&(r.tooltipEle.style.display="none"),r.trigger("beforeOpen",r.tooltipEventArgs,function(a){r.beforeOpenCallback(a,e,n,i)}.bind(r)))},t.prototype.beforeOpenCallback=function(e,i,n,r){var o=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var a={name:n.effect,duration:n.duration,delay:n.delay,timingFunction:"easeOut"};"None"===n.effect&&(a=void 0),this.openDelay>0?this.showTimer=setTimeout(function(){o.mouseTrail&&y.add(i,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&(o.popupObj.show(a,i),o.mouseMoveEvent&&o.mouseTrail&&o.onMouseMove(o.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(a,i)}r&&this.wireMouseEvents(r,i)},t.prototype.needTemplateReposition=function(){return!p(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef},t.prototype.checkCollision=function(e,i,n){var r={left:i,top:n,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=wo(this.tooltipEle,this.checkCollideTarget(),i,n);return o.length>0&&(r.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,r.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),r},t.prototype.calculateElementPosition=function(e,i){return[this.isBodyContainer?e.left+i.left:e.left-this.containerElement.offsetLeft+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+i.top:e.top-this.containerElement.offsetTop+i.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,i,n){var r=this.checkCollision(e,i,n),o=r.position;if(this.tooltipPositionY!==r.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?r.vertical+this.tooltipPositionX:this.tooltipPositionX+r.vertical),this.tooltipPositionX!==r.horizontal&&(0===o.indexOf("Left")&&(r.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=r.vertical+"Left"),0===o.indexOf("Right")&&(r.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=r.vertical+"Right"),r.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)o=this.position;else{var a=r.vertical,l=r.horizontal;if(r.position!==o){var h=Ei(e,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,o,l,a);var c=this.calculateTooltipOffset(o);c.top-=this.getOffSetPosition("TopBottom",o,this.offsetY),c.left-=this.getOffSetPosition("RightLeft",o,this.offsetX),r.position=o;var u=this.calculateElementPosition(h,c);r.left=u[0],r.top=u[1]}else this.adjustArrow(e,o,l,a)}var d={left:r.left,top:r.top},f=this.isBodyContainer?Zm(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!0},d):d;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var v=T("."+Sh,this.tooltipEle),g=parseInt(v.style.left,10)-(f.left-r.left);g<0?g=0:g+v.offsetWidth>this.tooltipEle.clientWidth&&(g=this.tooltipEle.clientWidth-v.offsetWidth),v.style.left=g.toString()+"px"}return this.tooltipEle.style.display="",d.left=f.left,d.top=f.top,d},t.prototype.getOffSetPosition=function(e,i,n){return-1!==e.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(i.split(/(?=[A-Z])/)[0])?2*n:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,i,n){var r=this;this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(function(){r.closeDelay&&r.tooltipEle&&r.isTooltipOpen||r.tooltipHide(e,i,n)},this.closeDelay)):this.tooltipHide(e,i,n)},t.prototype.tooltipHide=function(e,i,n){var o,r=this;o=i?this.target?n||i.target:this.element:T('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:o,event:i||null,element:this.tooltipEle,isInteracted:!p(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?r.isHidden=!1:(r.mouseMoveBeforeRemove(),r.popupHide(e,o))}),this.tooltipEventArgs=null},t.prototype.popupHide=function(e,i){i&&this.restoreElement(i),this.isHidden=!0;var n={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),p(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDataTooltipId(e)},t.prototype.clear=function(){this.tooltipEle&&(N([this.tooltipEle],Dy),D([this.tooltipEle],up)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&He(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var i=e.relatedTarget;if(i&&!this.mouseTrail){var n=F(i,"."+wy+"."+pp+"."+Ty);n?y.add(n,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),y.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var i=0,n=0;e.type.indexOf("touch")>-1?(e.preventDefault(),i=e.touches[0].pageX,n=e.touches[0].pageY):(i=e.pageX,n=e.pageY),$i.stop(this.tooltipEle),N([this.tooltipEle],Dy),D([this.tooltipEle],up),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var r=this.calculateTooltipOffset(this.position),l=this.checkCollision(e.target,i+r.left+this.offsetX,n+r.top+this.offsetY);if(this.tooltipPositionX!==l.horizontal||this.tooltipPositionY!==l.vertical){var h=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?l.vertical+l.horizontal:l.horizontal+l.vertical;l.position=h,this.adjustArrow(e.target,l.position,l.horizontal,l.vertical);var c=this.calculateTooltipOffset(l.position);l.left=i+c.left-this.offsetX,l.top=n+c.top-this.offsetY}this.tooltipEle.style.left=l.left+"px",this.tooltipEle.style.top=l.top+"px"},t.prototype.keyDown=function(e){p(this.targetsList)||p(this.target)||[].slice.call(Z(this.target,this.element)).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn)),this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===F(e.target,"."+Sy)&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&!this.isSticky&&(F(e.target,"."+wy+"."+pp+"."+Ty)||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=wh,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var n=0,r=this.getTriggerList(e);n<r.length;n++){var o=r[n];if("Custom"===o)return;"Focus"===o&&this.wireFocusEvents(),"Click"===o&&y.add(this.element,O.touchStartEvent,this.targetClick,this),"Hover"===o&&(O.isDevice?(this.touchModule=new Gi(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),y.add(this.element,O.touchEndEvent,this.touchEndHandler,this)):y.add(this.element,"mouseover",this.targetHover,this))}y.add(document,"touchend",this.touchEnd,this),y.add(document,"scroll wheel",this.scrollHandler,this),y.add(window,"resize",this.windowResize,this),y.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=O.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(p(this.target))y.add(this.element,"focus",this.targetHover,this);else if("BODY"!==this.element.nodeName)y.add(this.element,"focusin",this.targetHover,this);else{var e=[].slice.call(Z(this.target,this.element));this.targetsList=e;for(var i=0,n=e;i<n.length;i++)y.add(n[i],"focus",this.targetHover,this)}},t.prototype.wireMouseEvents=function(e,i){this.tooltipEle&&(this.isSticky||("focus"===e.type&&y.add(i,"blur",this.onMouseOut,this),"focusin"===e.type&&y.add(i,"focusout",this.onMouseOut,this),"mouseover"===e.type&&y.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(y.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),y.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&y.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var n=0,r=this.getTriggerList(e);n<r.length;n++){var o=r[n];if("Custom"===o)return;"Focus"===o&&this.unwireFocusEvents(),"Click"===o&&y.remove(this.element,O.touchStartEvent,this.targetClick),"Hover"===o&&(O.isDevice?(this.touchModule&&this.touchModule.destroy(),y.remove(this.element,O.touchEndEvent,this.touchEndHandler)):y.remove(this.element,"mouseover",this.targetHover))}y.remove(document,"touchend",this.touchEnd),y.remove(document,"scroll wheel",this.scrollHandler),y.remove(window,"resize",this.windowResize),y.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(p(this.target))y.remove(this.element,"focus",this.targetHover);else if("BODY"===this.element.nodeName)y.remove(this.element,"focusin",this.targetHover);else for(var i=0,n=[].slice.call(Z(this.target,this.element));i<n.length;i++)y.remove(n[i],"focus",this.targetHover)},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var n=0,r=this.getTriggerList(this.opensOn);n<r.length;n++){var o=r[n];"Focus"===o&&(y.remove(e,"blur",this.onMouseOut),y.remove(e,"focusout",this.onMouseOut)),"Hover"===o&&!O.isDevice&&y.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(y.remove(e,"mouseenter",this.tooltipHover),y.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&y.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return T('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,i){for(var n=this.findTarget(),r=0,o=Object.keys(e);r<o.length;r++)switch(o[r]){case"width":this.tooltipEle&&n&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=te(e.width),this.reposition(n));break;case"height":this.tooltipEle&&n&&(this.tooltipEle.style.height=te(e.height),this.reposition(n));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&n){var l=T("."+cp,this.tooltipEle);l.style.top=l.style.left=null,this.reposition(n)}break;case"tipPointerPosition":this.tooltipEle&&n&&this.reposition(n);break;case"offsetX":if(this.tooltipEle){var h=e.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var c=e.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+c).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&N([this.tooltipEle],i.cssClass.split(" ")),e.cssClass&&D([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?D([this.tooltipEle],"e-rtl"):N([this.tooltipEle],"e-rtl"));break;case"container":p(this.containerElement)||N([this.containerElement],aE),this.container=e.container,this.tooltipEle&&n&&(this.appendContainer(this),this.reposition(n))}},t.prototype.open=function(e,i){p(i)&&(i=this.animation.open),p(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,i)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){s.prototype.destroy.call(this),this.tooltipEle&&He(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),N([this.element],Sy),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var i=0,n=Z('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element);i<n.length;i++)this.restoreElement(n[i])},mt([m("auto")],t.prototype,"width",void 0),mt([m("auto")],t.prototype,"height",void 0),mt([m()],t.prototype,"content",void 0),mt([m("body")],t.prototype,"container",void 0),mt([m()],t.prototype,"target",void 0),mt([m("TopCenter")],t.prototype,"position",void 0),mt([m(0)],t.prototype,"offsetX",void 0),mt([m(0)],t.prototype,"offsetY",void 0),mt([m(!0)],t.prototype,"showTipPointer",void 0),mt([m(!0)],t.prototype,"enableHtmlParse",void 0),mt([m(!1)],t.prototype,"windowCollision",void 0),mt([m("Auto")],t.prototype,"tipPointerPosition",void 0),mt([m("Auto")],t.prototype,"opensOn",void 0),mt([m(!1)],t.prototype,"mouseTrail",void 0),mt([m(!1)],t.prototype,"isSticky",void 0),mt([pt({},i_)],t.prototype,"animation",void 0),mt([m(0)],t.prototype,"openDelay",void 0),mt([m(0)],t.prototype,"closeDelay",void 0),mt([m()],t.prototype,"cssClass",void 0),mt([m(!1)],t.prototype,"enableHtmlSanitizer",void 0),mt([m("")],t.prototype,"htmlAttributes",void 0),mt([E()],t.prototype,"beforeRender",void 0),mt([E()],t.prototype,"beforeOpen",void 0),mt([E()],t.prototype,"afterOpen",void 0),mt([E()],t.prototype,"beforeClose",void 0),mt([E()],t.prototype,"afterClose",void 0),mt([E()],t.prototype,"beforeCollision",void 0),mt([E()],t.prototype,"created",void 0),mt([E()],t.prototype,"destroyed",void 0),mt([Be],t)}(Mt),Oi={},n_=30,r_=30,lE=30,s_=30,o_=30,a_=36,l_=36,Ih="e-spin-show",Oh="e-spin-hide",hE="e-spin-material",cE="e-spin-material3",uE="e-spin-fabric",pE="e-spin-fluent",dE="e-spin-tailwind",h_="e-spin-bootstrap",fE="e-spin-bootstrap4",vE="e-spin-bootstrap5",gE="e-spin-high-contrast",fp="e-spinner-pane",Ey="e-spinner-inner",vp="e-path-circle",c_="e-path-arc",u_="e-spin-label",gp="e-spin-template",Aa=null,mp=null;function Vs(s,t){if(s.target){var e,i=p(t)?lt:t,n=function P_(s,t){var e=t("div",{}),i=t("div",{});return e.classList.add(fp),i.classList.add(Ey),s.appendChild(e),e.appendChild(i),{wrap:e,inner_wrap:i}}(s.target,i);if(p(s.cssClass)||n.wrap.classList.add(s.cssClass),p(s.template)&&p(Aa)){var o=p(s.type)?function S_(s){return window.getComputedStyle(s,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):s.type;e=function E_(s,t){var e;switch(t){case"Material":e=n_;break;case"Material3":e=r_;break;case"Fabric":case"Tailwind":case"Tailwind-dark":e=lE;break;case"Fluent":e=s_;break;case"Bootstrap4":e=a_;break;case"Bootstrap5":e=l_;break;default:e=o_}return s=s?parseFloat(s+""):e,"Bootstrap"===t?s:s/2}(p(s.width)?void 0:s.width,o),function mE(s,t,e,i){var n=t.querySelector("."+Ey),r=n.querySelector("svg");switch(p(r)||n.removeChild(r),s){case"Material":!function d_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"Material",radius:t},bp(s,i,0,hE),Cp(t,s,"Material",hE)}(n,e);break;case"Material3":!function f_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"Material3",radius:t},bp(s,i,0,cE),Cp(t,s,"Material3",cE)}(n,e);break;case"Fabric":!function y_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"Fabric",radius:t},yp(s,i,uE),Mp(t,s,uE)}(n,e);break;case"Fluent":!function b_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"Fluent",radius:t},yp(s,i,pE),Mp(t,s,pE)}(n,e);break;case"Bootstrap":!function w_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"Bootstrap",radius:t},function I_(s,t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=64,r=32,o=2;i.setAttribute("id",t),i.setAttribute("class",h_),i.setAttribute("viewBox","0 0 "+n+" "+n),s.insertBefore(i,s.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",vp+"_"+a),l.setAttribute("r",o+""),l.setAttribute("transform","translate("+r+","+r+")"),i.appendChild(l)}}(s,i),function O_(s,t){var e=s.querySelector("svg.e-spin-bootstrap"),i=0,n=0,r=24;e.style.width=e.style.height=t+"px";for(var o=90,a=0;a<=7;a++){var l=xy(i,n,r,o),h=e.querySelector("."+vp+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),o=o>=360?0:o,o+=45}}(s,t)}(n,e);break;case"HighContrast":!function M_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"HighContrast",radius:t},yp(s,i,gE),Mp(t,s,gE)}(n,e);break;case"Bootstrap4":!function v_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"Bootstrap4",radius:t},bp(s,i,0,fE),Cp(t,s,"Bootstrap4",fE)}(n,e);break;case"Bootstrap5":!function g_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"Bootstrap5",radius:t},bp(s,i,0,vE),Cp(t,s,"Bootstrap5",vE)}(n,e);break;case"Tailwind":case"Tailwind-dark":!function C_(s,t,e){var i=vs();Oi[""+i]={timeOut:0,type:"Tailwind",radius:t},yp(s,i,dE),Mp(t,s,dE)}(n,e)}}(o,n.wrap,e),p(s.label)||function p_(s,t,e){var i=e("div",{});i.classList.add(u_),i.innerHTML=t,s.appendChild(i)}(n.inner_wrap,s.label,i)}else{var r=p(s.template)?Aa:s.template;n.wrap.classList.add(gp),function yE(s,t,e){p(e)||s.classList.add(e),s.querySelector(".e-spinner-inner").innerHTML=t}(n.wrap,r,mp)}n.wrap.classList.add(Oh),n=null}}function T_(s,t){var e=[],i=s,n=t,r=!1,o=1;return function a(l){e.push(l),(l!==n||1===o)&&(l<=i&&l>1&&!r?l=parseFloat((l-.2).toFixed(2)):1===l?(l=7,l=parseFloat((l+.2).toFixed(2)),r=!0):l<8&&r?8===(l=parseFloat((l+.2).toFixed(2)))&&(r=!1):l<=8&&!r&&(l=parseFloat((l-.2).toFixed(2))),++o,a(l))}(i),e}function vs(){for(var s="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)s+=t.charAt(Math.floor(Math.random()*t.length));return s}function yp(s,t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",e);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",vp);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",c_),s.insertBefore(n,s.firstChild),n.appendChild(r),n.appendChild(o)}function bp(s,t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",i),n.setAttribute("id",t),r.setAttribute("class",vp),s.insertBefore(n,s.firstChild),n.appendChild(r)}function bE(s){(function j_(s,t,e,i,n,r,o){var a=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),h=t-s,c=function A_(s){return parseFloat(s)}(2*o.globalInfo[o.uniqueID].radius+""),u=CE(c),d=-90*(o.globalInfo[o.uniqueID].count||0);!function f(g){var b=Math.max(0,Math.min((new Date).getTime()-l,i));(function v(g,b){if(!p(b.querySelector("svg.e-spin-material"))||!p(b.querySelector("svg.e-spin-material3"))){var M=void 0;if(p(b.querySelector("svg.e-spin-material"))||p(b.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?!p(b.querySelector("svg.e-spin-material3"))&&!p(b.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))&&(M=b.querySelector("svg.e-spin-material3")):M=b.querySelector("svg.e-spin-material"),!p(M)){var w=M.querySelector("path.e-path-circle");w.setAttribute("stroke-dashoffset",ME(c,u,g,r)+""),w.setAttribute("transform","rotate("+d+" "+c/2+" "+c/2+")")}}})(e(b,s,h,i),g.container),a===g.globalInfo[g.uniqueID].previousId&&b<i?Oi[g.uniqueID].timeOut=setTimeout(f.bind(null,g),1):bE(g)}(o)})(1,149,N_,1333,0,75,s),s.globalInfo[s.uniqueID].count=++s.globalInfo[s.uniqueID].count%4}function Cp(s,t,e,i){var n=2*s,r=t.querySelector("svg."+i),o=r.querySelector("path.e-path-circle"),a=CE(n),l=n/2+"px";r.setAttribute("viewBox","0 0 "+n+" "+n),r.style.width=r.style.height=n+"px",r.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function L_(s,t){var e=s/2,i=t/2;return"M"+e+","+i+"A"+(e-i)+","+(e-i)+" 0 1 1 "+i+","+e}(n,a)),("Material"===e||"Material3"===e)&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",ME(n,a,1,75)+""))}function CE(s){return.1*s}function ME(s,t,e,i){return(s-t)*Math.PI*(3*i/100-e/100)}function N_(s,t,e,i){var n=(s/=i)*s,r=n*s;return t+e*(6*r*n+-15*n*n+10*r)}function Mp(s,t,e){var i=s,n=s,r=2*s,l=t.querySelector("."+e),h=l.querySelector(".e-path-circle"),c=l.querySelector(".e-path-arc"),u=r/2+"px";h.setAttribute("d",function z_(s,t,e){return["M",s,t,"m",-e,0,"a",e,e,0,1,0,2*e,0,"a",e,e,0,1,0,2*-e,0].join(" ")}(i,n,s)),c.setAttribute("d",function k_(s,t,e,i,n){var r=xy(s,t,e,n),o=xy(s,t,e,i);return["M",r.x,r.y,"A",e,e,0,0,0,o.x,o.y].join(" ")}(i,n,s,315,45)),l.setAttribute("viewBox","0 0 "+r+" "+r),l.style.transformOrigin=u+" "+u+" "+u,l.style.width=l.style.height=r+"px"}function xy(s,t,e,i){var n=(i-90)*Math.PI/180;return{x:s+e*Math.cos(n),y:t+e*Math.sin(n)}}function ln(s){SE(s,!1),s=null}function SE(s,t){var e;if(s)if(s.classList.contains(fp))e=s;else{var i;i=s.querySelectorAll("."+fp),e=Array.from(i).find(function(l){return l.parentElement===s})||null}if(s&&e){var n=e.querySelector("."+Ey);if(t?!e.classList.contains(gp)&&!e.classList.contains(Oh):!e.classList.contains(gp)&&!e.classList.contains(Ih)){var o=e.querySelector("svg");if(p(o))return;var a=o.getAttribute("id");switch(Oi[""+a].isAnimate=!t,Oi[""+a].type){case"Material":case"Material3":t?clearTimeout(Oi[a].timeOut):function m_(s,t,e){var i={};Oi[""+t].timeOut=0,i[""+t]=function x_(s,t,e,i){return{radius:t,count:e,previousId:i}}(0,e,0,0),bE({uniqueID:t,container:s,globalInfo:i,timeOutVar:0})}(n,a,Oi[a].radius);break;case"Bootstrap":t?clearTimeout(Oi[a].timeOut):function D_(s){for(var e=s.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)r(s.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,T_(i,i),e);function r(o,a,l,h,c){var u=0;!function d(f){Oi[""+c].isAnimate&&(++u,o.setAttribute("r",f+""),u>=h.length&&(u=0),Oi[c].timeOut=setTimeout(d.bind(null,h[u]),18))}(a)}}(n)}}t?ki(e,[Oh],[Ih]):ki(e,[Ih],[Oh]),s=null}}function Ri(s){SE(s,!0),s=null}var Ue,it=function(){function s(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return s.prototype.setKey=function(t){return this.key=t,this},s.prototype.using=function(t){return this.dataManager=t,this},s.prototype.execute=function(t,e,i,n){return(t=t||this.dataManager)?t.executeQuery(this,e,i,n):V.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},s.prototype.executeLocal=function(t){return(t=t||this.dataManager)?t.executeLocal(this):V.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},s.prototype.clone=function(){var t=new s;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},s.prototype.from=function(t){return this.fromTable=t,this},s.prototype.addParams=function(t,e){return this.params.push("function"==typeof e?{key:t,fn:e}:{key:t,value:e}),this},s.prototype.distinct=function(t){return this.distincts="string"==typeof t?[].slice.call([t],0):t.slice(0),this},s.prototype.expand=function(t){return this.expands="string"==typeof t?[].slice.call([t],0):t.slice(0),this},s.prototype.where=function(t,e,i,n,r,o){e=e?e.toLowerCase():null;var a=null;return"string"==typeof t?a=new Fi(t,e,i,n,r,o):t instanceof Fi&&(a=t),this.queries.push({fn:"onWhere",e:a}),this},s.prototype.search=function(t,e,i,n,r){return"string"==typeof e&&(e=[e]),(!i||"none"===i)&&(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:n,ignoreAccent:r,comparer:V.fnOperators[i]}}),this},s.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},s.prototype.sortByForeignKey=function(t,e,i,n){var o,a,r=p(n)?"ascending":n;if("string"==typeof t&&V.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),e="descending"),(!e||"string"==typeof e)&&(r=e?e.toLowerCase():"ascending",e=V.fnSort(e)),i){o=s.filterQueries(this.queries,"onSortBy");for(var l=0;l<o.length;l++)if("string"==typeof(a=o[l].e.fieldName)){if(a===t)return this}else if(a instanceof Array)for(var h=0;h<a.length;h++)if(a[h]===t||t.toLowerCase()===a[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:e,direction:r}}),this},s.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},s.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},s.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},s.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},s.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},s.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},s.prototype.select=function(t){return"string"==typeof t&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},s.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},s.prototype.foreignKey=function(t){return this.fKey=t,this},s.prototype.requiresCount=function(){return this.isCountRequired=!0,this},s.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},s.filterQueries=function(t,e){return t.filter(function(i){return i.fn===e})},s.filterQueryLists=function(t,e){for(var i=t.filter(function(o){return-1!==e.indexOf(o.fn)}),n={},r=0;r<i.length;r++)n[i[r].fn]||(n[i[r].fn]=i[r].e);return n},s}(),Fi=function(){function s(t,e,i,n,r,o){return void 0===n&&(n=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=e.toLowerCase(),this.value=i,this.matchCase=o,this.ignoreCase=n,this.ignoreAccent=r,this.isComplex=!1,this.comparer=V.fnOperators.processOperator(this.operator)):(t instanceof s&&i instanceof s||i instanceof Array)&&(this.isComplex=!0,this.condition=e.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return s.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.combinePredicates([].slice.call(t,0),"and")},s.prototype.and=function(t,e,i,n,r){return s.combine(this,t,e,i,"and",n,r)},s.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.combinePredicates([].slice.call(t,0),"or")},s.prototype.or=function(t,e,i,n,r){return s.combine(this,t,e,i,"or",n,r)},s.ornot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.combinePredicates([].slice.call(t,0),"or not")},s.prototype.ornot=function(t,e,i,n,r){return s.combine(this,t,e,i,"ornot",n,r)},s.andnot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.combinePredicates([].slice.call(t,0),"and not")},s.prototype.andnot=function(t,e,i,n,r){return s.combine(this,t,e,i,"andnot",n,r)},s.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.fromJSONData(t[i]));return e}return this.fromJSONData(t)},s.prototype.validate=function(t){var i,n,e=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.condition&&-1!==this.condition.indexOf("not")?(this.condition=""===this.condition.split("not")[0]?void 0:this.condition.split("not")[0],!this.comparer.call(this,V.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,V.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);n=this.condition&&-1!==this.condition.indexOf("not")?-1!==this.condition.indexOf("and"):"and"===this.condition;for(var r=0;r<e.length;r++)if(r>0&&this.condition&&-1!==this.condition.indexOf("not")&&(e[r].condition=e[r].condition?e[r].condition+"not":"not"),i=e[r].validate(t),n){if(!i)return!1}else if(i)return!0;return n},s.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},s.combinePredicates=function(t,e){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new s(t[0],e,t.slice(1))},s.combine=function(t,e,i,n,r,o,a){return e instanceof s?s[r](t,e):"string"==typeof e?s[r](t,new s(e,i,n,o,a)):V.throwError("Predicate - "+r+" : invalid arguments")},s.fromJSONData=function(t){for(var e=t.predicates||[],i=e.length,n=[],o=0;o<i;o++)n.push(this.fromJSONData(e[o]));return t.isComplex?new s(n[0],t.condition,n.slice(1)):new s(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},s}(),wE={GroupGuid:"{271bbba0-1ee7}"},V=function(){function s(){}return s.getValue=function(t,e){return"function"==typeof t?t.call(e||{}):t},s.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},s.notEndsWith=function(t,e){return t.slice&&t.slice(-e.length)!==e},s.startsWith=function(t,e){return t.slice(0,e.length)===e},s.notStartsWith=function(t,e){return t.slice(0,e.length)!==e},s.wildCard=function(t,e){var i,n;if(-1!==e.indexOf("[")&&(e=e.split("[").join("[[]")),-1!==e.indexOf("(")&&(e=e.split("(").join("[(]")),-1!==e.indexOf(")")&&(e=e.split(")").join("[)]")),-1!==e.indexOf("*")){"*"!==e.charAt(0)&&(e="^"+e),"*"!==e.charAt(e.length-1)&&(e+="$"),i=e.split("*");for(var r=0;r<i.length;r++)i[r]=-1===i[r].indexOf(".")?i[r]+".*":i[r]+"*";e=i.join("")}return(-1!==e.indexOf("%3f")||-1!==e.indexOf("?"))&&(n=-1!==e.indexOf("%3f")?e.split("%3f"):e.split("?"),e=n.join(".")),new RegExp(e,"g").test(t)},s.like=function(t,e){return-1!==e.indexOf("%")&&("%"===e.charAt(0)&&e.lastIndexOf("%")<2?(e=e.substring(1,e.length),s.startsWith(s.toLowerCase(t),s.toLowerCase(e))):"%"===e.charAt(e.length-1)&&e.indexOf("%")>e.length-3?(e=e.substring(0,e.length-1),s.endsWith(s.toLowerCase(t),s.toLowerCase(e))):(e.lastIndexOf("%")!==e.indexOf("%")&&e.lastIndexOf("%")>e.indexOf("%")+1&&(e=e.substring(e.indexOf("%")+1,e.lastIndexOf("%"))),-1!==t.indexOf(e)))},s.fnSort=function(t){return"ascending"===(t=t?s.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},s.fnAscending=function(t,e){return p(t)&&p(e)||null==e?-1:"string"==typeof t?t.localeCompare(e):null==t?1:t-e},s.fnDescending=function(t,e){return p(t)&&p(e)?-1:null==e?1:"string"==typeof t?-1*t.localeCompare(e):null==t?-1:e-t},s.extractFields=function(t,e){for(var i={},n=0;n<e.length;n++)i=this.setValue(e[n],this.getObject(e[n],t),i);return i},s.select=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(this.extractFields(t[n],e));return i},s.group=function(t,e,i,n,r,o,a){n=n||1;var l=t,h="GroupGuid";if(l.GroupGuid===wE[h]){for(var c=function(S){if(p(r))l[S].items=u.group(l[S].items,e,i,l.level+1,null,o,a),l[S].count=l[S].items.length;else{var I,P=r.filter(function(H){return H.key===l[S].key});I=r.indexOf(P[0]),l[S].items=u.group(l[S].items,e,i,l.level+1,r[I].items,o,a),l[S].count=r[I].count}},u=this,d=0;d<l.length;d++)c(d);return l.childLevels+=1,l}var f={},v=[];v.GroupGuid=wE[h],v.level=n,v.childLevels=0,v.records=l;for(var g=function(S){var I=b.getVal(l,S,e);if(p(o)||(I=o(I,e)),!f[I]&&(f[I]={key:I,count:0,items:[],aggregates:{},field:e},v.push(f[I]),!p(r))){var P=r.filter(function(H){return H.key===f[I].key});f[I].count=P[0].count}f[I].count=p(r)?f[I].count+=1:f[I].count,(!a||a&&i.length)&&f[I].items.push(l[S])},b=this,M=0;M<l.length;M++)g(M);if(i&&i.length){var w=function(S){for(var I={},P=void 0,H=i,G=0;G<i.length;G++)if(P=s.aggregates[i[G].type],p(r))P&&(I[H[G].field+" - "+H[G].type]=P(v[S].items,H[G].field));else{var ee=r.filter(function(ue){return ue.key===v[S].key});P&&(I[H[G].field+" - "+H[G].type]=P(ee[0].items,H[G].field))}v[S].aggregates=I};for(M=0;M<v.length;M++)w(M)}if(a&&v.length&&i.length)for(M=0;M<v.length;M++)v[M].items=[];return l.length&&v||l},s.buildHierarchy=function(t,e,i,n,r){var o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++)(a[h=this.getObject(t,n[o])]||(a[h]=[])).push(n[o]);for(o=0;o<i.length;o++){var h=this.getObject(r||t,i[o]);i[o][e]=a[h]}},s.getFieldList=function(t,e,i){if(void 0===i&&(i=""),null==e)return this.getFieldList(t,[],i);for(var n=t,o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];"object"!=typeof n[l]||n[l]instanceof Array?e.push(i+l):this.getFieldList(n[l],e,i+l+".")}return e},s.getObject=function(t,e){if(!t)return e;if(e){if(-1===t.indexOf(".")){var i=t.charAt(0).toLowerCase()+t.slice(1),n=t.charAt(0).toUpperCase()+t.slice(1);return p(e[t])?p(e[i])?p(e[n])?null:e[n]:e[i]:e[t]}for(var r=e,o=t.split("."),a=0;a<o.length&&null!=r;a++){if(void 0===(r=r[o[a]])){var l=o[a].charAt(0).toUpperCase()+o[a].slice(1);r=e[l]||e[l.charAt(0).toLowerCase()+l.slice(1)]||null}e=r}return r}},s.setValue=function(t,e,i){var a,h,n=t.toString().split("."),r=i||{},o=r,l=n.length;for(a=0;a<l;a++)h=n[a],a+1===l?o[h]=void 0===e?void 0:e:p(o[h])&&(o[h]={}),o=o[h];return r},s.sort=function(t,e,i){if(t.length<=1)return t;var n=parseInt((t.length/2).toString(),10),r=t.slice(0,n),o=t.slice(n);return r=this.sort(r,e,i),o=this.sort(o,e,i),this.merge(r,o,e,i)},s.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map(function(n){return n in s.diacritics?s.diacritics[n]:n}).join("")},s.merge=function(t,e,i,n){for(var o,r=[];t.length>0||e.length>0;)o=t.length>0&&e.length>0?n?n(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:t[0][i]<t[0][i]?t:e:t.length>0?t:e,r.push(o.shift());return r},s.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},s.toLowerCase=function(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""},s.callAdaptorFunction=function(t,e,i,n){if(e in t){var r=t[e](i,n);p(r)||(i=r)}return i},s.getAddParams=function(t,e,i){var n={};return s.callAdaptorFunction(t,"addParams",{dm:e,query:i,params:i.params,reqParams:n}),n},s.isPlainObject=function(t){return!!t&&t.constructor===Object},s.isCors=function(){var t=null;try{t=new window.XMLHttpRequest}catch{}return!!t&&"withCredentials"in t},s.getGuid=function(t){var i;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(n,r){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint8Array(1);window.crypto.getRandomValues(o),i=o[0]%16|0}else i=16*Math.random()|0;return"0123456789abcdef"[19===r?3&i|8:i]})},s.isNull=function(t){return null==t},s.getItemFromComparer=function(t,e,i){var n,r,o,a=0,l="string"==typeof s.getVal(t,0,e);if(t.length)for(;p(n)&&a<t.length;)n=s.getVal(t,a,e),o=t[a++];for(;a<t.length;a++)!p(r=s.getVal(t,a,e))&&(l&&(n=+n,r=+r),i(n,r)>0&&(n=r,o=t[a]));return o},s.distinct=function(t,e,i){i=!p(i)&&i;var r,n=[],o={};return t.forEach(function(a,l){(r="object"==typeof t[l]?s.getVal(t,l,e):t[l])in o||(n.push(i?t[l]:r),o[r]=1)}),n},s.processData=function(t,e){var i=this.prepareQuery(t),n=new Ie(e);t.requiresCounts&&i.requiresCount();var r=n.executeLocal(i),o={result:t.requiresCounts?r.result:r,count:r.count,aggregates:JSON.stringify(r.aggregates)};return t.requiresCounts?o:r},s.prepareQuery=function(t){var e=this,i=new it;return t.select&&i.select(t.select),t.where&&s.parse.parseJson(t.where).filter(function(o){if(p(o.condition))i.where(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent);else{var a=[];o.field?a.push(new Fi(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent)):a=a.concat(e.getPredicate(o.predicates)),"or"===o.condition?i.where(Fi.or(a)):"and"===o.condition&&i.where(Fi.and(a))}}),t.search&&s.parse.parseJson(t.search).filter(function(o){return i.search(o.key,o.fields,o.operator,o.ignoreCase,o.ignoreAccent)}),t.aggregates&&t.aggregates.filter(function(o){return i.aggregate(o.type,o.field)}),t.sorted&&t.sorted.filter(function(o){return i.sortBy(o.name,o.direction)}),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(function(o){return i.group(o)}),i},s.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n.field)e.push(new Fi(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var r=[],o=this.getPredicate(n.predicates),a=0,l=Object.keys(o);a<l.length;a++)r.push(o[l[a]]);e.push("or"===n.condition?Fi.or(r):Fi.and(r))}}return e},s.serverTimezoneOffset=null,s.timeZoneHandling=!0,s.throwError=function(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}},s.aggregates={sum:function(t,e){for(var n,i=0,r="number"!=typeof s.getVal(t,0,e),o=0;o<t.length;o++)n=s.getVal(t,o,e),!isNaN(n)&&null!==n&&(r&&(n=+n),i+=n);return i},average:function(t,e){return s.aggregates.sum(t,e)/t.length},min:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),s.getObject(e,s.getItemFromComparer(t,e,i||s.fnAscending))},max:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),s.getObject(e,s.getItemFromComparer(t,e,i||s.fnDescending))},truecount:function(t,e){return new Ie(t).executeLocal((new it).where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new Ie(t).executeLocal((new it).where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},s.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},s.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},s.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},s.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},s.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},s.fnOperators={equal:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?s.toLowerCase(t)===s.toLowerCase(e):t===e},notequal:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),!s.fnOperators.equal(t,e,i)},lessthan:function(t,e,i){return i?s.toLowerCase(t)<s.toLowerCase(e):(p(t)&&(t=void 0),t<e)},greaterthan:function(t,e,i){return i?s.toLowerCase(t)>s.toLowerCase(e):t>e},lessthanorequal:function(t,e,i){return i?s.toLowerCase(t)<=s.toLowerCase(e):(p(t)&&(t=void 0),t<=e)},greaterthanorequal:function(t,e,i){return i?s.toLowerCase(t)>=s.toLowerCase(e):t>=e},contains:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?!p(t)&&!p(e)&&-1!==s.toLowerCase(t).indexOf(s.toLowerCase(e)):!p(t)&&!p(e)&&-1!==t.toString().indexOf(e)},doesnotcontain:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?!p(t)&&!p(e)&&-1===s.toLowerCase(t).indexOf(s.toLowerCase(e)):!p(t)&&!p(e)&&-1===t.toString().indexOf(e)},isnotnull:function(t){return null!=t},isnull:function(t){return null==t},startswith:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?t&&e&&s.startsWith(s.toLowerCase(t),s.toLowerCase(e)):t&&e&&s.startsWith(t,e)},doesnotstartwith:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?t&&e&&s.notStartsWith(s.toLowerCase(t),s.toLowerCase(e)):t&&e&&s.notStartsWith(t,e)},like:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?t&&e&&s.like(s.toLowerCase(t),s.toLowerCase(e)):t&&e&&s.like(t,e)},isempty:function(t){return void 0===t||""===t},isnotempty:function(t){return void 0!==t&&""!==t},wildcard:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?(t||"boolean"==typeof t)&&e&&"object"!=typeof t&&s.wildCard(s.toLowerCase(t),s.toLowerCase(e)):(t||"boolean"==typeof t)&&e&&s.wildCard(t,e)},endswith:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?t&&e&&s.endsWith(s.toLowerCase(t),s.toLowerCase(e)):t&&e&&s.endsWith(t,e)},doesnotendwith:function(t,e,i,n){return n&&(t=s.ignoreDiacritics(t),e=s.ignoreDiacritics(e)),i?t&&e&&s.notEndsWith(s.toLowerCase(t),s.toLowerCase(e)):t&&e&&s.notEndsWith(t,e)},processSymbols:function(t){var e=s.operatorSymbols[t];return e?s.fnOperators[e]:s.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){return s.fnOperators[t]||s.fnOperators.processSymbols(t)}},s.parse={parseJson:function(t){return"string"==typeof t?t=JSON.parse(t,s.parse.jsonReviver):t instanceof Array?s.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&s.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var e=0;e<t.length;e++)"object"==typeof t[e]&&null!==t[e]?s.parse.iterateAndReviveJson(t[e]):t[e]="string"!=typeof t[e]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[e])?s.parse.parseJson(t[e]):s.parse.jsonReviver("",t[e])},iterateAndReviveJson:function(t){for(var e,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];s.startsWith(o,"__")||("object"==typeof(e=t[o])?e instanceof Array?s.parse.iterateAndReviveArray(e):e&&s.parse.iterateAndReviveJson(e):t[o]=s.parse.jsonReviver(t[o],e))}},jsonReviver:function(t,e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e),n=s.timeZoneHandling?s.serverTimezoneOffset:null;if(i)return s.dateParse.toTimeZone(new Date(parseInt(i[1],10)),n,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var r=e.indexOf("Z")>-1||e.indexOf("z")>-1,o=e.split(/[^0-9.]/);if(r){if(o[5].indexOf(".")>-1){var a=o[5].split(".");o[5]=a[0],o[6]=new Date(e).getUTCMilliseconds().toString()}else o[6]="00";e=s.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5]?o[5]:"00",10),parseInt(o[6],10)),s.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5]?o[5]:"00",10)),h=parseInt(o[6],10),c=parseInt(o[7],10);if(isNaN(h)&&isNaN(c))return l;e.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-c):l.setHours(l.getHours()+h,l.getMinutes()+c),e=s.dateParse.toTimeZone(l,s.serverTimezoneOffset,!1)}null==s.serverTimezoneOffset&&(e=s.dateParse.addSelfOffset(e))}else if(/^\d{4}-\d{2}-\d{2}$/.test(e))return o=e.split(/[^0-9.]/),new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10))}return e},isJson:function(t){return"string"==typeof t[0]?t:s.parse.parseJson(t)},isGuid:function(t){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(t)},replacer:function(t,e){return s.isPlainObject(t)?s.parse.jsonReplacer(t,e):t instanceof Array?s.parse.arrayReplacer(t):t instanceof Date?s.parse.jsonReplacer({val:t},e).val:t},jsonReplacer:function(t,e){for(var i,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];if((i=t[a])instanceof Date){var l=i;null==s.serverTimezoneOffset?t[a]=s.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+36e5*s.serverTimezoneOffset),t[a]=s.dateParse.toTimeZone(s.dateParse.addSelfOffset(l),null).toJSON())}}return t},arrayReplacer:function(t){for(var e=0;e<t.length;e++)s.isPlainObject(t[e])?t[e]=s.parse.jsonReplacer(t[e]):t[e]instanceof Date&&(t[e]=s.parse.jsonReplacer({date:t[e]}).date);return t},jsonDateReplacer:function(t,e){if("value"===t&&e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e);if(i)e=s.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var n=e.split(/[^0-9]/);e=s.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),null,!0)}}if(e instanceof Date)return e=s.dateParse.addSelfOffset(e),null===s.serverTimezoneOffset?s.dateParse.toTimeZone(s.dateParse.addSelfOffset(e),null).toJSON():(e=s.dateParse.toTimeZone(e,e.getTimezoneOffset()/60*2-s.serverTimezoneOffset,!1)).toJSON()}return e}},s.dateParse={addSelfOffset:function(t){return new Date(+t-6e4*t.getTimezoneOffset())},toUTC:function(t){return new Date(+t+6e4*t.getTimezoneOffset())},toTimeZone:function(t,e,i){if(null===e)return t;var n=i?s.dateParse.toUTC(t):t;return new Date(+n-36e5*e)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),n=i>=0?"+":"-",r=function(a){var l=Math.floor(Math.abs(a));return(l<10?"0":"")+l};return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+n+r(i/60)+":"+r(i%60)}},s}(),Vr=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),B_={GroupGuid:"{271bbba0-1ee7}"},IE=function(){function s(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=s,this.dataSource=t,this.pvt={}}return s.prototype.processResponse=function(t,e,i,n){return t},s}(),Py=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Vr(t,s),t.prototype.processQuery=function(e,i){for(var a,l,d,n=e.dataSource.json.slice(0),r=n.length,o=!0,h={},c=0,u=[],f=0;f<i.lazyLoad.length;f++)c++,h[i.lazyLoad[f].key]=i.lazyLoad[f].value;var v={};for(f=0;f<i.queries.length;f++)"onPage"!==(l=i.queries[f]).fn&&"onGroup"!==l.fn||!i.lazyLoad.length?(a=this[l.fn].call(this,n,l.e,i),"onAggregates"===l.fn?v[l.e.field+" - "+l.e.type]=a:n=void 0!==a?a:n,("onPage"===l.fn||"onSkip"===l.fn||"onTake"===l.fn||"onRange"===l.fn)&&(o=!1),o&&(r=n.length)):("onGroup"===l.fn&&u.push(l.e),"onPage"===l.fn&&(d=l.e));if(c){var b=this.lazyLoadGroup({query:i,lazyLoad:h,result:n,group:u,page:d});n=b.result,r=b.count}return i.isCountRequired&&(n={result:n,count:r,aggregates:v}),n},t.prototype.lazyLoadGroup=function(e){var i=0,n=this.getAggregate(e.query),r=e.result;if(p(e.lazyLoad.onDemandGroupInfo)){i=(r=V.group(r,e.group[0].fieldName,n,null,null,e.group[0].comparer,!0)).length;var h=r;e.page&&(r=this.onPage(r,e.page,e.query)),this.formGroupResult(r,h)}else{for(var o=e.lazyLoad.onDemandGroupInfo,a=o.where.length-1;a>=0;a--)r=this.onWhere(r,o.where[a]);e.group.length!==o.level&&(r=V.group(r,e.group[o.level].fieldName,n,null,null,e.group[0].comparer,!0)),i=r.length,h=r,r=(r=r.slice(o.skip)).slice(0,o.take),e.group.length!==o.level&&this.formGroupResult(r,h)}return{result:r,count:i}},t.prototype.formGroupResult=function(e,i){if(e.length&&i.length){var n="GroupGuid",r="childLevels",o="level",a="records";e[n]=i[n],e[r]=i[r],e[o]=i[o],e[a]=i[a]}return e},t.prototype.getAggregate=function(e){var i=it.filterQueries(e.queries,"onAggregates"),n=[];if(i.length)for(var r=void 0,o=0;o<i.length;o++)n.push({type:(r=i[o].e).type,field:V.getValue(r.field,e)});return n},t.prototype.batchRequest=function(e,i,n){var r,o=i.deletedRecords.length;for(r=0;r<i.addedRecords.length;r++)this.insert(e,i.addedRecords[r]);for(r=0;r<i.changedRecords.length;r++)this.update(e,n.key,i.changedRecords[r]);for(r=0;r<o;r++)this.remove(e,n.key,i.deletedRecords[r]);return i},t.prototype.onWhere=function(e,i){return e&&e.length?e.filter(function(n){if(i)return i.validate(n)}):e},t.prototype.onAggregates=function(e,i){var n=V.aggregates[i.type];return e&&n&&0!==e.length?n(e,i.field):null},t.prototype.onSearch=function(e,i){return e&&e.length?(0===i.fieldNames.length&&V.getFieldList(e[0],i.fieldNames),e.filter(function(n){for(var r=0;r<i.fieldNames.length;r++)if(i.comparer.call(n,V.getObject(i.fieldNames[r],n),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,i,n){if(!e||!e.length)return e;var r,o=V.getValue(i.fieldName,n);if(!o)return e.sort(i.comparer);if(o instanceof Array){for(var a=(o=o.slice(0)).length-1;a>=0;a--)o[a]&&(r=i.comparer,V.endsWith(o[a]," desc")&&(r=V.fnSort("descending"),o[a]=o[a].replace(" desc","")),e=V.sort(e,o[a],r));return e}return V.sort(e,o,i.comparer)},t.prototype.onGroup=function(e,i,n){if(!e||!e.length)return e;var r=this.getAggregate(n);return V.group(e,V.getValue(i.fieldName,n),r,null,null,i.comparer)},t.prototype.onPage=function(e,i,n){var r=V.getValue(i.pageSize,n),o=(V.getValue(i.pageIndex,n)-1)*r;return e&&e.length?e.slice(o,o+r):e},t.prototype.onRange=function(e,i){return e&&e.length?e.slice(V.getValue(i.start),V.getValue(i.end)):e},t.prototype.onTake=function(e,i){return e&&e.length?e.slice(0,V.getValue(i.nos)):e},t.prototype.onSkip=function(e,i){return e&&e.length?e.slice(V.getValue(i.nos)):e},t.prototype.onSelect=function(e,i){return e&&e.length?V.select(e,V.getValue(i.fieldNames)):e},t.prototype.insert=function(e,i,n,r,o){return p(o)?e.dataSource.json.push(i):e.dataSource.json.splice(o,0,i)},t.prototype.remove=function(e,i,n,r){var a,o=e.dataSource.json;for("object"==typeof n&&!(n instanceof Date)&&(n=V.getObject(i,n)),a=0;a<o.length&&V.getObject(i,o[a])!==n;a++);return a!==o.length?o.splice(a,1):null},t.prototype.update=function(e,i,n,r){var a,l,o=e.dataSource.json;for(p(i)||(l=j(i,n)),a=0;a<o.length&&(p(i)||j(i,o[a])!==l);a++);return a<o.length?wi(o[a],n):null},t}(IE),Ws=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Vr(t,s),t.prototype.processQuery=function(e,i,n){var h,c,r=this.getQueryRequest(i),o=it.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=i.params,l=e.dataSource.url,u=null,d=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?c=((c=V.getValue((h=o.onPage).pageIndex,i))-1)*(u=V.getValue(h.pageSize,i)):"onRange"in o&&(c=(h=o.onRange).start,u=h.end-h.start);for(var v=0;v<r.sorts.length;v++)h=V.getValue(r.sorts[v].e.fieldName,i),f.sorts.push(V.callAdaptorFunction(this,"onEachSort",{name:h,direction:r.sorts[v].e.direction},i));for(n&&(h=this.getFiltersFrom(n,i))&&f.filters.push(V.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)),v=0;v<r.filters.length;v++){var g=V.callAdaptorFunction(this,"onEachWhere",r.filters[v].e.toJson(),i);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!p(r.filters[v].e.key)&&r.filters.length>1&&(g="("+g+")"),f.filters.push(g);for(var M=0,w="object"==typeof f.filters[v]?Object.keys(f.filters[v]):[];M<w.length;M++)V.isNull(f[S=w[M]])&&delete f[S]}for(v=0;v<r.searches.length;v++)f.searches.push(V.callAdaptorFunction(this,"onEachSearch",{fields:(h=r.searches[v].e).fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase},i));for(v=0;v<r.groups.length;v++)f.groups.push(V.getValue(r.groups[v].e.fieldName,i));for(v=0;v<r.aggregates.length;v++)f.aggregates.push({type:(h=r.aggregates[v].e).type,field:V.getValue(h.field,i)});var I={};if(this.getRequestQuery(d,i,o,f,I),V.callAdaptorFunction(this,"addParams",{dm:e,query:i,params:a,reqParams:I}),i.lazyLoad.length)for(v=0;v<i.lazyLoad.length;v++)I[i.lazyLoad[v].key]=i.lazyLoad[v].value;for(var H=0,G=Object.keys(I);H<G.length;H++){var S;(V.isNull(I[S=G[H]])||""===I[S]||0===I[S].length)&&delete I[S]}(!(d.skip in I)||!(d.take in I))&&null!==u&&(I[d.skip]=V.callAdaptorFunction(this,"onSkip",c,i),I[d.take]=V.callAdaptorFunction(this,"onTake",u,i));var ee=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(I,V.parse.jsonDateReplacer),url:l,pvtData:ee,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(I,i,e),{type:"GET",url:(h=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+h).length?l.replace(/\/*$/,h):l,pvtData:ee})},t.prototype.getRequestQuery=function(e,i,n,r,o){var l=o;l[e.from]=i.fromTable,e.apply&&i.distincts.length&&(l[e.apply]="onDistinct"in this?V.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&e.expand&&(l[e.expand]="onExpand"in this&&"onSelect"in n?V.callAdaptorFunction(this,"onExpand",{selects:V.getValue(n.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[e.select]="onSelect"in n&&!i.distincts.length?V.callAdaptorFunction(this,"onSelect",V.getValue(n.onSelect.fieldNames,i),i):"",l[e.count]=i.isCountRequired?V.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[e.search]=r.searches.length?V.callAdaptorFunction(this,"onSearch",r.searches,i):"",l[e.skip]="onSkip"in n?V.callAdaptorFunction(this,"onSkip",V.getValue(n.onSkip.nos,i),i):"",l[e.take]="onTake"in n?V.callAdaptorFunction(this,"onTake",V.getValue(n.onTake.nos,i),i):"",l[e.where]=r.filters.length||r.searches.length?V.callAdaptorFunction(this,"onWhere",r.filters,i):"",l[e.sortBy]=r.sorts.length?V.callAdaptorFunction(this,"onSortBy",r.sorts,i):"",l[e.group]=r.groups.length?V.callAdaptorFunction(this,"onGroup",r.groups,i):"",l[e.aggregates]=r.aggregates.length?V.callAdaptorFunction(this,"onAggregates",r.aggregates,i):"",l.param=[]},t.prototype.convertToQueryString=function(e,i,n){return""},t.prototype.processResponse=function(e,i,n,r,o,a){if(r&&r.getResponseHeader("Content-Type")&&-1!==r.getResponseHeader("Content-Type").indexOf("application/json")){var l=V.timeZoneHandling;i&&!i.timeZoneHandling&&(V.timeZoneHandling=!1),e=V.parse.parseJson(e),V.timeZoneHandling=l}var h=o,c=h.pvtData||{},u=e?e.groupDs:[];if(r&&r.getResponseHeader("Content-Type")&&-1!==r.getResponseHeader("Content-Type").indexOf("xml"))return n.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(h.data);if(d&&"batch"===d.action&&e&&e.addedRecords)return a.addedRecords=e.addedRecords,a;e&&e.d&&(e=e.d);var f={};e&&"count"in e&&(f.count=e.count),f.result=e&&e.result?e.result:e;var v=!1;if(Array.isArray(e.result)&&e.result.length&&(p(e.result[0].key)||(f.result=this.formRemoteGroupedData(f.result,1,c.groups.length-1)),n&&n.lazyLoad.length&&c.groups.length))for(var w=0;w<n.lazyLoad.length;w++)"onDemandGroupInfo"===n.lazyLoad[w].key&&c.groups.length===n.lazyLoad[w].value.level&&(v=!0);return v||this.getAggregateResult(c,e,f,u,n),V.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},t.prototype.formRemoteGroupedData=function(e,i,n){for(var r=0;r<e.length;r++)e[r].items.length&&Object.keys(e[r].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[r].items,i+1,n-1);var o="GroupGuid",h="records";return e[o]=B_[o],e.level=i,e.childLevels=n,e[h]=e[0].items.length?this.getGroupedRecords(e,!p(e[0].items[h])):[],e},t.prototype.getGroupedRecords=function(e,i){for(var n=[],o=0;o<e.length;o++)if(i)n=n.concat(e[o].items.records);else for(var a=0;a<e[o].items.length;a++)n.push(e[o].items[a]);return n},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,i,n,r,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(C({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n[void 0],key:n[void 0]},V.getAddParams(this,e,r)))}},t.prototype.beforeSend=function(e,i){},t.prototype.insert=function(e,i,n,r){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(C({},{value:i,table:n,action:"insert"},V.getAddParams(this,e,r)))}},t.prototype.remove=function(e,i,n,r,o){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(C({},{key:n,keyColumn:i,table:r,action:"remove"},V.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,n,r,o){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(C({},{value:n,action:"update",keyColumn:i,key:V.getObject(i,n),table:r},V.getAddParams(this,e,o)))}},t.prototype.getFiltersFrom=function(e,i){var r,n=i.fKey,o=n,a=i.key,l=[];"object"!=typeof e[0]&&(o=null);for(var h=0;h<e.length;h++)r="object"==typeof e[0]?V.getObject(a||o,e[h]):e[h],l.push(new Fi(n,"equal",r));return Fi.or(l)},t.prototype.getAggregateResult=function(e,i,n,r,o){var a=i;if(i&&i.result&&(a=i.result),e&&e.aggregates&&e.aggregates.length){var l=e.aggregates,h=void 0,c=a,u={};i.aggregate&&(c=i.aggregate);for(var d=0;d<l.length;d++)(h=V.aggregates[l[d].type])&&(u[l[d].field+" - "+l[d].type]=h(c,l[d].field));n.aggregates=u}var v=Array.isArray(i.result)&&i.result.length&&!p(i.result[0].key);if(e&&e.groups&&e.groups.length&&!v){var g=e.groups;for(d=0;d<g.length;d++){p(r)||(r=V.group(r,g[d]));var M=it.filterQueries(o.queries,"onGroup")[d].e;a=V.group(a,g[d],e.aggregates,null,r,M.comparer)}n.result=a}return n},t.prototype.getQueryRequest=function(e){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=it.filterQueries(e.queries,"onSortBy"),i.groups=it.filterQueries(e.queries,"onGroup"),i.filters=it.filterQueries(e.queries,"onWhere"),i.searches=it.filterQueries(e.queries,"onSearch"),i.aggregates=it.filterQueries(e.queries,"onAggregates"),i},t.prototype.addParams=function(e){var i=e.reqParams;e.params.length&&(i.params={});for(var n=0,r=e.params;n<r.length;n++){var o=r[n];if(i[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[o.key]=o.value,o.fn&&(i[o.key]=o.fn.call(e.query,o.key,e.query,e.dm)),i.params[o.key]=i[o.key]}},t}(IE),La=function(s){function t(e){var i=s.call(this)||this;return i.options=C({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),C(i.options,e||{}),i}return Vr(t,s),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,n){var o,a,r="",l=e.value,h=typeof l,c=e.field?t.getField(e.field):null;if(l instanceof Date&&(l="datetime'"+V.parse.replacer(l)+"'"),"string"===h&&(l=l.replace(/'/g,"''"),e.ignoreCase&&(l=l.toLowerCase()),"like"!==e.operator&&(l=encodeURIComponent(l)),"wildcard"!==e.operator&&"like"!==e.operator&&(l="'"+l+"'"),n&&(c="cast("+c+", 'Edm.String')"),V.parse.isGuid(l)&&(a="guid"),e.ignoreCase&&(a||(c="tolower("+c+")"),l=l.toLowerCase())),"isempty"===e.operator||"isnull"===e.operator||"isnotempty"===e.operator||"isnotnull"===e.operator?(o=-1!==e.operator.indexOf("isnot")?V.odBiOperator.notequal:V.odBiOperator.equal,l="isnull"===e.operator||"isnotnull"===e.operator?null:"''"):o=V.odBiOperator[e.operator],o)return r+=c,r+=o,a&&(r+=a),r+l;if("like"===(o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator[e.operator]:V.odv4UniOperator[e.operator]))-1!==l.indexOf("%")&&("%"===l.charAt(0)&&l.lastIndexOf("%")<2?(l=l.substring(1,l.length),o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.startswith:V.odv4UniOperator.startswith):"%"===l.charAt(l.length-1)&&l.indexOf("%")>l.length-3?(l=l.substring(0,l.length-1),o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.endswith:V.odv4UniOperator.endswith):l.lastIndexOf("%")!==l.indexOf("%")&&l.lastIndexOf("%")>l.indexOf("%")+1?(l=l.substring(l.indexOf("%")+1,l.lastIndexOf("%")),o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.contains:V.odv4UniOperator.contains):o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.contains:V.odv4UniOperator.contains),l="'"+(l=encodeURIComponent(l))+"'";else if("wildcard"===o)if(-1!==l.indexOf("*")){var u=l.split("*"),d=void 0,f=0;if(0!==l.indexOf("*")&&-1===u[0].indexOf("%3f")&&-1===u[0].indexOf("?")&&(d="'"+(d=u[0])+"'",r+=(o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.startswith:V.odv4UniOperator.startswith)+"(",r+=c+",",a&&(r+=a),r+=d+")",f++),l.lastIndexOf("*")!==l.length-1&&-1===u[u.length-1].indexOf("%3f")&&-1===u[u.length-1].indexOf("?")&&(d="'"+(d=u[u.length-1])+"'",f>0&&(r+=" and "),r+=(o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.endswith:V.odv4UniOperator.endswith)+"(",r+=c+",",a&&(r+=a),r+=d+")",f++),u.length>2)for(var v=1;v<u.length-1;v++)if(-1===u[v].indexOf("%3f")&&-1===u[v].indexOf("?")){if(d="'"+(d=u[v])+"'",f>0&&(r+=" and "),"substringof"===(o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.contains:V.odv4UniOperator.contains)||"not substringof"===o){var g=d;d=c,c=g}r+=o+"(",r+=c+",",a&&(r+=a),r+=d+")",f++}0===f?(o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.contains:V.odv4UniOperator.contains,(-1!==l.indexOf("?")||-1!==l.indexOf("%3f"))&&(l=-1!==l.indexOf("?")?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'"):o="wildcard"}else o=p(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?V.odUniOperator.contains:V.odv4UniOperator.contains,(-1!==l.indexOf("?")||-1!==l.indexOf("%3f"))&&(l=-1!==l.indexOf("?")?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'";return"substringof"!==o&&"not substringof"!==o||(g=l,l=c,c=g),"wildcard"!==o&&(r+=o+"(",r+=c+",",a&&(r+=a),r+=l+")"),r},t.prototype.addParams=function(e){s.prototype.addParams.call(this,e),delete e.reqParams.params},t.prototype.onComplexPredicate=function(e,i,n){for(var r=[],o=0;o<e.predicates.length;o++)r.push("("+this.onEachWhere(e.predicates[o],i,n)+")");return r.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,i,n){return e.isComplex?this.onComplexPredicate(e,i,n):this.onPredicate(e,i,n)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&V.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],n=0;n<e.fields.length;n++)i.push(new Fi(e.fields[n],e.operator,e.key,e.ignoreCase));this.pvt.search=i},t.prototype.onSearch=function(e){return this.pvt.search=Fi.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)i.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,i,n){V.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()?(i.setRequestHeader("Accept",this.options.multipartAccept),i.setRequestHeader("DataServiceVersion","2.0"),i.overrideMimeType("text/plain; charset=x-user-defined")):i.setRequestHeader("Accept",this.options.accept),i.setRequestHeader("DataServiceVersion","2.0"),i.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,i,n,r,o,a){var l="odata.metadata";if(o&&"GET"===o.type&&!this.rootUrl&&e[l]){var h=e[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}if(!p(e.d)){var u=n&&n.isCountRequired?e.d.results:e.d,d="__metadata";if(!p(u))for(var f=0;f<u.length;f++)p(u[f][d])||delete u[f][d]}var v=o&&o.pvtData,g=this.processBatchResponse(e,n,r,o,a);if(g)return g;var b=r&&o.getResponseHeader("DataServiceVersion"),M=null,w=b&&parseInt(b,10)||2;if(n&&n.isCountRequired){var S="__count";(e[S]||e["odata.count"])&&(M=e[S]||e["odata.count"]),e.d&&(e=e.d),(e[S]||e["odata.count"])&&(M=e[S]||e["odata.count"])}3===w&&e.value&&(e=e.value),e.d&&(e=e.d),w<3&&e.results&&(e=e.results);var I={};return I.count=M,I.result=e,this.getAggregateResult(v,e,I,null,n),V.isNull(M)?I.result:{result:I.result,count:I.count,aggregates:I.aggregates}},t.prototype.convertToQueryString=function(e,i,n){var r=[],o="table",a=e[o]||"";delete e[o],n.dataSource.requiresFormat&&(e.$format="json");for(var c=0,u=Object.keys(e);c<u.length;c++){var d=u[c];r.push(d+"="+e[d])}return r=r.join("&"),n.dataSource.url&&-1!==n.dataSource.url.indexOf("?")&&!a?r:r.length?a+"?"+r:a||""},t.prototype.localTimeReplacer=function(e,i){for(var n=0,r=p(i)?[]:Object.keys(i);n<r.length;n++){var o=r[n];i[o]instanceof Date&&(i[o]=V.dateParse.toLocalTime(i[o]))}return i},t.prototype.insert=function(e,i,n){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,i,n,r){var o;return o="string"!=typeof n||V.parse.isGuid(n)?"("+n+")":"('"+n+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,r?"/"+r:"")+o}},t.prototype.update=function(e,i,n,r,o,a){var l;return"PATCH"===this.options.updateType&&!p(a)&&(n=this.compareAndRemove(n,a,i)),l="string"!=typeof n[i]||V.parse.isGuid(n[i])?"("+n[i]+")":"('"+n[i]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,r?"/"+r:"")+l,data:JSON.stringify(n,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,i,n,r,o){var a=n.guid=V.getGuid(this.options.batchPre),l=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);n.url=this.resourceTableName?this.resourceTableName:n.url;var h={url:n.url,key:n.key,cid:1,cSet:V.getGuid(this.options.changeSet)},c="--"+a+"\n";return c+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+"\n",this.pvt.changeSet=0,c+=this.generateInsertRequest(i.addedRecords,h,e),c+=this.generateUpdateRequest(i.changedRecords,h,e,o?o.changedRecords:[]),c+=this.generateDeleteRequest(i.deletedRecords,h,e),c+=h.cSet+"--\n",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:c+="--"+a+"--"}},t.prototype.generateDeleteRequest=function(e,i,n){return e?this.generateBodyContent(e,i,{method:"DELETE ",url:function(a,l,h){var c=V.getObject(h,a[l]);return"number"==typeof c||V.parse.isGuid(c)?"("+c+")":c instanceof Date?"("+a[l][h].toJSON()+")":"('"+c+"')"},data:function(a,l){return""}},n)+"\n":""},t.prototype.generateInsertRequest=function(e,i,n){return e?this.generateBodyContent(e,i,{method:"POST ",url:function(a,l,h){return""},data:function(a,l){return JSON.stringify(a[l])+"\n\n"}},n):""},t.prototype.generateUpdateRequest=function(e,i,n,r){var o=this;return e?(e.forEach(function(h){return h=o.compareAndRemove(h,r.filter(function(c){return V.getObject(i.key,c)===V.getObject(i.key,h)})[0],i.key)}),this.generateBodyContent(e,i,{method:this.options.updateType+" ",url:function(h,c,u){return"number"==typeof h[c][u]||V.parse.isGuid(h[c][u])?"("+h[c][u]+")":h[c][u]instanceof Date?"("+h[c][u].toJSON()+")":"('"+h[c][u]+"')"},data:function(h,c){return JSON.stringify(h[c])+"\n\n"}},n)):""},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,i,n,r){for(var o="",a=0;a<e.length;a++)o+="\n"+i.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=n.method,"POST "===n.method?o+=(r.dataSource.insertUrl||r.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n":"PUT "===n.method||"PATCH "===n.method?o+=(r.dataSource.updateUrl||r.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n":"DELETE "===n.method&&(o+=(r.dataSource.removeUrl||r.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",p(e[a]["@odata.etag"])?o+="\n":(o+="If-Match: "+e[a]["@odata.etag"]+"\n\n",delete e[a]["@odata.etag"]),o+=n.data(e,a);return o},t.prototype.processBatchResponse=function(e,i,n,r,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];if(r&&this.options.batch&&V.endsWith(r.url,this.options.batch)&&"post"===r.type.toLowerCase()){var a=n.getResponseHeader("Content-Type"),l=void 0,h=void 0,c=e+"";if(a=a.substring(a.indexOf("=batchresponse")+1),(c=c.split(a)).length<2)return{};var u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(c=c[1]);u&&c.replace(u[0],"");for(var f=(c=c.split(u?u[1]:"")).length;f>-1;f--)!/\bContent-ID:/i.test(c[f])||!/\bHTTP.+201/.test(c[f])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(c[f])[1],10),o.addedRecords[l]&&(h=V.parse.parseJson(/^\{.+\}/m.exec(c[f])[0]),C({},o.addedRecords[l],this.processResponse(h))));return o}return null},t.prototype.compareAndRemove=function(e,i,n){var r=this;return p(i)||Object.keys(e).forEach(function(o){o!==n&&"@odata.etag"!==o&&(V.isPlainObject(e[o])?(r.compareAndRemove(e[o],i[o]),0===Object.keys(e[o]).filter(function(l){return"@odata.etag"!==l}).length&&delete e[o]):(e[o]===i[o]||e[o]&&i[o]&&e[o].valueOf()===i[o].valueOf())&&delete e[o])}),e},t}(Ws),__=function(s){function t(){var e=s.call(this)||this;return Oe("beforeSend",Ws.prototype.beforeSend,e),e}return Vr(t,s),t.prototype.insert=function(e,i,n,r,o){return this.pvt.position=o,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(C({},{value:i,table:n,action:"insert"},V.getAddParams(this,e,r)))}},t.prototype.remove=function(e,i,n,r,o){return s.prototype.remove.call(this,e,i,n),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(C({},{key:n,keyColumn:i,table:r,action:"remove"},V.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,n,r,o){return this.updateType="update",this.updateKey=i,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(C({},{value:n,action:"update",keyColumn:i,key:n[i],table:r},V.getAddParams(this,e,o)))}},t.prototype.processResponse=function(e,i,n,r,o,a,l){var h;if(e="batch"===(o?JSON.parse(o.data):e).action?V.parse.parseJson(e):e,"add"===this.updateType&&s.prototype.insert.call(this,i,e,null,null,this.pvt.position),"update"===this.updateType&&s.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(h=0;h<e.added.length;h++)s.prototype.insert.call(this,i,e.added[h]);if(e.changed)for(h=0;h<e.changed.length;h++)s.prototype.update.call(this,i,l.key,e.changed[h]);if(e.deleted)for(h=0;h<e.deleted.length;h++)s.prototype.remove.call(this,i,l.key,e.deleted[h]);return e},t.prototype.batchRequest=function(e,i,n,r,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(C({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n.url,key:n.key},V.getAddParams(this,e,r)))}},t.prototype.addParams=function(e){(new Ws).addParams(e)},t}(Py),Y_=function(s){function t(e){var i=s.call(this)||this;return i.options=C({},i.options,{getData:function(){},addRecord:function(){},updateRecord:function(){},deleteRecord:function(){},batchUpdate:function(){}}),C(i.options,e||{}),i}return Vr(t,s),t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(Ws),U_=function(s){function t(e,i,n){var r=s.call(this)||this;r.isCrudAction=!1,r.isInsertAction=!1,p(e)||(r.cacheAdaptor=e),r.pageSize=n,r.guidId=V.getGuid("cacheAdaptor"),window.localStorage.setItem(r.guidId,JSON.stringify({keys:[],results:[]}));var a=r.guidId;return p(i)||setInterval(function(){for(var l=V.parse.parseJson(window.localStorage.getItem(a)),h=[],c=0;c<l.results.length;c++){var u=+new Date,d=+new Date(l.results[c].timeStamp);l.results[c].timeStamp=u-d,u-d>i&&h.push(c)}for(c=0;c<h.length;c++)l.results.splice(h[c],1),l.keys.splice(h[c],1);window.localStorage.removeItem(a),window.localStorage.setItem(a,JSON.stringify(l))},i),r}return Vr(t,s),t.prototype.generateKey=function(e,i){var n=this.getQueryRequest(i),r=it.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e,a="onPage";a in r&&(o+=r[a].pageIndex),n.sorts.forEach(function(d){o+=d.e.direction+d.e.fieldName}),n.groups.forEach(function(d){o+=d.e.fieldName}),n.searches.forEach(function(d){o+=d.e.searchKey});for(var l=0;l<n.filters.length;l++){var h=n.filters[l];if(h.e.isComplex){var c=i.clone();c.queries=[];for(var u=0;u<h.e.predicates.length;u++)c.queries.push({fn:"onWhere",e:h.e.predicates[u],filter:i.queries.filter});o+=h.e.condition+this.generateKey(e,c)}else o+=h.e.field+h.e.operator+h.e.value}return o},t.prototype.processQuery=function(e,i,n){var r=this.generateKey(e.dataSource.url,i),o=V.parse.parseJson(window.localStorage.getItem(this.guidId)),a=o?o.results[o.keys.indexOf(r)]:null;return null==a||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):a},t.prototype.processResponse=function(e,i,n,r,o,a){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&V.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,i,n,r,o,a);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=n?this.generateKey(i.dataSource.url,n):i.dataSource.url,h={},c=(h=V.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(l);for(-1!==c&&(h.results.splice(c,1),h.keys.splice(c,1)),h.results[h.keys.push(l)-1]={keys:l,result:e.result,timeStamp:new Date,count:e.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),e},t.prototype.beforeSend=function(e,i,n){!p(this.cacheAdaptor.options.batch)&&V.endsWith(n.url,this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase()&&i.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||i.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,i,n,r){return this.isCrudAction=!0,this.cacheAdaptor.update(e,i,n,r)},t.prototype.insert=function(e,i,n){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,i,n)},t.prototype.remove=function(e,i,n,r){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,i,n,r)},t.prototype.batchRequest=function(e,i,n){return this.cacheAdaptor.batchRequest(e,i,n)},t}(Ws),Ie=function(){function s(t,e,i){var r,n=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isInitialLoad=!0,!t&&!this.dataSource&&(t=[]),i=i||t.adaptor,t&&!1===t.timeZoneHandling&&(this.timeZoneHandling=t.timeZoneHandling),t instanceof Array?r={json:t,offline:!0}:"object"==typeof t?(t.json||(t.json=[]),t.enablePersistence||(t.enablePersistence=!1),t.id||(t.id=""),t.ignoreOnPersist||(t.ignoreOnPersist=[]),r={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:void 0!==t.offline?t.offline:!(t.adaptor instanceof __||t.adaptor instanceof Y_||t.url),requiresFormat:t.requiresFormat,enablePersistence:t.enablePersistence,id:t.id,ignoreOnPersist:t.ignoreOnPersist}):V.throwError("DataManager: Invalid arguments"),void 0===r.requiresFormat&&!V.isCors()&&(r.requiresFormat=!!p(r.crossDomain)||r.crossDomain),void 0===r.dataType&&(r.dataType="json"),this.dataSource=r,this.defaultQuery=e,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),r.url&&r.offline&&!r.json.length?(this.isDataAvailable=!1,this.adaptor=i||new La,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new it),this.ready.then(function(o){n.dataSource.offline=!0,n.isDataAvailable=!0,r.json=o.result,n.adaptor=new Py})):this.adaptor=r.offline?new Py:new La,!r.jsonp&&this.adaptor instanceof La&&(r.jsonp="callback"),this.adaptor=i||this.adaptor,r.enableCaching&&(this.adaptor=new U_(this.adaptor,r.timeTillExpiration,r.cachingPageSize)),this}return s.prototype.getPersistedData=function(t){var e=localStorage.getItem(t||this.dataSource.id);return JSON.parse(e)},s.prototype.setPersistData=function(t,e,i){localStorage.setItem(e||this.dataSource.id,JSON.stringify(i||this.persistQuery))},s.prototype.setPersistQuery=function(t){var e=this,i=this.getPersistedData();if(this.isInitialLoad&&i&&Object.keys(i).length){this.persistQuery=i,this.persistQuery.queries=this.persistQuery.queries.filter(function(r){if(e.dataSource.ignoreOnPersist&&e.dataSource.ignoreOnPersist.length&&r.fn&&e.dataSource.ignoreOnPersist.some(function(l){return r.fn===l}))return!1;if("onWhere"===r.fn){var o=r.e;if(o&&o.isComplex&&o.predicates instanceof Array){var a=o.predicates.map(function(l){if(l.predicates&&l.predicates instanceof Array){var h=l.predicates.map(function(b){return new Fi(b.field,b.operator,b.value,b.ignoreCase,b.ignoreAccent,b.matchCase)});return"and"===l.condition?Fi.and(h):Fi.or(h)}return new Fi(l.field,l.operator,l.value,l.ignoreCase,l.ignoreAccent,l.matchCase)});r.e=new Fi(a[0],o.condition,a.slice(1))}}return!0});var n=C(new it,this.persistQuery);return this.isInitialLoad=!1,n}return this.persistQuery=t,this.isInitialLoad=!1,t},s.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},s.prototype.executeLocal=function(t){!this.defaultQuery&&!(t instanceof it)&&V.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||V.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t));var e=this.adaptor.processQuery(this,t=t||this.defaultQuery);if(t.subQuery){var i=t.subQuery.fromTable,n=t.subQuery.lookups,r=t.isCountRequired?e.result:e;n&&n instanceof Array&&V.buildHierarchy(t.subQuery.fKey,i,r,n,t.subQuery.key);for(var o=0;o<r.length;o++)r[o][i]instanceof Array&&(r[o]=C({},{},r[o]),r[o][i]=this.adaptor.processResponse(t.subQuery.using(new s(r[o][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(e,this,t)},s.prototype.executeQuery=function(t,e,i,n){var r=this,o="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),"function"==typeof t&&(n=i,i=e,e=t,t=null),t||(t=this.defaultQuery),t instanceof it||V.throwError("DataManager - executeQuery() : A query is required to execute");var a=new Sp,l={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!p(this.adaptor[o])||this.isCustomDataAdaptor(this.adaptor)){var h=this.adaptor.processQuery(this,t);p(this.adaptor[o])?!p(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,t)):(l=s.getDeferedArgs(t,h,l),a.resolve(l)):this.adaptor[o](h,a,l,t)}else s.nextTick(function(){var c=r.executeLocal(t);l=s.getDeferedArgs(t,c,l),a.resolve(l)});return(e||i)&&a.promise.then(e,i),n&&a.promise.then(n,n),a.promise},s.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},s.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},s.prototype.extendRequest=function(t,e,i){return C({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},s.prototype.makeRequest=function(t,e,i,n){var r=this,o=!!n.subQuerySelector,a=function(b){i.error=b,e.reject(i)},l=function(b,M,w,S,I,P,H){i.xhr=w,i.count=M?parseInt(M.toString(),10):0,i.result=b,i.request=S,i.aggregates=P,i.actual=I,i.virtualSelectRecords=H,e.resolve(i)},h=function(b,M){var w=new Sp,S={parent:i};n.subQuery.isChild=!0;var I=r.adaptor.processQuery(r,n.subQuery,b?r.adaptor.processResponse(b):M),P=r.makeRequest(I,w,S,n.subQuery);return o||w.then(function(H){b&&(V.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,b,H,n.subQuery.key),l(b,H.count,H.xhr))},a),P},u=this.extendRequest(t,function(b,M){if(r.isGraphQLAdaptor(r.adaptor)&&!p(b.errors))return a(b.errors);r.isCustomDataAdaptor(r.adaptor)&&(M=C({},r.ajaxReqOption,M)),-1===M.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&r.dateParse&&(b=V.parse.parseJson(b));var w=r.adaptor.processResponse(b,r,n,M.httpRequest,M),S=0,I=null,H=b.virtualSelectRecords;n.isCountRequired&&(S=w.count,I=w.aggregates,w=w.result),n.subQuery?o||h(w,M):l(w,S,M.httpRequest,M.type,b,I,H)},a);if(this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=u,this.adaptor.options.getData({data:u.data,onSuccess:u.onSuccess,onFailure:u.onFailure});else{var d=new ks(u);d.beforeSend=function(){r.beforeSend(d.httpRequest,d)},(u=d.send()).catch(function(b){return!0}),this.requests.push(d)}if(o){var g=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});g&&g.length?Promise.all([u,h(null,g)]).then(function(){for(var b=[],M=0;M<arguments.length;M++)b[M]=arguments[M];var w=b[0],S=r.adaptor.processResponse(w[0],r,n,r.requests[0].httpRequest,r.requests[0]),I=0;n.isCountRequired&&(I=S.count,S=S.result);var P=r.adaptor.processResponse(w[1],r,n.subQuery,r.requests[1].httpRequest,r.requests[1]);I=0,n.subQuery.isCountRequired&&(I=P.count,P=P.result),V.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,S,P,n.subQuery.key),o=!1,l(S,I,r.requests[0].httpRequest)}):o=!1}return u},s.prototype.beforeSend=function(t,e){this.adaptor.beforeSend(this,t,e);for(var n,i=this.dataSource.headers,r=0;i&&r<i.length;r++){n=[];for(var a=0,l=Object.keys(i[r]);a<l.length;a++){var h=l[a];n.push(h),t.setRequestHeader(h,i[r][h])}}},s.prototype.saveChanges=function(t,e,i,n,r){var o=this;i instanceof it&&(n=i,i=null);var a={url:i,key:e||this.dataSource.key},l=this.adaptor.batchRequest(this,t,a,n||new it,r),h="doAjaxRequest";if(this.dataSource.offline)return l;if(p(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(l,this.adaptor.options.batchUpdate);var c=new Sp,u=new ks(l);return u.beforeSend=function(){o.beforeSend(u.httpRequest,u)},u.onSuccess=function(d,f){o.isGraphQLAdaptor(o.adaptor)&&(p(d.errors)||u.onFailure(JSON.stringify(d.errors))),c.resolve(o.adaptor.processResponse(d,o,null,f.httpRequest,f,t,a))},u.onFailure=function(d){c.reject([{error:d}])},u.send().catch(function(d){return!0}),c.promise}return this.adaptor[h](l)},s.prototype.insert=function(t,e,i,n){e instanceof it&&(i=e,e=null);var r=this.adaptor.insert(this,t,e,i,n),o="doAjaxRequest";return this.dataSource.offline?r:p(this.adaptor[o])?this.doAjaxRequest(r,this.adaptor.options.addRecord):this.adaptor[o](r)},s.prototype.remove=function(t,e,i,n){"object"==typeof e&&(e=V.getObject(t,e)),i instanceof it&&(n=i,i=null);var r=this.adaptor.remove(this,t,e,i,n),o="doAjaxRequest";return this.dataSource.offline?r:p(this.adaptor[o])?this.doAjaxRequest(r,this.adaptor.options.deleteRecord):this.adaptor[o](r)},s.prototype.update=function(t,e,i,n,r){i instanceof it&&(n=i,i=null);var o=this.adaptor.update(this,t,e,i,n,r),a="doAjaxRequest";return this.dataSource.offline?o:p(this.adaptor[a])?this.doAjaxRequest(o,this.adaptor.options.updateRecord):this.adaptor[a](o)},s.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},s.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},s.prototype.successFunc=function(t,e){if(this.isGraphQLAdaptor(this.adaptor)){var i=JSON.parse(t);p(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=C({},this.ajaxReqOption,e));try{V.parse.parseJson(t)}catch{t=[]}t=this.adaptor.processResponse(V.parse.parseJson(t),this,null,e.httpRequest,e),this.ajaxDeffered.resolve(t)},s.prototype.failureFunc=function(t){this.ajaxDeffered.reject([{error:t}])},s.prototype.doAjaxRequest=function(t,e){var i=this;if(t=C({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.ajaxDeffered=new Sp,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var n=new ks(t);n.beforeSend=function(){i.beforeSend(n.httpRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch(function(r){return!0})}return this.ajaxDeffered.promise},s.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},s}(),Sp=function(){return function s(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}(),st={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function xi(s,t){var e={};if(p(s)||"string"==typeof s||"number"==typeof s||!p(s.isHeader))return s;for(var i=0,n=Object.keys(t);i<n.length;i++){var o=t[""+n[i]],a=p(o)||"string"!=typeof o?void 0:j(o,s);p(a)||(e[""+o]=a)}return e}function wp(s){if(s)try{return"function"!=typeof s&&document.querySelector(s)?vt(document.querySelector(s).innerHTML.trim()):vt(s)}catch{return vt(s)}}!function(s){s.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},e={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:s.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(U,$,q,R,_){return ue(U,r(U,$,q,R,_),null,R)}function r(U,$,q,R,_){var W=[],k=C({},e,R);st=H(k.moduleName);for(var B=S(),Q=0;Q<$.length;Q++)if(!p($[Q])){var ne;k.itemCreating&&"function"==typeof k.itemCreating&&k.itemCreating({dataSource:$,curData:$[Q],text:$[Q],options:k}),ne=q?P(U,$[Q],void 0,null,null,[],null,B,Q,R):ee(U,$[Q],void 0,null,null,R,_),k.itemCreated&&"function"==typeof k.itemCreated&&k.itemCreated({dataSource:$,curData:$[Q],text:$[Q],item:ne,options:k}),W.push(ne)}return W}function o(U,$,q,R,_,W){var k=C({},e,q);st=H(k.moduleName);var ne,B=!W||"listview"!==W.getModuleName()&&"multiselect"!==W.getModuleName()?C({},s.defaultMappedFields,k.fields):k.fields,Q=C({},t,k.ariaAttributes),ye=[];R&&(Q.level=R);var be,Me,ae=[];$&&$.length&&!p(v($).item)&&!v($).item.hasOwnProperty(B.id)&&(ne=S());for(var je=0;je<$.length;je++){var ce=xi($[je],B);if(!p($[je])){k.itemCreating&&"function"==typeof k.itemCreating&&k.itemCreating({dataSource:$,curData:$[je],text:ce[B.text],options:k,fields:B});var $t=$[je];k.itemCreating&&"function"==typeof k.itemCreating&&(ce=xi($[je],B)),ce.hasOwnProperty(B.id)&&!p(ce[B.id])&&(ne=ce[B.id]);var We=[];if(k.showCheckBox&&(k.itemNavigable&&(ce[B.url]||ce[B.urlAttributes])?ye.push(U("input",{className:st.check,attrs:{type:"checkbox"}})):We.push(U("input",{className:st.check,attrs:{type:"checkbox"}}))),!0===_)k.showIcon&&ce.hasOwnProperty(B.iconCss)&&!p(ce[B.iconCss])&&We.push(U("span",{className:st.icon+" "+ce[B.iconCss]})),Me=(be=P(U,$t,ce,B,k.itemClass,We,!(!$t.hasOwnProperty("isHeader")||!$t.isHeader),ne,je,q)).querySelector("."+st.anchorWrap),k.itemNavigable&&ye.length&&Fr(ye,be.firstElementChild);else{if((be=ee(U,$t,ce,B,k.itemClass,q,W)).classList.add(st.level+"-"+Q.level),be.setAttribute("aria-level",Q.level.toString()),"presentation"==Q.groupItemRole&&be.removeAttribute("aria-level"),Me=be.querySelector("."+st.anchorWrap),ce.hasOwnProperty(B.tooltip)&&be.setAttribute("title",ce[B.tooltip]),ce.hasOwnProperty(B.htmlAttributes)&&ce[B.htmlAttributes]&&g(be,ce[B.htmlAttributes]),ce.hasOwnProperty(B.enabled)&&!1===ce[B.enabled]&&be.classList.add(st.disabled),ce.hasOwnProperty(B.isVisible)&&!1===ce[B.isVisible]&&(be.style.display="none"),ce.hasOwnProperty(B.imageUrl)&&!p(ce[B.imageUrl])&&!k.template){var x={src:ce[B.imageUrl]};wi(x,ce[B.imageAttributes]);var L=U("img",{className:st.image,attrs:x});Me?Me.insertAdjacentElement("afterbegin",L):Fr([L],be.firstElementChild)}if(k.showIcon&&ce.hasOwnProperty(B.iconCss)&&!p(ce[B.iconCss])&&!k.template){var K=U("div",{className:st.icon+" "+ce[B.iconCss]});Me?Me.insertAdjacentElement("afterbegin",K):Fr([K],be.firstElementChild)}We.length&&Fr(We,be.firstElementChild),k.itemNavigable&&ye.length&&Fr(ye,be.firstElementChild),I(U,ce,B,0,k,be,Q.level)}Me&&D([be],[st.navigable]),k.itemCreated&&"function"==typeof k.itemCreated&&k.itemCreated({dataSource:$,curData:$[je],text:ce[B.text],item:be,options:k,fields:B}),ye=[],ae.push(be)}}return ae}function a(U,$,q,R,_,W){var k=C({},e,q);return ue(U,o(U,$,q,R,_,W),k.listClass,q)}function h(U,$){if($&&U)return Array.prototype.slice.call($).indexOf(U)}function u(U,$,q){if(void 0===q&&(q=new it),"Ascending"===U)q.sortBy($,"ascending",!0);else if("Descending"===U)q.sortBy($,"descending",!0);else for(var R=0;R<q.queries.length;R++)"onSortBy"===q.queries[R].fn&&q.queries.splice(R,1);return q}function d(U,$){return new Ie(U).executeLocal($)}function v(U){for(var q=0;q<U.length;q++)if(!p(U[q]))return{typeof:typeof U[q],item:U[q]};return{typeof:null,item:null}}function g(U,$){var q={};wi(q,$),q.class&&(D([U],q.class.split(" ")),delete q.class),re(U,q)}function b(U){for(var $={},q=U.attributes,R=0;R<q.length;R++)$[q[R].nodeName]=q[R].nodeValue;return $}function S(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function I(U,$,q,R,_,W,k){var B=$[q.child]||[],Q=$[q.hasChildren];if(B.length&&(Q=!0,W.classList.add(st.hasChild),_.processSubChild)){var ne=a(U,B,_,++k);W.appendChild(ne)}_.expandCollapse&&Q&&!_.template&&(W.firstElementChild.classList.add(st.iconWrapper),("Left"===_.expandIconPosition?Fr:xe)([U("div",{className:"e-icons "+_.expandIconClass})],W.querySelector("."+st.textContent)))}function P(U,$,q,R,_,W,k,B,Q,ne){var je,ce,ye=C({},e,ne),ae=C({},t,ye.ariaAttributes),be=$,Me=$;"string"!=typeof $&&"number"!=typeof $&&"boolean"!=typeof $&&(je=$,be="boolean"==typeof q[R.text]||"number"==typeof q[R.text]?q[R.text]:q[R.text]||"",Me=q[R.value]),ce=p(je)||p(q[R.id])||""===q[R.id]?B+"-"+Q:B;var ut=U("li",{className:(!0===k?st.group:st.li)+" "+(p(_)?"":_),id:ce,attrs:""!==ae.groupItemRole&&""!==ae.itemRole?{role:!0===k?ae.groupItemRole:ae.itemRole}:{}});return je&&q.hasOwnProperty(R.enabled)&&"false"===q[R.enabled].toString()&&ut.classList.add(st.disabled),k?ut.innerText=be:(ut.setAttribute("data-value",p(Me)?"null":Me),ut.setAttribute("role","option"),je&&q.hasOwnProperty(R.htmlAttributes)&&q[R.htmlAttributes]&&g(ut,q[R.htmlAttributes]),W.length&&!ye.itemNavigable&&xe(W,ut),je&&(q[R.url]||q[R.urlAttributes]&&q[R.urlAttributes].href)?ut.appendChild(G(U,je,R,be,W,ye.itemNavigable)):(W.length&&ye.itemNavigable&&xe(W,ut),ut.appendChild(document.createTextNode(be)))),ut}function H(U){return{li:"e-"+U+"-item",ul:"e-"+U+"-parent e-ul",group:"e-"+U+"-group-item",icon:"e-"+U+"-icon",text:"e-"+U+"-text",check:"e-"+U+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+U+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+U+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function G(U,$,q,R,_,W){var Q,k=xi($,q),B={href:k[q.url]};if(k.hasOwnProperty(q.urlAttributes)&&k[q.urlAttributes]&&(wi(B,k[q.urlAttributes]),B.href=k[q.url]?k[q.url]:k[q.urlAttributes].href),W){Q=U("a",{className:st.text+" "+st.url});var ne=U("div",{className:st.anchorWrap});_&&_.length&&xe(_,ne),ne.appendChild(document.createTextNode(R)),xe([ne],Q)}else Q=U("a",{className:st.text+" "+st.url,innerHTML:R});return g(Q,B),Q}function ee(U,$,q,R,_,W,k){var ye,ae,be,B=C({},e,W),Q=C({},t,B.ariaAttributes),ne=$;"string"!=typeof $&&"number"!=typeof $&&(be=$,ne=q[R.text]||"",ye=p(q._id)?q[R.id]:q._id,ae=!(!$.hasOwnProperty("isHeader")||!$.isHeader));var Me=U("li",{className:(!0===ae?st.group:st.li)+" "+(p(_)?"":_),attrs:""!==Q.groupItemRole&&""!==Q.itemRole?{role:!0===ae?Q.groupItemRole:Q.itemRole}:{}});if(p(ye)?Me.setAttribute("data-uid",S()):Me.setAttribute("data-uid",ye),ae&&W&&W.groupTemplate){var je=wp(W.groupTemplate);k&&"listview"!==k.getModuleName()?(ce=je($,k,"groupTemplate",B.groupTemplateID,!!B.isStringTemplate,null,Me))&&xe(ce,Me):xe(je($,k,"groupTemplate",B.groupTemplateID,!!B.isStringTemplate),Me)}else if(!ae&&W&&W.template){var ce;je=wp(W.template),k&&"listview"!==k.getModuleName()?(ce=je($,k,"template",B.templateID,!!B.isStringTemplate,null,Me))&&xe(ce,Me):xe(je($,k,"template",B.templateID,!!B.isStringTemplate),Me)}else{var ut=U("div",{className:st.textContent,attrs:""!==Q.wrapperRole?{role:Q.wrapperRole}:{}});if(be&&(q[R.url]||q[R.urlAttributes]&&q[R.urlAttributes].href))ut.appendChild(G(U,be,R,ne,null,B.itemNavigable));else{var $t=U("span",{className:st.text,attrs:""!==Q.itemText?{role:Q.itemText}:{}});W&&W.enableHtmlSanitizer?$t.innerText=ne:$t.innerHTML=ne,ut.appendChild($t)}Me.appendChild(ut)}return Me}function ue(U,$,q,R){var _=C({},e,R),W=C({},t,_.ariaAttributes),k=U("ul",{className:(st=H(_.moduleName)).ul+" "+(p(q)?"":q),attrs:""!==W.listRole?{role:W.listRole}:{}});return xe($,k),k}s.createList=function i(U,$,q,R,_){var W=C({},e,q),k=C({},t,W.ariaAttributes),B=v($).typeof;return"string"===B||"number"===B?n(U,$,R,q,_):a(U,$,q,k.level,R,_)},s.createListFromArray=n,s.createListItemFromArray=r,s.createListItemFromJson=o,s.createListFromJson=a,s.getSiblingLI=function l(U,$,q){if(st=H(e.moduleName),U&&U.length){var R,_,W=Array.prototype.slice.call(U);for(R=W[(_=$?h($,W):!0===q?W.length:-1)+(!0===q?-1:1)];R&&(!Rt(R)||R.classList.contains(st.disabled));)R=W[_+=!0===q?-1:1];return R}},s.indexOf=h,s.groupDataSource=function c(U,$,q){void 0===q&&(q="None");var R=C({},s.defaultMappedFields,$),_=(new it).group(R.groupBy),W=d(U,_=u(q,"key",_));U=[];for(var k=0;k<W.length;k++){var B=W[k].items,Q={};Q[R.text]=W[k].key,Q.isHeader=!0;var ye=R.text;"id"===ye&&(Q[ye="text"]=W[k].key),Q._id="group-list-item-"+(W[k].key?W[k].key.toString().trim():"undefined"),Q.items=B,U.push(Q);for(var ae=0;ae<B.length;ae++)U.push(B[ae])}return U},s.addSorting=u,s.getDataSource=d,s.createJsonFromElement=function f(U,$){var q=C({},e,$),R=C({},s.defaultMappedFields,q.fields),_=U.cloneNode(!0),W=[];_.classList.add("json-parent");var k=_.querySelectorAll(".json-parent>li");_.classList.remove("json-parent");for(var B=0;B<k.length;B++){for(var Q=k[B],ne=Q.querySelector("a"),ye=Q.querySelector("ul"),ae={},be=ne?ne.childNodes:Q.childNodes,Me=Object.keys(be),je=0;je<be.length;je++)be[Number(Me[je])].hasChildNodes()||(ae[R.text]=be[Number(Me[je])].textContent);var ce=b(Q);ce.id?(ae[R.id]=ce.id,delete ce.id):ae[R.id]=S(),Object.keys(ce).length&&(ae[R.htmlAttributes]=ce),ne&&(ce=b(ne),Object.keys(ce).length&&(ae[R.urlAttributes]=ce)),ye&&(ae[R.child]=f(ye,$)),W.push(ae)}return W},s.renderContentTemplate=function M(U,$,q,R,_,W){for(var ae,k=U("ul",{className:(st=H(e.moduleName)).ul,attrs:{role:"presentation"}}),B=C({},e,_),Q=C({},s.defaultMappedFields,R),ne=wp($),ye=[],be=S(),Me=0;Me<q.length;Me++){var je=xi(q[Me],Q),ce=q[Me],ut=ce.isHeader;ae="string"==typeof q[Me]||"number"==typeof q[Me]?ce:je[Q.value],B.itemCreating&&"function"==typeof B.itemCreating&&B.itemCreating({dataSource:q,curData:ce,text:ae,options:B,fields:Q}),B.itemCreating&&"function"==typeof B.itemCreating&&(je=xi(q[Me],Q),ae="string"==typeof q[Me]||"number"==typeof q[Me]?ce:je[Q.value]);var We=U("li",{id:be+"-"+Me,className:ut?st.group:st.li,attrs:{role:"presentation"}});if(ut)We.innerText="string"==typeof q[Me]||"number"==typeof q[Me]?ce:je[Q.text];else{var x=ut?B.groupTemplateID:B.templateID;if(ut)W&&"listview"!=W.getModuleName()?(L=ne(ce,W,"headerTemplate",x,!!B.isStringTemplate,null,We))&&xe(L,We):xe(ne(ce,W,"headerTemplate",x,!!B.isStringTemplate),We);else if(W&&"listview"!==W.getModuleName()){var L;(L=ne(ce,W,"template",x,!!B.isStringTemplate,null,We))&&xe(L,We)}else xe(ne(ce,W,"template",x,!!B.isStringTemplate),We);We.setAttribute("data-value",p(ae)?"null":ae),We.setAttribute("role","option")}B.itemCreated&&"function"==typeof B.itemCreated&&B.itemCreated({dataSource:q,curData:ce,text:ae,item:We,options:B,fields:Q}),ye.push(We)}return xe(ye,k),k},s.renderGroupTemplate=function w(U,$,q,R,_,W){for(var k=wp(U),B=C({},s.defaultMappedFields,q),Q=C({},e,_),ne=B.groupBy,ye=0,ae=R;ye<ae.length;ye++){var be=ae[ye],Me={};if(Me[""+ne]=be.textContent,be.innerHTML="",W&&"listview"!==W.getModuleName()){var je=k(Me,W,"groupTemplate",Q.groupTemplateID,!!Q.isStringTemplate,null,be);je&&xe(je,be)}else xe(k(Me,W,"groupTemplate",Q.groupTemplateID,!!Q.isStringTemplate),be)}return R},s.generateId=S,s.generateUL=ue,s.generateIcon=function Je(U,$,q,R){var _=C({},e,R);return st=H(_.moduleName),("Left"===_.expandIconPosition?Fr:xe)([U("div",{className:"e-icons "+_.expandIconClass+" "+(p(q)?"":q)})],$.querySelector("."+st.textContent)),$}}(Ue||(Ue={}));var Z_=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Na=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r};function Th(s,t){for(var e=C({},s),i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];t.indexOf(r)<0&&_u(e,r)}return e}function K_(s,t){var e=40===t?0:s.childElementCount-1,i=e,r=s.querySelector(".e-selected");r&&r.classList.remove("e-selected");for(var o=0,a=s.children.length;o<a;o++)s.children[o].classList.contains("e-focused")&&(i=o,s.children[o].classList.remove("e-focused"),40===t?i++:i--,i===(40===t?s.childElementCount:-1)&&(i=e));-1!==(i=PE(s,s.children[i],i,t))&&(D([s.children[i]],"e-focused"),s.children[i].focus())}function PE(s,t,e,i,n){if(void 0===n&&(n=0),(t.classList.contains("e-separator")||t.classList.contains("e-disabled"))&&(e===(40===i?s.childElementCount-1:0)?e=40===i?0:s.childElementCount-1:40===i?e++:e--),(t=s.children[e]).classList.contains("e-separator")||t.classList.contains("e-disabled")){if(++n===s.childElementCount)return-1;e=PE(s,t,e,i,n)}return e}var fe,jy=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Z_(t,s),Na([m("")],t.prototype,"iconCss",void 0),Na([m("")],t.prototype,"id",void 0),Na([m(!1)],t.prototype,"separator",void 0),Na([m("")],t.prototype,"text",void 0),Na([m("")],t.prototype,"url",void 0),Na([m(!1)],t.prototype,"disabled",void 0),t}(Ze),eY=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Pi=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Ki=function(s){function t(e,i){var n=s.call(this,e,i)||this;return n.isPopupCreated=!0,n}return eY(t,s),t.prototype.preRender=function(){},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.createPopupOnClick&&!this.isPopupCreated?(this.createPopup(),this.openPopUp()):this.closePopup()},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,i){for(var n,r=this.items.length,o=0,a=this.items.length;o<a;o++)if(i===this.items[o].text){r=o;break}for(var l=e.length-1;l>=0;l--)n=new jy(this,"items",e[l],!0),this.items.splice(r,0,n);this.canOpen()||this.createItems()},t.prototype.removeItems=function(e,i){for(var n=!1,r=0,o=e.length;r<o;r++)for(var a=0,l=this.items.length;a<l;a++)if(e[r]===(i?this.items[a].id:this.items[a].text)){this.items.splice(a,1),n=!0;break}n&&this.getULElement()&&this.createItems()},t.prototype.createPopup=function(){var e,i=this.createElement("div",{className:"e-dropdown-popup",id:this.element.id+"-popup"});document.body.appendChild(i),this.dropDown=new Rs(i,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),re(this.element,((e={})["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e.type="button",e["aria-label"]=this.element.textContent?this.element.textContent:"dropdownbutton",e)),this.cssClass&&D([i],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0},t.prototype.getTargetElement=function(){return"string"==typeof this.target?T(this.target):this.target},t.prototype.createItems=function(e){var r,o,a,i=this.items,n=this.hasIcon(this.items,"iconCss"),h=this.getULElement();h?h.innerHTML="":h=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var c=0;c<i.length;c++){var u=(o=i[c]).text;a=this.createElement("li",{innerHTML:o.url?"":u,className:o.separator?"e-item e-separator":"e-item",attrs:o.separator?{role:"separator",tabindex:"-1"}:{role:"menuitem",tabindex:"-1","aria-label":u},id:o.id?o.id:at("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?a.textContent=o.url?"":u:a.innerHTML=o.url?"":u,o.url&&(a.appendChild(this.createAnchor(o)),a.classList.add("e-url")),o.iconCss?(r=this.createElement("span",{className:"e-menu-icon "+o.iconCss}),o.url?a.childNodes[0].appendChild(r):a.insertBefore(r,a.childNodes[0])):n&&!o.separator&&a.classList.add("e-blank-icon"),o.disabled&&a.classList.add("e-disabled"),this.trigger("beforeItemRender",{item:o,element:a}),h.appendChild(a)}e&&this.getPopUpElement().appendChild(h),n&&function J_(s,t){var e=[].slice.call(s.getElementsByClassName("e-blank-icon"));if(t&&[].slice.call(s.getElementsByClassName("e-item")).forEach(function(h){(h.style.paddingLeft||h.style.paddingRight)&&h.removeAttribute("style")}),e.length){var n=s.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!p(n)){n.classList.contains("e-url")&&(n=n.querySelector(".e-menu-url"));var o,r=n.querySelector(".e-menu-icon"),a=s.classList.contains("e-rtl");o=a?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var l=parseInt(getComputedStyle(r).fontSize,10)+parseInt(getComputedStyle(r)[o.margin],10)+parseInt(getComputedStyle(n).paddingLeft,10)+"px";e.forEach(function(h){h.classList.contains("e-url")?h.querySelector(".e-menu-url").style[o.padding]=l:h.style[o.padding]=l})}}}(this.getPopUpElement())},t.prototype.hasIcon=function(e,i){for(var n=0,r=e.length;n<r;n++)if(e[n][""+i])return!0;return!1},t.prototype.createAnchor=function(e){var i=this.enableHtmlSanitizer?Tt.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:i,attrs:{href:e.url}})},t.prototype.initialize=function(){this.button=new Zi({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=at("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.target&&!this.isColorPicker()||!this.createPopupOnClick?this.createPopup():this.isPopupCreated=!1},t.prototype.isColorPicker=function(){if(!this.element)return!1;var e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))},t.prototype.appendArrowSpan=function(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf("e-vertical")>-1?"bottom":"right")+" e-caret"}))},t.prototype.setActiveElem=function(e){this.activeElem=e},t.prototype.getModuleName=function(){return"dropdown-btn"},t.prototype.canOpen=function(){var e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e},t.prototype.destroy=function(){var i,e=this;s.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName()&&(this.element.querySelector("span.e-caret")&&X(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&N([this.element],i),N(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(function(r){e.element.removeAttribute(r)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents())},t.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var e=document.getElementById(this.getPopUpElement().id);e&&(N([e],["e-popup-open","e-popup-close"]),X(e))}y.remove(this.getPopUpElement(),"click",this.clickHandler),y.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&this.dropDown&&(this.dropDown.element=null,this.dropDown=void 0)}this.isPopupCreated=!1},t.prototype.getPopUpElement=function(){var e=null;if(!this.dropDown&&this.activeElem[0].classList.contains("e-split-btn")){var i=Qe(this.activeElem[1],"dropdown-btn");i&&(this.dropDown=i.dropDown)}return this.dropDown&&(e=this.dropDown.element),e},t.prototype.getULElement=function(){var e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e},t.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||y.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),y.add(this.element,"click",this.clickHandler,this),y.add(this.element,"keydown",this.keyBoardHandler,this)},t.prototype.popupWireEvents=function(){this.delegateMousedownHandler||(this.delegateMousedownHandler=this.mousedownHandler.bind(this));var e=this.getPopUpElement();this.createPopupOnClick&&y.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(y.add(e,"click",this.clickHandler,this),y.add(e,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&y.add(e,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=zi(e,{selector:".e-item"})},t.prototype.popupUnWireEvents=function(){var e=this.getPopUpElement();this.createPopupOnClick&&y.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(y.remove(e,"click",this.clickHandler),y.remove(e,"keydown",this.keyBoardHandler),this.closeActionEvents&&y.remove(e,this.closeActionEvents,this.focusoutHandler)),Wn&&this.rippleFn&&this.rippleFn()},t.prototype.keyBoardHandler=function(e){if(e.target!==this.element||9!==e.keyCode&&(e.altKey||40!==e.keyCode)&&38!==e.keyCode)switch(e.keyCode){case 38:case 40:!e.altKey||38!==e.keyCode&&40!==e.keyCode?this.upDownKeyHandler(e):this.keyEventHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e)}},t.prototype.upDownKeyHandler=function(e){this.target&&(38===e.keyCode||40===e.keyCode)||(e.preventDefault(),K_(this.getULElement(),e.keyCode))},t.prototype.keyEventHandler=function(e){if(!this.target||13!==e.keyCode&&9!==e.keyCode){if(13===e.keyCode&&this.activeElem[0].classList.contains("e-split-btn"))return void this.activeElem[0].focus();e.target&&e.target.className.indexOf("e-edit-template")>-1&&32===e.keyCode||(9!==e.keyCode&&e.preventDefault(),27===e.keyCode||38===e.keyCode||9===e.keyCode?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))}},t.prototype.getLI=function(e){return"LI"===e.tagName?e:F(e,"li")},t.prototype.mousedownHandler=function(e){var i=e.target;this.dropDown&&!this.canOpen()&&!F(i,'[id="'+this.getPopUpElement().id+'"]')&&!F(i,'[id="'+this.element.id+'"]')&&this.closePopup(e)},t.prototype.focusoutHandler=function(e){if(this.isPopupCreated&&!this.canOpen()){var i=e.relatedTarget;if(i&&i.className.indexOf("e-item")>-1){var n=this.getLI(i);if(n){var r=Array.prototype.indexOf.call(this.getULElement().children,n),o=this.items[r];o&&this.trigger("select",{element:n,item:o})}}this.closePopup(e)}},t.prototype.clickHandler=function(e){var i=e.target;if(F(i,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&""!==this.target&&!this.isColorPicker()?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if(F(i,'[id="'+this.getPopUpElement().id+'"]')){var r=void 0,o=void 0,a=this.getLI(i);a&&(r=Array.prototype.indexOf.call(this.getULElement().children,a),(o=this.items[r])&&this.trigger("select",{element:a,item:o}),this.closePopup(e,this.activeElem[0]))}},t.prototype.openPopUp=function(e){var i=this;void 0===e&&(e=null);var n=this.getPopUpElement();if(this.target)if(this.activeElem.length>1){var r=Qe(this.activeElem[0],"split-btn");r.isReact&&n.childNodes.length<1&&(r.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&n.childNodes.length<1&&(this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());else this.createItems(!0);var o=this.getULElement();this.popupWireEvents(),this.trigger("beforeOpen",{element:o,items:this.items,event:e,cancel:!1},function(l){if(!l.cancel){var h=i.getULElement();if(i.dropDown.show(null,i.element),D([i.element],"e-active"),i.element.setAttribute("aria-expanded","true"),i.element.setAttribute("aria-owns",i.getPopUpElement().id),h&&h.focus(),i.enableRtl&&"0px"!==h.parentElement.style.left){var c;c=i.element.parentElement&&i.element.parentElement.classList.contains("e-split-btn-wrapper")?i.element.parentElement.offsetWidth:i.element.offsetWidth;var u=h.parentElement.offsetWidth-c,d=parseFloat(h.parentElement.style.left)-u;d<0&&(d=0),h.parentElement.style.left=d+"px"}i.trigger("open",{element:h,items:i.items})}})},t.prototype.closePopup=function(e,i){var n=this;void 0===e&&(e=null);var r=this.getULElement();this.trigger("beforeClose",{element:r,items:this.items,event:e,cancel:!1},function(a){if(a.cancel)r&&r.focus();else{var l=n.getPopUpElement();l&&y.remove(l,"keydown",n.keyBoardHandler),n.popupUnWireEvents();var h=n.getULElement(),c=void 0;h&&(c=h.querySelector(".e-selected")),c&&c.classList.remove("e-selected"),n.dropDown.hide(),N(n.activeElem,"e-active"),n.element.setAttribute("aria-expanded","false"),n.element.removeAttribute("aria-owns"),i&&i.focus(),n.trigger("close",{element:h,items:n.items}),!n.target&&h&&X(h),(!n.target||n.isColorPicker())&&n.createPopupOnClick&&n.destroyPopup()}})},t.prototype.unWireEvents=function(){this.createPopupOnClick||y.remove(document,"mousedown touchstart",this.delegateMousedownHandler),y.remove(this.element,"click",this.clickHandler),y.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(y.remove(this.getPopUpElement(),"click",this.clickHandler),y.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler))},t.prototype.onPropertyChanged=function(e,i){var r;this.button.setProperties(Th(e,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.isPopupCreated&&(r=this.getPopUpElement(),this.dropDown.setProperties(Th(e,["enableRtl"])));for(var o=0,a=Object.keys(e);o<a.length;o++)switch(a[o]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(e.cssClass.indexOf("e-vertical")>-1||i.cssClass.indexOf("e-vertical")>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var h=this.element.querySelector("span.e-caret");e.cssClass.indexOf("e-vertical")>-1?ki(h,["e-icon-bottom"],["e-icon-right"]):ki(h,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(i.cssClass&&N([r],i.cssClass.split(" ")),e.cssClass&&D([r],e.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup()}},t.prototype.focusIn=function(){this.element.focus()},Pi([m("")],t.prototype,"content",void 0),Pi([m("")],t.prototype,"cssClass",void 0),Pi([m(!1)],t.prototype,"disabled",void 0),Pi([m("")],t.prototype,"iconCss",void 0),Pi([m("Left")],t.prototype,"iconPosition",void 0),Pi([m(!1)],t.prototype,"enableHtmlSanitizer",void 0),Pi([mn([],jy)],t.prototype,"items",void 0),Pi([m(!1)],t.prototype,"createPopupOnClick",void 0),Pi([m("")],t.prototype,"target",void 0),Pi([m("")],t.prototype,"closeActionEvents",void 0),Pi([E()],t.prototype,"beforeItemRender",void 0),Pi([E()],t.prototype,"beforeOpen",void 0),Pi([E()],t.prototype,"beforeClose",void 0),Pi([E()],t.prototype,"close",void 0),Pi([E()],t.prototype,"open",void 0),Pi([E()],t.prototype,"select",void 0),Pi([E()],t.prototype,"created",void 0),Pi([Be],t)}(Mt),tY=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Hi=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Ip="e-rtl",Ay="EJS-SPLITBUTTON",iY=function(s){function t(e,i){return s.call(this,e,i)||this}return tY(t,s),t.prototype.preRender=function(){var e=this.element;if(e.tagName===Ay){for(var i=j("ej2_instances",e),n=this.createElement("button",{attrs:{type:"button"}}),r=this.createElement(Ay,{className:"e-"+this.getModuleName()+"-wrapper"}),o=0,a=e.attributes.length;o<a;o++)n.setAttribute(e.attributes[o].nodeName,e.attributes[o].nodeValue);e.parentNode.insertBefore(r,e),X(e),r.appendChild(e=n),Oe("ej2_instances",i,e),this.wrapper=r,this.element=e}this.element.id||(this.element.id=at("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},t.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,i){s.prototype.addItems.call(this,e,i),this.secondaryBtnObj.items=this.items},t.prototype.removeItems=function(e,i){s.prototype.removeItems.call(this,e,i),this.secondaryBtnObj.items=this.items},t.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(Ip),this.cssClass&&D([this.wrapper],this.cssClass.replace(/\s+/g," ").trim().split(" "))},t.prototype.createPrimaryButton=function(){this.primaryBtnObj=new Zi({cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled}),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},t.prototype.createSecondaryButton=function(){var e=this,i=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(i),this.secondaryBtnObj=new Ki({cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick,beforeItemRender:function(r){e.createPopupOnClick&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown),e.trigger("beforeItemRender",r)},open:function(r){e.trigger("open",r)},close:function(r){e.trigger("close",r)},select:function(r){e.trigger("select",r)},beforeOpen:function(r){e.createPopupOnClick&&0==e.items.length&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown);var o=new Op;return e.trigger("beforeOpen",r,function(a){o.resolve(a)}),o},beforeClose:function(r){var o=new Op;return e.trigger("beforeClose",r,function(a){o.resolve(a)}),o}}),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(i),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.isPopupCreated=this.secondaryBtnObj.isPopupCreated,this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right"),this.disabled&&this.wrapper.classList.add("e-splitbtn-disabled")},t.prototype.setAria=function(){re(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})},t.prototype.getModuleName=function(){return"split-btn"},t.prototype.toggle=function(){this.secondaryBtnObj.toggle()},t.prototype.destroy=function(){var e=this,i=[Ip];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var n=document.getElementById(this.element.id);n&&n.parentElement===this.wrapper&&(this.wrapper.tagName===Ay?(this.wrapper.innerHTML="",N([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),N([this.wrapper],this.cssClass.split(" "))):(N([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(r){e.element.removeAttribute(r)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),He(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),s.prototype.destroy.call(this),this.element.getAttribute("class")||this.element.removeAttribute("class")},t.prototype.wireEvents=function(){y.add(this.element,"click",this.primaryBtnClickHandler,this),new yn(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow",enter:"enter"}})},t.prototype.unWireEvents=function(){y.remove(this.element,"click",this.primaryBtnClickHandler),oi(this.element,yn).destroy()},t.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},t.prototype.btnKeyBoardHandler=function(e){switch(e.action){case"altdownarrow":this.clickHandler(e);break;case"enter":this.clickHandler(e),this.getPopUpElement()&&!this.getPopUpElement().classList.contains("e-popup-close")?(this.element.classList.remove("e-active"),this.secondaryBtnObj.element.classList.add("e-active")):this.secondaryBtnObj.element.classList.remove("e-active")}},t.prototype.onPropertyChanged=function(e,i){var n=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(Th(e,n)),n=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(Th(e,n));for(var r=0,o=Object.keys(e);r<o.length;r++)switch(o[r]){case"cssClass":i.cssClass&&N([this.wrapper],i.cssClass.split(" ")),D([this.wrapper],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?D([this.wrapper],Ip):N([this.wrapper],Ip);break;case"disabled":e.disabled?D([this.wrapper],"e-splitbtn-disabled"):N([this.wrapper],"e-splitbtn-disabled")}},t.prototype.focusIn=function(){this.element.focus()},Hi([m("")],t.prototype,"content",void 0),Hi([m("")],t.prototype,"cssClass",void 0),Hi([m(!1)],t.prototype,"disabled",void 0),Hi([m("")],t.prototype,"iconCss",void 0),Hi([m("Left")],t.prototype,"iconPosition",void 0),Hi([m(!1)],t.prototype,"createPopupOnClick",void 0),Hi([mn([],jy)],t.prototype,"items",void 0),Hi([m("")],t.prototype,"target",void 0),Hi([E()],t.prototype,"beforeItemRender",void 0),Hi([E()],t.prototype,"beforeOpen",void 0),Hi([E()],t.prototype,"beforeClose",void 0),Hi([E()],t.prototype,"click",void 0),Hi([E()],t.prototype,"close",void 0),Hi([E()],t.prototype,"open",void 0),Hi([E()],t.prototype,"select",void 0),Hi([E()],t.prototype,"created",void 0),Hi([Be],t)}(Ki),Op=function(){return function s(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}(),se={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",FLOATTEXTCONTENT:"e-float-text-content",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"};!function(s){var t,e=!0;function n(x){r(x.floatLabelType,x.element),x.element.addEventListener("focus",function(){var L=g(this);(L.classList.contains("e-input-group")||L.classList.contains("e-outline")||L.classList.contains("e-filled"))&&L.classList.add("e-input-focus"),"Auto"===x.floatLabelType&&setTimeout(function(){s.calculateWidth(x.element,L)},80)}),x.element.addEventListener("blur",function(){var L=g(this);(L.classList.contains("e-input-group")||L.classList.contains("e-outline")||L.classList.contains("e-filled"))&&L.classList.remove("e-input-focus"),"Auto"===x.floatLabelType&&""===x.element.value&&setTimeout(function(){s.calculateWidth(x.element,L)},80)}),x.element.addEventListener("input",function(){r(t,x.element)})}function r(x,L){var K=L.value;""!==K&&!p(K)&&L.parentElement?L.parentElement.classList.add("e-valid-input"):"Always"!==x&&L.parentElement&&L.parentElement.classList.remove("e-valid-input")}function o(){var x=g(this).getElementsByClassName("e-float-text")[0];p(x)||(D([x],se.LABELTOP),x.classList.contains(se.LABELBOTTOM)&&N([x],se.LABELBOTTOM))}function a(){var x=g(this);if(x.getElementsByTagName("textarea")[0]?""===x.getElementsByTagName("textarea")[0].value:""===x.getElementsByTagName("input")[0].value){var L=x.getElementsByClassName("e-float-text")[0];p(L)||(L.classList.contains(se.LABELTOP)&&N([L],se.LABELTOP),D([L],se.LABELBOTTOM))}}function l(x){x.addEventListener("focus",o),x.addEventListener("blur",a)}function c(x,L,K){var he=p(K)?lt:K;"Auto"===x.floatLabelType&&l(x.element),p(L.container)?(L.container=I(x,se.FLOATINPUT,se.FLOATCUSTOMTAG,"div",he),L.container.classList.add(se.INPUTGROUP),x.element.parentNode&&x.element.parentNode.insertBefore(L.container,x.element)):(p(x.customTag)||L.container.classList.add(se.FLOATCUSTOMTAG),L.container.classList.add(se.FLOATINPUT));var me=he("span",{className:se.FLOATLINE}),oe=he("label",{className:se.FLOATTEXT});if(!p(x.element.id)&&""!==x.element.id&&(oe.id="label_"+x.element.id.replace(/ /g,"_"),re(x.element,{"aria-labelledby":oe.id})),!p(x.element.placeholder)&&""!==x.element.placeholder&&(oe.innerText=P(x.element.placeholder),x.element.removeAttribute("placeholder")),!p(x.properties)&&!p(x.properties.placeholder)&&""!==x.properties.placeholder&&(oe.innerText=P(x.properties.placeholder)),oe.innerText||L.container.classList.add(se.NOFLOATLABEL),L.container.classList.contains("e-float-icon-left")){var Dt=L.container.querySelector(".e-input-in-wrap");Dt.appendChild(x.element),Dt.appendChild(me),Dt.appendChild(oe)}else L.container.appendChild(x.element),L.container.appendChild(me),L.container.appendChild(oe);v(x.element.value,oe),"Always"===x.floatLabelType&&(oe.classList.contains(se.LABELBOTTOM)&&N([oe],se.LABELBOTTOM),D([oe],se.LABELTOP)),"Auto"===x.floatLabelType&&(x.element.addEventListener("input",function(nr){v(x.element.value,oe,x.element)}),x.element.addEventListener("blur",function(nr){v(x.element.value,oe)})),p(x.element.getAttribute("id"))||oe.setAttribute("for",x.element.getAttribute("id"))}function u(x,L){"Always"===x&&L.classList.contains("e-outline")&&L.classList.add("e-valid-input")}function f(x,L,K){p(L)||(x&&!K?N([L],se.CLEARICONHIDE):D([L],se.CLEARICONHIDE))}function v(x,L,K){void 0===K&&(K=null),x?(D([L],se.LABELTOP),L.classList.contains(se.LABELBOTTOM)&&N([L],se.LABELBOTTOM)):(null==K||K!==document.activeElement)&&(L.classList.contains(se.LABELTOP)&&N([L],se.LABELTOP),D([L],se.LABELBOTTOM))}function g(x){var L=p(x.parentNode)?x:x.parentNode;return L&&L.classList.contains("e-input-in-wrap")&&(L=L.parentNode),L}function M(x,L,K){(void 0===e||e)&&L.addEventListener("click",function(he){x.classList.contains(se.DISABLE)||x.readOnly||(he.preventDefault(),x!==document.activeElement&&x.focus(),x.value="",D([L],se.CLEARICONHIDE))}),x.addEventListener("input",function(he){f(x.value,L)}),x.addEventListener("focus",function(he){f(x.value,L,x.readOnly)}),x.addEventListener("blur",function(he){setTimeout(function(){p(L)||(D([L],se.CLEARICONHIDE),L=!p(x)&&x.classList.contains("e-combobox")?null:L)},200)})}function S(x,L){if(g(x).classList.contains(se.FLOATINPUT)&&"Auto"===L){var he=g(x).getElementsByClassName("e-float-text")[0];v(x.value,he,x)}}function I(x,L,K,he,me){var Dt,oe=p(me)?lt:me;return p(x.customTag)?Dt=oe(he,{className:L}):(Dt=oe(x.customTag,{className:L})).classList.add(K),Dt.classList.add("e-control-wrapper"),Dt}function P(x){var L="";if(!p(x)&&""!==x){var K=document.createElement("span");K.innerHTML='<input  placeholder="'+x+'"/>',L=K.children[0].placeholder}return L}function G(x,L,K){!p(K)&&""!==K&&N(L,K.split(" ")),!p(x)&&""!==x&&D(L,x.split(" "))}function ee(x,L,K){var he="multiselect"===K?x:x.clientWidth-parseInt(getComputedStyle(x,null).getPropertyValue("padding-left"),10);p(L.getElementsByClassName("e-float-text-content")[0])||(L.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&L.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(he<L.getElementsByClassName("e-float-text-content")[0].clientWidth||he===L.getElementsByClassName("e-float-text-content")[0].clientWidth)&&L.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}function Je(x,L){x=P(x);var K=g(L);K.classList.contains(se.FLOATINPUT)?p(x)||""===x?(K.classList.add(se.NOFLOATLABEL),K.getElementsByClassName("e-float-text-content")[0]?K.getElementsByClassName(se.FLOATTEXT)[0].children[0].textContent="":K.getElementsByClassName(se.FLOATTEXT)[0].textContent=""):(K.getElementsByClassName("e-float-text-content")[0]?K.getElementsByClassName(se.FLOATTEXT)[0].children[0].textContent=x:K.getElementsByClassName(se.FLOATTEXT)[0].textContent=x,K.classList.remove(se.NOFLOATLABEL),L.removeAttribute("placeholder")):p(x)||""===x?L.removeAttribute("placeholder"):re(L,{placeholder:x})}function U(x,L,K){x?re(L,{readonly:""}):L.removeAttribute("readonly"),p(K)||S(L,K)}function $(x,L){x?D(L,se.RTL):N(L,se.RTL)}function q(x,L,K,he){var me={disabled:"disabled","aria-disabled":"true"},oe=!p(he);x?(L.classList.remove(se.DISABLE),_(me,L),oe&&N([he],se.DISABLE)):(L.classList.add(se.DISABLE),W(me,L),oe&&D([he],se.DISABLE)),p(K)||S(L,K)}function R(x,L,K,he,me){var oe=p(me)?lt:me;x?K.clearButton=function b(x,L,K,he){var oe=(p(he)?lt:he)("span",{className:se.CLEARICON}),Dt=L.container;return p(K)?(L.container.classList.contains(se.FLOATINPUT)?L.container.querySelector("."+se.FLOATTEXT):x).insertAdjacentElement("afterend",oe):Dt.appendChild(oe),D([oe],se.CLEARICONHIDE),M(x,oe),oe.setAttribute("aria-label","close"),oe}(L,K,he,oe):(He(K.clearButton),K.clearButton=null)}function _(x,L){for(var K=0,he=Object.keys(x);K<he.length;K++){var me=he[K],oe=g(L);"disabled"===me&&L.classList.remove(se.DISABLE),"disabled"===me&&oe.classList.contains(se.INPUTGROUP)&&oe.classList.remove(se.DISABLE),"placeholder"===me&&oe.classList.contains(se.FLOATINPUT)?oe.getElementsByClassName(se.FLOATTEXT)[0].textContent="":L.removeAttribute(me)}}function W(x,L){for(var K=0,he=Object.keys(x);K<he.length;K++){var me=he[K],oe=g(L);"disabled"===me&&L.classList.add(se.DISABLE),"disabled"===me&&oe.classList.contains(se.INPUTGROUP)&&oe.classList.add(se.DISABLE),"placeholder"===me&&oe.classList.contains(se.FLOATINPUT)?oe.getElementsByClassName(se.FLOATTEXT)[0].textContent=x[""+me]:L.setAttribute(me,x[""+me])}}function Q(x,L){if(x.classList.contains("e-outline")&&x.getElementsByClassName("e-float-text")[0]){var K=L("span",{className:se.FLOATTEXTCONTENT});K.innerHTML=x.getElementsByClassName("e-float-text")[0].innerHTML,x.getElementsByClassName("e-float-text")[0].innerHTML="",x.getElementsByClassName("e-float-text")[0].appendChild(K)}}function ye(x,L,K){var he=[];he.push(K);var me=p(K)?L.querySelectorAll(".e-input-group-icon"):he;if(x&&me.length>0)for(var oe=0;oe<me.length;oe++)me[parseInt(oe.toString())].addEventListener("mousedown",be,!1),me[parseInt(oe.toString())].addEventListener("mouseup",Me,!1);else if(me.length>0)for(oe=0;oe<me.length;oe++)me[parseInt(oe.toString())].removeEventListener("mousedown",be,this),me[parseInt(oe.toString())].removeEventListener("mouseup",Me,this)}function be(){for(var L=this.parentElement;!L.classList.contains("e-input-group");)L=L.parentElement;!function ae(x,L){!x.classList.contains("e-disabled")&&!x.querySelector("input").readOnly&&L.classList.add("e-input-btn-ripple")}(L,this)}function Me(){var x=this;setTimeout(function(){x.classList.remove("e-input-btn-ripple")},500)}function je(x,L){var K=L("span",{className:x});return K.classList.add("e-input-group-icon"),K}function ut(x,L,K,he){var me=p(he)?lt:he,oe=je(x,me);L.classList.add("e-float-icon-left");var Dt=L.querySelector(".e-input-in-wrap");if(p(Dt)){Dt=me("span",{className:"e-input-in-wrap"}),K.parentNode.insertBefore(Dt,K);var nr=L.querySelectorAll(K.tagName+" ~ *");Dt.appendChild(K);for(var tn=0;tn<nr.length;tn++)Dt.appendChild(nr[parseInt(tn.toString())])}return Dt.parentNode.insertBefore(oe,Dt),ye(!0,L,oe),oe}function $t(x,L,K){var me=je(x,p(K)?lt:K);return(L.classList.contains("e-float-icon-left")?L.querySelector(".e-input-in-wrap"):L).appendChild(me),ye(!0,L,me),me}function We(x,L){"hidden"===L.type?x.classList.add("e-hidden"):x.classList.contains("e-hidden")&&x.classList.remove("e-hidden")}s.createInput=function i(x,L){var K=p(L)?lt:L,he={container:null,buttons:[],clearButton:null};if(t=x.floatLabelType,e=x.bindClearAction,p(x.floatLabelType)||"Never"===x.floatLabelType?(he.container=I(x,se.INPUTGROUP,se.INPUTCUSTOMTAG,"span",K),x.element.parentNode.insertBefore(he.container,x.element),D([x.element],se.INPUT),he.container.appendChild(x.element)):c(x,he,K),n(x),!p(x.properties)&&!p(x.properties.showClearButton)&&x.properties.showClearButton&&(R(x.properties.showClearButton,x.element,he,!0,K),he.clearButton.setAttribute("role","button"),he.container.classList.contains(se.FLOATINPUT)&&D([he.container],se.INPUTGROUP)),!p(x.buttons))for(var me=0;me<x.buttons.length;me++)he.buttons.push($t(x.buttons[me],he.container,K));return!p(x.element)&&"TEXTAREA"===x.element.tagName&&D([he.container],se.TEXTAREA),We(he.container,x.element),Q((he=function d(x,L){if(!p(x.properties))for(var K=0,he=Object.keys(x.properties);K<he.length;K++)switch(he[K]){case"cssClass":G(x.properties.cssClass,[L.container]),u(x.floatLabelType,L.container);break;case"enabled":q(x.properties.enabled,x.element,x.floatLabelType,L.container);break;case"enableRtl":$(x.properties.enableRtl,[L.container]);break;case"placeholder":Je(x.properties.placeholder,x.element);break;case"readonly":U(x.properties.readonly,x.element)}return L}(x,he)).container,K),he},s.bindInitialEvent=n,s.wireFloatingEvents=l,s.wireClearBtnEvents=M,s.destroy=function w(){},s.setValue=function H(x,L,K,he){if(L.value=x,"Auto"===K&&""===x&&ee(L,L.parentElement),!p(K)&&"Auto"===K&&S(L,K),!p(he)&&he){var me=g(L);if(!p(me)){var oe=me.getElementsByClassName(se.CLEARICON)[0];p(oe)||(L.value&&!p(me)&&me.classList.contains("e-input-focus")?N([oe],se.CLEARICONHIDE):D([oe],se.CLEARICONHIDE))}}r(K,L)},s.setCssClass=G,s.calculateWidth=ee,s.setWidth=function ue(x,L){"number"==typeof x?L.style.width=te(x):"string"==typeof x&&(L.style.width=x.match(/px|%|em/)?x:te(x)),ee(L.firstChild,L)},s.setPlaceholder=Je,s.setReadonly=U,s.setEnableRtl=$,s.setEnabled=q,s.setClearButton=R,s.removeAttributes=_,s.addAttributes=W,s.removeFloating=function k(x){var L=x.container;if(!p(L)&&L.classList.contains(se.FLOATINPUT)){var K=L.querySelector("textarea")?L.querySelector("textarea"):L.querySelector("input"),he=L.querySelector("."+se.FLOATTEXT).textContent,me=null!==L.querySelector(".e-clear-icon");X(L.querySelector("."+se.FLOATLINE)),X(L.querySelector("."+se.FLOATTEXT)),ki(L,[se.INPUTGROUP],[se.FLOATINPUT]),function h(x){x.removeEventListener("focus",o),x.removeEventListener("blur",a)}(K),re(K,{placeholder:he}),K.classList.add(se.INPUT),!me&&"INPUT"===K.tagName&&K.removeAttribute("required")}},s.addFloating=function B(x,L,K,he){var me=p(he)?lt:he,oe=F(x,"."+se.INPUTGROUP);if(t=L,"Never"!==L){var Dt=oe.tagName,nr={element:x,floatLabelType:L,customTag:Dt="DIV"!==Dt&&"SPAN"!==Dt?Dt:null,properties:{placeholder:K}},tn=oe.querySelector(".e-clear-icon"),Fo={container:oe};x.classList.remove(se.INPUT),c(nr,Fo,me),Q(Fo.container,me),ee(nr.element,Fo.container);var rl=oe.classList.contains("e-float-icon-left");if(p(tn)&&(tn=rl?oe.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):oe.querySelector(".e-input-group-icon")),p(tn))rl&&(tn=oe.querySelector(".e-input-group-icon"));else{var AV=oe.querySelector("."+se.FLOATLINE),LV=oe.querySelector("."+se.FLOATTEXT),Kb=rl?oe.querySelector(".e-input-in-wrap"):oe;Kb.insertBefore(x,tn),Kb.insertBefore(AV,tn),Kb.insertBefore(LV,tn)}}u(L,x.parentElement)},s.createSpanElement=Q,s.setRipple=function ne(x,L){for(var K=0;K<L.length;K++)ye(x,L[parseInt(K.toString())].container)},s.addIcon=function ce(x,L,K,he,me){var oe="string"==typeof L?L.split(","):L;if("append"===x.toLowerCase())for(var Dt=0,nr=oe;Dt<nr.length;Dt++)$t(nr[Dt],K,me);else for(var Fo=0,rl=oe;Fo<rl.length;Fo++)ut(rl[Fo],K,he,me);K.getElementsByClassName("e-input-group-icon")[0]&&K.getElementsByClassName("e-float-text-overflow")[0]&&K.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},s.prependSpan=ut,s.appendSpan=$t,s.validateInputType=We}(fe||(fe={}));var sY=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ft=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},ky="e-input-group-icon",zy="e-spin-up",Ry="e-error",ka="increment",Eh="decrement",lY=new RegExp("^(-)?(\\d*)$"),AE="e-input-focus",LE=["title","style","class"],NE=0,Tp=function(s){function t(e,i){var n=s.call(this,e,i)||this;return n.isVue=!1,n.preventChange=!1,n.isAngular=!1,n.isDynamicChange=!1,n.numericOptions=e,n}return sY(t,s),t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=j("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),N([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=F(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var i=this.createElement("input"),n=0;n<this.element.attributes.length;n++){var r=this.element.attributes[n].nodeName;"id"!==r&&"class"!==r?(i.setAttribute(this.element.attributes[n].nodeName,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML):"class"===r&&i.setAttribute(r,this.element.className.split(" ").filter(function(a){return 0!==a.indexOf("ng-")}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(i),this.element=i,Oe("ej2_instances",e,this.element)}re(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"}),this.l10n=new Hr("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",at("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!p(F(this.element,"fieldset"))&&F(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var n=0,r=e?p(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];n<r.length;n++){var o=r[n];if(!p(this.element.getAttribute(o)))switch(o){case"disabled":if(p(this.numericOptions)||void 0===this.numericOptions.enabled||e){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!e)}break;case"readonly":if(p(this.numericOptions)||void 0===this.numericOptions.readonly||e){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!e)}break;case"placeholder":(p(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(p(this.numericOptions)||void 0===this.numericOptions.value||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));this.setProperties(Oe(o,h,{}),!e)}break;case"min":if(p(this.numericOptions)||void 0===this.numericOptions.min||e){var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==c&&!isNaN(c)&&this.setProperties(Oe(o,c,{}),!e)}break;case"max":if(p(this.numericOptions)||void 0===this.numericOptions.max||e){var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==u&&!isNaN(u)&&this.setProperties(Oe(o,u,{}),!e)}break;case"step":if(p(this.numericOptions)||void 0===this.numericOptions.step||e){var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==d&&!isNaN(d)&&this.setProperties(Oe(o,d,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(o);break;case"name":this.inputName=this.element.getAttribute(o);break;default:var f=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));(null!==f&&!isNaN(f)||"value"===o)&&this.setProperties(Oe(o,f,{}),!0)}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new sh(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==j("currency",this)&&(Oe("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;!p(this.cssClass)&&""!==this.cssClass&&(e=this.getNumericValidClassList(this.cssClass));var i=fe.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&re(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),re(this.hiddenInput,this.isAngular&&"EJS-NUMERICTEXTBOX"===this.angularTagName&&this.cloneElement.id.length>0?{name:this.cloneElement.id}:{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&re(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var i={};if(e)i=this.htmlAttributes;else for(var n=0;n<this.element.attributes.length;n++)i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name);for(var r=0,o=Object.keys(i);r<o.length;r++){var a=o[r];0===a.indexOf("data")&&this.hiddenInput.setAttribute(a,i[""+a])}},t.prototype.updateHTMLAttrToElement=function(){if(!p(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];LE.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[""+n])}},t.prototype.updateCssClass=function(e,i){fe.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(i))},t.prototype.getNumericValidClassList=function(e){var i=e;return!p(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.updateHTMLAttrToWrapper=function(){if(!p(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(LE.indexOf(n)>-1)if("class"===n){var r=this.getNumericValidClassList(this.htmlAttributes[""+n]);""!==r&&D([this.container],r.split(" "))}else if("style"===n){var o=this.container.getAttribute(n);o=p(o)?this.htmlAttributes[""+n]:o+this.htmlAttributes[""+n],this.container.setAttribute(n,o)}else this.container.setAttribute(n,this.htmlAttributes[""+n])}},t.prototype.setElementWidth=function(e){p(e)||("number"==typeof e?this.container.style.width=te(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:te(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=fe.appendSpan(ky+" e-spin-down",this.container,this.createElement),re(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=fe.appendSpan(ky+" "+zy,this.container,this.createElement),re(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&re(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&re(this.element,{"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,i){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(i)},t.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,i){this.isInteract=!0;var n=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(n,this.step,e)),this.raiseChangeEvent(i)},t.prototype.checkErrorClass=function(){this.isValidState?N([this.container],Ry):D([this.container],Ry),re(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&y.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",F(this.element,"form")){var n=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}},t.prototype.resetFormHandler=function(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)},t.prototype.setSpinButton=function(){p(this.spinDown)||re(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),p(this.spinUp)||re(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){y.add(this.element,"focus",this.focusHandler,this),y.add(this.element,"blur",this.focusOutHandler,this),y.add(this.element,"keydown",this.keyDownHandler,this),y.add(this.element,"keyup",this.keyUpHandler,this),y.add(this.element,"input",this.inputHandler,this),y.add(this.element,"keypress",this.keyPressHandler,this),y.add(this.element,"change",this.changeHandler,this),y.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&y.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){y.add(this.spinUp,O.touchStartEvent,this.mouseDownOnSpinner,this),y.add(this.spinDown,O.touchStartEvent,this.mouseDownOnSpinner,this),y.add(this.spinUp,O.touchEndEvent,this.mouseUpOnSpinner,this),y.add(this.spinDown,O.touchEndEvent,this.mouseUpOnSpinner,this),y.add(this.spinUp,O.touchMoveEvent,this.touchMoveOnSpinner,this),y.add(this.spinDown,O.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){y.remove(this.element,"focus",this.focusHandler),y.remove(this.element,"blur",this.focusOutHandler),y.remove(this.element,"keyup",this.keyUpHandler),y.remove(this.element,"input",this.inputHandler),y.remove(this.element,"keydown",this.keyDownHandler),y.remove(this.element,"keypress",this.keyPressHandler),y.remove(this.element,"change",this.changeHandler),y.remove(this.element,"paste",this.pasteHandler),this.formEle&&y.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){y.remove(this.spinUp,O.touchStartEvent,this.mouseDownOnSpinner),y.remove(this.spinDown,O.touchStartEvent,this.mouseDownOnSpinner),y.remove(this.spinUp,O.touchEndEvent,this.mouseUpOnSpinner),y.remove(this.spinDown,O.touchEndEvent,this.mouseUpOnSpinner),y.remove(this.spinUp,O.touchMoveEvent,this.touchMoveOnSpinner),y.remove(this.spinDown,O.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,e)},t.prototype.raiseChangeEvent=function(e){if(this.prevValue!==this.value||this.prevValue!==this.inputValue){var i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),wi(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}},t.prototype.pasteHandler=function(){var e=this;if(this.enabled&&!this.readonly){var i=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(i)})}},t.prototype.preventHandler=function(){var e=this,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var n=e.element.selectionStart,r=e.element.selectionStart-1,a=e.element.value.split(""),h=j("decimal",oh(e.locale)),c=h.charCodeAt(0);" "===e.element.value[r]&&e.element.selectionStart>0&&!i?(p(e.prevVal)?e.element.value=e.element.value.trim():0!==r?e.element.value=e.prevVal:0===r&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(r,r)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(a.indexOf(e.element.value[e.element.selectionStart-1])!==a.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===c||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==c)&&(e.element.value=e.element.value.substring(0,r)+e.element.value.substring(n,e.element.value.length),e.element.setSelectionRange(r,r),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(a.indexOf(e.element.value[e.element.selectionStart-2])!==a.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===c||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==c)&&(e.element.setSelectionRange(r,r),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&(45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(e.element.value=p(e.prevVal)?e.element.value:e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===h&&0===e.decimals&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,r)+e.element.value.substring(n,e.element.value.length))),e.prevVal=e.element.value}})},t.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&O.isDevice&&this.preventHandler();var i=this.instance.getNumberParser({format:"n"})(this.element.value);if(i=null===i||isNaN(i)?null:i,this.hiddenInput.value=i||0===i?i.toString():null,F(this.element,"form")){var r=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),r.dispatchEvent(o)}}},t.prototype.inputHandler=function(e){if(this.enabled&&!this.readonly){var n=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||n)&&O.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==j("decimal",oh(this.locale))&&this.element.value!==j("minusSign",oh(this.locale))){var o=this.instance.getNumberParser({format:"n"})(this.element.value);o=isNaN(o)?null:o,this.localChange({value:o}),this.preventChange=!0}if(this.isVue){var a=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(a=this.value);var c={event:e,value:null===a||isNaN(a)?null:a,previousValue:null===l||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",c)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(ka,e);break;case 40:e.preventDefault(),this.action(Eh,e)}},t.prototype.performAction=function(e,i,n){(null===e||isNaN(e))&&(e=0);var r=n===ka?e+i:e-i;return r=this.correctRounding(e,i,r),this.strictMode?this.trimValue(r):r},t.prototype.correctRounding=function(e,i,n){var r=new RegExp("[,.](.*)"),o=r.test(e.toString()),a=r.test(i.toString());if(o||a){var l=o?r.exec(e.toString())[0].length:0,h=a?r.exec(i.toString())[0].length:0,c=Math.max(l,h);return this.roundValue(n,c)}return n},t.prototype.roundValue=function(e,i){i=i||0;var n=Math.pow(10,i);return Math.round(e*=n)/n},t.prototype.updateValue=function(e,i){i&&(this.isInteract=!0),null!==e&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.inputValue=e,this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(i)},t.prototype.updateCurrency=function(e,i){Oe(e,i,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(e||0===e){var i=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,i)},!0)}else this.setProperties({value:e=null},!0);this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||0===this.value){var e=this.formatNumber(),i=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),re(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,i){fe.setValue(e,i||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var i,n=new RegExp("[eE][-+]?([0-9]+)"),r=e.toString();if(n.test(r)){var o=n.exec(r);p(o)||(r=e.toFixed(Math.min(parseInt(o[1],10),20)))}var a=r.split(".")[1];return i=a&&a.length?a.length:0,null!==this.decimals&&(i=i<this.decimals?i:this.decimals),i},t.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,i){var n=e,r=i||0,o=n.toString().split("e"),a=(n=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+r:r)))).toString().split("e");return n=Number(a[0]+"e"+(a[1]?Number(a[1])-r:-r)),Number(n.toFixed(r))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!O.isDevice&&"11.0"===O.info.version&&13===e.keyCode){var i=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(i,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var n=String.fromCharCode(e.which),r=j("decimal",oh(this.locale)),o="NumpadDecimal"===e.code&&n!==r;o&&(n=r);var a=this.element.value;if(a=a.substring(0,this.element.selectionStart)+n+a.substring(this.element.selectionEnd),this.numericRegex().test(a)){if(o){var l=this.element.selectionStart+1;this.element.value=a,this.element.setSelectionRange(l,l),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},t.prototype.numericRegex=function(){var i=j("decimal",oh(this.locale)),n="*";return"."===i&&(i="\\"+i),0===this.decimals&&this.validateDecimalOnType?lY:(this.decimals&&this.validateDecimalOnType&&(n="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+i+"\\d"+n+")?)|("+i+"\\d"+n+")))?$"))},t.prototype.mouseWheel=function(e){var i;e.preventDefault(),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i>0?this.action(ka,e):i<0&&this.action(Eh,e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var i=this;if(clearTimeout(NE),this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,N([this.container],Ry),this.prevValue=this.value,this.value||0===this.value){var n=this.formatNumber();this.setElementValue(n),this.isPrevFocused||(O.isDevice||"11.0"!==O.info.version?NE=setTimeout(function(){i.element.setSelectionRange(0,n.length)},O.isDevice&&O.isIos?600:0):this.element.setSelectionRange(0,n.length))}O.isDevice||y.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var i=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),O.isDevice){var n=this.element.value;this.element.focus(),this.isPrevFocused=!1;var r=this.element;setTimeout(function(){i.setElementValue(n,r)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var o=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(o),O.isDevice||y.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(F(this.element,"form")){var l=this.element.nextElementSibling,h=document.createEvent("FocusEvent");h.initEvent("focusout",!1,!0),l.dispatchEvent(h)}}},t.prototype.mouseDownOnSpinner=function(e){var i=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var r=e.currentTarget,o=r.classList.contains(zy)?ka:Eh;y.add(r,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0,i.action(o,e)},150),y.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){var i;if("touchmove"===e.type){var n=e.touches;i=n.length&&document.elementFromPoint(n[0].pageX,n[0].pageY)}else i=document.elementFromPoint(e.clientX,e.clientY);i.classList.contains(ky)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),O.isDevice||(this.isPrevFocused=!1)),O.isDevice||e.preventDefault(),this.getElementData(e)){var i=e.currentTarget,n=i.classList.contains(zy)?ka:Eh;if(y.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(n,e),this.isCalled=!1,y.remove(document,"mouseup",this.mouseUpClick),F(this.element,"form")){var o=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),o.dispatchEvent(a)}}},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))},t.prototype.floatLabelTypeUpdate=function(){fe.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),fe.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&y.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&y.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,ka)),this.raiseChangeEvent()},t.prototype.decrement=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Eh)),this.raiseChangeEvent()},t.prototype.destroy=function(){this.unwireEvents(),X(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),X(this.spinUp),X(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),X(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,fe.destroy(),s.prototype.destroy.call(this)},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),D([this.container],[AE]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),N([this.container],[AE]))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];switch(o){case"width":this.setElementWidth(e.width),fe.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"enabled":fe.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":fe.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":fe.setReadonly(e.readonly,this.element),this.readonly?re(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),fe.validateInputType(this.container,this.element);break;case"placeholder":fe.setPlaceholder(e.placeholder,this.element),fe.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":Oe(o,j(o,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),fe.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var a=j(o,e);this.setProperties({currencyCode:a},!0),this.updateCurrency(o,a);break;case"currencyCode":var l=j(o,e);this.setProperties({currency:l},!0),this.updateCurrency("currency",l);break;case"format":Oe(o,j(o,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){fe.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},t.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(X(this.spinUp),X(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},Ft([m("")],t.prototype,"cssClass",void 0),Ft([m(null)],t.prototype,"value",void 0),Ft([m(-Number.MAX_VALUE)],t.prototype,"min",void 0),Ft([m(Number.MAX_VALUE)],t.prototype,"max",void 0),Ft([m(1)],t.prototype,"step",void 0),Ft([m(null)],t.prototype,"width",void 0),Ft([m(null)],t.prototype,"placeholder",void 0),Ft([m({})],t.prototype,"htmlAttributes",void 0),Ft([m(!0)],t.prototype,"showSpinButton",void 0),Ft([m(!1)],t.prototype,"readonly",void 0),Ft([m(!0)],t.prototype,"enabled",void 0),Ft([m(!1)],t.prototype,"showClearButton",void 0),Ft([m(!1)],t.prototype,"enablePersistence",void 0),Ft([m("n2")],t.prototype,"format",void 0),Ft([m(null)],t.prototype,"decimals",void 0),Ft([m(null)],t.prototype,"currency",void 0),Ft([m(null)],t.prototype,"currencyCode",void 0),Ft([m(!0)],t.prototype,"strictMode",void 0),Ft([m(!1)],t.prototype,"validateDecimalOnType",void 0),Ft([m("Never")],t.prototype,"floatLabelType",void 0),Ft([E()],t.prototype,"created",void 0),Ft([E()],t.prototype,"destroyed",void 0),Ft([E()],t.prototype,"change",void 0),Ft([E()],t.prototype,"focus",void 0),Ft([E()],t.prototype,"blur",void 0),Ft([Be],t)}(Mt),xh=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ne=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},PY=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return xh(t,s),Ne([m("None")],t.prototype,"placement",void 0),Ne([m(10)],t.prototype,"largeStep",void 0),Ne([m(1)],t.prototype,"smallStep",void 0),Ne([m(!1)],t.prototype,"showSmallTicks",void 0),Ne([m(null)],t.prototype,"format",void 0),t}(Ze),jY=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return xh(t,s),Ne([m(null)],t.prototype,"color",void 0),Ne([m(null)],t.prototype,"start",void 0),Ne([m(null)],t.prototype,"end",void 0),t}(Ze),AY=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return xh(t,s),Ne([m(!1)],t.prototype,"enabled",void 0),Ne([m(null)],t.prototype,"minStart",void 0),Ne([m(null)],t.prototype,"minEnd",void 0),Ne([m(null)],t.prototype,"maxStart",void 0),Ne([m(null)],t.prototype,"maxEnd",void 0),Ne([m(!1)],t.prototype,"startHandleFixed",void 0),Ne([m(!1)],t.prototype,"endHandleFixed",void 0),t}(Ze),LY=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return xh(t,s),Ne([m("")],t.prototype,"cssClass",void 0),Ne([m("Before")],t.prototype,"placement",void 0),Ne([m("Focus")],t.prototype,"showOn",void 0),Ne([m(!1)],t.prototype,"isVisible",void 0),Ne([m(null)],t.prototype,"format",void 0),t}(Ze),Yy=function(s){function t(e,i){var n=s.call(this,e,i)||this;return n.horDir="left",n.verDir="bottom",n.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},n.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},n.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",n.customAriaText=null,n.drag=!0,n.isDragComplete=!1,n.initialTooltip=!0,n}return xh(t,s),t.prototype.preRender=function(){this.l10n=new Hr("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},t.prototype.formChecker=function(){var e=F(this.element,"form");e?(this.isForm=!0,p(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!p(this.formResetValue)&&"object"==typeof this.formResetValue?p(this.formResetValue)&&(this.formResetValue=parseFloat(te(this.min))):this.formResetValue=[parseFloat(te(this.min)),parseFloat(te(this.max))],this.formElement=e):this.isForm=!1},t.prototype.initCultureFunc=function(){this.internationalization=new sh(this.locale)},t.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=p(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=p(this.ticks.format)?null:this.ticks.format},t.prototype.formatString=function(e,i){var n=null,r=null;if(e||0===e){n=this.formatNumber(e);var o=this.numberOfDecimals(e);r=this.internationalization.getNumberFormat(i)(this.makeRoundNumber(e,o))}return{elementVal:n,formatString:r}},t.prototype.formatNumber=function(e){var i=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:i,minimumFractionDigits:i,useGrouping:!1})(e)},t.prototype.numberOfDecimals=function(e){var i=e.toString().split(".")[1];return i&&i.length?i.length:0},t.prototype.makeRoundNumber=function(e,i){return Number(e.toFixed(i||0))},t.prototype.fractionalToInteger=function(e){e=0===this.numberOfDecimals(e)?Number(e).toFixed(this.noOfDecimals):e;for(var i=1,n=0;n<this.noOfDecimals;n++)i*=10;return Number((e*i).toFixed(0))},t.prototype.render=function(){var e=this;this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"==this.getTheme(this.sliderContainer)&&setTimeout(function(){e.refresh()},0)},t.prototype.initialize=function(){D([this.element],"e-slider"),this.setCSSClass()},t.prototype.setElementWidth=function(e){p(e)||("number"==typeof e?this.sliderContainer.style.width=te(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:te(e)))},t.prototype.setCSSClass=function(e){e&&N([this.element],e.split(" ")),this.cssClass&&D([this.element],this.cssClass.split(" "))},t.prototype.setEnabled=function(){this.enabled?(N([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove("e-disabled"),this.wireEvents()):(D([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add("e-disabled"),this.unwireEvents())},t.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},t.prototype.initRender=function(){this.sliderContainer=this.createElement("div",{className:"e-slider-container e-control-wrapper"}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:"e-slider-track"}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:p(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:"e-slider-input"}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=p(this.value)?parseFloat(te(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(te(this.value.toString()))):[this.checkHandleValue(parseFloat(te(this.value[0].toString()))),this.checkHandleValue(parseFloat(te(this.value[1].toString())))],this.previousChanged=this.previousVal,p(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?N([this.sliderContainer],["e-disabled"]):D([this.sliderContainer],["e-disabled"]),this.readonly?D([this.sliderContainer],["e-read-only"]):N([this.sliderContainer],["e-read-only"])},t.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isMaterial3="Material3"===this.getTheme(this.sliderContainer)||"Material3-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isFluent="FluentUI"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=(this.isMaterial||this.isMaterial3)&&"Range"!==this.type&&this.tooltip.isVisible},t.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:"e-range"}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&this.rangeBar.classList.add("Horizontal"===this.orientation?"e-drag-horizontal":"e-drag-vertical"))},t.prototype.createLimitBar=function(){var e="Range"!==this.type?"e-limit-bar":"e-limit-first";this.limitBarFirst=this.createElement("div",{attrs:{class:e+=" e-limits"}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:"e-limit-second e-limits"}}),this.element.appendChild(this.limitBarSecond))},t.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove("e-vertical"),this.sliderContainer.classList.add("e-horizontal"),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove("e-horizontal"),this.sliderContainer.classList.add("e-vertical"),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},t.prototype.setAriaAttributes=function(e){var i=this,n=this.min,r=this.max;!p(this.customValues)&&this.customValues.length>0&&(n=this.customValues[0],r=this.customValues[this.customValues.length-1]),"Range"!==this.type?re(e,{"aria-valuemin":n.toString(),"aria-valuemax":r.toString()}):(!p(this.customValues)&&this.customValues.length>0?[[n.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),r.toString()]]:[[n.toString(),this.value[1].toString()],[this.value[0].toString(),r.toString()]]).forEach(function(a,l){var h=0===l?i.firstHandle:i.secondHandle;h&&re(h,{"aria-valuemin":a[0],"aria-valuemax":a[1]})})},t.prototype.createSecondHandle=function(){this.secondHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0","aria-label":"slider"}}),this.secondHandle.classList.add("e-handle-second"),this.element.appendChild(this.secondHandle)},t.prototype.createFirstHandle=function(){this.firstHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0","aria-label":"slider"}}),this.firstHandle.classList.add("e-handle-first"),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:"e-handle e-material-handle"}}),this.element.appendChild(this.materialHandle))},t.prototype.wireFirstHandleEvt=function(e){e?(y.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),y.remove(this.firstHandle,"transitionend",this.transitionEnd),y.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),y.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(y.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),y.add(this.firstHandle,"transitionend",this.transitionEnd,this),y.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),y.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.wireSecondHandleEvt=function(e){e?(y.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),y.remove(this.secondHandle,"transitionend",this.transitionEnd),y.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),y.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(y.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),y.add(this.secondHandle,"transitionend",this.transitionEnd,this),y.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),y.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"]("e-material-tooltip-start")))},t.prototype.transitionEnd=function(e){"transform"!==e.propertyName&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),"Default"!==this.type&&(this.rangeBar.style.transition="none"),(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},t.prototype.handleFocusOut=function(){this.firstHandle.classList.contains("e-handle-focused")&&this.firstHandle.classList.remove("e-handle-focused"),"Range"===this.type&&this.secondHandle.classList.contains("e-handle-focused")&&this.secondHandle.classList.remove("e-handle-focused")},t.prototype.handleFocus=function(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?(this.firstHandle.classList.add("e-handle-focused"),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add("e-handle-focused"),this.secondHandle.classList.add("e-tab-handle")),y.add(document,"mousemove touchmove",this.sliderBarMove,this),y.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.handleOver=function(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(e.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())},t.prototype.handleLeave=function(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&!e.currentTarget.classList.contains("e-handle-focused")&&!e.currentTarget.classList.contains("e-tab-handle")&&this.closeTooltip()},t.prototype.setHandler=function(){this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},t.prototype.setEnableRTL=function(){this.enableRtl&&"Vertical"!==this.orientation?D([this.sliderContainer],"e-rtl"):N([this.sliderContainer],"e-rtl");var e="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),e!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(ie(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&ie(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()},t.prototype.tooltipValue=function(){var i,e=this,n={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),n.text=i="function"==typeof this.tooltipObj.content?this.tooltipObj.content():this.tooltipObj.content,this.trigger("tooltipChange",n,function(r){e.addTooltipClass(r.text),i!==r.text&&(e.customAriaText=r.text,r.text=e.enableHtmlSanitizer?Tt.sanitize(r.text.toString()):r.text.toString(),e.tooltipObj.content=um(function(){return r.text}),e.setAriaAttrValue(e.firstHandle),"Range"===e.type&&e.setAriaAttrValue(e.secondHandle))}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},t.prototype.setTooltipContent=function(){var e;e=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=um(function(){return e})},t.prototype.formatContent=function(e,i){var n="",r=this.handleVal1,o=this.handleVal2;return!p(this.customValues)&&this.customValues.length>0&&(r=this.customValues[this.handleVal1],o=this.customValues[this.handleVal2]),i?("Range"===this.type?n=this.enableRtl&&"Vertical"!==this.orientation?p(this.tooltip)||p(this.tooltip.format)?o.toString()+" - "+r.toString():this.formatString(o,e).elementVal+" - "+this.formatString(r,e).elementVal:p(this.tooltip)||p(this.tooltip.format)?r.toString()+" - "+o.toString():this.formatString(r,e).elementVal+" - "+this.formatString(o,e).elementVal:p(r)||(n=p(this.tooltip)||p(this.tooltip.format)?r.toString():this.formatString(r,e).elementVal),n):("Range"===this.type?n=this.enableRtl&&"Vertical"!==this.orientation?p(e.format)?o.toString()+" - "+r.toString():this.formatString(o,e).formatString+" - "+this.formatString(r,e).formatString:p(e.format)?r.toString()+" - "+o.toString():this.formatString(r,e).formatString+" - "+this.formatString(o,e).formatString:p(r)||(n=p(e.format)?r.toString():this.formatString(r,e).formatString),n)},t.prototype.addTooltipClass=function(e){if(this.isMaterialTooltip){var n,i=e.toString().length;this.tooltipElement?(this.tooltipElement.classList.remove((n=i>4?{oldCss:"e-material-default",newCss:"e-material-range"}:{oldCss:"e-material-range",newCss:"e-material-default"}).oldCss),this.tooltipElement.classList.contains(n.newCss)||(this.tooltipElement.classList.add(n.newCss),this.tooltipElement.style.transform=i>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)):this.tooltipObj.cssClass="e-slider-tooltip "+(n=i>4?"e-material-range":"e-material-default")}},t.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},t.prototype.tooltipBeforeOpen=function(e){this.tooltipElement=e.element,this.tooltip.cssClass&&D([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(i){return i})),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add("e-material-tooltip-hide"),this.handleStart(),this.setTooltipTransform())},t.prototype.tooltipCollision=function(e){if(this.isBootstrap||this.isBootstrap4||(this.isMaterial||this.isMaterial3)&&!this.isMaterialTooltip){var i=this.isBootstrap4?3:6;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-i},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:i},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-i},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:i},!1)}}},t.prototype.materialTooltipEventCallBack=function(e){this.sliderBarClick(e),y.add(document,"mousemove touchmove",this.sliderBarMove,this),y.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.wireMaterialTooltipEvent=function(e){this.isMaterialTooltip&&(e?y.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):y.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},t.prototype.tooltipPositionCalculation=function(e){var i;switch(e){case"TopCenter":i="e-slider-horizontal-before";break;case"BottomCenter":i="e-slider-horizontal-after";break;case"LeftCenter":i="e-slider-vertical-before";break;case"RightCenter":i="e-slider-vertical-after"}return i},t.prototype.getTooltipTransformProperties=function(e){var i;if(this.tooltipElement){var n="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;i="Horizontal"===this.orientation?"e-slider-horizontal-before"===e?{rotate:"rotate(45deg)",translate:"translateY("+n+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-n+"px)"}:"e-slider-vertical-before"===e?{rotate:"rotate(-45deg)",translate:"translateX("+n+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-n+"px)"}}return i},t.prototype.openMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var i=this.tooltipElement.firstElementChild;i.classList.remove("e-material-tooltip-hide"),i.classList.add("e-material-tooltip-show"),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add("e-material-tooltip-open"),this.materialHandle.style.transform="scale(0)",this.tooltipElement.style.transform=i.innerText.length>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(function(){e.tooltipElement.style.transition=e.transition.handle},2500):setTimeout(function(){e.tooltipElement.style.transition="none"},2500)}},t.prototype.closeMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){var i=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,i.classList.remove("e-material-tooltip-show"),i.classList.add("e-material-tooltip-hide"),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove("e-material-tooltip-open"),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){e.tooltipElement.style.transition="none"},2500)}},t.prototype.checkTooltipPosition=function(e){var i=this.tooltipPositionCalculation(e.collidedPosition);(void 0===this.tooltipCollidedPosition||this.tooltipCollidedPosition!==e.collidedPosition||!e.element.classList.contains(i))&&(this.isMaterialTooltip&&(void 0!==i&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(i),this.previousTooltipClass=i),e.element.style.transform&&e.element.classList.contains("e-material-tooltip-open")&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=e.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},t.prototype.setTooltipTransform=function(){var e=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.style.transform=this.tooltipElement.firstElementChild.innerText.length>4?e.translate+" scale(0.01)":e.translate+" "+e.rotate+" scale(0.01)"},t.prototype.renderTooltip=function(){this.tooltipObj=new dp({showTipPointer:this.isBootstrap||this.isMaterial||this.isMaterial3||this.isBootstrap4||this.isTailwind||this.isBootstrap5||this.isFluent,cssClass:"e-slider-tooltip",height:this.isMaterial||this.isMaterial3?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},t.prototype.initializeTooltipProps=function(){this.setProperties({tooltip:{showOn:"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(i){p(i)||(i.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add("e-material-slider"),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},t.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},t.prototype.setButtons=function(){this.firstBtn=this.createElement("div",{className:"e-slider-button e-first-button"}),this.firstBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:"e-slider-button e-second-button"}),this.secondBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add("e-slider-btn"),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()},t.prototype.buttonTitle=function(){var e=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("decrementTitle"),n=this.l10n.getConstant("incrementTitle");re(e?this.secondBtn:this.firstBtn,{"aria-label":i,title:i}),re(e?this.firstBtn:this.secondBtn,{"aria-label":n,title:n})},t.prototype.buttonFocusOut=function(){(this.isMaterial||this.isMaterial3)&&this.getHandle().classList.remove("e-large-thumb-size")},t.prototype.repeatButton=function(e){var r,i=this.handleValueUpdate(),n=this.enableRtl&&"Vertical"!==this.orientation;e.target.parentElement.classList.contains("e-first-button")||e.target.classList.contains("e-first-button")?r=this.add(i,parseFloat(this.step.toString()),!!n):(e.target.parentElement.classList.contains("e-second-button")||e.target.classList.contains("e-second-button"))&&(r=this.add(i,parseFloat(this.step.toString()),!n)),this.limits.enabled&&(r=this.getLimitCorrectedValues(r)),r>=this.min&&r<=this.max&&(this.changeHandleValue(r),this.tooltipToggle(this.getHandle()))},t.prototype.repeatHandlerMouse=function(e){e.preventDefault(),("mousedown"===e.type||"touchstart"===e.type)&&(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))},t.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},t.prototype.focusHandle=function(){this.getHandle().classList.contains("e-tab-handle")||this.getHandle().classList.add("e-tab-handle")},t.prototype.repeatHandlerUp=function(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},t.prototype.customTickCounter=function(e){var i=4;return!p(this.customValues)&&this.customValues.length>0&&(e>4&&(i=3),e>7&&(i=2),e>14&&(i=1),e>28&&(i=0)),i},t.prototype.renderScale=function(){var e="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:"e-scale e-"+e+"-scale e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",O.isAndroid&&"h"===e&&this.ul.classList.add("e-tick-pos");var i=this.ticks.smallStep;this.ticks.showSmallTicks?i<=0&&(i=parseFloat(te(this.step))):i=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(te(this.max))-parseFloat(te(this.min));var n=this.fractionalToInteger(this.min),r=this.fractionalToInteger(this.max),o=this.fractionalToInteger(i),a=!p(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,l=this.customTickCounter(a),h=!p(this.customValues)&&this.customValues.length>0?a*l+a:Math.abs((r-n)/o);this.element.appendChild(this.ul);var c,u=parseFloat(this.min.toString());"v"===e&&(u=parseFloat(this.max.toString()));var f,d=0,v=100/h;v===1/0&&(v=5);for(var g=0,b=!p(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,M=0;g<=h;g++){if(c=this.createElement("li",{attrs:{class:"e-tick",role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!p(this.customValues)&&this.customValues.length>0)(f=g%(l+1)==0)&&("h"===e?(u=this.customValues[M],M++):(u=this.customValues[b],b--),c.setAttribute("title",u.toString()));else if(c.setAttribute("title",u.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))f="h"===e?(u-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(u-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{var w=this.fractionalToInteger(this.ticks.largeStep),S=this.fractionalToInteger(u);f="h"===e?(S-n)%w==0:Math.abs(S-parseFloat(r.toString()))%w==0}f&&c.classList.add("e-large"),"h"===e?c.style.width=v+"%":c.style.height=v+"%";var I=f?"Both"===this.ticks.placement?2:1:0;if(f)for(var P=0;P<I;P++)this.createTick(c,u,v);else p(this.customValues)&&this.formatTicksValue(c,u);this.ul.appendChild(c),this.tickElementCollection.push(c);var H=void 0;p(this.customValues)&&(H=this.numberOfDecimals(i)>this.numberOfDecimals(u)?this.numberOfDecimals(i):this.numberOfDecimals(u),u=this.makeRoundNumber("h"===e||this.min>this.max?u+i:u-i,H),d=this.makeRoundNumber(d+i,H))}this.ticksAlignment(e,v)},t.prototype.ticksAlignment=function(e,i,n){void 0===n&&(n=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add("e-first-tick"),this.lastChild.classList.add("e-last-tick"),this.sliderContainer.classList.add("e-scale-"+this.ticks.placement.toLowerCase()),"h"===e?(this.firstChild.style.width=i/2+"%",this.lastChild.style.width=i/2+"%"):(this.firstChild.style.height=i/2+"%",this.lastChild.style.height=i/2+"%"),n&&this.trigger("renderedTicks",{ticksWrapper:this.ul,tickElements:this.tickElementCollection}),this.scaleAlignment()},t.prototype.createTick=function(e,i,n){var r=this.createElement("span",{className:"e-tick-value e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});e.appendChild(r),p(this.customValues)?this.formatTicksValue(e,i,r,n):r.innerHTML=this.enableHtmlSanitizer?Tt.sanitize(i.toString()):i.toString()},t.prototype.formatTicksValue=function(e,i,n,r){var o=this,a=this.formatNumber(i),l=p(this.ticks)||p(this.ticks.format)?a:this.formatString(i,this.ticksFormatInfo).formatString;this.trigger("renderingTicks",{value:i,text:l,tickElement:e},function(c){e.setAttribute("title",c.text.toString()),n&&(n.innerHTML=o.enableHtmlSanitizer?Tt.sanitize(c.text.toString()):c.text.toString())})},t.prototype.scaleAlignment=function(){this.tickValuePosition(),"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size"):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size")},t.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var i,n,e=this.firstChild.getBoundingClientRect(),r=this.ticks.smallStep,o=Math.abs(parseFloat(te(this.max))-parseFloat(te(this.min)))/r;this.firstChild.children.length>0&&(i=this.firstChild.children[0].getBoundingClientRect());var l,a=[this.sliderContainer.querySelectorAll(".e-tick.e-large .e-tick-value")];l=[].slice.call(a[0],"Both"===this.ticks.placement?2:1);for(var h="Vertical"===this.orientation?2*e.height:2*e.width,c=0;c<this.firstChild.children.length;c++)"Vertical"===this.orientation?this.firstChild.children[c].style.top=-i.height/2+"px":this.firstChild.children[c].style.left=this.enableRtl?(h-this.firstChild.children[c].getBoundingClientRect().width)/2+"px":-i.width/2+"px";for(c=0;c<l.length;c++)n=l[c].getBoundingClientRect(),ie(l[c],"Vertical"===this.orientation?{top:(h-n.height)/2+"px"}:{left:(h-n.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==o&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===o&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove("e-last-tick"))},t.prototype.setAriaAttrValue=function(e){var i,n=!p(this.ticks)&&!p(this.ticks.format),r=this.formatContent(n?this.tooltipFormatInfo:this.ticksFormatInfo,!1),o=this.formatContent(n?this.ticksFormatInfo:this.tooltipFormatInfo,!0);i=2===(r=this.customAriaText?this.customAriaText:r).split(" - ").length?r.split(" - "):[r,r],this.setAriaAttributes(e),re(e,"Range"!==this.type?{"aria-valuenow":o,"aria-valuetext":r}:this.enableRtl?e===this.firstHandle?{"aria-valuenow":o.split(" - ")[1],"aria-valuetext":i[1]}:{"aria-valuenow":o.split(" - ")[0],"aria-valuetext":i[0]}:e===this.firstHandle?{"aria-valuenow":o.split(" - ")[0],"aria-valuetext":i[0]}:{"aria-valuenow":o.split(" - ")[1],"aria-valuetext":i[1]})},t.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},t.prototype.getLimitCorrectedValues=function(e){return"MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0]},t.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},t.prototype.buttonClick=function(e){this.focusSliderElement();var i,n=this.enableRtl&&"Vertical"!==this.orientation,r=this.handleValueUpdate();40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains("e-first-button")?i=this.add(r,parseFloat(this.step.toString()),!!n):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains("e-second-button")?i=this.add(r,parseFloat(this.step.toString()),!n):33===e.keyCode||e.currentTarget.classList.contains("e-first-button")?i=this.add(r,parseFloat(this.ticks.largeStep.toString()),!n):34===e.keyCode||e.currentTarget.classList.contains("e-second-button")?i=this.add(r,parseFloat(this.ticks.largeStep.toString()),!!n):36===e.keyCode?i=parseFloat(this.min<this.max?this.min.toString():this.max.toString()):35===e.keyCode&&(i=parseFloat(this.min<this.max?this.max.toString():this.min.toString())),this.limits.enabled&&(i=this.getLimitCorrectedValues(i)),this.changeHandleValue(i),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),e.currentTarget.classList.contains("e-first-button")&&y.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains("e-second-button")&&y.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},t.prototype.tooltipToggle=function(e){this.isMaterialTooltip?this.tooltipElement.classList.contains("e-material-tooltip-open")?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)},t.prototype.buttonUp=function(e){e.currentTarget.classList.contains("e-first-button")&&y.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains("e-second-button")&&y.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},t.prototype.setRangeBar=function(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",ie(this.rangeBar,{width:p(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",ie(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",ie(this.rangeBar,{height:p(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",ie(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))},t.prototype.checkValidValueAndPos=function(e){return e=this.checkHandleValue(e),this.checkHandlePosition(e)},t.prototype.setLimitBarPositions=function(e,i,n,r){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=i-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=i-e+"px"):(this.limitBarFirst.style.bottom=(this.min<this.max?e:i)+"px",this.limitBarFirst.style.height=(this.min<this.max?i-e:e-i)+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=n+"px",this.limitBarSecond.style.width=r-n+"px"):(this.limitBarSecond.style.left=n+"px",this.limitBarSecond.style.width=r-n+"px"):(this.limitBarSecond.style.bottom=(this.min<this.max?n:r)+"px",this.limitBarSecond.style.height=(this.min<this.max?r-n:n-r)+"px"))},t.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);var i=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i),this.setLimitBarPositions(e,i)}else if("Range"===this.type){var n=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var r=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];r=this.checkValidValueAndPos(r);var o=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o);var a=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];a=this.checkValidValueAndPos(a),this.setLimitBarPositions(n,r,o,a)}},t.prototype.getLimitValueAndPosition=function(e,i,n,r){return p(i)&&(i=this.min<this.max?this.min:this.max,p(e)&&r&&(e=i)),p(n)&&(n=this.min<this.max?this.max:this.min,p(e)&&r&&(e=n)),e<i&&(e=i),e>n&&(e=n),[e,this.checkHandlePosition(e)]},t.prototype.setValue=function(){if(!p(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=p(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,this.activeHandle=p(this.activeHandle)?"Range"===this.type?2:1:this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},t.prototype.rangeValueUpdate=function(){(null===this.value||"object"!=typeof this.value)&&(this.value=[parseFloat(te(this.min)),parseFloat(te(this.max))])},t.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},t.prototype.modifyZindex=function(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=Io(this.element)+"")},t.prototype.setHandlePosition=function(e){var n,i=this,r=1===this.activeHandle?this.handlePos1:this.handlePos2;n=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),n.forEach(function(o){"Horizontal"===i.orientation?i.enableRtl?o.style.right=r+"px":o.style.left=r+"px":o.style.bottom=r+"px"}),this.changeEvent("change",e)},t.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},t.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},t.prototype.changeEvent=function(e,i){var n="change"===e?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),n!==this.value&&(!this.isMaterialTooltip||!this.initialTooltip)&&(this.trigger(e,this.changeEventArgs(e,i)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{var r=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:r},!0),(n.length===this.value.length&&this.value[0]!==n[0]||this.value[1]!==n[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,i)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},t.prototype.changeEventArgs=function(e,i){var n;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),n={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:"function"==typeof this.tooltipObj.content?this.tooltipObj.content():this.tooltipObj.content,isInteracted:!p(i)}):n={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:p(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!p(i)},n},t.prototype.setPreviousVal=function(e,i){"change"===e?this.previousVal=i:this.previousChanged=i},t.prototype.updateRangeValue=function(){var e=this.value.toString().split(",").map(Number);if(this.value=this.enableRtl&&"Vertical"!==this.orientation||this.rtl?[e[1],e[0]]:[e[0],e[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.min<this.max&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.min>this.max&&this.handlePos1<this.handlePos2&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var i=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=i[0],this.handlePos1=i[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,i=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=i[0],this.handlePos2=i[1],this.preHandlePos2=this.handlePos2}},t.prototype.checkHandlePosition=function(e){var i;return e=100*(e-parseFloat(te(this.min)))/(parseFloat(te(this.max))-parseFloat(te(this.min))),i="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(e/100):this.element.getBoundingClientRect().height*(e/100),parseFloat(te(this.max))===parseFloat(te(this.min))&&(i="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),i},t.prototype.checkHandleValue=function(e){if(this.min===this.max)return parseFloat(te(this.max));var i=this.tempStartEnd();return e<i.start?e=i.start:e>i.end&&(e=i.end),e},t.prototype.reposition=function(){var e=this;this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",ie(this.rangeBar,{width:p(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=this.handlePos2+"px":this.secondHandle.style.left=this.handlePos2+"px",this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",ie(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",ie(this.rangeBar,{height:p(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",ie(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){e.firstHandle.style.transition=e.scaleTransform,"Range"===e.type&&(e.secondHandle.style.transition=e.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()},t.prototype.changeHandleValue=function(e){var i=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&(this.handlePos1>this.handlePos2&&this.min<this.max||this.handlePos1<this.handlePos2&&this.min>this.max)&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(i=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&(this.handlePos2<this.handlePos1&&this.min<this.max||this.handlePos2>this.handlePos1&&this.min>this.max)&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(i=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==i&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},t.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},t.prototype.xyToPosition=function(e){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var n=e.x-this.element.getBoundingClientRect().left;this.val=n/(this.element.offsetWidth/100)}else{var o=e.y-this.element.getBoundingClientRect().top;this.val=100-o/(this.element.offsetHeight/100)}var a=this.stepValueCalculation(this.val);return a<0?a=0:a>100&&(a=100),this.enableRtl&&"Vertical"!==this.orientation&&(a=100-a),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(a/100):this.element.getBoundingClientRect().height*(a/100)},t.prototype.stepValueCalculation=function(e){0===this.step&&(this.step=1);var i=parseFloat(te(this.step))/((parseFloat(te(this.max))-parseFloat(te(this.min)))/100),n=e%Math.abs(i);return 0!==n&&(i/2>n?e-=n:e+=Math.abs(i)-n),e},t.prototype.add=function(e,i,n){var o=Math.pow(10,3);return n?(Math.round(e*o)+Math.round(i*o))/o:(Math.round(e*o)-Math.round(i*o))/o},t.prototype.positionToValue=function(e){var i,n=parseFloat(te(this.max))-parseFloat(te(this.min));return i="Horizontal"===this.orientation?e/this.element.getBoundingClientRect().width*n:e/this.element.getBoundingClientRect().height*n,this.add(i,parseFloat(this.min.toString()),!0)},t.prototype.sliderBarClick=function(e){var i;e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?i={x:e.clientX,y:e.clientY}:("touchend"===e.type||"touchstart"===e.type)&&(i={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var n=this.xyToPosition(i),r=this.positionToValue(n);if("Range"===this.type&&(this.min<this.max&&this.handlePos2-n<n-this.handlePos1||this.min>this.max&&this.handlePos1-n>n-this.handlePos2))this.activeHandle=2,this.limits.enabled&&this.limits.endHandleFixed||(this.limits.enabled&&(r=(o=this.getLimitValueAndPosition(r,this.limits.maxStart,this.limits.maxEnd))[0],n=o[1]),this.secondHandle.classList.add("e-handle-active"),this.handlePos2=this.preHandlePos2=n,this.handleVal2=r),this.modifyZindex(),this.secondHandle.focus();else{var o;if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed)this.limits.enabled&&(r=(o=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd))[0],n=o[1]),this.firstHandle.classList.add("e-handle-active"),this.handlePos1=this.preHandlePos1=n,this.handleVal1=r;this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add("e-tooltip-active");var a=this.element.querySelector(".e-tab-handle");a&&this.getHandle()!==a&&a.classList.remove("e-tab-handle");var h,l=1===this.activeHandle?this.firstHandle:this.secondHandle;if("click"!==e.type&&"mousedown"!==e.type||e.target!==l||(h=document.elementFromPoint(e.clientX,e.clientY)),e.target===l&&h!=l)return(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.sliderBarUp(e),void this.tooltipToggle(this.getHandle());if(this.checkRepeatedValue(r)){var d=(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=d.handle,"Default"!==this.type&&(this.rangeBar.style.transition=d.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",e),"Default"!==this.type&&this.setRangeBar()}},t.prototype.handleValueAdjust=function(e,i,n){1===n?(this.handleVal1=i,this.handleVal2=this.handleVal1+this.minDiff):2===n&&(this.handleVal2=i,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},t.prototype.dragRangeBarMove=function(e){var i,n,r,o,a;if("touchmove"!==e.type&&e.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(o=(i=[e.clientX,e.clientY])[0],a=i[1]):(o=(n=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],a=n[1]),!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(r=this.enableRtl?{x:o+this.secondPartRemain,y:a+this.secondPartRemain}:{x:o-this.firstPartRemain,y:a+this.secondPartRemain},this.min>this.max?(this.handlePos2=this.xyToPosition(r),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(r),this.handleVal1=this.positionToValue(this.handlePos1)),r=this.enableRtl?{x:o-this.firstPartRemain,y:a-this.firstPartRemain}:{x:o+this.secondPartRemain,y:a-this.firstPartRemain},this.min>this.max?(this.handlePos1=this.xyToPosition(r),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(r),this.handleVal2=this.positionToValue(this.handlePos2)),this.limits.enabled){var l=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=l[0],this.handlePos1=l[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),l=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=l[0],this.handlePos2=l[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===(this.min>this.max?this.min:this.max)&&this.handleValueAdjust(this.handleVal2,this.min>this.max?this.min:this.max,2),this.handleVal1===(this.min>this.max?this.max:this.min)&&this.handleValueAdjust(this.handleVal1,this.min>this.max?this.max:this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()},t.prototype.sliderBarUp=function(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove("e-handle-active"),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove("e-handle-active")),this.closeTooltip(),(this.isMaterial||this.isMaterial3)&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove("e-tooltip-active")),y.remove(document,"mousemove touchmove",this.sliderBarMove),y.remove(document,"mouseup touchend",this.sliderBarUp)},t.prototype.sliderBarMove=function(e){"touchmove"!==e.type&&e.preventDefault();var n=this.xyToPosition("mousemove"===e.type?{x:e.clientX,y:e.clientY}:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),r=this.positionToValue(n);if(n=Math.round(n),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var o=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd);n=o[1],r=o[0]}this.handlePos1=n,this.handleVal1=r}this.firstHandle.classList.add("e-handle-active")}if("Range"===this.type)if(1===this.activeHandle)this.firstHandle.classList.add("e-handle-active"),this.limits.enabled&&this.limits.startHandleFixed||((this.min<this.max&&n>this.handlePos2||this.min>this.max&&n<this.handlePos2)&&(n=this.handlePos2,r=this.handleVal2),n===this.preHandlePos1)||(this.limits.enabled&&(r=(a=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd))[0],n=a[1]),this.handlePos1=this.preHandlePos1=n,this.handleVal1=r,this.activeHandle=1);else if(2===this.activeHandle&&(this.secondHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.endHandleFixed||((this.min<this.max&&n<this.handlePos1||this.min>this.max&&n>this.handlePos1)&&(n=this.handlePos1,r=this.handleVal1),n===this.preHandlePos2)))){var a;this.limits.enabled&&(r=(a=this.getLimitValueAndPosition(r,this.limits.maxStart,this.limits.maxEnd))[0],n=a[1]),this.handlePos2=this.preHandlePos2=n,this.handleVal2=r,this.activeHandle=2}this.checkRepeatedValue(r)&&(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},t.prototype.dragRangeBarUp=function(e){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),y.remove(document,"mousemove touchmove",this.dragRangeBarMove),y.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},t.prototype.checkRepeatedValue=function(e){if("Range"===this.type){if(e===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(e===this.previousVal)return 0;return 1},t.prototype.refreshTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))},t.prototype.openTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)},t.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},t.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e)}},t.prototype.wireButtonEvt=function(e){e?(y.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),y.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),y.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),y.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),y.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),y.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),y.remove(this.firstBtn,"focusout",this.sliderFocusOut),y.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(y.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),y.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),y.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),y.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),y.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),y.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),y.add(this.firstBtn,"focusout",this.sliderFocusOut,this),y.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},t.prototype.rangeBarMousedown=function(e){var i,n;if(e.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&e.target===this.rangeBar){var r=void 0,o=void 0;"mousedown"===e.type?(r=(i=[e.clientX,e.clientY])[0],o=i[1]):"touchstart"===e.type&&(r=(n=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=n[1]),"Horizontal"===this.orientation?(this.firstPartRemain=r-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-r):(this.firstPartRemain=o-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-o),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var a=this.element.querySelector(".e-tab-handle");a&&a.classList.remove("e-tab-handle"),y.add(document,"mousemove touchmove",this.dragRangeBarMove,this),y.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},t.prototype.elementClick=function(e){this.isDragComplete?this.isDragComplete=!1:(e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e),this.focusHandle())},t.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(y.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&y.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),y.add(this.sliderContainer,"keydown",this.keyDown,this),y.add(this.sliderContainer,"keyup",this.keyUp,this),y.add(this.element,"focusout",this.sliderFocusOut,this),y.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&y.add(this.formElement,"reset",this.formResetHandler,this))},t.prototype.unwireEvents=function(){y.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&y.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),y.remove(this.sliderContainer,"keydown",this.keyDown),y.remove(this.sliderContainer,"keyup",this.keyUp),y.remove(this.element,"focusout",this.sliderFocusOut),y.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),y.remove(this.element,"reset",this.formResetHandler)},t.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},t.prototype.keyUp=function(e){if(9===e.keyCode&&e.target.classList.contains("e-handle")&&(this.focusSliderElement(),!e.target.classList.contains("e-tab-handle"))){this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),e.target.classList.add("e-tab-handle");var i=e.target.parentElement;i===this.element&&(i.querySelector(".e-slider-track").classList.add("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&i.querySelector(".e-range").classList.add("e-tab-range")),"Range"===this.type&&(this.activeHandle=e.target.previousSibling.classList.contains("e-handle")?2:1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)},t.prototype.hover=function(e){if(!p(e))if("mouseover"===e.type||"touchmove"===e.type||"mousemove"===e.type||"pointermove"===e.type||"touchstart"===e.type)this.sliderContainer.classList.add("e-slider-hover");else{this.sliderContainer.classList.remove("e-slider-hover");var i=e.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!i.classList.contains("e-handle-focused")&&!i.classList.contains("e-tab-handle")&&this.closeMaterialTooltip()}},t.prototype.sliderFocusOut=function(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),this.element.querySelector(".e-tab-track")&&(this.element.querySelector(".e-tab-track").classList.remove("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&this.element.querySelector(".e-tab-range")&&this.element.querySelector(".e-tab-range").classList.remove("e-tab-range")),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},t.prototype.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.prototype.changeSliderType=function(e,i){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove("e-material-slider"),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==e&&("Range"===e&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!p(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===e||"Default"===e?p(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):p(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==i&&this.updateConfig()},t.prototype.changeRtl=function(){if(!this.enableRtl&&"Range"===this.type&&(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var e=this.enableRtl&&"Vertical"!==this.orientation;re(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),re(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},t.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},t.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},t.prototype.limitsPropertyChange=function(){this.limits.enabled?(p(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),p(this.limitBarFirst)&&p(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(p(this.limitBarFirst)||X(this.limitBarFirst),p(this.limitBarSecond)||X(this.limitBarSecond))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.destroy=function(){s.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),N([this.sliderContainer],["e-disabled"]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),X(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML=""},t.prototype.onPropertyChanged=function(e,i){for(var n=this,r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];switch(a){case"cssClass":this.setCSSClass(i.cssClass);break;case"value":if(e&&i){var l=p(e.value)?"Range"===this.type?[this.min,this.max]:this.min:e.value;this.setProperties({value:l},!0),!p(i.value)&&i.value.toString()!==l.toString()&&(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(this.activeHandle=p(e.value)||i.value[1]===l[1]?1:2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":!p(e.tooltip)&&!p(i.tooltip)&&(this.setTooltip(a),this.showButtons||this.wireEvents());break;case"type":!p(i)&&Object.keys(i).length&&!p(i.type)&&(this.changeSliderType(i.type,a),this.setZindex());break;case"enableRtl":i.enableRtl!==e.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=i.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":p(this.sliderContainer.querySelector(".e-scale"))||(X(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(h){h.match(/e-scale-/)&&n.sliderContainer.classList.remove(h)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove("e-slider-btn"),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},t.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add("e-read-only")):(this.wireEvents(),this.sliderContainer.classList.remove("e-read-only"))},t.prototype.setMinMaxValue=function(){var e=this;this.setValue(),this.refreshTooltip(this.tooltipTarget),p(this.sliderContainer.querySelector(".e-scale"))||this.ul&&(X(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(i){i.match(/e-scale-/)&&e.sliderContainer.classList.remove(i)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},t.prototype.setZindex=function(){this.zIndex=6,!p(this.ticks)&&"None"!==this.ticks.placement&&(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),!this.isMaterial&&!this.isMaterial3&&!p(this.ticks)&&"Both"===this.ticks.placement&&(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},t.prototype.setTooltip=function(e){this.changeSliderType(this.type,e)},t.prototype.setBarColor=function(){for(var e,i,n=this.sliderTrack.lastElementChild;n;)this.sliderTrack.removeChild(n),n=this.sliderTrack.lastElementChild;for(var r=0;r<this.colorRange.length;r++)if(!p(this.colorRange[r].start)&&!p(this.colorRange[r].end)&&this.colorRange[r].end>this.colorRange[r].start){this.colorRange[r].start<this.min&&(this.colorRange[r].start=this.min),this.colorRange[r].end>this.max&&(this.colorRange[r].end=this.max);var o=this.checkHandlePosition(this.colorRange[r].start),a=this.checkHandlePosition(this.colorRange[r].end),l=this.createElement("div");l.style.backgroundColor=this.colorRange[r].color,l.style.border="1px solid "+this.colorRange[r].color,"Horizontal"===this.orientation?(i="e-slider-horizantal-color",e=this.enableRtl?p(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[r].end):this.checkHandlePosition(this.customValues.length-this.colorRange[r].end-1):this.checkHandlePosition(this.colorRange[r].start),l.style.width=a-o+"px",l.style.left=e+"px"):(i="e-slider-vertical-color",e=this.checkHandlePosition(this.colorRange[r].start),l.style.height=a-o+"px",l.style.bottom=e+"px"),l.classList.add(i),this.sliderTrack.appendChild(l)}},t.prototype.getModuleName=function(){return"slider"},Ne([m(null)],t.prototype,"value",void 0),Ne([m(null)],t.prototype,"customValues",void 0),Ne([m(1)],t.prototype,"step",void 0),Ne([m(null)],t.prototype,"width",void 0),Ne([m(0)],t.prototype,"min",void 0),Ne([m(100)],t.prototype,"max",void 0),Ne([m(!1)],t.prototype,"readonly",void 0),Ne([m("Default")],t.prototype,"type",void 0),Ne([mn([{}],jY)],t.prototype,"colorRange",void 0),Ne([pt({},PY)],t.prototype,"ticks",void 0),Ne([pt({},AY)],t.prototype,"limits",void 0),Ne([m(!0)],t.prototype,"enabled",void 0),Ne([pt({},LY)],t.prototype,"tooltip",void 0),Ne([m(!1)],t.prototype,"showButtons",void 0),Ne([m(!0)],t.prototype,"enableAnimation",void 0),Ne([m("Horizontal")],t.prototype,"orientation",void 0),Ne([m("")],t.prototype,"cssClass",void 0),Ne([m(!1)],t.prototype,"enableHtmlSanitizer",void 0),Ne([E()],t.prototype,"created",void 0),Ne([E()],t.prototype,"change",void 0),Ne([E()],t.prototype,"changed",void 0),Ne([E()],t.prototype,"renderingTicks",void 0),Ne([E()],t.prototype,"renderedTicks",void 0),Ne([E()],t.prototype,"tooltipChange",void 0),Ne([Be],t)}(Mt),Pp=(new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),new RegExp("^[0-9]*$"),new RegExp("^[+]?[0-9]{9,13}$"),new RegExp("^\\d{13,16}$"),function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),Pe=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},ax="e-file-select",Uy="e-file-drop",lx="e-upload-files",jp="e-upload-file-list",ai="e-file-status",hx="e-file-name",cx="e-file-type",ux="e-file-size",ji="e-file-remove-btn",Qn="e-file-delete-btn",px="e-spinner-pane",Kt="e-file-abort-btn",Xr="e-file-reload-btn",Vy="e-upload-drag-hover",To="e-upload-progress-wrap",Ap="e-upload-progress-bar",Wy="e-progress-bar-text",$n="e-upload-progress",Cr="e-upload-success",Gn="e-upload-fails",Xy="e-file-container",dx="e-validation-fails",qy="e-disabled",vx="e-rtl-container",Qy="e-clear-icon-focus",Ji="e-file-pause-btn",Do="e-file-play-btn",jh="e-restrict-retry",gx=["title","style","class"],mx="e-form-upload",Ah="e-file-invalid",WY=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Pp(t,s),Pe([m("")],t.prototype,"name",void 0),Pe([m(null)],t.prototype,"size",void 0),Pe([m("")],t.prototype,"type",void 0),t}(Ze),XY=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Pp(t,s),Pe([m("Browse...")],t.prototype,"browse",void 0),Pe([m("Upload")],t.prototype,"upload",void 0),Pe([m("Clear")],t.prototype,"clear",void 0),t}(Ze),qY=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Pp(t,s),Pe([m("")],t.prototype,"saveUrl",void 0),Pe([m("")],t.prototype,"removeUrl",void 0),Pe([m(0)],t.prototype,"chunkSize",void 0),Pe([m(3)],t.prototype,"retryCount",void 0),Pe([m(500)],t.prototype,"retryAfterDelay",void 0),t}(Ze),Lp=function(s){function t(e,i){var n=s.call(this,e,i)||this;return n.initialAttr={accept:null,multiple:!1,disabled:!1},n.uploadedFilesData=[],n.base64String=[],n.isForm=!1,n.allTypes=!1,n.pausedData=[],n.uploadMetaData=[],n.tabIndex="0",n.btnTabIndex="0",n.disableKeyboardNavigation=!1,n.count=-1,n.actionCompleteCount=0,n.flag=!0,n.selectedFiles=[],n.uploaderName="UploadFiles",n.fileStreams=[],n.newFileRef=0,n.isFirstFileOnSelection=!1,n.dragCounter=0,n.isAngular=!1,n.fileList=[],n.filesData=[],n.uploaderOptions=e,n}return Pp(t,s),t.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=p(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=p(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=p(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":j("ej2_instances",this.element)[0].isReact?this.reRenderFileList():this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=j("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(i.cssClass)}},t.prototype.setLocalizedTexts=function(){p(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!p(this.uploadWrapper.querySelector("."+Uy))&&(this.uploadWrapper.querySelector("."+Uy).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},t.prototype.getKeyValue=function(e){for(var i,n=0,r=Object.keys(this.preLocaleObj);n<r.length;n++){var o=r[n];this.preLocaleObj[""+o]===e&&(i=o)}return i},t.prototype.updateFileList=function(){if(this.fileList.length>0&&!p(this.uploadWrapper.querySelector("."+lx)))for(var i=0;i<this.fileList.length;i++)this.fileList[i].querySelector(".e-file-status").innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[i].status)),this.filesData[i].status=this.localizedTexts(this.getKeyValue(this.filesData[i].status)),this.fileList[i].classList.contains(Cr)&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[i].querySelector(".e-file-play-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[i].querySelector(".e-file-remove-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[i].querySelector(".e-file-reload-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},t.prototype.reRenderFileList=function(){this.listParent&&(X(this.listParent),this.listParent=null,this.fileList=[],this.internalCreateFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},t.prototype.preRender=function(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",invalidFileName:"File Name is not allowed",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new Hr("uploader",this.localeText,this.locale),this.preLocaleObj=j("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var e=j("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){for(var i=this.createElement("input",{attrs:{type:"file"}}),n=0;n<this.element.attributes.length;n++)"id"!==this.element.attributes[n].nodeName?i.setAttribute(this.element.attributes[n].nodeName,this.element.attributes[n].nodeValue):"id"===this.element.attributes[n].nodeName&&i.setAttribute(this.element.attributes[n].nodeName,at("uploader")),i.innerHTML=this.element.innerHTML;i.hasAttribute("name")||i.setAttribute("name","UploadFiles"),this.element.appendChild(i),this.element=i,Oe("ej2_instances",e,this.element)}e[0].isPureReactComponent&&(p(e[0].props.name)?!p(e[0].props.id)&&p(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),p(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=O.info.name,this.uploaderName=this.element.getAttribute("name")},t.prototype.formRendered=function(){var e=F(this.element,"form");if(!p(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},t.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},t.prototype.getModuleName=function(){return"uploader"},t.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},t.prototype.render=function(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()},t.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},t.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()},t.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},t.prototype.wireActionButtonEvents=function(){y.add(this.uploadButton,"click",this.uploadButtonClick,this),y.add(this.clearButton,"click",this.clearButtonClick,this)},t.prototype.unwireActionButtonEvents=function(){y.remove(this.uploadButton,"click",this.uploadButtonClick),y.remove(this.clearButton,"click",this.clearButtonClick)},t.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),X(this.actionButtons),this.actionButtons=null)},t.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e=p(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var i=p(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=i,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},t.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var e=this.createElement("span",{className:ax});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},t.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.internalCreateFileList(this.filesData);if(p(this.files[0].size))return;this.isPreloadFiles=!0;var e=[].slice.call(this.files),i=[];this.multiple||(this.clearData(),e=[e[0]]);for(var n=0,r=e;n<r.length;n++){var o=r[n],a={name:o.name+"."+o.type.split(".")[o.type.split(".").length-1],rawFile:"",size:o.size,status:this.localizedTexts("uploadSuccessMessage"),type:o.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};i.push(a),this.filesData.push(a)}this.internalCreateFileList(i),!this.autoUpload&&this.listParent&&!this.actionButtons&&(!this.isForm||this.allowUpload())&&this.showFileList&&this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}},t.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll("."+dx).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+Cr).length+this.uploadWrapper.querySelectorAll("span."+$n).length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},t.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:T(this.dropArea,document);for(var i=this.element,n=!1;i.parentNode;)(i=i.parentNode)===this.dropZoneElement&&(n=!0,e?e.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!n&&e&&He(e)}else!p(this.uploaderOptions)&&void 0===this.uploaderOptions.dropArea&&(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},t.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&He(e)}},t.prototype.createDropTextHint=function(){var e=this.createElement("span",{className:Uy});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)},t.prototype.updateHTMLAttrToElement=function(){if(!p(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];gx.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[""+n])}},t.prototype.updateHTMLAttrToWrapper=function(){if(!p(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(gx.indexOf(n)>-1)if("class"===n){var r=this.htmlAttributes[""+n].replace(/\s+/g," ").trim();""!==r&&D([this.uploadWrapper],r.split(" "))}else if("style"===n){var o=this.uploadWrapper.getAttribute(n);o=p(o)?this.htmlAttributes[""+n]:o+this.htmlAttributes[""+n],this.uploadWrapper.setAttribute(n,o)}else this.uploadWrapper.setAttribute(n,this.htmlAttributes[""+n])}},t.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")},t.prototype.checkAutoUpload=function(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},t.prototype.sequenceUpload=function(e){if(this.filesData.length-e.length==0||"1"!==this.filesData[this.filesData.length-e.length-1].statusCode){(this.multiple||this.count<0)&&++this.count;var i=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],i),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}},t.prototype.setCSSClass=function(e){var i=e;p(e)||(i=e.replace(/\s+/g," ").trim()),!p(e)&&""!==i&&N([this.uploadWrapper],i.split(" "));var n=this.cssClass;!p(this.cssClass)&&""!==this.cssClass&&(n=this.cssClass.replace(/\s+/g," ").trim()),!p(this.cssClass)&&""!==n&&D([this.uploadWrapper],n.split(n.indexOf(",")>-1?",":" "))},t.prototype.wireEvents=function(){y.add(this.browseButton,"click",this.browseButtonClick,this),y.add(this.element,"change",this.onSelectFiles,this),y.add(document,"click",this.removeFocus,this),this.keyboardModule=new yn(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&y.add(this.formElement,"reset",this.resetForm,this)},t.prototype.unWireEvents=function(){y.remove(this.browseButton,"click",this.browseButtonClick),y.remove(this.element,"change",this.onSelectFiles),y.remove(document,"click",this.removeFocus),this.isForm&&y.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},t.prototype.resetForm=function(){this.clearAll()},t.prototype.keyActionHandler=function(e){var i=e.target;if("enter"===e.action){if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(i.classList.contains(Ji))(n=this.getCurrentMetaData(null,e)).file.statusCode="4",n.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(n,!1);else if(i.classList.contains(Do))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(i.classList.contains(Xr)){var n;if(p(n=this.getCurrentMetaData(null,e))){var o=this.filesData[this.fileList.indexOf(e.target.parentElement)];this.retry(o)}else n.file.statusCode="1",n.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(n.file)}else this.removeFiles(e),i.classList.contains(Kt)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}},t.prototype.getCurrentMetaData=function(e,i){var n,r;n=p(e)?this.filesData[this.fileList.indexOf(i.target.parentElement)]:e;for(var a=0;a<this.uploadMetaData.length;a++)this.uploadMetaData[a].file.name===n.name&&(r=this.uploadMetaData[a]);return r},t.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+Qy)&&(document.activeElement.blur(),this.listParent.querySelector("."+Qy).classList.remove(Qy))},t.prototype.browseButtonClick=function(){this.element.click()},t.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},t.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},t.prototype.bindDropEvents=function(){this.dropZoneElement&&(y.add(this.dropZoneElement,"drop",this.dropElement,this),y.add(this.dropZoneElement,"dragover",this.dragHover,this),y.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),y.add(this.dropZoneElement,"paste",this.onPasteFile,this),y.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},t.prototype.unBindDropEvents=function(){this.dropZoneElement&&(y.remove(this.dropZoneElement,"drop",this.dropElement),y.remove(this.dropZoneElement,"dragover",this.dragHover),y.remove(this.dropZoneElement,"dragleave",this.onDragLeave),y.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},t.prototype.onDragEnter=function(e){this.enabled&&(this.dropZoneElement.classList.add(Vy),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},t.prototype.onDragLeave=function(){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(Vy))},t.prototype.dragHover=function(e){this.enabled&&("Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())},t.prototype.dropElement=function(e){this.dragCounter=0,this.dropZoneElement.classList.remove(Vy),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()},t.prototype.onPasteFile=function(e){var i=e.clipboardData.items;if("paste"===e.type&&"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=e.clipboardData.files),1===i.length){var n=[].slice.call(i)[0];"file"===n.kind&&n.type.match("^image/")&&this.renderSelectedFiles(e,[n.getAsFile()],!1,!0)}},t.prototype.getSelectedFiles=function(e){for(var i=[],n=this.fileList[e],r=this.getFilesData(),o=+n.getAttribute("data-files-count"),a=0,l=0;l<e;l++)a+=+this.fileList[l].getAttribute("data-files-count");for(var h=a;h<a+o;h++)i.push(r[h]);return i},t.prototype.removeFiles=function(e){if(this.enabled){var n=this.fileList.indexOf(e.target.parentElement),r=this.fileList[n],o=this.isFormUpload(),a=o?this.getSelectedFiles(n):this.getFilesInArray(this.filesData[n]);if(!p(a)){if(e.target.classList.contains(Kt)&&!o){if(a[0].statusCode="5",!p(r)){var l=r.querySelector("."+Kt);Vs({target:l,width:"20px"}),ln(l)}this.sequentialUpload&&this.uploadSequential(),r.classList.contains(jh)||this.checkActionComplete(!0)}else F(e.target,"."+px)||this.remove(a,!1,!1,!0,e);this.checkActionButtonStatus()}}},t.prototype.removeFilesData=function(e,i){var n;if(i)this.showFileList||(n=this.filesData.indexOf(e),this.filesData.splice(n,1));else{var r=this.getLiElement(e);p(r)||(this.element.value="",X(r),n=this.fileList.indexOf(r),this.fileList.splice(n,1),this.filesData.splice(n,1),0===this.fileList.length&&!p(this.listParent)&&(X(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&n<=this.count&&--this.count)}},t.prototype.removeUploadedFile=function(e,i,n,r){var o=this,a=e,l=new ks(this.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1;var h=new FormData;l.beforeSend=function(c){i.currentRequest=l.httpRequest,n?o.removingEventCallback(i,h,a,e):o.trigger("removing",i,function(u){u.cancel?c.cancel=!0:o.removingEventCallback(u,h,a,e)})},l.onLoad=function(c){return o.removeCompleted(c,a,r),{}},l.onError=function(c){return o.removeFailed(c,a,r),{}},l.send(h)},t.prototype.removingEventCallback=function(e,i,n,r){var o=this.element.getAttribute("name"),a=this.getLiElement(r);if(!(p(a)||p(a.querySelector("."+Qn))&&p(a.querySelector("."+ji)))){var l=a.querySelector("."+Qn)?a.querySelector("."+Qn):a.querySelector("."+ji);Vs({target:l,width:"20px"}),ln(l)}e.postRawFile&&!p(n.rawFile)&&""!==n.rawFile?i.append(o,n.rawFile,n.name):i.append(o,n.name),this.updateFormData(i,e.customFormData)},t.prototype.updateFormData=function(e,i){if(i.length>0&&i[0])for(var n=function(o){var a=i[o],l=Object.keys(a).map(function(h){return a[""+h]});e.append(Object.keys(a)[0],l)},r=0;r<i.length;r++)n(r)},t.prototype.updateCustomheader=function(e,i){if(i.length>0&&i[0])for(var n=function(o){var a=i[o],l=Object.keys(a).map(function(h){return a[""+h]});e.setRequestHeader(Object.keys(a)[0],l)},r=0;r<i.length;r++)n(r)},t.prototype.removeCompleted=function(e,i,n){var r=e&&e.currentTarget?this.getResponse(e):null,o=e.target;if(4===o.readyState&&o.status>=200&&o.status<=299){var a={e,response:r,operation:"remove",file:this.updateStatus(i,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",a),this.removeFilesData(i,n);var l=this.uploadedFilesData.indexOf(i);this.uploadedFilesData.splice(l,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,i,n)},t.prototype.removeFailed=function(e,i,n){var o={e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(i,this.localizedTexts("removedFailedMessage"),"0")};if(!n){var a=this.filesData.indexOf(i),l=this.fileList[a];if(l){l.classList.remove(Cr),l.classList.add(Gn);var h=l.querySelector("."+ai);h&&(h.classList.remove(Cr),h.classList.add(Gn))}this.checkActionButtonStatus()}this.trigger("failure",o);var c=this.getLiElement(i);p(c)||p(c.querySelector("."+Qn))||(Ri(c.querySelector("."+Qn)),X(c.querySelector(".e-spinner-pane")))},t.prototype.getFilesFromFolder=function(e){this.filesEntries=[];var i=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]];if(this.checkDirectoryUpload(i))for(var r=function(l){var h=i[l].webkitGetAsEntry();if(h.isFile){var c=[];h.file(function(u){c.push({path:h.fullPath,file:u})}),o.renderSelectedFiles(e,c,!0)}else h.isDirectory&&o.traverseFileTree(h,e)},o=this,a=0;a<i.length;a++)r(a)},t.prototype.checkDirectoryUpload=function(e){for(var i=0;e&&i<e.length;i++)if(e[i].webkitGetAsEntry().isDirectory)return!0;return!1},t.prototype.traverseFileTree=function(e,i){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var n=e.createReader();this.readFileFromDirectory(n,i)}},t.prototype.readFileFromDirectory=function(e,i){var n=this;e.readEntries(function(r){for(var o=0;o<r.length;o++)n.traverseFileTree(r[o],i);n.pushFilesEntries(i),r.length&&n.readFileFromDirectory(e)})},t.prototype.pushFilesEntries=function(e){for(var i=this,n=[],r=function(l){o.filesEntries[l].file(function(h){i.filesEntries.length&&(n.push({path:i.filesEntries[l].fullPath,file:h}),l===i.filesEntries.length-1&&(i.filesEntries=[],i.renderSelectedFiles(e,n,!0)))})},o=this,a=0;a<this.filesEntries.length;a++)r(a)},t.prototype.onSelectFiles=function(e){if(this.enabled){var i;if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{var n=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=n),n.length>0&&(i=this.multiple?this.sortFileList(n):[n[0]],this.renderSelectedFiles(e,i))}else i=[].slice.call(e.target.files),this.renderSelectedFiles(e,i);this.isAngular&&e.stopPropagation()}},t.prototype.getBase64=function(e){return new Promise(function(i,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return i(r.result)},r.onerror=function(o){return n(o)}})},t.prototype.renderSelectedFiles=function(e,i,n,r){var o=this;this.base64String=[];var a={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(i.length<1)return a.isCanceled=!0,void this.trigger("selected",a);this.flag=!0;var l=[];this.multiple||(this.clearData(!0),i=[i[0]]);for(var h=0;h<i.length;h++)this.updateInitialFileDetails(e,i,n?i[h].file:i[h],h,l,n,r);if(a.filesData=l,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(h=0;h<l.length;h++){for(var u=Tt.beforeSanitize(),d=Tt.serializeValue(u,l[parseInt(h.toString())].name),f=l[parseInt(h.toString())].name,v=!1,g=0;g<f.length;g++)if(f.charCodeAt(g)>127){v=!0;break}var M=/<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/i.test(f);if(d!==l[parseInt(h.toString())].name&&(!v||M)){var w=i[parseInt(h.toString())].name.replace(/[\u00A0-\u9999<>\&]/g,function(I){return"&#"+I.charCodeAt(0)+";"});l[parseInt(h.toString())].name=w,l[parseInt(h.toString())].status=this.localizedTexts("invalidFileName"),l[parseInt(h.toString())].statusCode="0"}}this.allTypes||(l=this.checkExtension(l)),this.trigger("selected",a,function(S){o._internalRenderSelect(S,l)})},t.prototype.updateInitialFileDetails=function(e,i,n,r,o,a,l){var c={name:a?i[r].path.substring(1,i[r].path.length):l?at(n.name.substring(0,n.name.lastIndexOf(".")))+"."+this.getFileType(n.name):this.directoryUpload?i[r].webkitRelativePath:n.name,rawFile:n,size:n.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(n.name),validationMessages:this.validatedFileSize(n.size),statusCode:"1",id:at(n.name.substring(0,n.name.lastIndexOf(".")))+"."+this.getFileType(n.name)};l&&(c.fileSource="paste"),c.status=""!==c.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==c.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):c.status,(""!==c.validationMessages.minSize||""!==c.validationMessages.maxSize)&&(c.statusCode="0"),o.push(c)},t.prototype._internalRenderSelect=function(e,i){if(!e.cancel){if(this.selectedFiles=this.selectedFiles.concat(i),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var n=0;n<e.modifiedFilesData.length;n++)for(var r=0;r<i.length;r++)e.modifiedFilesData[n].id===i[r].id&&(e.modifiedFilesData[n].rawFile=i[r].rawFile);var o=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(o),this.filesData=this.filesData.concat(o),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(o)}else this.internalCreateFileList(i),this.filesData=this.filesData.concat(i),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(i);!p(e.progressInterval)&&""!==e.progressInterval&&(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(i),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},t.prototype.allowUpload=function(){var e=!1;return this.isForm&&!p(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},t.prototype.isFormUpload=function(){var e=!1;return this.isForm&&(p(this.asyncSettings.saveUrl)||""===this.asyncSettings.saveUrl)&&(p(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl)&&(e=!0),e},t.prototype.clearData=function(e){p(this.listParent)||(X(this.listParent),this.listParent=null),"msie"!==this.browserName&&!e&&(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},t.prototype.updateSortedFileList=function(e){var i=this.createElement("div",{id:"clonewrapper"}),n=-1;if(this.listParent){for(var r=0;r<this.listParent.querySelectorAll("li").length;r++){var o=this.listParent.querySelectorAll("li")[r];i.appendChild(o.cloneNode(!0))}this.removeActionButtons();var a=[].slice.call(i.childNodes);this.createParentUL();for(var l=0;l<e.length;l++){for(var h=0;h<this.filesData.length;h++)this.filesData[h].name===e[l].name&&(this.listParent.appendChild(a[h]),y.add(a[h].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(a[h]),n=l);n!==l&&this.internalCreateFileList([e[l]])}}else this.internalCreateFileList(e)},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.checkExtension=function(e){var i=e;if(!this.isBlank(this.allowedExtensions)){for(var n=[],o=0,a=this.allowedExtensions.split(",");o<a.length;o++)n.push(a[o].trim().toLocaleLowerCase());for(var h=0;h<e.length;h++)-1===n.indexOf(("."+e[h].type).toLocaleLowerCase())&&(e[h].status=this.localizedTexts("invalidFileType"),e[h].statusCode="0")}return i},t.prototype.validatedFileSize=function(e){var i="",n="";return e<this.minFileSize?i=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?n=this.localizedTexts("invalidMaxFileSize"):(i="",n=""),{minSize:i,maxSize:n}},t.prototype.isPreLoadFile=function(e){for(var i=!1,n=0;n<this.files.length;n++)this.files[n].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[n].type===e.type&&(i=!0);return i},t.prototype.createCustomfileList=function(e){this.createParentUL();for(var i=0,n=e;i<n.length;i++){var r=n[i],o=this.createElement("li",{className:jp,attrs:{"data-file-name":r.name}});this.uploadTemplateFn=this.templateComplier(this.template);var a=this.uploadTemplateFn(r,this,"template",this.element.id+"Template",this.isStringTemplate,null,o);a&&xe([].slice.call(a),o);var h=e.indexOf(r),c={element:o,fileInfo:r,index:h,isPreload:this.isPreLoadFile(r)},u={element:o,fileInfo:r,index:h,isPreload:this.isPreLoadFile(r)};this.trigger("rendering",c),this.trigger("fileListRendering",u),this.listParent.appendChild(o),this.fileList.push(o)}this.renderReactTemplates()},t.prototype.createParentUL=function(){p(this.listParent)&&(this.listParent=this.createElement("ul",{className:lx}),this.uploadWrapper.appendChild(this.listParent))},t.prototype.formFileList=function(e,i){var n=this.createElement("li",{className:jp});n.setAttribute("data-files-count",e.length+"");for(var o,r=this.createElement("span",{className:Xy}),a=0,l=e;a<l.length;a++){var h=l[a],c=this.createElement("span",{className:hx});c.innerHTML=this.getFileNameOnly(h.name);var u=this.createElement("span",{className:cx}),d=this.getFileType(h.name);if(u.innerHTML="."+d,d||u.classList.add("e-hidden"),this.enableRtl){var f=this.createElement("span",{className:vx});f.appendChild(u),f.appendChild(c),r.appendChild(f)}else r.appendChild(c),r.appendChild(u);this.truncateName(c),o=this.formValidateFileInfo(h,n)}n.appendChild(r),this.setListToFileInfo(e,n);var v=this.listParent.querySelectorAll("li").length,g=this.createElement("span");if(n.classList.contains(Ah)?(g.classList.add(ai),g.classList.add(Ah),g.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):o):(g.classList.add(e.length>1?"e-file-information":ux),g.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),r.appendChild(g),p(n.querySelector(".e-icons"))){var b=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&b.classList.add("e-msie"),b.setAttribute("title",this.localizedTexts("remove")),n.appendChild(r),n.appendChild(b),y.add(b,"click",this.removeFiles,this),b.classList.add(ji)}var M={element:n,fileInfo:this.mergeFileInfo(e,n),index:v,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,n))},w={element:n,fileInfo:this.mergeFileInfo(e,n),index:v,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,n))};this.trigger("rendering",M),this.trigger("fileListRendering",w),this.listParent.appendChild(n),this.fileList.push(n)},t.prototype.formValidateFileInfo=function(e,i){var n=e.status,r=this.validatedFileSize(e.size);(""!==r.minSize||""!==r.maxSize)&&(this.addInvalidClass(i),n=""!==r.minSize?this.localizedTexts("invalidMinFileSize"):""!==r.maxSize?this.localizedTexts("invalidMaxFileSize"):n);var o=this.checkExtension(this.getFilesInArray(e))[0].status;return o===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(i),n=o),n},t.prototype.addInvalidClass=function(e){e.classList.add(Ah)},t.prototype.createFormInput=function(e){if("safari"!==this.browserName){var i=this.element.cloneNode(!0);i.classList.add("e-hidden-file-input");for(var n=0,r=e;n<r.length;n++)r[n].input=i;i.setAttribute("id",at("hiddenUploader")),i.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+ax).appendChild(i),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")}},t.prototype.getFileSize=function(e){for(var i=0,n=0,r=e;n<r.length;n++)i+=r[n].size;return i},t.prototype.mergeFileInfo=function(e,i){for(var n={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:i},r=[],o="",a=0,l=e;a<l.length;a++){var h=l[a];r.push(h.name),o=h.type}return n.name=r.join(", "),n.size=this.getFileSize(e),n.type=o,n.status=this.statusForFormUpload(e,i),n},t.prototype.statusForFormUpload=function(e,i){for(var r,n=!0,o=0,a=e;o<a.length;o++){var l=a[o];r=l.status;var h=this.validatedFileSize(l.size);(""!==h.minSize||""!==h.maxSize)&&(n=!1,r=""!==h.minSize?this.localizedTexts("invalidMinFileSize"):""!==h.maxSize?this.localizedTexts("invalidMaxFileSize"):r);var c=this.checkExtension(this.getFilesInArray(l))[0].status;c===this.localizedTexts("invalidFileType")&&(n=!1,r=c)}return n?r=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(i.classList.add(Ah),r=e.length>1?this.localizedTexts("invalidFileSelection"):r),r},t.prototype.formCustomFileList=function(e,i){this.createParentUL();var n=this.createElement("li",{className:jp});n.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,n);var r=this.mergeFileInfo(e,n);n.setAttribute("data-file-name",r.name),this.uploadTemplateFn=this.templateComplier(this.template);var o=this.uploadTemplateFn(r,this,"template",this.element.id+"Template",this.isStringTemplate,null,n);o&&xe([].slice.call(o),n);var l=this.listParent.querySelectorAll("li").length;n.classList.contains(Ah)||this.createFormInput(e);var h={element:n,fileInfo:r,index:l,isPreload:this.isPreLoadFile(r)},c={element:n,fileInfo:r,index:l,isPreload:this.isPreLoadFile(r)};this.trigger("rendering",h),this.trigger("fileListRendering",c),this.listParent.appendChild(n),this.fileList.push(n),this.renderReactTemplates()},t.prototype.createFileList=function(e){this.filesData=this.filesData&&this.filesData.length>0?this.filesData.concat(e):e,this.internalCreateFileList(e)},t.prototype.internalCreateFileList=function(e){if(this.createParentUL(),""===this.template||p(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add(mx),this.formFileList(e,this.element.files);else for(var i=0,n=e;i<n.length;i++){var r=n[i],o=this.createElement("li",{className:jp,attrs:{"data-file-name":r.name,"data-files-count":"1"}}),a=this.createElement("span",{className:Xy}),l=this.createElement("span",{className:hx,attrs:{title:r.name}});l.innerHTML=this.getFileNameOnly(r.name);var h=this.createElement("span",{className:cx}),c=this.getFileType(r.name);if(h.innerHTML="."+c,c||h.classList.add("e-hidden"),this.enableRtl){var u=this.createElement("span",{className:vx});u.appendChild(h),u.appendChild(l),a.appendChild(u)}else a.appendChild(l),a.appendChild(h);var d=this.createElement("span",{className:ux});d.innerHTML=this.bytesToSize(r.size),a.appendChild(d);var f=this.createElement("span",{className:ai});a.appendChild(f),f.innerHTML=r.status,o.appendChild(a);var v=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&v.classList.add("e-msie"),v.setAttribute("title",this.localizedTexts("remove")),o.appendChild(v),y.add(v,"click",this.removeFiles,this),"2"===r.statusCode?(f.classList.add(Cr),v.classList.add(Qn),v.setAttribute("title",this.localizedTexts("delete"))):"1"!==r.statusCode&&(f.classList.remove(Cr),f.classList.add(dx)),this.autoUpload&&"1"===r.statusCode&&""!==this.asyncSettings.saveUrl&&(f.innerHTML=""),v.classList.contains(Qn)||v.classList.add(ji);var g=e.indexOf(r),b={element:o,fileInfo:r,index:g,isPreload:this.isPreLoadFile(r)},M={element:o,fileInfo:r,index:g,isPreload:this.isPreLoadFile(r)};this.trigger("rendering",b),this.trigger("fileListRendering",M),this.listParent.appendChild(o),this.fileList.push(o),this.truncateName(l);var w=this.flag;this.isPreLoadFile(r)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=w)}else this.isFormUpload()?(this.uploadWrapper.classList.add(mx),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e)},t.prototype.getSlicedName=function(e){var i=e.textContent;e.dataset.tail=i.slice(i.length-10)},t.prototype.setListToFileInfo=function(e,i){for(var n=0,r=e;n<r.length;n++)r[n].list=i},t.prototype.truncateName=function(e){("edge"!==this.browserName&&e.offsetWidth<e.scrollWidth||e.offsetWidth+1<e.scrollWidth)&&this.getSlicedName(e)},t.prototype.getFileType=function(e){var i,n=e.lastIndexOf(".");return n>=0&&(i=e.substring(n+1)),i||""},t.prototype.getFileNameOnly=function(e){var i=this.getFileType(e);return e.split("."+i)[0]},t.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},t.prototype.filterfileList=function(e){for(var i=[],r=0;r<e.length;r++)this.getLiElement(e[r]).classList.contains(Cr)||i.push(e[r]);return i},t.prototype.updateStatus=function(e,i,n,r){if(void 0===r&&(r=!0),!(""===i||p(i))&&!(""===n||p(n))&&(e.status=i,e.statusCode=n),r){var o=this.getLiElement(e);p(o)||!p(o.querySelector("."+ai))&&""!==i&&!p(i)&&(o.querySelector("."+ai).textContent=i)}return e},t.prototype.getLiElement=function(e){for(var i,n=0;n<this.filesData.length;n++)!p(e)&&(p(this.filesData[n].id)||p(e.id)?this.filesData[n].name===e.name:this.filesData[n].name===e.name&&this.filesData[n].id===e.id)&&(i=n);return this.fileList[i]},t.prototype.createProgressBar=function(e){var i=this.createElement("span",{className:To}),n=this.createElement("progressbar",{className:Ap,attrs:{value:"0",max:"100"}}),r=this.createElement("span",{className:"e-progress-inner-wrap"});n.setAttribute("style","width: 0%");var o=this.createElement("span",{className:Wy});o.textContent="0%",r.appendChild(n),i.appendChild(r),i.appendChild(o),e.querySelector("."+Xy).appendChild(i)},t.prototype.updateProgressbar=function(e,i){if(!isNaN(Math.round(e.loaded/e.total*100))&&!p(i.querySelector("."+Ap)))if(p(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(i,Math.round(e.loaded/e.total*100).toString()+"%");else{var n=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);(0===n||100===n)&&this.changeProgressValue(i,Math.round(e.loaded/e.total*100).toString()+"%")}},t.prototype.changeProgressValue=function(e,i){e.querySelector("."+Ap).setAttribute("style","width:"+i),e.querySelector("."+Wy).textContent=i},t.prototype.uploadInProgress=function(e,i,n,r){var o=this.getLiElement(i);if(!p(o)||n){if(p(o))this.cancelUploadingFile(i,e,r);else{"5"===i.statusCode&&this.cancelUploadingFile(i,e,r,o),!(o.querySelectorAll("."+To).length>0)&&o.querySelector("."+ai)&&(o.querySelector("."+ai).classList.add($n),this.createProgressBar(o),this.updateProgressBarClasses(o,$n),o.querySelector("."+ai).classList.remove(Gn)),this.updateProgressbar(e,o);var a=o.querySelector("."+ji);p(a)||(a.classList.add(Kt,$n),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(ji))}var l={e,operation:"upload",file:this.updateStatus(i,this.localizedTexts("inProgress"),"3")};this.trigger("progress",l)}},t.prototype.cancelUploadingFile=function(e,i,n,r){var o=this;"5"===e.statusCode&&this.trigger("canceling",{event:i,fileData:e,cancel:!1,customFormData:[]},function(l){if(l.cancel){if(e.statusCode="3",!p(r)){var h=r.querySelector("."+Kt);p(h)||(Ri(h),X(r.querySelector(".e-spinner-pane")))}}else{n.emitError=!1,n.httpRequest.abort();var c=new FormData;if("5"===e.statusCode){var u=o.element.getAttribute("name");c.append(u,e.name),c.append("cancel-uploading",e.name),o.updateFormData(c,l.customFormData);var d=new ks(o.asyncSettings.removeUrl,"POST",!0,null);d.emitError=!1,d.onLoad=function(f){return o.removecanceledFile(f,e),{}},d.send(c)}}})},t.prototype.removecanceledFile=function(e,i){var n=this.getLiElement(i);if(!(p(n)||n.querySelector("."+Xr)||p(n.querySelector("."+Kt)))){this.updateStatus(i,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,i,n);var r=n.querySelector("."+ji);p(n)||(Ri(r),p(n.querySelector(".e-spinner-pane"))||X(n.querySelector(".e-spinner-pane")));var o=e&&e.currentTarget?this.getResponse(e):null;this.trigger("success",{event:e,response:o,operation:"cancel",file:i})}},t.prototype.renderFailureState=function(e,i,n){var r=this;this.updateProgressBarClasses(n,Gn),this.removeProgressbar(n,"failure"),p(n.querySelector(".e-file-status"))||n.querySelector(".e-file-status").classList.add(Gn);var o=n.querySelector("."+Kt);p(o)||(o.classList.remove(Kt,$n),o.classList.add(ji),o.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),n.querySelector("."+Xr).addEventListener("click",function(l){r.reloadcanceledFile(l,i,n,!1)},!1))},t.prototype.reloadcanceledFile=function(e,i,n,r){i.statusCode="1",i.status=this.localizedTexts("readyToUploadMessage"),r||(p(n.querySelector("."+ai))||n.querySelector("."+ai).classList.remove(Gn),p(n.querySelector("."+Xr))||X(n.querySelector("."+Xr)),this.pauseButton=null),p(n)||n.classList.add(jh),this.upload([i])},t.prototype.uploadComplete=function(e,i,n){var r=e.target;if(4===r.readyState&&r.status>=200&&r.status<=299){var o=this.getLiElement(i);if(p(o)&&(!n||p(n)))return;if(!p(o)){this.updateProgressBarClasses(o,Cr),this.removeProgressbar(o,"success");var a=o.querySelector("."+Kt);p(a)||(a.classList.add(Qn),a.setAttribute("title",this.localizedTexts("delete")),a.classList.remove(Kt),a.classList.remove($n))}this.raiseSuccessEvent(e,i)}else this.uploadFailed(e,i)},t.prototype.getResponse=function(e){var i=e.currentTarget;return{readyState:i.readyState,statusCode:i.status,statusText:i.statusText,headers:i.getAllResponseHeaders(),withCredentials:i.withCredentials}},t.prototype.raiseSuccessEvent=function(e,i){var n=this,r=e&&e.currentTarget?this.getResponse(e):null,o=this.localizedTexts("uploadSuccessMessage"),a={e,response:r,operation:"upload",file:this.updateStatus(i,o,"2",!1),statusText:o},l=this.getLiElement(i);if(!p(l)){var h=l.querySelector("."+px);p(h)||(Ri(l),X(h))}this.trigger("success",a,function(c){n.updateStatus(i,c.statusText,"2"),n.uploadedFilesData.push(i),n.trigger("change",{file:n.uploadedFilesData}),n.checkActionButtonStatus(),n.fileList.length>0&&(n.getLiElement(i).classList.contains(jh)?n.getLiElement(i).classList.remove(jh):(n.uploadSequential(),n.checkActionComplete(!0)))})},t.prototype.uploadFailed=function(e,i){var n=this,r=this.getLiElement(i),o=e&&e.currentTarget?this.getResponse(e):null,a=this.localizedTexts("uploadFailedMessage"),l={e,response:o,operation:"upload",file:this.updateStatus(i,a,"0",!1),statusText:a};p(r)||this.renderFailureState(e,i,r),this.trigger("failure",l,function(h){n.updateStatus(i,h.statusText,"0"),n.checkActionButtonStatus(),n.uploadSequential(),n.checkActionComplete(!0)})},t.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},t.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},t.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}},t.prototype.getSelectedFileStatus=function(e){for(var i=[],n=0,r=0;r<e.length;r++)for(var o=e[r],a=0;a<this.filesData.length;a++)this.filesData[a].name===o.name&&this.filesData[a].status===o.status&&(i[n]=this.filesData[a],++n);return i},t.prototype.updateProgressBarClasses=function(e,i){var n=e.querySelector("."+Ap);p(n)||n.classList.add(i)},t.prototype.removeProgressbar=function(e,i){var n=this;p(e.querySelector("."+To))||(this.progressAnimation=new $i({duration:1250}),this.progressAnimation.animate(e.querySelector("."+To),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector("."+Wy),{name:"FadeOut"}),setTimeout(function(){n.animateProgressBar(e,i)},750))},t.prototype.animateProgressBar=function(e,i){"success"===i?(e.classList.add(Cr),p(e.querySelector("."+ai))||(e.querySelector("."+ai).classList.remove($n),this.progressAnimation.animate(e.querySelector("."+ai),{name:"FadeIn"}),e.querySelector("."+ai).classList.add(Cr))):p(e.querySelector("."+ai))||(e.querySelector("."+ai).classList.remove($n),this.progressAnimation.animate(e.querySelector("."+ai),{name:"FadeIn"}),e.querySelector("."+ai).classList.add(Gn)),e.querySelector("."+To)&&X(e.querySelector("."+To))},t.prototype.setExtensions=function(e){""===e||p(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)},t.prototype.templateComplier=function(e){if(e)try{return"function"!=typeof e&&Z(e,document).length?vt(T(e,document).innerHTML.trim()):vt(e)}catch{return vt(e)}},t.prototype.setRTL=function(){this.enableRtl?D([this.uploadWrapper],"e-rtl"):N([this.uploadWrapper],"e-rtl")},t.prototype.localizedTexts=function(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)},t.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains(qy)&&this.uploadWrapper.classList.remove(qy),!p(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!p(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!p(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(qy),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),p(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),p(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},t.prototype.checkHTMLAttributes=function(e){for(var n=0,r=e?p(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];n<r.length;n++){var o=r[n];if(!p(this.element.getAttribute(o)))switch(o){case"accept":(p(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(p(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||e){var a="multiple"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({multiple:a},!e),this.initialAttr.multiple=!0}break;case"disabled":if(p(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||e){var l=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:l},!e),this.initialAttr.disabled=!0}}}},t.prototype.chunkUpload=function(e,i,n){var o=Math.min(this.asyncSettings.chunkSize,e.size),l=e.rawFile.slice(0,o);this.sendRequest(e,{chunkIndex:0,blob:l,file:e,start:0,end:o,retryCount:0,request:null},i,n)},t.prototype.sendRequest=function(e,i,n,r){var o=this,a=new FormData,l=e.rawFile.slice(i.start,i.end);a.append(this.uploaderName,l,e.name),a.append("chunk-index",i.chunkIndex.toString()),a.append("chunkIndex",i.chunkIndex.toString());var h=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);a.append("total-chunk",h.toString()),a.append("totalChunk",h.toString());var c=new ks({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});c.emitError=!1,c.onLoad=function(d){return o.chunkUploadComplete(d,i,n),{}},c.onUploadProgress=function(d){return o.chunkUploadInProgress(d,i,n),{}};var u={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};c.beforeSend=function(d){u.currentRequest=c.httpRequest,u.currentChunkIndex=i.chunkIndex,o.trigger(0===u.currentChunkIndex?"uploading":"chunkUploading",u,function(f){o.uploadingEventCallback(a,f,d,e)})},c.onError=function(d){return o.chunkUploadFailed(d,i,n),{}},c.send(a),i.request=c},t.prototype.uploadingEventCallback=function(e,i,n,r){i.cancel?this.eventCancelByArgs(n,i,r):this.updateFormData(e,i.customFormData)},t.prototype.eventCancelByArgs=function(e,i,n){var r=this;if(e.cancel=!0,"5"!==i.fileData.statusCode){i.fileData.statusCode="5",i.fileData.status=this.localizedTexts("fileUploadCancel");var o=this.getLiElement(i.fileData);if(o){p(o.querySelector("."+ai))||(o.querySelector("."+ai).innerHTML=this.localizedTexts("fileUploadCancel"),o.querySelector("."+ai).classList.add(Gn)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var a=o.querySelector("."+ji);a&&a.parentElement.insertBefore(this.pauseButton,a),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(l){r.reloadcanceledFile(l,n,o)},!1),this.checkActionButtonStatus()}}},t.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||p(this.asyncSettings.chunkSize))},t.prototype.chunkUploadComplete=function(e,i,n){var a,r=this,o=e.target;if(4===o.readyState&&o.status>=200&&o.status<300){var l=e&&e.currentTarget?this.getResponse(e):null,h=Math.max(Math.ceil(i.file.size/this.asyncSettings.chunkSize),1);if(this.trigger("chunkSuccess",{event:e,file:i.file,chunkIndex:i.chunkIndex,totalChunk:h,chunkSize:this.asyncSettings.chunkSize,response:l}),(p(n)||!n)&&(a=this.getLiElement(i.file)),this.updateMetaData(i),i.end===i.file.size&&(i.file.statusCode="3"),"5"===i.file.statusCode)this.trigger("canceling",{event:e,fileData:i.file,cancel:!1,customFormData:[]},function(f){if(f.cancel){i.file.statusCode="3";var v=a.querySelector("."+Kt);!p(a)&&!p(v)&&(Ri(v),X(a.querySelector(".e-spinner-pane"))),r.sendNextRequest(i)}else{i.request.emitError=!1,o.abort();var g=new FormData,b=r.element.getAttribute("name");g.append(b,i.file.name),g.append("cancel-uploading",i.file.name),g.append("cancelUploading",i.file.name),r.updateFormData(g,f.customFormData);var M=new ks(r.asyncSettings.removeUrl,"POST",!0,null);M.emitError=!1,M.onLoad=function(w){return r.removeChunkFile(w,i,n),{}},M.send(g)}});else{if(h-1===i.chunkIndex&&h>i.chunkIndex){var d=this.pausedData.indexOf(i);return d>=0&&this.pausedData.splice(d,1),p(this.template)&&(p(n)||!n)&&a&&(a&&!p(a.querySelector("."+Ji))&&X(a.querySelector("."+Ji)),this.removeChunkProgressBar(i)),void this.raiseSuccessEvent(e,i.file)}"4"!==i.file.statusCode&&this.sendNextRequest(i)}}else this.chunkUploadFailed(e,i)},t.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},t.prototype.removeChunkFile=function(e,i,n){if(p(this.template)&&p(n)&&!n){var r=this.getLiElement(i.file),o=r.querySelector("."+Kt),a=o;this.updateStatus(i.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(r,Gn),this.removeProgressbar(r,"failure"),o&&o.classList.remove(Kt),o&&o.classList.add(ji),o&&o.setAttribute("title",this.localizedTexts("remove"));var l=r.querySelector("."+Ji);l&&l.classList.add(Xr),l&&l.classList.remove(Ji),l&&l.setAttribute("title",this.localizedTexts("retry")),!p(r)&&!p(o)&&!p(r.querySelector(".e-spinner-pane"))&&(Ri(a),X(r.querySelector(".e-spinner-pane")))}},t.prototype.pauseUpload=function(e,i,n){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var r={event:i||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,n,r)},t.prototype.abortUpload=function(e,i,n){"4"!==e.file.statusCode&&(e.request.emitError=!1,e.request.httpRequest.abort());var r=this.getLiElement(e.file);if(p(this.template)&&(p(i)||!i)){var o=r.querySelector("."+Ji);o.classList.remove(Ji),o.classList.add(Do),o.setAttribute("title",this.localizedTexts("resume")),o.nextElementSibling.classList.add(ji),o.nextElementSibling.classList.remove(Kt),o.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var a=0;a<this.pausedData.length;a++)this.pausedData[a].file.name===e.file.name&&this.pausedData.splice(a,1);this.pausedData.push(e),this.trigger("pausing",n)},t.prototype.resumeUpload=function(e,i,n){var o,r=this.getLiElement(e.file);p(r)||(o=r.querySelector("."+Do)),!p(o)&&(p(n)||!n)&&(o.classList.remove(Do),o.classList.add(Ji),o.setAttribute("title",this.localizedTexts("pause")),o.nextElementSibling.classList.remove(ji),o.nextElementSibling.classList.add(Kt),o.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var a={event:i||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",a);for(var l=0;l<this.pausedData.length;l++)this.pausedData[l].end===this.pausedData[l].file.size?this.chunkUploadComplete(i,e,n):this.pausedData[l].file.name===e.file.name&&(this.pausedData[l].start=this.pausedData[l].end,this.pausedData[l].end=this.pausedData[l].end+this.asyncSettings.chunkSize,this.pausedData[l].end=Math.min(this.pausedData[l].end,this.pausedData[l].file.size),this.pausedData[l].chunkIndex=this.pausedData[l].chunkIndex+1,this.sendRequest(this.pausedData[l].file,this.pausedData[l],n))},t.prototype.updateMetaData=function(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)},t.prototype.removeChunkProgressBar=function(e){var i=this.getLiElement(e.file);if(!p(i)){this.updateProgressBarClasses(i,Cr),this.removeProgressbar(i,"success");var n=i.querySelector("."+Kt);p(n)||(n.classList.add(Qn),n.setAttribute("title",this.localizedTexts("delete")),n.classList.remove(Kt,$n))}},t.prototype.chunkUploadFailed=function(e,i,n){var a,r=this,o=Math.max(Math.ceil(i.file.size/this.asyncSettings.chunkSize),1);p(this.template)&&(p(n)||!n)&&(a=this.getLiElement(i.file));var l=e&&e.currentTarget?this.getResponse(e):null;this.trigger("chunkFailure",{event:e,file:i.file,chunkIndex:i.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:l},function(c){if(!c.cancel)if(i.retryCount<r.asyncSettings.retryCount)setTimeout(function(){r.retryRequest(a,i,n)},r.asyncSettings.retryAfterDelay);else{if(!p(a)){var u=a.querySelector("."+Ji)?a.querySelector("."+Ji):a.querySelector("."+Do);p(u)||(u.classList.add(Xr),u.classList.remove(Ji,Do)),r.updateProgressBarClasses(a,Gn),r.removeProgressbar(a,"failure"),a.querySelector(".e-icons").classList.remove($n);var d=a.querySelector("."+Kt)?a.querySelector("."+Kt):a.querySelector("."+ji);d.classList.remove(Kt),p(a.querySelector("."+Ji))||X(a.querySelector("."+Ji)),i.start>0?(d.classList.add(Qn),d.setAttribute("title",r.localizedTexts("delete"))):(d.classList.add(ji),d.setAttribute("title",r.localizedTexts("remove")))}i.retryCount=0;var f=i.file,v=r.localizedTexts("uploadFailedMessage"),g={e,response:l,operation:"upload",file:r.updateStatus(f,v,"0",!1),statusText:v};r.trigger("failure",g,function(b){r.updateStatus(f,b.statusText,"0"),r.uploadSequential(),r.checkActionComplete(!0)})}})},t.prototype.retryRequest=function(e,i,n){p(this.template)&&(p(n)||!n)&&e&&this.updateProgressBarClasses(e,Gn),i.retryCount+=1,this.sendRequest(i.file,i)},t.prototype.checkPausePlayAction=function(e){var i=e.target,r=this.fileList.indexOf(e.target.parentElement),a=this.getCurrentMetaData(this.filesData[r]);i.classList.contains(Ji)?this.pauseUpload(a,e):i.classList.contains(Do)?this.resumeUpload(a,e):i.classList.contains(Xr)&&(a.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(a,!1):this.retryUpload(a,!0))},t.prototype.retryUpload=function(e,i){i?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add(jh)},t.prototype.chunkUploadInProgress=function(e,i,n){var r=this;if("4"!==i.file.statusCode){"4"!==i.file.statusCode&&"5"!==i.file.statusCode&&(i.file.statusCode="3",i.file.status=this.localizedTexts("inProgress")),this.updateMetaData(i);var o=this.getLiElement(i.file);if(!p(o)){var a=o.querySelector("."+Xr);if(p(a)||(a.classList.add(Ji),a.setAttribute("title",this.localizedTexts("pause")),a.classList.remove(Xr)),!p(o)){if(!(o.querySelectorAll("."+To).length>0)){var l=o.querySelector("."+ai);p(this.template)&&(l.classList.add($n),l.classList.remove(Gn),this.createProgressBar(o),this.updateProgressBarClasses(o,$n));var h=o.querySelector("."+ji)?o.querySelector("."+ji):o.querySelector("."+Qn);p(h)||(h.classList.add(Kt),h.setAttribute("title",this.localizedTexts("abort")),h.classList.remove(ji))}if(!isNaN(Math.round(e.loaded/e.total*100))&&p(this.template)&&"4"!==i.file.statusCode){var c=void 0,u=Math.ceil(i.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&u&&(c=Math.round(i.chunkIndex/u*100),this.changeProgressValue(o,c.toString()+"%"))}0===i.chunkIndex&&this.checkActionButtonStatus()}if(p(o.querySelector("."+Ji))&&p(this.template)&&p(o.querySelector("."+Qn))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var d=o.querySelector("."+Kt);d.parentElement.insertBefore(this.pauseButton,d),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(f){r.checkPausePlayAction(f)},!1)}}}},t.prototype.bytesToSize=function(e){var i=-1;if(!e)return"0.0 KB";do{e/=1024,i++}while(e>99);return i>=2&&(e*=1024,i=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][i]},t.prototype.sortFileList=function(e){for(var i=e=e||this.sortFilesList,n=[],r=0;r<i.length;r++)n.push(i[r].name);for(var a=[],l=0,h=n.sort();l<h.length;l++){var c=h[l];for(r=0;r<i.length;r++)c===i[r].name&&a.push(i[r])}return a},t.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var i=0,n=["aria-label","directory","webkitdirectory","tabindex"];i<n.length;i++)this.element.removeAttribute(n[i]);p(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),X(this.uploadWrapper)),this.uploadWrapper=null,this.uploadWrapper=null,this.browseButton=null,this.dropAreaWrapper=null,this.dropZoneElement=null,this.dropArea=null,this.keyboardModule=null,this.clearButton=null,this.uploadButton=null,s.prototype.destroy.call(this)},t.prototype.upload=function(e,i){var n=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||i))this.sequenceUpload(e);else{var r=this.getFilesInArray(e);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},function(a){a.cancel||n.uploadFiles(r,i)})}},t.prototype.getFilesInArray=function(e){var i=[];return e instanceof Array?i=e:i.push(e),i},t.prototype.serverReadFileBase64=function(e,i,n){var r=this;return new Promise(function(o,a){var c,l=r.fileStreams[e].rawFile;try{var h=new FileReader;h.onload=(c=h,function(){try{var u=c.result,d=u?u.split(";base64,")[1]:null;o(d)}catch(f){a(f)}}),h.readAsDataURL(l.slice(i,i+n))}catch(c){a(c)}})},t.prototype.uploadFileCount=function(e){var i=this.filesData;return i&&0!==i.length?i.length:-1},t.prototype.getFileRead=function(e,i){var n=this.filesData;if(!n||0===n.length)return-1;var r=n[e],o=this.newFileRef++;return this.fileStreams[o]=r,o},t.prototype.getFileInfo=function(e,i){var n=this.filesData;return n&&0!==n.length&&n[e]?this.filesData[e]:null},t.prototype.uploadFiles=function(e,i){var n=[];if(""!==this.asyncSettings.saveUrl&&!p(this.asyncSettings.saveUrl)){if(!i||p(i))if(this.multiple)n=this.filterfileList(e);else{var r=[];r.push(e[0]),n=this.filterfileList(r)}else n=e;for(var o=0;o<n.length;o++)this.uploadFilesRequest(n,o,i)}},t.prototype.uploadFilesRequest=function(e,i,n){var r=this,o=this.checkChunkUpload(),a=new ks(this.asyncSettings.saveUrl,"POST",!0,null);a.emitError=!1;var l={fileData:e[i],customFormData:[],cancel:!1},h=new FormData;if(a.beforeSend=function(u){l.currentRequest=a.httpRequest,r.trigger("uploading",l,function(d){d.cancel&&r.eventCancelByArgs(u,d,e[i]),r.updateFormData(h,d.customFormData)})},"1"===e[i].statusCode){var c=this.element.getAttribute("name");h.append(c,e[i].rawFile,e[i].name),o&&e[i].size>this.asyncSettings.chunkSize?this.chunkUpload(e[i],n,i):(a.onLoad=function(u){return l.cancel||r.uploadComplete(u,e[i],n),{}},a.onUploadProgress=function(u){return l.cancel||r.uploadInProgress(u,e[i],n,a),{}},a.onError=function(u){return r.uploadFailed(u,e[i]),{}},a.send(h))}},t.prototype.spliceFiles=function(e){for(var i=this.fileList[e],n=this.getFilesData(),r=+i.getAttribute("data-files-count"),o=0,a=0;a<e;a++)o+=+this.fileList[a].getAttribute("data-files-count");for(var h=o+r-1;h>=o;h--)n.splice(h,1)},t.prototype.remove=function(e,i,n,r,o){var a=this;p(r)&&(r=!0);var l={event:o,cancel:!1,filesData:[],customFormData:[],postRawFile:r,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},function(c){if(!c.cancel)if(a.isFormUpload())l.filesData=e,a.trigger("removing",l,function(w){if(!w.cancel)for(var I=!1,P=void 0,H=0,G=a.getFilesInArray(e);H<G.length;H++){var ee=G[H];if(I||(P=a.fileList.indexOf(ee.list)),P>-1){var ue=p(ee.input)?null:ee.input;ue&&X(ue),a.spliceFiles(P),X(a.fileList[P]),a.fileList.splice(P,1),I=!0,P=-1}}});else if(a.isForm&&(p(a.asyncSettings.removeUrl)||""===a.asyncSettings.removeUrl))l.filesData=a.getFilesData(),a.trigger("removing",l,function(w){w.cancel||a.clearAll()});else{var u=[];(e=p(e)?a.filesData:e)instanceof Array?u=e:u.push(e),l.filesData=u;for(var d=a.asyncSettings.removeUrl,f=!(""===d||p(d)),v=function(w){var S=a.uploadedFilesData.indexOf(w);("2"===w.statusCode||"4"===w.statusCode||"0"===w.statusCode&&-1!==S)&&f?a.removeUploadedFile(w,l,n,i):n?a.removeFilesData(w,i):a.trigger("removing",l,function(I){I.cancel||a.removeFilesData(w,i)}),o&&!o.target.classList.contains(ji)&&a.checkActionComplete(!1)},g=0,b=u;g<b.length;g++)v(b[g])}})},t.prototype.clearAll=function(){var e=this;if(p(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.trigger("clearing",{cancel:!1,filesData:this.filesData},function(n){n.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})},t.prototype.getFilesData=function(e){return p(e)?this.filesData:this.getSelectedFiles(e)},t.prototype.pause=function(e,i){var n=this.getFilesInArray(e=e||this.filesData);this.pauseUploading(n,i)},t.prototype.pauseUploading=function(e,i){for(var n=this.getFiles(e),r=0;r<n.length;r++)"3"===n[r].statusCode&&this.pauseUpload(this.getCurrentMetaData(n[r],null),null,i)},t.prototype.getFiles=function(e){var i=[];return p(e)||e instanceof Array?i=e:i.push(e),i},t.prototype.resume=function(e,i){var n=this.getFilesInArray(e=e||this.filesData);this.resumeFiles(n,i)},t.prototype.resumeFiles=function(e,i){for(var n=this.getFiles(e),r=0;r<n.length;r++)"4"===n[r].statusCode&&this.resumeUpload(this.getCurrentMetaData(n[r],null),null,i)},t.prototype.retry=function(e,i,n){var r=this.getFilesInArray(e=e||this.filesData);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(r,i,n)},t.prototype.retryFailedFiles=function(e,i,n){for(var r=this.getFiles(e),o=0;o<r.length;o++)if("5"===r[o].statusCode||"0"===r[o].statusCode)if(this.asyncSettings.chunkSize>0&&this.getCurrentMetaData(r[o],null))this.retryUpload(this.getCurrentMetaData(r[o],null),i);else{var a=void 0;n||(a=this.fileList[this.filesData.indexOf(r[o])]),this.reloadcanceledFile(null,r[o],a,n)}},t.prototype.cancel=function(e){var i=this.getFilesInArray(e=e||this.filesData);this.cancelUpload(i)},t.prototype.cancelUpload=function(e){var i=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var n=0;n<i.length;n++)if("3"===i[n].statusCode){var r=this.getCurrentMetaData(i[n],null);r.file.statusCode="5",r.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(r),this.showHideUploadSpinner(i[n])}}else for(n=0;n<i.length;n++)"3"===i[n].statusCode&&(i[n].statusCode="5",i[n].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(i[n]))},t.prototype.showHideUploadSpinner=function(e){var i=this.getLiElement(e);if(!p(i)&&p(this.template)){var n=i.querySelector("."+Kt);Vs({target:n,width:"20px"}),ln(n)}},Pe([pt({saveUrl:"",removeUrl:""},qY)],t.prototype,"asyncSettings",void 0),Pe([m(!1)],t.prototype,"sequentialUpload",void 0),Pe([m({})],t.prototype,"htmlAttributes",void 0),Pe([m("")],t.prototype,"cssClass",void 0),Pe([m(!0)],t.prototype,"enabled",void 0),Pe([m(null)],t.prototype,"template",void 0),Pe([m(!0)],t.prototype,"multiple",void 0),Pe([m(!0)],t.prototype,"autoUpload",void 0),Pe([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),Pe([pt({},XY)],t.prototype,"buttons",void 0),Pe([m("")],t.prototype,"allowedExtensions",void 0),Pe([m(0)],t.prototype,"minFileSize",void 0),Pe([m(3e7)],t.prototype,"maxFileSize",void 0),Pe([m(null)],t.prototype,"dropArea",void 0),Pe([mn([{}],WY)],t.prototype,"files",void 0),Pe([m(!0)],t.prototype,"showFileList",void 0),Pe([m(!1)],t.prototype,"directoryUpload",void 0),Pe([m("Default")],t.prototype,"dropEffect",void 0),Pe([E()],t.prototype,"created",void 0),Pe([E()],t.prototype,"actionComplete",void 0),Pe([E()],t.prototype,"rendering",void 0),Pe([E()],t.prototype,"beforeUpload",void 0),Pe([E()],t.prototype,"fileListRendering",void 0),Pe([E()],t.prototype,"selected",void 0),Pe([E()],t.prototype,"uploading",void 0),Pe([E()],t.prototype,"success",void 0),Pe([E()],t.prototype,"failure",void 0),Pe([E()],t.prototype,"removing",void 0),Pe([E()],t.prototype,"beforeRemove",void 0),Pe([E()],t.prototype,"clearing",void 0),Pe([E()],t.prototype,"progress",void 0),Pe([E()],t.prototype,"change",void 0),Pe([E()],t.prototype,"chunkSuccess",void 0),Pe([E()],t.prototype,"chunkFailure",void 0),Pe([E()],t.prototype,"chunkUploading",void 0),Pe([E()],t.prototype,"canceling",void 0),Pe([E()],t.prototype,"pausing",void 0),Pe([E()],t.prototype,"resuming",void 0),Pe([Be],t)}(Mt),QY=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Jt=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Lh="e-apply",$y="e-cancel",Gy="e-current",Nh="e-ctrl-btn",Ra="e-switch-ctrl-btn",yx="e-disabled",bx="e-value-switch-btn",Cx="e-handler",Zy="e-hide-hex-value",Ky="e-hide-opacity",Fa="e-hide-switchable-value",Eo="e-hide-value",Sx="e-hide-valueswitcher",kh="e-hsv-color",wx="e-hsv-container",Ha="e-selected-value",Np="e-mode-switch-btn",Jy="e-nocolor-item",eb="e-opacity-value",zh="e-palette",kp="e-color-palette",tb="e-color-picker",zp="e-preview-container",Rp="e-previous",Ba="e-show-value",Rh="e-selected",Fp="e-split-preview",Hp="e-tile",ZY_default=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],Bp=function(s){function t(e,i){return s.call(this,e,i)||this}return QY(t,s),t.prototype.preRender=function(){var e=this.element;this.formElement=F(this.element,"form"),this.formElement&&y.add(this.formElement,"reset",this.formResetHandler,this),this.l10n=new Hr("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)},t.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||D([this.container.parentElement],Ky),this.renderComplete()},t.prototype.initWrapper=function(){var e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),re(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var i=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(i="");var n=i.slice(0,7);p(this.initialInputValue)&&(this.initialInputValue=n),this.element.value=n,this.setProperties(this.enableOpacity?{value:i}:{value:n},!0),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&D([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.tileRipple=zi(this.container,{selector:"."+Hp}),this.ctrlBtnRipple=zi(this.container,{selector:".e-btn"})},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),O.isDevice&&this.refreshPopupPos()},t.prototype.createSplitBtn=function(){var e=this,i=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(i),this.splitBtn=new iY({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){e.trigger("change",{currentValue:{hex:e.value.slice(0,7),rgba:e.convertToRgbString(e.hexToRgb(e.value))},previousValue:{hex:null,rgba:null},value:e.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(i);var n=this.createElement("span",{className:Fp});T(".e-selected-color",i).appendChild(n),n.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var r=this.getPopupEle();if(D([r],"e-colorpicker-popup"),this.cssClass&&D([r],this.cssClass.replace(/\s+/g," ").trim().split(" ")),O.isDevice){var o=this.getPopupInst();o.relateTo=document.body,o.position={X:"center",Y:"center"},o.targetType="container",o.collision={X:"fit",Y:"fit"},o.offsetY=4,r.style.zIndex=Io(this.splitBtn.element).toString()}this.bindCallBackEvent()},t.prototype.onOpen=function(){this.trigger("open",{element:this.container})},t.prototype.getPopupInst=function(){return oi(this.getPopupEle(),Rs)},t.prototype.bindCallBackEvent=function(){var e=this;this.splitBtn.beforeOpen=function(i){var n=new Op;return e.trigger("beforeOpen",i,function(r){if(!r.cancel){var o=e.getPopupEle();o.style.top=te(0+pageYOffset),o.style.left=te(0+pageXOffset),o.style.display="block",e.createWidget(),o.style.display="",O.isDevice&&(e.modal=e.createElement("div"),e.modal.className="e-"+e.getModuleName()+" e-modal",e.modal.style.display="none",document.body.insertBefore(e.modal,o),document.body.className+=" e-colorpicker-overflow",e.modal.style.display="block",e.modal.style.zIndex=(Number(o.style.zIndex)-1).toString())}i.cancel=r.cancel,n.resolve(r)}),n},this.splitBtn.beforeClose=function(i){var n=new Op;return p(i.event)?n.resolve(i):e.trigger("beforeClose",{element:e.container,event:i.event,cancel:!1},function(o){O.isDevice&&i.event.target===e.modal&&(o.cancel=!0),o.cancel||e.onPopupClose(),i.cancel=o.cancel,n.resolve(o)}),n}},t.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",T("."+Fp,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",N([this.container],[tb,kp]),O.isDevice&&this.modal&&(N([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.createPalette=function(){if(ki(this.container,[kp],[tb]),this.presetColors){var e=this.createElement("div",{className:"e-custom-palette"});this.appendElement(e);var i=Object.keys(this.presetColors);if(1===i.length)this.appendPalette(this.presetColors[i[0]],i[0],e);else for(var n=0,r=i.length;n<r;n++)this.appendPalette(this.presetColors[i[n]],i[n],e);Z(".e-row",e).length>10&&D([e],"e-palette-group")}else this.appendPalette(ZY_default,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var o=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=te(this.container.children[0].offsetWidth+o+o),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},t.prototype.firstPaletteFocus=function(){T("."+Rh,this.container.children[0])||Z("."+zh,this.container)[0].focus()},t.prototype.appendPalette=function(e,i,n){var r=this.createElement("div",{className:zh,attrs:{tabindex:"0",role:"grid"}});n?n.appendChild(r):this.appendElement(r);for(var o,a,l,h=0,c=e.length;h<c;h++)(0===h||h%this.columns==0)&&(o=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),r.appendChild(o)),l=this.roundValue(e[h]).toLowerCase(),a=this.createElement("span",{className:Hp,attrs:{role:"gridcell","aria-label":l,"aria-selected":"false",tabindex:"0"}}),this.trigger("beforeTileRender",{element:a,presetName:i,value:e[h]}),o.appendChild(a),this.value===l&&(this.addTileSelection(a),r.focus()),a.style.backgroundColor=this.convertToRgbString(this.hexToRgb(l))},t.prototype.setNoColor=function(){var e=this.container.querySelector(".e-row").children[0];e.classList.add(Jy),this.value||(e.classList.add(Rh),F(e,"."+zh).focus()),["aria-selected","aria-label"].forEach(function(i){e.removeAttribute(i)}),e.style.backgroundColor=""},t.prototype.appendElement=function(e,i){void 0===i&&(i=0);var n=this.container.children[i];n?this.container.insertBefore(e,n):this.container.appendChild(e)},t.prototype.addTileSelection=function(e){e.classList.add(Rh),e.setAttribute("aria-selected","true")},t.prototype.createPicker=function(){ki(this.container,[tb],[kp]);var e=this.createElement("div",{className:wx});this.appendElement(e),e.appendChild(this.createElement("div",{className:kh}));var i=this.createElement("span",{className:Cx,attrs:{tabindex:"0"}});e.appendChild(i),(null===this.value||""===this.value)&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},t.prototype.setHsvContainerBg=function(e){void 0===e&&(e=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))},t.prototype.getHsvContainer=function(){return T("."+wx,this.container)},t.prototype.setHandlerPosition=function(){var e=this.getDragHandler(),i=T("."+kh,this.container);e.style.left=te(this.enableRtl?i.offsetWidth*Math.abs(100-this.hsv[1])/100:i.offsetWidth*this.hsv[1]/100),e.style.top=te(i.offsetHeight*(100-this.hsv[2])/100)},t.prototype.createSlider=function(){var e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);var i=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(i,e.children[0]);var n=this.createElement("div",{className:"e-hue-slider"});i.appendChild(n),this.hueSlider=new Yy({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(n),this.enableOpacity&&(n=this.createElement("div",{className:"e-opacity-slider"}),i.appendChild(n),this.createOpacitySlider(n))},t.prototype.createOpacitySlider=function(e){this.opacitySlider=new Yy({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);var i=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(i),this.updateOpacitySliderBg()},t.prototype.updateOpacitySliderBg=function(){var e=this.enableRtl?"to left":"to right",i=T(".e-opacity-empty-track",this.opacitySlider.element);i&&(i.style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},t.prototype.hueChange=function(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()},t.prototype.opacityChange=function(e){var i=e.value,n=this.rgbToHex(this.rgb);this.hsv[3]=i/100,this.rgb[3]=i/100;var r=this.rgbToHex(this.rgb);this.updateOpacityInput(i);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(r,n,o)},t.prototype.updateOpacityInput=function(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(Eo)){var i=oi(T("."+eb,this.container),Tp);i.value=e,i.dataBind()}},t.prototype.createPreview=function(e){var i=this.createElement("div",{className:zp});e.appendChild(i);var n=this.createElement("span",{className:"e-preview "+Gy});i.appendChild(n);var r=this.convertToRgbString(this.rgb);n.style.backgroundColor=r,n=this.createElement("span",{className:"e-preview "+Rp}),i.appendChild(n),n.style.backgroundColor=r},t.prototype.isPicker=function(){return!this.container.classList.contains(kp)},t.prototype.getPopupEle=function(){return this.container.parentElement},t.prototype.createNumericInput=function(e,i,n,r){var o=this,a=new Tp({value:i,placeholder:n,min:0,max:r,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(l){l.event&&o.inputHandler(l.event)}});a.createElement=this.createElement,a.appendTo(e)},t.prototype.createInput=function(){var e=this.isPicker(),i=this.getWrapper();if(e&&!i.classList.contains(Eo)||!e&&i.classList.contains(Ba)){var n=this.createElement("div",{className:Ha});this.appendElement(n,e?2:1);var r=this.createElement("div",{className:"e-input-container"});if(n.appendChild(r),i.classList.contains(Sx)||this.appendValueSwitchBtn(n),!i.classList.contains(Zy)){var o=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});r.appendChild(o),fe.createInput({element:o,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),fe.setValue(this.value.slice(0,7),o),o.addEventListener("input",this.inputHandler.bind(this))}if(!i.classList.contains(Fa)){var a=void 0,l=void 0;this.isRgb?(a="RGB",l=this.rgb):(a="HSV",l=this.hsv);for(var h=["rh","gs","bv"],c=0;c<3;c++)this.createNumericInput(r.appendChild(this.createElement("input",{className:"e-"+h[c]+"-value"})),l[c],a[c],255);this.enableOpacity&&this.appendOpacityValue(r)}}},t.prototype.appendOpacityValue=function(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:eb})),100*this.rgb[3],"A",100)},t.prototype.appendValueSwitchBtn=function(e){var i=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+bx,attrs:{title:"Toggle format"}});e.appendChild(i),this.isPicker()&&!this.getWrapper().classList.contains(Fa)&&i.addEventListener("click",this.formatSwitchHandler.bind(this))},t.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var e=this.createElement("div",{className:Ra});if(this.container.appendChild(e),this.showButtons){var i=this.createElement("div",{className:Nh});e.appendChild(i);var n=this.l10n.getConstant("Apply");i.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-primary e-small "+Lh,attrs:{title:n}}));var r=this.l10n.getConstant("Cancel");i.appendChild(this.createElement("button",{innerHTML:r,className:"e-btn e-css e-flat e-small "+$y,attrs:{title:r}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},t.prototype.appendModeSwitchBtn=function(){var e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+Np,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});T("."+Ra,this.container).insertBefore(e,T("."+Nh,this.container))},t.prototype.createDragTooltip=function(){var e=this,i=new dp({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:function(n){e.tooltipEle=n.element},animation:{open:{effect:"None"},close:{effect:"None"}}});i.createElement=this.createElement,i.appendTo(this.container),i.open(this.container),this.tooltipEle.style.zIndex=Io(this.tooltipEle).toString(),T(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},t.prototype.getTooltipInst=function(){return oi(this.container,dp)},t.prototype.setTooltipOffset=function(e){this.getTooltipInst().offsetY=e},t.prototype.toggleDisabled=function(e){e?this.getWrapper().classList.add(yx):this.getWrapper().classList.remove(yx),this.showButtons&&[].slice.call(Z(".e-btn",this.container)).forEach(function(i){e?re(i,{disabled:""}):i.removeAttribute("disabled")})},t.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},t.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},t.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},t.prototype.convertToOtherFormat=function(e){void 0===e&&(e=!1);var i=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var n=this.rgbToHex(this.rgb),r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.updateInput(n),this.triggerEvent(n,i,r,e)},t.prototype.updateInput=function(e){var i=this.getWrapper();i.classList.contains(Eo)||(i.classList.contains(Zy)||fe.setValue(e.substr(0,7),T(".e-hex",this.container)),i.classList.contains(Fa)||this.updateValue(this.isRgb?this.rgb:this.hsv,!1))},t.prototype.updatePreview=function(e){this.enableOpacity&&this.updateOpacitySliderBg(),T(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,T("."+zp+" ."+Gy,this.container).style.backgroundColor=e,T("."+zp+" ."+Rp,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},t.prototype.getDragHandler=function(){return T("."+Cx,this.container)},t.prototype.removeTileSelection=function(){[].slice.call(Z("."+Rh,this.container.children[0])).forEach(function(i){i.classList.remove(Rh),i.setAttribute("aria-selected","false")})},t.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(function(i,n){return 3!==n?parseInt(i,10):parseFloat(i)})},t.prototype.getValue=function(e,i){if(e||(e=this.value),i=i?i.toLowerCase():"hex","r"===e[0]){var n=this.convertRgbToNumberArray(e);if("hex"===i||"hexa"===i){var r=this.rgbToHex(n);return"hex"===i?r.slice(0,7):r}return"hsv"===i?this.convertToHsvString(this.rgbToHsv.apply(this,n.slice(0,3))):"hsva"===i?this.convertToHsvString(this.rgbToHsv.apply(this,n)):"null"}if("h"===e[0])return n=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e)),"rgba"===i?this.convertToRgbString(n):"hex"===i||"hexa"===i?(r=this.rgbToHex(n),"hex"===i?r.slice(0,7):r):"rgb"===i?this.convertToRgbString(n.slice(0,3)):"null";e=this.roundValue(e);var o=this.hexToRgb(e);return("rgb"===i||"hsv"===i)&&(o=o.slice(0,3)),"rgba"===i||"rgb"===i?this.convertToRgbString(o):"hsva"===i||"hsv"===i?this.convertToHsvString(this.rgbToHsv.apply(this,o)):"hex"===i?e.slice(0,7):"a"===i?o[3].toString():"null"},t.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},t.prototype.getModuleName=function(){return"colorpicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.wireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();y.add(e,"keydown",this.pickerKeyDown,this);var i=T("."+Nh,this.container);i&&y.add(i,"keydown",this.ctrlBtnKeyDown,this),y.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),y.add(T("."+Rp,this.container),"click",this.previewHandler,this)}else y.add(this.container,"click",this.paletteClickHandler,this),y.add(this.container,"keydown",this.paletteKeyDown,this)},t.prototype.formResetHandler=function(){this.value=this.initialInputValue,re(this.element,{value:this.initialInputValue})},t.prototype.addCtrlSwitchEvent=function(){var e=T("."+Ra,this.container);e&&y.add(e,"click",this.btnClickHandler,this)},t.prototype.ctrlBtnKeyDown=function(e){if(13===e.keyCode){if(T("."+Lh,this.container)){var n=this.rgbToHex(this.rgb);this.triggerChangeEvent(n)}this.splitBtn.element.focus()}},t.prototype.pickerKeyDown=function(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:e.preventDefault();var i=this.rgbToHex(this.rgb);this.enterKeyHandler(i,e)}},t.prototype.enterKeyHandler=function(e,i){this.triggerChangeEvent(e),this.inline||this.splitBtn.element.focus()},t.prototype.closePopup=function(e){var i=this;this.trigger("beforeClose",{element:this.container,event:e,cancel:!1},function(r){r.cancel||(i.splitBtn.toggle(),i.onPopupClose())})},t.prototype.triggerChangeEvent=function(e){var i=e.slice(0,7);this.trigger("change",{currentValue:{hex:i,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:i}),this.setProperties(this.enableOpacity?{value:e}:{value:i},!0),this.element.value=i||"#000000"},t.prototype.handlerDragPosition=function(e,i,n){n.preventDefault(),this.hsv[e]+=i*(n.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0)},t.prototype.handlerDown=function(e){e.preventDefault(),"mousedown"===e.type?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),y.add(document,"mousemove touchmove",this.handlerMove,this),y.add(document,"mouseup touchend",this.handlerEnd,this)},t.prototype.handlerMove=function(e){var i,n;"touchmove"!==e.type&&e.preventDefault(),"mousemove"===e.type?(i=Math.abs(e.pageX-pageXOffset),n=Math.abs(e.pageY-pageYOffset)):(i=Math.abs(e.changedTouches[0].pageX-pageXOffset),n=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(i,n);var r=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(r),this.tooltipEle.style.transform||(Math.abs(this.clientX-i)>8||Math.abs(this.clientY-n)>8)&&(T("."+kh,this.container).style.cursor="pointer",r.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",r.classList.add("e-hide-handler"))},t.prototype.setHsv=function(e,i){var n=T("."+kh,this.container),r=n.getBoundingClientRect();e=this.enableRtl?e>r.right?0:Math.abs(e-r.right):e>r.left?Math.abs(e-r.left):0,i=i>r.top?Math.abs(i-r.top):0,this.hsv[2]=Math.round(10*Number(100*(n.offsetHeight-Math.max(0,Math.min(n.offsetHeight,i-n.offsetTop)))/n.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(n.offsetWidth,e-n.offsetLeft))/n.offsetWidth))/10},t.prototype.handlerEnd=function(e){"touchend"!==e.type&&e.preventDefault(),y.remove(document,"mousemove touchmove",this.handlerMove),y.remove(document,"mouseup touchend",this.handlerEnd);var i=this.getDragHandler();T("."+kh,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",i.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(e)},t.prototype.btnClickHandler=function(e){var i=e.target;F(i,"."+Np)?(e.stopPropagation(),this.switchToPalette()):(i.classList.contains(Lh)||i.classList.contains($y))&&this.ctrlBtnClick(i,e)},t.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),X(T(".e-slider-preview",this.container)),this.getWrapper().classList.contains(Eo)||He(T("."+Ha,this.container)),X(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},t.prototype.refreshPopupPos=function(){if(!this.inline){var e=this.getPopupEle();e.style.left=te(0+pageXOffset),e.style.top=te(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},t.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},t.prototype.updateValue=function(e,i,n,r){for(var a,o=["e-rh-value","e-gs-value","e-bv-value"],l=0,h=o.length;l<h;l++)(a=oi(T("."+o[l],this.container),Tp)).value=Math.round(e[l]),i&&(a.placeholder=o[l].substr(n,1).toUpperCase(),a.max=r?r[l]:255),a.dataBind()},t.prototype.previewHandler=function(e){var i=e.target,n=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(i.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var r=this.rgbToHex(this.rgb),o=this.rgbToHsv.apply(this,this.rgb);o[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:o[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(o[0]),this.enableOpacity&&o[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*o[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=o,this.setHandlerPosition(),this.updateInput(r),T("."+zp+" ."+Gy,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(r,n,this.convertToRgbString(this.rgb))},t.prototype.paletteClickHandler=function(e){e.preventDefault();var i=e.target;if(i.classList.contains(Hp)){if(this.removeTileSelection(),this.addTileSelection(i),i.classList.contains(Jy))this.noColorTile();else{var n=i.getAttribute("aria-label"),r=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(n)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Ba)&&this.updateInput(n),this.triggerEvent(n,r,this.convertToRgbString(this.rgb))}!this.inline&&!this.showButtons&&this.closePopup(e)}else F(i,"."+Np)?this.switchToPicker():i.classList.contains(Lh)||i.classList.contains($y)?this.ctrlBtnClick(i,e):this.getWrapper().classList.contains(Ba)&&F(i,"."+bx)&&this.formatSwitchHandler()},t.prototype.noColorTile=function(e){void 0===e&&(e=!1);var i=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",i,"",e)},t.prototype.switchToPicker=function(){var e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(Z("."+zh,this.container)).forEach(function(n){X(n)}),e.classList.contains(Ba)&&X(T("."+Ha,this.container)),this.container.style.width="";var i=T(".e-custom-palette",this.container);this.presetColors&&He(i),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},t.prototype.ctrlBtnClick=function(e,i){if(e.classList.contains(Lh)){var n=this.rgbToHex(this.rgb);this.triggerChangeEvent(n)}this.inline||(this.closePopup(i),this.splitBtn.element.focus())},t.prototype.paletteKeyDown=function(e){var i=e.target;if(i.classList.contains(zh)){var n,r,o=[].slice.call(Z("."+Hp,i)),a=o.filter(function(h){return h.classList.contains("e-selected")}).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),n=a?o[this.tilePosition(o,a,this.enableRtl?-1:1)]:o[this.enableRtl?o.length-1:0],this.keySelectionChanges(n);break;case 37:e.preventDefault(),n=a?o[this.tilePosition(o,a,this.enableRtl?1:-1)]:o[this.enableRtl?0:o.length-1],this.keySelectionChanges(n);break;case 38:e.preventDefault(),r=a?this.tilePosition(o,a,-this.columns):0,this.keySelectionChanges(n=o[r]?o[r]:o[r-this.columns]);break;case 40:e.preventDefault(),o[r=a?this.tilePosition(o,a,this.columns):o.length-1]||(r%=o.length,r+=o[o.length-1].parentElement.childElementCount),this.keySelectionChanges(n=o[r]);break;case 13:if(e.preventDefault(),a){var l=a.getAttribute("aria-label");this.enterKeyHandler(l||"",e)}}}},t.prototype.keySelectionChanges=function(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(Jy))this.noColorTile(!0);else{var i=e.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(i),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Ba)&&this.updateInput(i),this.triggerEvent(i,n,this.convertToRgbString(this.rgb),!0)}},t.prototype.tilePosition=function(e,i,n){var r=(e=Array.prototype.slice.call(e)).length,o=this.columns-e[r-1].parentElement.childElementCount,a=e.indexOf(i);return(a+=n)<0?a+=r+o:a%=r+o,a},t.prototype.inputHandler=function(e){var n,r,i=e.target;if(i.value.length)switch(T(".e-float-text",i.parentElement).textContent){case"HEX":var a="";if(("#"===i.value[0]&&5!==i.value.length||"#"!==i.value[0]&&4!==i.value.length)&&(a=this.roundValue(i.value)),9!==a.length)return;r=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(a+a.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),r,i.value);break;case"R":this.rgb[0]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[0]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r));break;case"G":this.rgb[1]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[1]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r));break;case"B":this.rgb[2]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[2]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r));break;case"H":this.hueSlider.value=Number(i.value);break;case"S":this.hsv[1]!==Number(i.value)&&(this.hsv[1]=Number(i.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(i.value)&&(this.hsv[2]=Number(i.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(i.value)}},t.prototype.inputValueChange=function(e,i,n){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;var r=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(n||r);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(r,i,o)},t.prototype.triggerEvent=function(e,i,n,r){void 0===r&&(r=!1);var o=e.slice(0,7);this.showButtons||r?this.trigger("select",{currentValue:{hex:o,rgba:n},previousValue:{hex:i.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(i))}}):(this.trigger("change",{currentValue:{hex:o,rgba:n},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.setProperties(this.enableOpacity?{value:e}:{value:o},!0),this.element.value=o||"#000000")},t.prototype.destroy=function(){var e=this,i=this.getWrapper();s.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(n){e.element.removeAttribute(n)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&X(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),X(i)),this.container=null,this.formElement&&y.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.destroyOtherComp=function(){if(this.isPicker()){for(var i=F(this.hueSlider.element,".e-color-picker").querySelectorAll(".e-numerictextbox"),n=0;n<i.length;n++)oi(i[n],Tp).destroy();this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var r=this.getTooltipInst();r.close(),r.destroy(),this.tooltipEle=null}},t.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},t.prototype.unWireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();y.remove(e,"keydown",this.pickerKeyDown);var i=T("."+Nh,this.container);i&&y.remove(i,"keydown",this.ctrlBtnKeyDown),y.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&y.remove(T("."+Ra,this.container),"click",this.btnClickHandler),y.remove(T("."+Rp,this.container),"click",this.previewHandler)}else y.remove(this.container,"click",this.paletteClickHandler),y.remove(this.container,"keydown",this.paletteKeyDown)},t.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var i=e.length;if(4===i&&(e+="f",i=5),5===i){for(var n="",r=1,o=e.length;r<o;r++)n+=e.charAt(r)+e.charAt(r);e="#"+n,i=9}return 7===i&&(e+="ff"),e},t.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var i=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var n=parseInt(e,16),r=[];return r.push(n>>16&255),r.push(n>>8&255),r.push(255&n),r.push(i),r},t.prototype.rgbToHsv=function(e,i,n,r){if(this.rgb&&!this.rgb.length)return[];e/=255,i/=255,n/=255;var l,o=Math.max(e,i,n),a=Math.min(e,i,n),h=o,c=o-a,u=0===o?0:c/o;if(o===a)l=0;else{switch(o){case e:l=(i-n)/c+(i<n?6:0);break;case i:l=(n-e)/c+2;break;case n:l=(e-i)/c+4}l/=6}var d=[Math.round(360*l),Math.round(1e3*u)/10,Math.round(1e3*h)/10];return p(r)||d.push(r),d},t.prototype.hsvToRgb=function(e,i,n,r){var o,a,l;if(n/=100,0==(i/=100))return o=a=l=n,[Math.round(255*o),Math.round(255*a),Math.round(255*l),r];e/=60;var h=Math.floor(e),c=e-h,u=n*(1-i),d=n*(1-i*c),f=n*(1-i*(1-c));switch(h){case 0:o=n,a=f,l=u;break;case 1:o=d,a=n,l=u;break;case 2:o=u,a=n,l=f;break;case 3:o=u,a=d,l=n;break;case 4:o=f,a=u,l=n;break;default:o=n,a=u,l=d}var v=[Math.round(255*o),Math.round(255*a),Math.round(255*l)];return p(r)||v.push(r),v},t.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(p(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},t.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype.changeModeSwitcherProp=function(e){var i=T("."+Ra,this.container);e?i?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):i&&(this.showButtons?X(T("."+Np,i)):He(i))},t.prototype.changeShowBtnProps=function(e){var i=T("."+Ra,this.container);e?(i&&He(i),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?X(T("."+Nh,i)):He(i)},t.prototype.changeValueProp=function(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),X(F(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var i=this.container.querySelector('span[aria-label="'+this.roundValue(e)+'"]');i&&this.addTileSelection(i)}},t.prototype.setInputEleProps=function(){He(T("."+Ha,this.container)),this.createInput()},t.prototype.changeDisabledProp=function(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps()),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},t.prototype.changeCssClassProps=function(e,i){var n=this.getWrapper(),r=this.getPopupEle();i&&N([n,r],i.split(" ")),e&&D([n,r],e.replace(/\s+/g," ").trim().split(" "))},t.prototype.changeRtlProps=function(e){e?D([this.getWrapper()],"e-rtl"):N([this.getWrapper()],"e-rtl")},t.prototype.changePaletteProps=function(){X(this.container.children[0]),this.container.style.width="",this.createPalette()},t.prototype.changeOpacityProps=function(e){var i=this.getWrapper();e?(N([this.container.parentElement],Ky),this.createOpacitySlider(T(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!i.classList.contains(Eo)&&!i.classList.contains(Fa)&&this.appendOpacityValue(T(".e-input-container",this.container))):(D([this.container.parentElement],Ky),this.opacitySlider.destroy(),He(this.opacitySlider.element),this.opacitySlider=null,!i.classList.contains(Eo)&&!i.classList.contains(Fa)&&He(T("."+eb,this.container).parentElement))},t.prototype.onPropertyChanged=function(e,i){var n=this;if(!p(e.value)){var r=this.roundValue(e.value);if(9===r.length)this.element.value=this.roundValue(r).slice(0,7),(o=this.splitBtn&&T("."+Fp,this.splitBtn.element))&&(o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)));else if(this.noColor&&"Palette"===this.mode&&""===this.value){var o;(o=this.splitBtn&&T("."+Fp,this.splitBtn.element)).style.backgroundColor=""}else this.value=i.value}if(!this.inline&&p(e.inline)&&(this.splitBtn.setProperties(Th(e,["disabled","enableRtl"])),!this.isPopupOpen()))return this.changeCssClassProps(e.cssClass,i.cssClass),void this.changeRtlProps(e.enableRtl);for(var l=function(f){switch(f){case"inline":e.inline?(h.getWrapper().appendChild(h.container),h.splitBtn.destroy(),X(h.element.nextElementSibling),h.container.children.length||h.createWidget()):(h.destroyOtherComp(),h.unWireEvents(),h.container.innerHTML="",h.createSplitBtn());break;case"cssClass":h.changeCssClassProps(e.cssClass,i.cssClass);var v=e.cssClass.split(" ").concat(i.cssClass.split(" "));v=v.reduce(function(b,M){return b.indexOf(M)<0&&b.push(M),b},[]);var g=0;v.forEach(function(b){0!==g||b!==Eo&&b!==Sx&&b!==Ba&&b!==Zy&&b!==Fa||(T("."+Ha,n.container)&&He(T("."+Ha,n.container)),n.createInput(),g++)});break;case"enableRtl":h.isPicker()&&(h.hueSlider.enableRtl=e.enableRtl,h.enableOpacity&&(h.opacitySlider.enableRtl=e.enableRtl),h.setInputEleProps()),h.changeRtlProps(e.enableRtl);break;case"disabled":h.changeDisabledProp(e.disabled);break;case"value":h.value!==i.value&&h.changeValueProp(e.value);break;case"showButtons":h.changeShowBtnProps(e.showButtons);break;case"mode":"Picker"===e.mode?h.switchToPicker():h.switchToPalette();break;case"modeSwitcher":h.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":h.isPicker()||h.changePaletteProps();break;case"noColor":e.noColor?"Palette"===h.mode&&!h.modeSwitcher&&h.setNoColor():h.changePaletteProps();break;case"enableOpacity":h.changeOpacityProps(e.enableOpacity)}},h=this,c=0,u=Object.keys(e);c<u.length;c++)l(u[c])},t.prototype.focusIn=function(){this.element.parentElement.focus()},Jt([m("#008000ff")],t.prototype,"value",void 0),Jt([m("")],t.prototype,"cssClass",void 0),Jt([m(!1)],t.prototype,"disabled",void 0),Jt([m("Picker")],t.prototype,"mode",void 0),Jt([m(!0)],t.prototype,"modeSwitcher",void 0),Jt([m(null)],t.prototype,"presetColors",void 0),Jt([m(!0)],t.prototype,"showButtons",void 0),Jt([m(10)],t.prototype,"columns",void 0),Jt([m(!1)],t.prototype,"inline",void 0),Jt([m(!1)],t.prototype,"noColor",void 0),Jt([m(!1)],t.prototype,"enablePersistence",void 0),Jt([m(!0)],t.prototype,"enableOpacity",void 0),Jt([m(!1)],t.prototype,"createPopupOnClick",void 0),Jt([E()],t.prototype,"select",void 0),Jt([E()],t.prototype,"change",void 0),Jt([E()],t.prototype,"beforeTileRender",void 0),Jt([E()],t.prototype,"beforeOpen",void 0),Jt([E()],t.prototype,"open",void 0),Jt([E()],t.prototype,"beforeClose",void 0),Jt([E()],t.prototype,"beforeModeSwitch",void 0),Jt([E()],t.prototype,"onModeSwitch",void 0),Jt([E()],t.prototype,"created",void 0),Jt([Be],t)}(Mt),lU=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Nx=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},qs="e-rtl",Qs="e-overlay",Fh="e-nav-arrow",Hh="e-nav-right-arrow",Vp="e-nav-left-arrow",xo="e-scroll-nav",rb="e-scroll-right-nav",kx="e-scroll-left-nav",zx="e-scroll-device",Wp="e-scroll-overlay",sb="e-scroll-right-overlay",ob="e-scroll-left-overlay",Xp=function(s){function t(e,i){return s.call(this,e,i)||this}return lU(t,s),t.prototype.preRender=function(){this.browser=O.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=O.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=at("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(qs)},t.prototype.render=function(){this.touchModule=new Gi(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),y.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(zx),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){p(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),i=this.createElement("div",{className:"e-hscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)e.appendChild(a[o]);i.appendChild(e),n.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove(zx),e.classList.remove(qs);var i=Z(".e-"+e.id+"_nav."+xo,e),n=Z("."+Wp,e);[].slice.call(n).forEach(function(l){X(l)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++)e.appendChild(o[r]);this.uniqueId&&this.element.removeAttribute("id"),X(this.scrollEle),i.length>0&&(X(i[0]),p(i[1])||X(i[1])),y.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,s.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Z(".e-scroll-nav:not(."+Qs+")",this.element);e?this.element.classList.add(Qs):this.element.classList.remove(Qs),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var i=e.id.concat("_nav"),n=this.createElement("div",{className:Wp+" "+sb}),r="e-"+e.id.concat("_nav "+xo+" "+rb),o=this.createElement("div",{id:i.concat("_right"),className:r}),a=this.createElement("div",{className:Hh+" "+Fh+" e-icons"});o.appendChild(a);var l=this.createElement("div",{className:Wp+" "+ob});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(l,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+xo+" "+rb),r={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:n,attrs:r});o.setAttribute("aria-disabled","false");var a=this.createElement("div",{className:Hh+" "+Fh+" e-icons"}),l="e-"+e.id.concat("_nav "+xo+" "+kx),h={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},c=this.createElement("div",{className:l+" "+Qs,attrs:h});c.setAttribute("aria-disabled","true");var u=this.createElement("div",{className:Vp+" "+Fh+" e-icons"});c.appendChild(u),o.appendChild(a),e.appendChild(o),e.insertBefore(c,e.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),c.classList.add("e-ie-align")),this.eventBinding([o,c])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(n){new Gi(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(r){r.preventDefault()}),y.add(n,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,n=e.originalEvent.target;n=this.contains(n,xo)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,n){var r=this.element,o=i.classList;o.contains(xo)&&(o=i.querySelector("."+Fh).classList),this.contains(r,qs)&&this.browserCheck&&(e=-e),!this.contains(r,qs)||this.browserCheck||this.ieCheck?o.contains(Hh)?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n):o.contains(Vp)?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var n,i=this.scrollEle;n=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var r=.5,o=function(){var a=Math.sin(r);a<=0?window.cancelAnimationFrame(a):("Left"===e.swipeDirection?i.scrollLeft+=n*a:"Right"===e.swipeDirection&&(i.scrollLeft-=n*a),r-=.5,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},t.prototype.frameScrollRequest=function(e,i,n){var r=this;if(n)this.scrollUpdating(e,i);else{this.customStep||[].slice.call(Z("."+Wp,this.element)).forEach(function(l){e-=l.offsetWidth});var a=function(){var l,h;r.contains(r.element,qs)&&r.browserCheck?(l=-e,h=-10):(l=e,h=10),l<10?window.cancelAnimationFrame(h):(r.scrollUpdating(h,i),e-=h,window.requestAnimationFrame(a))};a()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,n=e.distanceX;this.ieCheck&&this.contains(this.element,qs)&&(n=-n),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+n:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-n)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var r=(p(e)?i:e).querySelector("."+Fh);p(e)?ki(r,[Hh],[Vp]):ki(r,[Vp],[Hh])}else e&&i&&(e.classList.add(Qs),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(Qs),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var i=e.target,n=i.offsetWidth,o=this.element.querySelector("."+kx),a=this.element.querySelector("."+rb),l=this.element.querySelector("."+ob),h=this.element.querySelector("."+sb),c=i.scrollLeft;if(c<=0&&(c=-c),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(l=this.element.querySelector("."+sb),h=this.element.querySelector("."+ob)),l.style.width=c<40?c+"px":"40px",h.style.width=i.scrollWidth-Math.ceil(n+c)<40?i.scrollWidth-Math.ceil(n+c)+"px":"40px"),0===c)this.arrowDisabling(o,a);else if(Math.ceil(n+c+.1)>=i.scrollWidth)this.arrowDisabling(a,o);else{var u=this.element.querySelector("."+xo+"."+Qs);u&&(u.classList.remove(Qs),u.setAttribute("aria-disabled","false"),u.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(qs):this.element.classList.remove(qs)}},Nx([m(null)],t.prototype,"scrollStep",void 0),Nx([Be],t)}(Mt),pU=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fx=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},qp="e-rtl",$s="e-overlay",Bh="e-nav-arrow",Qp="e-nav-up-arrow",_h="e-nav-down-arrow",Po="e-scroll-nav",Hx="e-scroll-up-nav",ab="e-scroll-down-nav",Bx="e-scroll-device",$p="e-scroll-overlay",_x="e-scroll-up-overlay",Yx="e-scroll-down-overlay",_a=function(s){function t(e,i){return s.call(this,e,i)||this}return pU(t,s),t.prototype.preRender=function(){this.browser=O.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=O.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=at("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(qp)},t.prototype.render=function(){this.touchModule=new Gi(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),y.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(Bx),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),y.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){p(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=lt("div",{className:"e-vscroll-content"}),i=lt("div",{className:"e-vscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)e.appendChild(a[o]);i.appendChild(e),n.appendChild(i),i.style.overflow="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",N([this.element],["e-vscroll",Bx,qp]);var i=Z(".e-"+e.id+"_nav."+Po,e),n=Z("."+$p,e);[].slice.call(n).forEach(function(l){X(l)});for(var r=0,o=[].slice.call(this.scrollItems.children);r<o.length;r++)e.appendChild(o[r]);this.uniqueId&&this.element.removeAttribute("id"),X(this.scrollEle),i.length>0&&(X(i[0]),p(i[1])||X(i[1])),y.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,s.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Z(".e-scroll-nav:not(."+$s+")",this.element);e?this.element.classList.add($s):this.element.classList.remove($s),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var i=e.id.concat("_nav"),n=lt("div",{className:$p+" "+Yx}),r="e-"+e.id.concat("_nav "+Po+" "+ab),o=lt("div",{id:i.concat("down"),className:r}),a=lt("div",{className:_h+" "+Bh+" e-icons"});o.appendChild(a);var l=lt("div",{className:$p+" "+_x});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(l,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+Po+" "+ab),r=lt("div",{id:i.concat("_down"),className:n});r.setAttribute("aria-disabled","false");var o=lt("div",{className:_h+" "+Bh+" e-icons"}),a="e-"+e.id.concat("_nav "+Po+" "+Hx),l=lt("div",{id:i.concat("_up"),className:a+" "+$s});l.setAttribute("aria-disabled","true");var h=lt("div",{className:Qp+" "+Bh+" e-icons"});l.appendChild(h),r.appendChild(o),r.setAttribute("tabindex","0"),e.appendChild(r),e.insertBefore(l,e.firstChild),this.ieCheck&&(r.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([r,l])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(n){new Gi(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(r){r.preventDefault()}),y.add(n,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,n=e.originalEvent.target;n=this.contains(n,Po)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,n){var r=i.classList;r.contains(Po)&&(r=i.querySelector("."+Bh).classList),r.contains(_h)?this.frameScrollRequest(e,"add",n):r.contains(Qp)&&this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var n,i=this.scrollEle;n=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var r=.5,o=function(){var a=Math.sin(r);a<=0?window.cancelAnimationFrame(a):("Up"===e.swipeDirection?i.scrollTop+=n*a:"Down"===e.swipeDirection&&(i.scrollTop-=n*a),r-=.02,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,i,n){var r=this;if(n)this.scrollUpdating(e,i);else{this.customStep||[].slice.call(Z("."+$p,this.element)).forEach(function(l){e-=l.offsetHeight});var a=function(){e<10?window.cancelAnimationFrame(10):(r.scrollUpdating(10,i),e-=10,window.requestAnimationFrame(a))};a()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,n=e.distanceY;"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+n:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-n)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var r=(p(e)?i:e).querySelector("."+Bh);p(e)?ki(r,[_h],[Qp]):ki(r,[Qp],[_h])}else e.classList.add($s),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove($s),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var i=e.target,n=i.offsetHeight,r=this.element.querySelector("."+Hx),o=this.element.querySelector("."+ab),a=this.element.querySelector("."+_x),l=this.element.querySelector("."+Yx),h=i.scrollTop;if(h<=0&&(h=-h),this.isDevice&&(a.style.height=h<40?h+"px":"40px",l.style.height=i.scrollHeight-Math.ceil(n+h)<40?i.scrollHeight-Math.ceil(n+h)+"px":"40px"),0===h)this.arrowDisabling(r,o);else if(Math.ceil(n+h+.1)>=i.scrollHeight)this.arrowDisabling(o,r);else{var c=this.element.querySelector("."+Po+"."+$s);c&&(c.classList.remove($s),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(qp):this.element.classList.remove(qp)}},Fx([m(null)],t.prototype,"scrollStep",void 0),Fx([Be],t)}(Mt),Gx=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),yt=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},cb="e-vertical",Lt="e-toolbar-items",Xt="e-toolbar-item",qr="e-rtl",qt="e-separator",rd="e-popup-up-icon",Yh="e-popup-down-icon",Zx="e-popup-open",Kx="e-template",hn="e-overlay",Jx="e-toolbar-text",ub="e-popup-text",Sr="e-overflow-show",sd="e-overflow-hide",Mn="e-hor-nav",eP="e-scroll-nav",tP="e-toolbar-center",wr="e-tbar-pos",iP="e-hscroll-bar",Uh="e-toolbar-pop",Gs="e-toolbar-popup",Vh="e-nav-active",Wh="e-ignore",pb="e-popup-alone",bs="e-hidden",nP="e-toolbar-multirow",rP="e-multirow-pos",db="e-multirow-separator",fb="e-extended-separator",sP="e-extended-toolbar",od="e-toolbar-extended",vb="e-tbar-extended",TU=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Gx(t,s),yt([m("")],t.prototype,"id",void 0),yt([m("")],t.prototype,"text",void 0),yt([m("auto")],t.prototype,"width",void 0),yt([m("")],t.prototype,"cssClass",void 0),yt([m(!1)],t.prototype,"showAlwaysInPopup",void 0),yt([m(!1)],t.prototype,"disabled",void 0),yt([m("")],t.prototype,"prefixIcon",void 0),yt([m("")],t.prototype,"suffixIcon",void 0),yt([m(!0)],t.prototype,"visible",void 0),yt([m("None")],t.prototype,"overflow",void 0),yt([m("")],t.prototype,"template",void 0),yt([m("Button")],t.prototype,"type",void 0),yt([m("Both")],t.prototype,"showTextOn",void 0),yt([m(null)],t.prototype,"htmlAttributes",void 0),yt([m("")],t.prototype,"tooltipText",void 0),yt([m("Left")],t.prototype,"align",void 0),yt([E()],t.prototype,"click",void 0),yt([m(-1)],t.prototype,"tabIndex",void 0),t}(Ze),Zn=function(s){function t(e,i){var n=s.call(this,e,i)||this;return n.resizeContext=n.resize.bind(n),n.orientationChangeContext=n.orientationChange.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return Gx(t,s),t.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(n){!p(n)&&!p(n.ej2_instances)&&!p(n.ej2_instances[0])&&!n.ej2_instances[0].isDestroyed&&n.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(n){p(e.element.querySelector(n))||(document.body.appendChild(e.element.querySelector(n)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),X(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&N([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach(function(n){return e.element.removeAttribute(n)}),s.prototype.destroy.call(this)},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(cb),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,qr)},t.prototype.wireEvents=function(){y.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),window.addEventListener("orientationchange",this.orientationChangeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new yn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),y.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},t.prototype.updateTabIndex=function(e){var i=this.element.querySelector("."+Xt+":not(."+hn+" ):not(."+qt+" ):not(."+bs+" )");if(!p(i)&&!p(i.firstElementChild)){var n=i.firstElementChild.getAttribute("data-tabindex");n&&"-1"===n&&"INPUT"!==i.firstElementChild.tagName&&i.firstElementChild.setAttribute("tabindex",e)}},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(y.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var i=!p(this.popObj)&&Rt(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&i&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){y.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),window.removeEventListener("orientationchange",this.orientationChangeContext),y.remove(document,"scroll",this.docEvent),y.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var i=F(e.target,".e-popup");this.popObj&&Rt(this.popObj.element)&&!i&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,wr),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+Xt)).forEach(function(i){X(i)}),this.tbarAlign){var e=this.element.querySelector("."+Lt);[].slice.call(e.children).forEach(function(i){X(i)}),this.tbarAlign=!1,this.remove(e,wr)}this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,qr),this.destroyScroll()),this.remove(this.element,vb),this.remove(this.element,sP);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,nP),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,i){e.classList.add(i)},t.prototype.remove=function(e,i){e.classList.remove(i)},t.prototype.elementFocus=function(e){var i=e.firstElementChild;i?(i.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,i){return e&&this.popObj&&Rt(this.popObj.element)?this.popObj.element.querySelector("."+Xt):this.element===i||e?this.element.querySelector("."+Xt+":not(."+hn+" ):not(."+qt+" ):not(."+bs+" )"):F(i,"."+Xt)},t.prototype.keyHandling=function(e,i,n,r,o){var u,d,a=this.popObj,l=this.element,h={name:"FadeOut",duration:100},c="moveUp"===i.action?"previous":"next";switch(i.action){case"moveRight":if(this.isVertical)return;l===n?this.elementFocus(e):r||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;r||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var f=F(e,".e-popup"),v=this.element.querySelector("."+od);"Extended"===this.overflowMode&&v&&v.classList.contains("e-popup-open")&&(f="end"===i.action?v:null),f?Rt(this.popObj.element)&&(d=[].slice.call(f.children),u="home"===i.action?this.focusFirstVisibleEle(d):this.focusLastVisibleEle(d)):(d=this.element.querySelectorAll("."+Lt+" ."+Xt+":not(."+qt+")"),u="home"===i.action?this.focusFirstVisibleEle(d):this.focusLastVisibleEle(d)),u&&this.elementFocus(u)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===i.action?"previous":"next");else if(a&&F(n,".e-popup")){var g=a.element,b=g.firstElementChild;"previous"===c&&b===e?g.lastElementChild.firstChild.focus():"next"===c&&g.lastElementChild===e?b.firstChild.focus():this.eleFocus(e,c)}else"moveDown"===i.action&&a&&Rt(a.element)&&this.elementFocus(e);break;case"tab":if(!o&&!r){var M=e.firstElementChild;l===n&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(M),M.focus()))}break;case"popupClose":a&&"Extended"!==this.overflowMode&&a.hide(h);break;case"popupOpen":if(!r)return;a&&!Rt(a.element)?(a.element.style.top=l.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(h)}},t.prototype.keyActionHandler=function(e){var i=e.target;if("INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!this.element.classList.contains(hn)){e.preventDefault();var n=i.classList.contains(Mn),r=i.classList.contains(eP),o=this.clstElement(n,i);(o||r)&&this.keyHandling(o,e,i,n,r)}},t.prototype.disable=function(e){var i=this.element;e?i.classList.add(hn):i.classList.remove(hn),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(Rt(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),i.querySelector("#"+i.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains(qt)||e.classList.contains(hn)||e.getAttribute("disabled")||e.classList.contains(bs)||!Rt(e)||!e.classList.contains(Xt)},t.prototype.focusFirstVisibleEle=function(e){for(var n=0;n<e.length;){var r=e[parseInt(n.toString(),10)];if(!r.classList.contains(bs)&&!r.classList.contains(hn))return r;n++}},t.prototype.focusLastVisibleEle=function(e){for(var n=e.length-1;n>=0;){var r=e[parseInt(n.toString(),10)];if(!r.classList.contains(bs)&&!r.classList.contains(hn))return r;n--}},t.prototype.eleFocus=function(e,i){var n=Object(e)[i+"ElementSibling"];if(n){if(this.eleContains(n))return void this.eleFocus(n,i);this.elementFocus(n)}else if(this.tbarAlign){var o=Object(e.parentElement)[i+"ElementSibling"];if(!p(o)&&0===o.children.length&&(o=Object(o)[i+"ElementSibling"]),!p(o)&&o.children.length>0)if("next"===i){var a=o.querySelector("."+Xt);this.eleContains(a)?this.eleFocus(a,i):(a.firstElementChild.focus(),this.activeEleSwitch(a))}else this.eleContains(a=o.lastElementChild)?this.eleFocus(a,i):this.elementFocus(a)}else if(!p(e)){var l=this.element.querySelectorAll("."+Lt+" ."+Xt+":not(."+qt+"):not(."+hn+"):not(."+bs+")");"next"===i&&l?this.elementFocus(l[0]):"previous"===i&&l&&this.elementFocus(l[l.length-1])}},t.prototype.clickHandler=function(e){var i=this,n=e.target,r=this.element,o=!p(F(n,"."+Uh)),a=n.classList,l=F(n,"."+Mn);l||(l=n),!r.children[0].classList.contains("e-hscroll")&&!r.children[0].classList.contains("e-vscroll")&&a.contains(Mn)&&(a=n.querySelector(".e-icons").classList),(a.contains(rd)||a.contains(Yh))&&this.popupClickHandler(r,l,qr);var h,c=F(e.target,"."+Xt);if(!p(c)&&!c.classList.contains(hn)||l.classList.contains(Mn)){c&&(h=this.items[this.tbarEle.indexOf(c)]);var d={originalEvent:e,item:h};h&&!p(h.click)&&this.trigger("items["+this.tbarEle.indexOf(c)+"].click",d),d.cancel||this.trigger("clicked",d,function(f){!p(i.popObj)&&o&&!f.cancel&&"Popup"===i.overflowMode&&f.item&&"Input"!==f.item.type&&i.popObj.hide({name:"FadeOut",duration:100})})}},t.prototype.popupClickHandler=function(e,i,n){var r=this.popObj;Rt(r.element)?(i.classList.remove(Vh),r.hide({name:"FadeOut",duration:100})):(e.classList.contains(n)&&(r.enableRtl=!0,r.position={X:"left",Y:"top"}),0===r.offsetX&&!e.classList.contains(n)&&(r.enableRtl=!1,r.position={X:"right",Y:"top"}),r.dataBind(),r.refreshPosition(),r.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(r.element.style.minHeight="0px"),i.classList.add(Vh),r.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=te(this.width),i=te(this.height);("msie"!==O.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&ie(this.element,{height:i}),ie(this.element,{width:e}),re(this.element,{role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&D([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,i){var n,r;this.tbarEle||(this.tbarEle=[]);for(var o=0;o<e.length;o++)n=this.renderSubComponent(e[parseInt(o.toString(),10)],o),-1===this.tbarEle.indexOf(n)&&this.tbarEle.push(n),this.tbarAlign||this.tbarItemAlign(e[parseInt(o.toString(),10)],i,o),(r=i.querySelector(".e-toolbar-"+e[parseInt(o.toString(),10)].align.toLowerCase()))?(e[parseInt(o.toString(),10)].showAlwaysInPopup&&"Show"!==e[parseInt(o.toString(),10)].overflow||this.tbarAlgEle[(e[parseInt(o.toString(),10)].align+"s").toLowerCase()].push(n),r.appendChild(n)):i.appendChild(n);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(cb),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(cb),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),ie(this.element,{height:te(this.height),width:te(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,i){!this.scrollModule&&this.checkOverflow(e,i[0])&&(this.tbarAlign&&this.element.querySelector("."+Lt+" ."+tP).removeAttribute("style"),this.scrollModule=this.isVertical?new _a({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]):new Xp({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]),this.cssClass&&D([i[0]],this.cssClass.split(" ")),this.remove(this.scrollModule.element,wr),ie(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var r,i=this,n=0;return[].slice.call(Z("."+Xt,e)).forEach(function(o){Rt(o)&&(r=window.getComputedStyle(o),n+=i.isVertical?o.offsetHeight:o.offsetWidth,n+=parseFloat(i.isVertical?r.marginTop:r.marginRight),n+=parseFloat(i.isVertical?r.marginBottom:r.marginLeft))}),n},t.prototype.getScrollCntEle=function(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")},t.prototype.checkOverflow=function(e,i){if(p(e)||p(i)||!Rt(e))return!1;var n=this.isVertical?e.offsetHeight:e.offsetWidth,r=this.isVertical?i.offsetHeight:i.offsetWidth;(this.tbarAlign||this.scrollModule||n===r)&&(r=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(i):i));var o=e.querySelector("."+Mn),a=e.querySelector("."+eP),l=0;return o?l=this.isVertical?o.offsetHeight:o.offsetWidth:a&&(l=this.isVertical?2*a.offsetHeight:2*a.offsetWidth),r>n-l},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,wr),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,i=e.querySelector("."+Lt),n=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===O.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":p(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(Lt)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,i)||n)&&this.setOverflowAttributes(e),this.toolbarAlign(i);break;case"MultiRow":this.add(i,nP),this.checkOverflow(e,i)&&this.tbarAlign&&(this.removePositioning(),this.add(i,rP)),"hidden"===e.style.overflow&&(e.style.overflow=""),("msie"===O.info.name||"auto"!==e.style.height)&&(e.style.height="auto");break;case"Extended":this.add(this.element,sP),(this.checkOverflow(e,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(i)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(Z("."+Lt+" ."+Xt,e))),re(this.element.querySelector("."+Mn),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},t.prototype.separator=function(){var e=this.element,i=[].slice.call(e.querySelectorAll("."+qt)),n=e.querySelector("."+db),r=e.querySelector("."+fb),o="MultiRow"===this.overflowMode?n:r;null!==o&&("MultiRow"===this.overflowMode?o.classList.remove(db):"Extended"===this.overflowMode&&o.classList.remove(fb));for(var a=0;a<=i.length-1;a++)i[parseInt(a.toString(),10)].offsetLeft<30&&0!==i[parseInt(a.toString(),10)].offsetLeft&&("MultiRow"===this.overflowMode?i[parseInt(a.toString(),10)].classList.add(db):"Extended"===this.overflowMode&&i[parseInt(a.toString(),10)].classList.add(fb))},t.prototype.createPopupEle=function(e,i){var n=e.querySelector("."+Mn),r=this.isVertical;n||this.createPopupIcon(e),n=e.querySelector("."+Mn);var a=(r?e.offsetHeight:e.offsetWidth)-(r?n.offsetHeight:n.offsetWidth);this.element.classList.remove("e-rtl"),ie(this.element,{direction:"initial"}),this.checkPriority(e,i,a,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,i,n,r,o){var a=e.element,l=[].slice.call(Z("."+Gs,a.querySelector("."+Lt))),h=Z("."+Sr,n),c=0,u=0;l.forEach(function(g,b){h=Z("."+Sr,n),g.classList.contains(Sr)&&h.length>0?e.tbResize&&h.length>b?(n.insertBefore(g,h[parseInt(b.toString(),10)]),++u):(n.insertBefore(g,n.children[h.length]),++u):g.classList.contains(Sr)||e.tbResize&&g.classList.contains(sd)&&n.children.length>0&&0===h.length?(n.insertBefore(g,n.firstChild),++u):g.classList.contains(sd)?i.push(g):e.tbResize?(n.insertBefore(g,n.childNodes[c+u]),++c):n.appendChild(g),g.classList.contains(qt)?ie(g,{display:"",height:o+"px"}):ie(g,{display:"",height:r+"px"})}),i.forEach(function(g){n.appendChild(g)});for(var d=Z("."+Xt,a.querySelector("."+Lt)),f=d.length-1;f>=0;f--){var v=d[parseInt(f.toString(),10)];if(!v.classList.contains(qt)||"Extended"===this.overflowMode)break;ie(v,{display:"none"})}},t.prototype.createPopup=function(){var i,n,e=this.element;"Extended"===this.overflowMode&&(n=e.querySelector("."+qt),i="auto"===e.style.height||""===e.style.height?null:n&&n.offsetHeight);var a,r=e.querySelector("."+Xt+":not(."+qt+"):not(."+Gs+")"),o="auto"===e.style.height||""===e.style.height?null:r&&r.offsetHeight;if(T("#"+e.id+"_popup."+Uh,e))a=T("#"+e.id+"_popup."+Uh,e);else{var h=this.createElement("div",{id:e.id+"_popup",className:Uh+" "+od}),c=this.createElement("div",{id:e.id+"_popup",className:Uh});a="Extended"===this.overflowMode?h:c}this.pushingPoppedEle(this,[],a,o,i),this.popupInit(e,a)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,i){if(this.popObj){var a=this.popObj.element;ie(a,{maxHeight:"",display:"block"}),ie(a,{maxHeight:a.offsetHeight+"px",display:""})}else{e.appendChild(i),this.cssClass&&D([i],this.cssClass.split(" ")),ie(this.element,{overflow:""});var n=window.getComputedStyle(this.element),r=new Rs(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.overflowMode&&(r.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),r.offsetX=0),r.appendTo(i),y.add(document,"scroll",this.docEvent.bind(this)),y.add(document,"click ",this.docEvent.bind(this)),r.element.style.maxHeight=r.element.offsetHeight+"px",this.isVertical&&(r.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector("."+Mn);o.classList.add(Vh),ki(o.firstElementChild,[rd],[Yh]),this.element.querySelector("."+od).classList.add(Zx)}else r.hide();this.popObj=r}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,vb):this.remove(this.element,vb))},t.prototype.popupOpen=function(e){var i=this.popObj;this.isVertical||(i.offsetY=this.getElementOffsetY(),i.dataBind());var n=this.popObj.element,r=this.popObj.element.parentElement,o=r.querySelector("."+Mn);o.setAttribute("aria-expanded","true"),ie(i.element,{height:"auto",maxHeight:""}),i.element.style.maxHeight=i.element.offsetHeight+"px","Extended"===this.overflowMode&&(i.element.style.minHeight="");var a=n.offsetTop+n.offsetHeight+Ei(r).top,l=o.firstElementChild;o.classList.add(Vh),ki(l,[rd],[Yh]),this.tbarPopupHandler(!0);var h=p(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+h<a&&this.element.offsetTop<n.offsetHeight){var c=n.offsetHeight-(a-window.innerHeight-h+5);i.height=c+"px";for(var u=0;u<=n.childElementCount;u++){var d=n.children[parseInt(u.toString(),10)];if(d.offsetTop+d.offsetHeight>c){c=d.offsetTop;break}}ie(i.element,{maxHeight:c+"px"})}else if(this.isVertical){var f=this.element.getBoundingClientRect();ie(i.element,{maxHeight:f.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(i){var v=n.getBoundingClientRect();v.right>document.documentElement.clientWidth&&v.width>r.getBoundingClientRect().width&&(i.collision={Y:"none"},i.dataBind()),i.refreshPosition()}},t.prototype.popupClose=function(e){var n=this.element.querySelector("."+Mn);n.setAttribute("aria-expanded","false");var r=n.firstElementChild;n.classList.remove(Vh),ki(r,[Yh],[rd]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,i,n,r){for(var h,o=this.popupPriCount>0,l=n,u=0,d=0,f=0,v=function(H,G){var ee=!1;return G.forEach(function(ue){H.classList.contains(ue)&&(ee=!0)}),ee},g=i.length-1;g>=0;g--){var b=void 0,M=window.getComputedStyle(i[parseInt(g.toString(),10)]);this.isVertical?(b=parseFloat(M.marginTop),b+=parseFloat(M.marginBottom)):(b=parseFloat(M.marginRight),b+=parseFloat(M.marginLeft));var w=i[parseInt(g.toString(),10)]===this.tbarEle[0];w&&(this.tbarEleMrgn=b),h=this.isVertical?i[parseInt(g.toString(),10)].offsetHeight:i[parseInt(g.toString(),10)].offsetWidth;var S=w?h+b:h;if(v(i[parseInt(g.toString(),10)],[pb])&&o&&(i[parseInt(g.toString(),10)].classList.add(Gs),ie(i[parseInt(g.toString(),10)],this.isVertical?{display:"none",minHeight:S+"px"}:{display:"none",minWidth:S+"px"}),f++),this.isVertical?i[parseInt(g.toString(),10)].offsetTop+i[parseInt(g.toString(),10)].offsetHeight+b>n:i[parseInt(g.toString(),10)].offsetLeft+i[parseInt(g.toString(),10)].offsetWidth+b>n){if(i[parseInt(g.toString(),10)].classList.contains(qt)){if("Extended"===this.overflowMode)v(I=i[parseInt(g.toString(),10)],[qt,Wh])&&(i[parseInt(g.toString(),10)].classList.add(Gs),f++),d++;else if("Popup"===this.overflowMode){var I;u>0&&d===f&&v(I=i[g+d+(u-1)],[qt,Wh])&&ie(I,{display:"none"}),u++,d=0,f=0}}else d++;i[parseInt(g.toString(),10)].classList.contains(Sr)&&r||v(i[parseInt(g.toString(),10)],[qt,Wh])?n-=(this.isVertical?i[parseInt(g.toString(),10)].offsetHeight:i[parseInt(g.toString(),10)].offsetWidth)+b:(i[parseInt(g.toString(),10)].classList.add(Gs),ie(i[parseInt(g.toString(),10)],this.isVertical?{display:"none",minHeight:S+"px"}:{display:"none",minWidth:S+"px"}),f++)}}if(r){var P=Z("."+Xt+":not(."+Gs+")",this.element);this.checkPriority(e,P,l,!1)}},t.prototype.createPopupIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-hor-nav"),r=this.createElement("div",{id:i,className:n="Extended"===this.overflowMode?n+" e-expended-nav":n});("msie"===O.info.name||"edge"===O.info.name)&&r.classList.add("e-ie-align");var o=this.createElement("div",{className:Yh+" e-icons"});r.appendChild(o),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),e.appendChild(r)},t.prototype.tbarPriRef=function(e,i,n,r,o,a,l,h,c){var u=h,f="."+Xt+":not(."+qt+"):not(."+Sr+")",v=Z("."+Gs+":not(."+Sr+")",this.popObj.element).length,g=function(I,P){return I.classList.contains(P)};if(0===Z(f,e).length){var b=e.children[i-(i-n)-1],M=!p(b)&&g(b,Wh);if(!p(b)&&g(b,qt)&&!Rt(b)||M){b.style.display="unset";var w=b.offsetWidth+2*parseFloat(window.getComputedStyle(b).marginRight),S=b.previousElementSibling;a+w<l||o?(e.insertBefore(r,e.children[i+u-(i-n)]),p(S)||(S.style.display="")):(ie(r,c),S.classList.contains(qt)&&(S.style.display="none")),b.style.display=""}else e.insertBefore(r,e.children[i+u-(i-n)])}else e.insertBefore(r,e.children[i+u-v])},t.prototype.popupRefresh=function(e,i){var n=this,r=this.element,o=this.isVertical,a=r.querySelector("."+Lt),l=r.querySelector("."+Mn);if(!p(l)){var h;a.removeAttribute("style"),e.style.display="block",h=o?r.offsetHeight-(l.offsetHeight+a.offsetHeight):r.offsetWidth-(l.offsetWidth+a.offsetWidth);var c=0;[].slice.call(e.children).forEach(function(u){c+=n.popupEleWidth(u),ie(u,{position:""})}),h+(o?l.offsetHeight:l.offsetWidth)>c&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(h,e,i),e.style.display="",0===e.children.length&&l&&this.popObj&&(X(l),l=null,this.popObj.destroy(),X(this.popObj.element),this.popObj=null)}},t.prototype.ignoreEleFetch=function(e,i){var n=[].slice.call(i.querySelectorAll("."+Wh)),r=[],o=0;return n.length>0?(n.forEach(function(a){r.push([].slice.call(i.children).indexOf(a))}),r.forEach(function(a){a<=e&&o++}),o):0},t.prototype.checkPopupRefresh=function(e,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var r=e.offsetWidth-e.querySelector("."+Mn).offsetWidth,o=e.querySelector("."+Lt).offsetWidth;return i.style.removeProperty("display"),r>n+o},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(ub)){var r=e.children[0];!p(n)&&e.classList.contains(ub)?n.style.display="none":!p(n)&&e.classList.contains(Jx)&&(n.style.display="block"),r.style.minWidth="0%",i=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),r.style.minWidth="",r.style.minHeight="",p(n)||(n.style.display="")}return i},t.prototype.popupEleRefresh=function(e,i,n){for(var a,l,r=this.popupPriCount>0,o=this.tbarEle,h=this.element.querySelector("."+Lt),c=0,u=function(w){if(w.classList.contains(pb)&&r&&!n)return"continue";var S=d.popupEleWidth(w);if(w===d.tbarEle[0]&&(S+=d.tbarEleMrgn),w.style.position="",!(S<e||n))return"break";var I={minWidth:w.style.minWidth,height:w.style.height,minHeight:w.style.minHeight};if(ie(w,{minWidth:"",height:"",minHeight:""}),w.classList.contains(sd)||w.classList.remove(Gs),l=d.tbarEle.indexOf(w),d.tbarAlign){var P=d.items[parseInt(l.toString(),10)].align;l=d.tbarAlgEle[(P+"s").toLowerCase()].indexOf(w),o=d.tbarAlgEle[(P+"s").toLowerCase()],h=d.element.querySelector("."+Lt+" .e-toolbar-"+P.toLowerCase())}var H=0;"Extended"!==d.overflowMode&&o.slice(0,l).forEach(function(G){(G.classList.contains(Sr)||G.classList.contains(qt))&&(G.classList.contains(qt)&&(G.style.display="",e-=G.offsetWidth),H++)}),c=d.ignoreEleFetch(l,h),w.classList.contains(Sr)?(d.tbarPriRef(h,l,H,w,n,S,e,c,I),e-=w.offsetWidth):0===l?(h.insertBefore(w,h.firstChild),e-=w.offsetWidth):(a=Z("."+Sr,d.popObj.element).length,h.insertBefore(w,h.children[l+c-a]),e-=w.offsetWidth),w.style.height=""},d=this,f=0,v=[].slice.call(i.children);f<v.length&&"break"!==u(v[f]);f++);this.checkOverflow(this.element,this.element.getElementsByClassName(Lt)[0])&&!n&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+Lt);if(!p(e)&&e.classList.contains(wr)){this.remove(e,wr);var i=[].slice.call(e.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+Lt);this.add(e,wr),this.itemPositioning()},t.prototype.itemPositioning=function(){var i,e=this.element.querySelector("."+Lt);if(!p(e)&&e.classList.contains(wr)){var r,n=this.element.querySelector("."+Mn);r=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),i=this.isVertical?r[0].offsetHeight+r[2].offsetHeight:r[0].offsetWidth+r[2].offsetWidth;var a=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){a-=this.isVertical?n.offsetHeight:n.offsetWidth;var l=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";r[2].removeAttribute("style"),this.isVertical?this.enableRtl?r[2].style.top=l:r[2].style.bottom=l:this.enableRtl?r[2].style.left=l:r[2].style.right=l}if(!(a<=i)){var h=(a-i-(this.isVertical?r[1].offsetHeight:r[1].offsetWidth))/2;r[1].removeAttribute("style");var c=(this.isVertical?r[0].offsetHeight:r[0].offsetWidth)+h+"px";this.isVertical?this.enableRtl?r[1].style.marginBottom=c:r[1].style.marginTop=c:this.enableRtl?r[1].style.marginRight=c:r[1].style.marginLeft=c}}},t.prototype.tbarItemAlign=function(e,i,n){var r=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var o=[];if(o.push(this.createElement("div",{className:"e-toolbar-left"})),o.push(this.createElement("div",{className:tP})),o.push(this.createElement("div",{className:"e-toolbar-right"})),0===n&&"Left"!==e.align)o.forEach(function(h){i.appendChild(h)}),this.tbarAlign=!0,this.add(i,wr);else if("Left"!==e.align){var l=o[0];[].slice.call(i.childNodes).forEach(function(h){r.tbarAlgEle.lefts.push(h),l.appendChild(h)}),i.appendChild(l),i.appendChild(o[1]),i.appendChild(o[2]),this.tbarAlign=!0,this.add(i,wr)}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,Lt),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(n){"DIV"===n.tagName&&(e.tbarEle.push(n),p(n.firstElementChild)||n.firstElementChild.setAttribute("aria-disabled","false"),e.add(n,Xt))})},t.prototype.renderItems=function(){var e=this.element,i=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&i.length>0){var n=void 0;e&&e.children.length>0&&(n=e.querySelector("."+Lt)),n||(n=this.createElement("div",{className:Lt})),this.itemsAlign(i,n),e.appendChild(n)}},t.prototype.setAttr=function(e,i){for(var r,n=Object.keys(e),o=0;o<n.length;o++)"class"===(r=n[parseInt(o.toString(),10)])?this.add(i,e[""+r]):i.setAttribute(r,e[""+r])},t.prototype.enableItems=function(e,i){var o,n=e,r=n.length;p(i)&&(i=!0);var a=function(u,d){u?(d.classList.remove(hn),p(d.firstElementChild)||d.firstElementChild.setAttribute("aria-disabled","false")):(d.classList.add(hn),p(d.firstElementChild)||d.firstElementChild.setAttribute("aria-disabled","true"))};if(!p(r)&&r>=1){for(var l=0,h=[].slice.call(n);l<r;l++){var c=h[parseInt(l.toString(),10)];if("number"==typeof c){if(p(o=this.getElementByIndex(c)))return;n[parseInt(l.toString(),10)]=o}else o=c;a(i,o)}i?N(n,hn):D(n,hn)}else{if("number"==typeof n){if(p(o=this.getElementByIndex(n)))return}else o=e;a(i,o)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[parseInt(e.toString(),10)]?this.tbarEle[parseInt(e.toString(),10)]:null},t.prototype.addItems=function(e,i){var n;this.extendedOpen();var r=this.element.querySelector("."+Lt);if(p(r))this.itemsRerender(e);else{var o,a="Left";p(i)&&(i=0),e.forEach(function(f){!p(f.align)&&"Left"!==f.align&&"Left"===a&&(a=f.align)});for(var l=0,h=e;l<h.length;l++){var c=h[l];if(p(c.type)&&(c.type="Button"),n=Z("."+Xt,this.element),c.align=a,o=this.renderSubComponent(c,i),this.tbarEle.length>=i&&n.length>=0){p(this.scrollModule)&&this.destroyMode();var u="L"===c.align[0]?0:"C"===c.align[0]?1:2,d=void 0;this.tbarAlign||"Left"===a?this.tbarAlign?((d=F(n[0],"."+Lt).children[parseInt(u.toString(),10)]).insertBefore(o,d.children[parseInt(i.toString(),10)]),this.tbarAlgEle[(c.align+"s").toLowerCase()].splice(i,0,o),this.refreshPositioning()):0===n.length?(n=Z("."+Lt,this.element))[0].appendChild(o):n[0].parentNode.insertBefore(o,n[parseInt(i.toString(),10)]):(this.tbarItemAlign(c,r,1),this.tbarAlign=!0,(d=F(n[0],"."+Lt).children[parseInt(u.toString(),10)]).appendChild(o),this.tbarAlgEle[(c.align+"s").toLowerCase()].push(o),this.refreshPositioning()),this.items.splice(i,0,c),c.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(i,0,o),i++,this.offsetWid=r.offsetWidth}}r.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},t.prototype.removeItems=function(e){var n,i=e,r=[].slice.call(Z("."+Xt,this.element));if("number"==typeof i)n=parseInt(e.toString(),10),this.removeItemByIndex(n,r);else if(i&&i.length>1)for(var o=0,a=[].slice.call(i);o<a.length;o++)n=this.tbarEle.indexOf(a[o]),this.removeItemByIndex(n,r),r=Z("."+Xt,this.element);else n=r.indexOf(i&&i.length&&1===i.length?i[0]:e),this.removeItemByIndex(n,r);this.resize()},t.prototype.removeItemByIndex=function(e,i){if(this.tbarEle[parseInt(e.toString(),10)]&&i[parseInt(e.toString(),10)]){var n=this.tbarEle.indexOf(i[parseInt(e.toString(),10)]);if(this.tbarAlign){var r=this.tbarAlgEle[(this.items[parseInt(n.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(n.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(n.toString(),10)].align+"s").toLowerCase()].splice(parseInt(r.toString(),10),1)}this.isReact&&this.clearTemplate();var o=i[parseInt(e.toString(),10)].querySelector(".e-control.e-btn");!p(o)&&!p(o.ej2_instances[0])&&!o.ej2_instances[0].isDestroyed&&o.ej2_instances[0].destroy(),X(i[parseInt(e.toString(),10)]),this.items.splice(n,1),this.tbarEle.splice(n,1)}},t.prototype.templateRender=function(e,i,n,r){var l,a=e;if("object"==typeof e&&(l="function"==typeof a.appendTo),"string"!=typeof e&&l)"Input"===n.type&&((d=this.createElement("input")).id=n.id?n.id:at("tbr-ipt"),i.appendChild(d),a.appendTo(d));else{var c,h=void 0,u=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);c="string"==typeof e?e.trim():e;try{if("object"!=typeof e||p(e.tagName))if("string"==typeof e&&u.test(c))i.innerHTML=c;else if(document.querySelectorAll(c).length){var d,f=(d=document.querySelector(c)).outerHTML.trim();i.appendChild(d),d.style.display="",p(f)||this.tempId.push(c)}else h=vt(c);else i.appendChild(e)}catch{h=vt(c)}var v=void 0;p(h)||(v=h({},this,"template",this.element.id+r+"_template",this.isStringTemplate)),!p(v)&&v.length>0&&[].slice.call(v).forEach(function(b){p(b.tagName)||(b.style.display=""),i.appendChild(b)})}this.add(i,Kx),this.tbarEle.push(i)},t.prototype.buttonRendering=function(e,i){var n=this.createElement("button",{className:"e-tbar-btn"});n.setAttribute("type","button");var o,a,r=e.text;n.id=e.id?e.id:at("e-tbr-btn");var l=this.createElement("span",{className:"e-tbar-btn-text"});r?(l.innerHTML=this.enableHtmlSanitizer?Tt.sanitize(r):r,n.appendChild(l),n.classList.add("e-tbtn-txt")):this.add(i,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(o=e.prefixIcon+" e-icons",a="Left"):(o=e.suffixIcon+" e-icons",a="Right"));var h=new Zi({iconCss:o,iconPosition:a});return h.createElement=this.createElement,h.appendTo(n),e.width&&ie(n,{width:te(e.width)}),n},t.prototype.renderSubComponent=function(e,i){var n,r=this.createElement("div",{className:Xt}),o=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?Tt.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,r),e.tooltipText&&r.setAttribute("title",o.textContent),e.cssClass&&(r.className=r.className+" "+e.cssClass),e.template)this.templateRender(e.template,r,e,i);else switch(e.type){case"Button":(n=this.buttonRendering(e,r)).setAttribute("tabindex",p(e.tabIndex)?"-1":e.tabIndex.toString()),n.setAttribute("data-tabindex",p(e.tabIndex)?"-1":e.tabIndex.toString()),n.setAttribute("aria-label",e.text||e.tooltipText),n.setAttribute("aria-disabled","false"),r.appendChild(n),r.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(r,qt)}if(e.showTextOn){var a=e.showTextOn;"Toolbar"===a?(this.add(r,Jx),this.add(r,"e-tbtn-align")):"Overflow"===a&&this.add(r,ub)}if(e.overflow){var l=e.overflow;"Show"===l?this.add(r,Sr):"Hide"===l&&(r.classList.contains(qt)||this.add(r,sd))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!r.classList.contains(qt)&&(this.add(r,pb),this.popupPriCount++),e.disabled&&this.add(r,hn),!1===e.visible&&this.add(r,bs),r},t.prototype.getDataTabindex=function(e){return p(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){p(this.activeEle)||this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),this.activeEle=e,"-1"===this.getDataTabindex(this.activeEle)&&(p(this.trgtEle)&&!e.parentElement.classList.contains(Kx)?(this.updateTabIndex("-1"),e.removeAttribute("tabindex")):this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)))},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var i=this.checkOverflow(e,e.getElementsByClassName(Lt)[0]);if(!i){this.destroyScroll();var n=e.querySelector("."+Lt);p(n)||(this.remove(n,rP),this.tbarAlign&&this.add(n,wr))}if(!i||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var r=window.getComputedStyle(this.element);this.popObj.width=parseFloat(r.width)+2*parseFloat(r.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+iP)&&(this.scrollStep=this.element.querySelector("."+iP).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.orientationChange=function(){var e=this;setTimeout(function(){e.resize()},500)},t.prototype.extendedOpen=function(){var e=this.element.querySelector("."+od);"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(Zx))},t.prototype.updateHideEleTabIndex=function(e,i,n,r,o){n&&(r=o.indexOf(e));for(var a=o[++r];a;){if(!this.eleContains(a)){var h=a.firstElementChild.getAttribute("data-tabindex");i&&"-1"===h?a.firstElementChild.setAttribute("tabindex","0"):h!==a.firstElementChild.getAttribute("tabindex")&&a.firstElementChild.setAttribute("tabindex",h);break}a=o[++r]}},t.prototype.onPropertyChanged=function(e,i){var n=this.element;this.extendedOpen();for(var o=0,a=Object.keys(e);o<a.length;o++)switch(a[o]){case"items":if(e.items instanceof Array&&i.items instanceof Array)this.itemsRerender(e.items);else for(var h=Object.keys(e.items),c=0;c<h.length;c++){var u=parseInt(Object.keys(e.items)[parseInt(c.toString(),10)],10),d=Object.keys(e.items[parseInt(u.toString(),10)])[0],f=Object(e.items[parseInt(u.toString(),10)])[""+d];if("function"!=typeof f){if(this.tbarAlign||"align"===d){this.refresh(),this.trigger("created");break}var g="overflow"===d&&0!==this.popupPriCount;("showAlwaysInPopup"===d&&!f||this.items[parseInt(u.toString(),10)].showAlwaysInPopup&&g)&&--this.popupPriCount,p(this.scrollModule)&&this.destroyMode();var b=[].slice.call(Z("."+Lt+" ."+Xt,n));this.isReact&&this.items[parseInt(u.toString(),10)].template&&this.clearTemplate(),X(b[parseInt(u.toString(),10)]),this.tbarEle.splice(u,1),this.addItems([this.items[parseInt(u.toString(),10)]],u),this.items.splice(u,1),this.items[parseInt(u.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}}break;case"width":ie(n,{width:te(e.width)}),this.refreshOverflow();break;case"height":ie(this.element,{height:te(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(n,qr),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(n,qr):this.remove(n,qr),p(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,qr):this.remove(this.scrollModule.element,qr)),p(this.popObj)||(e.enableRtl?this.add(this.popObj.element,qr):this.remove(this.popObj.element,qr)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":i.cssClass&&N([this.element],i.cssClass.split(" ")),e.cssClass&&D([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}},t.prototype.hideItem=function(e,i){var o,n="object"==typeof e,r=e;if(n||!p(r)){var a=[].slice.call(Z("."+Xt,this.element));n?o=e:this.tbarEle[parseInt(r.toString(),10)]&&(o=[].slice.call(Z("."+Xt,this.element))[parseInt(r.toString(),10)]),o&&(i?(o.classList.add(bs),o.classList.contains(qt)||(p(o.firstElementChild.getAttribute("tabindex"))||"-1"!==o.firstElementChild.getAttribute("tabindex"))&&this.updateHideEleTabIndex(o,i,n,r,a)):(o.classList.remove(bs),o.classList.contains(qt)||this.updateHideEleTabIndex(o,i,n,r,a)),this.refreshOverflow())}},yt([mn([],TU)],t.prototype,"items",void 0),yt([m("auto")],t.prototype,"width",void 0),yt([m("auto")],t.prototype,"height",void 0),yt([m("")],t.prototype,"cssClass",void 0),yt([m("Scrollable")],t.prototype,"overflowMode",void 0),yt([m()],t.prototype,"scrollStep",void 0),yt([m(!0)],t.prototype,"enableCollision",void 0),yt([m(!0)],t.prototype,"enableHtmlSanitizer",void 0),yt([m(!0)],t.prototype,"allowKeyboard",void 0),yt([E()],t.prototype,"clicked",void 0),yt([E()],t.prototype,"created",void 0),yt([E()],t.prototype,"destroyed",void 0),yt([E()],t.prototype,"beforeCreate",void 0),yt([Be],t)}(Mt),ej=function(){function s(t){this.croppedDegree=0,this.cropDestPoints={startX:0,startY:0,width:0,height:0},this.tempFlipPanPoint={x:0,y:0},this.isPreventScaling=!1,this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("crop",this.cropping,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("crop",this.crop),this.parent.off("destroyed",this.destroy)},s.prototype.cropping=function(t){switch(this.updateCropPvtVar(),t.prop){case"cropImg":this.cropImg(t.value.isRotateCrop);break;case"cropCircle":this.cropCircle(t.value.context,t.value.isSave,t.value.isFlip);break;case"setCurrSelPoints":this.setCurrSelPoints(t.value.isSetDimension);break;case"updateRotatePan":this.updateRotatePan();break;case"crop":this.crop(t.value.obj);break;case"calcRatio":this.calcRatio(t.value.obj,t.value.dimension);break;case"isObjInImage":this.isObjInImage(t.value.obj,t.value.object);break;case"getCurrFlipState":this.getCurrFlipState(t.value.panObj);break;case"setPreviousCropCurrentObj":this.prevCropCurrObj=t.value.obj;break;case"setCropDestPoints":this.cropDestPoints=t.value.point;break;case"getTempFlipPanPoint":t.value.obj.point=this.tempFlipPanPoint;break;case"setTempFlipPanPoint":p(t.value.isAdd)?this.tempFlipPanPoint=t.value.point:(this.tempFlipPanPoint.x+=t.value.point.x,this.tempFlipPanPoint.y+=t.value.point.y);break;case"getPreventScaling":t.value.obj.bool=this.isPreventScaling;break;case"reset":this.reset()}},s.prototype.getModuleName=function(){return"crop"},s.prototype.updateCropPvtVar=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d"))},s.prototype.reset=function(){this.prevCropCurrObj=null,this.croppedDegree=0,this.cropDestPoints={startX:0,startY:0,width:0,height:0},this.tempFlipPanPoint={x:0,y:0},this.isPreventScaling=!1},s.prototype.cropImg=function(t){var e=this.parent,i=p(t),n=e.activeObj.activePoint;if(e.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),i&&(this.croppedDegree=e.transform.degree),i&&0!==e.transform.degree)this.updateCropObj(),e.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:{startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight}}}),this.rotateCrop();else if(i&&""!==e.transform.currFlipState)this.updateCropObj(),e.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:{startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight}}}),this.flipCrop();else{e.notify("draw",{prop:"setTempZoomFactor",onPropertyChange:!1,value:{tempZoomFactor:e.transform.zoomFactor}});var o=this.calcRatio();!i&&t||(this.updateCropObj(),e.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1}),e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:{startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight}}}),e.currSelectionPoint=C({},e.activeObj,{},!0),this.cropDestPoints={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight});var a={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:n.width*o.width,height:n.height*o.height,obj:a}});var l=a;this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.img.srcLeft=n.startX*o.width-e.img.destLeft*o.width,e.img.srcTop=n.startY*o.height-e.img.destTop*o.height,e.img.srcWidth=n.width*o.width,e.img.srcHeight=n.height*o.height,e.img.destLeft=(e.lowerCanvas.clientWidth-l.width)/2,e.img.destTop=(e.lowerCanvas.clientHeight-l.height)/2,e.img.destWidth=l.width,e.img.destHeight=l.height;var h=this.lowerContext.filter;e.notify("finetune",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(e.baseImg,e.img.srcLeft,e.img.srcTop,e.img.srcWidth,e.img.srcHeight,e.img.destLeft,e.img.destTop,e.img.destWidth,e.img.destHeight),this.lowerContext.filter="none";var c=C({},e.activeObj,{},!0);this.cropObjColl(),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}});for(var u=0,d=e.objColl.length;u<d;u++)this.isObjInImage(e.objColl[u])&&(e.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:e.objColl[u].shape,obj:e.objColl[u],canvas:null}}),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}));e.activeObj=c,this.cropFreehandDrawColl(),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),"crop-circle"===e.currSelectionPoint.shape?this.cropCircle(this.lowerContext):e.isCircleCrop=!1,this.lowerContext.filter=h,e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.currObjType.isCustomCrop=!1,e.pan(!1),e.transform.defaultZoomFactor=0}},s.prototype.updateCropObj=function(){this.parent.afterCropActions=[];var t={currObj:{}};this.parent.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:t}}),this.parent.cropObj=C({},t.currObj,{},!0)},s.prototype.rotateCrop=function(){var t=this.parent,e=t.activeObj.shape||"";t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.currSelectionPoint=C({},t.activeObj,{},!0),t.objColl.push(t.activeObj),t.activeObj=C({},t.objColl[t.objColl.length-1],{},!0);var i=C({},t.objColl[t.objColl.length-1],{},!0),n=C({},t.currSelectionPoint,{},!0),r={bool:null};t.notify("transform",{prop:"getPreventSelect",onPropertyChange:!1,value:{obj:r}}),t.notify("transform",{prop:"setPreventSelect",onPropertyChange:!1,value:{bool:!0}});var o=C([],t.rotateFlipColl,[],!0);this.panToSelRangle(!0),this.revertTransform("initial",o),i=C({},t.objColl[t.objColl.length-1],{},!0),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i}}),t.objColl.pop(),t.transform.degree=0,this.cropImg(!0),this.revertTransform("reverse",o),t.currSelectionPoint=n,t.notify("transform",{prop:"setPreventSelect",onPropertyChange:!1,value:{bool:r.bool}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),"crop-circle"===e&&this.cropCircle(this.lowerContext),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1})},s.prototype.revertTransform=function(t,e){var i=this.parent,n={isRotate:!1};if("initial"===t)for(var r=e.length-1;r>=0;r--)switch(e[r]){case 90:i.notify("transform",{prop:"rotate",value:{degree:-90,obj:n}});break;case-90:i.notify("transform",{prop:"rotate",value:{degree:90,obj:n}});break;default:i.notify("transform",{prop:"flipImage",value:{direction:i.toPascalCase(e[r])}})}else{r=0;for(var o=i.objColl.length;r<o;r++)i.objColl[r].shapeFlip="";for(r=0;r<i.freehandCounter;r++)i.pointColl[r].shapeFlip="";for(r=0,o=e.length;r<o;r++)switch(e[r]){case 90:i.notify("transform",{prop:"rotate",value:{degree:90,obj:n}});break;case-90:i.notify("transform",{prop:"rotate",value:{degree:-90,obj:n}});break;default:i.notify("transform",{prop:"flipImage",value:{direction:i.toPascalCase(e[r])}})}}},s.prototype.flipCrop=function(){var t=this.parent;t.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!0}}),t.panPoint.totalPannedPoint.x+=this.tempFlipPanPoint.x,t.panPoint.totalPannedPoint.y+=this.tempFlipPanPoint.y;var e=t.transform.currFlipState,i={flipColl:null};t.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:i}});var n=i.flipColl;if(t.notify("transform",{prop:"setFlipColl",onPropertyChange:!1,value:{flipColl:[]}}),t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj),t.transform.zoomFactor>0){for(var r=t.transform.zoomFactor,o=t.isUndoRedo,a=0;a<10*r;a++)t.isUndoRedo=!0,t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null}});t.isUndoRedo=o,t.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1})}t.currSelectionPoint=C({},t.objColl[t.objColl.length-1],{},!0),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height);var l=this.lowerContext.filter;t.notify("finetune",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(t.baseImg,t.img.srcLeft,t.img.srcTop,t.img.srcWidth,t.img.srcHeight,t.img.destLeft,t.img.destTop,t.img.destWidth,t.img.destHeight),a=0;for(var h=t.objColl.length;a<h;a++)t.objColl[a].shapeFlip="";for(a=0;a<t.freehandCounter;a++)t.pointColl[a].shapeFlip="";for(t.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:this.getCurrFlipState()}}),t.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:this.getCurrFlipState()}}),t.activeObj=C({},t.objColl[t.objColl.length-1],{},!0),t.objColl.pop(),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.cropImg(!0),t.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!0}}),this.lowerContext.setTransform(1,0,0,1,0,0),t.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),t.notify("finetune",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(t.baseImg,t.img.srcLeft,t.img.srcTop,t.img.srcWidth,t.img.srcHeight,t.img.destLeft,t.img.destTop,t.img.destWidth,t.img.destHeight),this.lowerContext.filter=l,t.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),t.transform.currFlipState=e,t.notify("transform",{prop:"setFlipColl",onPropertyChange:!1,value:{flipColl:n}}),this.lowerContext.filter="none",a=0,h=t.objColl.length;a<h;a++)t.objColl[a].shapeFlip="";for(a=0;a<t.freehandCounter;a++)t.pointColl[a].shapeFlip="";t.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:this.getCurrFlipState()}}),t.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:this.getCurrFlipState()}}),t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=l,(t.currSelectionPoint&&"crop-circle"===t.currSelectionPoint.shape||t.isCircleCrop)&&this.cropCircle(this.lowerContext),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!1}}),t.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1}),this.tempFlipPanPoint={x:0,y:0}},s.prototype.cropObjColl=function(){var e,i,n,t=this.parent;if(t.objColl.length>0)for(var r=0,o=t.objColl.length;r<o;r++){n=t.objColl[r].shape,t.objColl[r].imageRatio={startX:((e=t.objColl[r].activePoint).startX-(i=t.activeObj.activePoint).startX)/i.width,startY:(e.startY-i.startY)/i.height,endX:(e.endX-i.startX)/i.width,endY:(e.endY-i.startY)/i.height,width:i.width/e.width,height:i.height/e.height};var a=void 0,l=void 0;switch(n){case"text":l=0===(a=0===t.objColl[r].shapeDegree?this.parent.transform.degree:this.parent.transform.degree-t.objColl[r].shapeDegree)||180===Math.abs(a)?e.width:e.height,t.objColl[r].textSettings.fontRatio=l/t.objColl[r].textSettings.fontSize;break;case"line":case"arrow":this.cropPointCollection(r),"arrow"===n&&t.notify("shape",{prop:"updateArrowRatio",onPropertyChange:!1,value:{obj:t.objColl[r]}});break;case"path":this.cropPointCollection(r)}}},s.prototype.cropPointCollection=function(t){var n,r,o,a,e=this.parent,l=e.activeObj.activePoint;"path"===e.objColl[t].shape?(n=l.startX,r=l.startY,o=l.width,a=l.height):(n=e.img.destLeft,r=e.img.destTop,o=e.img.destWidth,a=e.img.destHeight);for(var h=e.objColl[t],c=0,u=h.pointColl.length;c<u;c++)h.pointColl[c].ratioX=(h.pointColl[c].x-n)/o,h.pointColl[c].ratioY=(h.pointColl[c].y-r)/a},s.prototype.cropFreehandDrawColl=function(){for(var t=this.parent,e=0;e<t.freehandCounter;e++){t.points=C([],t.pointColl[e].points,[]),t.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}});for(var i=t.points.length,n=0;n<i;n++)t.points[n].ratioX=(t.points[n].x-t.activeObj.activePoint.startX)/t.activeObj.activePoint.width,t.points[n].ratioY=(t.points[n].y-t.activeObj.activePoint.startY)/t.activeObj.activePoint.height}t.notify("freehand-draw",{prop:"updateCropPtsForSel",onPropertyChange:!1})},s.prototype.setCurrSelPoints=function(t){var e=this.parent,i=this.cropDestPoints;e.img.srcLeft=0,e.img.srcTop=0,e.img.srcWidth=e.baseImg.width,e.img.srcHeight=e.baseImg.height,e.img.destLeft=i.startX,e.img.destTop=i.startY,e.img.destWidth=i.width,e.img.destHeight=i.height,this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),t&&e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),e.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),0===this.croppedDegree&&0===e.transform.degree&&e.currSelectionPoint&&"crop-circle"!==e.currSelectionPoint.shape&&"crop-square"!==e.currSelectionPoint.shape&&(e.img.destLeft=i.startX,e.img.destTop=i.startY,e.img.destWidth=i.width,e.img.destHeight=i.height),0===e.transform.degree&&(e.img.destLeft+=e.panPoint.totalPannedInternalPoint.x,e.img.destTop+=e.panPoint.totalPannedInternalPoint.y),e.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(e.baseImg,e.img.srcLeft,e.img.srcTop,e.img.srcWidth,e.img.srcHeight,e.img.destLeft,e.img.destTop,e.img.destWidth,e.img.destHeight),e.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,context:null,isPreventCircleCrop:!0}});var n=C([],e.objColl,null,!0),r=C([],e.pointColl,null,!0);if(e.objColl=[],e.pointColl=[],e.freehandCounter=0,this.panToSelRangle(),e.objColl=n,e.pointColl=r,e.freehandCounter=e.pointColl.length,e.cropObj.activeObj.shape){var o={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};e.currSelectionPoint&&e.currSelectionPoint.activePoint&&(e.img.destLeft=e.currSelectionPoint.activePoint.startX,e.img.destTop=e.currSelectionPoint.activePoint.startY,e.img.destWidth=e.currSelectionPoint.activePoint.width,e.img.destHeight=e.currSelectionPoint.activePoint.height),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.img.destLeft=o.startX,e.img.destTop=o.startY,e.img.destWidth=o.width,e.img.destHeight=o.height,e.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),n=C([],e.objColl,null,!0),r=C([],e.pointColl,null,!0),e.objColl=[],e.pointColl=[],e.freehandCounter=0;var a={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}});var l=a.selPointColl;e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),e.cropObj.filter=this.lowerContext.filter;var h=C({},e.currSelectionPoint,null,!0);e.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:null}}),e.activeObj=C({},h,null,!0);var c=C({},e.activeObj,null,!0);e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.panToSelRangle(),e.objColl=n,e.pointColl=r,e.freehandCounter=e.pointColl.length,e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:l}}}),e.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),e.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.currSelectionPoint=null,0===e.transform.degree&&e.notify("transform",{prop:"drawPannImage",onPropertyChange:!1,value:{point:{x:0,y:0}}}),e.activeObj=c,e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),e.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}})}else{var u=this.lowerContext.filter;this.lowerContext.filter="none",e.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=u,e.currSelectionPoint=null}},s.prototype.panToSelRangle=function(t){var e=this.parent,i=C({},e.currSelectionPoint,null,!0);e.currSelectionPoint=null;var n=0===e.transform.degree?t?-e.cropObj.totalPannedPoint.x:e.cropObj.totalPannedPoint.x:t?-e.cropObj.totalPannedClientPoint.x:e.cropObj.totalPannedClientPoint.x,r=0===e.transform.degree?t?-e.cropObj.totalPannedPoint.y:e.cropObj.totalPannedPoint.y:t?-e.cropObj.totalPannedClientPoint.y:e.cropObj.totalPannedClientPoint.y;0===e.transform.degree?(e.img.destLeft+=n,e.img.destTop+=r,e.notify("transform",{prop:"drawPannImage",value:{point:{x:n,y:r}}})):(e.panPoint.currentPannedPoint={x:n,y:r},e.notify("transform",{prop:"drawPannedImage",value:{xDiff:n,yDiff:r}}),e.panPoint.currentPannedPoint={x:0,y:0}),e.currSelectionPoint=i},s.prototype.cropCircle=function(t,e,i){var n=this.parent;i&&""!==n.transform.currFlipState&&n.notify("draw",{prop:"setTransform",onPropertyChange:!1,value:{context:t,value:n.transform.currFlipState,isReverse:null}}),t.globalCompositeOperation="destination-in",t.beginPath();var r=p(e)?n.img.destLeft+n.img.destWidth/2:t.canvas.width/2,o=p(e)?n.img.destTop+n.img.destHeight/2:t.canvas.height/2;t.arc(r,o,e?t.canvas.width/2:n.img.destWidth/2,0,2*Math.PI),t.closePath(),t.fill(),t.restore(),t.globalCompositeOperation="source-over",n.currObjType.isActiveObj=n.isCircleCrop=!0,i&&""!==n.transform.currFlipState&&n.notify("draw",{prop:"setTransform",onPropertyChange:!1,value:{context:t,value:n.transform.currFlipState,isReverse:null}})},s.prototype.getCurrCropState=function(t,e){var i=this.parent,n="",r=[],o={flipColl:null};if(i.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:o}}),"initial"===t)if(180===Math.abs(i.transform.degree))n=o.flipColl.length>1?this.getCurrFlipState():i.transform.currFlipState;else{for(var a=0,l=i.rotateFlipColl.length;a<l;a++)"number"==typeof i.rotateFlipColl[a]?r.push("number"):"string"==typeof i.rotateFlipColl[a]&&r.push("string");r.length>1&&"string"===r[r.length-1]&&"number"===r[r.length-2]?"horizontal"===i.transform.currFlipState?n="vertical":"vertical"===i.transform.currFlipState&&(n="horizontal"):r.length>1&&"number"===r[r.length-1]&&"string"===r[r.length-2]&&(n=o.flipColl.length>1?this.getCurrFlipState():i.transform.currFlipState)}else n=this.getCurrFlipState(),(e||!this.isInitialRotate())&&(-90===i.transform.degree||-270===i.transform.degree)&&("horizontal"===n?n="vertical":"vertical"===n&&(n="horizontal"));return""===n&&(n=o.flipColl.length>1?this.getCurrFlipState():i.transform.currFlipState),n},s.prototype.isInitialRotate=function(){var t=!1;return this.parent.rotateFlipColl.length>0&&"number"==typeof this.parent.rotateFlipColl[0]&&(t=!0),t},s.prototype.updateRotatePan=function(){var t=this.parent;if(!p(t.panPoint.currentPannedPoint)){var e;e=t.rotateFlipColl.length>0&&"number"==typeof t.rotateFlipColl[0]&&t.transform.degree<0?this.getCurrCropState("reverse",!0):this.getCurrFlipState(),t.transform.degree%90==0&&t.transform.degree%180!=0?90===t.transform.degree||-90===t.transform.degree&&("horizontal"===e||"vertical"===e)||-270===t.transform.degree&&(""===e||"verticalHorizontal"===e||"horizontalVertical"===e)?("horizontal"===e||""===e?t.img.destLeft+=t.panPoint.currentPannedPoint.y:t.img.destLeft-=t.panPoint.currentPannedPoint.y,""===e||"vertical"===e?t.img.destTop-=t.panPoint.currentPannedPoint.x:t.img.destTop+=t.panPoint.currentPannedPoint.x):(270===t.transform.degree||-270===t.transform.degree&&("horizontal"===e||"vertical"===e)||-90===t.transform.degree&&(""===e||"verticalHorizontal"===e||"horizontalVertical"===e))&&(""===e||"horizontal"===e?t.img.destLeft-=t.panPoint.currentPannedPoint.y:t.img.destLeft+=t.panPoint.currentPannedPoint.y,""===e||"vertical"===e?t.img.destTop+=t.panPoint.currentPannedPoint.x:t.img.destTop-=t.panPoint.currentPannedPoint.x):(180===t.transform.degree||-180===t.transform.degree)&&(""===e||"vertical"===e?t.img.destLeft-=t.panPoint.currentPannedPoint.x:t.img.destLeft+=t.panPoint.currentPannedPoint.x,""===e||"horizontal"===e?t.img.destTop-=t.panPoint.currentPannedPoint.y:t.img.destTop+=t.panPoint.currentPannedPoint.y)}},s.prototype.crop=function(t){var e=this,i=this.parent;if(!i.disabled&&i.isImageLoaded){var n={isCropToolbar:i.isCropToolbar};i.currObjType.isUndoAction&&!n.isCropToolbar&&i.notify("undo-redo",{prop:"refreshUrc",value:{bool:null}});var r={cancel:!1,startPoint:{x:i.activeObj.activePoint.startX,y:i.activeObj.activePoint.startY},endPoint:{x:i.activeObj.activePoint.endX,y:i.activeObj.activePoint.endY},preventScaling:!1};!n.isCropToolbar&&z()&&i.events&&!0===i.events.cropping.hasDelegate?i.dotNetRef.invokeMethodAsync("CropEventAsync","OnCrop",r).then(function(o){e.cropEvent(o,t,n)}):(n.isCropToolbar||i.trigger("cropping",r),this.cropEvent(r,t,n))}},s.prototype.cropEvent=function(t,e,i){var r,n=this.parent;if(!t.cancel&&(r=n.activeObj.shape?n.activeObj.shape.split("-"):[],!n.disabled&&n.activeObj.horTopLine&&(n.currObjType.isCustomCrop||r.length>0&&"crop"===r[0]))){e.isCrop=!0;var o=C({},n.cropObj,{},!0),a=C({},this.prevCropCurrObj,{},!0);this.isPreventScaling=!!t.preventScaling,this.cropImg(),n.transform.zoomFactor=0,n.setProperties({zoomSettings:{zoomFactor:1}},!0),n.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:n.zoomSettings.zoomFactor}}),a.currSelectionPoint=C({},this.parent.prevCurrSelectionPoint,{},!0),n.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"crop",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:o,previousText:null,currentText:null,previousFilter:null,isCircleCrop:n.isCircleCrop}}),i.isCropToolbar||n.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),n.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:n.cropObj.destPoints.width,height:n.cropObj.destPoints.height}}),z()||i.isCropToolbar?i.isCropToolbar||this.parent.updateToolbar(this.parent.element,"imageLoaded"):n.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}})}},s.prototype.calcRatio=function(t,e){var n,r,i=this.parent;return 0===i.transform.degree||i.transform.degree%180==0?(n=(e?e.width:i.baseImg.width)/i.img.destWidth,r=(e?e.height:i.baseImg.height)/i.img.destHeight):(n=(e?e.height:i.baseImg.height)/i.img.destWidth,r=(e?e.width:i.baseImg.width)/i.img.destHeight),t&&(t.width=n,t.height=r),{width:n,height:r}},s.prototype.isObjInImage=function(t,e){var i=this.parent,n=!1,r=t.activePoint.startX,o=t.activePoint.endX,a=t.activePoint.startY,l=t.activePoint.endY;return(r>=i.img.destLeft&&o<=i.img.destLeft+i.img.destWidth||r<=i.img.destLeft&&o>=i.img.destLeft||r<=i.img.destLeft+i.img.destWidth&&o>=i.img.destLeft+i.img.destWidth||a>=i.img.destTop&&l<=i.img.destTop+i.img.destHeight||a<=i.img.destTop&&l>=i.img.destTop||a<=i.img.destTop+i.img.destHeight&&l>=i.img.destTop+i.img.destHeight)&&(n=!0),e&&(e.isInside=n),n},s.prototype.getCurrFlipState=function(t){var e=this.parent,i={panRegion:""},n={collection:e.rotateFlipColl};e.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:e.rotateFlipColl,isRotateFlipCollection:!0,obj:n}}),e.rotateFlipColl=n.collection;for(var r=0,o=e.rotateFlipColl.length;r<o;r++)e.notify("transform",{prop:"setCurrPanRegion",onPropertyChange:!1,value:{region:i.panRegion,type:e.rotateFlipColl[r],obj:i}});return t&&(t.panRegion=i.panRegion),i.panRegion},s}(),tj=function(){function s(t){this.cancelObjColl=[],this.cancelPointColl=[],this.isInitialLoading=!1,this.fileName="",this.isErrorImage=!1,this.isShapeTextInserted=!1,this.isRotateZoom=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.tempTextSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.tempAdjValue="",this.tempFilter="",this.tempUndoRedoStep=0,this.tempFreehandCounter=0,this.tempCurrFhdIndex=0,this.tempZoomFactor=null,this.isCancelAction=!1,this.rotatedFlipCropSel=!1,this.zoomCrop={width:0,height:0},this.isImageEdited=!1,this.isFileChanged=!1,this.isNewPath=!1,this.arrowDimension={bar:{width:10,height:32,ratioX:null,ratioY:null},arrow:{width:24,height:24,ratioX:null,ratioY:null},arrowSolid:{width:32,height:32,ratioX:null,ratioY:null},circle:{width:10,height:10,ratioX:null,ratioY:null},square:{width:20,height:20,ratioX:null,ratioY:null}},this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("draw",this.draw,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("draw",this.draw),this.parent.off("destroyed",this.destroy)},s.prototype.draw=function(t){switch(this.updatePrivateVariables(),t.prop){case"drawObject":this.drawObject(t.value.canvas,t.value.obj,t.value.isCropRatio,t.value.points,t.value.isPreventDrag,t.value.saveContext,t.value.isPreventSelection);break;case"updateActiveObject":this.updateActiveObject(t.value.actPoint,t.value.obj,t.value.isMouseMove,t.value.x,t.value.y);break;case"clearOuterCanvas":this.clearOuterCanvas(t.value.context);break;case"setDestPoints":this.setDestPoints();break;case"updateCurrTransState":this.updateCurrTransState(t.value.type,t.value.isPreventDestination,t.value.isRotatePan);break;case"currTransState":this.currTransState(t.value.type,t.value.isPreventDestination,t.value.context,t.value.isPreventCircleCrop);break;case"setTransform":this.setTransform(t.value.context,t.value.value,t.value.isReverse);break;case"render-image":this.renderImage(t.value.isMouseWheel);break;case"draw-image-to-canvas":this.drawImgToCanvas(t.value.dimension);break;case"update-canvas":this.updateCanvas();break;case"performCancel":this.performCancel(t.value.isContextualToolbar);break;case"updateFlipPan":this.updateFlipPan(t.value.tempSelectionObj);break;case"select":this.select(t.value.type,t.value.startX,t.value.startY,t.value.width,t.value.height);break;case"callUpdateCurrTransState":this.callUpdateCurrTransState();break;case"resetPanPoints":this.resetPanPoints();break;case"setClientTransDim":this.setClientTransDim(t.value.isPreventDimension);break;case"redrawImgWithObj":this.redrawImgWithObj();break;case"setCurrentObj":this.setCurrentObj(t.value.obj);break;case"performPointZoom":this.performPointZoom(t.value.x,t.value.y,t.value.type);break;case"open":this.open(t.value.data);break;case"isInitialLoading":this.isInitialLoading=t.value.isInitialLoading;break;case"isInitialLoaded":this.getInitialLoaded(t.value.object);break;case"fileSelect":this.fileSelect(t.value.inputElement,t.value.args);break;case"getFileName":t.value.obj.fileName=this.fileName,t.value.obj.fileType=this.fileType;break;case"getErrorImage":t.value.obj.isErrorImage=this.isErrorImage;break;case"getInitialZoomValue":t.value.obj.initialZoomValue=this.initZoomValue;break;case"setShapeTextInsert":this.isShapeTextInserted=t.value.bool;break;case"resetCurrentSelectionPoint":this.currSelPoint=null;break;case"setRotateZoom":this.isRotateZoom=t.value.isRotateZoom;break;case"setTempStrokeSettings":this.tempStrokeSettings=t.value.tempStrokeSettings;break;case"setTempTextSettings":this.tempTextSettings=t.value.tempTextSettings;break;case"setTempAdjustmentValue":this.tempAdjValue=t.value.tempAdjustmentValue;break;case"getTempAdjustmentValue":t.value.obj.value=this.tempAdjValue;break;case"setTempFilter":this.tempFilter=t.value.tempFilter;break;case"setTempUndoRedoStep":this.tempUndoRedoStep=t.value.tempUndoRedoStep;break;case"setTempFreehandCounter":this.tempFreehandCounter=t.value.tempFreehandCounter;break;case"setTempCurrentFreehandDrawIndex":this.tempCurrFhdIndex=t.value.tempCurrentFreehandDrawIndex;break;case"setTempZoomFactor":this.tempZoomFactor=t.value.tempZoomFactor;break;case"setCancelAction":this.isCancelAction=t.value.bool;break;case"getRotatedFlipCropSelection":t.value.bool.isSelected=this.rotatedFlipCropSel;break;case"getPrevActObj":t.value.obj.prevActObj=this.prevActObj;break;case"setPrevActObj":this.prevActObj=t.value.prevActObj;break;case"setZoomCropWidth":this.zoomCrop.width=t.value.width,this.zoomCrop.height=t.value.height;break;case"setImageEdited":this.isImageEdited=!0;break;case"reset":this.reset();break;case"dlgBtnClick":this.dlgBtnClick();break;case"dlgCloseBtnClick":this.dlgCloseBtnClick();break;case"setNewPath":this.isNewPath=t.value.bool;break;case"getNewPath":t.value.obj.isNewPath=this.isNewPath;break;case"getArrowDimension":t.value.obj.arrowDimension=this.arrowDimension;break;case"setArrowDimension":this.arrowDimension=t.value.arrowDimension;break;case"moveToSelectionRange":this.moveToSelectionRange(t.value.type,t.value.activeObj)}},s.prototype.getModuleName=function(){return"draw"},s.prototype.updatePrivateVariables=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d")),p(this.tempZoomFactor)&&(this.tempZoomFactor=t.transform.zoomFactor)},s.prototype.reset=function(){this.isInitialLoading=this.isErrorImage=this.isNewPath=!1,this.cancelObjColl=this.cancelPointColl=[],this.isShapeTextInserted=!1,this.initZoomValue=null,this.tempFilter="",this.currSelPoint=null,this.isRotateZoom=!1,this.tempAdjValue="",this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.tempTextSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.tempUndoRedoStep=this.tempFreehandCounter=this.tempCurrFhdIndex=0,this.tempZoomFactor=null,this.isCancelAction=!1,this.rotatedFlipCropSel=!1,this.prevActObj=null,this.arrowDimension={bar:{width:10,height:32,ratioX:null,ratioY:null},arrow:{width:24,height:24,ratioX:null,ratioY:null},arrowSolid:{width:32,height:32,ratioX:null,ratioY:null},circle:{width:10,height:10,ratioX:null,ratioY:null},square:{width:20,height:20,ratioX:null,ratioY:null}}},s.prototype.drawObject=function(t,e,i,n,r,o,a){var c,l=this.parent,h=l.activeObj.activePoint;if(this.upperContext.clearRect(0,0,l.upperCanvas.width,l.upperCanvas.height),"original"===t.toLowerCase()?c=this.lowerContext:"duplicate"===t.toLowerCase()?c=this.upperContext:o&&(c=o),!r&&l.activeObj.shape&&this.setDragLimit(),l.currObjType.shape&&"crop"===l.currObjType.shape.split("-")[0].toLowerCase()&&i&&this.drawCropRatio(),n&&(h.startX=n.startX,h.startY=n.startY,h.endX=n.endX,h.endY=n.endY,h.width=n.width,h.height=n.height),p(l.activeObj.strokeSettings)){var d={strokeSettings:{}};l.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:d}}),l.activeObj.strokeSettings=d.strokeSettings}if(p(l.activeObj.strokeSettings.strokeWidth)&&(l.activeObj.strokeSettings.strokeWidth=2),e&&(l.activeObj=C({},e,{},!0)),this.updateActiveObject(),!p(l.activeObj.activePoint.startX)||!p(l.activeObj.activePoint.startY)){if(l.currObjType.isText){var f={keyHistory:""};l.notify("shape",{prop:"getKeyHistory",onPropertyChange:!1,value:{obj:f}}),l.activeObj.keyHistory=f.keyHistory}if("original"!==t.toLowerCase()){var v=!1;l.activeObj.shape&&"crop"===l.activeObj.shape.split("-")[0]&&(v=!0),v&&(this.upperContext.fillStyle="rgb(0, 0, 0, 0.25)",this.upperContext.fillRect(0,0,l.lowerCanvas.width,l.lowerCanvas.height),this.upperContext.clearRect(h.startX,h.startY,h.width,h.height)),p(a)&&(c===this.lowerContext||c===this.upperContext)&&(this.rotateContext("initial",c),this.drawOuterSelection(c),this.rotateContext("reverse",c))}l.currObjType.isActiveObj=!0;var g={keyHistory:""};l.notify("shape",{prop:"getKeyHistory",onPropertyChange:!1,value:{obj:g}}),this.drawShapeObj(t,e?e.shape:""!==g.keyHistory&&l.currObjType.isText?"text":l.activeObj.shape?l.activeObj.shape:void 0,o,a)}},s.prototype.rotateContext=function(t,e){var i=this.parent,n=C({},i.activeObj.activePoint,{},!0);if("line"!==i.activeObj.shape&&"arrow"!==i.activeObj.shape){var r="initial"===t?i.activeObj.rotatedAngle:-i.activeObj.rotatedAngle;e.translate(n.startX+n.width/2,n.startY+n.height/2),e.rotate(r),e.translate(-(n.startX+n.width/2),-(n.startY+n.height/2))}},s.prototype.setDragLimit=function(){var t=this.parent,e=t.activeObj.activePoint;e&&0===t.activeObj.rotatedAngle&&(e.startX<t.img.destLeft?(e.startX=t.img.destLeft,e.endX=e.startX+e.width):e.endX>t.img.destLeft+t.img.destWidth&&(e.endX=t.img.destLeft+t.img.destWidth,e.startX=e.endX-e.width),e.startY<t.img.destTop?e.startY=t.img.destTop:e.endY>t.img.destTop+t.img.destHeight&&(e.endY=t.img.destTop+t.img.destHeight,e.startY=e.endY-e.height),t.activeObj=this.updateWidthHeight(t.activeObj))},s.prototype.drawCropRatio=function(){var i,n,r,o,l,t=this.parent,e=t.activeObj.activePoint;if(t.transform.zoomFactor>0&&this.currSelPoint){var a=C({},t.activeObj,{},!0);this.drawCustomSelection("crop-custom",null,null,null,null),t.transform.degree%90==0&&t.transform.degree%180!=0?o=r=t.activeObj.activePoint.width<t.activeObj.activePoint.height?t.activeObj.activePoint.width:t.activeObj.activePoint.height:(r=t.img.destLeft+t.img.destLeft+t.img.destWidth<=t.lowerCanvas.clientWidth?e.width:t.lowerCanvas.clientWidth-t.img.destLeft,o=t.img.destTop+t.img.destTop+t.img.destHeight<=t.lowerCanvas.clientHeight?e.height:t.lowerCanvas.clientHeight-t.img.destTop),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.activeObj=a,t.currObjType.shape=a.shape,this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.currObjType.isCustomCrop=!1}else r=t.img.destWidth,o=t.img.destHeight,t.img.destLeft<0&&(r+=t.img.destLeft),t.img.destTop<0&&(o+=t.img.destTop),"crop-square"!==t.currObjType.shape.toLowerCase()&&"crop-circle"!==t.currObjType.shape.toLowerCase()&&(t.img.destLeft+t.img.destWidth>t.lowerCanvas.width&&(r-=t.img.destLeft+t.img.destWidth-t.lowerCanvas.width),t.img.destTop+t.img.destHeight>t.lowerCanvas.height&&(o-=t.img.destTop+t.img.destHeight-t.lowerCanvas.height));switch(t.currObjType.shape.toLowerCase()){case"crop-square":case"crop-circle":t.notify("selection",{prop:"setDragDirection",onPropertyChange:!1,value:{width:r,height:o}}),t.lowerCanvas.width<(e=t.activeObj.activePoint).endX-e.startX&&(e.startX=7.5,e.endX=t.lowerCanvas.width-7.5),t.lowerCanvas.height<e.endY-e.startY&&(e.startY=7.5,e.endY=t.lowerCanvas.height-7.5),r===t.img.destWidth&&o===t.img.destHeight&&(e.startX+=t.img.destLeft,e.startY+=t.img.destTop,e.endX+=t.img.destLeft,e.endY+=t.img.destTop),t.lowerCanvas.width>t.lowerCanvas.height?(e.height=e.endY-e.startY,e.width=e.height,e.endX=e.startX+e.width):(e.width=e.endX-e.startX,e.height=e.width,e.endY=e.startY+e.height);break;case"crop-3:2":i=3,n=2;break;case"crop-4:3":i=4,n=3;break;case"crop-5:4":i=5,n=4;break;case"crop-7:5":i=7,n=5;break;case"crop-16:9":i=16,n=9}void 0!==i&&void 0!==n&&(t.notify("selection",{prop:"calcShapeRatio",onPropertyChange:!1,value:{x:i,y:n,imgWidth:r,imgHeight:o}}),r===t.img.destWidth&&o===t.img.destHeight&&this.updatePoints(),e=t.activeObj.activePoint),e.startX<t.img.destLeft&&(e.startX+=l=t.img.destLeft-e.startX+7.5,e.endX+=l),e.startY<t.img.destTop&&(e.startY+=l=t.img.destTop-e.startY+7.5,e.endY+=l),t.activeObj=this.updateWidthHeight(t.activeObj),this.adjToCenter()},s.prototype.adjToCenter=function(){var t=this.parent,e=t.lowerCanvas.width/2-(t.activeObj.activePoint.endX-t.activeObj.activePoint.width/2),i=t.lowerCanvas.height/2-(t.activeObj.activePoint.endY-t.activeObj.activePoint.height/2);if(t.activeObj.activePoint.startX+=e,t.activeObj.activePoint.endX+=e,t.activeObj.activePoint.startY+=i,t.activeObj.activePoint.endY+=i,t.activeObj.activePoint.startX<(t.img.destLeft>=7.5?t.img.destLeft:7.5)?(t.activeObj.activePoint.startX+=n=(t.img.destLeft>=7.5?t.img.destLeft:0)-t.activeObj.activePoint.startX+7.5,t.activeObj.activePoint.endX+=n):t.activeObj.activePoint.endX>t.img.destLeft+t.img.destWidth&&(t.activeObj.activePoint.startX-=n=t.activeObj.activePoint.endX-(t.img.destLeft+t.img.destWidth)+7.5,t.activeObj.activePoint.endX-=n),t.activeObj.activePoint.startY<(t.img.destTop>7.5?t.img.destTop:7.5))t.activeObj.activePoint.startY+=n=(t.img.destTop>7.5?t.img.destTop:0)-t.activeObj.activePoint.startY+7.5,t.activeObj.activePoint.endY+=n;else if(t.activeObj.activePoint.endY>t.img.destTop+t.img.destHeight){var n;t.activeObj.activePoint.startY-=n=t.activeObj.activePoint.endY-(t.img.destTop+t.img.destHeight)+7.5,t.activeObj.activePoint.endY-=n}},s.prototype.updateActiveObject=function(t,e,i,n,r){t=t||C({},this.parent.activeObj.activePoint,{},!0),e=e||C({},this.parent.activeObj,{},!0),t.width=t.endX-t.startX,t.height=t.endY-t.startY;var o=t.width/2,a=t.height/2,l=7.5;e.horTopLine={startX:t.startX+(n=n||0),startY:t.startY-(r=r||0),endX:t.endX+n,endY:t.endY+r},e.horBottomLine={startX:t.startX-n,startY:t.endY-r,endX:t.endX-n,endY:t.endY+r},e.verLeftLine={startX:t.startX+n,startY:t.startY-r,endX:t.startX-r,endY:t.endY-r},e.verRightLine={startX:t.endX+n,startY:t.startY+r,endX:t.endX-n,endY:t.endY+r},e.topLeftCircle={startX:t.startX,startY:t.startY,radius:e.horTopLine.endX?l:0},e.topCenterCircle={startX:t.startX+o,startY:t.startY,radius:e.horTopLine.endX?l:0},e.topRightCircle={startX:t.endX,startY:t.startY,radius:e.horTopLine.endX?l:0},e.centerLeftCircle={startX:t.startX,startY:t.startY+a,radius:e.horTopLine.endX?l:0},e.centerRightCircle={startX:t.endX,startY:t.startY+a,radius:e.horTopLine.endX?l:0},e.bottomLeftCircle={startX:t.startX,startY:t.endY,radius:e.horTopLine.endX?l:0},e.bottomCenterCircle={startX:t.startX+o,startY:t.endY,radius:e.horTopLine.endX?l:0},e.bottomRightCircle={startX:t.endX,startY:t.endY,radius:e.horTopLine.endX?l:0},0===e.rotatedAngle&&(e.rotationCirclePoint={x:e.bottomCenterCircle.startX,y:e.bottomCenterCircle.startY+25},e.rotationCirclePoint.ratioX=(e.rotationCirclePoint.x-this.parent.img.destLeft)/this.parent.img.destWidth,e.rotationCirclePoint.ratioY=(e.rotationCirclePoint.y-this.parent.img.destTop)/this.parent.img.destHeight),e.activePoint=t,p(i)&&(this.parent.activeObj=C({},e,{},!0))},s.prototype.drawOuterSelection=function(t,e){var i,n=this.parent,r=n.activeObj.activePoint;t.lineWidth=.5,void 0!==n.activeObj.shape&&(i=n.activeObj.shape.split("-"));var a,o=C({},n.activeObj,{},!0);if(void 0!==n.activeObj.shape&&(i=n.activeObj.shape.split("-")),(void 0!==i&&"crop"===i[0]||void 0===n.activeObj.shape)&&!e&&(this.upperContext.fillStyle="rgb(0, 0, 0, 0.25)",this.upperContext.fillRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),this.upperContext.clearRect(r.startX,r.startY,r.width,r.height)),t.strokeStyle=n.themeColl[n.theme].primaryColor,t.fillStyle=n.themeColl[n.theme].secondaryColor,(a=0===o.shapeDegree?n.transform.degree:n.transform.degree-o.shapeDegree)<0&&(a=360+a),"arrow"===n.activeObj.shape||"line"===n.activeObj.shape)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),t.stroke();else if("path"===n.activeObj.shape){t.beginPath();var l=C({},n.activeObj,{},!0);if(t.moveTo(l.pointColl[0].x,l.pointColl[0].y),l.pointColl.length>1)for(var h=1,c=l.pointColl.length;h<c;h++)r.endX=l.pointColl[h].x,r.endY=l.pointColl[h].y,t.lineTo(r.endX,r.endY);var u={shape:null};n.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:u}}),"path"===u.shape&&(n.activeObj=l),t.lineTo(r.endX,r.endY),t.stroke()}else if(t.beginPath(),t.rect(o.activePoint.startX,o.activePoint.startY,o.activePoint.width,o.activePoint.height),t.stroke(),t.closePath(),n.selectionSettings.showCircle){var d=t.strokeStyle,f=t.fillStyle;t.strokeStyle=n.selectionSettings.strokeColor,t.fillStyle=n.selectionSettings.fillColor,t.lineWidth*=2,t.beginPath(),t.moveTo(o.topLeftCircle.startX,o.topLeftCircle.startY),t.arc(o.topLeftCircle.startX,o.topLeftCircle.startY,o.topLeftCircle.radius,0,2*Math.PI),t.moveTo(o.topRightCircle.startX,o.topRightCircle.startY),t.arc(o.topRightCircle.startX,o.topRightCircle.startY,o.topRightCircle.radius,0,2*Math.PI),t.moveTo(o.bottomLeftCircle.startX,o.bottomLeftCircle.startY),t.arc(o.bottomLeftCircle.startX,o.bottomLeftCircle.startY,o.bottomLeftCircle.radius,0,2*Math.PI),t.moveTo(o.bottomRightCircle.startX,o.bottomRightCircle.startY),t.arc(o.bottomRightCircle.startX,o.bottomRightCircle.startY,o.bottomRightCircle.radius,0,2*Math.PI),t.stroke(),t.fill(),t.closePath(),t.lineWidth/=2,t.strokeStyle=d,t.fillStyle=f}!n.selectionSettings.showCircle||void 0!==i&&"crop"===i[0]||(d=t.strokeStyle,f=t.fillStyle,t.strokeStyle=n.selectionSettings.strokeColor,t.fillStyle=n.selectionSettings.fillColor,"text"===n.activeObj.shape||this.drawCenterCircles(t),t.strokeStyle=d,t.fillStyle=f),o.rotationCircleLine=n.activeObj.rotationCircleLine,n.activeObj=C({},o,{},!0)},s.prototype.drawArrowHead=function(t,e){switch(e?this.parent.activeObj.start:this.parent.activeObj.end){case"arrowSolid":this.arrowSolid(t,!!e);break;case"arrow":this.arrow(t,!!e);break;case"circleSolid":this.arrowCircleSolid(t,!!e);break;case"circle":this.arrowCircle(t,!!e);break;case"bar":this.arrowBar(t,!!e);break;case"square":case"squareSolid":e?this.arrowSquareStart(t):this.arrowSquareEnd(t)}},s.prototype.drawShapeObj=function(t,e,i,n){var l,r=this.parent,o=r.activeObj.activePoint;r.currObjType.shape=void 0!==e?e:r.currObjType.shape,"original"===t.toLowerCase()?l=this.lowerContext:"duplicate"===t.toLowerCase()?l=this.upperContext:i&&(l=i),("rectangle"===r.currObjType.shape.toLowerCase()||"ellipse"===r.currObjType.shape.toLowerCase()||"line"===r.currObjType.shape.toLowerCase()||"arrow"===r.activeObj.shape||"path"===r.activeObj.shape)&&(r.activeObj.shape=r.currObjType.shape),l.strokeStyle=r.activeObj.strokeSettings.strokeColor,l.fillStyle="text"===e||"freehanddraw"===e?r.activeObj.strokeSettings.strokeColor:r.activeObj.strokeSettings.fillColor;var h=o.width/3,c=o.height/3,u=o.endX-o.startX,d=o.endY-o.startY;this.rotateContext("initial",l);var f,g,v=l.fillStyle;switch(r.currObjType.shape.toLowerCase()){case"rectangle":this.drawSquareLines(l),p(n)&&l===this.upperContext&&this.drawOuterSelection(l);break;case"ellipse":u=Math.abs(u),d=Math.abs(d),l.beginPath(),l.ellipse(o.startX+u/2,o.startY+d/2,u/2,d/2,0,0,2*Math.PI,!1),""!==r.activeObj.strokeSettings.fillColor&&(l.fillStyle=r.activeObj.strokeSettings.fillColor,l.fill()),l.ellipse(o.startX+u/2,o.startY+d/2,Math.abs(u/2-r.activeObj.strokeSettings.strokeWidth),Math.abs(d/2-r.activeObj.strokeSettings.strokeWidth),0,0,2*Math.PI,!1),l.fillStyle=r.activeObj.strokeSettings.strokeColor,l.fill("evenodd"),l.closePath(),p(n)&&l===this.upperContext&&this.drawOuterSelection(l);break;case"crop-circle":l===this.lowerContext&&(l=this.upperContext),this.shapeCircle(l,u,d);break;case"line":this.shapeLine(l,o.startX,o.startY,o.endX,o.endY),p(n)&&l===this.upperContext&&this.drawOuterSelection(l);break;case"arrow":(f=0===r.activeObj.shapeDegree?r.transform.degree:r.transform.degree-r.activeObj.shapeDegree)<0&&(f=360+f),l.fillStyle=l.strokeStyle,p(r.activeObj.triangleDirection)&&(r.activeObj.triangleDirection="right"),p(r.activeObj.start)&&(r.activeObj.start="none"),p(r.activeObj.end)&&(r.activeObj.end="arrowSolid"),this.drawArrowHead(l,!0),this.drawArrowHead(l,!1),"none"===r.activeObj.end&&this.shapeLine(l,o.startX,o.startY,o.endX,o.endY),l.fillStyle=v,p(n)&&l===this.upperContext&&this.drawOuterSelection(l);break;case"path":if((g=C({},r.activeObj,{},!0)).pointColl.length>1){var b={shape:null};if(r.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:b}}),"path"===b.shape)for(var M={x:0,y:0},w=0,S=g.pointColl.length;w<S;w++)p(g.pointColl[w+1])?(M.x=g.activePoint.endX,M.y=g.activePoint.endY):(M.x=g.pointColl[w+1].x,M.y=g.pointColl[w+1].y),o.startX=g.pointColl[w].x,o.startY=g.pointColl[w].y,o.endX=M.x,o.endY=M.y,r.activeObj=this.updateWidthHeight(r.activeObj),this.shapeLine(l,o.startX,o.startY,o.endX,o.endY);else for(w=1,S=g.pointColl.length;w<S;w++)o.startX=g.pointColl[w-1].x,o.startY=g.pointColl[w-1].y,o.endX=g.pointColl[w].x,o.endY=g.pointColl[w].y,r.activeObj=this.updateWidthHeight(r.activeObj),this.shapeLine(l,o.startX,o.startY,o.endX,o.endY);r.activeObj=g}else this.shapeLine(l,o.startX,o.startY,o.endX,o.endY);l===this.upperContext&&this.drawOuterSelection(l);break;case"text":this.shapeText(l);break;case"crop-square":case"crop-3:4":case"crop-4:3":case"crop-6:9":case"crop-9:6":case"crop-9:16":case"crop-16:9":l===this.lowerContext&&(l=this.upperContext),this.drawSelection(h,c),r.currObjType.shape="";break;default:this.drawSelection(h,c)}this.rotateContext("reverse",l)},s.prototype.updatePoints=function(){var t=this.parent;t.activeObj.activePoint.startX+=t.img.destLeft,t.activeObj.activePoint.startY+=t.img.destTop,t.activeObj.activePoint.endX+=t.img.destLeft,t.activeObj.activePoint.endY+=t.img.destTop,t.activeObj=this.updateWidthHeight(t.activeObj)},s.prototype.updateWidthHeight=function(t){return t.activePoint.width=t.activePoint.endX-t.activePoint.startX,t.activePoint.height=t.activePoint.endY-t.activePoint.startY,t},s.prototype.drawCenterCircles=function(t){var e=this.parent,i=e.activeObj.activePoint;if(t.lineWidth*=2,t.beginPath(),"arrow"===e.activeObj.shape||"line"===e.activeObj.shape)t.moveTo(i.startX,i.startY),t.arc(i.startX,i.startY,e.activeObj.topCenterCircle.radius,0,2*Math.PI),t.moveTo(i.endX,i.endY),t.arc(i.endX,i.endY,e.activeObj.bottomCenterCircle.radius,0,2*Math.PI);else if("path"===e.activeObj.shape){var n=C({},e.activeObj,{},!0);if(n.pointColl.length>1)for(var r=1,o=n.pointColl.length;r<o;r++)i.startX=n.pointColl[r-1].x,i.startY=n.pointColl[r-1].y,i.endX=n.pointColl[r].x,i.endY=n.pointColl[r].y,t.moveTo(i.startX,i.startY),t.arc(i.startX,i.startY,e.activeObj.topCenterCircle.radius,0,2*Math.PI),t.moveTo(i.endX,i.endY),t.arc(i.endX,i.endY,e.activeObj.bottomCenterCircle.radius,0,2*Math.PI);var a={shape:null};e.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:a}}),"path"===a.shape&&(e.activeObj=n),t.moveTo(i.startX,i.startY),t.arc(i.startX,i.startY,e.activeObj.topCenterCircle.radius,0,2*Math.PI),t.moveTo(i.endX,i.endY),t.arc(i.endX,i.endY,e.activeObj.bottomCenterCircle.radius,0,2*Math.PI)}else this.drawRotationArcLine(t),t.lineTo(e.activeObj.rotationCirclePoint.x,e.activeObj.rotationCirclePoint.y);t.stroke(),t.fill(),t.closePath(),"arrow"!==e.activeObj.shape&&"line"!==e.activeObj.shape&&"path"!==e.activeObj.shape&&(t.beginPath(),t.moveTo(e.activeObj.rotationCirclePoint.x,e.activeObj.rotationCirclePoint.y),t.arc(e.activeObj.rotationCirclePoint.x,e.activeObj.rotationCirclePoint.y,e.activeObj.bottomCenterCircle.radius,0,2*Math.PI),t.stroke(),t.fill(),t.closePath()),t.lineWidth/=2},s.prototype.drawRotationArcLine=function(t){var e=this.parent;p(e.activeObj.rotationCircleLine)&&(e.activeObj.rotationCircleLine=22.5);var i,n=!1,r=!1;if((i=0===e.activeObj.shapeDegree?e.transform.degree:e.transform.degree-e.activeObj.shapeDegree)<0&&(i=360+i),e.activeObj.flipObjColl)for(var o=0,a=e.activeObj.flipObjColl.length;o<a;o++)"horizontal"===e.activeObj.flipObjColl[o].toLowerCase()?n=!0:"vertical"===e.activeObj.flipObjColl[o].toLowerCase()&&(r=!0);switch(i){case 0:case 360:r?(e.activeObj.rotationCirclePoint={x:e.activeObj.topCenterCircle.startX,y:e.activeObj.topCenterCircle.startY-e.activeObj.rotationCircleLine},t.moveTo(e.activeObj.rotationCirclePoint.x,e.activeObj.rotationCirclePoint.y+e.activeObj.rotationCircleLine)):(e.activeObj.rotationCirclePoint={x:e.activeObj.bottomCenterCircle.startX,y:e.activeObj.bottomCenterCircle.startY+e.activeObj.rotationCircleLine},t.moveTo(e.activeObj.rotationCirclePoint.x,e.activeObj.rotationCirclePoint.y-e.activeObj.rotationCircleLine));break;case 90:case-270:n?(e.activeObj.rotationCirclePoint={x:e.activeObj.centerRightCircle.startX+e.activeObj.rotationCircleLine,y:e.activeObj.centerLeftCircle.startY},t.moveTo(e.activeObj.rotationCirclePoint.x-e.activeObj.rotationCircleLine,e.activeObj.rotationCirclePoint.y)):(e.activeObj.rotationCirclePoint={x:e.activeObj.centerLeftCircle.startX-e.activeObj.rotationCircleLine,y:e.activeObj.centerLeftCircle.startY},t.moveTo(e.activeObj.rotationCirclePoint.x+e.activeObj.rotationCircleLine,e.activeObj.rotationCirclePoint.y));break;case 180:case-180:r?(e.activeObj.rotationCirclePoint={x:e.activeObj.bottomCenterCircle.startX,y:e.activeObj.bottomCenterCircle.startY+e.activeObj.rotationCircleLine},t.moveTo(e.activeObj.rotationCirclePoint.x,e.activeObj.rotationCirclePoint.y-e.activeObj.rotationCircleLine)):(e.activeObj.rotationCirclePoint={x:e.activeObj.topCenterCircle.startX,y:e.activeObj.topCenterCircle.startY-e.activeObj.rotationCircleLine},t.moveTo(e.activeObj.rotationCirclePoint.x,e.activeObj.rotationCirclePoint.y+e.activeObj.rotationCircleLine));break;case 270:case-90:n?(e.activeObj.rotationCirclePoint={x:e.activeObj.centerLeftCircle.startX-e.activeObj.rotationCircleLine,y:e.activeObj.centerLeftCircle.startY},t.moveTo(e.activeObj.rotationCirclePoint.x+e.activeObj.rotationCircleLine,e.activeObj.rotationCirclePoint.y)):(e.activeObj.rotationCirclePoint={x:e.activeObj.centerRightCircle.startX+e.activeObj.rotationCircleLine,y:e.activeObj.centerLeftCircle.startY},t.moveTo(e.activeObj.rotationCirclePoint.x-e.activeObj.rotationCircleLine,e.activeObj.rotationCirclePoint.y))}},s.prototype.drawSquareLines=function(t){var e,i=this.parent,n=i.activeObj.activePoint;void 0!==i.activeObj.shape&&(e=i.activeObj.shape.split("-")),t.strokeStyle="crop"===e[0]?"#fff":i.activeObj.strokeSettings.strokeColor,t.beginPath(),t.rect(n.startX,n.startY,n.width,n.height),""!==i.activeObj.strokeSettings.fillColor&&(t.fillStyle=i.activeObj.strokeSettings.fillColor,t.fill()),t.rect(n.startX+i.activeObj.strokeSettings.strokeWidth,n.startY+i.activeObj.strokeSettings.strokeWidth,n.width-2*i.activeObj.strokeSettings.strokeWidth,n.height-2*i.activeObj.strokeSettings.strokeWidth),t.fillStyle=i.activeObj.strokeSettings.strokeColor,t.fill("evenodd"),t.closePath()},s.prototype.drawSelection=function(t,e){var i=this.parent,n=i.activeObj.activePoint;this.upperContext.strokeStyle=i.themeColl[i.theme].primaryColor,this.upperContext.beginPath(),i.activeObj.horTopInnerLine={startX:n.startX,startY:n.startY+e,endX:n.endX,endY:n.endY+e},i.activeObj.horBottomInnerLine={startX:n.startX,startY:n.startY+2*e,endX:n.endX,endY:n.endY+2*e},i.activeObj.verLeftInnerLine={startX:n.startX+t,startY:n.startY,endX:n.startX+t,endY:n.endY},i.activeObj.verRightInnerLine={startX:n.startX+2*t,startY:n.startY,endX:n.startX+2*t,endY:n.endY},this.upperContext.moveTo(i.activeObj.horTopInnerLine.startX,i.activeObj.horTopInnerLine.startY),this.upperContext.lineTo(i.activeObj.horTopInnerLine.endX,i.activeObj.horTopInnerLine.startY),this.upperContext.moveTo(i.activeObj.horBottomInnerLine.startX,i.activeObj.horBottomInnerLine.startY),this.upperContext.lineTo(i.activeObj.horBottomInnerLine.endX,i.activeObj.horBottomInnerLine.startY),this.upperContext.moveTo(i.activeObj.verLeftInnerLine.startX,i.activeObj.verLeftInnerLine.startY),this.upperContext.lineTo(i.activeObj.verLeftInnerLine.endX,i.activeObj.verLeftInnerLine.endY),this.upperContext.moveTo(i.activeObj.verRightInnerLine.startX,i.activeObj.verRightInnerLine.startY),this.upperContext.lineTo(i.activeObj.verRightInnerLine.endX,i.activeObj.verRightInnerLine.endY),this.upperContext.stroke(),this.upperContext.closePath()},s.prototype.shapeCircle=function(t,e,i){var n=this.parent,r=n.activeObj.activePoint;t.strokeStyle=n.themeColl[n.theme].primaryColor,t.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),t.fillStyle="rgb(0, 0, 0, 0.25)",t.fillRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height);var o=t.lineWidth;t.lineWidth=2,t.beginPath(),t.ellipse(n.activeObj.horTopLine.startX+e/2,n.activeObj.horTopLine.startY+i/2,e/2,i/2,0,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.save(),t.beginPath(),t.arc((r.endX-r.startX)/2+r.startX,(r.endY-r.startY)/2+r.startY,r.width/2,0,2*Math.PI),t.closePath(),t.clip(),t.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),t.restore(),t.lineWidth=o,this.drawOuterSelection(t,!0),n.currObjType.shape=""},s.prototype.shapeLine=function(t,e,i,n,r){var o=t.lineWidth;t.lineWidth=this.parent.activeObj.strokeSettings.strokeWidth,t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.stroke(),t.lineWidth=o},s.prototype.arrow=function(t,e){var i=this.parent,n=i.activeObj.activePoint;t.lineWidth=i.activeObj.strokeSettings.strokeWidth;var r=this.arrowDimension.arrow.width+i.activeObj.strokeSettings.strokeWidth,o=this.arrowDimension.arrow.height+i.activeObj.strokeSettings.strokeWidth;this.dx=n.endX-n.startX,this.dy=n.endY-n.startY,t.fillStyle=i.activeObj.strokeSettings.strokeColor;var a=Math.atan2(this.dy,this.dx);(e&&("left"===i.activeObj.triangleDirection||"right"===i.activeObj.triangleDirection)&&"arrow"===i.activeObj.start&&"none"===i.activeObj.end||"arrow"===i.activeObj.start&&"circle"!==i.activeObj.end&&"square"!==i.activeObj.end||!e&&("arrow"===i.activeObj.end&&"none"===i.activeObj.start||"circle"!==i.activeObj.start&&"square"!==i.activeObj.start))&&this.shapeLine(t,n.startX,n.startY,n.endX,n.endY),e&&"left"===i.activeObj.triangleDirection||!e&&"right"===i.activeObj.triangleDirection?(t.translate(n.endX,n.endY),t.rotate(a),this.shapeLine(t,0,0,-r,o/2),this.shapeLine(t,0,0,-r,-o/2),t.rotate(-a),t.translate(-n.endX,-n.endY)):(e&&"right"===i.activeObj.triangleDirection||!e&&"left"===i.activeObj.triangleDirection)&&(t.translate(n.startX,n.startY),t.rotate(a),this.shapeLine(t,0,0,r,o/2),this.shapeLine(t,0,0,r,-o/2),t.rotate(-a),t.translate(-n.startX,-n.startY))},s.prototype.arrowSolid=function(t,e){var i=this.parent,n=i.activeObj.activePoint,r=this.arrowDimension.arrowSolid.width+i.activeObj.strokeSettings.strokeWidth,o=this.arrowDimension.arrowSolid.height+i.activeObj.strokeSettings.strokeWidth;this.dx=n.endX-n.startX,this.dy=n.endY-n.startY;var a=Math.atan2(this.dy,this.dx);(e&&"arrowSolid"===i.activeObj.start&&"none"===i.activeObj.end||"arrowSolid"===i.activeObj.start&&"circle"!==i.activeObj.end&&"square"!==i.activeObj.end||!e&&("arrowSolid"===i.activeObj.end&&"none"===i.activeObj.start||"circle"!==i.activeObj.start&&"square"!==i.activeObj.start))&&this.shapeLine(t,n.startX,n.startY,n.endX,n.endY),e&&"left"===i.activeObj.triangleDirection||!e&&"right"===i.activeObj.triangleDirection?(t.translate(n.endX,n.endY),t.rotate(a),t.beginPath(),t.moveTo(i.activeObj.strokeSettings.strokeWidth,0),t.lineTo(o/2-r,o/2),t.lineTo(o/2-r,-o/2),t.closePath(),t.fill(),t.rotate(-a),t.translate(-n.endX,-n.endY),i.activeObj.rotatedAngle=a):(e&&"right"===i.activeObj.triangleDirection||!e&&"left"===i.activeObj.triangleDirection)&&(t.translate(n.startX,n.startY),t.rotate(a),t.beginPath(),t.moveTo(0-i.activeObj.strokeSettings.strokeWidth,0),t.lineTo(r-o/2,o/2),t.lineTo(r-o/2,-o/2),t.closePath(),t.fill(),t.rotate(-a),t.translate(-n.startX,-n.startY),i.activeObj.rotatedAngle=a)},s.prototype.arrowSquareStart=function(t){var e=this.parent,i=e.activeObj.activePoint;("square"===e.activeObj.start&&"none"===e.activeObj.end||"square"===e.activeObj.start&&"circle"!==e.activeObj.end&&"square"!==e.activeObj.start||"squareSolid"===e.activeObj.start&&"circleSolid"===e.activeObj.end)&&this.shapeLine(t,i.startX,i.startY,i.endX,i.endY),t.lineWidth=e.activeObj.strokeSettings.strokeWidth,t.beginPath(),t.fillStyle=e.activeObj.strokeSettings.strokeColor;var n=this.arrowDimension.square.width+e.activeObj.strokeSettings.strokeWidth,r=this.arrowDimension.square.height+e.activeObj.strokeSettings.strokeWidth;this.dx=i.endX-i.startX,this.dy=i.endY-i.startY;var o=Math.atan2(this.dy,this.dx);"left"===e.activeObj.triangleDirection?(t.translate(i.endX,i.endY),t.rotate(o),"squareSolid"===e.activeObj.start&&t.fillRect(r/2-n,-r/2,n,r),t.strokeRect(r/2-n,-r/2,n,r),t.rotate(-o),t.translate(-i.endX,-i.endY),this.squareStartIntersectX1=i.endX-r/2*Math.cos(o),this.squareStartIntersectY1=i.endY-r/2*Math.sin(o),"square"===e.activeObj.start&&"square"!==e.activeObj.end&&"circle"!==e.activeObj.end&&"square"!==e.activeObj.end&&this.shapeLine(t,i.startX,i.startY,this.squareStartIntersectX1,this.squareStartIntersectY1),"square"===e.activeObj.start&&"circle"===e.activeObj.end&&this.shapeLine(t,this.endCircleIntersectX1,this.endCircleIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1),"squareSolid"===e.activeObj.start&&"squareSolid"===e.activeObj.end&&this.shapeLine(t,i.startX,i.startY,i.endX,i.endY)):"right"===e.activeObj.triangleDirection&&(t.lineWidth=e.activeObj.strokeSettings.strokeWidth,t.fillStyle=e.activeObj.strokeSettings.strokeColor,"squareSolid"===e.activeObj.start&&"squareSolid"===e.activeObj.end&&this.shapeLine(t,i.startX,i.startY,i.endX,i.endY),t.translate(i.startX,i.startY),t.rotate(o),"squareSolid"===e.activeObj.start&&t.fillRect(r/2-n,-r/2,n,r),t.strokeRect(r/2-n,-r/2,n,r),t.rotate(-o),t.translate(-i.startX,-i.startY),e.activeObj.rotatedAngle=o,this.squareStartIntersectX1=i.startX+r/2*Math.cos(o),this.squareStartIntersectY1=i.startY+r/2*Math.sin(o),"square"===e.activeObj.start&&"square"!==e.activeObj.end&&"circle"!==e.activeObj.end&&"square"!==e.activeObj.end&&this.shapeLine(t,i.endX,i.endY,this.squareStartIntersectX1,this.squareStartIntersectY1),"square"===e.activeObj.start&&"circle"===e.activeObj.end&&this.shapeLine(t,this.endCircleIntersectX1,this.endCircleIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1))},s.prototype.arrowSquareEnd=function(t){var e=this.parent,i=e.activeObj.activePoint,n=this.arrowDimension.square.width+e.activeObj.strokeSettings.strokeWidth,r=this.arrowDimension.square.height+e.activeObj.strokeSettings.strokeWidth;this.dx=i.endX-i.startX,this.dy=i.endY-i.startY;var o=Math.atan2(this.dy,this.dx);t.lineWidth=e.activeObj.strokeSettings.strokeWidth,"right"===e.activeObj.triangleDirection?(t.fillStyle=e.activeObj.strokeSettings.strokeColor,"squareSolid"===e.activeObj.end&&"none"===e.activeObj.start&&this.shapeLine(t,i.startX,i.startY,i.endX,i.endY),t.translate(i.endX,i.endY),t.rotate(o),"squareSolid"===e.activeObj.end&&t.fillRect(r/2-n,-r/2,n,r),t.strokeRect(r/2-n,-r/2,n,r),t.rotate(-o),t.translate(-i.endX,-i.endY),e.activeObj.rotatedAngle=o,this.squareEndIntersectX1=i.endX-r/2*Math.cos(o),this.squareEndIntersectY1=i.endY-r/2*Math.sin(o),"square"===e.activeObj.end&&"square"!==e.activeObj.start&&"circle"!==e.activeObj.start&&"square"===e.activeObj.end?this.shapeLine(t,i.startX,i.startY,this.squareEndIntersectX1,this.squareEndIntersectY1):"circle"===e.activeObj.start&&"square"===e.activeObj.end?this.shapeLine(t,this.squareEndIntersectX1,this.squareEndIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):"square"===e.activeObj.start&&"square"===e.activeObj.end&&this.shapeLine(t,this.squareEndIntersectX1,this.squareEndIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1)):"left"===e.activeObj.triangleDirection&&(t.translate(i.startX,i.startY),t.rotate(o),"squareSolid"===e.activeObj.end&&t.fillRect(r/2-n,-r/2,n,r),t.strokeRect(r/2-n,-r/2,n,r),t.rotate(-o),t.translate(-i.startX,-i.startY),e.activeObj.rotatedAngle=o,this.squareEndIntersectX1=i.startX+r/2*Math.cos(o),this.squareEndIntersectY1=i.startY+r/2*Math.sin(o),"square"===e.activeObj.end&&"square"!==e.activeObj.start&&"circle"!==e.activeObj.start&&"square"===e.activeObj.end?this.shapeLine(t,i.endX,i.endY,this.squareEndIntersectX1,this.squareEndIntersectY1):"circle"===e.activeObj.start&&"square"===e.activeObj.end?this.shapeLine(t,this.squareEndIntersectX1,this.squareEndIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):"square"===e.activeObj.start&&"square"===e.activeObj.end&&this.shapeLine(t,this.squareEndIntersectX1,this.squareEndIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1))},s.prototype.arrowCircle=function(t,e){var i=this.parent,n=i.activeObj.activePoint;if(e&&"left"===i.activeObj.triangleDirection||!e&&"right"===i.activeObj.triangleDirection){t.lineWidth=i.activeObj.strokeSettings.strokeWidth;var r=this.arrowDimension.circle.width+i.activeObj.strokeSettings.strokeWidth;if(t.beginPath(),t.arc(n.endX,n.endY,r,0,2*Math.PI),t.stroke(),t.closePath(),this.dx=n.endX-n.startX,this.dy=n.endY-n.startY,(h=(a=2*(this.dx*(n.startX-n.endX)+this.dy*(n.startY-n.endY)))*a-4*(o=this.dx*this.dx+this.dy*this.dy)*((n.startX-n.endX)*(n.startX-n.endX)+(n.startY-n.endY)*(n.startY-n.endY)-r*r))>=0){t.fillStyle=i.activeObj.strokeSettings.strokeColor;var c=(-a-Math.sqrt(h))/(2*o),u=n.startX+this.dx*c,d=n.startY+this.dy*c;e?(this.startCircleIntersectX1=u,this.startCircleIntersectY1=d,t.beginPath(),t.fill(),t.beginPath(),"circle"===i.activeObj.start&&"circle"===i.activeObj.end?this.shapeLine(t,this.startCircleIntersectX1,this.startCircleIntersectY1,this.endCircleIntersectX1,this.endCircleIntersectY1):"circle"===i.activeObj.start&&"circle"!==i.activeObj.end&&"square"!==i.activeObj.end&&this.shapeLine(t,n.startX,n.startY,this.startCircleIntersectX1,this.startCircleIntersectY1),t.stroke(),t.closePath()):(this.endCircleIntersectX1=u,this.endCircleIntersectY1=d,"circle"===i.activeObj.end&&"circle"!==i.activeObj.start&&"square"!==i.activeObj.start&&this.shapeLine(t,n.startX,n.startY,this.endCircleIntersectX1,this.endCircleIntersectY1))}var f=Math.atan2(this.dy,this.dx);i.activeObj.rotatedAngle=f}else if(e&&"right"===i.activeObj.triangleDirection||!e&&"left"===i.activeObj.triangleDirection){var o,a,h;t.lineWidth=i.activeObj.strokeSettings.strokeWidth,r=this.arrowDimension.circle.width+i.activeObj.strokeSettings.strokeWidth,t.beginPath(),t.arc(n.startX,n.startY,r,0,2*Math.PI),t.stroke(),t.closePath(),this.dx=n.startX-n.endX,this.dy=n.startY-n.endY,(h=(a=2*(this.dx*(n.endX-n.startX)+this.dy*(n.endY-n.startY)))*a-4*(o=this.dx*this.dx+this.dy*this.dy)*((n.endX-n.startX)*(n.endX-n.startX)+(n.endY-n.startY)*(n.endY-n.startY)-r*r))>=0&&(t.fillStyle=i.activeObj.strokeSettings.strokeColor,c=(-a-Math.sqrt(h))/(2*o),u=n.endX+this.dx*c,d=n.endY+this.dy*c,e?(this.startCircleIntersectX1=u,this.startCircleIntersectY1=d,"circle"===i.activeObj.start&&"circle"===i.activeObj.end?this.shapeLine(t,this.endCircleIntersectX1,this.endCircleIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):"circle"===i.activeObj.start&&"circle"!==i.activeObj.end&&"square"!==i.activeObj.end&&this.shapeLine(t,n.endX,n.endY,this.startCircleIntersectX1,this.startCircleIntersectY1)):(this.endCircleIntersectX1=u,this.endCircleIntersectY1=d,t.beginPath(),t.fill(),t.beginPath(),"circle"===i.activeObj.end&&"circle"!==i.activeObj.start&&"square"!==i.activeObj.start&&this.shapeLine(t,n.endX,n.endY,this.endCircleIntersectX1,this.endCircleIntersectY1))),f=Math.atan2(this.dy,this.dx),i.activeObj.rotatedAngle=f}},s.prototype.arrowCircleSolid=function(t,e){var i=this.parent,n=i.activeObj.activePoint;if(e&&"left"===i.activeObj.triangleDirection||!e&&"right"===i.activeObj.triangleDirection){t.lineWidth=i.activeObj.strokeSettings.strokeWidth,t.beginPath(),t.fillStyle=i.activeObj.strokeSettings.strokeColor,(e&&"circleSolid"===i.activeObj.start&&"none"===i.activeObj.end||"circleSolid"===i.activeObj.start&&"circle"!==i.activeObj.end&&"square"!==i.activeObj.end||!e&&"circleSolid"===i.activeObj.end&&"none"===i.activeObj.start)&&this.shapeLine(t,n.startX,n.startY,n.endX,n.endY);var r=this.arrowDimension.circle.width+i.activeObj.strokeSettings.strokeWidth;this.dx=n.endX-n.startX,this.dy=n.endY-n.startY,t.save(),t.beginPath(),t.arc(n.endX,n.endY,r,0,2*Math.PI),t.stroke(),t.fill(),t.closePath(),i.activeObj.rotatedAngle=Math.atan2(this.dy,this.dx)}else(e&&"right"===i.activeObj.triangleDirection||!e&&"left"===i.activeObj.triangleDirection)&&(t.lineWidth=i.activeObj.strokeSettings.strokeWidth,t.beginPath(),t.fillStyle=i.activeObj.strokeSettings.strokeColor,(e&&"circleSolid"===i.activeObj.start&&"none"===i.activeObj.end||"circleSolid"===i.activeObj.start&&"circle"!==i.activeObj.end&&"square"!==i.activeObj.end||!e&&"circleSolid"===i.activeObj.end&&"none"===i.activeObj.start)&&this.shapeLine(t,n.startX,n.startY,n.endX,n.endY),r=this.arrowDimension.circle.width+i.activeObj.strokeSettings.strokeWidth,this.dx=n.endX-n.startX,this.dy=n.endY-n.startY,t.save(),t.beginPath(),t.arc(n.startX,n.startY,r,0,2*Math.PI),t.stroke(),t.fill(),t.closePath(),i.activeObj.rotatedAngle=Math.atan2(this.dy,this.dx))},s.prototype.arrowBar=function(t,e){var i=this.parent,n=i.activeObj.activePoint;if(e&&"left"===i.activeObj.triangleDirection||!e&&"right"===i.activeObj.triangleDirection){t.lineWidth=i.activeObj.strokeSettings.strokeWidth,t.beginPath(),t.fillStyle=i.activeObj.strokeSettings.strokeColor,(e&&"bar"===i.activeObj.start&&"none"===i.activeObj.end||"bar"===i.activeObj.start&&"circle"!==i.activeObj.end&&"square"!==i.activeObj.end||!e&&("bar"===i.activeObj.end&&"none"===i.activeObj.start||"bar"===i.activeObj.end&&"circle"!==i.activeObj.start&&"square"!==i.activeObj.start))&&this.shapeLine(t,n.startX,n.startY,n.endX,n.endY);var r=this.arrowDimension.bar.width+i.activeObj.strokeSettings.strokeWidth,o=this.arrowDimension.bar.height+i.activeObj.strokeSettings.strokeWidth;this.dx=n.endX-n.startX,this.dy=n.endY-n.startY;var a=Math.atan2(this.dy,this.dx);t.translate(n.endX,n.endY),t.rotate(a),t.fillRect(o/4-r,-o/2,r,o),t.rotate(-a),t.translate(-n.endX,-n.endY),i.activeObj.rotatedAngle=a}else(e&&"right"===i.activeObj.triangleDirection||!e&&"left"===i.activeObj.triangleDirection)&&(t.lineWidth=i.activeObj.strokeSettings.strokeWidth,t.beginPath(),t.fillStyle=i.activeObj.strokeSettings.strokeColor,(e&&"bar"===i.activeObj.start&&"none"===i.activeObj.end||"bar"===i.activeObj.start&&"circle"!==i.activeObj.end&&"square"!==i.activeObj.end||!e&&"bar"===i.activeObj.end&&"none"===i.activeObj.start)&&this.shapeLine(t,n.startX,n.startY,n.endX,n.endY),r=this.arrowDimension.bar.width+i.activeObj.strokeSettings.strokeWidth,o=this.arrowDimension.bar.height+i.activeObj.strokeSettings.strokeWidth,this.dx=n.endX-n.startX,this.dy=n.endY-n.startY,a=Math.atan2(this.dy,this.dx),t.translate(n.startX,n.startY),t.rotate(a),t.fillRect(o/4-r,-o/2,r,o),t.rotate(-a),t.translate(-n.startX,-n.startY),i.activeObj.rotatedAngle=a)},s.prototype.shapeText=function(t){for(var e=this.parent,i=e.activeObj.activePoint,n=e.activeObj.keyHistory.split("\n"),o=((e.activeObj.textSettings.fontSize+.25*e.activeObj.textSettings.fontSize)*n.length-e.activeObj.textSettings.fontSize*n.length)/n.length,a=0;a<n.length;a++){var l=n[a],h=(a+1)*e.activeObj.textSettings.fontSize*.85+a*o;-360===e.transform.degree&&(e.transform.degree=0),0===e.transform.degree||180===e.transform.degree?e.activeObj.textSettings.fontSize>i.height&&(e.activeObj.textSettings.fontSize=i.height-.1*i.height):e.activeObj.textSettings.fontSize>i.width&&(e.activeObj.textSettings.fontSize=i.width-.1*i.width),t.strokeStyle=e.activeObj.strokeSettings.strokeColor,t.fillStyle=e.activeObj.strokeSettings.strokeColor;var c="";e.activeObj.textSettings.bold&&(c="bold "),e.activeObj.textSettings.italic&&(c="italic "),e.activeObj.textSettings.bold&&e.activeObj.textSettings.italic&&(c="italic bold "),t.font=c+e.activeObj.textSettings.fontSize+"px "+e.activeObj.textSettings.fontFamily,4===e.activeObj.flipObjColl.length&&(e.activeObj.flipObjColl=[],e.activeObj.shapeFlip="");for(var u=0,d=e.activeObj.flipObjColl.length;u<d;u++)"horizontal"===e.activeObj.flipObjColl[u].toLowerCase()?(t.translate(t.canvas.width,0),t.scale(-1,1),i=this.updateActPoint("horizontal",t)):"vertical"===e.activeObj.flipObjColl[u].toLowerCase()&&(t.translate(0,t.canvas.height),t.scale(1,-1),i=this.updateActPoint("vertical",t));e.activeObj.shapeDegree!==e.transform.degree?this.rotateText(t):t.fillText(l,i.startX+.1*e.activeObj.textSettings.fontSize,i.startY+h);var f=0;for(d=e.activeObj.flipObjColl.length;f<d;f++)"horizontal"===e.activeObj.flipObjColl[f].toLowerCase()?(t.translate(t.canvas.width,0),t.scale(-1,1),i=this.updateActPoint("horizontal",t)):"vertical"===e.activeObj.flipObjColl[f].toLowerCase()&&(t.translate(0,t.canvas.height),t.scale(1,-1),i=this.updateActPoint("vertical",t))}e.currObjType.isText=!1},s.prototype.updateActPoint=function(t,e){var i=this.parent,n=i.activeObj.activePoint;return"horizontal"===t.toLowerCase()?n.startX<=e.canvas.width/2?(n.startX=e.canvas.width/2+(e.canvas.width/2-n.endX),n.endX=n.startX+n.width,this.updateActiveObject(n,i.activeObj)):n.startX>=e.canvas.width/2&&(n.startX=e.canvas.width-n.endX,n.endX=n.startX+n.width,this.updateActiveObject(n,i.activeObj)):"vertical"===t.toLowerCase()&&(n.startY<=e.canvas.height/2?(n.startY=e.canvas.height/2+(e.canvas.height/2-n.endY),n.endY=n.startY+n.height,this.updateActiveObject(n,i.activeObj)):n.startY>=e.canvas.height/2&&(n.startY=e.canvas.height-n.endY,n.endY=n.startY+n.height,this.updateActiveObject(n,i.activeObj))),n},s.prototype.rotateText=function(t){var r,e=this.parent,i=e.activeObj.activePoint.startX,n=e.activeObj.activePoint.startY,o=e.activeObj.activePoint;if(-450===(r=0===e.activeObj.shapeDegree?e.transform.degree:e.transform.degree-e.activeObj.shapeDegree)&&(r=-90),r<0&&(r=360+r),r%360!=0||-360===e.transform.degree&&""!==e.transform.currFlipState)r%90==0&&r%180!=0?(t.translate(e.lowerCanvas.width/2,e.lowerCanvas.height/2),t.rotate(Math.PI/180*r),t.translate(-e.lowerCanvas.height/2,-e.lowerCanvas.width/2),r%90==0&&r%270!=0?(n=e.lowerCanvas.width-o.endX+.4*e.activeObj.textSettings.fontSize,i=o.startY):r%270==0&&(i=e.lowerCanvas.height-o.endY,n=o.startX+.4*e.activeObj.textSettings.fontSize),this.textFlipDegree(t,i,n),t.translate(e.lowerCanvas.height/2,e.lowerCanvas.width/2),t.rotate(Math.PI/180*-r),t.translate(-e.lowerCanvas.width/2,-e.lowerCanvas.height/2)):(t.translate(e.lowerCanvas.width/2,e.lowerCanvas.height/2),t.rotate(Math.PI/180*r),i=e.lowerCanvas.width-o.endX,n=e.lowerCanvas.height-o.endY+.4*e.activeObj.textSettings.fontSize,t.translate(-e.lowerCanvas.width/2,-e.lowerCanvas.height/2),this.textFlipDegree(t,i,n),t.translate(e.lowerCanvas.width/2,e.lowerCanvas.height/2),t.rotate(Math.PI/180*-r),t.translate(-e.lowerCanvas.width/2,-e.lowerCanvas.height/2));else{i=o.startX+.15*e.activeObj.textSettings.fontSize,n=o.startY+(o.endY-o.startY);for(var a=e.activeObj.keyHistory.split("\n"),l=0;l<a.length;l++)t.fillText(a[l],i,n=o.startY+(l*e.activeObj.textSettings.fontSize+.25*e.activeObj.textSettings.fontSize))}(360===e.transform.degree||-360===e.transform.degree)&&(e.transform.degree=0)},s.prototype.textFlipDegree=function(t,e,i){for(var n=this.parent,r=n.activeObj.keyHistory.split("\n"),l=.85*n.activeObj.textSettings.fontSize+(n.activeObj.textSettings.fontSize*r.length-n.activeObj.textSettings.fontSize*r.length)/r.length,h=0;h<r.length;h++)h>0&&(1===h&&(l-=.85*n.activeObj.textSettings.fontSize),l+=n.activeObj.textSettings.fontSize+.15*n.activeObj.textSettings.fontSize),t.fillText(r[h],e+.15*n.activeObj.textSettings.fontSize,i+l+(h>0?.25*n.activeObj.textSettings.fontSize:.35*-n.activeObj.textSettings.fontSize))},s.prototype.clearOuterCanvas=function(t){var e=this.parent,i=e.img.destLeft,n=e.img.destTop;if(e.img.destWidth<e.lowerCanvas.width){var r=e.img.destLeft>0?e.img.destLeft:0;t.clearRect(0,0,r,e.lowerCanvas.height),t.clearRect(e.img.destLeft+e.img.destWidth,0,r,e.lowerCanvas.height)}if(e.img.destHeight<e.lowerCanvas.height){var o=e.img.destTop>0?e.img.destTop:0;t.clearRect(0,0,e.lowerCanvas.width,o),t.clearRect(0,e.img.destTop+e.img.destHeight,e.lowerCanvas.width,o)}""!==e.transform.currFlipState&&(e.img.destLeft=i,e.img.destTop=n)},s.prototype.setDestPoints=function(){var t,i,e=this.parent;e.transform.degree%90==0&&e.transform.degree%180!=0?(e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:e.img.srcHeight,height:e.img.srcWidth,obj:i={width:0,height:0}}}),t=i,this.isRotateZoom&&(t.width+=t.width*e.transform.zoomFactor,t.height+=t.height*e.transform.zoomFactor,e.img.destWidth=t.height,e.img.destHeight=t.width),e.img.destLeft=(e.lowerCanvas.clientWidth-t.height)/2,e.img.destTop=(e.lowerCanvas.clientHeight-t.width)/2,e.img.destWidth=t.height,e.img.destHeight=t.width):(e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:e.img.srcWidth,height:e.img.srcHeight,obj:i={width:0,height:0}}}),t=i,this.isRotateZoom&&(t.width+=t.width*e.transform.zoomFactor,t.height+=t.height*e.transform.zoomFactor,e.img.destWidth=t.width,e.img.destHeight=t.height),e.img.destLeft=(e.lowerCanvas.clientWidth-t.width)/2,e.img.destTop=(e.lowerCanvas.clientHeight-t.height)/2,e.img.destWidth=t.width,e.img.destHeight=t.height)},s.prototype.updateCurrTransState=function(t,e,i){var n=this.parent,r=n.img.destLeft,o=n.img.destTop;"initial"===t&&(this.lowerContext.setTransform(1,0,0,1,0,0),p(e)&&this.setDestPoints()),this.currTransState(t,null,null,i),0===n.transform.degree&&""===n.transform.currFlipState&&(n.img.destLeft=r,n.img.destTop=o),(n.isCircleCrop||n.currSelectionPoint&&"crop-circle"===n.currSelectionPoint.shape)&&(i&&(n.img.destLeft+=n.panPoint.totalPannedClientPoint.x,n.img.destTop+=n.panPoint.totalPannedClientPoint.y),n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i&&(n.img.destLeft-=n.panPoint.totalPannedClientPoint.x,n.img.destTop-=n.panPoint.totalPannedClientPoint.y))},s.prototype.currTransState=function(t,e,i,n){var r=this.parent;i=i||this.lowerContext,"initial"===t?this.setTransformColl(i,t):"reverse"===t&&(this.setTransformColl(i,t),this.setClientTransDim(e),(r.isCircleCrop||r.currSelectionPoint&&"crop-circle"===r.currSelectionPoint.shape&&p(n))&&(n&&(r.img.destLeft+=r.panPoint.totalPannedClientPoint.x,r.img.destTop+=r.panPoint.totalPannedClientPoint.y),r.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),n&&(r.img.destLeft-=r.panPoint.totalPannedClientPoint.x,r.img.destTop-=r.panPoint.totalPannedClientPoint.y)))},s.prototype.setTransformColl=function(t,e){var i=this.parent;if("initial"===e)for(var n=0,r=i.rotateFlipColl.length;n<r;n++)this.setTransform(t,i.rotateFlipColl[n]);else if("reverse"===e)for(n=i.rotateFlipColl.length-1;n>=0;n--)this.setTransform(t,i.rotateFlipColl[n],!0)},s.prototype.setTransform=function(t,e,i){var n=this.parent;switch(i&&90===e?e=-90:i&&-90===e&&(e=90),"horizontal"===e&&n.transform.degree%90==0&&n.transform.degree%180!=0?e="vertical":"vertical"===e&&n.transform.degree%90==0&&n.transform.degree%180!=0&&(e="horizontal"),n.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!0}}),n.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!0}}),p(i)&&t.clearRect(0,0,t.canvas.width,t.canvas.height),e){case 90:case-90:t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(Math.PI/180*e),t.translate(-t.canvas.width/2,-t.canvas.height/2);break;case"horizontal":t.translate(t.canvas.width,0),t.scale(-1,1);break;case"vertical":t.translate(0,t.canvas.height),t.scale(1,-1)}n.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!1}}),n.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!1}})},s.prototype.drawImgToCanvas=function(t){var e=this.parent;this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.img.destWidth=t.width,e.img.destHeight=t.height,this.isInitialLoading&&(e.notify("filter",{prop:"initFilter",onPropertyChange:!1}),this.isInitialLoading=!1);var i=this.lowerContext.filter;e.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.lowerContext.drawImage(e.baseImg,e.img.srcLeft,e.img.srcTop,e.img.srcWidth,e.img.srcHeight,e.img.destLeft,e.img.destTop,e.img.destWidth,e.img.destHeight),(e.currSelectionPoint&&"crop-circle"===e.currSelectionPoint.shape||e.isCircleCrop)&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),this.lowerContext.filter=i},s.prototype.renderImage=function(t){var e=this.parent,i=this.lowerContext.filter;e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),this.upperContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),t?this.setTransformColl(this.lowerContext,"initial"):(e.transform.zoomFactor>0&&(this.isRotateZoom=!0),this.updateCurrTransState("initial")),e.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),e.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),this.lowerContext.drawImage(e.baseImg,e.img.srcLeft,e.img.srcTop,e.img.srcWidth,e.img.srcHeight,e.img.destLeft,e.img.destTop,e.img.destWidth,e.img.destHeight),e.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),t?this.setTransformColl(this.lowerContext,"reverse"):(this.updateCurrTransState("reverse"),this.isRotateZoom=!1),this.lowerContext.filter="none",e.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=i,(e.isCircleCrop||e.currSelectionPoint&&"crop-circle"===e.currSelectionPoint.shape)&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})},s.prototype.imageOnLoad=function(t){var e=this,i=this.parent,n=this;i.baseImg.src=t,i.baseImg.onload=function(){i.notify("filter",{prop:"update-finetunes",onPropertyChange:!1}),n.lowerContext.drawImage(i.baseImg,0,0,n.parent.lowerCanvas.width,n.parent.lowerCanvas.height),Ri(i.element),i.element.style.opacity="1",n.updateCanvas(),i.currObjType.isUndoZoom&&(i.currObjType.isUndoZoom=!1,n.parent.lowerCanvas.style.display="block"),i.isUndoRedo=e.isErrorImage=!1,z()?(i.updateToolbar(i.element,"imageLoaded","initial"),O.isDevice&&(i.element.querySelector(".e-bottom-toolbar-area").style.display="block",i.element.querySelector(".e-canvas-wrapper").style.height=i.element.offsetHeight-2*i.toolbarHeight-3+"px")):O.isDevice?(i.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"destroy-bottom-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"init-main-toolbar",onPropertyChange:!1,value:{isApplyBtn:!1,isDevice:O.isDevice,isOkBtn:null}}),i.notify("toolbar",{prop:"create-bottom-toolbar",onPropertyChange:!1})):(i.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"init-main-toolbar",onPropertyChange:!1,value:{isApplyBtn:!1,isDevice:!1,isOkBtn:null}}))},i.baseImg.onerror=function(){Ri(i.element),n.isErrorImage=!0,n.errorLoading()}},s.prototype.errorLoading=function(){var t=this.parent,e={fileName:null,fileType:null,isValidImage:!1};z()&&t.events&&!0===t.events.fileOpened.hasDelegate?t.dotNetRef.invokeMethodAsync("FileOpenEventAsync","FileOpened",e):t.trigger("fileOpened",e)},s.prototype.updateCanvas=function(){var t=this.parent,e={fileName:this.fileName,fileType:this.fileType,isValidImage:!0};t.img.srcWidth=t.baseImg.width,t.img.srcHeight=t.baseImg.height;var i={width:0,height:0};t.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:t.img.srcWidth,height:t.img.srcHeight,obj:i}});var n=i;t.img.destLeft=(t.lowerCanvas.clientWidth-n.width)/2,t.img.destTop=(t.lowerCanvas.clientHeight-n.height)/2,this.drawImgToCanvas(n),this.zoomCrop.width=t.img.destWidth,this.zoomCrop.height=t.img.destHeight,t.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:t.img.destWidth,height:t.img.destHeight}}),t.notify("crop",{prop:"setCropDestPoints",onPropertyChange:!1,value:{point:{startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight}}});var o=this.lowerContext.filter;this.lowerContext.filter="none",t.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=o,t.img.destWidth>0&&t.img.destHeight>0&&(t.isImageLoaded=!0),t.isUndoRedo&&""!==t.transform.currFlipState&&t.notify("transform",{prop:"flipImage",onPropertyChange:!1,value:{direction:t.toPascalCase(t.transform.currFlipState)}}),t.disabled&&t.element.setAttribute("class","e-disabled"),t.isImageLoaded&&"0.5"!==t.element.style.opacity&&(z()&&t.events&&!0===t.events.fileOpened.hasDelegate?t.dotNetRef.invokeMethodAsync("FileOpenEventAsync","FileOpened",e):t.trigger("fileOpened",e)),(1!==t.zoomSettings.zoomFactor||t.zoomSettings.zoomPoint)&&t.zoom(t.zoomSettings.zoomFactor,t.zoomSettings.zoomPoint),p(this.initZoomValue)&&(this.initZoomValue=t.zoomSettings.zoomFactor),this.isImageEdited=!1},s.prototype.performCancel=function(t){var e=this.parent;t=t||!1;var i={bool:!1};if(e.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:i}}),i.bool)e.notify("freehand-draw",{prop:"cancelFhd",onPropertyChange:!1}),z()?e.updateToolbar(e.element,"destroyQuickAccessToolbar"):e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}});else if("block"===e.textArea.style.display)e.textArea.style.display="none",e.textArea.value="",e.textArea.style.transform="",this.prevActObj?(e.activeObj=this.prevActObj,this.prevActObj=null):(e.activeObj.strokeSettings=this.tempStrokeSettings,e.activeObj.textSettings=this.tempTextSettings),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),this.isShapeTextInserted&&e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),z()?e.updateToolbar(e.element,"imageLoaded"):e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1});else if(!z()&&document.querySelector("#"+e.element.id+"_sliderWrapper")||z()&&!e.element.querySelector(".e-ie-contextual-slider").classList.contains("e-hidden")||e.currObjType.isFiltered){this.lowerContext.filter=this.tempAdjValue,e.canvasFilter=this.tempAdjValue,e.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.tempAdjValue}}),e.initialAdjustmentValue=this.tempAdjValue,this.lowerContext.filter.split(" ").length>1&&"1"===this.lowerContext.filter.split(" ")[0].split("(")[1].split(")")[0]&&e.notify("filter",{prop:"setBrightnessAdjusted",onPropertyChange:!1,value:{isBrightnessAdjusted:!1}}),e.currentFilter=this.tempFilter,this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.redrawImgWithObj(),e.currObjType.isFiltered=!1;var n={tempAdjustmentLevel:null};e.notify("filter",{prop:"getTempAdjustmentLevel",onPropertyChange:!1,value:{obj:n}}),e.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:C({},n.tempAdjustmentLevel,{},!0)}}),e.notify("undo-redo",{prop:"setUndoRedoStep",onPropertyChange:!1,value:{step:this.tempUndoRedoStep}}),e.upperCanvas.style.cursor=e.cursor="default",e.currObjType.isCustomCrop=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.clearOuterCanvas(this.lowerContext),(e.currSelectionPoint&&"crop-circle"===e.currSelectionPoint.shape||e.isCircleCrop)&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}});var r={type:"main",isApplyBtn:null,isCropping:null,isZooming:null};z()?e.updateToolbar(e.element,"imageLoaded"):(e.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:r})),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}})}else t?(r={type:"main",isApplyBtn:null,isCropping:null,isZooming:null},z()?e.updateToolbar(e.element,"imageLoaded"):e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:r})):(this.cancelItems(),e.togglePan=!1,e.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}));this.isShapeTextInserted=!1,this.isNewPath=!1,z()||(e.notify("toolbar",{prop:"refresh-dropdown-btn",value:{isDisabled:!1}}),e.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}}))},s.prototype.cancelItems=function(){var i,t=this.parent,e=!1;void 0!==t.activeObj.shape&&(i=t.activeObj.shape.split("-")),(void 0===i&&t.currObjType.isCustomCrop||void 0!==i&&"crop"===i[0])&&(e=!0),e&&t.isCropTab&&(t.isCropTab=!1,t.transform.zoomFactor=t.transform.defaultZoomFactor),t.togglePen?this.cancelPen():"text"===t.activeObj.shape?this.cancelText(e):-1!==["rectangle","ellipse","line","arrow","path"].indexOf(t.activeObj.shape)?this.cancelShape():e?this.cancelSelection():(t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}})),t.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),t.upperCanvas.style.cursor=t.cursor="default",t.currObjType.isCustomCrop=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},z()?t.updateToolbar(t.element,"imageLoaded"):t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:!1,isZooming:null}})},s.prototype.cancelPen=function(){var t=this.parent;this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.togglePen=!1,t.upperCanvas.style.cursor=t.cursor="default";var e=C([],t.pointColl,[],!0);t.pointColl={};for(var i=0;i<this.tempFreehandCounter;i++)t.pointColl[i]=e[i];t.freehandCounter=this.tempFreehandCounter,t.notify("freehand-draw",{prop:"setCurrentFreehandDrawIndex",value:{value:this.tempCurrFhdIndex}}),t.activeObj.strokeSettings=this.tempStrokeSettings,t.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:t.activeObj.strokeSettings,strokeColor:null,fillColor:null,strokeWidth:null}}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),t.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}})},s.prototype.cancelText=function(t){var e=this.parent;if(e.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:this.tempTextSettings,fontFamily:null,fontSize:null}}),e.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:this.tempStrokeSettings,strokeColor:null,fillColor:null,strokeWidth:null}}),p(e.activeObj.currIndex))e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height);else{var i={appliedUndoRedoColl:[]};e.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:i}});var n=i.appliedUndoRedoColl.length;this.prevActObj&&i.appliedUndoRedoColl[n-1]&&i.appliedUndoRedoColl[n-1].currentObjColl[i.appliedUndoRedoColl[n-1].currentObjColl.length-1].currIndex===this.prevActObj.currIndex?(e.activeObj=this.prevActObj,this.prevActObj=null):(e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height)),e.activeObj.shape&&"Enter Text"===e.activeObj.keyHistory?(e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("shape",{prop:"draw-shape-text"}),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}})):e.activeObj.shape&&(e.notify("shape",{prop:"redraw-text"}),e.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:e.activeObj}}),!t&&void 0!==e.activeObj.topLeftCircle&&e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),e.clearSelection())}z()?e.updateToolbar(e.element,"destroyQuickAccessToolbar"):e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),this.tempTextSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1}},s.prototype.cancelShape=function(){var t=this.parent;if(t.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:this.tempStrokeSettings,strokeColor:null,fillColor:null,strokeWidth:null}}),p(t.activeObj.currIndex))t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height);else if(this.isNewPath)t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.renderImage();else{var e={appliedUndoRedoColl:[]};t.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:e}});var i=e.appliedUndoRedoColl.length;this.prevActObj&&e.appliedUndoRedoColl[i-1]&&e.appliedUndoRedoColl[i-1].currentObjColl[e.appliedUndoRedoColl[i-1].currentObjColl.length-1].currIndex===this.prevActObj.currIndex?(t.activeObj=this.prevActObj,this.prevActObj=null,t.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:t.activeObj}}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}})):(t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height))}t.currObjType.isDragging=!1,z()?t.updateToolbar(t.element,"destroyQuickAccessToolbar"):t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})},s.prototype.cancelSelection=function(){var t=this.parent;t.cancelCropSelection&&(t.cropObj=C({},t.cancelCropSelection.previousCropObj,{},!0),t.afterCropActions=t.cancelCropSelection.previousObj.afterCropActions,t.notify("undo-redo",{prop:"undoDefault",onPropertyChange:!1,value:{obj:t.cancelCropSelection}}),t.currSelectionPoint=C({},t.cancelCropSelection.previousCropObj.activeObj,!0),t.currSelectionPoint&&p(t.currSelectionPoint.shape)&&(t.currSelectionPoint=null),this.clearOuterCanvas(this.lowerContext),(t.isCircleCrop||t.currSelectionPoint&&"crop-circle"===t.currSelectionPoint.shape)&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}))},s.prototype.updateFlipPan=function(t){var e=this.parent;if(""!==e.transform.currFlipState){var i=this.lowerContext.filter;e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.notify("transform",{prop:"rotatedFlip",onPropertyChange:!1}),this.lowerContext.filter="none",e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=i,this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),t&&this.drawObject("duplicate",t)}},s.prototype.select=function(t,e,i,n,r){var o=this.parent;if(!o.disabled&&o.isImageLoaded){var a={currObj:{}};o.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}});var l=a.currObj;l.objColl=C([],o.objColl,[],!0),l.pointColl=C([],o.pointColl,[],!0),l.afterCropActions=o.afterCropActions;var h={selPointColl:null};o.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:h}}),l.selPointColl=C([],h.selPointColl,[],!0),o.notify("crop",{prop:"setPreviousCropCurrentObj",onPropertyChange:!1,value:{obj:l}}),o.transform.zoomFactor>0&&o.activeObj.shape&&"crop"===o.activeObj.shape.split("-")[0]&&p(this.currSelPoint)&&(this.currSelPoint=C({},o.activeObj,{},!0));var c=!1,u=void 0;void 0!==o.activeObj.shape&&(u=o.activeObj.shape.split("-")),(void 0===u&&o.currObjType.isCustomCrop||void 0!==u&&"crop"===u[0])&&(c=!0);var d={currObj:{}};o.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:d}});var f=d.currObj;if(f.objColl=C([],o.objColl,[],!0),f.pointColl=C([],o.pointColl,[],!0),f.afterCropActions=C([],o.afterCropActions,[],!0),o.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),o.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),o.notify("shape",{prop:"setKeyHistory",onPropertyChange:!1,value:{keyHistory:""}}),this.upperContext.clearRect(0,0,o.upperCanvas.width,o.upperCanvas.height),o.upperCanvas.style.display="block",o.currSelectionPoint||0!==o.transform.defaultZoomFactor||0!==o.transform.degree&&0!==o.panPoint.totalPannedInternalPoint.x&&0!==o.panPoint.totalPannedInternalPoint.y&&!c){if(o.isCircleCrop=!1,0!==o.transform.defaultZoomFactor){var v=o.isCropTab;o.isCropTab=!1,o.notify("transform",{prop:"resetZoom",onPropertyChange:!1}),o.isCropTab=v,this.resetPanPoints()}this.cancelObjColl=C([],o.objColl,[],!0),this.cancelPointColl=C([],o.pointColl,[],!0),o.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),o.isCropTab=!0,o.isCircleCrop=!1,o.notify("crop",{prop:"setCurrSelPoints",onPropertyChange:!1,value:{isSetDimension:!0}}),o.transform.zoomFactor=o.transform.cropZoomFactor,p(o.cropObj.activeObj.shape)&&(o.currObjType.shape="crop-"+t.toLowerCase(),this.drawNewSelection(t,e,i,n,r))}else"custom"===t&&(o.currObjType.shape=""),this.drawNewSelection(t,e,i,n,r)}},s.prototype.drawNewSelection=function(t,e,i,n,r){var a,o=this.parent,l="crop-"+t;"crop-custom"===l.toLowerCase()?(""===o.currObjType.shape||"crop-custom"===o.currObjType.shape)&&this.drawCustomSelection("crop-custom",e,i,n,r):"crop-canvas"===l.toLowerCase()?(o.upperCanvas.style.display="block",o.notify("selection",{prop:"setDragCanvas",value:{bool:!0}})):(o.currObjType.isCustomCrop=!1,o.currObjType.shape=l.toLowerCase(),n&&r?a={startX:e,startY:i,endX:e+n,endY:i+r,width:n,height:r}:n&&"crop-circle"===l&&(a={startX:e,startY:i,endX:e+n,endY:i+n,width:n,height:n}),o.activeObj.shape=l.toLowerCase(),this.updateSelectionInsert(a))},s.prototype.updateSelectionInsert=function(t){var e=this,i=this.parent,n=i.activeObj.activePoint,r={shapeSettingsObj:{}};i.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:r}});var o={type:i.getSelectionType(r.shapeSettingsObj.type),startX:r.shapeSettingsObj.startX,startY:r.shapeSettingsObj.startY,width:r.shapeSettingsObj.width,height:r.shapeSettingsObj.height},a={action:"insert",previousSelectionSettings:o,currentSelectionSettings:o};z()&&i.events&&!0===i.events.onSelectionResizeStart.hasDelegate?i.dotNetRef.invokeMethodAsync("SelectionEventAsync","OnSelectionResizeStart",a).then(function(l){i.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:l.currentSelectionSettings}}),"Custom"===l.currentSelectionSettings.type?e.drawObject("duplicate",i.activeObj,null,null,!0):((0!==n.startX||0!==n.startY||0!==n.width||0!==n.height)&&(t={startX:n.startX,startY:n.startY,endX:n.endX,endY:n.endY,width:n.width,height:n.height}),e.drawObject("duplicate",null,!0,t))}):(i.trigger("selectionChanging",a),i.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:a.currentSelectionSettings}}),"Custom"===a.currentSelectionSettings.type?this.drawObject("duplicate",i.activeObj,null,null,!0):((0!==n.startX||0!==n.startY||0!==n.width||0!==n.height)&&(t={startX:n.startX,startY:n.startY,endX:n.endX,endY:n.endY,width:n.width,height:n.height}),this.drawObject("duplicate",null,!0,t)))},s.prototype.drawCustomSelection=function(t,e,i,n,r){var o=this.parent,a=o.activeObj.activePoint;if(o.currObjType.isCustomCrop=!0,this.upperContext.clearRect(0,0,o.upperCanvas.width,o.upperCanvas.height),o.currObjType.shape=o.activeObj.shape=t.toLowerCase(),p(e)||p(i)||p(n)||p(r)){if(p(o.transform.zoomFactor)||0===o.transform.zoomFactor){var l=o.img.destLeft,h=o.img.destTop,c=o.img.destWidth,u=o.img.destHeight,d=o.lowerCanvas.width,f=o.lowerCanvas.height,v=a;l>=0&&h>=0?(v.startX=l,v.startY=h,v.endX=l+c,v.endY=h+u):l>=0?(v.startX=l,v.startY=7.5,v.endX=l+c,v.endY=f-15):h>=0?(v.startX=7.5,v.startY=h,v.endX=d-15,v.endY=h+u):(v.startX=7.5,v.startY=7.5,v.endX=d-15,v.endY=f-15)}else{var g=o.img.destLeft,b=o.img.destTop,M=o.img.destWidth,w=o.img.destHeight,S=o.lowerCanvas.width,I=o.lowerCanvas.height,P=a;P.startX=Math.max(g>0?g:7.5,g),P.startY=Math.max(b>0?b:7.5,b),P.endX=Math.min(g+M+15<S?g+M-15:S-15,g+M),P.endY=Math.min(b+w+15<I?b+w-15:I-15,b+w)}var H=o.img.destLeft,G=o.img.destTop,ee=o.img.destWidth,ue=o.img.destHeight,Je=o.lowerCanvas.clientWidth,U=o.lowerCanvas.clientHeight,$=a;$.startX=Math.max($.startX,H),$.startY=Math.max($.startY,G),$.endX=Math.min($.endX,H+ee),$.endY=Math.min($.endY,G+ue),$.startX===H&&H+ee>Je&&($.endX=Je-15),$.startY===G&&G+ue>U&&($.endY=U-15),o.activeObj=this.updateWidthHeight(o.activeObj),this.updateActiveObject(a,o.activeObj)}else a.startX=e,a.startY=i,a.endX=e+n,a.endY=i+r,a.width=n,a.height=r;this.updateSelectionInsert()},s.prototype.callUpdateCurrTransState=function(){var t=this.parent,e=C([],t.objColl,[],!0),i=C({},t.activeObj,{},!0);t.objColl=[],t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isRotateZoom=!0,this.updateCurrTransState("initial"),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),0===t.transform.degree&&t.rotateFlipColl.length>0&&(t.img.destLeft+=t.panPoint.totalPannedPoint.x,t.img.destTop+=t.panPoint.totalPannedPoint.y),t.img.destLeft+=t.panPoint.totalPannedInternalPoint.x,t.img.destTop+=t.panPoint.totalPannedInternalPoint.y;var n=this.lowerContext.filter;0===t.transform.degree&&t.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),t.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(t.baseImg,t.img.srcLeft,t.img.srcTop,t.img.srcWidth,t.img.srcHeight,t.img.destLeft,t.img.destTop,t.img.destWidth,t.img.destHeight),this.updateCurrTransState("reverse"),0===t.transform.degree&&t.rotateFlipColl.length>0&&(t.img.destLeft+=t.panPoint.totalPannedPoint.x,t.img.destTop+=t.panPoint.totalPannedPoint.y),this.isRotateZoom=!1,t.objColl=e;var r=t.togglePen;t.togglePen=!1,this.lowerContext.filter="none",t.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),t.img.destLeft+=t.panPoint.totalPannedInternalPoint.x,t.img.destTop+=t.panPoint.totalPannedInternalPoint.y,t.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),t.img.destLeft-=t.panPoint.totalPannedInternalPoint.x,t.img.destTop-=t.panPoint.totalPannedInternalPoint.y,t.togglePen=r,this.lowerContext.filter=n,t.activeObj=i},s.prototype.resetPanPoints=function(){this.parent.panPoint.totalPannedPoint={x:0,y:0},this.parent.panPoint.totalPannedClientPoint={x:0,y:0},this.parent.panPoint.totalPannedInternalPoint={x:0,y:0}},s.prototype.setClientTransDim=function(t){var e=this.parent;if(e.transform.degree%90==0&&e.transform.degree%180!=0){e.img.destLeft=(e.lowerCanvas.width-e.img.destHeight)/2,e.img.destTop=(e.lowerCanvas.height-e.img.destWidth)/2;var i=e.img.destWidth;e.img.destWidth=e.img.destHeight,e.img.destHeight=i}else p(t)&&(e.img.destLeft=(e.lowerCanvas.width-e.img.destWidth)/2,e.img.destTop=(e.lowerCanvas.height-e.img.destHeight)/2)},s.prototype.redrawImgWithObj=function(){var t=this.parent;if(this.lowerContext.filter=t.canvasFilter,0!==t.rotateFlipColl.length){var i=C({},t.panPoint.totalPannedInternalPoint,{},!0),n={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight};this.callUpdateCurrTransState(),t.panPoint.totalPannedInternalPoint=i,t.img.destLeft=n.startX,t.img.destTop=n.startY,t.img.destWidth=n.width,t.img.destHeight=n.height}else this.callUpdateCurrTransState();t.isCircleCrop&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}});var r=this.lowerContext.filter;this.lowerContext.filter=t.getDefaultFilter(),t.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),t.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=r},s.prototype.setCurrentObj=function(t){var e=this.parent,i=!!t;e.transform.cropZoomFactor=(t=t||e.cropObj).cropZoom,e.transform.defaultZoomFactor=t.defaultZoom,e.transform.zoomFactor=i?t.activeObj.shape&&"crop"===t.activeObj.shape.split("-")[0]?t.cropZoom:t.defaultZoom:t.cropZoom,e.setProperties({zoomSettings:{zoomFactor:t.zoomFactor}},!0),e.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:t.previousZoomValue}}),e.panPoint.totalPannedPoint=C({},t.totalPannedPoint,{},!0),e.panPoint.totalPannedClientPoint=C({},t.totalPannedClientPoint,{},!0),e.panPoint.totalPannedInternalPoint=C({},t.totalPannedInternalPoint,{},!0);var n=C({},t.tempFlipPanPoint,{},!0);e.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:n}}),e.rotateFlipColl=C([],t.rotateFlipColl,[],!0),e.transform.degree=t.degree,e.transform.currFlipState=t.currFlipState,e.img.destLeft=t.destPoints.startX,e.img.destTop=t.destPoints.startY,e.img.destWidth=t.destPoints.width,e.img.destHeight=t.destPoints.height,e.img.srcLeft=t.srcPoints.startX,e.img.srcTop=t.srcPoints.startY,e.img.srcWidth=t.srcPoints.width,e.img.srcHeight=t.srcPoints.height,t.afterCropActions&&(e.afterCropActions=t.afterCropActions),this.lowerContext.filter=t.filter,e.notify("filter",{prop:"setBrightnessAdjusted",onPropertyChange:!1,value:{isBrightnessAdjusted:!1}});var o,r=e.isCircleCrop;p(e.currSelectionPoint)?o=null:(o=C({},e.currSelectionPoint,{},!0),e.currSelectionPoint=null),e.isCircleCrop=!1,this.drawCropSelectionImage(t,!1),0!==e.transform.degree&&(e.notify("transform",""===e.transform.currFlipState?{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}:{prop:"drawPannedImage",value:{xDiff:0,yDiff:0}}),e.img.destLeft=t.destPoints.startX,e.img.destTop=t.destPoints.startY,e.panPoint.totalPannedClientPoint=C({},t.totalPannedClientPoint,{},!0),e.panPoint.totalPannedInternalPoint=C({},t.totalPannedInternalPoint,{},!0)),e.activeObj=C({},t.activeObj,{},!0),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),0!==e.activeObj.activePoint.width&&0!==e.activeObj.activePoint.height&&this.drawObject("duplicate",null,null,null,!0);var a=C({},t.activeObj,{},!0),l=!1;if(e.afterCropActions.length>0){var h={collection:e.afterCropActions};e.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:e.afterCropActions,isRotateFlipCollection:null,obj:h}}),e.afterCropActions=h.collection}var c=C([],e.afterCropActions,[],!0);if(!i&&c.length>0){l=!0;for(var u=0;u<c.length;u++)("horizontalflip"===c[u]||"verticalflip"===c[u])&&(e.activeObj=C({},o,{},!0),this.rotatedFlipCropSel=!0),e.notify("transform",{prop:"updateTransform",onPropertyChange:!1,value:{text:c[u]}});a=C({},e.activeObj,{},!0),this.resetPanPoints(),e.activeObj=a,this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),0!==e.activeObj.activePoint.width&&0!==e.activeObj.activePoint.height&&this.drawObject("duplicate",null,null,null,!0),t.degree!==e.transform.degree&&(e.transform.cropZoomFactor=null,e.transform.zoomFactor=0),e.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),this.rotatedFlipCropSel&&(this.rotatedFlipCropSel=!1)}e.afterCropActions=c,!this.isCancelAction&&!l&&(e.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.img.destLeft=t.destPoints.startX,e.img.destTop=t.destPoints.startY),e.activeObj=a,e.isCircleCrop=r,p(o)?e.currSelectionPoint=null:(e.currSelectionPoint=C({},o,{},!0),e.currSelectionPoint&&p(e.currSelectionPoint.shape)&&(e.currSelectionPoint=null))},s.prototype.drawCropSelectionImage=function(t,e){var i=this.parent,n=this.lowerContext.filter;i.clearContext(this.lowerContext),i.clearContext(this.upperContext),this.lowerContext.setTransform(1,0,0,1,0,0),e?this.updateCurrTransState("initial"):this.setTransformColl(this.lowerContext,"initial"),i.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),this.lowerContext.drawImage(i.baseImg,i.img.srcLeft,i.img.srcTop,i.img.srcWidth,i.img.srcHeight,i.img.destLeft,i.img.destTop,i.img.destWidth,i.img.destHeight),e?this.updateCurrTransState("reverse"):this.setTransformColl(this.lowerContext,"reverse"),i.img.destLeft=i.cropObj.destPoints.startX,i.img.destTop=i.cropObj.destPoints.startY;var r=C({},t.activeObj,{},!0);if(this.lowerContext.filter="none",this.isCancelAction)i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}});else{i.img.destLeft=t.destPoints.startX,i.img.destTop=t.destPoints.startY,i.img.destWidth=t.destPoints.width,i.img.destHeight=t.destPoints.height,i.img.srcLeft=t.srcPoints.startX,i.img.srcTop=t.srcPoints.startY,i.img.srcWidth=t.srcPoints.width,i.img.srcHeight=t.srcPoints.height;var o={startX:i.img.destLeft,startY:i.img.destTop,width:i.img.destWidth,height:i.img.destHeight};i.img.destLeft=t.activeObj.activePoint.startX,i.img.destTop=t.activeObj.activePoint.startY,i.img.destWidth=t.activeObj.activePoint.width,i.img.destHeight=t.activeObj.activePoint.height,i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.img.destLeft=o.startX,i.img.destTop=o.startY,i.img.destWidth=o.width,i.img.destHeight=o.height}i.activeObj=r,this.lowerContext.filter=n},s.prototype.performPointZoom=function(t,e,i){var n=this.parent,r=(t-n.img.destLeft)/n.img.destWidth,o=(e-n.img.destTop)/n.img.destHeight,a=n.isUndoRedo;if(n.isUndoRedo=!0,n.setProperties({zoomSettings:{zoomPoint:{x:t,y:e}}},!0),"zoomIn"===i?n.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null}}):"zoomOut"===i&&n.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null}}),n.isUndoRedo=a,n.transform.zoomFactor>0){var l=n.img.destLeft,h=n.img.destTop,c=C({},n.activeObj,{},!0);if(0===n.transform.degree)n.img.destLeft=t-r*n.img.destWidth,n.img.destTop=e-o*n.img.destHeight,this.drawZoomPanImage(n.img.destLeft-l,n.img.destTop-h);else{var u=n.isCropTab;n.isCropTab=!0;var d=C([],n.objColl,[],!0),f=C([],n.pointColl,[],!0);n.objColl=[],n.pointColl=[],n.freehandCounter=0;var v={selPointColl:null};n.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:v}});var g=v.selPointColl;n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),n.panPoint.currentPannedPoint={x:t-r*n.img.destWidth-l,y:e-o*n.img.destHeight-h},n.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}),n.isCropTab=u,n.objColl=d,n.pointColl=f,n.freehandCounter=n.pointColl.length,n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:g}}}),n.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:n.panPoint.currentPannedPoint.x,yDiff:n.panPoint.currentPannedPoint.y,panRegion:""}}),n.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:n.panPoint.currentPannedPoint.x,yDiff:n.panPoint.currentPannedPoint.y,panRegion:""}})}this.adjustPanning(c),n.activeObj=c,0!==n.activeObj.activePoint.width&&0!==n.activeObj.activePoint.height&&this.drawObject("duplicate",null,null,null,!0)}},s.prototype.adjustPanning=function(t){var e=this.parent;if(0!==t.activePoint.width&&0!==t.activePoint.height){var i=e.img.destLeft,n=e.img.destTop,r={x:0,y:0};if(e.img.destLeft>t.activePoint.startX?r.x=e.img.destLeft-t.activePoint.startX:e.img.destLeft+e.img.destWidth<t.activePoint.startX+t.activePoint.width&&(r.x=e.img.destLeft+e.img.destWidth-(t.activePoint.startX+t.activePoint.width)),e.img.destTop>t.activePoint.startY?r.y=e.img.destTop-t.activePoint.startY:e.img.destTop+e.img.destHeight<t.activePoint.startY+t.activePoint.height&&(r.y=e.img.destTop+e.img.destHeight-(t.activePoint.startY+t.activePoint.height)),0===e.transform.degree)e.img.destLeft-=r.x,e.img.destTop-=r.y,this.drawZoomPanImage(e.img.destLeft-i,e.img.destTop-n);else{var o=e.isCropTab;e.isCropTab=!0;var a=C([],e.objColl,[],!0),l=C([],e.pointColl,[],!0);e.objColl=[],e.pointColl=[],e.freehandCounter=0;var h={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:h}});var c=h.selPointColl;e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),e.img.destLeft-=r.x,e.img.destTop-=r.y,e.panPoint.currentPannedPoint={x:e.img.destLeft-i,y:e.img.destTop-n},e.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}),e.isCropTab=o,e.objColl=a,e.pointColl=l,e.freehandCounter=e.pointColl.length,e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:c}}}),e.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:e.panPoint.currentPannedPoint.x,yDiff:e.panPoint.currentPannedPoint.y,panRegion:""}}),e.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:e.panPoint.currentPannedPoint.x,yDiff:e.panPoint.currentPannedPoint.y,panRegion:""}})}}},s.prototype.drawZoomPanImage=function(t,e){var i=this.parent;i.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:t,yDiff:e,panRegion:""}}),i.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:t,yDiff:e,panRegion:""}}),this.renderImage(!0);var n={width:0,height:0};i.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i.img.srcWidth,height:i.img.srcHeight,obj:n}});var r=n;r.width+=r.width*i.transform.zoomFactor,r.height+=r.height*i.transform.zoomFactor,i.panPoint.totalPannedPoint.x+=t,i.panPoint.totalPannedPoint.y+=e,i.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:{x:0,y:0}}})},s.prototype.openNewImage=function(){var t=this.parent,e=t.inMemoryCanvas.getContext("2d");ln(t.element),t.element.style.opacity="0.5";var i=document.querySelector("#"+t.element.id+"_currPos");i&&(i.style.display="none");var n={defToolbarItems:null};if(z())t.element.querySelector("#"+t.element.id+"_toolbarArea")&&(t.toolbarHeight=t.element.querySelector("#"+t.element.id+"_toolbarArea").clientHeight);else if(t.notify("toolbar",{prop:"getDefToolbarItems",value:{obj:n}}),0===n.defToolbarItems.length&&p(document.getElementById(t.element.id+"_toolbar"))){var r=t.element.querySelector("#"+t.element.id+"_toolbarArea").clientHeight;t.notify("toolbar",{prop:"setToolbarHeight",value:{height:r}})}if(t.reset(),t.update(),t.transform.degree=0,t.transform.zoomFactor=0,t.isImageLoaded=!1,t.currSelectionPoint=null,"string"==typeof this.openURL){var a=this.openURL.split(".");if(a.length>1?(a=a[a.length-2].split("/"),this.fileName=a[a.length-1]):this.fileName="ImageEditor",this.fileType=this.getFileExtensionFromURL(this.openURL),this.fileType){this.fileType=t.toPascalCase(this.fileType);var l=this.fileType.toLowerCase();("jpg"===l||"jpeg"===l)&&(this.fileType="Jpeg",l="jpeg"),"jpeg"!==l&&"png"!==l&&"svg"!==l&&(this.fileType=null)}this.imageOnLoad(this.openURL)}else this.fileName="ImageEditor",this.fileType=null,t.lowerCanvas=document.querySelector("#"+t.element.id+"_lowerCanvas"),t.upperCanvas=document.querySelector("#"+t.element.id+"_upperCanvas"),this.lowerContext=t.lowerCanvas.getContext("2d"),this.upperContext=t.upperCanvas.getContext("2d"),t.clearContext(this.lowerContext),t.clearContext(this.upperContext),t.clearContext(e),t.inMemoryCanvas.width=this.openURL.width,t.inMemoryCanvas.height=this.openURL.height,e.putImageData(this.openURL,0,0),t.baseImg.src=t.inMemoryCanvas.toDataURL()},s.prototype.dlgBtnClick=function(){var t=this.parent;t.export(),this.isFileChanged?(t.isImageLoaded=this.isFileChanged=!1,t.reset(),this.checkToolbarTemplate(this.inputElem,this.openURL)):(this.reset(),this.openNewImage()),z()||Qe(document.getElementById(t.element.id+"_dialog"),"dialog").destroy(),this.isImageEdited=!1},s.prototype.dlgCloseBtnClick=function(){var t=this.parent;this.baseImgSrc=t.baseImg.src,this.isFileChanged?(t.isImageLoaded=this.isFileChanged=!1,t.reset(),this.checkToolbarTemplate(this.inputElem,this.openURL)):(this.reset(),this.openNewImage()),z()||Qe(document.getElementById(t.element.id+"_dialog"),"dialog").destroy(),this.isImageEdited=!1},s.prototype.showDialogPopup=function(){this.parent.element.querySelector("#"+this.parent.element.id+"_dialog").style.display="block",new eE({header:"Confirm Save Changes",closeOnEscape:!0,content:"<span>Do you want to save the changes you made to the image?</span>",target:document.getElementById("target"),width:"285px",isModal:!0,animationSettings:{effect:"Zoom"},close:this.dlgCloseBtnClick.bind(this),buttons:[{click:this.dlgCloseBtnClick.bind(this),buttonModel:{content:"No",iconCss:"e-icons e-close"}},{click:this.dlgBtnClick.bind(this),buttonModel:{content:"Yes",isPrimary:!0,iconCss:"e-icons e-check"}}]}).appendTo("#"+this.parent.element.id+"_dialog")},s.prototype.restoreOldImage=function(){this.parent.isImageLoaded?(this.reset(),this.openNewImage()):this.openNewImage()},s.prototype.open=function(t){this.parent.disabled||(this.openURL=t,this.restoreOldImage())},s.prototype.getInitialLoaded=function(t){t.isInitialLoaded=this.isInitialLoading},s.prototype.getFileExtensionFromURL=function(t){var e=t.lastIndexOf(".");return-1!==e?t.slice(e+1).toLowerCase():null},s.prototype.fileSelect=function(t,e){var i=this.parent;if(!i.disabled){var n=e.target.files[0],r=n,o=r.name&&r.name.split(".")[1].toLowerCase();if(o&&-1===["jpg","jpeg","png","svg"].indexOf(o))return void this.errorLoading();if(ln(i.element),i.element.style.opacity="0.5",this.inputElem=t,o=r.name&&r.name.split(".")[1]){var a=i.toPascalCase(o);this.fileType="JPG"===a||"Jpg"===a?"Jpeg":a}else this.fileType=null;var h=window.URL.createObjectURL(n);this.openURL=h,i.isImageLoaded&&(this.isImageEdited||i.pointColl.length>0||i.objColl.length>0)?(this.isFileChanged=!0,z()?i.dotNetRef.invokeMethodAsync("UpdateDialog"):this.showDialogPopup()):this.checkToolbarTemplate(t,h)}},s.prototype.checkToolbarTemplate=function(t,e){var i=this.parent;p(i.toolbarTemplate)&&(i.reset(),i.update()),this.fileName=t.value.split("\\")[t.value.split("\\").length-1],this.fileName=this.fileName.split(".")[0],this.imageOnLoad(e.toString()),t.value=""},s.prototype.moveToSelectionRange=function(t,e){var i=this.parent;if(i.activeObj.shape){for(var n=!1,r=0;r<i.rotateFlipColl.length;r++)if(90===i.rotateFlipColl[r]||-90===i.rotateFlipColl[r]){n=!0;break}if(n){var o=i.transform.zoomFactor;if(i.objColl.push(i.activeObj),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),"rotateleft"===t||"rotateright"===t)if(i.transform.degree%90==0&&i.transform.degree%180!=0)if(i.objColl[i.objColl.length-1].activePoint.width<e.activePoint.height)for(r=2;r<i.zoomSettings.maxZoomFactor;r++){if(i.objColl[i.objColl.length-1].activePoint.width>=e.activePoint.height||this.isSelectionBiggerThanCanvas(i.objColl[i.objColl.length-1])||this.isSelectionOutsideCanvas(i.objColl[i.objColl.length-1])){p(o)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null}});break}i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:o+=.1,zoomPoint:null}})}else for(r=2;r<i.zoomSettings.maxZoomFactor;r++){if(i.objColl[i.objColl.length-1].activePoint.width>=e.activePoint.height||this.isSelectionBiggerThanCanvas(i.objColl[i.objColl.length-1])||this.isSelectionOutsideCanvas(i.objColl[i.objColl.length-1])){p(o)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null}});break}i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:o-=.1,zoomPoint:null}})}else if(i.objColl[i.objColl.length-1].activePoint.height<e.activePoint.width)for(r=2;r<i.zoomSettings.maxZoomFactor;r++){if(i.objColl[i.objColl.length-1].activePoint.height>=e.activePoint.width||this.isSelectionBiggerThanCanvas(i.objColl[i.objColl.length-1])||this.isSelectionOutsideCanvas(i.objColl[i.objColl.length-1])){p(o)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null}});break}i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:o+=.1,zoomPoint:null}})}else for(r=2;r<i.zoomSettings.maxZoomFactor;r++){if(i.objColl[i.objColl.length-1].activePoint.height>=e.activePoint.width||this.isSelectionBiggerThanCanvas(i.objColl[i.objColl.length-1])||this.isSelectionOutsideCanvas(i.objColl[i.objColl.length-1])){p(o)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null}});break}i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:o-=.1,zoomPoint:null}})}var a=i.lowerCanvas.clientWidth/2-(i.objColl[i.objColl.length-1].activePoint.startX+i.objColl[i.objColl.length-1].activePoint.width/2),l=i.lowerCanvas.clientHeight/2-(i.objColl[i.objColl.length-1].activePoint.startY+i.objColl[i.objColl.length-1].activePoint.height/2);0===i.transform.degree?(i.img.destLeft+=a,i.img.destTop+=l,i.notify("transform",{prop:"drawPannImage",value:{point:{x:a,y:l}}})):(i.panPoint.currentPannedPoint={x:a,y:l},i.notify("transform",{prop:"drawPannedImage",value:{xDiff:a,yDiff:l}}),i.panPoint.currentPannedPoint={x:0,y:0}),i.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}}),i.activeObj=C({},i.objColl[i.objColl.length-1]),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}})}}},s.prototype.isSelectionBiggerThanCanvas=function(t){var e=!1;return(t.activePoint.startX<=this.parent.img.destLeft||t.activePoint.startY<=this.parent.img.destTop||t.activePoint.endX>=this.parent.img.destLeft+this.parent.img.destWidth||t.activePoint.endY>=this.parent.img.destTop+this.parent.img.destHeight)&&(e=!0),e},s.prototype.isSelectionOutsideCanvas=function(t){var e=!1;return(t.activePoint.height<this.parent.lowerCanvas.height-this.parent.toolbarHeight||t.activePoint.width<this.parent.lowerCanvas.width)&&(e=!0),e},s}(),ij=function(){function s(t){this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("export",this.export,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("export",this.export),this.parent.off("destroyed",this.destroy)},s.prototype.export=function(t){if(z()){var e={shape:""};this.parent.notify("selection",{prop:"getCurrentDrawingShape",onPropertyChange:!1,value:{obj:e}}),""!==e.shape&&(this.parent.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),this.parent.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))}else this.parent.notify("toolbar",{prop:"refreshShapeDrawing",onPropertyChange:!1});switch(this.updatePvtVar(),t.prop){case"export":this.exportImg(t.value.type,t.value.fileName);break;case"exportToCanvas":this.exportToCanvas(t.value.object)}},s.prototype.getModuleName=function(){return"export"},s.prototype.updatePvtVar=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d"))},s.prototype.exportImg=function(t,e){var i=this,n=this.parent,r={fileName:""};n.notify("draw",{prop:"getFileName",onPropertyChange:!1,value:{obj:r}});var o=r.fileName;if(!n.disabled&&n.isImageLoaded){var a={bool:!1};n.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:a}}),a.bool&&n.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),n.togglePen&&(n.currObjType.isZoomed=!0,n.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}})),"block"===n.textArea.style.display&&n.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),n.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),this.lowerContext.filter=this.parent.canvasFilter,t=t||"Png",n.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}});var h={cancel:!1,fileName:e||o,fileType:t};z()&&n.events&&!0===n.events.saving.hasDelegate?n.dotNetRef.invokeMethodAsync("BeforeSaveEventAsync","BeforeSave",h).then(function(c){i.beforeSaveEvent(c,t,e,o)}):(n.trigger("beforeSave",h),this.beforeSaveEvent(h,t,e,o))}},s.prototype.beforeSaveEvent=function(t,e,i,n){var r=this.parent;if(!t.cancel){r.currObjType.isSave=!0,i=t.fileName?t.fileName:i;var o=e.toLowerCase();i=i||n,"svg"===o?this.toSVGImg(i):this.toBlobFn(i,o),r.trigger("saved",{fileName:i||n,fileType:e}),z()||r.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),r.lowerCanvas.style.left=r.upperCanvas.style.left="",r.lowerCanvas.style.top=r.upperCanvas.style.top="",r.lowerCanvas.style.maxWidth=r.upperCanvas.style.maxWidth="",r.lowerCanvas.style.maxHeight=r.upperCanvas.style.maxHeight=""}},s.prototype.toSVGImg=function(t){var e=this.parent;ln(e.element),e.element.style.opacity="0.5";var i=this.exportToCanvas(),n=i.toDataURL();Ri(e.element),e.element.style.opacity="1";var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width",i.style.maxWidth),r.setAttribute("height",i.style.maxHeight);var a=document.createElementNS("http://www.w3.org/2000/svg","image");a.setAttributeNS(null,"height",i.height.toString()),a.setAttributeNS(null,"width",i.width.toString()),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n),r.appendChild(a);var f="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+i.width+'" height="'+i.height+'">'+r.innerHTML+"</svg>");return null===t?f:(this.downloadImg(f,t+".svg"),null)},s.prototype.toBlobFn=function(t,e){var i=this,n=this.parent;ln(n.element),n.element.style.opacity="0.5",this.exportToCanvas().toBlob(function(o){var a=URL.createObjectURL(o);i.downloadImg(a,t+"."+e),Ri(n.element),n.element.style.opacity="1"},"image/png")},s.prototype.exportToCanvas=function(t){var i,n,e=this.parent;e.currSelectionPoint?(i=e.img.srcWidth,n=e.img.srcHeight):(i=e.baseImg.width,n=e.baseImg.height);var r={width:0,height:0};e.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:r,dimension:{width:i,height:n}}});var o=r,a=this.lowerContext.filter;if("none"!==this.lowerContext.filter){var l=this.lowerContext.filter.split(" "),h=parseFloat(l[5].split("(")[1]);l[5]="blur("+(h*=(o.width+o.height)/2)+"px)",this.lowerContext.filter=l.join(" ")}var c=e.createElement("canvas",{id:e.element.id+"_tempCanvas",attrs:{name:"canvasImage"}}),u=c.getContext("2d");u.filter=this.lowerContext.filter,c.width=i,c.height=n;var d={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i,height:n,obj:d}});var f=d;c.style.maxWidth=f.width+"px",c.style.maxHeight=f.height+"px",u.filter=this.lowerContext.filter;var v=this.lowerContext.filter;if(e.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),u.drawImage(e.baseImg,e.img.srcLeft,e.img.srcTop,e.img.srcWidth,e.img.srcHeight,0,0,i,n),this.lowerContext.filter=v,(0!==e.transform.degree||""!==e.transform.currFlipState)&&(this.updateSaveContext(u),this.exportTransformedImage(u)),e.objColl.length>0){var g=u.filter;u.filter="none";for(var b=C([],e.objColl,[],!0),M=0,w=e.objColl.length;M<w;M++){var S=e.objColl[M].activePoint;S.startX-=e.img.destLeft,S.startY-=e.img.destTop,S.endX-=e.img.destLeft,S.endY-=e.img.destTop,S.width=S.endX-S.startX,S.height=S.endY-S.startY,S.startX*=o.width,S.startY*=o.height,S.endX*=o.width,S.endY*=o.height,S.width=S.endX-S.startX,S.height=S.endY-S.startY,e.objColl[M].strokeSettings.strokeWidth*=(o.width+o.height)/2,"text"===e.objColl[M].shape&&(e.objColl[M].textSettings.fontSize*=(o.width+o.height)/2),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"saveContext",obj:e.objColl[M],isCropRatio:null,points:null,isPreventDrag:!0,saveContext:u,isPreventSelection:null}})}u.filter=g,e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.objColl=b}if(e.freehandCounter>0){for(var I=C({},e.pointColl,{},!0),P=0;P<e.freehandCounter;P++){e.points=C([],e.pointColl[P].points,[]),e.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}}),w=e.points.length,e.pointColl[P].strokeWidth*=(o.width+o.height)/2;for(var H=0;H<w;H++)e.points[H].x=(e.points[H].x-e.img.destLeft)*o.width,e.points[H].y=(e.points[H].y-e.img.destTop)*o.height}e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:u,points:null}}),e.pointColl=I}return e.isCircleCrop&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:u,isSave:!0,isFlip:null}}),this.lowerContext.filter=a,e.canvasFilter=a,t&&(t.canvas=c),c},s.prototype.downloadImg=function(t,e){var i=document.createElement("a");i.href=t,i.target="_parent",i.download=e,(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i)},s.prototype.exportTransformedImage=function(t){for(var e=this.parent,i=e.transform.degree,n=0,r=e.rotateFlipColl.length;n<r;n++){var o=e.rotateFlipColl[n];"number"==typeof o?this.exportRotate(t,o):"horizontal"===o?this.exportFlip(t,!0,!1):"vertical"===o&&this.exportFlip(t,!1,!0)}e.transform.degree=i},s.prototype.exportRotate=function(t,e){var i=this.parent;this.setMaxDim(i.transform.degree,t.canvas),t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(Math.PI/180*e),t.drawImage(i.inMemoryCanvas,-t.canvas.height/2,-t.canvas.width/2,t.canvas.height,t.canvas.width),this.updateSaveContext(t)},s.prototype.exportFlip=function(t,e,i){e&&(t.translate(t.canvas.width,0),t.scale(-1,1)),i&&(t.translate(0,t.canvas.height),t.scale(1,-1)),t.drawImage(this.parent.inMemoryCanvas,0,0),this.updateSaveContext(t)},s.prototype.updateSaveContext=function(t){var e=this.parent.inMemoryCanvas.getContext("2d");t.setTransform(1,0,0,1,0,0);var i=t.getImageData(0,0,t.canvas.width,t.canvas.height);this.parent.inMemoryCanvas.width=i.width,this.parent.inMemoryCanvas.height=i.height,e.putImageData(i,0,0)},s.prototype.setMaxDim=function(t,e){var i,n;t%90==0&&t%180!=0?(i=p(this.parent.currSelectionPoint)?this.parent.baseImg.height:this.parent.img.srcHeight,n=p(this.parent.currSelectionPoint)?this.parent.baseImg.width:this.parent.img.srcWidth):(t%180==0||0===t)&&(i=p(this.parent.currSelectionPoint)?this.parent.baseImg.width:this.parent.img.srcWidth,n=p(this.parent.currSelectionPoint)?this.parent.baseImg.height:this.parent.img.srcHeight),e.width=i,e.height=n;var r={width:0,height:0};this.parent.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i,height:n,obj:r}});var o=r;e.style.maxWidth=o.width+"px",e.style.maxHeight=o.height+"px"},s}(),nj=function(){function s(t){this.adjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,sharpen:!1,bw:!1},this.tempAdjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,sharpen:!1,bw:!1},this.adjustmentValue="",this.isBrightnessAdjusted=!1,this.appliedFilter="",this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("filter",this.filter,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("filter",this.filter),this.parent.off("destroyed",this.destroy)},s.prototype.filter=function(t){switch(this.updatePrivateVariables(),t.prop){case"finetuneImage":this.finetuneImage(t.value.option,t.value.value);break;case"applyImageFilter":this.setFilter(t.value.option);break;case"update-finetunes":this.updateFinetunes();break;case"updateBrightFilter":this.updateBrightFilter();break;case"set-adjustment":this.setAdjustment(t.value.operation);break;case"update-filter":this.updateFilter(t.value.operation,t.value.filter);break;case"initFilter":this.initFilter();break;case"setCurrAdjValue":this.setCurrAdjValue(t.value.type,t.value.value);break;case"updateAdj":this.updateAdj(t.value.type,t.value.value,t.value.isPreview,t.value.ctx);break;case"getCurrentObj":this.getCurrentObj(t.value.object);break;case"getAdjustmentLevel":t.value.obj.adjustmentLevel=this.adjustmentLevel;break;case"setAdjustmentLevel":this.adjustmentLevel=t.value.adjustmentLevel;break;case"getTempAdjustmentLevel":t.value.obj.tempAdjustmentLevel=this.tempAdjustmentLevel;break;case"setTempAdjustmentLevel":this.tempAdjustmentLevel=t.value.tempAdjustmentLevel;break;case"setAdjustmentValue":this.adjustmentValue=t.value.adjustmentValue;break;case"getBrightnessAdjusted":t.value.obj.isBrightnessAdjusted=this.isBrightnessAdjusted;break;case"setBrightnessAdjusted":this.isBrightnessAdjusted=t.value.isBrightnessAdjusted,this.parent.currentFilter.split("_")&&"cold"===this.parent.currentFilter.split("_")[1]&&(this.isBrightnessAdjusted=!1);break;case"reset":this.reset()}},s.prototype.updatePrivateVariables=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d"))},s.prototype.getModuleName=function(){return"filter"},s.prototype.updateBrightFilter=function(){var t=this.lowerContext.filter.split(" ");if(this.isBrightnessAdjusted&&t.length>0&&!p(t[4])){var e=parseFloat(t[4].split("(")[1]);t[4]="opacity("+(e-.3)+")",this.lowerContext.filter=t.join(" ")}},s.prototype.reset=function(){this.adjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,sharpen:!1,bw:!1},this.tempAdjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,sharpen:!1,bw:!1},this.adjustmentValue=this.parent.getDefaultFilter(),this.isBrightnessAdjusted=!1,this.appliedFilter=""},s.prototype.updateFinetunes=function(){var t=this.parent,e=t.finetuneSettings;e&&(e.brightness&&(this.adjustmentLevel.brightness=e.brightness.defaultValue,this.tempAdjustmentLevel.brightness=e.brightness.defaultValue),e.contrast&&(this.adjustmentLevel.contrast=e.contrast.defaultValue,this.tempAdjustmentLevel.contrast=e.contrast.defaultValue),e.hue&&(this.adjustmentLevel.hue=e.hue.defaultValue,this.tempAdjustmentLevel.hue=e.hue.defaultValue),e.saturation&&(this.adjustmentLevel.saturation=e.saturation.defaultValue,this.tempAdjustmentLevel.saturation=e.saturation.defaultValue),e.exposure&&(this.adjustmentLevel.exposure=e.exposure.defaultValue,this.tempAdjustmentLevel.exposure=e.exposure.defaultValue),e.opacity&&(this.adjustmentLevel.opacity=e.opacity.defaultValue,this.tempAdjustmentLevel.opacity=e.opacity.defaultValue),e.blur&&(this.adjustmentLevel.blur=e.blur.defaultValue,this.tempAdjustmentLevel.blur=e.blur.defaultValue),t.notify("draw",{prop:"isInitialLoading",onPropertyChange:!1,value:{isInitialLoading:!0}}))},s.prototype.initFilter=function(){this.setFilterAdj("brightness",this.adjustmentLevel.brightness),this.setFilterAdj("contrast",this.adjustmentLevel.contrast),this.setFilterAdj("hue",this.adjustmentLevel.hue),this.setFilterAdj("saturation",this.adjustmentLevel.saturation),this.setFilterAdj("exposure",this.adjustmentLevel.exposure),this.setFilterAdj("opacity",this.adjustmentLevel.opacity),this.setFilterAdj("blur",this.adjustmentLevel.blur)},s.prototype.updateAdj=function(t,e,i,n){var r=this.parent;this.lowerContext.clearRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height);var l,h,o=this.lowerContext.filter.split(" "),a=[];o[4]&&(l=parseFloat(o[4].split("(")[1])),o[0]&&(h=parseFloat(o[0].split("(")[1]));var v,g,b,M,w,c=this.getFilterValue(this.adjustmentLevel.brightness),u=this.getFilterValue(this.adjustmentLevel.saturation);if(-1===["brightness","contrast","hue","saturation","exposure","opacity","blur"].indexOf(t)&&p(i)&&(this.adjustmentLevel.sharpen||this.adjustmentLevel.bw)){r.isUndoRedo=!0;var f=this.lowerContext.filter;this.lowerContext.filter="none",r.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),r.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=f,r.isUndoRedo=!1}switch(1!==c&&(o[4]="opacity("+(l-.3)+")"),t){case"brightness":100!==parseFloat(o[3].split("(")[1])&&(e+=.1),o[0]="brightness("+e+")",this.adjustmentValue=o.join(" ");break;case"contrast":o[1]="contrast("+e+"%)",this.adjustmentValue=o.join(" ");break;case"hue":o[2]="hue-rotate("+e+"deg)",this.adjustmentValue=o.join(" ");break;case"saturation":o[3]="saturate("+e+"%)",1!==u&&(o[0]="brightness("+(h+.09)+")"),this.adjustmentValue=o.join(" ");break;case"opacity":1!==parseFloat(o[0].split("(")[1])&&(e-=.2),o[4]="opacity("+e+")",this.adjustmentValue=o.join(" ");break;case"blur":o[5]="blur("+e+"px)",this.adjustmentValue=o.join(" ");break;case"exposure":1!==c&&(o[4]="opacity("+(l-.3)+")"),e>1?(e-=1,e+=c):e<1&&(e=c-(e=1-e)),o[0]="brightness("+e+")",this.adjustmentValue=o.join(" ");break;case"chrome":v=this.getSaturationFilterValue(this.adjustmentLevel.saturation),o[3]="saturate("+(e=(v*=100)+.4*v)+"%)",a=this.adjustmentValue.split(" "),o[0]=a[0],o[1]=a[1],o[2]=a[2],o[4]=a[4],o[5]=a[5],o[6]="sepia(0%)",o[7]="grayscale(0%)",o[8]="invert(0%)";break;case"cold":g=this.getFilterValue(this.adjustmentLevel.brightness),e=.9*(g*=100),o[0]="brightness("+(e*=.01)+")",M=this.getFilterValue(this.adjustmentLevel.contrast),o[1]="contrast("+(e=(M*=100)+.5*M)+"%)",w=this.getSaturationFilterValue(this.adjustmentLevel.saturation),o[3]="saturate("+(e=w*=100)+"%)",a=this.adjustmentValue.split(" "),o[2]=a[2],o[4]=a[4],o[5]=a[5],o[6]="sepia(0%)",o[7]="grayscale(0%)",o[8]="invert(0%)";break;case"warm":b=this.getSaturationFilterValue(this.adjustmentLevel.saturation),o[3]="saturate("+(e=(b*=100)+.4*b)+"%)",o[6]="sepia(25%)",a=this.adjustmentValue.split(" "),o[0]=a[0],o[1]=a[1],o[2]=a[2],o[4]=a[4],o[5]=a[5],o[7]="grayscale(0%)",o[8]="invert(0%)";break;case"grayscale":o[7]="grayscale(100%)",a=this.adjustmentValue.split(" "),o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]="sepia(0%)",o[8]="invert(0%)";break;case"sepia":o[6]="sepia(100%)",a=this.adjustmentValue.split(" "),o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[7]="grayscale(0%)",o[8]="invert(0%)";break;case"invert":o[8]="invert(100%)",a=this.adjustmentValue.split(" "),o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]="sepia(0%)",o[7]="grayscale(0%)"}if("sharpen"!==t&&"blackandwhite"!==t){p(i)&&("default"===t&&(o=this.getDefaultCurrentFilter(o)),this.lowerContext.filter=o.join(" ")),o=this.setTempFilterValue(c,i,o,t),r.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),r.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),this.appliedFilter=this.lowerContext.filter,this.lowerContext.drawImage(r.baseImg,r.img.srcLeft,r.img.srcTop,r.img.srcWidth,r.img.srcHeight,r.img.destLeft,r.img.destTop,r.img.destWidth,r.img.destHeight),r.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),r.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),1!==c?o[4]="opacity("+l+")":1!==u&&(o[0]="brightness("+h+")"),("exposure"===t&&1!==c||"saturation"===t&&1!==u)&&(o[0]="brightness("+h+")"),o=this.setTempFilterValue(c,i,o,t),p(i)&&(this.lowerContext.filter=o.join(" ")),r.initialAdjustmentValue=o.join(" ");var S=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",r.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),r.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=S,r.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(r.currSelectionPoint&&"crop-circle"===r.currSelectionPoint.shape||r.isCircleCrop)&&r.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),this.isBrightnessAdjusted=1!==c}var I=o.join(" ");n&&(n.filter=I)},s.prototype.setTempFilterValue=function(t,e,i,n){if(e)if("default"===n)i=this.getDefaultCurrentFilter(i);else if(1!==t){var r=this.lowerContext.filter.split(" ");r[4]=i[4],this.lowerContext.filter=r.join(" ")}return i},s.prototype.getDefaultCurrentFilter=function(t){var e=this.adjustmentValue.split(" ");return[e[0],e[1],e[2],e[3],e[4],e[5],"sepia(0%)","grayscale(0%)","invert(0%)"]},s.prototype.getFilterValue=function(t){return 0===t?1:1+.5*t/100},s.prototype.getSaturationFilterValue=function(t){return 0===t?1:1+t/100},s.prototype.setFilterAdj=function(t,e){var i=this.parent;switch(i.notify("freehand-draw",{prop:"apply-pen-draw",onPropertyChange:!1}),this.adjustmentLevel[""+t]=e,t){case"brightness":case"contrast":case"exposure":e=this.getFilterValue(e),"contrast"===t&&(e*=100);break;case"hue":e*=3;break;case"saturation":e=100*this.getSaturationFilterValue(e);break;case"opacity":e>=50?e/=100:40===e?e=.45:30===e?e=.4:20===e?e=.35:10===e?e=.3:0===e&&(e=.25);break;case"blur":0!==e&&(e/=20,e+=.5)}var n=C({},i.cropObj,{},!0),r=this.getCurrentObj();r.objColl=C([],i.objColl,[],!0),r.pointColl=C([],i.pointColl,[],!0),r.afterCropActions=C([],i.afterCropActions,[],!0);var o={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),r.selPointColl=C([],o.selPointColl,[],!0),this.updateAdj(t,e);var a=this.lowerContext.filter;this.lowerContext.filter=this.appliedFilter,i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:t,previousObj:r,previousObjColl:r.objColl,previousPointColl:r.pointColl,previousSelPointColl:r.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.lowerContext.filter=a},s.prototype.setFilter=function(t){var e=this.parent;t=t.toLowerCase(),e.notify("freehand-draw",{prop:"apply-pen-draw",onPropertyChange:!1});var n=this.parent.currentFilter,r=C({},e.cropObj,{},!0),o=this.getCurrentObj();o.objColl=C([],e.objColl,[],!0),o.pointColl=C([],e.pointColl,[],!0),o.afterCropActions=C([],e.afterCropActions,[],!0);var a={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),o.selPointColl=C([],a.selPointColl,[],!0),this.updateAdj(t,null);var l=this.lowerContext.filter;this.lowerContext.filter=this.appliedFilter,e.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:t,previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:n,isCircleCrop:null}}),this.lowerContext.filter=l},s.prototype.setAdjustment=function(t){var i,n,e=this.lowerContext.filter.split(" ");switch(t){case"brightness":n=e[0].split("("),i=parseFloat(n[1].split(")")[0]),this.adjustmentLevel.brightness=this.setFilterValue(i);break;case"contrast":n=e[1].split("("),i=parseFloat(n[1].split(")")[0]),this.adjustmentLevel.contrast=this.setFilterValue(i/=100);break;case"hue":n=e[2].split("("),i=parseFloat(n[1].split(")")[0]),this.adjustmentLevel.hue=i/=3;break;case"saturation":n=e[3].split("("),i=parseFloat(n[1].split(")")[0]),this.adjustmentLevel.saturation=this.setSaturationFilterValue(i/=100);break;case"opacity":n=e[4].split("("),.45===(i=parseFloat(n[1].split(")")[0]))?i=40:.4===i?i=30:.35===i?i=20:.3===i?i=10:.25===i?i=0:i*=100,this.adjustmentLevel.opacity=i;break;case"blur":n=e[5].split("("),i=parseFloat(n[1].split(")")[0]),this.adjustmentLevel.blur=i*=20;break;case"exposure":n=e[0].split("("),i=parseFloat(n[1].split(")")[0]),this.adjustmentLevel.exposure=this.setFilterValue(i)}},s.prototype.setFilterValue=function(t){return Math.round(1===t?0:100*(t-1)/.5)},s.prototype.setSaturationFilterValue=function(t){return Math.round(1===t?0:100*(t-1))},s.prototype.updateFilter=function(t,e){var i=this.parent;if(-1!==["default","chrome","cold","warm","grayscale","blackandwhite","sepia","invert","sharpen"].indexOf(t)){var r=i.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");r&&r.classList.remove("e-selected");var o=document.getElementById(i.element.id+"_"+t+"Canvas");o&&o.parentElement.classList.add("e-selected"),this.parent.currentFilter=e||i.element.id+"_"+t}},s.prototype.finetuneImage=function(t,e){var i=this.parent;if(!i.disabled&&i.isImageLoaded){switch(t.toLowerCase()){case"brightness":this.setFilterAdj("brightness",e);break;case"contrast":this.setFilterAdj("contrast",e);break;case"hue":this.setFilterAdj("hue",e);break;case"saturation":this.setFilterAdj("saturation",e);break;case"opacity":this.setFilterAdj("opacity",e);break;case"blur":this.setFilterAdj("blur",e);break;case"exposure":this.setFilterAdj("exposure",e)}this.parent.canvasFilter=this.lowerContext.filter,i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}},s.prototype.setCurrAdjValue=function(t,e){switch(this.parent.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),t){case"brightness":this.setFilterAdj("brightness",e);break;case"contrast":this.setFilterAdj("contrast",e);break;case"hue":this.setFilterAdj("hue",e);break;case"saturation":this.setFilterAdj("saturation",e);break;case"opacity":this.setFilterAdj("opacity",e);break;case"blur":this.setFilterAdj("blur",e);break;case"exposure":this.setFilterAdj("exposure",e)}},s.prototype.getCurrentObj=function(t){var e=this.parent,i={point:null};e.notify("crop",{prop:"getTempFlipPanPoint",value:{obj:i}});var n={previousZoomValue:null};e.notify("transform",{prop:"getPreviousZoomValue",value:{obj:n}});var r={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",zoomFactor:0,previousZoomValue:0,destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:""};return r.cropZoom=e.transform.cropZoomFactor,r.defaultZoom=e.transform.defaultZoomFactor,r.zoomFactor=e.zoomSettings.zoomFactor,r.previousZoomValue=n.previousZoomValue,r.totalPannedPoint=C({},e.panPoint.totalPannedPoint,{},!0),r.totalPannedClientPoint=C({},e.panPoint.totalPannedClientPoint,{},!0),r.totalPannedInternalPoint=C({},e.panPoint.totalPannedInternalPoint,{},!0),r.tempFlipPanPoint=C({},i.point,{},!0),r.activeObj=C({},e.activeObj,{},!0),r.rotateFlipColl=C([],e.rotateFlipColl,[],!0),r.degree=e.transform.degree,r.currFlipState=e.transform.currFlipState,r.destPoints={startX:e.img.destLeft,startY:e.img.destTop,endX:0,endY:0,width:e.img.destWidth,height:e.img.destHeight},r.srcPoints={startX:e.img.srcLeft,startY:e.img.srcTop,endX:0,endY:0,width:e.img.srcWidth,height:e.img.srcHeight},r.filter=this.lowerContext.filter,t&&(t.currObj=r),r},s}(),rj=function(){function s(t){this.fhdObj={lastWidth:0,lastVelocity:0,time:0,pointX:0,pointY:0},this.isFreehandDrawing=!1,this.freehandDownPoint={x:0,y:0},this.isFreehandPointMoved=!1,this.pointCounter=0,this.selPointColl={},this.currFHDIdx=0,this.selPoints=[],this.tempFHDStyles={strokeColor:null,fillColor:null,strokeWidth:null},this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("freehand-draw",this.draw,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("freehand-draw",this.draw),this.parent.off("destroyed",this.destroy)},s.prototype.draw=function(t){switch(this.updateFhdPvtVar(),t.prop){case"hoverFhd":this.hoverFhd(t.value.strokeColor,t.value.strokeWidth);break;case"freehandDownHandler":this.freehandDownHandler(t.value.e,t.value.canvas);break;case"freehandUpHandler":this.freehandUpHandler(t.value.e,t.value.canvas,t.value.context);break;case"handle-freehand-draw":var e=parseInt(t.value.id.split("_")[1],10)-1;this.isFHDIdx(e)&&this.deleteFhd(e,!0);break;case"freehandRedraw":this.freehandRedraw(t.value.context,t.value.points);break;case"deleteFhd":e=parseInt(t.value.id.split("_")[1],10)-1,this.deleteFhd(e,!0);break;case"selectFhd":e=null,t.value.id&&(e=parseInt(t.value.id.split("_")[1],10)-1),this.selectFhd(e);break;case"applyFhd":this.applyFhd();break;case"cancelFhd":this.cancelFhd();break;case"updateFHDCurPts":this.updateFHDCurPts();break;case"rotateFhdColl":this.rotateFhdColl();break;case"flipFHDColl":this.flipFHDColl(t.value.value);break;case"panFHDColl":this.panFHDColl(t.value.xDiff,t.value.yDiff,t.value.panRegion);break;case"updateFHDColl":this.updateFHDColl();break;case"zoomFHDColl":this.zoomFHDColl(t.value.isPreventApply);break;case"apply-pen-draw":this.applyPenDraw();break;case"freeHandDraw":this.freeHandDraw(t.value.value);break;case"isFHDIdx":this.isFHDIdx(t.value.index,t.value.obj);break;case"getSqPtFD":this.getSqPtFD(t.value.idx,t.value.obj);break;case"getSelPointColl":t.value.obj.selPointColl=C([],this.selPointColl);break;case"setSelPointColl":this.selPointColl=C([],t.value.obj.selPointColl);break;case"setFreehandDrawHoveredIndex":this.fhdHovIdx=t.value.index;break;case"getFreehandDrawHoveredIndex":t.value.obj.index=this.fhdHovIdx;break;case"setPointCounter":this.pointCounter=t.value.value;break;case"getPenStrokeWidth":t.value.obj.penStrokeWidth=this.penStrokeWidth;break;case"setPenStrokeWidth":this.penStrokeWidth=t.value.value;break;case"getCurrentFreehandDrawIndex":t.value.obj.currentFreehandDrawIndex=this.currFHDIdx;break;case"setCurrentFreehandDrawIndex":this.currFHDIdx=t.value.value;break;case"updateCropPtsForSel":this.updateCropPtsForSel();break;case"getFreehandDrawSelectedId":t.value.obj.freehandDrawSelectedId=this.fhdSelID;break;case"resetFreehandDrawSelectedId":this.fhdSelID=null;break;case"getTempFreeHandDrawEditingStyles":t.value.obj.tempFreeHandDrawEditingStyles=this.tempFHDStyles;break;case"setFreehandSelectedIndex":this.fhdSelIdx=t.value.index;break;case"getFreehandSelectedIndex":t.value.obj.freehandSelectedIndex=this.fhdSelIdx;break;case"reset":this.reset()}},s.prototype.updateFhdPvtVar=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d"))},s.prototype.reset=function(){this.fhdObj={lastWidth:0,lastVelocity:0,time:0,pointX:0,pointY:0},this.isFreehandDrawing=this.isFreehandPointMoved=!1,this.selPoints=[],this.freehandDownPoint={x:0,y:0},this.selPointColl={},this.fhdHovIdx=null,this.pointCounter=0,this.fhdSelID=null,this.penStrokeWidth=void 0,this.currFHDIdx=0,this.fhdSelIdx=null,this.tempFHDStyles={strokeColor:null,fillColor:null,strokeWidth:null}},s.prototype.getModuleName=function(){return"freehand-draw"},s.prototype.hoverFhd=function(t,e){var i=this.parent;i.lowerCanvas=document.querySelector("#"+i.element.id+"_lowerCanvas"),this.lowerContext=i.lowerCanvas.getContext("2d"),i.upperCanvas=document.querySelector("#"+i.element.id+"_upperCanvas"),this.upperContext=i.upperCanvas.getContext("2d");var r,n=this.upperContext;i.points=C([],i.pointColl[r=this.fhdHovIdx>-1?this.fhdHovIdx:this.fhdSelIdx].points),this.pointCounter=0;var a,l,h,c,u,d,o=i.points.length;n.fillStyle=t||i.pointColl[r].strokeColor,n.strokeStyle=n.fillStyle,u=d=this.penStrokeWidth=e||i.pointColl[r].strokeWidth,1===o&&(a=l=h=c=i.points[0],this.startDraw(n,a,l,h,c,u,d));for(var f=0;f<o-3;f++)i.points[f+1]&&i.points[f+2]&&i.points[f+2]&&(a=this.calcCurveCP(i.points[f+0],i.points[f+1],i.points[f+2]).controlPoint2,l=this.calcCurveCP(i.points[f+1],i.points[f+2],i.points[f+3]).controlPoint1,this.startDraw(n,a,l,h=i.points[f+1],c=i.points[f+2],u,d));n.closePath();var v=this.getSqPtFD(r),g=n.lineWidth;n.lineWidth=2,n.strokeStyle=i.themeColl[i.theme].primaryColor,n.beginPath(),n.rect(v.startX,v.startY,v.width,v.height),n.stroke(),n.closePath(),n.lineWidth=g},s.prototype.freehandDownHandler=function(t,e){this.parent.lowerCanvas=document.querySelector("#"+this.parent.element.id+"_lowerCanvas"),this.lowerContext=this.parent.lowerCanvas.getContext("2d"),this.parent.upperCanvas=document.querySelector("#"+this.parent.element.id+"_upperCanvas"),this.upperContext=this.parent.upperCanvas.getContext("2d"),this.fhdObj.time=(new Date).getTime(),this.isFreehandDrawing=!0,this.freehandDownPoint="mousedown"===t.type?{x:t.clientX,y:t.clientY}:{x:t.touches[0].clientX,y:t.touches[0].clientY},this.isFreehandPointMoved=!1,y.add(e,"mousemove touchmove",this.freehandMoveHandler,this)},s.prototype.freehandUpHandler=function(t,e,i){var n=e.getBoundingClientRect(),r=this.parent;y.remove(e,"mousemove touchmove",this.freehandMoveHandler),0===r.points.length&&("mouseup"===t.type?this.processPoint(t.clientX-n.left,t.clientY-n.top,!0,i):this.isFreehandPointMoved||this.processPoint(this.freehandDownPoint.x-n.left,this.freehandDownPoint.y-n.top,!0,i)),i.closePath();var o=C({},r.cropObj,{},!0),a={currObj:{}};r.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}});var l=a.currObj;l.objColl=C([],r.objColl,[],!0),l.pointColl=C([],r.pointColl,[],!0),l.afterCropActions=C([],r.afterCropActions,[],!0);var h={selPointColl:null};r.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:h}}),l.selPointColl=C([],h.selPointColl,[],!0);var c=r.freehandCounter;r.pointColl[c]={},r.pointColl[c].points=C([],r.points),r.pointColl[c].strokeColor=r.activeObj.strokeSettings.strokeColor,r.pointColl[c].strokeWidth=this.penStrokeWidth,r.pointColl[c].flipState=r.transform.currFlipState,r.pointColl[c].id="pen_"+(this.currFHDIdx+1),r.points=[],this.selPointColl[c]={},this.selPointColl[c].points=C([],this.selPoints),this.selPoints=[],this.pointCounter=0,r.freehandCounter++,this.currFHDIdx++,this.isFreehandDrawing=!1,r.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehand-draw",previousObj:l,previousObjColl:l.objColl,previousPointColl:l.pointColl,previousSelPointColl:l.selPointColl,previousCropObj:o,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})},s.prototype.freehandMoveHandler=function(t){this.isFreehandPointMoved=!0;var i,n,e=this.parent.upperCanvas.getBoundingClientRect();"mousemove"===t.type?(i=t.clientX-e.left,n=t.clientY-e.top):(i=t.touches[0].clientX-e.left,n=t.touches[0].clientY-e.top),this.isFreehandDrawing&&this.processPoint(i,n,!1,this.upperContext)},s.prototype.processPoint=function(t,e,i,n){var l,h,c,u,r=this.parent,o=this.point(t,e,(new Date).getTime()),a=!!(o=r.points.length>0&&r.points[r.points.length-1])&&this.distanceTo(o)<=5;if(this.selPoints.push({x:t,y:e,ratioX:(t-r.img.destLeft)/r.img.destWidth,ratioY:(e-r.img.destTop)/r.img.destHeight,time:this.fhdObj.time}),!o||!o||!a||i){if(this.fhdObj.time=(new Date).getTime(),r.points.push({x:t,y:e,ratioX:(t-r.img.destLeft)/r.img.destWidth,ratioY:(e-r.img.destTop)/r.img.destHeight,time:this.fhdObj.time}),r.points.length>3){var f=r.points[this.pointCounter+1],v=r.points[this.pointCounter+2],g=r.points[this.pointCounter+3];l=this.calcCurveCP(r.points[this.pointCounter],f,v).controlPoint2,h=this.calcCurveCP(f,v,g).controlPoint1,c=r.points[this.pointCounter+1],u=r.points[this.pointCounter+2];var b=.5,M=5;p(this.penStrokeWidth)||(b=M=this.penStrokeWidth),this.startDraw(n,l,h,c,u,b,M),this.pointCounter++}i&&(l=h=c=u={x:t,y:e,time:(new Date).getTime()},b=.5,M=5,p(this.penStrokeWidth)||(b=M=this.penStrokeWidth),this.startDraw(n,l,h,c,u,b,M))}},s.prototype.calcCurveCP=function(t,e,i){e||(e=t),i||(i=e);var n=t.x-e.x,r=t.y-e.y,o=e.x-i.x,a=e.y-i.y,l_x=(t.x+e.x)/2,l_y=(t.y+e.y)/2,h_x=(e.x+i.x)/2,h_y=(e.y+i.y)/2,c=Math.sqrt(n*n+r*r),u=Math.sqrt(o*o+a*a),v=u/(c+u),b=e.x-(h_x+(l_x-h_x)*v),M=e.y-(h_y+(l_y-h_y)*v);return{controlPoint1:this.point(l_x+b,l_y+M,0),controlPoint2:this.point(h_x+b,h_y+M,0)}},s.prototype.point=function(t,e,i){return this.fhdObj.pointX=t,this.fhdObj.pointY=e,{x:this.fhdObj.pointX,y:this.fhdObj.pointY,time:i}},s.prototype.startDraw=function(t,e,i,n,r,o,a){var l;l=.7*(l=this.pointVelocity(n))+(1-.7)*this.fhdObj.lastVelocity;var h=Math.max(a/1.7,o);this.drawCurve(this.fhdObj.time,h,t,e,i,n,r,a),this.fhdObj.lastVelocity=l,this.fhdObj.time=h},s.prototype.pointVelocity=function(t){return this.fhdObj.time!==t.time?this.distanceTo(t)/(this.fhdObj.time-t.time):0},s.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.fhdObj.pointX-t.x,2)+Math.pow(this.fhdObj.pointY-t.y,2))},s.prototype.drawCurve=function(t,e,i,n,r,o,a,l){var h,c,u,d,f,v,g,b,M,w,S=e-t,I=this.bezierLength(n,r,o,a),P=2*Math.ceil(I);for(i.beginPath(),c=0;c<P;c++)M=(b=(g=(v=1-(u=c/P))*v)*v)*o.x,M+=3*g*u*n.x,M+=3*v*(d=u*u)*r.x,M+=(f=d*u)*a.x,w=b*o.y,w+=3*g*u*n.y,w+=3*v*d*r.y,w+=f*a.y,h=Math.min(t+f*S,l),this.drawArc(M,w,h,i);i.closePath(),i.fill()},s.prototype.bezierLength=function(t,e,i,n){var a,l,h,c,u,d,f,v,o=0;for(a=0;a<=10;a++)h=this.bezierPoint(l=a/10,i.x,t.x,e.x,n.x),c=this.bezierPoint(l,i.y,t.y,e.y,n.y),a>0&&(f=h-u,v=c-d,o+=Math.sqrt(f*f+v*v)),u=h,d=c;return o},s.prototype.bezierPoint=function(t,e,i,n,r){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*n*(1-t)*t*t+r*t*t*t},s.prototype.drawArc=function(t,e,i,n){(t>this.parent.img.destLeft&&e>this.parent.img.destTop&&t<this.parent.img.destLeft+this.parent.img.destWidth&&e<this.parent.img.destTop+this.parent.img.destHeight||n!==this.lowerContext&&n!==this.upperContext)&&(n.moveTo(t,e),n.arc(t,e,i,0,2*Math.PI,!1))},s.prototype.freehandRedraw=function(t,e){var i=this.parent;i.lowerCanvas=document.querySelector("#"+i.element.id+"_lowerCanvas"),this.lowerContext=i.lowerCanvas.getContext("2d"),i.upperCanvas=document.querySelector("#"+i.element.id+"_upperCanvas"),this.upperContext=i.upperCanvas.getContext("2d");var n=t.filter;t.filter="none",e&&(i.pointColl[i.freehandCounter]={},i.pointColl[i.freehandCounter].points=e,i.pointColl[i.freehandCounter].strokeColor=i.activeObj.strokeSettings.strokeColor,i.pointColl[i.freehandCounter].strokeWidth=this.penStrokeWidth,i.pointColl[i.freehandCounter].flipState=i.transform.currFlipState,i.freehandCounter++);for(var r=0;r<i.freehandCounter;r++){i.points=C([],i.pointColl[r].points),this.pointCounter=0;var o=i.points.length,a=void 0,l=void 0,h=void 0,c=void 0,u=void 0,d=void 0;o>0&&(t.fillStyle=i.pointColl[r].strokeColor,u=d=this.penStrokeWidth=i.pointColl[r].strokeWidth),1===o&&(a=l=h=c=i.points[0],this.startDraw(t,a,l,h,c,u,d));for(var f=0;f<o-3;f++)i.points[f+1]&&i.points[f+2]&&i.points[f+2]&&(a=this.calcCurveCP(i.points[f+0],i.points[f+1],i.points[f+2]).controlPoint2,l=this.calcCurveCP(i.points[f+1],i.points[f+2],i.points[f+3]).controlPoint1,this.startDraw(t,a,l,h=i.points[f+1],c=i.points[f+2],u,d));t.closePath()}t.filter=n},s.prototype.getSqPtFD=function(t,e){var i={startX:0,startY:0,endX:0,endY:0,width:0,height:0},n=C([],this.selPointColl[t].points,[]);this.parent.points=C([],this.parent.pointColl[t].points),this.pointCounter=0;for(var r=n.length,o=0;o<r;o++)0===i.startX&&0===i.startY&&0===i.endX&&0===i.endY?(i.startX=n[o].x,i.startY=n[o].y,i.endX=n[o].x,i.endY=n[o].y):(i.startX=Math.min(i.startX,n[o].x),i.startY=Math.min(i.startY,n[o].y),i.endX=Math.max(i.endX,n[o].x),i.endY=Math.max(i.endY,n[o].y));return i.startX-=this.penStrokeWidth,i.startY-=this.penStrokeWidth,i.endX+=this.penStrokeWidth,i.endY+=this.penStrokeWidth,i.width=i.endX-i.startX,i.height=i.endY-i.startY,e&&(e.activePoint=i),i},s.prototype.applyPenDraw=function(){var t=this.parent;"freehanddraw"===t.currObjType.shape&&(t.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),t.upperCanvas.style.cursor=t.cursor="default",t.currObjType.shape=""),t.notify("shape",{prop:"clearActObj"})},s.prototype.applyFhd=function(){var t=this.parent,e=t.pointColl[this.fhdSelIdx];"#42a5f5"===e.strokeColor&&(e.strokeColor=this.tempFHDStyles.strokeColor),z()||t.notify("toolbar",{prop:"setSelectedFreehandColor",value:{color:"#42a5f5"}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),z()||t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),e&&(e.isSelected=!1),t.notify("selection",{prop:"resetFreehandDrawVariables"}),this.fhdHovIdx=this.fhdSelIdx=null},s.prototype.cancelFhd=function(){var t=this.parent;z()||t.notify("toolbar",{prop:"setSelectedFreehandColor",value:{color:"#42a5f5"}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.pointCounter=0,t.pointColl[this.fhdSelIdx]&&(t.pointColl[this.fhdSelIdx].strokeColor=this.tempFHDStyles.strokeColor,t.pointColl[this.fhdSelIdx].strokeWidth=this.tempFHDStyles.strokeWidth,t.pointColl[this.fhdSelIdx].isSelected=!1),this.fhdHovIdx=this.fhdSelIdx=this.fhdSelID=null,t.notify("selection",{prop:"resetFreehandDrawVariables"}),t.activeObj.strokeSettings.strokeColor=this.tempFHDStyles.strokeColor,t.activeObj.strokeSettings.strokeWidth=this.penStrokeWidth=this.tempFHDStyles.strokeWidth,this.tempFHDStyles={strokeColor:null,strokeWidth:null,fillColor:null},z()||t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})},s.prototype.selectFhd=function(t){var e=this,i=this.parent;if(i.notify("selection",{prop:"setFreehandDrawEditing",onPropertyChange:!1,value:{bool:!0}}),t||0===t){if(!this.isFHDIdx(t))return;this.fhdSelIdx=this.fhdHovIdx=t,this.hoverFhd(),i.upperCanvas.style.cursor=i.cursor="pointer"}this.fhdSelIdx=this.fhdHovIdx,i.pointColl[this.fhdSelIdx].isSelected=!0,this.fhdSelID=i.pointColl[this.fhdSelIdx].id,"#42a5f5"!==i.pointColl[this.fhdHovIdx].strokeColor&&(i.activeObj.strokeSettings.strokeColor=this.tempFHDStyles.strokeColor=i.pointColl[this.fhdHovIdx].strokeColor),i.activeObj.strokeSettings.strokeWidth=this.tempFHDStyles.strokeWidth=i.pointColl[this.fhdHovIdx].strokeWidth;var n={bool:!1};if(i.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:n}}),n.bool){var r={id:"pen_"+(this.fhdSelIdx+1),type:ac.FreehandDraw,startX:i.pointColl[this.fhdSelIdx].points[0].x,startY:i.pointColl[this.fhdSelIdx].points[0].y,strokeColor:i.pointColl[this.fhdSelIdx].strokeColor,strokeWidth:i.pointColl[this.fhdSelIdx].strokeWidth,points:i.pointColl[this.fhdSelIdx].points},o={action:"select",previousShapeSettings:r,currentShapeSettings:r};z()&&i.events&&!0===i.events.shapeChanging.hasDelegate?i.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",o).then(function(a){i.activeObj.strokeSettings.strokeColor=i.pointColl[e.fhdSelIdx].strokeColor=a.currentShapeSettings.strokeColor,i.activeObj.strokeSettings.strokeWidth=i.pointColl[e.fhdSelIdx].strokeWidth=a.currentShapeSettings.strokeWidth,i.pointColl[e.fhdSelIdx].points=a.currentShapeSettings.points,e.freehandRedraw(e.upperContext),i.updateToolbar(i.element,"colorToolbar")}):(i.trigger("shapeChanging",o),i.activeObj.strokeSettings.strokeColor=i.pointColl[this.fhdSelIdx].strokeColor=o.currentShapeSettings.strokeColor,i.activeObj.strokeSettings.strokeWidth=i.pointColl[this.fhdSelIdx].strokeWidth=o.currentShapeSettings.strokeWidth,i.pointColl[this.fhdSelIdx].points=o.currentShapeSettings.points,this.freehandRedraw(this.upperContext),i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}))}else i.okBtn()},s.prototype.deleteFhd=function(t,e){var i=this.parent;if(this.isFHDIdx(t)){this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height);var n=C({},i.pointColl,{},!0),r=C({},this.selPointColl,{},!0);i.pointColl={},this.selPointColl={};var o=0;if(p(e))for(var a=0;a<i.freehandCounter;a++)a!==t&&(i.pointColl[o]=n[a],this.selPointColl[o]=r[a],o++);else for(a=0;a<i.freehandCounter;a++)parseInt(n[a].id.split("_")[1],10)-1!==t&&(i.pointColl[o]=n[a],this.selPointColl[o]=r[a],o++);i.freehandCounter-=1,this.fhdHovIdx=this.fhdSelIdx=null,i.notify("selection",{prop:"resetFreehandDrawVariables"}),i.notify("draw",{prop:"render-image",value:{isMouseWheel:!0}}),z()||i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}},s.prototype.zoomX=function(t){return t*this.parent.img.destWidth+this.parent.img.destLeft},s.prototype.zoomY=function(t){return t*this.parent.img.destHeight+this.parent.img.destTop},s.prototype.zoomFHDColl=function(t){for(var e=this.parent,i=0;i<e.freehandCounter;i++){e.points=C([],e.pointColl[i].points,[]),this.pointCounter=0;for(var n=e.points.length,r=0;r<n;r++)e.points[r].x=this.zoomX(e.points[r].ratioX),e.points[r].y=this.zoomY(e.points[r].ratioY)}this.updateFHDCurPts(),p(t)&&this.freehandRedraw(this.lowerContext,null)},s.prototype.updateFHDCurPts=function(){for(var t=this.parent,e=0;e<t.freehandCounter;e++)if(this.selPointColl[e]){this.selPoints=C([],this.selPointColl[e].points,[]),this.pointCounter=0;for(var i=this.selPoints.length,n=0;n<i;n++)this.selPoints[n].x=this.zoomX(this.selPoints[n].ratioX),this.selPoints[n].y=this.zoomY(this.selPoints[n].ratioY)}},s.prototype.rotateFhdColl=function(){for(var t=this.parent,e=0;e<t.freehandCounter;e++){t.points=C([],t.pointColl[e].points,[]),this.pointCounter=0;for(var i=t.points.length,n=0;n<i;n++)t.points[n].y=t.img.destTop+t.img.destHeight*t.points[n].ratioX,t.points[n].x=t.img.destLeft+t.img.destWidth-t.img.destWidth*t.points[n].ratioY,t.points[n].ratioX=(t.points[n].x-t.img.destLeft)/t.img.destWidth,t.points[n].ratioY=(t.points[n].y-t.img.destTop)/t.img.destHeight}for(e=0;e<t.freehandCounter;e++)if(this.selPointColl[e])for(this.selPoints=C([],this.selPointColl[e].points,[]),this.pointCounter=0,i=this.selPoints.length,n=0;n<i;n++)this.selPoints[n].y=t.img.destTop+t.img.destHeight*this.selPoints[n].ratioX,this.selPoints[n].x=t.img.destLeft+t.img.destWidth-t.img.destWidth*this.selPoints[n].ratioY,this.selPoints[n].ratioX=(this.selPoints[n].x-t.img.destLeft)/t.img.destWidth,this.selPoints[n].ratioY=(this.selPoints[n].y-t.img.destTop)/t.img.destHeight;this.updateFHDCurPts()},s.prototype.flipFHDColl=function(t){var e=t.toLowerCase();if("horizontal"===e)this.pointsHorizontalFlip();else if("vertical"===e)this.pointsVerticalFlip();else{this.pointsHorizontalFlip();for(var i=0;i<this.parent.freehandCounter;i++)this.parent.pointColl[i].shapeFlip="";this.pointsVerticalFlip()}},s.prototype.pointsHorizontalFlip=function(){for(var t=this.parent,e=0;e<t.freehandCounter;e++)if(t.pointColl[e].shapeFlip!==t.transform.currFlipState){t.points=C([],t.pointColl[e].points,[]),this.pointCounter=0;for(var i=t.points.length,n=0;n<i;n++)t.points[n].x<=t.img.destLeft+t.img.destWidth/2?t.points[n].x=t.img.destLeft+t.img.destWidth-(t.points[n].x-t.img.destLeft):t.points[n].x>=t.img.destLeft+t.img.destWidth/2&&(t.points[n].x=t.img.destLeft+(t.img.destLeft+t.img.destWidth-t.points[n].x)),t.points[n].ratioX=(t.points[n].x-t.img.destLeft)/t.img.destWidth,t.points[n].ratioY=(t.points[n].y-t.img.destTop)/t.img.destHeight;t.pointColl[e].shapeFlip=t.transform.currFlipState}for(e=0;e<t.freehandCounter;e++)if(this.selPointColl[e]&&this.selPointColl[e].shapeFlip!==t.transform.currFlipState)for(this.selPoints=C([],this.selPointColl[e].points,[]),this.pointCounter=0,i=this.selPoints.length,n=0;n<i;n++)this.selPoints[n].x<=t.img.destLeft+t.img.destWidth/2?this.selPoints[n].x=t.img.destLeft+t.img.destWidth-(this.selPoints[n].x-t.img.destLeft):this.selPoints[n].x>=t.img.destLeft+t.img.destWidth/2&&(this.selPoints[n].x=t.img.destLeft+(t.img.destLeft+t.img.destWidth-this.selPoints[n].x)),this.selPoints[n].ratioX=(this.selPoints[n].x-t.img.destLeft)/t.img.destWidth,this.selPoints[n].ratioY=(this.selPoints[n].y-t.img.destTop)/t.img.destHeight;this.updateFHDCurPts()},s.prototype.pointsVerticalFlip=function(){for(var t=this.parent,e=0;e<t.freehandCounter;e++)if(t.pointColl[e].shapeFlip!==t.transform.currFlipState){t.points=C([],t.pointColl[e].points,[]),this.pointCounter=0;for(var i=t.points.length,n=0;n<i;n++)t.points[n].y<=t.img.destTop+t.img.destHeight/2?t.points[n].y=t.img.destTop+t.img.destHeight-(t.points[n].y-t.img.destTop):t.points[n].y>=t.img.destTop+t.img.destHeight/2&&(t.points[n].y=t.img.destTop+(t.img.destTop+t.img.destHeight-t.points[n].y)),t.points[n].ratioX=(t.points[n].x-t.img.destLeft)/t.img.destWidth,t.points[n].ratioY=(t.points[n].y-t.img.destTop)/t.img.destHeight;t.pointColl[e].shapeFlip=t.transform.currFlipState}for(e=0;e<t.freehandCounter;e++)if(this.selPointColl[e]&&this.selPointColl[e].shapeFlip!==t.transform.currFlipState)for(this.selPoints=C([],this.selPointColl[e].points,[]),this.pointCounter=0,i=this.selPoints.length,n=0;n<i;n++)this.selPoints[n].y<=t.img.destTop+t.img.destHeight/2?this.selPoints[n].y=t.img.destTop+t.img.destHeight-(this.selPoints[n].y-t.img.destTop):this.selPoints[n].y>=t.img.destTop+t.img.destHeight/2&&(this.selPoints[n].y=t.img.destTop+(t.img.destTop+t.img.destHeight-this.selPoints[n].y)),this.selPoints[n].ratioX=(this.selPoints[n].x-t.img.destLeft)/t.img.destWidth,this.selPoints[n].ratioY=(this.selPoints[n].y-t.img.destTop)/t.img.destHeight;this.updateFHDCurPts()},s.prototype.updateFHDColl=function(){for(var t=this.parent,e=0;e<t.objColl.length;e++){if(t.objColl[e].imageRatio={startX:(t.objColl[e].activePoint.startX-t.img.destLeft)/t.img.destWidth,startY:(t.objColl[e].activePoint.startY-t.img.destTop)/t.img.destHeight,endX:(t.objColl[e].activePoint.endX-t.img.destLeft)/t.img.destWidth,endY:(t.objColl[e].activePoint.endY-t.img.destTop)/t.img.destHeight,width:t.img.destWidth/t.objColl[e].activePoint.width,height:t.img.destHeight/t.objColl[e].activePoint.height},"path"===t.objColl[e].shape)for(var i=0;i<t.objColl[e].pointColl.length;i++)t.objColl[e].pointColl[i].ratioX=(t.objColl[e].pointColl[i].x-t.img.destLeft)/t.img.destWidth,t.objColl[e].pointColl[i].ratioY=(t.objColl[e].pointColl[i].y-t.img.destTop)/t.img.destHeight;t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})}for(var n=0;n<t.freehandCounter;n++){t.points=C([],t.pointColl[n].points,[]),this.pointCounter=0;for(var r=t.points.length,o=0;o<r;o++)t.points[o].ratioX=(t.points[o].x-t.img.destLeft)/t.img.destWidth,t.points[o].ratioY=(t.points[o].y-t.img.destTop)/t.img.destHeight}for(n=0;n<t.freehandCounter;n++)if(this.selPointColl[n])for(this.selPoints=C([],this.selPointColl[n].points,[]),this.pointCounter=0,r=this.selPoints.length,o=0;o<r;o++)this.selPoints[o].ratioX=(this.selPoints[o].x-t.img.destLeft)/t.img.destWidth,this.selPoints[o].ratioY=(this.selPoints[o].y-t.img.destTop)/t.img.destHeight},s.prototype.panFHDColl=function(t,e,i){for(var n=this.parent,r=0;r<n.freehandCounter;r++){n.points=C([],n.pointColl[r].points,[]),this.pointCounter=0;for(var o=n.points.length,a=0;a<o;a++)""===i||"vertical"===i?n.points[a].x+=t:n.points[a].x-=t,""===i||"horizontal"===i?n.points[a].y+=e:n.points[a].y-=e}for(r=0;r<n.freehandCounter;r++)if(this.selPointColl[r])for(this.selPoints=C([],this.selPointColl[r].points,[]),this.pointCounter=0,o=this.selPoints.length,a=0;a<o;a++)""===i||"vertical"===i?this.selPoints[a].x+=t:this.selPoints[a].x-=t,""===i||"horizontal"===i?this.selPoints[a].y+=e:this.selPoints[a].y-=e;this.freehandRedraw(this.lowerContext,null)},s.prototype.freeHandDraw=function(t){var e=this.parent;if(t){if(e.points=[],e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.togglePen=!0,e.upperCanvas.style.cursor=e.cursor="crosshair",e.upperCanvas.style.display="block",p(e.activeObj.strokeSettings)){var i={strokeSettings:{}};e.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:i}}),e.activeObj.strokeSettings=i.strokeSettings}p(e.activeObj.strokeSettings.strokeWidth)&&(e.activeObj.strokeSettings.strokeWidth=4),z()?e.updateToolbar(e.element,"pen"):e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})}else e.upperCanvas.style.cursor=e.cursor="default",e.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),z()?e.updateToolbar(e.element,"imageLoaded"):(e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),e.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}})),e.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}})},s.prototype.isFHDIdx=function(t,e){for(var i=!1,n=0;n<this.parent.freehandCounter;n++)if(this.parent.pointColl[n].id&&parseInt(this.parent.pointColl[n].id.split("_")[1],10)-1===t){i=!0;break}return e&&(e.isIndex=i),i},s.prototype.updateCropPtsForSel=function(){for(var t=this.parent,e=0;e<t.freehandCounter;e++){var i={selPointColl:C([],this.selPointColl)};if(i.selPointColl[e]){this.selPoints=C([],i.selPointColl[e].points,[]),this.pointCounter=0;for(var n=this.selPoints.length,r=0;r<n;r++)this.selPoints[r].ratioX=(this.selPoints[r].x-t.activeObj.activePoint.startX)/t.activeObj.activePoint.width,this.selPoints[r].ratioY=(this.selPoints[r].y-t.activeObj.activePoint.startY)/t.activeObj.activePoint.height}}},s}(),sj=function(){function s(t){this.diffPoint={x:0,y:0},this.oldPoint={},this.isTouch=!1,this.isObjSelected=!1,this.isFhdPoint=!1,this.dragPoint={startX:0,startY:0,endX:0,endY:0},this.isShapeInserted=!1,this.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]},this.isFirstMove=!1,this.startTouches=[],this.tempTouches=[],this.currMousePoint={x:0,y:0},this.cursorTargetId="",this.isPreventDragging=!1,this.dragElement="",this.textRow=1,this.mouseDownPoint={x:0,y:0},this.previousPoint={x:0,y:0},this.zoomType="Toolbar",this.isInitialTextEdited=!1,this.dragCanvas=!1,this.isFhdCustomized=!1,this.touchEndPoint={},this.isFhdEditing=!1,this.currentDrawingShape="",this.initialPrevObj={},this.touchTime=0,this.resizedElement="",this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("selection",this.selection,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("selection",this.selection),this.parent.off("destroyed",this.destroy)},s.prototype.selection=function(t){var e=this;switch(this.updatePrivateVariables(),t.prop){case"mouse-up":this.selMouseUpEvent();break;case"setCursor":this.setCursor(t.value.x,t.value.y);break;case"updateActivePoint":this.updateActivePoint(t.value.x,t.value.y,t.value.isCropSelection);break;case"updateCursorStyles":this.updateCursorStyles(t.value.x,t.value.y,t.value.type);break;case"setTextSelection":this.setTextSelection(t.value.width,t.value.height);break;case"setActivePoint":this.setActivePoint(t.value.startX,t.value.startY);break;case"clearSelection":this.clearSelection();break;case"calcShapeRatio":this.calcShapeRatio(t.value.x,t.value.y,t.value.imgWidth,t.value.imgHeight);break;case"applyCurrShape":this.applyCurrShape(t.value.isShapeClick);break;case"tab":this.performTabAction();break;case"setDragDirection":this.setDragDirection(t.value.width,t.value.height);break;case"clearUpperCanvas":this.isTouch&&setTimeout(function(){e.parent.upperCanvas.getContext("2d").clearRect(0,0,e.parent.upperCanvas.width,e.parent.upperCanvas.height)},550);break;case"resetFreehandDrawVariables":this.isFhdEditing=this.isFhdPoint=!1;break;case"isShapeInserted":this.isShapeInserted=t.value.bool;break;case"redrawShape":this.redrawShape(t.value.obj);break;case"setTextBoxStylesToActObj":this.setTextBoxStylesToActObj();break;case"mouseDownEventHandler":this.mouseDownEventHandler(t.value.e);break;case"mouseMoveEventHandler":this.mouseMoveEventHandler(t.value.e);break;case"mouseUpEventHandler":this.mouseUpEventHandler(t.value.e);break;case"canvasMouseDownHandler":this.canvasMouseDownHandler(t.value.e);break;case"canvasMouseMoveHandler":this.canvasMouseMoveHandler(t.value.e);break;case"canvasMouseUpHandler":this.canvasMouseUpHandler(t.value.e);break;case"touchStartHandler":this.touchStartHandler(t.value.e);break;case"keyDownEventHandler":this.keyDownEventHandler(t.value.e);break;case"handleScroll":this.handleScroll(t.value.e);break;case"textKeyDown":setTimeout(this.textKeyDown.bind(this),1,t.value.e);break;case"deleteItem":this.deleteItem();break;case"updatePrevShapeSettings":this.updatePrevShapeSettings(t.value.obj);break;case"getZoomType":t.value.obj.zoomType=this.zoomType;break;case"setZoomType":this.zoomType=t.value.zoomType;break;case"setInitialTextEdit":this.isInitialTextEdited=t.value.bool;break;case"setDragCanvas":this.dragCanvas=t.value.bool;break;case"setFreehandDrawCustomized":this.isFhdCustomized=t.value.isFreehandDrawCustomized;break;case"setTouchEndPoint":this.touchEndPoint.x=t.value.x,this.touchEndPoint.y=t.value.y;break;case"getPanDown":t.value.obj.panDown=this.panDown;break;case"setPanDown":this.panDown=t.value.panDown;break;case"getFreehandDrawEditing":t.value.obj.bool=this.isFhdEditing;break;case"setFreehandDrawEditing":this.isFhdEditing=t.value.bool;break;case"getTempActObj":t.value.obj.tempObj=this.tempActiveObj;break;case"setTempActObj":this.tempActiveObj=t.value.obj;break;case"isInside":this.isInside(t.value.x,t.value.y,t.value.z1,t.value.z2,t.value.z3,t.value.z4);break;case"setDragElement":this.dragElement=t.value.value;break;case"setObjSelected":this.isObjSelected=t.value.bool;break;case"adjustActObjForLineArrow":this.adjustActObjForLineArrow(t.value.obj);break;case"findTarget":this.findTarget(t.value.x,t.value.y,t.value.type);break;case"getCurrentFlipState":this.getCurrentFlipState();break;case"setDragWidth":this.setDragWidth(t.value.width);break;case"setDragHeight":this.setDragHeight(t.value.setDragHeight);break;case"annotate":this.currentDrawingShape=t.value.shape,"text"===t.value.shape?(this.parent.activeObj.textSettings.fontSize=100,this.parent.activeObj.keyHistory="Enter Text",this.parent.notify("shape",{prop:"initializeTextShape",onPropertyChange:!1,value:{text:null,fontFamily:null,fontSize:null,bold:null,italic:null,strokeColor:null}})):"path"===t.value.shape&&(this.parent.activeObj.pointColl=[]);break;case"getCurrentDrawingShape":t.value.obj.shape=this.currentDrawingShape;break;case"setCurrentDrawingShape":this.currentDrawingShape=t.value.value;break;case"getTransRotationPoint":this.getTransRotationPoint(t.value.obj,t.value.object);break;case"adjustNEPoints":this.adjustNEPoints(t.value.rectangle,t.value.x,t.value.y,t.value.angle);break;case"adjustRotationPoints":this.adjustRotationPoints(t.value.rectangle,t.value.x,t.value.y,t.value.angle);break;case"getResizeDirection":this.getResizeDirection(t.value.rectangle,t.value.x,t.value.y,t.value.angle);break;case"setResizedElement":this.resizedElement=t.value.value;break;case"reset":this.reset();break;case"unWireEvent":this.unwireEvent();break;case"updPtCollForShpRot":this.updPtCollForShpRot(t.value.obj)}},s.prototype.getModuleName=function(){return"selection"},s.prototype.updatePrivateVariables=function(){var t=this.parent;t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d"))},s.prototype.reset=function(){this.diffPoint={x:0,y:0},this.oldPoint={},this.isTouch=this.isObjSelected=this.isFhdPoint=this.isShapeInserted=!1,this.dragPoint={startX:0,startY:0,endX:0,endY:0},this.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]},this.isFirstMove=!1,this.cursorTargetId=this.dragElement="",this.startTouches=[],this.tempTouches=[],this.currMousePoint={x:0,y:0},this.isPreventDragging=!1,this.timer=void 0,this.tempObjColl=void 0,this.textRow=1,this.mouseDownPoint={x:0,y:0},this.previousPoint={x:0,y:0},this.zoomType="Toolbar",this.isInitialTextEdited=!1,this.dragCanvas=!1,this.isFhdCustomized=!1,this.touchEndPoint={},this.panDown=null,this.isFhdEditing=!1,this.pathAdjustedIndex=null,this.touchTime=0,this.currentDrawingShape="",this.initialPrevObj={},this.resizedElement=""},s.prototype.performTabAction=function(){if("block"===this.parent.textArea.style.display){var t=this.applyCurrShape(!1);this.parent.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),t&&this.parent.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}},s.prototype.selMouseUpEvent=function(){this.oldPoint.x=void 0,this.oldPoint.y=void 0},s.prototype.getMouseCursor=function(t,e,i,n,r){var o=this.getTransRotationPoint(t),l=r?0:2*t.topLeftCircle.radius;return e>=t.topLeftCircle.startX-l&&e<=t.topLeftCircle.startX+l&&i>=t.topLeftCircle.startY-l&&i<=t.topLeftCircle.startY+l?"nw-resize":e>=t.topLeftCircle.startX-l&&e<=t.topRightCircle.startX-l&&i>=t.topCenterCircle.startY-l&&i<=t.topCenterCircle.startY+l?"n-resize":e>=t.topRightCircle.startX-l&&e<=t.topRightCircle.startX+l&&i>=t.topRightCircle.startY-l&&i<=t.topRightCircle.startY+l?"ne-resize":e>=t.centerLeftCircle.startX-l&&e<=t.centerLeftCircle.startX+l&&i>=t.topLeftCircle.startY-l&&i<=t.bottomLeftCircle.startY-l?"w-resize":e>=t.centerRightCircle.startX-l&&e<=t.centerRightCircle.startX+l&&i>=t.topRightCircle.startY-l&&i<=t.bottomRightCircle.startY-l?"e-resize":e>=t.bottomLeftCircle.startX-l&&e<=t.bottomLeftCircle.startX+l&&i>=t.bottomLeftCircle.startY-l&&i<=t.bottomLeftCircle.startY+l?"sw-resize":e>=t.bottomLeftCircle.startX-l&&e<=t.bottomRightCircle.startX-l&&i>=t.bottomCenterCircle.startY-l&&i<=t.bottomCenterCircle.startY+l?"s-resize":e>=t.bottomRightCircle.startX-l&&e<=t.bottomRightCircle.startX+l&&i>=t.bottomRightCircle.startY-l&&i<=t.bottomRightCircle.startY+l?"se-resize":e>=t.activePoint.startX&&e<=t.activePoint.endX&&i>=t.activePoint.startY&&i<=t.activePoint.endY?n?"grab":"move":o&&!r&&e>=o.x-(t.bottomCenterCircle.radius+2)&&e<=o.x+(t.bottomCenterCircle.radius+2)&&i>=o.y-(t.bottomCenterCircle.radius+2)&&i<=o.y+(t.bottomCenterCircle.radius+2)?"grabbing":"default"},s.prototype.setCursor=function(t,e){var a,i=this.parent,n=document.querySelector("#"+i.element.id+"_lowerCanvas"),r=document.querySelector("#"+i.element.id+"_upperCanvas"),o=!1;if(""===this.currentDrawingShape)if(i.currObjType.isDragging)r.style.cursor=i.cursor=""===this.dragElement?"move":this.dragElement;else{if(void 0!==i.activeObj.horTopLine){void 0!==i.activeObj.shape&&(a=i.activeObj.shape.split("-")),(void 0===a&&i.currObjType.isCustomCrop||void 0!==a&&"crop"===a[0])&&(o=!0),!o&&i.togglePan&&(n.style.cursor=r.style.cursor=i.cursor="grab");var l=r.style.cursor,h=C({},i.activeObj,{},!0);this.cursorTargetId=h.currIndex;var c=void 0;(c=0===h.shapeDegree?i.transform.degree:i.transform.degree-h.shapeDegree)<0&&(c=360+c),"line"===h.shape||"arrow"===h.shape?this.setCursorForLineArrow(h,t,e,r):"path"===h.shape?this.setCursorForPath(h,t,e,r):p(h.rotatedAngle)||0===h.rotatedAngle?(r.style.cursor=i.cursor=this.getMouseCursor(h,t,e,o,!1),"text"===h.shape&&("n-resize"===i.cursor||"s-resize"===i.cursor||"e-resize"===i.cursor||"w-resize"===i.cursor)&&(r.style.cursor=i.cursor="move")):this.setCursorForRotatedObject(h,t,e,r),"default"===l&&"default"===i.cursor&&o&&(r.style.cursor=i.cursor="grab"),"grab"===l&&"default"===i.cursor&&(r.style.cursor=i.cursor="grab")}else i.togglePan&&!i.togglePen?n.style.cursor=r.style.cursor=i.cursor="grab":r.style.cursor=i.cursor=i.currObjType.isCustomCrop||i.togglePen?"crosshair":"default";"default"!==i.cursor&&"grab"!==i.cursor||(l=r.style.cursor,i.objColl.length>0&&("grab"!==i.cursor||!o)&&this.setCursorFromObj(t,e,i.objColl,r,o),"grab"===l&&"default"===i.cursor&&(r.style.cursor=i.cursor="grab")),("default"===i.cursor||"grab"===i.cursor)&&i.pointColl[0]&&("grab"!==i.cursor||!o)&&!i.currObjType.isDragging&&!i.currObjType.isResize&&this.setCursorForFreehandDrawing(t,e,r)}else r.style.cursor=i.cursor="crosshair"},s.prototype.setCursorForPath=function(t,e,i,n){this.setCursorForLineArrow(t,e,i,n);var r=this.parent;if("default"===r.cursor)for(var o=C({},t,null,!0),a=!1,l=1;l<t.pointColl.length&&!a;l++){o.activePoint.startX=t.pointColl[l-1].x,o.activePoint.startY=t.pointColl[l-1].y,o.activePoint.endX=t.pointColl[l].x,o.activePoint.endY=t.pointColl[l].y,r.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:o}});for(var h=0;h<o.pointColl.length;h++){var c=o.pointColl[h];if(!p(c.x-2*t.topLeftCircle.radius)&&!p(c.x+2*t.topLeftCircle.radius)&&!p(c.y-2*t.topLeftCircle.radius)&&!p(c.y+2*t.topLeftCircle.radius)&&e>=c.x-2*t.topLeftCircle.radius&&e<=c.x+2*t.topLeftCircle.radius&&i>=c.y-2*t.topLeftCircle.radius&&i<=c.y+2*t.topLeftCircle.radius){n.style.cursor=r.cursor="move",a=!0;break}n.style.cursor=r.cursor="default"}}return r.cursor},s.prototype.setCursorForLineArrow=function(t,e,i,n){for(var r,o=0;o<t.pointColl.length;o++){var a=t.pointColl[o];if(e>=a.x-2*t.topLeftCircle.radius&&e<=a.x+2*t.topLeftCircle.radius&&i>=a.y-2*t.topLeftCircle.radius&&i<=a.y+2*t.topLeftCircle.radius){n.style.cursor=this.parent.cursor="move",r=o;break}n.style.cursor=this.parent.cursor="default"}return r},s.prototype.setCursorForRotatedObject=function(t,e,i,n){this.resizedElement="";var r=this.parent;if(e>=t.horTopLinePointColl[0].x-(t.bottomCenterCircle.radius+2)&&e<=t.horTopLinePointColl[0].x+(t.bottomCenterCircle.radius+2)&&i>=t.horTopLinePointColl[0].y-(t.bottomCenterCircle.radius+2)&&i<=t.horTopLinePointColl[0].y+(t.bottomCenterCircle.radius+2)?n.style.cursor=r.cursor="nw-resize":e>=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length/2)].x-5&&e<=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length/2)].x+5&&i>=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length/2)].y-5&&i<=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length/2)].y+5?n.style.cursor=r.cursor=this.resizedElement="n-resize":e>=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length-1)].x-(t.bottomCenterCircle.radius+2)&&e<=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length-1)].x+(t.bottomCenterCircle.radius+2)&&i>=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length-1)].y-(t.bottomCenterCircle.radius+2)&&i<=t.horTopLinePointColl[Math.round(t.horTopLinePointColl.length-1)].y+(t.bottomCenterCircle.radius+2)?n.style.cursor=r.cursor="ne-resize":e>=t.verLeftLinePointColl[Math.round(t.verLeftLinePointColl.length/2)].x-5&&e<=t.verLeftLinePointColl[Math.round(t.verLeftLinePointColl.length/2)].x+5&&i>=t.verLeftLinePointColl[Math.round(t.verLeftLinePointColl.length/2)].y-5&&i<=t.verLeftLinePointColl[Math.round(t.verLeftLinePointColl.length/2)].y+5?n.style.cursor=r.cursor=this.resizedElement="w-resize":e>=t.verRightLinePointColl[Math.round(t.verRightLinePointColl.length/2)].x-5&&e<=t.verRightLinePointColl[Math.round(t.verRightLinePointColl.length/2)].x+5&&i>=t.verRightLinePointColl[Math.round(t.verRightLinePointColl.length/2)].y-5&&i<=t.verRightLinePointColl[Math.round(t.verRightLinePointColl.length/2)].y+5?n.style.cursor=r.cursor=this.resizedElement="e-resize":e>=t.horBottomLinePointColl[0].x-(t.bottomCenterCircle.radius+2)&&e<=t.horBottomLinePointColl[0].x+(t.bottomCenterCircle.radius+2)&&i>=t.horBottomLinePointColl[0].y-(t.bottomCenterCircle.radius+2)&&i<=t.horBottomLinePointColl[0].y+(t.bottomCenterCircle.radius+2)?n.style.cursor=r.cursor="sw-resize":e>=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length/2)].x-5&&e<=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length/2)].x+5&&i>=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length/2)].y-5&&i<=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length/2)].y+5?n.style.cursor=r.cursor=this.resizedElement="s-resize":e>=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length-1)].x-(t.bottomCenterCircle.radius+2)&&e<=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length-1)].x+(t.bottomCenterCircle.radius+2)&&i>=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length-1)].y-(t.bottomCenterCircle.radius+2)&&i<=t.horBottomLinePointColl[Math.round(t.horBottomLinePointColl.length-1)].y+(t.bottomCenterCircle.radius+2)?n.style.cursor=r.cursor="se-resize":t.rotationCirclePointColl&&e>=t.rotationCirclePointColl.x-(t.bottomCenterCircle.radius+2)&&e<=t.rotationCirclePointColl.x+(t.bottomCenterCircle.radius+2)&&i>=t.rotationCirclePointColl.y-(t.bottomCenterCircle.radius+2)&&i<=t.rotationCirclePointColl.y+(t.bottomCenterCircle.radius+2)?n.style.cursor=r.cursor="grabbing":(n.style.cursor=r.cursor="default",this.getRectanglePoints(t.activePoint.startX,t.activePoint.startY,t.activePoint.width,t.activePoint.height,t.rotatedAngle*(180/Math.PI),e,i)&&(n.style.cursor=r.cursor="move")),"default"===r.cursor)for(var a=0,l=t.horTopLinePointColl.length;a<l;a++)if(e>=t.horTopLinePointColl[a].x-5&&e<=t.horTopLinePointColl[a].x+5&&i>=t.horTopLinePointColl[a].y-5&&i<=t.horTopLinePointColl[a].y+5){n.style.cursor=r.cursor=this.resizedElement="n-resize";break}if("default"===r.cursor)for(a=0,l=t.horBottomLinePointColl.length;a<l;a++)if(e>=t.horBottomLinePointColl[a].x-5&&e<=t.horBottomLinePointColl[a].x+5&&i>=t.horBottomLinePointColl[a].y-5&&i<=t.horBottomLinePointColl[a].y+5){n.style.cursor=r.cursor=this.resizedElement="s-resize";break}if("default"===r.cursor)for(a=0,l=t.verLeftLinePointColl.length;a<l;a++)if(e>=t.verLeftLinePointColl[a].x-5&&e<=t.verLeftLinePointColl[a].x+5&&i>=t.verLeftLinePointColl[a].y-5&&i<=t.verLeftLinePointColl[a].y+5){n.style.cursor=r.cursor=this.resizedElement="w-resize";break}if("default"===r.cursor)for(a=0,l=t.verRightLinePointColl.length;a<l;a++)if(e>=t.verRightLinePointColl[a].x-5&&e<=t.verRightLinePointColl[a].x+5&&i>=t.verRightLinePointColl[a].y-5&&i<=t.verRightLinePointColl[a].y+5){n.style.cursor=r.cursor=this.resizedElement="e-resize";break}return this.adjustCursorStylesForRotatedState(t),r.cursor},s.prototype.adjustCursorStylesForRotatedState=function(t){var e=this.parent,i=t.rotatedAngle*(180/Math.PI);if((i=i>0?Math.floor(i):Math.ceil(i))>=92&&i<=182||i>=-178&&i<=-88){var n={"nw-resize":"ne-resize","n-resize":"s-resize","ne-resize":"nw-resize","w-resize":"e-resize","e-resize":"w-resize","sw-resize":"se-resize","s-resize":"n-resize","se-resize":"sw-resize"};e.cursor in n&&(e.cursor=n[e.cursor])}return e.upperCanvas.style.cursor=this.getResizeElement(t.rotatedAngle*(180/Math.PI),e.cursor),e.cursor},s.prototype.getResizeElement=function(t,e){var i=[];"nw-resize"===e?i=[[337.5,22.5,"nw-resize"],[22.5,67.5,"n-resize"],[67.5,112.5,"ne-resize"],[112.5,157.5,"e-resize"],[157.5,202.5,"se-resize"],[202.5,247.5,"s-resize"],[247.5,292.5,"sw-resize"],[292.5,337.5,"w-resize"]]:"n-resize"===e?i=[[337.5,22.5,"n-resize"],[22.5,67.5,"ne-resize"],[67.5,112.5,"e-resize"],[112.5,157.5,"se-resize"],[157.5,202.5,"s-resize"],[202.5,247.5,"sw-resize"],[247.5,292.5,"w-resize"],[292.5,337.5,"nw-resize"]]:"ne-resize"===e?i=[[337.5,22.5,"ne-resize"],[22.5,67.5,"e-resize"],[67.5,112.5,"se-resize"],[112.5,157.5,"s-resize"],[157.5,202.5,"sw-resize"],[202.5,247.5,"w-resize"],[247.5,292.5,"nw-resize"],[292.5,337.5,"n-resize"]]:"e-resize"===e?i=[[337.5,22.5,"e-resize"],[22.5,67.5,"se-resize"],[67.5,112.5,"s-resize"],[112.5,157.5,"sw-resize"],[157.5,202.5,"w-resize"],[202.5,247.5,"nw-resize"],[247.5,292.5,"n-resize"],[292.5,337.5,"ne-resize"]]:"se-resize"===e?i=[[337.5,22.5,"se-resize"],[22.5,67.5,"s-resize"],[67.5,112.5,"sw-resize"],[112.5,157.5,"w-resize"],[157.5,202.5,"nw-resize"],[202.5,247.5,"n-resize"],[247.5,292.5,"ne-resize"],[292.5,337.5,"e-resize"]]:"s-resize"===e?i=[[337.5,22.5,"s-resize"],[22.5,67.5,"sw-resize"],[67.5,112.5,"w-resize"],[112.5,157.5,"nw-resize"],[157.5,202.5,"n-resize"],[202.5,247.5,"ne-resize"],[247.5,292.5,"e-resize"],[292.5,337.5,"se-resize"]]:"sw-resize"===e?i=[[337.5,22.5,"sw-resize"],[22.5,67.5,"w-resize"],[67.5,112.5,"nw-resize"],[112.5,157.5,"n-resize"],[157.5,202.5,"ne-resize"],[202.5,247.5,"e-resize"],[247.5,292.5,"se-resize"],[292.5,337.5,"s-resize"]]:"w-resize"===e&&(i=[[337.5,22.5,"w-resize"],[22.5,67.5,"nw-resize"],[67.5,112.5,"n-resize"],[112.5,157.5,"ne-resize"],[157.5,202.5,"e-resize"],[202.5,247.5,"se-resize"],[247.5,292.5,"s-resize"],[292.5,337.5,"sw-resize"]]);for(var n=t<0?360-Math.abs(t):t,r=0,o=i;r<o.length;r++){var a=o[r],l=a[0],h=a[1];if(n>l&&n<=h||n+360>l&&n+360<=h)return a[2]}return e},s.prototype.setCursorForFreehandDrawing=function(t,e,i){var n=i.getContext("2d"),r=this.parent,o=document.querySelector("#"+r.element.id+"_textArea"),a=!1;r.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:-1}});for(var l,h=0;h<r.freehandCounter;h++){var c={selPointColl:{}};r.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:c}}),l=C([],c.selPointColl[h].points,[]),r.points=C([],r.pointColl[h].points,[]),r.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}});for(var u=l.length,d=0;d<u;d++)if(0!==d){var f=!1;if(l[d-1]&&l[d]&&(f=this.isInside(t,e,l[d-1].x,l[d-1].y,l[d].x,l[d].y)),f){this.isFhdPoint=!0,r.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:h}}),r.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}),i.style.cursor=r.cursor="pointer",a=!0;break}this.isFhdEditing&&!r.pointColl[h].isSelected||((this.isFhdPoint||this.isFhdEditing)&&(n.clearRect(0,0,i.width,i.height),r.activeObj.shape&&"none"===o.style.display&&r.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:r.activeObj}})),r.notify("freehand-draw",this.isFhdEditing?{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:r.pointColl[h].strokeColor,strokeWidth:r.pointColl[h].strokeWidth}}:{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:null}}),this.isFhdPoint=!1)}else{if(t>r.points[d].x-r.pointColl[h].strokeWidth&&t<r.points[d].x+r.pointColl[h].strokeWidth&&e>r.points[d].y-r.pointColl[h].strokeWidth&&e<r.points[d].y+r.pointColl[h].strokeWidth){this.isFhdPoint=!0,r.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:h}}),r.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}),i.style.cursor=r.cursor="pointer",a=!0;break}this.isFhdEditing&&!r.pointColl[h].isSelected||((this.isFhdPoint||this.isFhdEditing)&&(n.clearRect(0,0,i.width,i.height),r.activeObj.shape&&"none"===o.style.display&&r.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:r.activeObj}})),this.isFhdEditing&&r.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:r.pointColl[h].strokeColor,strokeWidth:r.pointColl[h].strokeWidth}}),this.isFhdPoint=!1)}if(a)break}},s.prototype.setCursorFromObj=function(t,e,i,n,r){for(var o=this.parent,a=0,l=i.length;a<l;a++){if("move"===o.cursor)return;var h=C({},i[a],{},!0);this.cursorTargetId=h.currIndex,"line"===h.shape||"arrow"===h.shape?this.setCursorForLineArrow(h,t,e,n):"path"===h.shape?this.setCursorForPath(h,t,e,n):p(h.rotatedAngle)||0===h.rotatedAngle?n.style.cursor=o.cursor=this.getMouseCursor(h,t,e,r,!0):this.setCursorForRotatedObject(h,t,e,n)}},s.prototype.isInside=function(t,e,i,n,r,o){var a=Math.min(i,r),l=Math.max(i,r),h=Math.min(n,o),c=Math.max(n,o);return a<=t&&t<=l&&h<=e&&e<=c},s.prototype.updateActivePoint=function(t,e,i){var n=this.parent,r={width:0,height:0};n.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:n.activeObj.activePoint.width,height:n.activeObj.activePoint.height,obj:r}});var o=r,a=this.updatePrevShapeSettings(),l={action:"resize",previousShapeSettings:a},h={action:"move",previousShapeSettings:a};p(this.shapeResizingArgs)&&(this.shapeResizingArgs=l),p(this.shapeMovingArgs)&&(this.shapeMovingArgs=h),"text"===n.activeObj.shape&&""!==this.dragElement&&n.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:n.activeObj,isTextArea:null}}),""!==this.currentDrawingShape&&(""===this.dragElement||"move"===this.dragElement)&&("line"===n.activeObj.shape||"arrow"===n.activeObj.shape||"path"===n.activeObj.shape?this.dragElement="e-resize":t>n.activeObj.activePoint.startX&&e>n.activeObj.activePoint.startY?this.dragElement="se-resize":t<n.activeObj.activePoint.startX&&e>n.activeObj.activePoint.startY?this.dragElement="sw-resize":t>n.activeObj.activePoint.startX&&e<n.activeObj.activePoint.startY?this.dragElement="ne-resize":t<n.activeObj.activePoint.startX&&e<n.activeObj.activePoint.startY&&(this.dragElement="nw-resize")),"arrow"===n.activeObj.shape&&(n.activeObj.rotatedAngle=Math.atan2(t-n.lowerCanvas.width/2,e-n.lowerCanvas.height/2)>0?-Math.atan2(t-n.lowerCanvas.width/2,e-n.lowerCanvas.height/2):Math.abs(Math.atan2(t-n.lowerCanvas.width/2,e-n.lowerCanvas.height/2)));var c,u=!1,d=!1;switch(this.dragElement.toLowerCase()){case"nw-resize":this.updateNWPoints(t,e,o),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(l,h,"resize");break;case"n-resize":this.updateNPoints(t,e),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(l,h,"resize");break;case"ne-resize":this.updateNEPoints(t,e,o),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(l,h,"resize");break;case"w-resize":this.updateWPoints(t,e),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(l,h,"resize");break;case"e-resize":this.updateEPoints(t,e),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(l,h,"resize");break;case"sw-resize":this.updateSWPoints(t,e,o),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(l,h,"resize");break;case"s-resize":this.updateSPoints(t,e),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(l,h,"resize");break;case"se-resize":this.updateSEPoints(t,e,o),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(l,h,"resize");break;case"grabbing":n.activeObj.rotatedAngle=Math.atan2(t-(n.activeObj.activePoint.startX+n.activeObj.activePoint.width/2),e-(n.activeObj.activePoint.startY+n.activeObj.activePoint.height/2))>0?-Math.atan2(t-(n.activeObj.activePoint.startX+n.activeObj.activePoint.width/2),e-(n.activeObj.activePoint.startY+n.activeObj.activePoint.height/2)):Math.abs(Math.atan2(t-(n.activeObj.activePoint.startX+n.activeObj.activePoint.width/2),e-(n.activeObj.activePoint.startY+n.activeObj.activePoint.height/2))),(c=0===n.activeObj.shapeDegree?n.transform.degree:n.transform.degree-n.activeObj.shapeDegree)<0&&(c=360+c);for(var f=0,v=n.activeObj.flipObjColl.length;f<v;f++)"horizontal"===n.activeObj.flipObjColl[f].toLowerCase()?u=!0:"vertical"===n.activeObj.flipObjColl[f].toLowerCase()&&(d=!0);n.activeObj.rotatedAngle-=c*(Math.PI/180),0===c||360===c?d&&(n.activeObj.rotatedAngle-=Math.PI/180*180):90===c||-270===c?u&&(n.activeObj.rotatedAngle-=Math.PI/180*180):180===c||-180===c?d&&(n.activeObj.rotatedAngle-=Math.PI/180*180):(270===c||-90===c)&&u&&(n.activeObj.rotatedAngle-=Math.PI/180*180);break;case"pathdrag":p(this.pathAdjustedIndex)||(n.activeObj.pointColl[this.pathAdjustedIndex].x=t,n.activeObj.pointColl[this.pathAdjustedIndex].y=e);break;default:if(!i&&!n.currObjType.isCustomCrop){if(this.dragPoint.startX){var g=this.dragPoint.endX-this.previousPoint.x,b=this.dragPoint.endY-this.previousPoint.y;if(n.activeObj.activePoint.startX+=g,n.activeObj.activePoint.endX+=g,n.activeObj.activePoint.startY+=b,n.activeObj.activePoint.endY+=b,"line"!==n.activeObj.shape&&"arrow"!==n.activeObj.shape&&n.activeObj.rotationCirclePointColl&&(n.activeObj.rotationCirclePointColl.x+=g,n.activeObj.rotationCirclePointColl.y+=b,n.activeObj.rotationCirclePoint.x+=g,n.activeObj.rotationCirclePoint.y+=b),"path"===n.activeObj.shape)for(f=0,v=n.activeObj.pointColl.length;f<v;f++)n.activeObj.pointColl[f].x+=g,n.activeObj.pointColl[f].y+=b;!this.isPreventDragging&&(n.activeObj.activePoint.startX<n.img.destLeft||n.activeObj.activePoint.startY<n.img.destTop||n.activeObj.activePoint.endX>n.img.destLeft+n.img.destWidth||n.activeObj.activePoint.endY>n.img.destTop+n.img.destHeight)&&(n.activeObj.activePoint.startX-=g,n.activeObj.activePoint.endX-=g,n.activeObj.activePoint.startY-=b,n.activeObj.activePoint.endY-=b,"line"!==n.activeObj.shape&&"arrow"!==n.activeObj.shape&&n.activeObj.rotationCirclePointColl&&(n.activeObj.rotationCirclePointColl.x-=g,n.activeObj.rotationCirclePointColl.y-=b,n.activeObj.rotationCirclePoint.x-=g,n.activeObj.rotationCirclePoint.y-=b),this.setDragWidth(g),this.setDragHeight(b))}else n.activeObj.activePoint.startX=t<this.mouseDownPoint.x?t:this.mouseDownPoint.x,n.activeObj.activePoint.startY=e<this.mouseDownPoint.y?e:this.mouseDownPoint.y,e=e<this.mouseDownPoint.y?this.mouseDownPoint.y:e,n.activeObj.activePoint.endX=t=t<this.mouseDownPoint.x?this.mouseDownPoint.x:t,n.activeObj.activePoint.endY=e;this.triggerShapeChange(l,h,"move")}}},s.prototype.triggerShapeChange=function(t,e,i){var n=this.parent;n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY;var r=this.updatePrevShapeSettings();if(t.currentShapeSettings=r,e.currentShapeSettings=r,"resize"===i){this.isCropSelection=!1;var o=void 0;if(void 0!==n.activeObj.shape&&(o=n.activeObj.shape.split("-")),void 0!==o&&"crop"===o[0]&&(this.isCropSelection=!0),!this.isCropSelection&&"resize"!==this.parent.eventType&&z()&&n.events&&!0===this.parent.events.onShapeResizeStart.hasDelegate)t.action="resize-start",n.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShapeResizeStart",t).then(function(l){n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:l.currentShapeSettings}})});else if(this.isCropSelection){var a={action:t.action,previousSelectionSettings:{type:n.getSelectionType(n.activeObj.shape),startX:t.previousShapeSettings.startX,startY:t.previousShapeSettings.startY,width:t.previousShapeSettings.width,height:t.previousShapeSettings.height},currentSelectionSettings:{type:n.getSelectionType(n.activeObj.shape),startX:t.currentShapeSettings.startX,startY:t.currentShapeSettings.startY,width:t.currentShapeSettings.width,height:t.currentShapeSettings.height}};p(this.selectionResizingArgs)&&(this.selectionResizingArgs=a),z()&&p(this.parent.eventType)&&n.events&&!0===n.events.onSelectionResizeStart.hasDelegate?(a.action="resize-start",n.dotNetRef.invokeMethodAsync("SelectionEventAsync","OnSelectionResizeStart",a).then(function(l){n.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:l.currentSelectionSettings}})})):(n.trigger("selectionChanging",a),n.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:a.currentSelectionSettings}}))}else n.trigger("shapeChanging",t),n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:t.currentShapeSettings}})}else z()&&p(this.parent.eventType)&&n.events&&!0===n.events.onShapeDragStart.hasDelegate?(e.action="drag-start",n.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShapeDragStart",e).then(function(l){n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:l.currentShapeSettings}})})):(n.trigger("shapeChanging",e),n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}}));this.parent.eventType=i},s.prototype.setDragWidth=function(t){var e=this.parent,i=t;if(i>=0)for(var n=0;n<i&&(e.activeObj.activePoint.startX+=t=i-n,e.activeObj.activePoint.endX+=t,!(e.activeObj.activePoint.startX>=e.img.destLeft&&e.activeObj.activePoint.endX<=e.img.destLeft+e.img.destWidth));n++)e.activeObj.activePoint.startX-=t,e.activeObj.activePoint.endX-=t;else for(n=1;n<Math.abs(i)&&(e.activeObj.activePoint.startX+=t=i+n,e.activeObj.activePoint.endX+=t,!(e.activeObj.activePoint.startX>=e.img.destLeft&&e.activeObj.activePoint.endX<=e.img.destLeft+e.img.destWidth));n++)e.activeObj.activePoint.startX-=t,e.activeObj.activePoint.endX-=t},s.prototype.setDragHeight=function(t){var e=this.parent,i=t;if(i>=0)for(var n=1;n<i&&(e.activeObj.activePoint.startY+=t=i-n,e.activeObj.activePoint.endY+=t,!(e.activeObj.activePoint.startY>=e.img.destTop&&e.activeObj.activePoint.endY<=e.img.destTop+e.img.destHeight));n++)e.activeObj.activePoint.startY-=t,e.activeObj.activePoint.endY-=t;else for(n=0;n<Math.abs(i)&&(e.activeObj.activePoint.startY+=t=i+n,e.activeObj.activePoint.endY+=t,!(e.activeObj.activePoint.startY>=e.img.destTop&&e.activeObj.activePoint.endY<=e.img.destTop+e.img.destHeight));n++)e.activeObj.activePoint.startY-=t,e.activeObj.activePoint.endY-=t},s.prototype.limitDrag=function(t){var e=this.parent,i=t?e.activeObj.activePoint.startX:e.activeObj.activePoint.endX,n=t?e.activeObj.activePoint.startY:e.activeObj.activePoint.endY,r=t?e.activeObj.activePoint.endX:e.activeObj.activePoint.startX,o=t?e.activeObj.activePoint.endY:e.activeObj.activePoint.startY;i<e.img.destLeft&&(i=e.img.destLeft),n<e.img.destTop&&(n=e.img.destTop),r>e.img.destLeft+e.img.destWidth&&(r=e.img.destLeft+e.img.destWidth),o>e.img.destTop+e.img.destHeight&&(o=e.img.destTop+e.img.destHeight),t?(e.activeObj.activePoint.startX=i,e.activeObj.activePoint.startY=n,e.activeObj.activePoint.endX=r,e.activeObj.activePoint.endY=o):(e.activeObj.activePoint.startX=r,e.activeObj.activePoint.startY=o,e.activeObj.activePoint.endX=i,e.activeObj.activePoint.endY=n)},s.prototype.preventDraggingInvertly=function(){var t=this.parent;!this.isPreventDragging&&0===t.activeObj.rotatedAngle&&(this.limitDrag(!0),("line"===t.activeObj.shape||"arrow"===t.activeObj.shape||"path"===t.activeObj.shape)&&this.limitDrag(!1))},s.prototype.preventTextDraggingInvertly=function(){var t=this.parent,e=!1;return this.isPreventDragging||(t.activeObj.activePoint.startX<t.img.destLeft||t.activeObj.activePoint.startY<t.img.destTop||t.activeObj.activePoint.endX>t.img.destLeft+t.img.destWidth||t.activeObj.activePoint.endY>t.img.destTop+t.img.destHeight)&&(e=!0),e},s.prototype.preventInverseResize=function(t){var e=this.parent;e.activeObj.activePoint.width<0&&(e.activeObj.activePoint.width=0,e.activeObj.activePoint.startX=t.activePoint.startX,e.activeObj.activePoint.endX=t.activePoint.endX),e.activeObj.activePoint.height<0&&(e.activeObj.activePoint.height=0,e.activeObj.activePoint.startY=t.activePoint.startY,e.activeObj.activePoint.endY=t.activePoint.endY)},s.prototype.getScaleRatio=function(t){var e=this.parent,i={x:t,y:t};if(e.activeObj.shape&&"crop-custom"!==e.activeObj.shape&&"crop-circle"!==e.activeObj.shape&&"crop-square"!==e.activeObj.shape){var n=e.activeObj.shape.split("-");if(n.length>1){n=n[1].split(":");var r=t/parseInt(n[1],10);i.x=r*parseInt(n[0],10),i.y=r*parseInt(n[1],10)}}return i},s.prototype.updateNWPoints=function(t,e,i){var r,o,a,l,h,n=this.parent,c=this.diffPoint.x,u=this.diffPoint.y,d=C({},n.activeObj,null,!0);if("text"===n.activeObj.shape)void 0===this.oldPoint.x&&void 0===this.oldPoint.y?(this.diffPoint.x=n.activeObj.activePoint.startX-t,this.diffPoint.y=n.activeObj.activePoint.startY-e):(this.diffPoint.x=this.oldPoint.x-t,this.diffPoint.y=this.oldPoint.y-e),this.oldPoint.x=t,this.oldPoint.y=e,r=this.diffPoint.x<=c&&this.diffPoint.y>=u?Math.min(this.diffPoint.x,this.diffPoint.y):Math.max(this.diffPoint.x,this.diffPoint.y),n.activeObj.activePoint.startX-=i.width/100*(h=r/10),n.activeObj.activePoint.startY-=i.height/100*h,this.preventTextDraggingInvertly()&&(n.activeObj.activePoint.startX+=i.width/100*h,n.activeObj.activePoint.startY+=i.height/100*h),n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,n.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:n.activeObj}});else{var f=void 0;if(void 0!==n.activeObj.shape&&(f=n.activeObj.shape.split("-")),"crop-custom"===n.activeObj.shape||void 0!==n.activeObj.shape&&"crop"!==f[0]){if(this.adjustNWPoints(n.activeObj.activePoint,t,e,n.activeObj.rotatedAngle),n.activeObj.activePoint.startX>n.activeObj.activePoint.endX){var v=n.activeObj.activePoint.startX;n.activeObj.activePoint.startX=n.activeObj.activePoint.endX,n.activeObj.activePoint.endX=v,this.dragElement=n.upperCanvas.style.cursor=n.cursor="ne-resize"}n.activeObj.activePoint.startY>n.activeObj.activePoint.endY&&(v=n.activeObj.activePoint.startY,n.activeObj.activePoint.startY=n.activeObj.activePoint.endY,n.activeObj.activePoint.endY=v,this.dragElement=n.upperCanvas.style.cursor=n.cursor="sw-resize"),this.preventDraggingInvertly()}else if(n.activeObj.activePoint.startX<t&&n.activeObj.activePoint.startY<e){o=t-n.activeObj.activePoint.startX,a=e-n.activeObj.activePoint.startY,l=Math.min(o,a);var g=this.getScaleRatio(l);n.activeObj.activePoint.startX+=g.x,n.activeObj.activePoint.startY+=g.y,(n.activeObj.activePoint.startX<(n.img.destLeft>0?n.img.destLeft:0)||n.activeObj.activePoint.startY<(n.img.destTop>0?n.img.destTop:0))&&(n.activeObj.activePoint.startX-=g.x,n.activeObj.activePoint.startY-=g.y)}else o=n.activeObj.activePoint.startX-t,a=e-n.activeObj.activePoint.endY,l=Math.max(o,a),g=this.getScaleRatio(l),n.activeObj.activePoint.startX-=g.x,n.activeObj.activePoint.startY-=g.y,(n.activeObj.activePoint.startX<(n.img.destLeft>0?n.img.destLeft:0)||n.activeObj.activePoint.startY<(n.img.destTop>0?n.img.destTop:0))&&(n.activeObj.activePoint.startX+=g.x,n.activeObj.activePoint.startY+=g.y);n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,this.preventInverseResize(d)}},s.prototype.updateNPoints=function(t,e){var n,r,o,i=this.parent;if("text"!==i.activeObj.shape){var a=void 0;if(i.activeObj.shape&&(a=i.activeObj.shape.split("-")),"crop-custom"===i.activeObj.shape||i.activeObj.shape&&"crop"!==a[0]){if("line"!==i.activeObj.shape&&"arrow"!==i.activeObj.shape&&"path"!==i.activeObj.shape&&0!==i.activeObj.rotatedAngle&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e),this.adjustRotationPoints(i.activeObj.activePoint,n=this.dragPoint.endX-this.previousPoint.x,r=this.dragPoint.endY-this.previousPoint.y,i.activeObj.rotatedAngle)):(i.activeObj.activePoint.startY=e,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY),i.activeObj.activePoint.startY>i.activeObj.activePoint.endY){var l=i.activeObj.activePoint.startY;i.activeObj.activePoint.startY=i.activeObj.activePoint.endY,i.activeObj.activePoint.endY=l,this.dragElement=this.resizedElement="s-resize"}this.preventDraggingInvertly()}else{if(i.activeObj.activePoint.endX>t&&i.activeObj.activePoint.startY<e){n=i.activeObj.activePoint.endX-t,r=e-i.activeObj.activePoint.startY,o=Math.min(n,r);var h=this.getScaleRatio(o);i.activeObj.activePoint.endX-=h.x,i.activeObj.activePoint.startY+=h.y,(i.activeObj.activePoint.endX>i.img.destLeft+i.img.destWidth||i.activeObj.activePoint.startY<i.img.destTop)&&(i.activeObj.activePoint.endX+=h.x,i.activeObj.activePoint.startY-=h.y)}else n=t-i.activeObj.activePoint.endX,r=i.activeObj.activePoint.startY-e,o=Math.max(n,r),h=this.getScaleRatio(o),i.activeObj.activePoint.endX+=h.x,i.activeObj.activePoint.startY-=h.y,(i.activeObj.activePoint.endX>i.img.destLeft+i.img.destWidth||i.activeObj.activePoint.startY<i.img.destTop)&&(i.activeObj.activePoint.endX-=h.x,i.activeObj.activePoint.startY+=h.y);i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY}}},s.prototype.updateNEPoints=function(t,e,i){var r,o,a,l,h,n=this.parent,c=this.diffPoint.x,u=this.diffPoint.y,d=C({},n.activeObj,null,!0);if("text"===n.activeObj.shape)void 0===this.oldPoint.x&&void 0===this.oldPoint.y?(this.diffPoint.x=t-n.activeObj.activePoint.endX,this.diffPoint.y=n.activeObj.activePoint.startY-e):(this.diffPoint.x=t-this.oldPoint.x,this.diffPoint.y=this.oldPoint.y-e),this.oldPoint.x=t,this.oldPoint.y=e,r=this.diffPoint.x<=c&&this.diffPoint.y>=u?Math.min(this.diffPoint.x,this.diffPoint.y):Math.max(this.diffPoint.x,this.diffPoint.y),n.activeObj.activePoint.endX+=i.width/100*(h=r/10),n.activeObj.activePoint.startY-=i.height/100*h,this.preventTextDraggingInvertly()&&(n.activeObj.activePoint.endX-=i.width/100*h,n.activeObj.activePoint.startY+=i.height/100*h),n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,n.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:n.activeObj}});else{var f=void 0;if(n.activeObj.shape&&(f=n.activeObj.shape.split("-")),"crop-custom"===n.activeObj.shape||void 0!==n.activeObj.shape&&"crop"!==f[0]){if(this.adjustNEPoints(n.activeObj.activePoint,t,e,n.activeObj.rotatedAngle),n.activeObj.activePoint.endX<n.activeObj.activePoint.startX){var v=n.activeObj.activePoint.endX;n.activeObj.activePoint.endX=n.activeObj.activePoint.startX,n.activeObj.activePoint.startX=v,this.dragElement=n.upperCanvas.style.cursor=n.cursor="nw-resize"}n.activeObj.activePoint.startY>n.activeObj.activePoint.endY&&(v=n.activeObj.activePoint.startY,n.activeObj.activePoint.startY=n.activeObj.activePoint.endY,n.activeObj.activePoint.endY=v,this.dragElement=n.upperCanvas.style.cursor=n.cursor="se-resize"),this.preventDraggingInvertly()}else if(n.activeObj.activePoint.endX>t&&n.activeObj.activePoint.startY<e){o=n.activeObj.activePoint.endX-t,a=e-n.activeObj.activePoint.startY,l=Math.min(o,a);var g=this.getScaleRatio(l);n.activeObj.activePoint.endX-=g.x,n.activeObj.activePoint.startY+=g.y;var M=n.img.destTop>0?n.img.destTop:0;(n.activeObj.activePoint.endX>(n.img.destLeft+n.img.destWidth<n.lowerCanvas.width?n.img.destLeft+n.img.destWidth:n.lowerCanvas.width)||n.activeObj.activePoint.startY<M)&&(n.activeObj.activePoint.endX+=g.x,n.activeObj.activePoint.startY-=g.y)}else o=t-n.activeObj.activePoint.endX,a=n.activeObj.activePoint.startY-e,l=Math.max(o,a),g=this.getScaleRatio(l),n.activeObj.activePoint.endX+=g.x,n.activeObj.activePoint.startY-=g.y,M=n.img.destTop>0?n.img.destTop:0,(n.activeObj.activePoint.endX>(n.img.destLeft+n.img.destWidth<n.lowerCanvas.width?n.img.destLeft+n.img.destWidth:n.lowerCanvas.width)||n.activeObj.activePoint.startY<M)&&(n.activeObj.activePoint.endX-=g.x,n.activeObj.activePoint.startY+=g.y);n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,this.preventInverseResize(d)}},s.prototype.updateWPoints=function(t,e){var n,r,o,i=this.parent;if("text"!==i.activeObj.shape){var a=void 0;if(i.activeObj.shape&&(a=i.activeObj.shape.split("-")),"crop-custom"===i.activeObj.shape||i.activeObj.shape&&"crop"!==a[0]){if("line"!==i.activeObj.shape&&"arrow"!==i.activeObj.shape&&"path"!==i.activeObj.shape&&0!==i.activeObj.rotatedAngle&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e),this.adjustRotationPoints(i.activeObj.activePoint,n=this.dragPoint.endX-this.previousPoint.x,r=this.dragPoint.endY-this.previousPoint.y,i.activeObj.rotatedAngle)):(i.activeObj.activePoint.startX=t,i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX),"line"===i.activeObj.shape||"arrow"===i.activeObj.shape||"path"===i.activeObj.shape)i.activeObj.activePoint.startY=e,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY,this.adjustActObjForLineArrow()&&(this.dragElement="e-resize","right"===i.activeObj.triangleDirection?i.activeObj.triangleDirection="left":"left"===i.activeObj.triangleDirection&&(i.activeObj.triangleDirection="right"));else if(i.activeObj.activePoint.startX>i.activeObj.activePoint.endX){var l=i.activeObj.activePoint.startX;i.activeObj.activePoint.startX=i.activeObj.activePoint.endX,i.activeObj.activePoint.endX=l,this.dragElement=this.resizedElement="e-resize"}this.preventDraggingInvertly()}else{if(i.activeObj.activePoint.startX<t&&i.activeObj.activePoint.endY>e){n=t-i.activeObj.activePoint.startX,r=i.activeObj.activePoint.endY-e,o=Math.min(n,r);var h=this.getScaleRatio(o);i.activeObj.activePoint.startX+=h.x,i.activeObj.activePoint.endY-=h.y,(i.activeObj.activePoint.startX<i.img.destLeft||i.activeObj.activePoint.endY>i.img.destTop+i.img.destHeight)&&(i.activeObj.activePoint.startX-=h.x,i.activeObj.activePoint.endY+=h.y)}else n=i.activeObj.activePoint.startX-t,r=e-i.activeObj.activePoint.endY,o=Math.max(n,r),h=this.getScaleRatio(o),i.activeObj.activePoint.startX-=h.x,i.activeObj.activePoint.endY+=h.y,(i.activeObj.activePoint.startX<i.img.destLeft||i.activeObj.activePoint.endY>i.img.destTop+i.img.destHeight)&&(i.activeObj.activePoint.startX+=h.x,i.activeObj.activePoint.endY-=h.y);i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY}}},s.prototype.updateEPoints=function(t,e){var n,r,o,i=this.parent;if("text"!==i.activeObj.shape){var a=void 0;if(i.activeObj.shape&&(a=i.activeObj.shape.split("-")),"crop-custom"===i.activeObj.shape||i.activeObj.shape&&"crop"!==a[0]){if("line"!==i.activeObj.shape&&"arrow"!==i.activeObj.shape&&"path"!==i.activeObj.shape&&0!==i.activeObj.rotatedAngle&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e),this.adjustRotationPoints(i.activeObj.activePoint,n=this.dragPoint.endX-this.previousPoint.x,r=this.dragPoint.endY-this.previousPoint.y,i.activeObj.rotatedAngle)):(i.activeObj.activePoint.endX=t,i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX),"line"===i.activeObj.shape||"arrow"===i.activeObj.shape||"path"===i.activeObj.shape)i.activeObj.activePoint.endY=e,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY,this.adjustActObjForLineArrow()&&(this.dragElement="w-resize","right"===i.activeObj.triangleDirection?i.activeObj.triangleDirection="left":"left"===i.activeObj.triangleDirection&&(i.activeObj.triangleDirection="right"));else if(i.activeObj.activePoint.endX<i.activeObj.activePoint.startX){var l=i.activeObj.activePoint.endX;i.activeObj.activePoint.endX=i.activeObj.activePoint.startX,i.activeObj.activePoint.startX=l,this.dragElement=this.resizedElement="w-resize"}this.preventDraggingInvertly()}else{if(i.activeObj.activePoint.endX>t&&i.activeObj.activePoint.endY>e){n=i.activeObj.activePoint.endX-t,r=i.activeObj.activePoint.endY-e,o=Math.min(n,r);var h=this.getScaleRatio(o);i.activeObj.activePoint.endX-=h.x,i.activeObj.activePoint.endY-=h.y,(i.activeObj.activePoint.endX>i.img.destLeft+i.img.destWidth||i.activeObj.activePoint.endY>i.img.destTop+i.img.destHeight)&&(i.activeObj.activePoint.endX+=h.x,i.activeObj.activePoint.endY+=h.y)}else n=t-i.activeObj.activePoint.endX,r=e-i.activeObj.activePoint.endY,o=Math.max(n,r),h=this.getScaleRatio(o),i.activeObj.activePoint.endX+=h.x,i.activeObj.activePoint.endY+=h.y,(i.activeObj.activePoint.endX>i.img.destLeft+i.img.destWidth||i.activeObj.activePoint.endY>i.img.destTop+i.img.destHeight)&&(i.activeObj.activePoint.endX-=h.x,i.activeObj.activePoint.endY-=h.y);i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY}}},s.prototype.updateSWPoints=function(t,e,i){var r,o,a,l,h,n=this.parent,c=this.diffPoint.x,u=this.diffPoint.y,d=C({},n.activeObj,null,!0);if("text"===n.activeObj.shape)p(this.oldPoint.x)&&p(this.oldPoint.y)?(this.diffPoint.x=n.activeObj.activePoint.startX-t,this.diffPoint.y=e-n.activeObj.activePoint.endY):(this.diffPoint.x=this.oldPoint.x-t,this.diffPoint.y=e-this.oldPoint.y),this.oldPoint.x=t,this.oldPoint.y=e,r=this.diffPoint.x<=c&&this.diffPoint.y>=u?Math.min(this.diffPoint.x,this.diffPoint.y):Math.max(this.diffPoint.x,this.diffPoint.y),n.activeObj.activePoint.startX-=i.width/100*(h=r/10),n.activeObj.activePoint.endY+=i.height/100*h,this.preventTextDraggingInvertly()&&(n.activeObj.activePoint.startX+=i.width/100*h,n.activeObj.activePoint.endY-=i.height/100*h),n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,n.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:n.activeObj}});else{var f=void 0;if(void 0!==n.activeObj.shape&&(f=n.activeObj.shape.split("-")),"crop-custom"===n.activeObj.shape||void 0!==n.activeObj.shape&&"crop"!==f[0]){if(this.adjustSWPoints(n.activeObj.activePoint,t,e,n.activeObj.rotatedAngle),n.activeObj.activePoint.startX>n.activeObj.activePoint.endX){var v=n.activeObj.activePoint.startX;n.activeObj.activePoint.startX=n.activeObj.activePoint.endX,n.activeObj.activePoint.endX=v,this.dragElement=n.upperCanvas.style.cursor=n.cursor="se-resize"}n.activeObj.activePoint.endY<n.activeObj.activePoint.startY&&(v=n.activeObj.activePoint.endY,n.activeObj.activePoint.endY=n.activeObj.activePoint.startY,n.activeObj.activePoint.startY=v,this.dragElement=n.upperCanvas.style.cursor=n.cursor="nw-resize"),this.preventDraggingInvertly()}else if(n.activeObj.activePoint.startX<t&&n.activeObj.activePoint.endY>e){o=t-n.activeObj.activePoint.startX,a=n.activeObj.activePoint.endY-e,l=Math.min(o,a);var g=this.getScaleRatio(l);n.activeObj.activePoint.startX+=g.x,n.activeObj.activePoint.endY-=g.y;var M=n.img.destTop+n.img.destHeight<n.lowerCanvas.height?n.img.destTop+n.img.destHeight:n.lowerCanvas.height;(n.activeObj.activePoint.startX<(n.img.destLeft>0?n.img.destLeft:0)||n.activeObj.activePoint.endY>M)&&(n.activeObj.activePoint.startX-=g.x,n.activeObj.activePoint.endY+=g.y)}else o=n.activeObj.activePoint.startX-t,a=e-n.activeObj.activePoint.endY,l=Math.max(o,a),g=this.getScaleRatio(l),n.activeObj.activePoint.startX-=g.x,n.activeObj.activePoint.endY+=g.y,M=n.img.destTop+n.img.destHeight<n.lowerCanvas.height?n.img.destTop+n.img.destHeight:n.lowerCanvas.height,(n.activeObj.activePoint.startX<(n.img.destLeft>0?n.img.destLeft:0)||n.activeObj.activePoint.endY>M)&&(n.activeObj.activePoint.startX+=g.x,n.activeObj.activePoint.endY-=g.y);n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,this.preventInverseResize(d)}},s.prototype.updateSPoints=function(t,e){var n,r,o,i=this.parent;if("text"!==i.activeObj.shape){var a=void 0;if(i.activeObj.shape&&(a=i.activeObj.shape.split("-")),"crop-custom"===i.activeObj.shape||i.activeObj.shape&&"crop"!==a[0]){if("line"!==i.activeObj.shape&&"arrow"!==i.activeObj.shape&&"path"!==i.activeObj.shape&&0!==i.activeObj.rotatedAngle&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e),this.adjustRotationPoints(i.activeObj.activePoint,n=this.dragPoint.endX-this.previousPoint.x,r=this.dragPoint.endY-this.previousPoint.y,i.activeObj.rotatedAngle)):(i.activeObj.activePoint.endY=e,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY),i.activeObj.activePoint.endY<i.activeObj.activePoint.startY){var l=i.activeObj.activePoint.endY;i.activeObj.activePoint.endY=i.activeObj.activePoint.startY,i.activeObj.activePoint.startY=l,this.dragElement=this.resizedElement="n-resize"}this.preventDraggingInvertly()}else{if(i.activeObj.activePoint.endX>t&&i.activeObj.activePoint.endY>e){n=i.activeObj.activePoint.endX-t,r=i.activeObj.activePoint.endY-e,o=Math.min(n,r);var h=this.getScaleRatio(o);i.activeObj.activePoint.endX-=h.x,i.activeObj.activePoint.endY-=h.y,(i.activeObj.activePoint.endX>i.img.destLeft+i.img.destWidth||i.activeObj.activePoint.endY>i.img.destTop+i.img.destHeight)&&(i.activeObj.activePoint.endX+=h.x,i.activeObj.activePoint.endY+=h.y)}else n=t-i.activeObj.activePoint.endX,r=e-i.activeObj.activePoint.endY,o=Math.max(n,r),h=this.getScaleRatio(o),i.activeObj.activePoint.endX+=h.x,i.activeObj.activePoint.endY+=h.x,(i.activeObj.activePoint.endX>i.img.destLeft+i.img.destWidth||i.activeObj.activePoint.endY>i.img.destTop+i.img.destHeight)&&(i.activeObj.activePoint.endX-=h.x,i.activeObj.activePoint.endY-=h.y);i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY}}},s.prototype.updateSEPoints=function(t,e,i){var r,o,a,l,h,n=this.parent,c=this.diffPoint.x,u=this.diffPoint.y,d=C({},n.activeObj,null,!0);if("text"===n.activeObj.shape)void 0===this.oldPoint.x&&void 0===this.oldPoint.y?(this.diffPoint.x=t-n.activeObj.activePoint.endX,this.diffPoint.y=e-n.activeObj.activePoint.endY):(this.diffPoint.x=t-this.oldPoint.x,this.diffPoint.y=e-this.oldPoint.y),this.oldPoint.x=t,this.oldPoint.y=e,r=this.diffPoint.x>=c&&this.diffPoint.y>=u?Math.max(this.diffPoint.x,this.diffPoint.y):Math.min(this.diffPoint.x,this.diffPoint.y),n.activeObj.activePoint.endX+=i.width/50*(h=r/10),n.activeObj.activePoint.endY+=i.height/50*h,this.preventTextDraggingInvertly()&&(n.activeObj.activePoint.endX-=i.width/50*h,n.activeObj.activePoint.endY-=i.height/50*h),n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,n.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:n.activeObj}});else{var f=void 0;if(void 0!==n.activeObj.shape&&(f=n.activeObj.shape.split("-")),"crop-custom"===n.activeObj.shape||void 0!==n.activeObj.shape&&"crop"!==f[0]){if(this.adjustSEPoints(n.activeObj.activePoint,t,e,n.activeObj.rotatedAngle),n.activeObj.activePoint.endX<n.activeObj.activePoint.startX){var v=n.activeObj.activePoint.endX;n.activeObj.activePoint.endX=n.activeObj.activePoint.startX,n.activeObj.activePoint.startX=v,this.dragElement=n.upperCanvas.style.cursor=n.cursor="sw-resize"}n.activeObj.activePoint.endY<n.activeObj.activePoint.startY&&(v=n.activeObj.activePoint.endY,n.activeObj.activePoint.endY=n.activeObj.activePoint.startY,n.activeObj.activePoint.startY=v,this.dragElement=n.upperCanvas.style.cursor=n.cursor="ne-resize"),this.preventDraggingInvertly()}else if(n.activeObj.activePoint.endX>t&&n.activeObj.activePoint.endY>e){o=n.activeObj.activePoint.endX-t,a=n.activeObj.activePoint.endY-e,l=Math.min(o,a);var g=this.getScaleRatio(l);n.activeObj.activePoint.endX-=g.x,n.activeObj.activePoint.endY-=g.y;var M=n.img.destTop+n.img.destHeight<n.lowerCanvas.height?n.img.destTop+n.img.destHeight:n.lowerCanvas.height;(n.activeObj.activePoint.endX>(n.img.destLeft+n.img.destWidth<n.lowerCanvas.width?n.img.destLeft+n.img.destWidth:n.lowerCanvas.width)||n.activeObj.activePoint.endY>M)&&(n.activeObj.activePoint.endX+=g.x,n.activeObj.activePoint.endY+=g.y)}else o=t-n.activeObj.activePoint.endX,a=e-n.activeObj.activePoint.endY,l=Math.max(o,a),g=this.getScaleRatio(l),n.activeObj.activePoint.endX+=g.x,n.activeObj.activePoint.endY+=g.y,M=n.img.destTop+n.img.destHeight<n.lowerCanvas.height?n.img.destTop+n.img.destHeight:n.lowerCanvas.height,(n.activeObj.activePoint.endX>(n.img.destLeft+n.img.destWidth<n.lowerCanvas.width?n.img.destLeft+n.img.destWidth:n.lowerCanvas.width)||n.activeObj.activePoint.endY>M)&&(n.activeObj.activePoint.endX-=g.x,n.activeObj.activePoint.endY-=g.y);n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,this.preventInverseResize(d)}},s.prototype.adjustNWPoints=function(t,e,i,n){var a=this.rotatePoints(t.endX,t.endY,t.startX+t.width/2,t.startY+t.height/2,n),l=[(a[0]+e)/2,(a[1]+i)/2],h=this.rotatePoints(a[0],a[1],l[0],l[1],-n),c=this.rotatePoints(e,i,l[0],l[1],-n);return t.endX=h[0],t.endY=h[1],t.startY=c[1],t.startX=c[0],t.width=t.endX-t.startX,t.height=t.endY-t.startY,t},s.prototype.adjustNEPoints=function(t,e,i,n){var a=this.rotatePoints(t.startX,t.endY,t.startX+t.width/2,t.startY+t.height/2,n),l=[(a[0]+e)/2,(a[1]+i)/2],h=this.rotatePoints(a[0],a[1],l[0],l[1],-n),c=this.rotatePoints(e,i,l[0],l[1],-n);return t.startX=h[0],t.endY=h[1],t.width=c[0]-h[0],t.height=h[1]-c[1],t.endX=t.startX+t.width,t.startY=t.endY-t.height,t},s.prototype.adjustSWPoints=function(t,e,i,n){var a=this.rotatePoints(t.endX,t.startY,t.startX+t.width/2,t.startY+t.height/2,n),l=[(a[0]+e)/2,(a[1]+i)/2],h=this.rotatePoints(a[0],a[1],l[0],l[1],-n),c=this.rotatePoints(e,i,l[0],l[1],-n);return t.endX=h[0],t.startY=h[1],t.startX=c[0],t.endY=c[1],t.width=t.endX-t.startX,t.height=t.endY-t.startY,t},s.prototype.adjustSEPoints=function(t,e,i,n){var a=this.rotatePoints(t.startX,t.startY,t.startX+t.width/2,t.startY+t.height/2,n),l=[(a[0]+e)/2,(a[1]+i)/2],h=this.rotatePoints(a[0],a[1],l[0],l[1],-n),c=this.rotatePoints(e,i,l[0],l[1],-n);return t.startX=h[0],t.startY=h[1],t.width=c[0]-h[0],t.height=c[1]-h[1],t.endX=t.startX+t.width,t.endY=t.startY+t.height,t},s.prototype.adjustRotationPoints=function(t,e,i,n){var r=t.startX+t.width/2,o=t.startY+t.height/2;this.getResizeDirection(t,e,i,n);var a=this.rotatePoints(t.startX,t.startY,r,o,n),l=this.rotatePoints(t.endX,t.startY,r,o,n),h=this.rotatePoints(t.endX,t.endY,r,o,n),c=this.rotatePoints(t.startX,t.endY,r,o,n),u=[(a[0]+h[0])/2,(a[1]+h[1])/2],d=this.rotatePoints(a[0],a[1],u[0],u[1],-n),f=this.rotatePoints(c[0],c[1],u[0],u[1],-n),v=this.rotatePoints(l[0],l[1],u[0],u[1],-n);return t.startX=d[0],t.startY=d[1],t.endX=v[0],t.endY=f[1],t.width=t.endX-t.startX,t.height=t.endY-t.startY,t},s.prototype.rotatePoints=function(t,e,i,n,r){return[(t-i)*Math.cos(r)-(e-n)*Math.sin(r)+i,(t-i)*Math.sin(r)+(e-n)*Math.cos(r)+n]},s.prototype.setResizedValue=function(t,e,i,n){switch(t){case"x":e+=i;break;case"y":e+=n;break;case"abs-x":e+=i>0?-i:Math.abs(i);break;case"abs-y":e+=n>0?-n:Math.abs(n);break;case"y-abs-x":e+=n+(i>0?-i:Math.abs(i))/2;break;case"abs-x-abs-y":e+=(i>0?-i:Math.abs(i))+(n>0?-n:Math.abs(n))/2;break;case"abs-y-x":e+=(n>0?-n:Math.abs(n))+i/2;break;case"x-y":e+=i+n/2}return e},s.prototype.getResizeDirection=function(t,e,i,n){var r=n*(180/Math.PI),o=this.getResizedElement(r,this.resizedElement);"e-resize"===this.resizedElement?(t.width=this.setResizedValue(o,t.width,e,i),t.endX=t.width+t.startX):"n-resize"===this.resizedElement?(t.startY=this.setResizedValue(o,t.startY,e,i),t.height=t.endY-t.startY):"w-resize"===this.resizedElement?(t.startX=this.setResizedValue(o,t.startX,e,i),t.width=t.startX+t.endX):"s-resize"===this.resizedElement&&(t.height=this.setResizedValue(o,t.height,e,i),t.endY=t.height+t.startY)},s.prototype.getResizedElement=function(t,e){var i=[];"n-resize"===e?i=[[337.5,360,"y"],[0,22.5,"y"],[22.5,67.5,"y-abs-x"],[67.5,112.5,"abs-x"],[112.5,157.5,"abs-x-abs-y"],[157.5,202.5,"abs-y"],[202.5,247.5,"abs-y-x"],[247.5,292.5,"x"],[292.5,337.5,"x-y"]]:"e-resize"===e?i=[[337.5,360,"x"],[0,22.5,"x"],[22.5,67.5,"x-y"],[67.5,112.5,"y"],[112.5,157.5,"y-abs-x"],[157.5,202.5,"abs-x"],[202.5,247.5,"abs-x-abs-y"],[247.5,292.5,"abs-y"],[292.5,337.5,"abs-y-x"]]:"s-resize"===e?i=[[337.5,360,"y"],[0,22.5,"y"],[22.5,67.5,"y-abs-x"],[67.5,112.5,"abs-x"],[112.5,157.5,"abs-x-abs-y"],[157.5,202.5,"abs-y"],[202.5,247.5,"abs-y-x"],[247.5,292.5,"x"],[292.5,337.5,"x-y"]]:"w-resize"===e&&(i=[[337.5,360,"x"],[0,22.5,"x"],[22.5,67.5,"x-y"],[67.5,112.5,"y"],[112.5,157.5,"y-abs-x"],[157.5,202.5,"abs-x"],[202.5,247.5,"abs-x-abs-y"],[247.5,292.5,"abs-y"],[292.5,337.5,"abs-y-x"]]);for(var n=t<0?360-Math.abs(t):t,r=0,o=i;r<o.length;r++){var a=o[r],l=a[0],h=a[1];if(n>l&&n<=h||n+360>l&&n+360<=h)return a[2]}return e},s.prototype.updateCursorStyles=function(t,e,i){var n=this.parent,r=!1;""!==n.activeObj.keyHistory&&void 0===n.activeObj.shape&&!n.currObjType.isCustomCrop&&!n.currObjType.isLine&&n.currObjType.isText&&(n.activeObj.shape="text");var o=C({},n.activeObj,{},!0);if(!p(o.topLeftCircle)){var a;if((a=0===o.shapeDegree?n.transform.degree:n.transform.degree-o.shapeDegree)<0&&(a=360+a),this.isObjSelected)if("line"===o.shape||"arrow"===o.shape)r=this.updateCursorStylesForLineArrow(t,e,o);else if("path"===o.shape)r=this.updateCursorStylesForPath(t,e,o);else if(o.rotatedAngle)this.setCursorForRotatedObject(o,t,e,n.upperCanvas),"grabbing"===n.cursor?(n.upperCanvas.style.cursor=this.parent.cursor="grabbing",this.dragElement=n.cursor):"move"===n.cursor?(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e):"default"!==n.cursor&&(r=!0,this.dragElement=n.cursor,n.currObjType.isResize=!0);else{var l=this.getTransRotationPoint(o);t>=o.topLeftCircle.startX-2*o.topLeftCircle.radius&&t<=o.topLeftCircle.startX+2*o.topLeftCircle.radius&&e>=o.topLeftCircle.startY-2*o.topLeftCircle.radius&&e<=o.topLeftCircle.startY+2*o.topLeftCircle.radius&&"nw-resize"!==this.dragElement?(o.topLeftCircle.startX=o.topLeftCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="nw-resize",r=!0,this.dragElement=n.upperCanvas.style.cursor):t>=o.topLeftCircle.startX-2*o.topLeftCircle.radius&&t<=o.topRightCircle.startX-2*o.topLeftCircle.radius&&e>=o.topCenterCircle.startY-2*o.topLeftCircle.radius&&e<=o.topCenterCircle.startY+2*o.topLeftCircle.radius&&"n-resize"!==this.dragElement?(o.topCenterCircle.startX=o.topCenterCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="n-resize",r=!0,this.dragElement=n.upperCanvas.style.cursor):t>=o.topRightCircle.startX-2*o.topLeftCircle.radius&&t<=o.topRightCircle.startX+2*o.topLeftCircle.radius&&e>=o.topRightCircle.startY-2*o.topLeftCircle.radius&&e<=o.topRightCircle.startY+2*o.topLeftCircle.radius&&"ne-resize"!==this.dragElement?(o.topRightCircle.startX=o.topRightCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="ne-resize",r=!0,this.dragElement=n.upperCanvas.style.cursor):t>=o.centerLeftCircle.startX-2*o.topLeftCircle.radius&&t<=o.centerLeftCircle.startX+2*o.topLeftCircle.radius&&e>=o.topLeftCircle.startY-2*o.topLeftCircle.radius&&e<=o.bottomLeftCircle.startY-2*o.topLeftCircle.radius&&"w-resize"!==this.dragElement?(o.centerLeftCircle.startX=o.centerLeftCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="w-resize",r=!0,this.dragElement=n.upperCanvas.style.cursor):t>=o.centerRightCircle.startX-2*o.topLeftCircle.radius&&t<=o.centerRightCircle.startX+2*o.topLeftCircle.radius&&e>=o.topRightCircle.startY-2*o.topLeftCircle.radius&&e<=o.bottomRightCircle.startY-2*o.topLeftCircle.radius&&"e-resize"!==this.dragElement?(o.centerRightCircle.startX=o.centerRightCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="e-resize",r=!0,this.dragElement=n.upperCanvas.style.cursor):t>=o.bottomLeftCircle.startX-2*o.topLeftCircle.radius&&t<=o.bottomLeftCircle.startX+2*o.topLeftCircle.radius&&e>=o.bottomLeftCircle.startY-2*o.topLeftCircle.radius&&e<=o.bottomLeftCircle.startY+2*o.topLeftCircle.radius&&"sw-resize"!==this.dragElement?(o.bottomLeftCircle.startX=o.bottomLeftCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="sw-resize",r=!0,this.dragElement=n.upperCanvas.style.cursor):t>=o.bottomLeftCircle.startX-2*o.topLeftCircle.radius&&t<=o.bottomRightCircle.startX-2*o.topLeftCircle.radius&&e>=o.bottomCenterCircle.startY-2*o.topLeftCircle.radius&&e<=o.bottomCenterCircle.startY+2*o.topLeftCircle.radius&&"s-resize"!==this.dragElement?(o.bottomCenterCircle.startX=o.bottomCenterCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="s-resize",r=!0,this.dragElement=n.upperCanvas.style.cursor):t>=o.bottomRightCircle.startX-2*o.topLeftCircle.radius&&t<=o.bottomRightCircle.startX+2*o.topLeftCircle.radius&&e>=o.bottomRightCircle.startY-2*o.topLeftCircle.radius&&e<=o.bottomRightCircle.startY+2*o.topLeftCircle.radius&&"se-resize"!==this.dragElement?(o.bottomRightCircle.startX=o.bottomRightCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="se-resize",r=!0,this.dragElement=n.upperCanvas.style.cursor):l&&t>=l.x-2*o.topLeftCircle.radius&&t<=l.x+2*o.topLeftCircle.radius&&e>=l.y-2*o.topLeftCircle.radius&&e<=l.y+2*o.topLeftCircle.radius&&"grabbing"!==this.dragElement?(n.upperCanvas.style.cursor=n.cursor="grabbing",this.dragElement=n.upperCanvas.style.cursor):(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e),"text"===o.shape&&("n-resize"===n.cursor||"s-resize"===n.cursor||"e-resize"===n.cursor||"w-resize"===n.cursor)&&(n.upperCanvas.style.cursor=n.cursor="move",this.dragElement="",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e)}else this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e;this.previousPoint.x=this.previousPoint.y=this.diffPoint.x=this.diffPoint.y=0,"touchstart"===i?r||t>=o.activePoint.startX&&t<=o.activePoint.endX&&e>=o.activePoint.startY&&e<=o.activePoint.endY||"grabbing"===this.dragElement?n.currObjType.isDragging=!0:"line"===o.shape||"arrow"===o.shape?(this.setCursorForLineArrow(o,t,e,n.upperCanvas),"move"===n.cursor&&(n.currObjType.isDragging=!0)):"path"===o.shape&&(this.setCursorForPath(o,t,e,n.upperCanvas),"move"===n.cursor&&(n.currObjType.isDragging=!0)):n.currObjType.isDragging=!0,0!==o.rotatedAngle&&("e-resize"===this.dragElement||"w-resize"===this.dragElement||"n-resize"===this.dragElement||"s-resize"===this.dragElement)&&(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e)}},s.prototype.updateCursorStylesForLineArrow=function(t,e,i){for(var o,n=!1,r=this.parent,a=0;a<5;a++)if(t>=(o=i.pointColl[a]).x-2*i.topLeftCircle.radius&&t<=o.x+2*i.topLeftCircle.radius&&e>=o.y-2*i.topLeftCircle.radius&&e<=o.y+2*i.topLeftCircle.radius){i.centerLeftCircle.startX=i.centerLeftCircle.startY=0,this.dragElement="w-resize",n=!0;break}if(!n)for(a=1;a<6;a++)if(t>=(o=i.pointColl[i.pointColl.length-a]).x-2*i.topLeftCircle.radius&&t<=o.x+2*i.topLeftCircle.radius&&e>=o.y-2*i.topLeftCircle.radius&&e<=o.y+2*i.topLeftCircle.radius){i.centerRightCircle.startX=i.centerRightCircle.startY=0,this.dragElement="e-resize",n=!0;break}if(!n)for(a=0;a<i.pointColl.length;a++){if(t>=(o=i.pointColl[a]).x-2*i.topLeftCircle.radius&&t<=o.x+2*i.topLeftCircle.radius&&e>=o.y-2*i.topLeftCircle.radius&&e<=o.y+2*i.topLeftCircle.radius){r.upperCanvas.style.cursor=r.cursor="move",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e;break}r.upperCanvas.style.cursor=r.cursor="default"}return n},s.prototype.updateCursorStylesForPath=function(t,e,i){var n=!1;return this.pathAdjustedIndex=this.setCursorForLineArrow(i,t,e,this.parent.upperCanvas),"move"===this.parent.cursor&&(n=!0,this.dragElement="pathDrag"),n||(this.parent.upperCanvas.style.cursor=this.parent.cursor="move",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=t,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=e),n},s.prototype.setTextSelection=function(t,e){var i=this.parent,n=i.transform.degree;(n=0===i.activeObj.shapeDegree?i.transform.degree:i.transform.degree-i.activeObj.shapeDegree)<0&&(n=360+n);for(var r=0,o=i.activeObj.flipObjColl.length;r<o;r++){var a=i.activeObj.flipObjColl[r].toLowerCase();switch(n){case 0:switch(a){case"horizontal":i.activeObj.activePoint={startX:i.activeObj.activePoint.endX-t,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.startY+(e||0)};break;case"vertical":i.activeObj.activePoint.startY=i.activeObj.activePoint.endY-e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.startX+(t||0),endY:i.activeObj.activePoint.endY};break;default:i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.startX+(t||0),endY:i.activeObj.activePoint.startY+(e||0)}}break;case 90:switch(a){case"horizontal":i.activeObj.activePoint.endX=i.activeObj.activePoint.startX+e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.startY+(t||0)};break;case"vertical":i.activeObj.activePoint.startX=i.activeObj.activePoint.endX-e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.endY-t,endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.endY};break;default:i.activeObj.activePoint.startX=i.activeObj.activePoint.endX-e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.startY+(t||0)}}break;case 180:switch(a){case"horizontal":i.activeObj.activePoint.startY=i.activeObj.activePoint.endY-e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.startX+t,endY:i.activeObj.activePoint.endY};break;case"vertical":i.activeObj.activePoint.endY=i.activeObj.activePoint.startY+e,i.activeObj.activePoint={endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.endY,startX:i.activeObj.activePoint.endX-(t||0),startY:i.activeObj.activePoint.startY};break;default:i.activeObj.activePoint={endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.endY,startX:i.activeObj.activePoint.endX-(t||0),startY:i.activeObj.activePoint.endY-(e||0)}}break;case 270:switch(a){case"horizontal":i.activeObj.activePoint.startX=i.activeObj.activePoint.endX-e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.endY-(t||0),endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.endY};break;case"vertical":i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.startX+e,endY:i.activeObj.activePoint.startY+(t||0)};break;default:i.activeObj.activePoint.endX=i.activeObj.activePoint.startX+e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.endY-(t||0),endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.endY}}}}if(0===i.activeObj.flipObjColl.length)switch(n){case 0:i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.startX+(t||0),endY:i.activeObj.activePoint.startY+(e||0)};break;case 90:i.activeObj.activePoint.startX=i.activeObj.activePoint.endX-e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.startY,endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.startY+(t||0)};break;case 180:i.activeObj.activePoint={endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.endY,startX:i.activeObj.activePoint.endX-(t||0),startY:i.activeObj.activePoint.endY-(e||0)};break;case 270:i.activeObj.activePoint.endX=i.activeObj.activePoint.startX+e,i.activeObj.activePoint={startX:i.activeObj.activePoint.startX,startY:i.activeObj.activePoint.endY-(t||0),endX:i.activeObj.activePoint.endX,endY:i.activeObj.activePoint.endY}}i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY,(360===i.transform.degree||-360===i.transform.degree)&&(i.transform.degree=0)},s.prototype.setActivePoint=function(t,e){var i=this.parent;if(!p(i.activeObj.activePoint))if(i.currObjType.isText){var n=t||0,r=e||i.activeObj.textSettings.fontSize;void 0===i.activeObj.textSettings.fontSize&&(i.activeObj.textSettings.fontSize=.1*Math.abs(i.baseImg.width-i.baseImg.height)),this.setTextSelection(n,r),this.mouseDownPoint.x=i.activeObj.activePoint.endX,this.mouseDownPoint.y=i.activeObj.activePoint.endY,void 0!==i.activeObj.horTopLine&&(i.activeObj.activePoint=C({},i.activeObj.activePoint,{},!0)),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}})}else if(t&&e)i.activeObj.activePoint.startX=this.mouseDownPoint.x=t,i.activeObj.activePoint.startY=this.mouseDownPoint.y=e,i.currObjType.isDragging=!0;else{var o=i.activeObj;i.activeObj.activePoint={startX:o.horTopLine.startX,startY:o.horTopLine.startY,endX:o.horTopLine.endX,endY:o.horTopLine.endY},i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY}},s.prototype.mouseDownEventHandler=function(t){var e=this,i=this.parent;if(this.isTouch="touchstart"===t.type,"touchstart"!==t.type||t.currentTarget!==i.lowerCanvas||i.isImageLoaded){var n;this.isCropSelection=!1,this.isPan=!0,void 0!==i.activeObj.shape&&(n=i.activeObj.shape.split("-")),void 0!==n&&"crop"===n[0]&&(this.isCropSelection=!0),this.isCropSelection&&(this.dragCanvas=i.togglePan=!0);var r={point:this.setXYPoints(t)};z()&&i.events&&!0===i.events.clicked.hasDelegate?i.dotNetRef.invokeMethodAsync("ClickEventAsync","click",r).then(function(o){e.clickEvent(o,t)}):(i.trigger("click",r),this.clickEvent(r,t))}},s.prototype.getImagePoints=function(t,e){var i=this.parent;return t<i.img.destLeft?t=i.img.destLeft:t>i.img.destLeft+i.img.destWidth&&(t=i.img.destLeft+i.img.destWidth),e<i.img.destTop?e=i.img.destTop:e>i.img.destTop+i.img.destHeight&&(e=i.img.destTop+i.img.destHeight),{x:t,y:e}},s.prototype.clickEvent=function(t,e){var i=this.parent,n=t.point.x,r=t.point.y,o=i.activeObj.shape&&"text"===i.activeObj.shape?i.cursor:"default";if(""!==this.currentDrawingShape){var a={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}}),this.initialPrevObj=a.currObj,this.initialPrevObj.objColl=C([],i.objColl,[],!0),this.initialPrevObj.pointColl=C([],i.pointColl,[],!0),this.initialPrevObj.afterCropActions=C([],i.afterCropActions,[],!0);var l={selPointColl:null};if(i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),this.initialPrevObj.selPointColl=C([],l.selPointColl,[],!0),this.setActivePoint(n,r),"path"===this.currentDrawingShape){var h=this.getImagePoints(n,r);i.activeObj.pointColl.push({x:h.x,y:h.y}),0!==i.activeObj.activePoint.width&&0!==i.activeObj.activePoint.height&&(i.activeObj.activePoint.width=0,i.activeObj.activePoint.height=0,i.activeObj.activePoint.startX=i.activeObj.pointColl[i.activeObj.pointColl.length-1].x,i.activeObj.activePoint.startY=i.activeObj.pointColl[i.activeObj.pointColl.length-1].y)}return i.activeObj.activePoint.endX=i.activeObj.activePoint.startX,i.activeObj.activePoint.endY=i.activeObj.activePoint.startY,void(i.currObjType.isDragging=!0)}this.isCropSelection&&this.dragCanvas&&(this.setCursor(n,r),"move"!==i.cursor&&"crosshair"!==i.cursor&&"default"!==i.cursor&&"grab"!==i.cursor&&(this.isPan=!1)),this.isObjSelected=!!i.activeObj.shape;var c={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:c}});var u=c.currObj,d=C({},i.activeObj,null,!0),f=this.isShapeTouch(e,this.isCropSelection),v=this.isFreehandDrawTouch(e,this.isCropSelection),g=f||this.isShapeClick(e,this.isCropSelection),b=this.applyCurrShape(g);if(this.isTouch&&!f&&d.shape&&!this.isCropSelection){this.applyObj(n,r)&&(i.okBtn(!0),i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}}));var M=C({},i.cropObj,{},!0);i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:M,previousText:null,currentText:null,previousFilter:null,isCircleCrop:i.isCircleCrop}}),b&&i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}if(!f&&!i.togglePen&&!this.isCropSelection&&(z()?i.isImageLoaded&&i.updateToolbar(i.element,"imageLoaded","okBtnClick"):(i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}))),!this.dragCanvas||!this.isPan||"grab"!==i.cursor&&!this.isTouch||f||v||i.togglePen){var w=!1;i.activeObj.shape&&("line"===i.activeObj.shape||"arrow"===i.activeObj.shape)&&(w=!0);var S=this.setXYPoints(e),I=S.x,P=S.y;this.applyObj(I,P)&&(i.okBtn(!0),b&&i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}})),i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:I,y:P,isMouseDown:!0}});var H={index:null};i.notify("freehand-draw",{prop:"getFreehandDrawHoveredIndex",onPropertyChange:!1,value:{obj:H}});var G={freehandSelectedIndex:null};if(i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:G}}),this.isFhdPoint||this.isFhdCustomized&&!i.togglePen){if(!p(G.freehandSelectedIndex)&&G.freehandSelectedIndex!==H.index){var ee=H.index;i.okBtn(),this.isFhdCustomized=!1,i.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:ee}}),H.index>-1&&i.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:i.pointColl[H.index].strokeColor,strokeWidth:i.pointColl[H.index].strokeWidth}})}G.freehandSelectedIndex=null,i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:G}}),!p(H.index)&&H.index>-1?(i.notify("freehand-draw",{prop:"selectFhd",value:{type:"ok"}}),z()?(i.updateToolbar(i.element,"pen"),i.updateToolbar(i.element,"quickAccessToolbar","pen")):i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}})):G.freehandSelectedIndex&&(i.okBtn(),i.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:i.pointColl[G.freehandSelectedIndex].strokeColor,strokeWidth:i.pointColl[G.freehandSelectedIndex].strokeWidth}}))}else{if(this.isFhdEditing&&(i.notify("freehand-draw",{prop:"cancelFhd",value:{type:"ok"}}),document.getElementById(i.element.id+"_quickAccessToolbarArea")&&(document.getElementById(i.element.id+"_quickAccessToolbarArea").style.display="none")),z()||i.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}),this.isFhdEditing=!1,w?this.setCursor(I,P):"default"!==o&&(i.upperCanvas.style.cursor=i.cursor=o),"crosshair"===i.cursor||O.isDevice&&i.togglePen){if(i.togglePen){if(p(i.activeObj.strokeSettings)){var Je={strokeSettings:{}};i.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:Je}}),i.activeObj.strokeSettings=Je.strokeSettings}var U={penStrokeWidth:null};i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:U}}),p(U.penStrokeWidth)&&i.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:2}}),this.upperContext.strokeStyle=i.activeObj.strokeSettings.strokeColor,this.upperContext.fillStyle=i.activeObj.strokeSettings.strokeColor,i.notify("freehand-draw",{prop:"freehandDownHandler",onPropertyChange:!1,value:{e,canvas:i.upperCanvas}})}else i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height);i.currObjType.isActiveObj=!1,this.dragElement="",this.dragPoint.startX=this.dragPoint.startY=this.dragPoint.endX=this.dragPoint.endY=0}"crosshair"!==i.cursor&&"touchstart"===e.type.toLowerCase()||i.currObjType.isActiveObj&&"default"!==i.cursor&&!i.togglePen?(i.currObjType.isUndoAction&&i.notify("undo-redo",{prop:"refreshUrc",value:{bool:null}}),this.findTarget(I,P,e.type)):(""===i.currObjType.shape||i.currObjType.isCustomCrop)&&!i.togglePen&&"default"!==i.cursor&&this.setActivePoint(I,P)}}else this.applyObj(n,r)&&(i.okBtn(!0),b&&i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}})),this.isFhdEditing&&(i.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.isFhdCustomized=!1,z()||i.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})),i.activeObj.shape&&("rectangle"===i.activeObj.shape||"ellipse"===i.activeObj.shape||"line"===i.activeObj.shape||"arrow"===i.activeObj.shape||"path"===i.activeObj.shape||"text"===i.activeObj.shape)&&(i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),z()?i.updateToolbar(i.element,"imageLoaded"):(i.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}}),i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}))),this.canvasMouseDownHandler(e);this.isShapeInserted=!1,this.tempActiveObj=C({},i.activeObj,{},!0)},s.prototype.mouseMoveEventHandler=function(t){var e=this.parent,i=e.cursor,n=e.upperCanvas.style.cursor;t.preventDefault();var r=e.lowerCanvas.getBoundingClientRect();if("touchmove"!==t.type||2!==t.touches.length){var f,v;"mousemove"===t.type?(f=t.clientX,v=t.clientY):(this.touchEndPoint.x=f=t.touches[0].clientX,this.touchEndPoint.y=v=t.touches[0].clientY),f-=r.left,v-=r.top,this.canvasMouseMoveHandler(t);var b,g=!1;void 0!==e.activeObj.shape&&(b=e.activeObj.shape.split("-")),void 0!==b&&"crop"===b[0]&&(g=!0),g&&e.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),e.upperCanvas.style.cursor=n,e.cursor=i,(e.currObjType.isActiveObj&&(void 0!==e.activeObj.activePoint||e.objColl.length>0)&&!this.dragCanvas||void 0!==e.activeObj.activePoint)&&""===this.dragElement&&(this.setCursor(f,v),e.activeObj.activePoint&&(0===e.activeObj.activePoint.width||!p(e.activeObj.currIndex)&&this.cursorTargetId!==e.activeObj.currIndex)&&"default"!==e.cursor&&"move"!==e.cursor&&"crosshair"!==e.cursor&&"grab"!==e.cursor&&"pointer"!==e.cursor&&(e.upperCanvas.style.cursor=e.cursor="move"),this.findTarget(f,v,t.type)),e.currObjType.isDragging&&(this.upperContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.updateActivePoint(f,v,g),e.notify("shape",{prop:"updateTrianglePoints",onPropertyChange:!1,value:{obj:e.activeObj}}),this.isPreventDragging?(e.activeObj.activePoint.startX>e.img.destLeft&&e.activeObj.activePoint.endX<e.img.destLeft+e.img.destWidth&&e.activeObj.activePoint.startY>e.img.destTop&&e.activeObj.activePoint.endY<e.img.destTop+e.img.destHeight&&(this.isPreventDragging=!1),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}})):e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:null,saveContext:null,isPreventSelection:null}}),g&&(this.dragCanvas=e.togglePan=!0))}else{if(this.isFirstMove)this.startTouches=this.targetTouches(t.touches),this.tempTouches=[],this.tempTouches.push({x:t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft-r.left,y:(t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop)-r.top}),this.tempTouches.push({x:(t.touches[1].clientX||t.touches[1].pageX-e.lowerCanvas.offsetLeft)-r.left,y:(t.touches[1].clientY||t.touches[1].pageY-e.lowerCanvas.offsetTop)-r.top});else{var o=(t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft)-r.left,a=(t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop)-r.top,l=(t.touches[1].clientX||t.touches[1].pageX-e.lowerCanvas.offsetLeft)-r.left,h=(t.touches[1].clientY||t.touches[1].pageY-e.lowerCanvas.offsetTop)-r.top,c={x:o<l?l-(l-o)/2:o-(o-l)/2,y:a<h?h-(h-a)/2:a-(a-h)/2};if(this.currMousePoint.x!==c.x&&this.currMousePoint.y!==c.y){var u="";if("touchmove"===t.type&&(e.zoomSettings.zoomTrigger&Nt.Pinch)===Nt.Pinch){this.zoomType="Pinch";var d=this.calculateScale(this.startTouches,this.targetTouches(t.touches));this.startTouches=this.targetTouches(t.touches),d>1?u="zoomIn":d<1&&(u="zoomOut")}""!==u&&e.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:c.x,y:c.y,type:u}}),this.tempTouches=[],this.tempTouches.push({x:t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft,y:t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop}),this.tempTouches.push({x:t.touches[1].clientX||t.touches[1].pageX-e.lowerCanvas.offsetLeft,y:t.touches[1].clientY||t.touches[1].pageY-e.lowerCanvas.offsetTop}),this.currMousePoint.x=c.x,this.currMousePoint.y=c.y}}this.isFirstMove=!1}},s.prototype.mouseUpEventHandler=function(t){var n,r,e=this,i=this.parent;"touchstart"===t.type?this.isTouch=!1:"touchend"===t.type&&t.stopImmediatePropagation(),t.preventDefault(),i.togglePan&&this.canvasMouseUpHandler(t),"mouseup"===t.type?(n=t.clientX,r=t.clientY):(n=this.touchEndPoint.x,r=this.touchEndPoint.y);var o=i.lowerCanvas.getBoundingClientRect();n-=o.left,r-=o.top,"touchend"===t.type&&(this.startTouches=this.tempTouches=[],this.isFirstMove=!1,"none"===i.textArea.style.display&&(this.timer=0));var l,a=!1;if(void 0!==i.activeObj.shape&&(l=i.activeObj.shape.split("-")),void 0!==l&&"crop"===l[0]&&(a=!0),z()&&this.parent.eventType&&("pan"===this.parent.eventType?i.events&&!0===i.events.onPanEnd.hasDelegate&&i.dotNetRef.invokeMethodAsync("PanEventAsync","OnPanEnd",this.parent.panEventArgs):"resize"===this.parent.eventType?!this.isCropSelection&&this.parent.events&&!0===this.parent.events.onShapeResizeEnd.hasDelegate?(this.shapeResizingArgs.currentShapeSettings=this.updatePrevShapeSettings(),this.shapeResizingArgs.action="resize-end",this.parent.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShapeResizeEnd",this.shapeResizingArgs).then(function(w){e.parent.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:w.currentShapeSettings}})})):this.shapeResizingArgs&&this.selectionResizingArgs&&this.parent.events&&!0===this.parent.events.onSelectionResizeEnd.hasDelegate&&(this.selectionResizingArgs.currentSelectionSettings={type:this.parent.activeObj.shape,startX:this.shapeResizingArgs.currentShapeSettings.startX,startY:this.shapeResizingArgs.currentShapeSettings.startY,width:this.shapeResizingArgs.currentShapeSettings.width,height:this.shapeResizingArgs.currentShapeSettings.height},this.selectionResizingArgs.action="resize-end",this.parent.dotNetRef.invokeMethodAsync("SelectionEventAsync","OnSelectionResizeEnd",this.selectionResizingArgs).then(function(w){e.parent.notify("shape",{prop:"updateSelectionChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:w.currentSelectionSettings}})})):this.shapeMovingArgs&&this.parent.events&&!0===this.parent.events.onShapeDragEnd.hasDelegate&&(this.shapeMovingArgs.currentShapeSettings=this.updatePrevShapeSettings(),this.shapeMovingArgs.action="drag-end",this.parent.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShapeDragEnd",this.shapeMovingArgs).then(function(w){e.parent.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:w.currentShapeSettings}})})),this.shapeResizingArgs=null,this.shapeMovingArgs=null,this.parent.panEventArgs=null,this.parent.eventType=null),"path"!==this.currentDrawingShape){if(t.currentTarget===i.upperCanvas){if(this.pathAdjustedIndex=null,""!==this.currentDrawingShape){if("text"===this.currentDrawingShape){var c=C({},i.cropObj,{},!0);i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:this.initialPrevObj,previousObjColl:this.initialPrevObj.objColl,previousPointColl:this.initialPrevObj.pointColl,previousSelPointColl:this.initialPrevObj.selPointColl,previousCropObj:c,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}else i.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:this.initialPrevObj.objColl}});this.isShapeInserted=!0,this.currentDrawingShape="",0===i.activeObj.activePoint.width&&0===i.activeObj.activePoint.height&&i.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}})}this.adjustActObjForLineArrow(),this.updPtCollForShpRot(),i.currObjType.shape=i.currObjType.shape.toLowerCase();var u=C({},i.cropObj,{},!0),d={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:d}});var f=d.currObj;f.objColl=C([],i.objColl,[],!0),f.pointColl=C([],i.pointColl,[],!0),f.afterCropActions=C([],i.afterCropActions,[],!0);var v={selPointColl:null};if(i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:v}}),f.selPointColl=C([],v.selPointColl,[],!0),!i.togglePen&&!a&&(this.tempObjColl&&0!==i.activeObj.activePoint.width&&(i.objColl.push(i.activeObj),JSON.stringify(i.activeObj.activePoint)!==JSON.stringify(this.tempActiveObj.activePoint)&&i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:f,previousObjColl:this.tempObjColl,previousPointColl:f.pointColl,previousSelPointColl:f.selPointColl,previousCropObj:u,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.redrawShape(i.objColl[i.objColl.length-1],!0),this.tempObjColl=void 0),this.isFhdEditing||(this.applyCurrActObj(n,r),i.currObjType.isResize=!1,z()||i.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}))),i.activeObj){var b,g=!1;void 0!==i.activeObj.shape&&(b=i.activeObj.shape.split("-")),(void 0===b&&(i.currObjType.isCustomCrop||i.togglePen)||void 0!==b&&"crop"===b[0])&&(g=!0),z()?"rectangle"===i.activeObj.shape||"ellipse"===i.activeObj.shape||"line"===i.activeObj.shape||"arrow"===i.activeObj.shape||"path"===i.activeObj.shape?i.updateToolbar(i.element,i.activeObj.shape):"text"===i.activeObj.shape&&i.updateToolbar(i.element,"text"):("rectangle"===i.activeObj.shape||"ellipse"===i.activeObj.shape||"line"===i.activeObj.shape||"arrow"===i.activeObj.shape||"path"===i.activeObj.shape?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):"text"===i.activeObj.shape?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):this.isFhdEditing?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):g||i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:!1,isZooming:null}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}))}}void 0!==i.activeObj.shape&&(l=i.activeObj.shape.split("-")),void 0!==l&&"crop"===l[0]&&(a=!0),i.activeObj.shape&&!a&&t.currentTarget===i.upperCanvas&&"none"===i.textArea.style.display&&("text"===i.activeObj.shape?z()||i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):z()||i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),z()?i.updateToolbar(i.element,"quickAccessToolbar",i.activeObj.shape):(i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}))),i.togglePen&&t.currentTarget===i.upperCanvas?i.notify("freehand-draw",{prop:"freehandUpHandler",onPropertyChange:!1,value:{e:t,canvas:i.upperCanvas,context:this.upperContext}}):i.currObjType.shape="",this.dragElement="",i.currObjType.isInitialLine=i.currObjType.isDragging=!1,this.selMouseUpEvent()}},s.prototype.adjustActObjForLineArrow=function(t){var e=!1,i=this.parent;if((t=t||i.activeObj).shape&&("line"===t.shape||"arrow"===i.activeObj.shape)){var n=void 0;if(("e-resize"===this.dragElement&&t.activePoint.endX<t.activePoint.startX||"w-resize"===this.dragElement&&t.activePoint.startX>t.activePoint.endX)&&(e=!0,n=t.activePoint.startX,t.activePoint.startX=t.activePoint.endX,t.activePoint.endX=n,n=t.activePoint.startY,t.activePoint.startY=t.activePoint.endY,t.activePoint.endY=n),t.activePoint.width=Math.abs(t.activePoint.endX-t.activePoint.startX),t.activePoint.height=Math.abs(t.activePoint.endY-t.activePoint.startY),"path"!==i.activeObj.shape){i.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:t}});for(var r=0;r<t.pointColl.length;r++)t.pointColl[r].ratioX=(t.pointColl[r].x-i.img.destLeft)/i.img.destWidth,t.pointColl[r].ratioY=(t.pointColl[r].y-i.img.destTop)/i.img.destHeight}}return e},s.prototype.updPtCollForShpRot=function(t){var e=this.parent;if((t=t||e.activeObj).shape&&0!==t.rotatedAngle){e.notify("shape",{prop:"setPointCollForShapeRotation",onPropertyChange:!1,value:{obj:t}});for(var i=0;i<t.horTopLinePointColl.length;i++)t.horTopLinePointColl[i].ratioX=(t.horTopLinePointColl[i].x-e.img.destLeft)/e.img.destWidth,t.horTopLinePointColl[i].ratioY=(t.horTopLinePointColl[i].y-e.img.destTop)/e.img.destHeight;for(i=0;i<t.horBottomLinePointColl.length;i++)t.horBottomLinePointColl[i].ratioX=(t.horBottomLinePointColl[i].x-e.img.destLeft)/e.img.destWidth,t.horBottomLinePointColl[i].ratioY=(t.horBottomLinePointColl[i].y-e.img.destTop)/e.img.destHeight;for(i=0;i<t.verLeftLinePointColl.length;i++)t.verLeftLinePointColl[i].ratioX=(t.verLeftLinePointColl[i].x-e.img.destLeft)/e.img.destWidth,t.verLeftLinePointColl[i].ratioY=(t.verLeftLinePointColl[i].y-e.img.destTop)/e.img.destHeight;for(i=0;i<t.verRightLinePointColl.length;i++)t.verRightLinePointColl[i].ratioX=(t.verRightLinePointColl[i].x-e.img.destLeft)/e.img.destWidth,t.verRightLinePointColl[i].ratioY=(t.verRightLinePointColl[i].y-e.img.destTop)/e.img.destHeight}},s.prototype.setXYPoints=function(t){var e,i;t.preventDefault(),"mousedown"===t.type?(e=t.clientX,i=t.clientY):(this.touchEndPoint.x=e=t.touches[0].clientX,this.touchEndPoint.y=i=t.touches[0].clientY);var n=this.parent.lowerCanvas.getBoundingClientRect();return{x:e-=n.left,y:i-=n.top}},s.prototype.getCurrentIndex=function(){for(var t,e=this.parent,i=0;i<e.objColl.length;i++)if(e.activeObj.currIndex===e.objColl[i].currIndex){t=i;break}return t},s.prototype.isShapeClick=function(t,e){var i=this.parent,n=!1;if(i.togglePen)return n;if(i.activeObj.shape&&"text"===i.activeObj.shape&&this.isShapeInserted){var r="block"===i.textArea.style.display,o=C({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var a=this.setXYPoints(t);if(n=this.findTargetObj(a.x,a.y,e),e||this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),r)i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=o,p(c=this.getCurrentIndex())?i.objColl.pop():i.objColl.splice(c,1);else if(!n&&o.shape){var c;i.activeObj=o,p(c=this.getCurrentIndex())||JSON.stringify(i.activeObj.activePoint)!==JSON.stringify(i.objColl[c].activePoint)?p(i.activeObj.currIndex)&&i.objColl.pop():i.objColl.splice(c,1)}}return n},s.prototype.isShapeTouch=function(t,e){var i=this.parent,n=!1;if("touchstart"===t.type&&!i.togglePen){i.activeObj&&"text"===i.activeObj.shape&&(this.timer=setTimeout(this.setTimer.bind(this),1e3,t));var r="block"===i.textArea.style.display,o=C({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var a=this.setXYPoints(t);if(n=this.findTargetObj(a.x,a.y,e),e||this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),r)i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=o,p(c=this.getCurrentIndex())?i.objColl.pop():i.objColl.splice(c,1);else if(!n&&o.shape){i.activeObj=o;var c=this.getCurrentIndex();e||(p(c)||JSON.stringify(i.activeObj.activePoint)!==JSON.stringify(i.objColl[c].activePoint)?p(i.activeObj.currIndex)&&i.objColl.pop():i.objColl.splice(c,1))}}return n},s.prototype.isFreehandDrawTouch=function(t,e){var i=this.parent,n=!1;if("touchstart"===t.type&&!e&&!i.togglePen){var r="block"===i.textArea.style.display,o=C({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var a=this.setXYPoints(t);if(this.setCursor(a.x,a.y),this.isFhdPoint&&(n=!0),r)i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=o,p(c=this.getCurrentIndex())?i.objColl.pop():i.objColl.splice(c,1);else if(o.shape){i.activeObj=o;var c=this.getCurrentIndex();e||(p(c)||JSON.stringify(i.activeObj.activePoint)!==JSON.stringify(i.objColl[c].activePoint)?p(i.activeObj.currIndex)&&i.objColl.pop():i.objColl.splice(c,1))}}return n},s.prototype.applyObj=function(t,e){var i=this.parent,n=!1;return i.activeObj.shape&&("rectangle"===i.activeObj.shape||"ellipse"===i.activeObj.shape||"text"===i.activeObj.shape||"line"===i.activeObj.shape||"arrow"===i.activeObj.shape||"path"===i.activeObj.shape)&&(n=!(t>=i.activeObj.activePoint.startX-2*i.activeObj.topLeftCircle.radius&&t<=i.activeObj.activePoint.endX+2*i.activeObj.topLeftCircle.radius&&e>=i.activeObj.activePoint.startY-2*i.activeObj.topLeftCircle.radius&&e<=i.activeObj.activePoint.endY+2*i.activeObj.topLeftCircle.radius||"default"!==i.upperCanvas.style.cursor&&"grab"!==i.upperCanvas.style.cursor&&"crosshair"!==i.upperCanvas.style.cursor&&"pointer"!==i.upperCanvas.style.cursor)),n},s.prototype.applyCurrShape=function(t){var e=this.parent,i=!1;if(e.togglePen)return i;var n=C({},e.activeObj,null,!0);if(this.isShapeInserted&&"text"===e.activeObj.shape&&t&&(this.isInitialTextEdited=!0,e.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!0}})),"block"===e.textArea.style.display){var r=C({},e.activeObj,null,!0);e.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),n=C({},e.objColl[e.objColl.length-1],null,!0),e.objColl.pop(),e.activeObj=C({},r,null,!0),e.textArea.value=n.keyHistory,e.textArea.style.display="block";var o="rgb"===n.strokeSettings.strokeColor.split("(")[0]?this.rgbToHex(parseFloat(n.strokeSettings.strokeColor.split("(")[1].split(",")[0]),parseFloat(n.strokeSettings.strokeColor.split("(")[1].split(",")[1]),parseFloat(n.strokeSettings.strokeColor.split("(")[1].split(",")[2])):n.strokeSettings.strokeColor;"#ffffff"===o&&(o="#fff"),"#ffffff"===this.tempActiveObj.strokeSettings.strokeColor&&(this.tempActiveObj.strokeSettings.strokeColor="#fff"),(n.keyHistory!==this.tempActiveObj.keyHistory||o!==this.tempActiveObj.strokeSettings.strokeColor||n.textSettings.fontFamily!==this.tempActiveObj.textSettings.fontFamily||Math.round(n.textSettings.fontSize)!==Math.round(this.tempActiveObj.textSettings.fontSize)||Math.round(n.textSettings.fontRatio)!==Math.round(this.tempActiveObj.textSettings.fontRatio)||n.textSettings.bold!==this.tempActiveObj.textSettings.bold||n.textSettings.italic!==this.tempActiveObj.textSettings.italic||n.textSettings.underline!==this.tempActiveObj.textSettings.underline)&&(i=!0),this.isInitialTextEdited&&!i&&(i=!0,this.isInitialTextEdited=!1)}else this.tempActiveObj.activePoint.height=Math.abs(this.tempActiveObj.activePoint.height),i=JSON.stringify(n)!==JSON.stringify(this.tempActiveObj);return i},s.prototype.canvasMouseDownHandler=function(t){var i,n,e=this.parent;t.preventDefault(),"mousedown"===t.type?(i=t.offsetX||t.pageX-e.lowerCanvas.offsetLeft,n=t.offsetY||t.pageY-e.lowerCanvas.offsetTop):(i=t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft,n=t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop);var r=e.lowerCanvas.getBoundingClientRect();this.panDown={x:i-=r.left,y:n-=r.top};var o={tempPanMove:null};e.notify("transform",{prop:"getTempPanMove",onPropertyChange:!1,value:{obj:o}}),p(o.tempPanMove)&&e.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:{x:i,y:n}}})},s.prototype.canvasMouseMoveHandler=function(t){var i,n,e=this.parent;this.dragCanvas?e.lowerCanvas.style.cursor="grab":(this.dragCanvas=e.togglePan=!1,e.lowerCanvas.style.cursor=e.upperCanvas.style.cursor=e.cursor="default"),"mousemove"===t.type?(i=t.offsetX,n=t.offsetY):(i=t.touches[0].clientX||t.touches[0].pageX-e.lowerCanvas.offsetLeft,n=t.touches[0].clientY||t.touches[0].pageY-e.lowerCanvas.offsetTop);var r=e.lowerCanvas.getBoundingClientRect(),o={x:i-=r.left,y:n-=r.top};e.notify("transform",{prop:"setPanMove",onPropertyChange:!1,value:{point:{x:i,y:n}}}),this.panDown&&o&&e.togglePan&&this.dragCanvas&&e.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:null,yDiff:null}})},s.prototype.canvasMouseUpHandler=function(t){var e=this.parent;t.preventDefault();var i={panMove:null};e.notify("transform",{prop:"getPanMove",onPropertyChange:!1,value:{obj:i}}),e.togglePan&&this.panDown&&i.panMove&&e.togglePan&&this.dragCanvas&&(this.panDown=null,e.notify("transform",{prop:"setPanMove",onPropertyChange:!1,value:{point:null}}),e.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}})),"path"!==this.currentDrawingShape&&(e.currObjType.isDragging=!1)},s.prototype.touchStartHandler=function(t){t.preventDefault(),0===this.touchTime?this.touchTime=(new Date).getTime():(new Date).getTime()-this.touchTime<400?(this.parent.notify("shape",{prop:"stopPathDrawing",onPropertyChange:!1,value:{e:t}}),this.touchTime=0):this.touchTime=(new Date).getTime(),2===t.touches.length?this.isFirstMove=!0:this.mouseDownEventHandler(t),y.add(this.parent.lowerCanvas,"touchend",this.mouseUpEventHandler,this),y.add(this.parent.lowerCanvas,"touchmove",this.mouseMoveEventHandler,this),y.add(this.parent.upperCanvas,"touchend",this.mouseUpEventHandler,this),y.add(this.parent.upperCanvas,"touchmove",this.mouseMoveEventHandler,this)},s.prototype.unwireEvent=function(){y.remove(this.parent.lowerCanvas,"touchend",this.mouseUpEventHandler),y.remove(this.parent.lowerCanvas,"touchmove",this.mouseMoveEventHandler),y.remove(this.parent.upperCanvas,"touchend",this.mouseUpEventHandler),y.remove(this.parent.upperCanvas,"touchmove",this.mouseMoveEventHandler)},s.prototype.keyDownEventHandler=function(t){var e=this,i=this.parent;t.ctrlKey&&("+"===t.key||"-"===t.key)&&t.preventDefault();var n={fileName:"",fileType:null};i.notify("draw",{prop:"getFileName",onPropertyChange:!1,value:{obj:n}});var o,r={fileName:n.fileName,fileType:n.fileType,cancel:!1};switch(t.key){case t.ctrlKey&&"s":z()&&i.events&&!0===i.events.saving.hasDelegate?i.dotNetRef.invokeMethodAsync("BeforeSaveEventAsync","BeforeSave",r).then(function(a){e.beforeSaveEvent(a,t)}):(i.trigger("beforeSave",r),this.beforeSaveEvent(r,t));break;case t.ctrlKey&&"z":i.allowUndoRedo&&i.notify("undo-redo",{prop:"call-undo"});break;case t.ctrlKey&&"y":i.allowUndoRedo&&i.notify("undo-redo",{prop:"call-redo"});break;case t.ctrlKey&&"+":(i.zoomSettings.zoomTrigger&Nt.Commands)===Nt.Commands&&(this.zoomType="Commands",i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null}}));break;case t.ctrlKey&&"-":(i.zoomSettings.zoomTrigger&Nt.Commands)===Nt.Commands&&(this.zoomType="Commands",i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null}}));break;case"Delete":this.deleteItem();break;case"Escape":i.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}});break;case"Enter":i.activeObj.shape&&(o=i.activeObj.shape.split("-")),this.isKeyBoardCrop(t)&&i.activeObj.horTopLine&&i.activeObj.shape&&"crop"===o[0]&&i.crop();break;case"Tab":this.performTabAction();break;default:O.isDevice&&"block"===i.textArea.style.display&&setTimeout(this.textKeyDown.bind(this),1,t)}},s.prototype.isKeyBoardCrop=function(t){var e=!1,i=t.target;return(i.id===this.parent.element.id+"_ok"||""===i.id)&&!z()&&(e=!0),e},s.prototype.beforeSaveEvent=function(t,e){t.cancel||this.parent.notify("export",{prop:"export",onPropertyChange:!1,value:{type:t.fileType,fileName:t.fileName}}),e.preventDefault(),e.stopImmediatePropagation()},s.prototype.handleScroll=function(t){var i,n,e=this.parent,r=!1;"mousewheel"===t.type&&(i=t.clientX,n=t.clientY);var o=e.lowerCanvas.getBoundingClientRect();if(n-=o.top,(i-=o.left)>e.img.destLeft&&i<e.img.destLeft+e.img.destWidth&&n>e.img.destTop&&n<e.img.destTop+e.img.destHeight&&(r=!0),t.stopPropagation(),!0===t.ctrlKey&&r){t.preventDefault(),!e.isCropTab&&e.activeObj.shape&&"crop"!==e.activeObj.shape.split("-")[0]&&(e.okBtn(),z()||e.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}));var a="";"mousewheel"===t.type&&(e.zoomSettings.zoomTrigger&Nt.MouseWheel)===Nt.MouseWheel&&(this.zoomType="MouseWheel",a=t.wheelDelta>0?"zoomIn":"zoomOut"),""!==a&&e.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:i,y:n,type:a}})}},s.prototype.textKeyDown=function(t){var e=this.parent;"\r"===String.fromCharCode(t.which)&&(this.textRow+=1),e.textArea.setAttribute("rows",this.textRow.toString()),e.textArea.style.height="auto",e.textArea.style.height=e.textArea.scrollHeight+"px",e.notify("shape",{prop:"setTextBoxWidth",onPropertyChange:!1,value:{e:t}}),O.isDevice&&(e.textArea.style.width=parseFloat(e.textArea.style.width)+e.textArea.style.fontSize+"px");var i=e.textArea.value.split("\n");this.textRow=i.length,e.textArea.setAttribute("rows",this.textRow.toString()),this.isInitialTextEdited=!1},s.prototype.clearSelection=function(){var t=this.parent;!t.disabled&&t.isImageLoaded&&(t.togglePen=!1,t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.dragElement="",this.dragPoint.startX=this.dragPoint.startY=this.dragPoint.endX=this.dragPoint.endY=0,t.currObjType.shape="",this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.currObjType.isActiveObj=!0,t.currObjType.isCustomCrop=!1,t.upperCanvas.style.cursor=t.cursor="default")},s.prototype.setDragDirection=function(t,e){var i=7.5,n=this.parent;n.img.destWidth>n.img.destHeight?(n.activeObj.activePoint.startX=this.dragPoint.startX=t/2-e/2+i,n.activeObj.activePoint.startY=this.dragPoint.startY=e/2-e/2+i,n.activeObj.activePoint.endX=t/2+e/2-i,n.activeObj.activePoint.endY=e/2+e/2-i):(n.activeObj.activePoint.startY=this.dragPoint.startX=e/2-t/2+i,n.activeObj.activePoint.endY=e/2+t/2-i,n.activeObj.activePoint.startX=this.dragPoint.startX=i,n.activeObj.activePoint.endX=t-i)},s.prototype.calcShapeRatio=function(t,e,i,n){for(var r=this.parent,o=7.5,a=i,l=n,c=a>=l?a:l,u=c*(t/e),d=c,f=this.getScale(u,a),v=[],g=0;g<2;g++)v.push(0===g?u*f:d*f);u=v[0];var b=this.getScale(d=v[1],l),M=[];for(g=0;g<2;g++)M.push(0===g?u*b:d*b);d=M[1],r.activeObj.activePoint.width=u=M[0],r.activeObj.activePoint.height=d,r.activeObj.activePoint.startX=(this.dragPoint.startX=(a-u)/2)+o,r.activeObj.activePoint.startY=(this.dragPoint.startY=(l-d)/2)+o,r.activeObj.activePoint.endX=(a-u)/2+u-o,r.activeObj.activePoint.endY=(l-d)/2+d-o,r.activeObj.activePoint.startX<r.img.destLeft&&r.img.destLeft+r.img.destWidth>r.lowerCanvas.clientWidth&&(r.activeObj.activePoint.startX=r.img.destLeft,r.activeObj.activePoint.endX=r.activeObj.activePoint.startX+u-o),r.activeObj.activePoint.startY<r.img.destTop&&r.img.destTop+r.img.destHeight>r.lowerCanvas.clientHeight&&(r.activeObj.activePoint.startY=r.img.destTop,r.activeObj.activePoint.endY=r.activeObj.activePoint.startY+d-o),r.activeObj.activePoint.width=r.activeObj.activePoint.endX-r.activeObj.activePoint.startX,r.activeObj.activePoint.height=r.activeObj.activePoint.endY-r.activeObj.activePoint.startY},s.prototype.getScale=function(t,e){return t>e?e/t:1},s.prototype.findTarget=function(t,e,i){var n=this.parent;if("mousedown"===i.toLowerCase()||"touchstart"===i.toLowerCase()){var o=!1;n.activeObj.shape&&"crop"===n.activeObj.shape.split("-")[0]&&(o=!0),this.findTargetObj(t,e,o),this.updateCursorStyles(t,e,i)}else switch(this.dragElement.toLowerCase()){case"nw-resize":n.activeObj.topLeftCircle.startX=t,n.activeObj.topLeftCircle.startY=e;break;case"n-resize":n.activeObj.topCenterCircle.startX=t,n.activeObj.topCenterCircle.startY=e;break;case"ne-resize":n.activeObj.topRightCircle.startX=t,n.activeObj.topRightCircle.startY=e;break;case"w-resize":n.activeObj.centerLeftCircle.startX=t,n.activeObj.centerLeftCircle.startY=e;break;case"e-resize":n.activeObj.centerRightCircle.startX=t,n.activeObj.centerRightCircle.startY=e;break;case"sw-resize":n.activeObj.bottomLeftCircle.startX=t,n.activeObj.bottomLeftCircle.startY=e;break;case"s-resize":n.activeObj.bottomCenterCircle.startX=t,n.activeObj.bottomCenterCircle.startY=e;break;case"se-resize":n.activeObj.bottomRightCircle.startX=t,n.activeObj.bottomRightCircle.startY=e;break;default:this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=t,this.dragPoint.endY=e)}},s.prototype.findTargetObj=function(t,e,i){var n=this,r=this.parent,o=!1;if(0!==r.objColl.length&&!r.currObjType.isCustomCrop&&!i){for(var a=0,l=void 0,h=0;h<r.objColl.length;h++){var c=r.upperCanvas.style.cursor;this.setCursor(t,e);var u=C({},r.objColl[h],{},!0);if("line"===u.shape||"arrow"===u.shape){for(var d=0;d<u.pointColl.length;d++)if(t>=u.pointColl[d].x-2*u.topLeftCircle.radius&&t<=u.pointColl[d].x+2*u.topLeftCircle.radius&&e>=u.pointColl[d].y-2*u.topLeftCircle.radius&&e<=u.pointColl[d].y+2*u.topLeftCircle.radius){this.isTouch||"move"===r.cursor||"grab"===r.cursor||this.isShapeInserted?(0===a||a>t-u.activePoint.startX)&&(a=t-r.objColl[h].activePoint.startX,l=h):r.objColl[h].currIndex===this.tempActiveObj.currIndex&&(l=h);break}}else if("path"===u.shape){var f=this.setCursorForPath(u,t,e,r.upperCanvas);"default"!==f&&"grab"!==f&&(this.isTouch||"move"===r.cursor||"grab"===r.cursor||this.isShapeInserted?(0===a||a>t-u.activePoint.startX)&&(a=t-r.objColl[h].activePoint.startX,l=h):r.objColl[h].currIndex===this.tempActiveObj.currIndex&&(l=h))}else if(0!==u.rotatedAngle){var v=this.setCursorForRotatedObject(u,t,e,r.upperCanvas);"default"!==v&&"grab"!==v&&(this.isTouch||"move"===r.cursor||"grab"===r.cursor||this.isShapeInserted?(0===a||a>t-u.activePoint.startX)&&(a=t-r.objColl[h].activePoint.startX,l=h):r.objColl[h].currIndex===this.tempActiveObj.currIndex&&(l=h))}else{var g=this.getTransRotationPoint(u);(t>=u.activePoint.startX-2*u.topLeftCircle.radius&&t<=u.activePoint.endX+2*u.topLeftCircle.radius&&e>=u.activePoint.startY-2*u.topLeftCircle.radius&&e<=u.activePoint.endY+2*u.topLeftCircle.radius||g&&t>=g.x-2*u.topLeftCircle.radius&&t<=g.x+2*u.topLeftCircle.radius&&e>=g.y-2*u.topLeftCircle.radius&&e<=g.y+2*u.topLeftCircle.radius)&&(this.isTouch||"move"===c||"grabbing"===c||this.isShapeInserted||"move"===r.cursor||"grabbing"===r.cursor?(0===a||a>t-u.activePoint.startX)&&(a=t-r.objColl[h].activePoint.startX,l=h):r.objColl[h].currIndex===this.tempActiveObj.currIndex&&(l=h))}}if(p(l))r.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),o=!1;else{this.tempObjColl=C([],r.objColl,[],!0),r.currObjType.isCustomCrop=!1,r.activeObj=C({},r.objColl[l],{},!0);var b=C({},r.objColl[l],{},!0);if(r.objColl.splice(l,1),0===r.transform.degree){var M=this.lowerContext.filter;this.lowerContext.clearRect(0,0,r.lowerCanvas.width,r.lowerCanvas.height),r.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(r.baseImg,r.img.srcLeft,r.img.srcTop,r.img.srcWidth,r.img.srcHeight,r.img.destLeft,r.img.destTop,r.img.destWidth,r.img.destHeight),this.lowerContext.filter="none",r.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),r.activeObj=C({},M,{},!0),r.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=M,this.getCurrentFlipState()}else r.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1}),r.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}});r.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(r.currSelectionPoint&&"crop-circle"===r.currSelectionPoint.shape||r.isCircleCrop)&&r.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),this.setActivePoint(),r.activeObj=C({},b,{},!0);var w=C({},r.activeObj.strokeSettings,{},!0);r.notify("draw",{prop:"setTempStrokeSettings",onPropertyChange:!1,value:{tempStrokeSettings:w}});var S=C({},r.activeObj.textSettings,{},!0);r.notify("draw",{prop:"setTempTextSettings",onPropertyChange:!1,value:{tempTextSettings:S}});var I=this.updatePrevShapeSettings(),P={action:"select",previousShapeSettings:I,currentShapeSettings:I};("line"===r.activeObj.shape||"arrow"===r.activeObj.shape)&&(P.currentShapeSettings.width=r.activeObj.activePoint.endX-r.activeObj.activePoint.startX,P.currentShapeSettings.height=r.activeObj.activePoint.endY-r.activeObj.activePoint.startY),this.isCropSelection=!1;var H=void 0;if(void 0!==r.activeObj.shape&&(H=r.activeObj.shape.split("-")),void 0!==H&&"crop"===H[0]&&(this.isCropSelection=!0),!this.isCropSelection&&z()&&p(this.parent.eventType)&&r.events&&!0===r.events.shapeChanging.hasDelegate)r.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",P).then(function(ee){n.shapeEvent(ee)});else if(this.isCropSelection){var G={action:P.action,previousSelectionSettings:{type:r.getSelectionType(r.activeObj.shape),startX:P.previousShapeSettings.startX,startY:P.previousShapeSettings.startY,width:P.previousShapeSettings.width,height:P.previousShapeSettings.height},currentSelectionSettings:{type:r.getSelectionType(r.activeObj.shape),startX:P.currentShapeSettings.startX,startY:P.currentShapeSettings.startY,width:P.currentShapeSettings.width,height:P.currentShapeSettings.height}};z()&&r.events&&!0===r.events.onSelectionResizeStart.hasDelegate?r.dotNetRef.invokeMethodAsync("SelectionEventAsync","OnSelectionResizeStart",G).then(function(ee){P.currentShapeSettings.startX=ee.currentSelectionSettings.startX,P.currentShapeSettings.startY=ee.currentSelectionSettings.startY,P.currentShapeSettings.width=ee.currentSelectionSettings.width,P.currentShapeSettings.height=ee.currentSelectionSettings.height,n.shapeEvent(P)}):(r.trigger("selectionChanging",G),P.currentShapeSettings.startX=G.currentSelectionSettings.startX,P.currentShapeSettings.startY=G.currentSelectionSettings.startY,P.currentShapeSettings.width=G.currentSelectionSettings.width,P.currentShapeSettings.height=G.currentSelectionSettings.height,this.shapeEvent(P))}else r.trigger("shapeChanging",P),this.shapeEvent(P);o=!0}}return o},s.prototype.shapeEvent=function(t){var e=this.parent;if(e.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:t.currentShapeSettings}}),e.activeObj.activePoint){var i={prevActObj:null};e.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:i}}),p(i.prevActObj)&&e.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:C({},e.activeObj,{},!0)}}),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:e.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:!0}}),this.isShapeInserted||(e.activeObj.activePoint.startX<e.img.destLeft||e.activeObj.activePoint.endX>e.img.destLeft+e.img.destWidth||e.activeObj.activePoint.startY<e.img.destTop||e.activeObj.activePoint.endY>e.img.destTop+e.img.destHeight)&&(this.isPreventDragging=!0)}},s.prototype.targetTouches=function(t){var e=this.parent.lowerCanvas.getBoundingClientRect();return[{x:t[0].pageX-e.left,y:t[0].pageY-e.top},{x:t[1].pageX-e.left,y:t[1].pageY-e.top}]},s.prototype.calculateScale=function(t,e){var i=this.getDistance(t[0],t[1]);return this.getDistance(e[0],e[1])/i},s.prototype.getDistance=function(t,e){var i=0,n=0;return t&&e&&(i=t.x-e.x,n=t.y-e.y),Math.sqrt(i*i+n*n)},s.prototype.redrawShape=function(t,e){for(var i=this.parent,n=0,r=i.objColl.length;n<r;n++)if(JSON.stringify(t)===JSON.stringify(i.objColl[n])){i.objColl.splice(n,1);break}this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.isPreventDragging?(i.activeObj.activePoint.startX>i.img.destLeft&&(this.isPreventDragging=!1),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}})):i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}})},s.prototype.setTimer=function(t){this.timer>10&&(clearTimeout(this.timer),this.timer=0,this.parent.notify("shape",{prop:"findTextTarget",onPropertyChange:!1,value:{e:t}}),O.isDevice&&this.upperContext.clearRect(0,0,this.parent.upperCanvas.width,this.parent.upperCanvas.height))},s.prototype.applyCurrActObj=function(t,e){var i=this.parent,n=!1,r=C({},i.activeObj,{},!0);if(!p(r.activePoint)){if(t>=Math.floor(r.activePoint.startX)&&t<=Math.ceil(r.activePoint.endX)&&e>=Math.floor(r.activePoint.startY)&&e<=Math.ceil(r.activePoint.endY))n=!0;else if("text"===r.shape&&""!==this.dragElement)n=!0;else if("line"===r.shape||"arrow"===r.shape){var o={x:r.activePoint.startX<r.activePoint.endX?r.activePoint.startX:r.activePoint.endX,y:r.activePoint.startY<r.activePoint.endY?r.activePoint.startY:r.activePoint.endY},a={x:r.activePoint.startX>r.activePoint.endX?r.activePoint.startX:r.activePoint.endX,y:r.activePoint.startY>r.activePoint.endY?r.activePoint.startY:r.activePoint.endY};t>=Math.floor(o.x)-5&&t<=Math.ceil(a.x)+5&&e>=Math.floor(o.y)-5&&e<=Math.ceil(a.y)+5&&(n=!0)}else if("path"===r.shape)"move"===(l=this.setCursorForPath(r,t,e,i.upperCanvas))&&(n=!0);else if("grabbing"===this.dragElement)n=!0;else if(0!==r.rotatedAngle){var l;("default"!==(l=this.setCursorForRotatedObject(r,t,e,i.upperCanvas))&&"grab"!==l||"n-resize"===this.dragElement||"e-resize"===this.dragElement||"s-resize"===this.dragElement||"w-resize"===this.dragElement)&&(n=!0)}if(!n){if(p(i.activeObj.currIndex)&&(i.activeObj.currIndex="shape_"+(i.objColl.length+1)),i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),void 0!==i.activeObj.horTopLine&&0!==i.activeObj.horTopLine.startX&&0!==i.activeObj.horTopLine.endX&&!i.currObjType.isCustomCrop&&""!==i.currObjType.shape&&i.objColl.push(C({},i.activeObj,{},!0)),"text"===i.activeObj.shape||"ellipse"===i.currObjType.shape||"rectangle"===i.currObjType.shape||"line"===i.currObjType.shape||"arrow"===i.activeObj.shape||"path"===i.activeObj.shape){var h=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)";for(var c=0;c<i.objColl.length;c++){var u={isInside:!1};i.notify("crop",{prop:"isObjInImage",onPropertyChange:!1,value:{obj:i.objColl[c],object:u}}),u.isInside&&(i.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:i.objColl[c].shape,obj:i.objColl[c],canvas:null}}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))}i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=h,i.activeObj.shape&&i.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})}z()||i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}}},s.prototype.getCurrentFlipState=function(){var t=this.parent;if(0!==t.rotateFlipColl.length){var e=C({},t.panPoint.totalPannedInternalPoint,{},!0);t.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1}),t.panPoint.totalPannedInternalPoint=e}else t.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1})},s.prototype.setTextBoxStylesToActObj=function(){var t=this.parent;t.activeObj.textSettings.fontFamily=t.textArea.style.fontFamily,t.activeObj.strokeSettings.strokeColor=""!==t.textArea.style.color?this.rgbToHex(parseFloat(t.textArea.style.color.split("(")[1].split(",")[0]),parseFloat(t.textArea.style.color.split("(")[1].split(",")[1]),parseFloat(t.textArea.style.color.split("(")[1].split(",")[2])):t.textArea.style.color,t.activeObj.textSettings.bold="bold"===t.textArea.style.fontWeight,t.activeObj.textSettings.italic="italic"===t.textArea.style.fontStyle,t.activeObj.textSettings.fontSize=parseFloat(t.textArea.style.fontSize)},s.prototype.rgbToHex=function(t,e,i){return"#"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(i)},s.prototype.componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},s.prototype.deleteItem=function(){var t=this.parent,e={};if(this.isFhdEditing){this.updateFreehandDrawColorChange();var n=C({},t.cropObj,{},!0);t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r={currObj:{}}}}),(o=r.currObj).objColl=C([],t.objColl,[],!0),o.pointColl=C([],t.pointColl,[],!0),o.afterCropActions=C([],t.afterCropActions,[],!0),t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a={selPointColl:null}}}),o.selPointColl=C([],a.selPointColl,[],!0),t.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:l={freehandDrawSelectedId:null}}}),t.notify("freehand-draw",{prop:"deleteFhd",value:{id:l.freehandDrawSelectedId}}),t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"deleteFreehandDrawing",previousObj:o,previousObjColl:this.tempObjColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),t.notify("freehand-draw",{prop:"resetFreehandDrawSelectedId"})}else if("none"===t.textArea.style.display){var l,r;if(t.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:l={prevActObj:null}}}),l.prevActObj&&(l.prevActObj.activePoint.width=Math.abs(l.prevActObj.activePoint.width),l.prevActObj.activePoint.height=Math.abs(l.prevActObj.activePoint.height)),l.prevActObj&&JSON.stringify(l.prevActObj)!==JSON.stringify(t.activeObj)){var h=t.activeObj.currIndex;t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}});for(var c=0;c<t.objColl.length;c++)if(t.objColl[c].currIndex===h){t.objColl.splice(c,1),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}});break}}if(t.notify("draw",{prop:"getNewPath",value:{obj:r={isNewPath:null}}}),r.isNewPath)t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),z()?t.updateToolbar(t.element,"imageLoaded"):t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1});else if(t.activeObj.shape){t.objColl.push(t.activeObj),n=C({},t.cropObj,{},!0);var o,a,u={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:u}}),(o=u.currObj).objColl=C([],t.objColl,[],!0),o.pointColl=C([],t.pointColl,[],!0),o.afterCropActions=C([],t.afterCropActions,[],!0),t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a={selPointColl:null}}}),o.selPointColl=C([],a.selPointColl,[],!0),t.objColl.pop(),e={action:"delete",previousShapeSettings:this.updatePrevShapeSettings(),currentShapeSettings:null},t.notify("shape",{prop:"setKeyHistory",onPropertyChange:!1,value:{keyHistory:""}}),t.clearSelection(),z()&&t.events&&!0===t.events.shapeChanging.hasDelegate?t.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",e):(t.trigger("shapeChanging",e),z()||t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})),p(o.objColl[o.objColl.length-1].currIndex)||(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"deleteObj",previousObj:o,previousObjColl:this.tempObjColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))}t.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}})}document.getElementById(t.element.id+"_quickAccessToolbarArea")&&(document.getElementById(t.element.id+"_quickAccessToolbarArea").style.display="none")},s.prototype.updateFreehandDrawColorChange=function(){var t=this.parent,e={freehandSelectedIndex:null};if(t.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:e}}),!p(e.freehandSelectedIndex)&&!p(t.pointColl[e.freehandSelectedIndex])&&"#42a5f5"===t.pointColl[e.freehandSelectedIndex].strokeColor){var i={tempFreeHandDrawEditingStyles:null};t.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:i}}),t.pointColl[e.freehandSelectedIndex].strokeColor=i.tempFreeHandDrawEditingStyles.strokeColor}},s.prototype.updatePrevShapeSettings=function(t){var e=this.parent,i=[];"text"===e.activeObj.shape&&e.activeObj.textSettings&&(e.activeObj.textSettings.bold&&i.push("bold"),e.activeObj.textSettings.italic&&i.push("italic"),e.activeObj.textSettings.underline&&i.push("underline"));var n={id:p(e.activeObj.currIndex)?null:e.activeObj.currIndex,type:e.toPascalCase(e.activeObj.shape),startX:e.activeObj.activePoint.startX,startY:e.activeObj.activePoint.startY,width:e.activeObj.activePoint.width,height:e.activeObj.activePoint.height,strokeColor:e.activeObj.strokeSettings?e.activeObj.strokeSettings.strokeColor:null,strokeWidth:e.activeObj.strokeSettings?e.activeObj.strokeSettings.strokeWidth:null,fillColor:e.activeObj.strokeSettings?e.activeObj.strokeSettings.fillColor:null,radius:"ellipse"===e.activeObj.shape?e.activeObj.activePoint.width/2:null,length:"line"===e.activeObj.shape||"arrow"===e.activeObj.shape?e.activeObj.activePoint.width:null,text:"text"===e.activeObj.shape?e.activeObj.keyHistory?e.activeObj.keyHistory:e.activeObj.textSettings.text?e.activeObj.textSettings.text:null:null,fontSize:"text"===e.activeObj.shape&&e.activeObj.textSettings?e.activeObj.textSettings.fontSize:null,fontFamily:"text"===e.activeObj.shape&&e.activeObj.textSettings?e.activeObj.textSettings.fontFamily:null,fontStyle:"text"===e.activeObj.shape?i:null,color:"text"===e.activeObj.shape&&e.activeObj.strokeSettings?e.activeObj.strokeSettings.strokeColor:null};return t&&(t.shapeSettingsObj=n),n},s.prototype.getRectanglePoints=function(t,e,i,n,r,o,a){var l=t+i/2,h=e+n/2,c=r*(Math.PI/180),u=Math.cos(c),d=Math.sin(c),f=o-l,v=a-h,g=f*u+v*d,b=-f*d+v*u,M=i/2,w=n/2;return g>=-M&&g<=M&&b>=-w&&b<=w},s.prototype.getTransRotationPoint=function(t,e){var i,n,r=!1,o=!1;if((n=0===t.shapeDegree?this.parent.transform.degree:this.parent.transform.degree-t.shapeDegree)<0&&(n=360+n),t.flipObjColl)for(var a=0;a<t.flipObjColl.length;a++)"horizontal"===t.flipObjColl[a].toLowerCase()?r=!0:"vertical"===t.flipObjColl[a].toLowerCase()&&(o=!0);return 0===n||360===n?i=o?{x:t.topCenterCircle.startX,y:t.topCenterCircle.startY-t.rotationCircleLine}:{x:t.bottomCenterCircle.startX,y:t.bottomCenterCircle.startY+t.rotationCircleLine}:90===n||-270===n?i=r?{x:t.centerRightCircle.startX+t.rotationCircleLine,y:t.centerLeftCircle.startY}:{x:t.centerLeftCircle.startX-t.rotationCircleLine,y:t.centerLeftCircle.startY}:180===n||-180===n?i=o?{x:t.bottomCenterCircle.startX,y:t.bottomCenterCircle.startY+t.rotationCircleLine}:{x:t.topCenterCircle.startX,y:t.topCenterCircle.startY-t.rotationCircleLine}:(270===n||-90===n)&&(i=r?{x:t.centerLeftCircle.startX-t.rotationCircleLine,y:t.centerLeftCircle.startY}:{x:t.centerRightCircle.startX+t.rotationCircleLine,y:t.centerLeftCircle.startY}),e&&(e.rotationCirclePoint=i),i},s}(),oj=function(){function s(t){this.textSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.keyHistory="",this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("shape",this.shape,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("shape",this.shape),this.parent.off("destroyed",this.destroy)},s.prototype.shape=function(t){switch(this.initShapePvtProps(),t.prop){case"drawEllipse":this.drawEllipse(t.value.x,t.value.y,t.value.radiusX,t.value.radiusY,t.value.strokeWidth,t.value.strokeColor,t.value.fillColor);break;case"drawLine":this.drawLine(t.value.startX,t.value.startY,t.value.endX,t.value.endY,t.value.strokeWidth,t.value.strokeColor);break;case"drawArrow":this.drawArrow(t.value.startX,t.value.startY,t.value.endX,t.value.endY,t.value.strokeWidth,t.value.strokeColor,t.value.arrowStart,t.value.arrowEnd);break;case"drawPath":this.drawPath(t.value.pointColl,t.value.strokeWidth,t.value.strokeColor);break;case"drawRectangle":this.drawRectangle(t.value.x,t.value.y,t.value.width,t.value.height,t.value.strokeWidth,t.value.strokeColor,t.value.fillColor);break;case"drawText":this.drawText(t.value.x,t.value.y,t.value.text,t.value.fontFamily,t.value.fontSize,t.value.bold,t.value.italic,t.value.color);break;case"redrawActObj":this.redrawActObj(t.value.x,t.value.y,t.value.isMouseDown);break;case"apply":this.apply(t.value.shape,t.value.obj,t.value.canvas);break;case"updateShapeChangeEventArgs":this.updateShapeChangeEventArgs(t.value.shapeSettings);break;case"updSelChangeEventArgs":this.updSelChangeEventArgs(t.value.selectionSettings);break;case"iterateObjColl":this.iterateObjColl();break;case"updImgRatioForActObj":this.updImgRatioForActObj();break;case"zoomObjColl":this.zoomObjColl(t.value.isPreventApply);break;case"redrawObj":this.redrawObj(t.value.degree);break;case"rotateObjColl":this.rotateObjColl();break;case"draw-shape-text":this.drawShapeText();break;case"redraw-text":this.redrawText();break;case"draw-shape":this.drawShape(t.value.obj,t.value.strokeWidth,t.value.strokeColor,t.value.fillColor,t.value.start,t.value.width,t.value.height);break;case"renderTextArea":this.renderTextArea(t.value.x,t.value.y,t.value.actObj);break;case"setTextBoxWidth":this.setTextBoxWidth(t.value.e);break;case"findTextTarget":this.findTextTarget(t.value.e);break;case"panObjColl":this.panObjColl(t.value.xDiff,t.value.yDiff,t.value.panRegion);break;case"updateFontStyles":this.updateFontStyles(t.value.isTextBox);break;case"applyFontStyle":this.applyFontStyle(t.value.item);break;case"updateFontRatio":this.updateFontRatio(t.value.obj,t.value.isTextArea);break;case"updateFontSize":this.updateFontSize(t.value.obj);break;case"updateObjColl":this.updateObjColl(t.value.item,t.value.objColl);break;case"pushActItemIntoObj":this.pushActItemIntoObj();break;case"clearActObj":this.clearActObj();break;case"refreshActiveObj":this.refreshActiveObj();break;case"applyActObj":this.applyActObj(t.value.isMouseDown);break;case"wireEvent":y.add(this.parent.upperCanvas,"dblclick",this.findTextTarget,this),y.add(this.parent.textArea,"mousedown",this.findTextTarget,this);break;case"unWireEvent":y.remove(this.parent.upperCanvas,"dblclick",this.findTextTarget),y.remove(this.parent.textArea,"mousedown",this.findTextTarget);break;case"getShapeSetting":this.getShapeSetting(t.value.id,t.value.obj);break;case"getShapeSettings":this.getShapeSettings(t.value.obj);break;case"isPointsInRange":this.isPointsInRange(t.value.x,t.value.y,t.value.obj);break;case"alignRotateFlipColl":this.alignRotateFlipColl(t.value.collection,t.value.isRotateFlipCollection,t.value.obj);break;case"selectShape":this.selectShape(t.value.id,t.value.obj);break;case"deleteShape":this.deleteShape(t.value.id);break;case"getMaxText":this.getMaxText(t.value.isTextBox,t.value.text,t.value.obj);break;case"setPointCollForLineArrow":t.value.obj.pointColl=this.getLinePoints(t.value.obj.activePoint.startX,t.value.obj.activePoint.startY,t.value.obj.activePoint.endX,t.value.obj.activePoint.endY);break;case"setPointCollForShapeRotation":this.setPointCollForShapeRotation(t.value.obj);break;case"setTextSettings":t.value.textSettings?this.textSettings=t.value.textSettings:t.value.fontFamily?this.textSettings.fontFamily=t.value.fontFamily:t.value.fontSize&&(this.textSettings.fontSize=t.value.fontSize);break;case"setStrokeSettings":t.value.strokeSettings?this.strokeSettings=t.value.strokeSettings:t.value.strokeColor?this.strokeSettings.strokeColor=t.value.strokeColor:t.value.fillColor?this.strokeSettings.fillColor=t.value.fillColor:t.value.strokeWidth&&(this.strokeSettings.strokeWidth=t.value.strokeWidth);break;case"getStrokeSettings":t.value.obj.strokeSettings=this.strokeSettings;break;case"setKeyHistory":this.keyHistory=t.value.keyHistory;break;case"getKeyHistory":t.value.obj.keyHistory=this.keyHistory;break;case"setTextBoxPos":this.setTextBoxPos(t.value.actObj,t.value.degree,t.value.flip,t.value.x,t.value.y);break;case"setTextBoxPoints":this.setTextBoxPoints(t.value.actObj,t.value.degree,t.value.flip,t.value.x,t.value.y);break;case"alignTextAreaIntoCanvas":this.alignTextAreaIntoCanvas();break;case"initializeTextShape":this.initializeTextShape(t.value.text,t.value.fontFamily,t.value.fontSize,t.value.bold,t.value.italic,t.value.strokeColor);break;case"stopPathDrawing":this.stopPathDrawing(t.value.e);break;case"updateArrowRatio":this.updateArrowRatio(t.value.obj);break;case"getSquarePointForRotatedShape":this.getSquarePointForRotatedShape(t.value.obj,t.value.object);break;case"reset":this.reset()}},s.prototype.getModuleName=function(){return"shape"},s.prototype.initShapePvtProps=function(){this.parent.lowerCanvas&&(this.lowerContext=this.parent.lowerCanvas.getContext("2d")),this.parent.upperCanvas&&(this.upperContext=this.parent.upperCanvas.getContext("2d"))},s.prototype.reset=function(){this.textSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null}},s.prototype.drawEllipse=function(t,e,i,n,r,o,a,l){this.initializeShape("ellipse"),this.drawShape("ellipse",r,o,a,t&&e?{x:t,y:e}:null,i,n,null,null,null,l)},s.prototype.drawLine=function(t,e,i,n,r,o){this.initializeShape("line"),this.drawShape("line",r,o,null,t&&e?{x:t,y:e}:null,i-t,n-e)},s.prototype.drawPath=function(t,e,i){if(this.initializeShape("path"),t)this.drawShape("path",e,i,null,null,null,null,t);else{this.drawShape("line",e,i,null,null,null,null);var n=C({},this.parent.objColl[this.parent.objColl.length-1],null,!0);n.shape="path",n.lineDraw=null,n.pointColl=[{x:n.activePoint.startX,y:n.activePoint.startY},{x:n.activePoint.endX,y:n.activePoint.endY}],this.parent.objColl[this.parent.objColl.length-1]=n}},s.prototype.drawArrow=function(t,e,i,n,r,o,a,l){this.initializeShape("arrow"),this.drawShape("arrow",r,o,null,t&&e?{x:t,y:e}:null,i-t,n-e,null,a,l)},s.prototype.drawRectangle=function(t,e,i,n,r,o,a,l){this.initializeShape("rectangle"),this.drawShape("rectangle",r,o,a,t&&e?{x:t,y:e}:null,i,n,null,null,null,l)},s.prototype.drawText=function(t,e,i,n,r,o,a,l){this.drawShapeText(i,n,r,o,a,l,t,e)},s.prototype.initializeShape=function(t){this.redrawActObj(),this.parent.activeObj.shape=t,"freehanddraw"===this.parent.currObjType.shape&&(this.apply(),this.parent.upperCanvas.style.cursor=this.parent.cursor="default",this.parent.currObjType.shape=""),this.parent.currObjType.isCustomCrop=!1},s.prototype.updateWidthHeight=function(t){return t.activePoint.width=t.activePoint.endX-t.activePoint.startX,t.activePoint.height=t.activePoint.endY-t.activePoint.startY,t},s.prototype.setDimension=function(t,e){t&&e&&(this.parent.activeObj.activePoint.width=t,this.parent.activeObj.activePoint.height=e,"ellipse"===this.parent.currObjType.shape.toLowerCase()&&(this.parent.activeObj.activePoint.width=2*t,this.parent.activeObj.activePoint.height=2*e))},s.prototype.getArrowType=function(t){var e=t;return t&&(e={None:"none",Arrow:"arrow",SolidArrow:"arrowSolid",Circle:"circle",SolidCircle:"circleSolid",Square:"square",SolidSquare:"squareSolid",Bar:"bar"}[""+t]),e},s.prototype.drawShape=function(t,e,i,n,r,o,a,l,h,c,u){var d=this,f=this.parent;if(!f.disabled&&f.isImageLoaded){f.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),this.redrawActObj();var v=C([],f.objColl,[],!0);if(f.togglePen=!1,this.keyHistory="",this.parent.upperCanvas.style.display="block",this.refreshActiveObj(),f.currObjType.shape=t,"path"===f.currObjType.shape.toLowerCase()&&p(l))f.activeObj.shape=f.currObjType.shape.toLowerCase(),f.activeObj.pointColl=[],f.upperCanvas.style.cursor=this.parent.cursor="crosshair",f.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:"path"}}),z()||(f.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),f.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}));else if("freehanddraw"!==f.currObjType.shape.toLowerCase()&&""!==f.currObjType.shape.toLowerCase()){f.activeObj.shape=f.currObjType.shape.toLowerCase(),this.upperContext.clearRect(0,0,f.upperCanvas.width,f.upperCanvas.height),p(f.activeObj.strokeSettings)&&(f.activeObj.strokeSettings=this.strokeSettings),"path"===f.currObjType.shape.toLowerCase()&&l&&(f.activeObj.pointColl=l),f.activeObj.strokeSettings.strokeWidth=e||f.activeObj.strokeSettings.strokeWidth,f.activeObj.strokeSettings.strokeColor=i||f.activeObj.strokeSettings.strokeColor,f.activeObj.strokeSettings.fillColor=n||f.activeObj.strokeSettings.fillColor;var b=f.img.destHeight>100?100:f.img.destHeight/2;f.activeObj.activePoint.width=f.img.destWidth>100?100:f.img.destWidth/2,f.activeObj.activePoint.height=b,"line"===f.currObjType.shape.toLowerCase()||"arrow"===f.currObjType.shape.toLowerCase()?(f.activeObj.lineDraw="horizontal",f.activeObj.activePoint.height=0,"arrow"===f.currObjType.shape.toLowerCase()&&(f.activeObj.activePoint.width+=50,f.activeObj.start=this.getArrowType(h),f.activeObj.end=this.getArrowType(c))):"rectangle"===f.currObjType.shape.toLowerCase()&&(f.activeObj.activePoint.width+=f.activeObj.activePoint.width/2),this.setDimension(o,a),r?(f.activeObj.activePoint.startX=r.x,f.activeObj.activePoint.startY=r.y,f.activeObj.activePoint.endX=f.activeObj.activePoint.startX+f.activeObj.activePoint.width,f.activeObj.activePoint.endY=f.activeObj.activePoint.startY+f.activeObj.activePoint.height):this.setCenterPoints(),this.setPointCollForLineAndArrow(),"arrow"===f.currObjType.shape.toLowerCase()&&(f.activeObj.triangleDirection="right"),f.currObjType.isDragging=f.currObjType.isCustomCrop=!1,this.initShapeProps();var M={shapeSettingsObj:{}};f.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:M}});var w=M.shapeSettingsObj,S={action:"insert",previousShapeSettings:w,currentShapeSettings:w};z()&&f.events&&!0===f.events.shapeChanging.hasDelegate?this.parent.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",S).then(function(I){d.updateShapeChangeEventArgs(I.currentShapeSettings),d.setDimension(o,a),f.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),u&&(f.activeObj.rotatedAngle=u*(Math.PI/180),f.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:f.activeObj}})),f.updateToolbar(f.element,"quickAccessToolbar","shape"),f.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}}),f.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:v}}),f.isPublicMethod&&f.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),f.isPublicMethod=!1}):(f.trigger("shapeChanging",S),this.updateShapeChangeEventArgs(S.currentShapeSettings),this.setDimension(o,a),f.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),u&&(f.activeObj.rotatedAngle=u*(Math.PI/180),f.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:f.activeObj}})),z()?f.updateToolbar(f.element,"quickAccessToolbar","shape"):f.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}),f.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}}),f.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:v}}),f.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),f.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),f.isPublicMethod&&f.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),f.isPublicMethod=!1)}}},s.prototype.initShapeProps=function(){var t=this.parent;t.activeObj.shapeDegree=t.transform.degree,t.activeObj.shapeFlip=t.transform.currFlipState,t.activeObj.textFlip=t.transform.currFlipState,t.activeObj.flipObjColl=[]},s.prototype.setPointCollForLineAndArrow=function(){var t=this.parent;if(("line"===t.activeObj.shape||"arrow"===t.activeObj.shape)&&(t.activeObj.pointColl=this.getLinePoints(t.activeObj.activePoint.startX,t.activeObj.activePoint.startY,t.activeObj.activePoint.endX,t.activeObj.activePoint.endY),t.activeObj.pointColl))for(var e=0,i=t.activeObj.pointColl.length;e<i;e++)t.activeObj.pointColl[e].ratioX=(t.activeObj.pointColl[e].x-t.img.destLeft)/t.img.destWidth,t.activeObj.pointColl[e].ratioY=(t.activeObj.pointColl[e].y-t.img.destTop)/t.img.destHeight},s.prototype.prevObjColl=function(){var t=this.parent,e={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:e}}),this.prevObj=e.currObj,this.prevObj.objColl=C([],t.objColl,[],!0),this.prevObj.pointColl=C([],t.pointColl,[],!0),this.prevObj.afterCropActions=C([],t.afterCropActions,[],!0);var i={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:i}}),this.prevObj.selPointColl=C([],i.selPointColl,[],!0)},s.prototype.drawShapeText=function(t,e,i,n,r,o,a,l){var h=this,c=this.parent;if(!c.disabled&&c.isImageLoaded){"freehanddraw"===c.currObjType.shape&&(this.apply(),c.upperCanvas.style.cursor=c.cursor="default",c.currObjType.shape=""),c.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),c.togglePen=!1,this.redrawActObj(),this.prevObjColl(),this.refreshActiveObj(),c.activeObj.shape=c.currObjType.shape="text",c.currObjType.isCustomCrop=!1,this.initializeTextShape(t,e,i,n,r,o),c.currObjType.isText=c.currObjType.isInitialText=!0,p(c.activeObj.textSettings.fontSize)&&(c.activeObj.textSettings.fontSize=c.img.destWidth>c.img.destHeight?c.img.destWidth/15:c.img.destHeight/15,c.activeObj.textSettings.fontSize<20&&(c.activeObj.textSettings.fontSize=20)),c.img.destWidth<100?c.activeObj.textSettings.fontSize=Math.floor(c.img.destWidth/20):c.img.destHeight<100&&(c.activeObj.textSettings.fontSize=Math.floor(c.img.destHeight/20)),c.activeObj.shapeDegree=c.transform.degree,c.activeObj.shapeFlip=c.transform.currFlipState,c.activeObj.flipObjColl=[],this.updateFontStyles();var u=this.upperContext.measureText(c.activeObj.textSettings.text).width+.5*c.activeObj.textSettings.fontSize,d=c.activeObj.textSettings.fontSize+.25*c.activeObj.textSettings.fontSize;p(a)||p(l)?this.setCenterPoints(!0,u,d):(c.activeObj.activePoint.startX=a,c.activeObj.activePoint.startY=l,c.activeObj.activePoint.endX=c.activeObj.activePoint.startX+u,c.activeObj.activePoint.endY=c.activeObj.activePoint.startY+d);var f={shapeSettingsObj:{}};c.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:f}});var v=f.shapeSettingsObj,g={action:"insert",previousShapeSettings:v,currentShapeSettings:v};z()&&c.events&&!0===c.events.shapeChanging.hasDelegate?c.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",g).then(function(b){h.drawShapeTextEvent(b),c.isPublicMethod&&c.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),c.isPublicMethod=!1}):(c.trigger("shapeChanging",g),this.drawShapeTextEvent(g),c.isPublicMethod&&c.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),c.isPublicMethod=!1)}},s.prototype.drawShapeTextEvent=function(t){var e=this.parent;this.updateShapeChangeEventArgs(t.currentShapeSettings),this.addLetter(e.activeObj.textSettings.text),e.activeObj.textFlip=e.transform.currFlipState,this.updateFontRatio(e.activeObj),e.objColl.push(e.activeObj);var i=C({},e.cropObj,{},!0);e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:this.prevObj,previousObjColl:this.prevObj.objColl,previousPointColl:this.prevObj.pointColl,previousSelPointColl:this.prevObj.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:e.objColl[e.objColl.length-1]}}),z()?e.updateToolbar(e.element,"quickAccessToolbar","text"):e.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}),e.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}}),z()?e.updateToolbar(e.element,"text"):(e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),e.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}))},s.prototype.initializeTextShape=function(t,e,i,n,r,o){var a=this.parent;this.keyHistory="",a.upperCanvas.style.display="block",p(a.activeObj.textSettings)&&(a.activeObj.textSettings=this.textSettings),p(a.activeObj.strokeSettings)&&(a.activeObj.strokeSettings=this.strokeSettings),a.activeObj.strokeSettings.strokeColor=o||a.activeObj.strokeSettings.strokeColor,a.activeObj.textSettings.text=t||a.activeObj.textSettings.text,a.activeObj.textSettings.fontFamily=e||a.activeObj.textSettings.fontFamily,a.activeObj.textSettings.fontSize=i||a.activeObj.textSettings.fontSize,a.activeObj.textSettings.bold=n||a.activeObj.textSettings.bold,a.activeObj.textSettings.italic=r||a.activeObj.textSettings.italic},s.prototype.redrawActObj=function(t,e,i){var n,r=this.parent;r.activeObj.shape&&(n=r.activeObj.shape.split("-")),r.activeObj.horTopLine&&r.activeObj.shape&&"crop"!==n[0]&&("block"===r.textArea.style.display?(r.notify("selection",{prop:"setTextBoxStylesToActObj",onPropertyChange:!1}),this.updateFontRatio(r.activeObj,!0),t&&e?t!==r.activeObj.activePoint.startX&&e!==r.activeObj.activePoint.startY&&(this.updateTextFromTextArea(),this.applyActObj()):(this.updateTextFromTextArea(),this.apply(r.activeObj.shape,r.activeObj),r.objColl.push(r.activeObj),this.refreshActiveObj(),r.textArea.style.transform="",r.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}))):this.applyActObj(i))},s.prototype.apply=function(t,e,i){var n=this.parent;if(!n.disabled)if(n.togglePen&&!n.currObjType.isCustomCrop){var r=n.img.destLeft,o=n.img.destTop,a=n.img.destWidth,l=n.img.destHeight;n.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1});var h=this.lowerContext.filter;this.lowerContext.filter="none",n.togglePen=!1,this.iterateObjColl(),n.notify("freehandDraw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),n.togglePen=!1,(n.isCircleCrop||n.currSelectionPoint&&"crop-circle"===n.currSelectionPoint.shape)&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),n.img.destLeft=r,n.img.destTop=o,n.img.destWidth=a,n.img.destHeight=l,this.lowerContext.filter=h}else i=i||"original",n.currObjType.shape=p(n.activeObj.shape)&&p(t)?"":t||n.currObjType.shape,""!==n.currObjType.shape&&(this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),"text"===n.activeObj.shape?(n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:i,obj:e,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}),n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}})):n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:i,obj:e}}),n.activeObj.shape=n.currObjType.shape.toLowerCase(),!t&&""!==n.currObjType.shape&&!n.currObjType.isCustomCrop&&n.objColl.push(C({},n.activeObj,{},!0)),this.keyHistory="")},s.prototype.setCenterPoints=function(t,e,i){var r,o,n=this.parent;t&&e&&i?(r=e,o=i):(r=n.activeObj.activePoint.width,o=n.activeObj.activePoint.height),n.activeObj.activePoint.startX=n.lowerCanvas.width/2-r/2,n.activeObj.activePoint.startY=n.lowerCanvas.height/2-o/2,n.activeObj.activePoint.endX=n.lowerCanvas.width/2+r/2,n.activeObj.activePoint.endY=n.lowerCanvas.height/2+o/2},s.prototype.updSelChangeEventArgs=function(t){var e=this.parent;e.activeObj.activePoint.startX=t.startX,e.activeObj.activePoint.startY=t.startY,e.activeObj.activePoint.width=t.width,e.activeObj.activePoint.height=t.height,e.activeObj.activePoint.endX=e.activeObj.activePoint.startX+e.activeObj.activePoint.width,e.activeObj.activePoint.endY=e.activeObj.activePoint.startY+e.activeObj.activePoint.height},s.prototype.updateShapeChangeEventArgs=function(t){var e=this.parent;switch(e.activeObj.currIndex=t.id,e.activeObj.activePoint.startX=t.startX,e.activeObj.activePoint.startY=t.startY,e.activeObj.activePoint.width=t.width,e.activeObj.activePoint.height=t.height,e.activeObj.activePoint.endX=e.activeObj.activePoint.startX+e.activeObj.activePoint.width,e.activeObj.activePoint.endY=e.activeObj.activePoint.startY+e.activeObj.activePoint.height,e.activeObj.strokeSettings.strokeColor=t.strokeColor,e.activeObj.strokeSettings.fillColor=t.fillColor,e.activeObj.shape){case"ellipse":e.activeObj.activePoint.width=t.radius/2;break;case"line":case"arrow":e.activeObj.activePoint.width=t.length;break;case"text":e.activeObj.keyHistory=e.activeObj.textSettings.text=t.text,e.activeObj.textSettings.fontSize=t.fontSize,e.activeObj.strokeSettings.strokeColor=t.color,e.activeObj.textSettings.fontFamily=t.fontFamily}if("text"===e.activeObj.shape&&e.activeObj.textSettings)for(var i=0;i<t.fontStyle.length;i++)switch(t.fontStyle[i]){case"bold":e.activeObj.textSettings.bold=!0;break;case"italic":e.activeObj.textSettings.italic=!0;break;case"underline":e.activeObj.textSettings.underline=!0}},s.prototype.addLetter=function(t){var e=this.parent;if("none"===e.textArea.style.display&&(e.currObjType.isText||"text"===e.activeObj.shape)){"Backspace"===t?this.keyHistory=this.keyHistory.slice(0,-1):this.keyHistory+=t,this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.updateFontStyles();var i=this.upperContext.measureText(this.keyHistory).width+.5*e.activeObj.textSettings.fontSize,n=e.activeObj.textSettings.fontSize+.25*e.activeObj.textSettings.fontSize;this.upperContext.fillText(this.keyHistory,e.activeObj.activePoint.startX,e.activeObj.activePoint.startY+e.activeObj.textSettings.fontSize),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.currObjType.isText=!0,e.notify("selection",{prop:"setActivePoint",onPropertyChange:!1,value:{startX:i,startY:n}})}},s.prototype.redrawText=function(){var t=this.parent,e="";t.activeObj.textSettings.bold&&(e+="bold "),t.activeObj.textSettings.italic&&(e+="italic "),this.upperContext.font=e+t.activeObj.textSettings.fontSize+"px "+t.activeObj.textSettings.fontFamily;var i=t.activeObj.keyHistory.split("\n"),n="block"===t.textArea.style.display?this.getMaxText(!0):this.getMaxText(),r=this.upperContext.measureText(n).width+.5*t.activeObj.textSettings.fontSize;t.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:r,height:i.length*(t.activeObj.textSettings.fontSize+.25*t.activeObj.textSettings.fontSize)}}),t.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:t.activeObj.activePoint,obj:t.activeObj,isMouseMove:null,x:null,y:null}}),t.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:t.activeObj}})},s.prototype.updateTextFromTextArea=function(){var t=this.parent;if(t.activeObj.keyHistory!==t.textArea.value){var e=C({},t.cropObj,{},!0),i={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}});var n=i.currObj;n.objColl=C([],t.objColl,[],!0),n.pointColl=C([],t.pointColl,[],!0),n.afterCropActions=C([],this.parent.afterCropActions,[],!0);var r={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),n.selPointColl=C([],r.selPointColl,[],!0),t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"text",previousObj:n,previousObjColl:n.objColl,previousPointColl:n.pointColl,previousSelPointColl:n.selPointColl,previousCropObj:e,previousText:t.activeObj.keyHistory,currentText:t.textArea.value,previousFilter:null,isCircleCrop:null}})}t.activeObj.keyHistory=t.textArea.value,t.textArea.style.display="none",t.textArea.value="",this.updateFontStyles();var o=this.upperContext.measureText(t.activeObj.keyHistory).width+.5*t.activeObj.textSettings.fontSize,a=t.activeObj.textSettings.fontSize+.25*this.parent.activeObj.textSettings.fontSize,l=t.activeObj.keyHistory.split("\n");if(l.length>1){a*=l.length;for(var h=[],c=0,u=l.length;c<u;c++)h.push(this.upperContext.measureText(l[c]).width+.5*t.activeObj.textSettings.fontSize);o=Math.max.apply(Math,h)}t.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:o,height:a}}),t.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:t.activeObj.activePoint,obj:t.activeObj,isMouseMove:null,x:null,y:null}}),this.updImgRatioForActObj()},s.prototype.iterateObjColl=function(){for(var t=this.parent,e=0,i=t.objColl.length;e<i;e++)this.apply(t.objColl[e].shape,t.objColl[e]),this.refreshActiveObj()},s.prototype.updImgRatioForActObj=function(){var t=this.parent;t.activeObj.imageRatio={startX:(t.activeObj.activePoint.startX-t.img.destLeft)/t.img.destWidth,startY:(t.activeObj.activePoint.startY-t.img.destTop)/t.img.destHeight,endX:(t.activeObj.activePoint.endX-t.img.destLeft)/t.img.destWidth,endY:(t.activeObj.activePoint.endY-t.img.destTop)/t.img.destHeight,width:t.img.destWidth/t.activeObj.activePoint.width,height:t.img.destHeight/t.activeObj.activePoint.height},t.activeObj.rotationCirclePointColl&&(t.activeObj.rotationCirclePointColl.ratioX=(t.activeObj.rotationCirclePointColl.x-t.img.destLeft)/t.img.destWidth,t.activeObj.rotationCirclePointColl.ratioY=(t.activeObj.rotationCirclePointColl.y-t.img.destTop)/t.img.destHeight),"path"===t.activeObj.shape?this.updatePathRatio(t.activeObj):"arrow"===t.activeObj.shape&&this.updateArrowRatio(t.activeObj)},s.prototype.zoomObjColl=function(t){for(var e=this.parent,i=0,n=e.objColl.length;i<n;i++){var r=e.objColl[i];if(r.activePoint.startX=r.imageRatio.startX*e.img.destWidth+e.img.destLeft,r.activePoint.startY=r.imageRatio.startY*e.img.destHeight+e.img.destTop,r.activePoint.endX=r.imageRatio.endX*e.img.destWidth+e.img.destLeft,r.activePoint.endY=r.imageRatio.endY*e.img.destHeight+e.img.destTop,"text"===(r=this.updateWidthHeight(r)).shape)this.updateFontSize(r);else if("line"===r.shape||"arrow"===r.shape){r.pointColl=this.getLinePoints(r.activePoint.startX,r.activePoint.startY,r.activePoint.endX,r.activePoint.endY);for(var o=0,a=r.pointColl.length;o<a;o++)r.pointColl[o].ratioX=(r.pointColl[o].x-e.img.destLeft)/e.img.destWidth,r.pointColl[o].ratioY=(r.pointColl[o].y-e.img.destTop)/e.img.destHeight;"arrow"===r.shape&&this.updateArrowSize(r)}else if("path"===r.shape){for(var l=0,h=r.pointColl.length;l<h;l++)r.pointColl[l].x=r.pointColl[l].ratioX*e.img.destWidth+e.img.destLeft,r.pointColl[l].y=r.pointColl[l].ratioY*e.img.destHeight+e.img.destTop;this.updatePathRatio(r)}if(e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:r.activePoint,obj:r}}),p(t)){var c=this.lowerContext.filter;this.lowerContext.filter="none",this.apply(r.shape,r),this.refreshActiveObj(),this.lowerContext.filter=c}"line"!==r.shape&&"arrow"!==r.shape&&"path"!==r.shape&&0!==r.rotatedAngle&&(this.setPointCollForShapeRotation(r),r.rotationCirclePoint.x=r.rotationCirclePoint.ratioX*e.img.destWidth+e.img.destLeft,r.rotationCirclePoint.y=r.rotationCirclePoint.ratioY*e.img.destHeight+e.img.destTop,r.rotationCirclePointColl.x=r.rotationCirclePointColl.ratioX*e.img.destWidth+e.img.destLeft,r.rotationCirclePointColl.y=r.rotationCirclePointColl.ratioY*e.img.destHeight+e.img.destTop)}},s.prototype.redrawObj=function(t){var e=this.parent;if(this.parent.objColl.length>0)if("horizontal"===t||"vertical"===t||"Horizontal"===t||"Vertical"===t||"horizontalVertical"===t||"verticalHorizontal"===t)this.updateCurrentActiveObjPoint(t.toLowerCase());else if("number"==typeof t){this.updateCurrentActiveObjPoint(t);var i=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)";for(var n=0,r=e.objColl.length;n<r;n++)"crop"!==e.objColl[n].shape.split("-")[0]&&this.apply(e.objColl[n].shape,e.objColl[n]);this.lowerContext.filter=i}},s.prototype.updateCurrentActiveObjPoint=function(t){for(var i,e=this.parent,n=0,r=e.objColl.length;n<r;n++)if(e.activeObj.shape===(o=e.objColl[n]).shape&&e.activeObj.activePoint.startX===o.activePoint.startX&&e.activeObj.activePoint.startY===o.activePoint.startY&&e.activeObj.activePoint.endX===o.activePoint.endX&&e.activeObj.activePoint.endY===o.activePoint.endY&&e.activeObj.currIndex===o.currIndex){i=n;break}if("horizontal"===t||"vertical"===t||"Horizontal"===t||"Vertical"===t||"horizontalvertical"===t||"verticalhorizontal"===t){if("horizontal"===t||"Horizontal"===t){var a=0;for(r=e.objColl.length;a<r;a++)(o=e.objColl[a]).shapeFlip!==e.transform.currFlipState&&(o.activePoint.startX<=e.img.destLeft+e.img.destWidth/2?(o.activePoint.endX=e.img.destLeft+e.img.destWidth-(o.activePoint.startX-e.img.destLeft),o.activePoint.startX=o.activePoint.endX-o.activePoint.width,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o.activePoint,obj:o}})):o.activePoint.startX>=e.img.destLeft+e.img.destWidth/2&&(o.activePoint.startX=e.img.destLeft+(e.img.destLeft+e.img.destWidth-o.activePoint.endX),o.activePoint.endX=o.activePoint.startX+o.activePoint.width,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o.activePoint,obj:o}})),"line"===o.shape||"arrow"===o.shape||"path"===o.shape?this.flipLineArrowObj(o,"horizontal"):0!==o.rotatedAngle&&(o.rotatedAngle=o.rotatedAngle+2*(Math.PI-o.rotatedAngle),o.rotationCirclePointColl.x<=e.img.destLeft+e.img.destWidth/2?o.rotationCirclePointColl.x=e.img.destLeft+e.img.destWidth-(o.rotationCirclePointColl.x-e.img.destLeft):o.rotationCirclePointColl.x>=e.img.destLeft+e.img.destWidth/2&&(o.rotationCirclePointColl.x=e.img.destLeft+(e.img.destLeft+e.img.destWidth-o.rotationCirclePointColl.x)),o.rotationCirclePointColl.ratioX=(o.rotationCirclePointColl.x-e.img.destLeft)/e.img.destWidth),o.shapeFlip=e.transform.currFlipState,o.imageRatio={startX:(o.activePoint.startX-e.img.destLeft)/e.img.destWidth,startY:(o.activePoint.startY-e.img.destTop)/e.img.destHeight,endX:(o.activePoint.endX-e.img.destLeft)/e.img.destWidth,endY:(o.activePoint.endY-e.img.destTop)/e.img.destHeight,width:e.img.destWidth/o.activePoint.width,height:e.img.destHeight/o.activePoint.height})}else if("vertical"===t||"Vertical"===t)for(a=0;a<e.objColl.length;a++)(o=e.objColl[a]).shapeFlip!==e.transform.currFlipState&&(o.activePoint.startY<=e.img.destTop+e.img.destHeight/2?(o.activePoint.endY=e.img.destTop+e.img.destHeight-(o.activePoint.startY-e.img.destTop),o.activePoint.startY=o.activePoint.endY-o.activePoint.height,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o.activePoint,obj:o}})):o.activePoint.startY>=this.parent.lowerCanvas.height/2&&(o.activePoint.startY=e.img.destTop+(e.img.destTop+e.img.destHeight-o.activePoint.endY),o.activePoint.endY=o.activePoint.startY+o.activePoint.height,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o.activePoint,obj:o}})),"line"===o.shape||"arrow"===o.shape||"path"===o.shape?this.flipLineArrowObj(o,"vertical"):0!==o.rotatedAngle&&(o.rotatedAngle=-o.rotatedAngle,o.rotationCirclePointColl.y<=e.img.destTop+e.img.destHeight/2?o.rotationCirclePointColl.y=e.img.destTop+e.img.destHeight-(o.rotationCirclePointColl.y-e.img.destTop):o.rotationCirclePointColl.y>=e.img.destTop+e.img.destHeight/2&&(o.rotationCirclePointColl.y=e.img.destTop+(e.img.destTop+e.img.destHeight-o.rotationCirclePointColl.y)),o.rotationCirclePointColl.ratioY=(o.rotationCirclePointColl.y-e.img.destTop)/e.img.destHeight),o.shapeFlip=e.transform.currFlipState,o.imageRatio={startX:(o.activePoint.startX-e.img.destLeft)/e.img.destWidth,startY:(o.activePoint.startY-e.img.destTop)/e.img.destHeight,endX:(o.activePoint.endX-e.img.destLeft)/e.img.destWidth,endY:(o.activePoint.endY-e.img.destTop)/e.img.destHeight,width:e.img.destWidth/o.activePoint.width,height:e.img.destHeight/o.activePoint.height});else if("verticalhorizontal"===t||"horizontalvertical"===t)for(a=0,r=e.objColl.length;a<r;a++){var o;(o=e.objColl[a]).shapeFlip!==e.transform.currFlipState&&(o.activePoint.startX<=e.img.destLeft+e.img.destWidth/2?(o.activePoint.endX=e.img.destLeft+e.img.destWidth-(o.activePoint.startX-e.img.destLeft),o.activePoint.startX=o.activePoint.endX-o.activePoint.width,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o.activePoint,obj:o}})):o.activePoint.startX>=e.img.destLeft+e.img.destWidth/2&&(o.activePoint.startX=e.img.destLeft+(e.img.destLeft+e.img.destWidth-o.activePoint.endX),o.activePoint.endX=o.activePoint.startX+o.activePoint.width,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o.activePoint,obj:o}})),o.activePoint.startY<=e.img.destTop+e.img.destHeight/2?(o.activePoint.endY=e.img.destTop+e.img.destHeight-(o.activePoint.startY-e.img.destTop),o.activePoint.startY=o.activePoint.endY-o.activePoint.height,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o.activePoint,obj:o}})):o.activePoint.startY>=this.parent.lowerCanvas.height/2&&(o.activePoint.startY=e.img.destTop+(e.img.destTop+e.img.destHeight-o.activePoint.endY),o.activePoint.endY=o.activePoint.startY+o.activePoint.height,e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o.activePoint,obj:o}})),("line"===o.shape||"arrow"===o.shape||"path"===o.shape)&&this.flipLineArrowObj(o,t),o.shapeFlip=e.transform.currFlipState,o.imageRatio={startX:(o.activePoint.startX-e.img.destLeft)/e.img.destWidth,startY:(o.activePoint.startY-e.img.destTop)/e.img.destHeight,endX:(o.activePoint.endX-e.img.destLeft)/e.img.destWidth,endY:(o.activePoint.endY-e.img.destTop)/e.img.destHeight,width:e.img.destWidth/o.activePoint.width,height:e.img.destHeight/o.activePoint.height})}void 0!==i&&(e.activeObj=C({},e.objColl[i],{},!0))}else if(90===t)this.rotateObjColl();else if(-90===t)for(a=0;a<3;a++)this.rotateObjColl();else if("number"==typeof t)if(t>0)this.rotateObjColl();else for(a=0;a<3;a++)this.rotateObjColl()},s.prototype.rotateObjColl=function(){for(var t=this.parent,e=0,i=t.objColl.length;e<i;e++)(n=t.objColl[e]).activePoint.startY=t.img.destTop+t.img.destHeight*n.imageRatio.startX,n.activePoint.endY=t.img.destTop+t.img.destHeight*n.imageRatio.endX,n.activePoint.startX=t.img.destLeft+t.img.destWidth-t.img.destWidth*n.imageRatio.endY,n.activePoint.endX=t.img.destLeft+t.img.destWidth-t.img.destWidth*n.imageRatio.startY,n=this.updateWidthHeight(t.objColl[e]),this.updateFontSize(n),"line"===n.shape||"arrow"===n.shape||"path"===n.shape?(this.rotateLineArrowObj(n),"arrow"===n.shape&&this.updateArrowSize(n)):0!==n.rotatedAngle&&(n.rotationCirclePointColl.y=t.img.destTop+t.img.destHeight*n.rotationCirclePointColl.ratioX,n.rotationCirclePointColl.x=t.img.destLeft+t.img.destWidth-t.img.destWidth*n.rotationCirclePointColl.ratioY,n.rotationCirclePointColl.ratioX=(n.rotationCirclePointColl.x-t.img.destLeft)/t.img.destWidth,n.rotationCirclePointColl.ratioY=(n.rotationCirclePointColl.y-t.img.destTop)/t.img.destHeight);for(e=0,i=t.objColl.length;e<i;e++)t.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:t.objColl[e].activePoint,obj:t.objColl[e]}});for(e=0,i=t.objColl.length;e<i;e++){var n;(n=t.objColl[e]).imageRatio={startX:(n.activePoint.startX-t.img.destLeft)/t.img.destWidth,startY:(n.activePoint.startY-t.img.destTop)/t.img.destHeight,endX:(n.activePoint.endX-t.img.destLeft)/t.img.destWidth,endY:(n.activePoint.endY-t.img.destTop)/t.img.destHeight,width:t.img.destWidth/n.activePoint.width,height:t.img.destHeight/n.activePoint.height}}},s.prototype.rotateLineArrowObj=function(t){if(!p(t.pointColl)){var e=this.parent;if(t.pointColl.length>0){for(var i=0;i<t.pointColl.length;i++)t.pointColl[i].y=e.img.destTop+e.img.destHeight*t.pointColl[i].ratioX,t.pointColl[i].x=e.img.destLeft+e.img.destWidth-e.img.destWidth*t.pointColl[i].ratioY;for(i=0;i<t.pointColl.length;i++)t.pointColl[i].ratioX=(t.pointColl[i].x-e.img.destLeft)/e.img.destWidth,t.pointColl[i].ratioY=(t.pointColl[i].y-e.img.destTop)/e.img.destHeight;var n;n=p(t.pointColl[t.pointColl.length-2])?{x:0,y:0}:{x:t.pointColl[t.pointColl.length-2].x,y:t.pointColl[t.pointColl.length-2].y};var r=t.pointColl[t.pointColl.length-1].x-n.x,o=t.pointColl[t.pointColl.length-1].y-n.y;t.activePoint.startX=t.pointColl[0].x,t.activePoint.startY=t.pointColl[0].y,t.activePoint.endX=t.pointColl[t.pointColl.length-1].x+r/2,t.activePoint.endY=t.pointColl[t.pointColl.length-1].y+o/2,t=this.updateWidthHeight(t)}}},s.prototype.flipLineArrowObj=function(t,e){if(!p(t.pointColl)&&("horizontal"===e.toLowerCase()?this.lineArrowHorizontalFlip(t):("vertical"===e.toLowerCase()||(this.lineArrowHorizontalFlip(t),t.shapeFlip=""),this.lineArrowVerticalFlip(t)),t.activePoint.startX=t.pointColl[0].x,t.activePoint.startY=t.pointColl[0].y,t.activePoint.endX=t.pointColl[t.pointColl.length-1].x,t.activePoint.endY=t.pointColl[t.pointColl.length-1].y,t.activePoint.startX>t.activePoint.endX)){var i=t.activePoint.startX;t.activePoint.startX=t.activePoint.endX,t.activePoint.endX=i,i=t.activePoint.startY,t.activePoint.startY=t.activePoint.endY,t.activePoint.endY=i}},s.prototype.lineArrowHorizontalFlip=function(t){var e=this.parent;if(t.shapeFlip!==e.transform.currFlipState){for(var i=0,n=t.pointColl.length;i<n;i++){var r=t.pointColl[i];r.x<=e.img.destLeft+e.img.destWidth/2?r.x=e.img.destLeft+e.img.destWidth-(r.x-e.img.destLeft):r.x>=e.img.destLeft+e.img.destWidth/2&&(r.x=e.img.destLeft+(e.img.destLeft+e.img.destWidth-r.x)),r.ratioX=(r.x-e.img.destLeft)/e.img.destWidth,r.ratioY=(r.y-e.img.destTop)/e.img.destHeight}if("arrow"===t.shape){var o=t.start;t.start=t.end,t.end=o}t.shapeFlip=e.transform.currFlipState}},s.prototype.lineArrowVerticalFlip=function(t){var e=this.parent;if(t.shapeFlip!==e.transform.currFlipState){for(var i=0,n=t.pointColl.length;i<n;i++){var r=t.pointColl[i];r.y<=e.img.destTop+e.img.destHeight/2?r.y=e.img.destTop+e.img.destHeight-(r.y-e.img.destTop):r.y>=e.img.destTop+e.img.destHeight/2&&(r.y=e.img.destTop+(e.img.destTop+e.img.destHeight-r.y)),r.ratioX=(r.x-e.img.destLeft)/e.img.destWidth,r.ratioY=(r.y-e.img.destTop)/e.img.destHeight}t.shapeFlip=e.transform.currFlipState}},s.prototype.getRotDegOfShape=function(t){var e;return(e=0===t.shapeDegree?this.parent.transform.degree:this.parent.transform.degree-t.shapeDegree)<0&&(e=360+e),e},s.prototype.renderTextArea=function(t,e,i){var n=this.parent,r=this.getRotDegOfShape(n.activeObj);this.transformTextArea(),z()?n.updateToolbar(n.element,"destroyQuickAccessToolbar"):n.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),n.element.querySelector("#"+n.element.id+"_duplicate")&&n.element.querySelector("#"+n.element.id+"_duplicate").classList.add("e-disabled"),n.element.querySelector("#"+n.element.id+"_remove")&&n.element.querySelector("#"+n.element.id+"_remove").classList.add("e-disabled"),n.element.querySelector("#"+n.element.id+"_editText")&&n.element.querySelector("#"+n.element.id+"_editText").classList.add("e-disabled"),n.textArea.style.display="block",n.textArea.style.left=t+"px",n.textArea.style.top=e+"px",n.textArea.style.fontFamily=i.textSettings.fontFamily,n.textArea.style.fontSize=i.textSettings.fontSize+"px",n.textArea.style.color=i.strokeSettings.strokeColor,n.textArea.style.fontWeight=i.textSettings.bold?"bold":"normal",n.textArea.style.fontStyle=i.textSettings.italic?"italic":"normal",n.textArea.style.border="2px solid "+n.themeColl[n.theme].primaryColor,n.textArea.value=i.keyHistory,n.textArea.style.overflow="hidden",n.textArea.style.width="auto",n.textArea.style.height="auto",n.textArea.focus();var a=i.activePoint,l=a.width,h=a.height;r%90==0&&r%180!=0&&0!==r?(n.textArea.style.width=h+"px",n.textArea.style.height=l+"px"):(n.textArea.style.width=l+"px",n.textArea.style.height=h+"px"),this.setTextBoxWidth();var c={flipColl:null};n.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:c}}),c.flipColl.length<=1&&this.setTextBoxHeight(),r%90==0&&r%180!=0?parseFloat(n.textArea.style.left)+parseFloat(n.textArea.style.width)>n.img.destTop+n.img.destHeight&&this.alignTextAreaIntoCanvas():parseFloat(n.textArea.style.left)+parseFloat(n.textArea.style.width)>n.img.destLeft+n.img.destWidth&&this.alignTextAreaIntoCanvas(),n.notify("selection",{prop:"clearUpperCanvas",onPropertyChange:!1})},s.prototype.setTextBoxWidth=function(t){var e=this.parent,i=this.getMaxText(!0);"block"===e.textArea.style.display?this.updateFontStyles(!0):this.updateFontStyles();var n=this.upperContext.measureText(i).width+parseFloat(e.textArea.style.fontSize)/2,r=t?this.upperContext.measureText(String.fromCharCode(t.which)).width:0,o=C({},e.activeObj,{},!0),a="",l=this.getRotDegOfShape(o);if(a=o.shapeFlip!==e.transform.currFlipState?"":e.transform.currFlipState,t&&parseFloat(e.textArea.style.width)<n+r||p(t))if(0===l)"horizontal"===a.toLowerCase()?parseFloat(e.textArea.style.left)-e.img.destLeft-n-r>0&&(e.textArea.style.width=n+r+"px"):e.img.destWidth-(parseFloat(e.textArea.style.left)-e.img.destLeft)>n+r&&(e.textArea.style.width=n+r+"px");else if(90===l)"vertical"===a.toLowerCase()?parseFloat(e.textArea.style.top)-e.img.destTop-n-r>0&&(e.textArea.style.width=n+r+"px"):e.img.destHeight-(parseFloat(e.textArea.style.top)-e.img.destTop)>n+r&&(e.textArea.style.width=n+r+"px");else if(180===l){var h=parseFloat(e.textArea.style.left),c=e.img.destLeft;"horizontal"===a.toLowerCase()?e.img.destWidth-(h-c)>n+r&&(e.textArea.style.width=n+r+"px"):h-c-n-r>0&&(e.textArea.style.width=n+r+"px")}else if(270===l){var f=parseFloat(e.textArea.style.top),v=e.img.destTop;"vertical"===a.toLowerCase()?e.img.destHeight-(f-v)>n+r&&(e.textArea.style.width=n+r+"px"):f-v-n-r>0&&(e.textArea.style.width=n+r+"px")}},s.prototype.setTextBoxHeight=function(){var e,t=this.parent,i=C({},t.activeObj,{},!0),n="",r=this.getRotDegOfShape(i);switch(n=i.textFlip===t.transform.currFlipState?"":""===i.textFlip?t.transform.currFlipState:i.textFlip,r){case 0:"vertical"===n.toLowerCase()?t.textArea.style.maxHeight=t.img.destHeight-(t.img.destHeight-parseFloat(t.textArea.style.top))+"px":(e=parseFloat(t.textArea.style.top)-t.img.destTop,t.textArea.style.maxHeight=t.img.destHeight-e+"px");break;case 90:t.textArea.style.maxHeight="horizontal"===n.toLowerCase()?t.img.destWidth-(parseFloat(t.textArea.style.left)-t.img.destLeft)+"px":parseFloat(t.textArea.style.left)-t.img.destLeft+"px";break;case 180:"vertical"===n.toLowerCase()?(e=parseFloat(t.textArea.style.top)-t.img.destTop,t.textArea.style.maxHeight=t.img.destHeight-e+"px"):t.textArea.style.maxHeight=parseFloat(t.textArea.style.top)-t.img.destTop+"px";break;case 270:t.textArea.style.maxHeight="horizontal"===n.toLowerCase()?parseFloat(t.textArea.style.left)-t.img.destLeft+"px":t.img.destWidth-(parseFloat(t.textArea.style.left)-t.img.destLeft)+"px"}},s.prototype.updatePathRatio=function(t){for(var e=this.parent,i=0,n=t.pointColl.length;i<n;i++){var r=t.pointColl[i];r.ratioX=(r.x-e.img.destLeft)/e.img.destWidth,r.ratioY=(r.y-e.img.destTop)/e.img.destHeight}},s.prototype.stopPathDrawing=function(t){var e=this.parent;if("path"===e.activeObj.shape){var i={shape:null};if(e.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:i}}),"path"===i.shape){var n=C({},this.parent.cropObj,{},!0),r={currObj:{}};this.parent.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var o=r.currObj;o.objColl=C([],this.parent.objColl,[],!0),o.pointColl=C([],this.parent.pointColl,[],!0),o.afterCropActions=C([],this.parent.afterCropActions,[],!0);var a={selPointColl:null};this.parent.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),o.selPointColl=C([],a.selPointColl,[],!0),e.notify("selection",{prop:"setCurrentDrawingShape",value:{value:""}}),e.currObjType.isDragging=!1,"touchstart"!==t.type&&e.activeObj.pointColl.pop(),this.updatePathRatio(e.activeObj),e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("selection",{prop:"mouseUpEventHandler",value:{e:t}}),e.notify("draw",{prop:"setNewPath",value:{bool:!0}}),e.objColl[e.objColl.length-1]&&e.selectShape(e.objColl[e.objColl.length-1].currIndex),z()?e.updateToolbar(e.element,"quickAccessToolbar",e.activeObj.shape):e.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})}}},s.prototype.findTextTarget=function(t){var i,n,e=this.parent;if("text"===e.activeObj.shape)if("dblclick"===t.type?(i=t.clientX,n=t.clientY):"touchstart"===t.type&&(i=t.touches[0].clientX,n=t.touches[0].clientY,e.notify("selection",{prop:"setTouchEndPoint",onPropertyChange:!1,value:{x:t.touches[0].clientX,y:t.touches[0].clientY}})),e.notify("toolbar",{prop:"setPreventZoomBtn",onPropertyChange:!1,value:{isPrevent:!0}}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),e.notify("toolbar",{prop:"setPreventZoomBtn",onPropertyChange:!1,value:{isPrevent:!1}}),e.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),p(i)||p(n))"block"===e.textArea.style.display&&""!==this.selectedText()&&"mousedown"===t.type?(l=e.textArea.value,e.textArea.value+="a",e.textArea.value=l):"none"===e.textArea.style.display&&(e.textArea.style.display="block");else{var r=this.parent.lowerCanvas.getBoundingClientRect();i-=r.left,n-=r.top;var o="",a=this.getRotDegOfShape(e.activeObj);o=""===e.activeObj.textFlip?e.activeObj.textFlip===e.transform.currFlipState?"":e.transform.currFlipState:e.activeObj.textFlip===e.transform.currFlipState?"":""===e.transform.currFlipState?e.activeObj.textFlip:e.transform.currFlipState;var l=void 0;if("none"===e.textArea.style.display){l=C({},e.activeObj,{},!0);for(var h=0;h<e.objColl.length;h++)JSON.stringify(e.activeObj)===JSON.stringify(e.objColl[h])&&e.objColl.splice(h,1);this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.parent.upperCanvas.width,this.parent.upperCanvas.height),this.lowerContext.clearRect(0,0,this.parent.upperCanvas.width,this.parent.upperCanvas.height),e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),(e.currSelectionPoint&&"crop-circle"===e.currSelectionPoint.shape||e.isCircleCrop)&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),e.activeObj=l,this.updateFontStyles();var u,c=C({},e.activeObj,{},!0);if(i>=c.activePoint.startX-2*c.topLeftCircle.radius&&i<=c.activePoint.endX+2*c.topLeftCircle.radius&&n>=c.activePoint.startY-2*c.topLeftCircle.radius&&n<=c.activePoint.endY+2*c.topLeftCircle.radius)this.upperContext.clearRect(0,0,this.parent.upperCanvas.width,this.parent.upperCanvas.height),4===c.flipObjColl.length&&(c.flipObjColl=[],o="",c.shapeFlip=""),""===o&&c.flipObjColl.length>1&&(o=c.flipObjColl[c.flipObjColl.length-1]),c.flipObjColl.length<=1?(i=(u=this.setTextBoxPos(c,a,o,i,n)).x,n=u.y):(i=(u=this.setTextBoxPoints(c,a,o,i,n)).x,n=u.y),0!==e.activeObj.rotatedAngle&&(i=e.activeObj.horTopLinePointColl[0].x,n=e.activeObj.horTopLinePointColl[0].y),this.renderTextArea(i,n,c);else this.applyActObj()}}else this.stopPathDrawing(t)},s.prototype.setTextBoxPos=function(t,e,i,n,r){var o={x:n,y:r};switch(e){case 0:"horizontal"===i.toLowerCase()?(o.x=t.activePoint.endX,o.y=t.activePoint.startY):"vertical"===i.toLowerCase()?(o.x=t.activePoint.startX,o.y=t.activePoint.endY):(o.x=t.activePoint.startX,o.y=t.activePoint.startY);break;case 90:"horizontal"===i.toLowerCase()?(o.x=t.activePoint.startX,o.y=t.activePoint.startY):"vertical"===i.toLowerCase()?(o.x=t.activePoint.endX,o.y=t.activePoint.endY):(o.x=t.activePoint.endX,o.y=t.activePoint.startY);break;case 180:"horizontal"===i.toLowerCase()?(o.x=t.activePoint.startX,o.y=t.activePoint.endY):"vertical"===i.toLowerCase()?(o.x=t.activePoint.endX,o.y=t.activePoint.startY):(o.x=t.activePoint.endX,o.y=t.activePoint.endY);break;case 270:"horizontal"===i.toLowerCase()?(o.x=t.activePoint.endX,o.y=t.activePoint.endY):"vertical"===i.toLowerCase()?(o.x=t.activePoint.startX,o.y=t.activePoint.startY):(o.x=t.activePoint.startX,o.y=t.activePoint.endY)}return o},s.prototype.setTextBoxPoints=function(t,e,i,n,r){var o={x:n,y:r};switch(e){case 0:t.flipObjColl[0]&&"horizontal"===t.flipObjColl[0].toLowerCase()?"horizontal"===i.toLowerCase()?(o.x=t.activePoint.startX,o.y=t.activePoint.startY):"vertical"===i.toLowerCase()&&(o.x=t.activePoint.endX,o.y=t.activePoint.endY):"horizontal"===i.toLowerCase()?(o.x=t.activePoint.endX,o.y=t.activePoint.endY):"vertical"===i.toLowerCase()&&(o.x=t.activePoint.endX,o.y=t.activePoint.startY);break;case 90:t.flipObjColl[0]&&"horizontal"===t.flipObjColl[0].toLowerCase()?"horizontal"===i.toLowerCase()?(o.x=t.activePoint.endX,o.y=t.activePoint.endY):"vertical"===i.toLowerCase()&&(o.x=t.activePoint.startX,o.y=t.activePoint.endY):"horizontal"===i.toLowerCase()?(o.x=t.activePoint.startX,o.y=t.activePoint.endY):"vertical"===i.toLowerCase()&&(o.x=t.activePoint.startX,o.y=t.activePoint.startY);break;case 180:t.flipObjColl[0]&&"horizontal"===t.flipObjColl[0].toLowerCase()?("horizontal"===i.toLowerCase()||"vertical"===i.toLowerCase())&&(o.x=t.activePoint.startX,o.y=t.activePoint.startY):"horizontal"===i.toLowerCase()?(o.x=t.activePoint.startX,o.y=t.activePoint.startY):"vertical"===i.toLowerCase()&&(o.x=t.activePoint.startX,o.y=t.activePoint.endY);break;case 270:t.flipObjColl[0]&&"horizontal"===t.flipObjColl[0].toLowerCase()?"horizontal"===i.toLowerCase()?(o.x=t.activePoint.startX,o.y=t.activePoint.startY):"vertical"===i.toLowerCase()&&(o.x=t.activePoint.endX,o.y=t.activePoint.startY):"horizontal"===i.toLowerCase()?(o.x=t.activePoint.endX,o.y=t.activePoint.startY):"vertical"===i.toLowerCase()&&(o.x=t.activePoint.endX,o.y=t.activePoint.endY)}return o},s.prototype.selectedText=function(){return this.parent.textArea.value.substring(this.parent.textArea.selectionStart,this.parent.textArea.selectionEnd)},s.prototype.panObjColl=function(t,e,i){for(var n=this.parent,r=0,o=n.objColl.length;r<o;r++){var a=n.objColl[r];if(""===i||"vertical"===i){if(a.activePoint.startX+=t,a.activePoint.endX+=t,a.rotationCirclePointColl&&(a.rotationCirclePointColl.x+=t),"path"===a.shape)for(var l=0,h=a.pointColl.length;l<h;l++)a.pointColl[l].x+=t}else if(a.activePoint.startX-=t,a.activePoint.endX-=t,a.rotationCirclePointColl&&(a.rotationCirclePointColl.x-=t),"path"===a.shape){l=0;for(var c=a.pointColl.length;l<c;l++)a.pointColl[l].x-=t}if(""===i||"horizontal"===i){if(a.activePoint.startY+=e,a.activePoint.endY+=e,a.rotationCirclePointColl&&(a.rotationCirclePointColl.y+=e),"path"===a.shape)for(l=0;l<a.pointColl.length;l++)a.pointColl[l].y+=e}else if(a.activePoint.startY-=e,a.activePoint.endY-=e,a.rotationCirclePointColl&&(a.rotationCirclePointColl.y-=e),"path"===a.shape)for(l=0;l<a.pointColl.length;l++)a.pointColl[l].y-=e;if(a=this.updateWidthHeight(a),n.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:a.activePoint,obj:a}}),"line"===a.shape||"arrow"===a.shape){a.pointColl=this.getLinePoints(a.activePoint.startX,a.activePoint.startY,a.activePoint.endX,a.activePoint.endY);for(var u=0,d=a.pointColl.length;u<d;u++)a.pointColl[u].ratioX=(a.pointColl[u].x-n.img.destLeft)/n.img.destWidth,a.pointColl[u].ratioY=(a.pointColl[u].y-n.img.destTop)/n.img.destHeight}var f=this.lowerContext.filter;this.lowerContext.filter="none",this.apply(a.shape,a),this.lowerContext.filter=f,this.refreshActiveObj()}},s.prototype.updateFontStyles=function(t){var e=this.parent;this.upperContext.strokeStyle=e.activeObj.strokeSettings.strokeColor,this.upperContext.fillStyle=e.activeObj.strokeSettings.strokeColor;var i="";e.activeObj.textSettings.bold&&(i="bold "),e.activeObj.textSettings.italic&&(i="italic "),e.activeObj.textSettings.bold&&e.activeObj.textSettings.italic&&(i="italic bold ");var n=t?parseFloat(e.textArea.style.fontSize):e.activeObj.textSettings.fontSize;this.upperContext.font=i+n+"px "+("block"===e.textArea.style.display?e.textArea.style.fontFamily:e.activeObj.textSettings.fontFamily)},s.prototype.applyFontStyle=function(t){var e=this.parent;this.pushActItemIntoObj();var i=C([],e.objColl,[],!0);switch(e.objColl.pop(),"none"===e.textArea.style.display?this.updateFontRatio(e.activeObj):this.updateFontRatio(e.activeObj,!0),t){case"default":this.updateFontStyle(t,i,"normal","normal");break;case"bold":this.updateFontStyle(t,i,"bold","normal");break;case"italic":this.updateFontStyle(t,i,"normal","italic");break;case"bolditalic":this.updateFontStyle(t,i,"bold","italic")}},s.prototype.updateFontStyle=function(t,e,i,n){var r=this.parent;if("block"===r.textArea.style.display){var o=this.getTextAreaWidth(t);r.textArea.style.width=o+"px",r.textArea.style.fontWeight=i,r.textArea.style.fontStyle=n,this.updateObjColl(t,e)}else this.textSettings.bold=r.activeObj.textSettings.bold="normal"!==i,this.textSettings.italic=r.activeObj.textSettings.italic="normal"!==n,this.redrawText(),r.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:e}})},s.prototype.updateArrowRatio=function(t){var i={arrowDimension:null};this.parent.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:i}});var n,r=this.getRotDegOfShape(t);n=0===r||180===r||-180===r?Math.abs(t.activePoint.width):Math.abs(t.activePoint.height);for(var o,l=0,h=["bar","arrow","arrowSolid","circle","square"];l<h.length;l++){var u=n/i.arrowDimension[o=h[l]].height;i.arrowDimension[o].ratioX=n/i.arrowDimension[o].width,i.arrowDimension[o].ratioY=u}},s.prototype.updateArrowSize=function(t){var e={arrowDimension:null};this.parent.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:e}});var i,n=this.getRotDegOfShape(t);i=0===n||180===n||-180===n?Math.abs(t.activePoint.width):Math.abs(t.activePoint.height);for(var r,a=0,l=["bar","arrow","arrowSolid","circle","square"];a<l.length;a++){var c=e.arrowDimension[r=l[a]].ratioY;e.arrowDimension[r].width=i/e.arrowDimension[r].ratioX,e.arrowDimension[r].height=i/c}},s.prototype.updateFontRatio=function(t,e){var i=this.parent,n=this.getMaxText(e),r=this.upperContext.measureText(n).width+.5*i.activeObj.textSettings.fontSize,o=i.activeObj.textSettings.fontSize+.25*i.activeObj.textSettings.fontSize,a=this.getRotDegOfShape(t);p(e)?t.textSettings.fontRatio=0===a||180===Math.abs(a)?r/t.textSettings.fontSize:o/t.textSettings.fontSize:e&&(t.textSettings.fontRatio=r/parseFloat(i.textArea.style.fontSize))},s.prototype.updateFontSize=function(t){var e=this.getRotDegOfShape(t);t.textSettings.fontSize=0===e||180===Math.abs(e)?t.activePoint.width/t.textSettings.fontRatio:t.activePoint.height/t.textSettings.fontRatio},s.prototype.updateObjColl=function(t,e){var i=this.parent,n=C({},i.cropObj,{},!0),r={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var o=r.currObj;o.objColl=e,o.pointColl=C([],i.pointColl,[],!0),o.afterCropActions=C([],i.afterCropActions,[],!0);var a={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),o.selPointColl=C([],a.selPointColl,[],!0);var l=i.activeObj.textSettings.bold,h=i.activeObj.textSettings.italic;switch(t){case"default":i.activeObj.textSettings.bold=!1,i.activeObj.textSettings.italic=!1;break;case"bold":i.activeObj.textSettings.bold=!0,i.activeObj.textSettings.italic=!1;break;case"italic":i.activeObj.textSettings.bold=!1,i.activeObj.textSettings.italic=!0;break;case"bolditalic":i.activeObj.textSettings.bold=!0,i.activeObj.textSettings.italic=!0}i.objColl.push(i.activeObj),i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),i.objColl.pop(),i.activeObj.textSettings.bold=l,i.activeObj.textSettings.italic=h},s.prototype.pushActItemIntoObj=function(){if("none"===this.parent.textArea.style.display)this.parent.objColl.push(this.parent.activeObj);else{var t=C({},this.parent.activeObj,{},!0);this.parent.notify("selection",{prop:"setTextBoxStylesToActObj",onPropertyChange:!1}),this.parent.objColl.push(this.parent.activeObj),this.parent.activeObj=t}},s.prototype.clearActObj=function(){"none"===this.parent.textArea.style.display&&(this.refreshActiveObj(),this.applyActObj(),this.refreshActiveObj(),this.parent.currObjType.isCustomCrop=!1)},s.prototype.refreshActiveObj=function(){this.parent.activeObj={},this.parent.activeObj.activePoint={startX:0,startY:0,endX:0,endY:0,width:0,height:0},this.parent.activeObj.triangle=[],this.parent.activeObj.triangleRatio=[],this.parent.activeObj.flipObjColl=[],this.parent.activeObj.strokeSettings=this.strokeSettings,this.parent.activeObj.textSettings=this.textSettings,this.parent.activeObj.rotatedAngle=0},s.prototype.applyActObj=function(t){var e=!1;if(void 0!==this.parent.activeObj.shape&&"text"===this.parent.activeObj.shape&&""===this.parent.activeObj.keyHistory)this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.parent.upperCanvas.width,this.parent.upperCanvas.height);else{var i=void 0,n=!1;if(void 0!==this.parent.activeObj.shape&&(i=this.parent.activeObj.shape.split("-")),(void 0===i&&this.parent.currObjType.isCustomCrop||void 0!==i&&"crop"===i[0])&&(n=!0),this.parent.activeObj.shape&&!n&&"shape"!==this.parent.activeObj.shape){for(var r=0;r<this.parent.objColl.length;r++)if(JSON.stringify(this.parent.activeObj)===JSON.stringify(this.parent.objColl[r])){e=!0;break}if(!e){p(this.parent.activeObj.currIndex)&&(this.parent.activeObj.currIndex="shape_"+(this.parent.objColl.length+1)),this.updImgRatioForActObj();var o=this.parent.activeObj.currIndex.split("_"),a=this.parent.objColl.splice(0,parseInt(o[1],10)-1);for(a.push(C({},this.parent.activeObj,{},!0)),r=0;r<this.parent.objColl.length;r++)a.push(this.parent.objColl[r]);this.parent.objColl=a,a=[],this.refreshActiveObj(),this.lowerContext.clearRect(0,0,this.parent.lowerCanvas.width,this.parent.lowerCanvas.height),this.parent.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),this.parent.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),this.parent.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),this.parent.currObjType.shape="",this.refreshActiveObj(),this.parent.isCircleCrop&&this.parent.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),z()?this.parent.updateToolbar(this.parent.element,"destroyQuickAccessToolbar"):this.parent.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),p(t)&&(this.parent.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),this.parent.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}}))}}}},s.prototype.alignTextAreaIntoCanvas=function(){var t=this.parent,e=t.textArea.value;t.textArea.value="";for(var i=0,n=e.length;i<n;i++)t.textArea.value+=e[i],t.textArea.style.height="auto",t.textArea.style.height=t.textArea.scrollHeight+"px",this.setTextBoxWidth()},s.prototype.transformTextArea=function(){var t=this.parent;if("text"===t.activeObj.shape){t.textArea.style.transformOrigin="0 0";var e=t.activeObj.rotatedAngle*(180/Math.PI),i="",n=this.getRotDegOfShape(t.activeObj);if(t.activeObj.flipObjColl.length>0)for(var r=0;r<t.activeObj.flipObjColl.length;r++)i+=0!==n&&n%90==0&&180!==n?"horizontal"===t.activeObj.flipObjColl[r].toLowerCase()?"scale(1, -1)":"scale(-1, 1)":"horizontal"===t.activeObj.flipObjColl[r].toLowerCase()?"scale(-1, 1)":"scale(1, -1)",n+=e,("horizontal"===t.activeObj.flipObjColl[r].toLowerCase()||"vertical"===t.activeObj.flipObjColl[r].toLowerCase())&&(t.textArea.style.transform="rotate("+n+"deg)"+i);else t.textArea.style.transform="rotate("+(n+=e)+"deg)"}},s.prototype.getTextAreaWidth=function(t){var r,e=this.parent,i=e.activeObj.textSettings.bold,n=e.activeObj.textSettings.italic;switch(t){case"default":e.activeObj.textSettings.bold=!1,e.activeObj.textSettings.italic=!1;break;case"bold":e.activeObj.textSettings.bold=!0,e.activeObj.textSettings.italic=!1;break;case"italic":e.activeObj.textSettings.bold=!1,e.activeObj.textSettings.italic=!0;break;case"bolditalic":e.activeObj.textSettings.bold=!0,e.activeObj.textSettings.italic=!0}return this.updateFontStyles(),r="none"===e.textArea.style.display?this.upperContext.measureText(e.activeObj.keyHistory).width+.5*e.activeObj.textSettings.fontSize:this.upperContext.measureText(e.textArea.value).width+.5*e.activeObj.textSettings.fontSize,e.activeObj.textSettings.bold=i,e.activeObj.textSettings.italic=n,r},s.prototype.getObjDetails=function(t){var e=this.parent,i={};switch(i.id=t.currIndex,i.type=e.toPascalCase(t.shape),i.startX=t.activePoint.startX,i.startY=t.activePoint.startY,t.shape){case"rectangle":i.width=t.activePoint.width,i.height=t.activePoint.height,i.strokeColor=t.strokeSettings.strokeColor,i.fillColor=t.strokeSettings.fillColor,i.strokeWidth=t.strokeSettings.strokeWidth;break;case"ellipse":i.radius=t.activePoint.width/2,i.strokeColor=t.strokeSettings.strokeColor,i.fillColor=t.strokeSettings.fillColor,i.strokeWidth=t.strokeSettings.strokeWidth;break;case"line":case"arrow":i.length=t.activePoint.width,i.strokeColor=t.strokeSettings.strokeColor,i.strokeWidth=t.strokeSettings.strokeWidth;break;case"text":i.text=t.keyHistory,i.fontSize=t.textSettings.fontSize,i.color=t.strokeSettings.strokeColor,i.fontStyle=[],t.textSettings.bold&&i.fontStyle.push("bold"),t.textSettings.italic&&i.fontStyle.push("italic");break;case"path":i.strokeColor=t.strokeSettings.strokeColor,i.strokeWidth=t.strokeSettings.strokeWidth}return i},s.prototype.getFreehandDrawDetails=function(t){var e=this.parent,i={};return i.id=e.pointColl[t].id,i.type=ac.FreehandDraw,i.points=C([],e.pointColl[t].points),i.strokeColor=e.pointColl[t].strokeColor,i.strokeWidth=e.pointColl[t].strokeWidth,i},s.prototype.getShapeSetting=function(t,e){var n,i=this.parent;if(!i.disabled&&i.isImageLoaded)if(this.applyActObj(),"shape"===t.split("_")[0]){for(var r,o=0,a=i.objColl.length;o<a;o++)if(i.objColl[o].currIndex===t){r=C({},i.objColl[o],{},!0);break}n=this.getObjDetails(r)}else"pen"===t.split("_")[0]&&(n=this.getFreehandDrawDetails(parseInt(t.split("_")[1],10)-1));e.shapeDetails=n},s.prototype.getShapeSettings=function(t){var e=this.parent,i=[];if(!e.disabled&&e.isImageLoaded){this.applyActObj();for(var n=0,r=e.objColl.length;n<r;n++){var o=this.getObjDetails(e.objColl[n]);i.push(o)}for(n=0;n<e.freehandCounter;n++)o=this.getFreehandDrawDetails(n),i.push(o)}t.shapeDetailsColl=i},s.prototype.isPointsInRange=function(t,e,i){var n=!1;!p(t)&&!p(e)&&t>=this.parent.img.destLeft&&e>=this.parent.img.destTop&&t<=this.parent.img.destLeft+this.parent.img.destWidth&&e<=this.parent.img.destTop+this.parent.img.destHeight&&(n=!0),i.inRange=n},s.prototype.alignRotateFlipColl=function(t,e,i){return t=this.popForDefaultTransformedState(t),t=this.popForDefaultFlipState(t),0===(t=this.popForDefaultRotateState(t)).length&&e&&(this.parent.transform.degree=0,this.parent.transform.currFlipState=""),i.collection=t,t},s.prototype.popForDefaultTransformedState=function(t){for(var e=0,i=0,n=0,r=0,o=0;o<t.length;o++)90===t[o]||"rotateRight"===t[o]?(i=0,n=0,r=0,4==++e&&(t.pop(),t.pop(),t.pop(),t.pop())):-90===t[o]||"rotateLeft"===t[o]?(e=0,n=0,r=0,4==++i&&(t.pop(),t.pop(),t.pop(),t.pop())):"horizontal"===t[o]||"Horizontal"===t[o]||"horizontalflip"===t[o]?(i=0,e=0,r=0,2==++n&&(t.pop(),t.pop())):("vertical"===t[o]||"Vertical"===t[o]||"verticalflip"===t[o])&&(n=0,i=0,e=0,2==++r&&(t.pop(),t.pop()));return t},s.prototype.popForDefaultFlipState=function(t){for(var e=0;e<t.length;e++)p(t[e+3])||(("horizontal"===t[e]||"Horizontal"===t[e]||"horizontalFlip"===t[e])&&("vertical"===t[e+1]||"Vertical"===t[e+1]||"verticalFlip"===t[e])&&("horizontal"===t[e+2]||"Horizontal"===t[e+2]||"horizontalFlip"===t[e])&&("vertical"===t[e+3]||"Vertical"===t[e+3]||"verticalFlip"===t[e])||("vertical"===t[e]||"Vertical"===t[e]||"verticalFlip"===t[e])&&("horizontal"===t[e+1]||"Horizontal"===t[e+1]||"horizontalFlip"===t[e+1])&&("vertical"===t[e+2]||"Vertical"===t[e+2]||"verticalFlip"===t[e])&&("horizontal"===t[e+3]||"Horizontal"===t[e+3]||"horizontalFlip"===t[e]))&&(t.pop(),t.pop(),t.pop(),t.pop());return t},s.prototype.popForDefaultRotateState=function(t){for(var e=0;e<t.length;e++)p(t[e+1])||((90===t[e]||"rotateRight"===t[e])&&(-90===t[e+1]||"rotateLeft"===t[e])||(-90===t[e]||"rotateLeft"===t[e])&&(90===t[e+1]||"rotateRight"===t[e]))&&(t.pop(),t.pop());return t},s.prototype.selectShape=function(t,e){var i=this.parent,n=!1;if(!i.disabled&&i.isImageLoaded)if(this.applyActObj(),"shape"===t.split("_")[0]){for(var r,o=0,a=i.objColl.length;o<a;o++)if(i.objColl[o].currIndex===t){r=C({},i.objColl[o],{},!0);break}p(r)?n=!1:(n=!0,i.activeObj=r,i.notify("toolbar",{prop:"getCanvasFilter",onPropertyChange:!1,value:{obj:l={canvasFilter:null}}}),this.lowerContext.filter=l.canvasFilter,i.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:i.activeObj}}),z()?(i.updateToolbar(i.element,i.activeObj.shape),"path"===i.activeObj.shape?i.updateToolbar(this.parent.element,"path","pathQuickAccessToolbar"):i.updateToolbar(i.element,"quickAccessToolbar",i.activeObj.shape)):(i.notify("toolbar","text"===i.activeObj.shape?{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}:"pen"===i.activeObj.shape?{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}:{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})))}else if("pen"===t.split("_")[0]){var l;i.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:l={bool:!1}}}),l.bool&&i.okBtn();var h={isIndex:!1};i.notify("freehand-draw",{prop:"isFHDIdx",value:{index:parseInt(t.split("_")[1],10)-1,obj:h}}),h.isIndex?(n=!0,i.notify("freehand-draw",{prop:"selectFhd",value:{id:t}}),z()?(i.updateToolbar(i.element,"pen"),i.updateToolbar(i.element,"quickAccessToolbar","pen")):(i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}))):n=!1}e.isSelected=n},s.prototype.deleteShape=function(t){var e=this.parent;if(!e.disabled&&e.isImageLoaded){if(this.applyActObj(),"shape"===t.split("_")[0]){for(var i=0,n=e.objColl.length;i<n;i++)if(e.objColl[i].currIndex===t){e.objColl.splice(i,1);break}}else"pen"===t.split("_")[0]&&e.notify("freehand-draw",{prop:"handle-freehand-draw",value:{id:t}});var r={canvasFilter:null};e.notify("toolbar",{prop:"getCanvasFilter",onPropertyChange:!1,value:{obj:r}}),this.lowerContext.filter=r.canvasFilter,this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),z()?e.updateToolbar(e.element,"imageLoaded"):e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}},s.prototype.getMaxText=function(t,e,i){p(e)&&(e=t?this.parent.textArea.value:this.parent.activeObj.keyHistory);for(var n,r=e.split("\n"),o=r[0].length,a=r[0],l=1;l<r.length;l++)(n=r[l].length)>o&&(a=r[l],o=n);return i&&(i.maxText=a),a},s.prototype.getLinePoints=function(t,e,i,n){var o,a,r=[];if(t===i){e<n?(o=[t,e],a=[i,n]):(a=[t,e],o=[i,n]);for(var l=this.getSlope(o,a,!0),h=this.getIntercept(o,l),c=o[1];c<=a[1];c++)r.push({x:u=l*c+h,y:c})}else{t<i?(o=[t,e],a=[i,n]):(a=[t,e],o=[i,n]),l=this.getSlope(o,a,!1),h=this.getIntercept(o,l);for(var u=o[0];u<=a[0];u++)r.push({x:u,y:c=l*u+h})}if(Math.floor(t)===Math.floor(i)||r.length<10&&(n-e>10||e-n>10)){r=[];for(var d=Math.min(e,n),f=0;f<Math.abs(Math.floor(n)-Math.floor(e));f++)r.push({x:t,y:d+f});if(r.length>1){var v=void 0;v=p(r[r.length-2])?{x:0,y:0}:r[r.length-2],r.push({x:r[r.length-1].x+(r[r.length-1].x-v.x)/2,y:r[r.length-1].y+(r[r.length-1].y-v.y)/2})}}else if(Math.floor(e)===Math.floor(n)||r.length<10&&(i-t>10||t-i>10)){r=[];for(var M=Math.min(t,i),w=0;w<Math.abs(Math.floor(i)-Math.floor(t));w++)r.push({x:M+w,y:e});r.length>1&&(v=void 0,v=p(r[r.length-2])?{x:0,y:0}:r[r.length-2],r.push({x:r[r.length-1].x+(r[r.length-1].x-v.x)/2,y:r[r.length-1].y+(r[r.length-1].y-v.y)/2}))}return r},s.prototype.getSlope=function(t,e,i){var n;if(i){if(t[1]===e[1])return null;n=(e[0]-t[0])/(e[1]-t[1])}else{if(t[0]===e[0])return null;n=(e[1]-t[1])/(e[0]-t[0])}return n},s.prototype.getIntercept=function(t,e){return null===e?t[0]:t[1]-e*t[0]},s.prototype.setPointCollForShapeRotation=function(t){var e_x=t.activePoint.startX+t.activePoint.width/2,e_y=t.activePoint.startY+t.activePoint.height/2,i={x:Math.cos(t.rotatedAngle)*(t.activePoint.startX-e_x)-Math.sin(t.rotatedAngle)*(t.activePoint.startY-e_y)+e_x,y:Math.sin(t.rotatedAngle)*(t.activePoint.startX-e_x)+Math.cos(t.rotatedAngle)*(t.activePoint.startY-e_y)+e_y},n={x:Math.cos(t.rotatedAngle)*(t.activePoint.endX-e_x)-Math.sin(t.rotatedAngle)*(t.activePoint.startY-e_y)+e_x,y:Math.sin(t.rotatedAngle)*(t.activePoint.endX-e_x)+Math.cos(t.rotatedAngle)*(t.activePoint.startY-e_y)+e_y},r={x:Math.cos(t.rotatedAngle)*(t.activePoint.startX-e_x)-Math.sin(t.rotatedAngle)*(t.activePoint.endY-e_y)+e_x,y:Math.sin(t.rotatedAngle)*(t.activePoint.startX-e_x)+Math.cos(t.rotatedAngle)*(t.activePoint.endY-e_y)+e_y},o={x:Math.cos(t.rotatedAngle)*(t.activePoint.endX-e_x)-Math.sin(t.rotatedAngle)*(t.activePoint.endY-e_y)+e_x,y:Math.sin(t.rotatedAngle)*(t.activePoint.endX-e_x)+Math.cos(t.rotatedAngle)*(t.activePoint.endY-e_y)+e_y};t.horTopLinePointColl=this.getLinePoints(i.x,i.y,n.x,n.y),t.horBottomLinePointColl=this.getLinePoints(r.x,r.y,o.x,o.y),t.verLeftLinePointColl=this.getLinePoints(i.x,i.y,r.x,r.y),t.verRightLinePointColl=this.getLinePoints(n.x,n.y,o.x,o.y),t.verLeftLinePointColl.reverse(),t.verRightLinePointColl.reverse();for(var a=0;a<t.horTopLinePointColl.length;a++)t.horTopLinePointColl[a].ratioX=(t.horTopLinePointColl[a].x-this.parent.img.destLeft)/this.parent.img.destWidth,t.horTopLinePointColl[a].ratioY=(t.horTopLinePointColl[a].y-this.parent.img.destTop)/this.parent.img.destHeight;for(a=0;a<t.horBottomLinePointColl.length;a++)t.horBottomLinePointColl[a].ratioX=(t.horBottomLinePointColl[a].x-this.parent.img.destLeft)/this.parent.img.destWidth,t.horBottomLinePointColl[a].ratioY=(t.horBottomLinePointColl[a].y-this.parent.img.destTop)/this.parent.img.destHeight;for(a=0;a<t.verLeftLinePointColl.length;a++)t.verLeftLinePointColl[a].ratioX=(t.verLeftLinePointColl[a].x-this.parent.img.destLeft)/this.parent.img.destWidth,t.verLeftLinePointColl[a].ratioY=(t.verLeftLinePointColl[a].y-this.parent.img.destTop)/this.parent.img.destHeight;for(a=0;a<t.verRightLinePointColl.length;a++)t.verRightLinePointColl[a].ratioX=(t.verRightLinePointColl[a].x-this.parent.img.destLeft)/this.parent.img.destWidth,t.verRightLinePointColl[a].ratioY=(t.verRightLinePointColl[a].y-this.parent.img.destTop)/this.parent.img.destHeight;if("move"!==this.parent.upperCanvas.style.cursor){var l={rotationCirclePoint:null};this.parent.notify("selection",{prop:"getTransRotationPoint",value:{obj:t,object:l}});var h=l.rotationCirclePoint;h&&(t.rotationCirclePointColl={x:Math.cos(t.rotatedAngle)*(h.x-e_x)-Math.sin(t.rotatedAngle)*(h.y-e_y)+e_x,y:Math.sin(t.rotatedAngle)*(h.x-e_x)+Math.cos(t.rotatedAngle)*(h.y-e_y)+e_y},t.rotationCirclePointColl.ratioX=(t.rotationCirclePointColl.x-this.parent.img.destLeft)/this.parent.img.destWidth,t.rotationCirclePointColl.ratioY=(t.rotationCirclePointColl.y-this.parent.img.destTop)/this.parent.img.destHeight)}},s.prototype.getSquarePointForRotatedShape=function(t,e){var i={startX:0,startY:0,endX:0,endY:0,width:0,height:0},n_x=t.activePoint.startX+t.activePoint.width/2,n_y=t.activePoint.startY+t.activePoint.height/2,r={x:Math.cos(t.rotatedAngle)*(t.activePoint.startX-n_x)-Math.sin(t.rotatedAngle)*(t.activePoint.startY-n_y)+n_x,y:Math.sin(t.rotatedAngle)*(t.activePoint.startX-n_x)+Math.cos(t.rotatedAngle)*(t.activePoint.startY-n_y)+n_y},o={x:Math.cos(t.rotatedAngle)*(t.activePoint.endX-n_x)-Math.sin(t.rotatedAngle)*(t.activePoint.startY-n_y)+n_x,y:Math.sin(t.rotatedAngle)*(t.activePoint.endX-n_x)+Math.cos(t.rotatedAngle)*(t.activePoint.startY-n_y)+n_y},a={x:Math.cos(t.rotatedAngle)*(t.activePoint.startX-n_x)-Math.sin(t.rotatedAngle)*(t.activePoint.endY-n_y)+n_x,y:Math.sin(t.rotatedAngle)*(t.activePoint.startX-n_x)+Math.cos(t.rotatedAngle)*(t.activePoint.endY-n_y)+n_y},l={x:Math.cos(t.rotatedAngle)*(t.activePoint.endX-n_x)-Math.sin(t.rotatedAngle)*(t.activePoint.endY-n_y)+n_x,y:Math.sin(t.rotatedAngle)*(t.activePoint.endX-n_x)+Math.cos(t.rotatedAngle)*(t.activePoint.endY-n_y)+n_y};return i.startX=r.x,i.startY=r.y,i.endX=r.x,i.endY=r.y,i.startX>o.x&&(i.startX=o.x),i.startX>a.x&&(i.startX=a.x),i.startX>l.x&&(i.startX=l.x),i.startY>o.y&&(i.startY=o.y),i.startY>a.y&&(i.startY=a.y),i.startY>l.y&&(i.startY=l.y),i.endX<o.x&&(i.endX=o.x),i.endX<a.x&&(i.endX=a.x),i.endX<l.x&&(i.endX=l.x),i.endY<o.y&&(i.endY=o.y),i.endY<a.y&&(i.endY=a.y),i.endY<l.y&&(i.endY=l.y),i.width=i.endX-i.startX,i.height=i.endY-i.startY,e&&(e.activePoint=i),i},s}(),aj=function(){function s(t){this.isReverseFlip=!1,this.disablePan=!1,this.isReverseRotate=!1,this.flipColl=[],this.prevZoomValue=1,this.cropDimension={width:0,height:0},this.isPreventSelect=!1,this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("transform",this.transform,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("transform",this.transform),this.parent.off("destroyed",this.destroy)},s.prototype.transform=function(t){switch(this.initTransformPvtVar(),t.prop){case"rotateImage":this.rotateImage(t.value.degree);break;case"flipImage":this.flipImage(t.value.direction);break;case"setDestPointsForFlipState":this.setDestPointsForFlipState();break;case"zoomAction":this.zoomAction(t.value.zoomFactor,t.value.zoomPoint);break;case"disableZoomOutBtn":this.disableZoomOutBtn(t.value.isZoomOut);break;case"rotatedFlip":this.rotatedFlip();break;case"drawPannedImage":this.drawPannedImage(t.value.xDiff,t.value.yDiff);break;case"drawPannImage":this.drawPannImage(t.value.point);break;case"performTransformation":this.performTransformation(t.value.text);break;case"updateTransform":this.updateTransform(t.value.text);break;case"rotatePan":this.rotatePan(t.value.isCropSelection,t.value.isDefaultZoom);break;case"drawRotatedImage":this.drawRotatedImage(t.value.degree);break;case"limitPan":this.limitPan();break;case"updateFlipActiveObj":this.updateFlipActiveObj(t.value.panRegion);break;case"resetZoom":this.resetZoom();break;case"pan":this.pan(t.value.value);break;case"zoom":this.zoom(t.value.zoomFactor,t.value.zoomPoint);break;case"setCurrPanRegion":this.setCurrPanRegion(t.value.region,t.value.type,t.value.obj);break;case"rotate":this.rotate(t.value.degree,t.value.obj);break;case"flip":this.flip(t.value.direction);break;case"update":this.update();break;case"calcMaxDimension":this.calcMaxDimension(t.value.width,t.value.height,t.value.obj);break;case"updatePanPoints":this.updatePanPoints(t.value.panRegion,t.value.obj);break;case"getPanMove":t.value.obj.panMove=this.panMove;break;case"setPanMove":this.panMove=t.value.point;break;case"getTempPanMove":t.value.obj.tempPanMove=this.tempPanMove;break;case"setTempPanMove":this.tempPanMove=t.value.point;break;case"setReverseFlip":this.isReverseFlip=t.value.isReverseFlip;break;case"setDisablePan":this.disablePan=t.value.bool;break;case"setCurrDestinationPoint":this.currDestPoint=t.value.point,this.currDestPoint.startX-=this.parent.cropObj.totalPannedPoint.x,this.currDestPoint.startY-=this.parent.cropObj.totalPannedPoint.y;break;case"setReverseRotate":this.isReverseRotate=t.value.bool;break;case"getFlipColl":t.value.obj.flipColl=this.flipColl;break;case"setFlipColl":this.flipColl=t.value.flipColl;break;case"getPreviousZoomValue":t.value.obj.previousZoomValue=this.prevZoomValue;break;case"setPreviousZoomValue":this.prevZoomValue=t.value.previousZoomValue;break;case"getCropDimension":t.value.obj.cropDimension=this.cropDimension;break;case"setCropDimension":this.cropDimension.width=t.value.width,this.cropDimension.height=t.value.height;break;case"getPreventSelect":t.value.obj.bool=this.isPreventSelect;break;case"setPreventSelect":this.isPreventSelect=t.value.bool;break;case"reset":this.reset()}},s.prototype.getModuleName=function(){return"transform"},s.prototype.initTransformPvtVar=function(){this.parent.lowerCanvas&&(this.lowerContext=this.parent.lowerCanvas.getContext("2d")),this.parent.upperCanvas&&(this.upperContext=this.parent.upperCanvas.getContext("2d"))},s.prototype.reset=function(){this.zoomBtnHold=null,this.tempPanMove=null,this.panMove=null,this.disablePan=!1,this.currDestPoint=null,this.isReverseRotate=!1,this.flipColl=[],this.transCurrObj=null,this.prevZoomValue=1,this.isPreventSelect=!1},s.prototype.rotateImage=function(t){var e=this,i=this.parent,n={cancel:!1,previousDegree:i.transform.degree,currentDegree:360===Math.abs(i.transform.degree+t)?0:i.transform.degree+t};!this.isPreventSelect&&z()&&i.events&&!0===i.events.rotating.hasDelegate?i.dotNetRef.invokeMethodAsync("RotateEventAsync","OnRotate",n).then(function(r){e.rotateEvent(r,t)}):(this.isPreventSelect||i.trigger("rotating",n),this.rotateEvent(n,t))},s.prototype.rotateEvent=function(t,e){var i=this.parent;if(!t.cancel){var n=void 0;if(p(this.transCurrObj)){var r={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),(n=r.currObj).objColl=C([],i.objColl,null,!0),n.pointColl=C({},i.pointColl,null,!0),n.afterCropActions=C([],i.afterCropActions,[],!0);var o={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),n.selPointColl=C([],o.selPointColl,[],!0)}i.afterCropActions.push(90===e?"rotateRight":"rotateLeft");var a=[],l=void 0;i.activeObj.activePoint&&i.activeObj.shape&&(void 0!==i.activeObj.shape&&(a=i.activeObj.shape.split("-")),(i.currObjType.isCustomCrop||"crop"===a[0])&&(l=i.currObjType.isCustomCrop?"custom":a[1],i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.objColl.push(i.activeObj),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))),i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.drawRotatedImage(e),i.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),l&&(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.activeObj=C({},i.objColl[i.objColl.length-1],{},!0),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}})),i.isUndoRedo=!1;var h={collection:i.rotateFlipColl};i.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:i.rotateFlipColl,isRotateFlipCollection:!0,obj:h}}),i.rotateFlipColl=h.collection,i.cropObj.activeObj.shape&&!this.isPreventSelect&&(this.isPreventSelect=!0,i.select("custom"),this.isPreventSelect=!1,i.setProperties({zoomSettings:{zoomFactor:1}},!0),this.prevZoomValue=i.zoomSettings.zoomFactor)}},s.prototype.drawRotatedImage=function(t){var e=this.parent;0===t?e.transform.degree=0:e.transform.degree+=t,360===Math.abs(e.transform.degree)&&(e.transform.degree=0),e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1});var i=C([],e.objColl,[],!0),n=C({},e.activeObj,{},!0);if(e.objColl=[],e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isReverseRotate||e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),this.rotateDegree(t),this.isReverseRotate||(e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),e.rotateFlipColl.push(t)),e.objColl=C([],i,[],!0),e.activeObj=C({},n,{},!0),e.isCircleCrop&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),e.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:t}}),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t>0)e.notify("freehand-draw",{prop:"rotateFhdColl",onPropertyChange:!1});else for(var r=0;r<3;r++)e.notify("freehand-draw",{prop:"rotateFhdColl",onPropertyChange:!1});e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.updateCurrSelectionPoint(t)},s.prototype.rotateDegree=function(t){var e=this.parent;this.lowerContext.save(),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.lowerContext.translate(e.lowerCanvas.width/2,e.lowerCanvas.height/2),this.lowerContext.rotate(Math.PI/180*t),this.lowerContext.translate(-e.lowerCanvas.width/2,-e.lowerCanvas.height/2);var i=this.lowerContext.filter;this.parent.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(this.parent.baseImg,this.parent.img.srcLeft,this.parent.img.srcTop,this.parent.img.srcWidth,this.parent.img.srcHeight,this.parent.img.destLeft,this.parent.img.destTop,this.parent.img.destWidth,this.parent.img.destHeight),this.lowerContext.filter=i,this.lowerContext.translate(e.lowerCanvas.width/2,e.lowerCanvas.height/2),this.lowerContext.rotate(Math.PI/180*-t),this.lowerContext.translate(-e.lowerCanvas.width/2,-e.lowerCanvas.height/2),this.lowerContext.restore()},s.prototype.updateCurrSelectionPoint=function(t){var e=this.parent;if(e.currSelectionPoint&&this.currDestPoint){var i=C({},e.activeObj,{},!0),n=C([],e.objColl,[],!0),r={startX:e.img.srcLeft,startY:e.img.srcTop,width:e.img.srcWidth,height:e.img.srcHeight},o={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};e.objColl=[],e.objColl.push(C({},e.currSelectionPoint,{},!0)),p(e.objColl[0].imageRatio)&&(e.activeObj=e.objColl[0],e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.objColl[0]=e.activeObj),e.img.srcLeft=0,e.img.srcTop=0,e.img.srcWidth=e.baseImg.width,e.img.srcHeight=e.baseImg.height,e.img.destLeft=this.currDestPoint.startX,e.img.destTop=this.currDestPoint.startY,e.img.destWidth=this.currDestPoint.width,e.img.destHeight=this.currDestPoint.height,"number"==typeof t&&(e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),e.notify("draw",{prop:"setClientTransDim",onPropertyChange:!1,value:{isPreventDimension:null}})),e.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:t}}),e.currSelectionPoint=C({},e.objColl[0],{},!0),this.currDestPoint={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight},e.objColl=n,e.activeObj=i,e.img.srcLeft=r.startX,e.img.srcTop=r.startY,e.img.srcWidth=r.width,e.img.srcHeight=r.height,e.img.destLeft=o.startX,e.img.destTop=o.startY,e.img.destWidth=o.width,e.img.destHeight=o.height}},s.prototype.flipImage=function(t){var e=this,i=this.parent,n={direction:t,cancel:!1,previousDirection:i.toPascalCase(i.transform.currFlipState)};!this.isPreventSelect&&z()&&i.events&&!0===i.events.flipping.hasDelegate?i.dotNetRef.invokeMethodAsync("FlipEventAsync","OnFlip",n).then(function(r){e.flipEvent(r,t)}):(this.isPreventSelect||i.trigger("flipping",n),this.flipEvent(n,t))},s.prototype.flipEvent=function(t,e){var i=this.parent;if(!t.cancel){var n;if(p(this.transCurrObj)){var r={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),(n=r.currObj).objColl=C([],i.objColl,null,!0),n.pointColl=C({},i.pointColl,null,!0),n.afterCropActions=C([],i.afterCropActions,[],!0);var o={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),n.selPointColl=C([],o.selPointColl,[],!0)}i.afterCropActions.push("horizontal"===e.toLowerCase()?"horizontalflip":"verticalflip");var l,a=[];i.activeObj.activePoint&&(void 0!==i.activeObj.shape&&(a=i.activeObj.shape.split("-")),(i.currObjType.isCustomCrop||"crop"===a[0])&&(l=i.currObjType.isCustomCrop?"custom":a[1],i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.objColl.push(i.activeObj),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))),i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),i.clearContext(this.lowerContext),i.clearContext(this.upperContext);var h=C([],i.objColl,[],!0),c=C({},i.activeObj,{},!0);i.objColl=[],i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isReverseFlip||i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var u=e.toLowerCase();this.updateFlipState(u),i.transform.currFlipState="horizontal"===u?"horizontal"===i.transform.currFlipState.toLowerCase()?"":"horizontal":"vertical"===i.transform.currFlipState.toLowerCase()?"":"vertical";var d={isSelected:null};i.notify("draw",{prop:"getRotatedFlipCropSelection",onPropertyChange:!1,value:{bool:d}}),d.isSelected&&(i.img.destLeft+=i.panPoint.totalPannedInternalPoint.x,i.img.destTop+=i.panPoint.totalPannedInternalPoint.y);var f=this.lowerContext.filter;if(i.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(i.baseImg,i.img.srcLeft,i.img.srcTop,i.img.srcWidth,i.img.srcHeight,i.img.destLeft,i.img.destTop,i.img.destWidth,i.img.destHeight),this.lowerContext.filter=f,i.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),this.updateFlipState(e.toLowerCase()),this.isReverseFlip||(i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),this.updateFlipColl(e.toLocaleLowerCase()),i.rotateFlipColl.push(e.toLowerCase())),1===i.rotateFlipColl.length){var v={panRegion:""};i.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:v}}),""===v.panRegion?i.notify("draw",{prop:"setClientTransDim",onPropertyChange:!1,value:{isPreventDimension:null}}):this.setDestPointsForFlipState()}i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i.objColl=C([],h,[],!0),i.activeObj=C({},c,{},!0);for(var g=0,b=i.objColl.length;g<b;g++){var M=i.objColl[g].flipObjColl;0===M.length?M.push(e):M[M.length-1]===e?M.pop():M.push(e)}i.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:e.toLowerCase()}});var w=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",i.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),"horizontal"===e.toLowerCase()||"vertical"===e.toLowerCase()?(i.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:e.toLowerCase()}}),i.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}})):i.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=w,i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.updateCurrSelectionPoint(e.toLowerCase()),i.isUndoRedo=!1,i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),l&&(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.activeObj=C({},i.objColl[i.objColl.length-1],{},!0),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}}));var S={collection:i.rotateFlipColl};i.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:i.rotateFlipColl,isRotateFlipCollection:!0,obj:S}}),i.rotateFlipColl=S.collection,i.cropObj.activeObj.shape&&!this.isPreventSelect&&(this.isPreventSelect=!0,i.select("custom"),this.isPreventSelect=!1,i.setProperties({zoomSettings:{zoomFactor:1}},!0),this.prevZoomValue=i.zoomSettings.zoomFactor)}},s.prototype.updateFlipState=function(t){var e=this.parent.transform.degree;"horizontal"===t?e%90==0&&e%180!=0?this.verticalFlip():this.horizontalFlip():"vertical"===t&&(e%90==0&&e%180!=0?this.horizontalFlip():this.verticalFlip())},s.prototype.horizontalFlip=function(){this.lowerContext.translate(this.lowerContext.canvas.width,0),this.lowerContext.scale(-1,1),this.upperContext.translate(this.upperContext.canvas.width,0),this.upperContext.scale(-1,1)},s.prototype.verticalFlip=function(){this.lowerContext.translate(0,this.lowerContext.canvas.height),this.lowerContext.scale(1,-1),this.upperContext.translate(0,this.upperContext.canvas.height),this.upperContext.scale(1,-1)},s.prototype.updateFlipColl=function(t){if(!this.isPreventSelect&&(0===this.flipColl.length||this.flipColl[this.flipColl.length-1]!==t?this.flipColl.push(t):this.flipColl.pop(),this.flipColl.length>=4)){var e=this.flipColl.slice(-4);("horizontal"===e[0]&&"vertical"===e[1]&&"horizontal"===e[2]&&"vertical"===e[3]||"vertical"===e[0]&&"horizontal"===e[1]&&"vertical"===e[2]&&"horizontal"===e[3])&&this.flipColl.splice(-4)}},s.prototype.setDestPointsForFlipState=function(){var t=this.parent,e={panRegion:""};t.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:e}}),""!==e.panRegion&&("horizontal"===e.panRegion?t.img.destLeft=t.lowerCanvas.clientWidth-(t.img.destWidth+t.img.destLeft):("vertical"===e.panRegion||(t.img.destLeft=t.lowerCanvas.clientWidth-(t.img.destWidth+t.img.destLeft)),t.img.destTop=t.lowerCanvas.clientHeight-(t.img.destHeight+t.img.destTop)))},s.prototype.zoomAction=function(t,e){var i=this,n=this.parent;if(!n.disabled&&n.isImageLoaded){if(n.zoomSettings.zoomFactor>=n.zoomSettings.maxZoomFactor&&t>0||n.zoomSettings.zoomFactor>n.zoomSettings.minZoomFactor&&t<0&&this.disableZoomOutBtn(!0)||n.zoomSettings.zoomFactor<=n.zoomSettings.minZoomFactor&&t<0)return void(z()||n.notify("toolbar",{prop:"zoom-up-handler",onPropertyChange:!1}));n.notify("draw",{prop:"setImageEdited",onPropertyChange:!1});var r=t;t=r>0?.1:-.1;for(var o=0;o<Math.abs(r/.1);o++)if(1===this.prevZoomValue)this.prevZoomValue+=t>0?10*t:10*t/10;else if(this.prevZoomValue>1)this.prevZoomValue+=10*t;else if(this.prevZoomValue<1){this.prevZoomValue+=10*t/10;var a=Math.pow(10,1);this.prevZoomValue=Math.round(this.prevZoomValue*a)/a}t=r,n.setProperties({zoomSettings:{zoomFactor:this.prevZoomValue}},!0);var l=void 0;this.tempActiveObj=null,this.isShape=!1,void 0!==n.activeObj.shape&&("shape"===n.activeObj.shape?n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}):l=n.activeObj.shape.split("-")),void 0!==l&&"crop"===l[0]?(this.tempActiveObj=C({},n.activeObj,{},!0),n.isCropTab=!0):n.activeObj.shape&&"crop"!==l[0]&&(this.isShape=!0);var h={zoomType:null};n.notify("selection",{prop:"getZoomType",onPropertyChange:!1,value:{obj:h}}),p(e)&&(e=n.isCropTab&&this.tempActiveObj?{x:n.activeObj.activePoint.startX+n.activeObj.activePoint.width/2,y:n.activeObj.activePoint.startY+n.activeObj.activePoint.height/2}:{x:n.lowerCanvas.clientWidth/2,y:n.lowerCanvas.clientHeight/2},("MouseWheel"===h.zoomType||"Pinch"===h.zoomType)&&(e={x:n.zoomSettings.zoomPoint.x,y:n.zoomSettings.zoomPoint.y}));var u={zoomPoint:e,cancel:!1,previousZoomFactor:n.zoomSettings.zoomFactor-10*t,currentZoomFactor:n.zoomSettings.zoomFactor,zoomTrigger:h.zoomType};!n.isCropToolbar&&z()&&n.events&&!0===n.events.zooming.hasDelegate?n.dotNetRef.invokeMethodAsync("ZoomEventAsync","OnZoom",u).then(function(d){i.zoomEvent(d,t)}):(n.isCropToolbar||n.trigger("zooming",u),this.zoomEvent(u,t))}},s.prototype.zoomEvent=function(t,e){var i=this.parent;if(!t.cancel){z()?i.element.querySelector(".e-contextual-toolbar-wrapper")&&!i.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hidden")&&i.updateToolbar(i.element,"closeContextualToolbar"):i.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}),i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),this.lowerContext.filter=this.parent.canvasFilter,i.upperCanvas.style.cursor=i.cursor="default";var r=C([],i.objColl,[],!0);if(i.isCropTab||(0!==i.transform.degree?(i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),i.panPoint.currentPannedPoint={x:0,y:0},this.rotatePan(!0,!0)):""!==i.transform.currFlipState&&(i.panPoint.totalPannedPoint={x:0,y:0}),i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1})),0===i.transform.degree){this.drawZoomImgToCanvas(e,this.tempActiveObj);var o={panRegion:""};if(i.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:o}}),""!==o.panRegion){i.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:i.panPoint.totalPannedPoint,isAdd:!0}}),r=C([],i.objColl,[],!0),i.objColl=[];var a=i.img.destLeft,l=i.img.destTop;this.setDestPointsForFlipState(),this.rotatedFlip(),i.img.destLeft=a,i.img.destTop=l,i.objColl=r,i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1})}i.zoomSettings.zoomFactor<=i.zoomSettings.minZoomFactor&&!i.isCropTab&&(i.panPoint.totalPannedPoint={x:0,y:0})}else{i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),i.panPoint.totalPannedClientPoint={x:0,y:0},i.panPoint.totalPannedInternalPoint={x:0,y:0},this.rotateZoom(e);var h={panRegion:""};if(i.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:h}}),""!==h.panRegion){var c=this.lowerContext.filter;this.lowerContext.filter="none",i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=c}}var u=Math.pow(10,1);(i.zoomSettings.zoomFactor<=i.zoomSettings.minZoomFactor||Math.round(i.transform.zoomFactor*u)/u==2)&&(clearInterval(this.zoomBtnHold),this.zoomBtnHold=0);var f,d={panRegion:""};i.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:d}}),""===d.panRegion&&(c=this.lowerContext.filter,this.lowerContext.filter="none",i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=c),(i.currSelectionPoint&&"crop-circle"===i.currSelectionPoint.shape||i.isCircleCrop)&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.tempActiveObj&&(i.activeObj=C({},this.tempActiveObj,{},!0),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}}),i.zoomSettings.zoomFactor<=i.zoomSettings.minZoomFactor&&(i.currSelectionPoint=null)),i.isUndoRedo=!1,z()?(f=i.element.querySelector("#zoomout"))&&i.zoomSettings.zoomFactor<=i.zoomSettings.minZoomFactor?f.classList.add("e-overlay"):f&&f.classList.remove("e-overlay"):(f=document.querySelector("#"+i.element.id+"_zoomOut"))&&i.zoomSettings.zoomFactor<=i.zoomSettings.minZoomFactor?(f.classList.add("e-disabled"),f.parentElement.classList.add("e-overlay")):f&&(f.classList.remove("e-disabled"),f.parentElement.classList.remove("e-overlay")),this.autoEnablePan(),this.tempActiveObj&&(i.activeObj=C({},this.tempActiveObj,{},!0)),"crop-custom"===i.activeObj.shape&&(i.currObjType.isCustomCrop=!0);var v=i.element.querySelector(".e-img-pan .e-btn");v&&i.togglePan?v.classList.add("e-selected-btn"):v&&v.classList.remove("e-selected-btn"),this.isShape&&(i.activeObj=C({},i.objColl[i.objColl.length-1],{},!0),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}),z()||(i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}))),z()?i.updateToolbar(i.element,"enableDisableToolbarBtn"):i.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1}),i.notify("selection",{prop:"setZoomType",onPropertyChange:!1,value:{zoomType:"Toolbar"}})}},s.prototype.disableZoomOutBtn=function(t){var n,e=this.parent,i=!1;p(t)||(e.transform.zoomFactor-=.1),n=z()?this.parent.element.querySelector("#zoomout"):document.querySelector("#"+e.element.id+"_zoomOut");var r=e.img.destLeft,o=e.img.destTop,a=e.img.destWidth,l=e.img.destHeight;return e.activeObj.shape?(this.setZoomDimension(-.1,e.activeObj),p(n)||(e.img.destLeft>e.activeObj.activePoint.startX||e.img.destTop>e.activeObj.activePoint.startY||e.img.destLeft+e.img.destWidth<e.activeObj.activePoint.endX||e.img.destTop+e.img.destHeight<e.activeObj.activePoint.endY||e.zoomSettings.zoomFactor===e.zoomSettings.minZoomFactor?(z()?n.classList.add("e-overlay"):(n.classList.add("e-disabled"),n.parentElement.classList.add("e-overlay")),i=!0):(z()?n.classList.remove("e-overlay"):(n.classList.remove("e-disabled"),n.parentElement.classList.remove("e-overlay")),i=!1))):this.setZoomDimension(-.1,null),p(t)||(e.transform.zoomFactor+=.1),e.img.destLeft=r,e.img.destTop=o,e.img.destWidth=a,e.img.destHeight=l,i},s.prototype.drawZoomImgToCanvas=function(t,e){var i=this.parent,n=Math.pow(10,1);Math.round(i.transform.zoomFactor*n)/n==.1&&-.1===t?i.transform.zoomFactor=0:i.transform.zoomFactor+=t,i.transform[i.isCropTab?"cropZoomFactor":"defaultZoomFactor"]=i.transform.zoomFactor;var r={width:0,height:0};i.isCropTab?r=this.cropZoom(t,e):((r=this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight)).width+=r.width*i.transform.zoomFactor,r.height+=r.height*i.transform.zoomFactor,i.img.destLeft=(i.lowerCanvas.clientWidth-r.width)/2,i.img.destTop=(i.lowerCanvas.clientHeight-r.height)/2),i.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:r}}),r.width=this.cropDimension.width,r.height=this.cropDimension.height,r.width+=r.width*i.transform.zoomFactor,r.height+=r.height*i.transform.zoomFactor,i.notify("draw",{prop:"setZoomCropWidth",value:{width:r.width,height:r.height}})},s.prototype.rotatedFlip=function(){var t=this.parent;this.isReverseFlip=!0;var e=t.transform.currFlipState,i=this.flipColl,n=C([],t.objColl,[],!0),r=C({},t.activeObj,{},!0);this.flipColl=[],t.objColl=[],t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}});var o=this.lowerContext.filter;t.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(t.baseImg,t.img.srcLeft,t.img.srcTop,t.img.srcWidth,t.img.srcHeight,t.img.destLeft,t.img.destTop,t.img.destWidth,t.img.destHeight),this.lowerContext.filter=o,t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:!0,context:null,isPreventCircleCrop:null}}),""===e&&""!==t.transform.currFlipState&&(e=t.transform.currFlipState),t.transform.currFlipState=e,this.flipColl=i,t.objColl=C([],n,[],!0),this.lowerContext.filter="none",t.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),this.lowerContext.filter=o,0!==r.activePoint.width&&(t.activeObj=C({},r,{},!0)),this.isReverseFlip=!1},s.prototype.rotateZoom=function(t){var e=this.parent,i=Math.pow(10,1);Math.round(e.transform.zoomFactor*i)/i==.1&&-.1===t?e.transform.zoomFactor=0:e.transform.zoomFactor+=t,e.isCropTab?e.transform.cropZoomFactor=e.transform.zoomFactor:e.transform.defaultZoomFactor=e.transform.zoomFactor;var n=C([],e.objColl,[],!0),r=C({},e.activeObj,{},!0);e.objColl=[],e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),e.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1});var o=this.lowerContext.filter;e.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(e.baseImg,e.img.srcLeft,e.img.srcTop,e.img.srcWidth,e.img.srcHeight,e.img.destLeft,e.img.destTop,e.img.destWidth,e.img.destHeight),this.lowerContext.filter=o,e.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),e.objColl=n,e.activeObj=r;var a={width:this.cropDimension.width,height:this.cropDimension.height};a.width+=a.width*e.transform.zoomFactor,a.height+=a.height*e.transform.zoomFactor,e.notify("draw",{prop:"setZoomCropWidth",value:{width:a.width,height:a.height}})},s.prototype.autoEnablePan=function(){this.parent.transform.zoomFactor<=0?(this.parent.togglePan=!1,this.parent.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}),this.parent.pan(!1),this.disablePan=!1):this.parent.pan(!this.disablePan)},s.prototype.cropZoom=function(t,e){var i=this.parent,n=i.img.destLeft,r=i.img.destTop,o={width:0,height:0};return 0===i.img.srcLeft||0===i.img.srcTop?o=p(e)?this.setZoomDimension(t,null):this.setZoomDimension(t,e):((o=i.transform.degree%90==0&&i.transform.degree%180!=0?this.calcMaxDimension(i.img.srcHeight,i.img.srcWidth):this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight)).width+=o.width*i.transform.zoomFactor,o.height+=o.height*i.transform.zoomFactor),i.img.destLeft=n-(o.width-i.img.destWidth)/2,i.img.destTop=r-(o.height-i.img.destHeight)/2,n=i.img.destLeft,r=i.img.destTop,e&&(i.img.destLeft>e.activePoint.startX&&(i.img.destLeft=e.activePoint.startX,0===i.transform.degree&&(i.panPoint.totalPannedPoint.x-=n-i.img.destLeft)),i.img.destTop>e.activePoint.startY&&(i.img.destTop=e.activePoint.startY,0===i.transform.degree&&(i.panPoint.totalPannedPoint.y-=r-i.img.destTop)),i.img.destLeft+o.width<e.activePoint.endX&&(i.img.destLeft=e.activePoint.endX-o.width,0===i.transform.degree&&(i.panPoint.totalPannedPoint.x-=n-i.img.destLeft)),i.img.destTop+o.height<e.activePoint.endY&&(i.img.destTop=e.activePoint.endY-o.height,0===i.transform.degree&&(i.panPoint.totalPannedPoint.y-=r-i.img.destTop))),o},s.prototype.setZoomDimension=function(t,e){var i=this.parent,n={width:0,height:0};if((n=i.transform.degree%90==0&&i.transform.degree%180!=0?this.calcMaxDimension(i.img.srcHeight,i.img.srcWidth):this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight)).width+=n.width*i.transform.zoomFactor,n.height+=n.height*i.transform.zoomFactor,i.img.destLeft+=(i.img.destWidth-n.width)/2,i.img.destTop+=(i.img.destHeight-n.height)/2,t<0&&e){var r=e.activePoint.startX,o=e.activePoint.startY,a=e.activePoint.width,l=e.activePoint.height,h=i.img.destLeft+n.width,c=i.img.destTop+n.height;i.img.destLeft>r&&(i.img.destLeft=r),i.img.destTop>o&&(i.img.destTop=o),h<r+a&&(i.img.destLeft=r+a-n.width),c<o+l&&(i.img.destTop=o+l-n.height)}else t<0&&p(e)&&(i.img.destLeft>0&&(i.img.destLeft=0),i.img.destTop>0&&(i.img.destTop=0),i.img.destLeft+n.width<i.lowerCanvas.width&&(i.img.destLeft=i.lowerCanvas.width-i.img.destWidth),i.img.destTop+n.height<i.lowerCanvas.height&&(i.img.destTop=i.lowerCanvas.height-i.img.destHeight));return n},s.prototype.drawPannedImage=function(t,e){var i=this,n=this.parent,r={panDown:null};n.notify("selection",{prop:"getPanDown",onPropertyChange:!1,value:{obj:r}});var o={startPoint:r.panDown,endPoint:this.panMove,cancel:!1};z()&&p(this.parent.eventType)&&n.events&&!0===n.events.onPanStart.hasDelegate?(this.parent.eventType="pan",this.parent.panEventArgs=o,n.dotNetRef.invokeMethodAsync("PanEventAsync","OnPanStart",o).then(function(a){i.panEvent(a,t,e)})):(n.trigger("panning",o),this.panEvent(o,t,e))},s.prototype.panEvent=function(t,e,i){if(!t.cancel){var n=this.parent,r=!1;if(n.activeObj.shape&&"shape"===n.activeObj.shape&&n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),p(n.activeObj.shape)){r=!0,n.activeObj.activePoint={startX:n.img.destLeft,startY:n.img.destTop,endX:n.img.destLeft+n.img.destWidth,endY:n.img.destTop+n.img.destHeight};var a=n.activeObj.activePoint.startY,l=n.activeObj.activePoint.endX,h=n.activeObj.activePoint.endY;n.activeObj.activePoint.startX<0&&(n.activeObj.activePoint.startX=0),a<0&&(n.activeObj.activePoint.startY=0),l>n.lowerCanvas.width&&(n.activeObj.activePoint.endX=n.lowerCanvas.width),h>n.lowerCanvas.height&&(n.activeObj.activePoint.endY=n.lowerCanvas.height),n.activeObj.activePoint.width=n.activeObj.activePoint.endX-n.activeObj.activePoint.startX,n.activeObj.activePoint.height=n.activeObj.activePoint.endY-n.activeObj.activePoint.startY,n.activeObj.shape="crop-custom";var c={strokeSettings:{}};n.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:c}}),n.activeObj.strokeSettings=c.strokeSettings,n.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:n.activeObj.activePoint,obj:n.activeObj,isMouseMove:null,x:null,y:null}}),n.isCropTab=!0}if(0===n.transform.degree){var u;u=p(e)&&p(i)?this.updatePanPoints(""):{x:e,y:i},n.panPoint.totalPannedPoint.x+=u.x,n.panPoint.totalPannedPoint.y+=u.y;var d=C({},n.activeObj,{},!0),f=this.lowerContext.filter;this.drawPannImage(u),this.lowerContext.filter=f,this.tempPanMove=C({},this.panMove,{},!0),n.activeObj=C({},d,{},!0),this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),n.activeObj.shape&&n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n.activeObj}})}else{var v=n.transform.currFlipState;n.isCropTab=!0,n.panPoint.currentPannedPoint=p(e)&&p(i)?this.updatePanPoints(""):{x:e,y:i},n.transform.currFlipState=v,this.rotatePan(),n.isCropTab=!1,this.tempPanMove=C({},this.panMove,{},!0)}r&&(n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),n.isCropTab=!1,this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height))}},s.prototype.drawPannImage=function(t){var e=this.parent,i={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),e.img.destLeft=i.startX,e.img.destTop=i.startY,e.img.destWidth=i.width,e.img.destHeight=i.height,this.setDestPointsForFlipState(),e.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(e.baseImg,e.img.srcLeft,e.img.srcTop,e.img.srcWidth,e.img.srcHeight,e.img.destLeft,e.img.destTop,e.img.destWidth,e.img.destHeight),(e.currSelectionPoint&&"crop-circle"===e.currSelectionPoint.shape||e.isCircleCrop)&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:!0}}),e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),e.img.destLeft=i.startX,e.img.destTop=i.startY,e.img.destWidth=i.width,e.img.destHeight=i.height;var n=this.lowerContext.filter;this.lowerContext.filter="none",e.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:t.x,yDiff:t.y,panRegion:""}}),e.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:t.x,yDiff:t.y,panRegion:""}}),this.lowerContext.filter=n,e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),e.isCircleCrop&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:!0}})},s.prototype.resetZoom=function(){var t=this.parent;if(0!==t.transform.defaultZoomFactor){var e=t.isUndoRedo,i={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}}),this.transCurrObj=i.currObj,this.transCurrObj.objColl=C([],t.objColl,null,!0),this.transCurrObj.pointColl=C({},t.pointColl,null,!0),this.transCurrObj.afterCropActions=C([],t.afterCropActions,[],!0);var n={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:n}}),this.transCurrObj.selPointColl=C([],n.selPointColl,[],!0),t.isUndoRedo=t.isCropToolbar=!0,this.zoomAction(t.transform.defaultZoomFactor>0?-t.transform.defaultZoomFactor:Math.abs(t.transform.defaultZoomFactor)),t.isCropToolbar=!1,t.isUndoRedo=e}},s.prototype.performTransformation=function(t){var e=this.parent,i=e.transform.defaultZoomFactor,n=e.isUndoRedo,r=C({},e.cropObj,{},!0);this.resetZoom(),this.updateTransform(t);for(var o=0,a=e.objColl.length;o<a;o++)if(e.objColl[o].flipObjColl.length>0){var l={collection:e.objColl[o].flipObjColl};e.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:e.objColl[o].flipObjColl,isRotateFlipCollection:null,obj:l}}),e.objColl[o].flipObjColl=l.collection,0===e.objColl[o].flipObjColl.length&&(e.objColl[o].shapeFlip="")}if(0!==i){e.isUndoRedo=!0,this.zoomAction(i),e.isUndoRedo=n;var h="";"rotateleft"===t||"rotateright"===t?h="rotate":("horizontalflip"===t||"verticalflip"===t)&&(h="flip"),e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:h,previousObj:this.transCurrObj,previousObjColl:this.transCurrObj.objColl,previousPointColl:this.transCurrObj.pointColl,previousSelPointColl:this.transCurrObj.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.transCurrObj=null}},s.prototype.updateTransform=function(t){switch(t.toLowerCase()){case"rotateleft":this.rotateImage(-90);break;case"rotateright":this.rotateImage(90);break;case"horizontalflip":this.flipImage(nl.Horizontal);break;case"verticalflip":this.flipImage(nl.Vertical)}},s.prototype.rotatePan=function(t,e){var i=this.parent;this.isReverseRotate=!0;var r,n=i.transform.degree,o={selPointColl:null};i.activeObj.activePoint&&i.activeObj.shape&&(r=C({},i.activeObj,{},!0));var a=C([],i.objColl,[],!0),l=C([],i.pointColl,[],!0);i.objColl=[],i.pointColl=[],i.freehandCounter=0,i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}});var h=o.selPointColl;i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),i.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var c=i.img.destLeft,u=i.img.destTop;i.isCropTab&&(i.img.destLeft+=i.panPoint.totalPannedInternalPoint.x,i.img.destTop+=i.panPoint.totalPannedInternalPoint.y),i.notify("crop",{prop:"updateRotatePan",onPropertyChange:!1}),i.isCropTab&&(i.panPoint.totalPannedInternalPoint.x=i.img.destLeft-c,i.panPoint.totalPannedInternalPoint.y=i.img.destTop-u);var d=this.lowerContext.filter;i.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(i.baseImg,i.img.srcLeft,i.img.srcTop,i.img.srcWidth,i.img.srcHeight,i.img.destLeft,i.img.destTop,i.img.destWidth,i.img.destHeight),i.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:!0,isRotatePan:!0}});var f=i.img.destLeft,v=i.img.destTop;i.img.destLeft+=i.panPoint.totalPannedClientPoint.x,i.img.destTop+=i.panPoint.totalPannedClientPoint.y,i.img.destLeft+=i.panPoint.currentPannedPoint.x,i.img.destTop+=i.panPoint.currentPannedPoint.y,i.panPoint.totalPannedClientPoint.x=i.img.destLeft-f,i.panPoint.totalPannedClientPoint.y=i.img.destTop-v,i.objColl=a,i.pointColl=l,i.freehandCounter=i.pointColl.length,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:h}}}),i.transform.degree=n,this.lowerContext.filter="none",t&&(e?(i.panPoint.totalPannedClientPoint.x=-i.panPoint.totalPannedClientPoint.x,i.panPoint.totalPannedClientPoint.y=-i.panPoint.totalPannedClientPoint.y,i.panPoint.currentPannedPoint=C({},i.panPoint.totalPannedClientPoint,{},!0),i.panPoint.totalPannedClientPoint={x:0,y:0},i.img.destLeft+=i.panPoint.currentPannedPoint.x,i.img.destTop+=i.panPoint.currentPannedPoint.y):i.panPoint.currentPannedPoint=C({},i.panPoint.totalPannedClientPoint,{},!0)),i.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:i.panPoint.currentPannedPoint.x,yDiff:i.panPoint.currentPannedPoint.y,panRegion:""}}),i.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:i.panPoint.currentPannedPoint.x,yDiff:i.panPoint.currentPannedPoint.y,panRegion:""}}),this.lowerContext.filter=d,i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.activeObj=C({},r,{},!0),i.activeObj.activePoint&&i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}),this.isReverseRotate=!1},s.prototype.limitPan=function(){var t=this.parent;t.activeObj.activePoint&&(t.img.destLeft>t.activeObj.activePoint.startX&&(t.img.destLeft=t.activeObj.activePoint.startX),t.img.destTop>t.activeObj.activePoint.startY&&(t.img.destTop=t.activeObj.activePoint.startY),t.img.destLeft+t.img.destWidth<t.activeObj.activePoint.endX&&(t.img.destLeft=t.activeObj.activePoint.endX-t.img.destWidth),t.img.destTop+t.img.destHeight<t.activeObj.activePoint.endY&&(t.img.destTop=t.activeObj.activePoint.endY-t.img.destHeight))},s.prototype.updateFlipActiveObj=function(t){var e=this.parent;"horizontal"===t?(e.activeObj.activePoint.endX=e.activeObj.activePoint.startX>e.lowerCanvas.width/2?e.lowerCanvas.width/2-(e.activeObj.activePoint.startX-e.lowerCanvas.width/2):e.lowerCanvas.width/2+(e.lowerCanvas.width/2-e.activeObj.activePoint.startX),e.activeObj.activePoint.startX=e.activeObj.activePoint.endX-e.activeObj.activePoint.width):"vertical"===t?(e.activeObj.activePoint.endY=e.activeObj.activePoint.startX>e.lowerCanvas.width/2?e.lowerCanvas.height/2-(e.activeObj.activePoint.startY-e.lowerCanvas.height/2):e.lowerCanvas.height/2+(e.lowerCanvas.height/2-e.activeObj.activePoint.startY),e.activeObj.activePoint.startY=e.activeObj.activePoint.endY-e.activeObj.activePoint.height):("verticalHorizontal"===t||"horizontalVertical"===t)&&(e.activeObj.activePoint.startX>e.lowerCanvas.width/2?(e.activeObj.activePoint.endX=e.lowerCanvas.width/2-(e.activeObj.activePoint.startX-e.lowerCanvas.width/2),e.activeObj.activePoint.endY=e.lowerCanvas.height/2-(e.activeObj.activePoint.startY-e.lowerCanvas.height/2)):(e.activeObj.activePoint.endX=e.lowerCanvas.width/2+(e.lowerCanvas.width/2-e.activeObj.activePoint.startX),e.activeObj.activePoint.endY=e.lowerCanvas.height/2+(e.lowerCanvas.height/2-e.activeObj.activePoint.startY)),e.activeObj.activePoint.startX=e.activeObj.activePoint.endX-e.activeObj.activePoint.width,e.activeObj.activePoint.startY=e.activeObj.activePoint.endY-e.activeObj.activePoint.height),e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:e.activeObj.activePoint,obj:e.activeObj,isMouseMove:null,x:null,y:null}})},s.prototype.pan=function(t){var e=this.parent;!e.disabled&&e.isImageLoaded&&(t?(e.togglePan=!0,e.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),e.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}),e.lowerCanvas.style.cursor=e.upperCanvas.style.cursor=e.cursor="grab",e.notify("selection",{prop:"setPanDown",onPropertyChange:!1,value:{panDown:null}})):(e.togglePan=e.currObjType.isCustomCrop=!1,e.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}),e.lowerCanvas.style.cursor=e.upperCanvas.style.cursor=e.cursor="default"))},s.prototype.zoom=function(t,e){var i=this.parent;if(!i.disabled&&i.isImageLoaded){var n=this.getCurrentZoomFactor(t);if(p(e))this.zoomAction(n,e);else for(var r=n>0?"zoomIn":"zoomOut",o=0;o<10*Math.abs(n);o++)i.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:e.x,y:e.y,type:r}})}},s.prototype.getCurrentZoomFactor=function(t){return.1*(t-this.prevZoomValue)},s.prototype.setCurrPanRegion=function(t,e,i){var n=t;""===t?"horizontal"===e?n="horizontal":"vertical"===e&&(n="vertical"):"horizontal"===t?"horizontal"===e?n="horizontalVertical":"vertical"===e?n="verticalHorizontal":90===e?n="vertical":-90===e&&(n="horizontal"):"vertical"===t?"horizontal"===e?n="horizontalVertical":"vertical"===e?n="verticalHorizontal":90===e?n="horizontal":-90===e&&(n="vertical"):"horizontal"===e?n="vertical":"vertical"===e&&(n="horizontal"),i.panRegion=n},s.prototype.rotate=function(t,e){var i=this.parent;!i.disabled&&i.isImageLoaded&&t%90==0&&this.rotateImage(t),e.isRotate=!1},s.prototype.flip=function(t){var e=this.parent;!e.disabled&&e.isImageLoaded&&this.flipImage(t)},s.prototype.update=function(){var t=this.parent,e=0,i=!1,n={bool:!1};t.isImageLoaded&&((t.element.querySelector("#"+t.element.id+"_contextualToolbar")&&!t.element.querySelector("#"+t.element.id+"_contextualToolbar").parentElement.classList.contains("e-hide")||t.element.querySelector("#"+t.element.id+"_headWrapper")&&!t.element.querySelector("#"+t.element.id+"_headWrapper").parentElement.classList.contains("e-hide"))&&(t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.okBtn(),z()?t.updateToolbar(t.element,"imageLoaded"):(t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}))),t.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:n}}),n.bool&&(z()?t.updateToolbar(t.element,"destroyQuickAccessToolbar"):t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})),void 0!==t.activeObj.shape&&(i=!0,"block"===t.textArea.style.display?(t.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),z()?t.updateToolbar(t.element,"destroyQuickAccessToolbar"):t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})):(t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj)),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})));var r=this.lowerContext.filter,o=document.querySelector("#"+t.element.id+"_canvasWrapper");if(o&&(o.style.width=t.element.offsetWidth-2+"px"),t.lowerCanvas.width=t.upperCanvas.width=t.element.offsetWidth-2,t.toolbarTemplate?e=t.element.querySelector("#"+t.element.id+"_toolbarArea").clientHeight:t.element.querySelector("#"+t.element.id+"_toolbar")&&(e=t.element.querySelector("#"+t.element.id+"_toolbar").clientHeight),t.notify("toolbar",{prop:"setToolbarHeight",value:{height:e}}),O.isDevice?(o&&(o.style.height=t.element.offsetHeight-2*e-5+"px"),t.lowerCanvas.height=t.upperCanvas.height=t.element.offsetHeight-2*e-5):(o&&(o.style.height=t.element.offsetHeight-e-3+"px"),t.lowerCanvas.height=t.upperCanvas.height=t.element.offsetHeight-e-3),this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",t.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),t.canvasFilter=this.lowerContext.filter,this.parent.initialAdjustmentValue=this.lowerContext.filter,t.clearContext(this.lowerContext),this.parent.clearContext(this.upperContext),t.isImageLoaded){if(t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.lowerContext.filter=r,t.initialAdjustmentValue=r,t.canvasFilter=this.lowerContext.filter,t.isImageLoaded&&(ln(t.element),t.element.style.opacity="0.5"),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),o){o.style.width=t.element.offsetWidth-2+"px",o.style.height=t.element.offsetHeight+"px";var a={toolbarHeight:z()?t.toolbarHeight:0};z()||t.notify("toolbar",{prop:"getToolbarHeight",value:{obj:a}}),o.style.height=O.isDevice?parseFloat(o.style.height)-2*a.toolbarHeight-3+"px":parseFloat(o.style.height)-a.toolbarHeight-3+"px"}var l={width:0,height:0};t.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:t.img.srcWidth,height:t.img.srcHeight,obj:l}});var h=l;if(t.transform.defaultZoomFactor>0&&(h.width+=h.width*t.transform.defaultZoomFactor,h.height+=h.height*t.transform.defaultZoomFactor),t.img.destLeft=(t.lowerCanvas.clientWidth-h.width)/2,t.img.destTop=(t.lowerCanvas.clientHeight-h.height)/2,0===t.transform.degree&&""===t.transform.currFlipState)t.transform.defaultZoomFactor>0&&(t.img.destLeft+=t.panPoint.totalPannedPoint.x,t.img.destTop+=t.panPoint.totalPannedPoint.y),t.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:h}});else{t.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:h}}),t.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var c=this.lowerContext.filter;t.notify("filter",{prop:"updateBrightFilter",onPropertyChange:!1}),this.lowerContext.drawImage(t.baseImg,t.img.srcLeft,t.img.srcTop,t.img.srcWidth,t.img.srcHeight,t.img.destLeft,t.img.destTop,t.img.destWidth,t.img.destHeight),this.lowerContext.filter=c,t.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}})}t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),t.isCircleCrop&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),Ri(t.element),t.element.style.opacity="1";var u={defToolbarItems:null};if(!z()&&(t.notify("toolbar",{prop:"getDefToolbarItems",value:{obj:u}}),u.defToolbarItems&&u.defToolbarItems.length>0&&document.getElementById(t.element.id+"_toolbar"))&&(Qe(t.element.id+"_toolbar","toolbar").refreshOverflow(),t.element.querySelector(".e-contextual-toolbar-wrapper")&&t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide")),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),i&&(t.activeObj=C({},t.objColl[t.objColl.length-1],null,!0),t.objColl.pop(),0!==t.activeObj.activePoint.width&&0!==t.activeObj.activePoint.height&&(t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:t.activeObj}}),("rectangle"===t.activeObj.shape||"ellipse"===t.activeObj.shape||"text"===t.activeObj.shape||"line"===t.activeObj.shape||"arrow"===t.activeObj.shape||"path"===t.activeObj.shape)&&(z()?t.updateToolbar(t.element,"quickAccessToolbar",t.activeObj.shape):t.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})))),n.bool&&(z()?t.updateToolbar(t.element,"quickAccessToolbar","pen"):t.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}})),(0!==t.transform.degree||""!==t.transform.currFlipState)&&t.transform.defaultZoomFactor>0){var f=C({},t.panPoint.totalPannedPoint,null,!0),v=C({},t.panPoint.totalPannedInternalPoint,null,!0),g=C({},t.panPoint.totalPannedClientPoint,null,!0);t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null}}),t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null}}),0===t.transform.degree?(t.img.destLeft+=f.x,t.img.destTop+=f.y,t.panPoint.totalPannedPoint=f,t.notify("draw",{prop:"updateFlipPan",value:{tempSelectionObj:null}})):(t.panPoint.totalPannedInternalPoint=v,t.panPoint.totalPannedClientPoint=g,t.panPoint.currentPannedPoint={x:0,y:0},t.isCropTab=!0,t.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}),t.isCropTab=!1)}else 0!==t.transform.degree&&t.transform.cropZoomFactor>0&&(t.transform.zoomFactor=0,t.transform.cropZoomFactor=null,z()?t.updateToolbar(t.element,"enableDisableToolbarBtn"):t.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1}))}},s.prototype.calcMaxDimension=function(t,e,i){var n={toolbarHeight:0};z()?n.toolbarHeight=this.parent.toolbarHeight:this.parent.notify("toolbar",{prop:"getToolbarHeight",value:{obj:n}});var r=this.parent.element.clientWidth,o=this.parent.element.clientHeight-n.toolbarHeight;r>30&&(r-=30),(o=O.isDevice?o-n.toolbarHeight:o)>30&&(o-=30);var a=r/t,l=o/e,h=Math.min(t,r),c=Math.min(e,o);a<1&&a<l?(h=t*a,c=e*a):l<1&&l<a&&(h=t*l,c=e*l);var u={bool:null};return this.parent.notify("crop",{prop:"getPreventScaling",onPropertyChange:!1,value:{obj:u}}),u.bool&&this.parent.cropObj.activeObj.activePoint&&0!==this.parent.cropObj.activeObj.activePoint.width&&0!==this.parent.cropObj.activeObj.activePoint.height&&(h=this.parent.cropObj.activeObj.activePoint.width,c=this.parent.cropObj.activeObj.activePoint.height),i&&(i.width=h,i.height=c),{width:h,height:c}},s.prototype.updatePanPoints=function(t,e){var i=this.parent,n=C({},i.activeObj,{},!0),r=i.img.destLeft,o=i.img.destTop;p(this.tempPanMove)&&(this.tempPanMove={x:this.panMove.x,y:this.panMove.y});var a=this.panMove.x-this.tempPanMove.x,l=this.panMove.y-this.tempPanMove.y;switch(t){case"":i.img.destLeft+=a,i.img.destTop+=l;break;case"horizontal":this.updateFlipActiveObj(t),i.img.destLeft+=a=this.tempPanMove.x-this.panMove.x,i.img.destTop+=l;break;case"vertical":this.updateFlipActiveObj(t),l=this.tempPanMove.y-this.panMove.y,i.img.destLeft+=a,i.img.destTop+=l;break;case"horizontalVertical":this.updateFlipActiveObj(t),i.img.destLeft+=a=this.tempPanMove.x-this.panMove.x,i.img.destTop-=l;break;case"verticalHorizontal":this.updateFlipActiveObj(t),l=this.tempPanMove.y-this.panMove.y,i.img.destLeft-=a,i.img.destTop+=l}return this.limitPan(),i.activeObj=n,e&&(e.x=i.img.destLeft-r,e.y=i.img.destTop-o),{x:i.img.destLeft-r,y:i.img.destTop-o}},s}(),lj=function(){function s(t){this.undoRedoStep=0,this.undoRedoColl=[],this.appliedUndoRedoColl=[],this.tempUndoRedoColl=[],this.tempUndoRedoStep=0,this.parent=t,this.addEventListener()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("undo-redo",this.undoRedo,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("undo-redo",this.undoRedo),this.parent.off("destroyed",this.destroy)},s.prototype.initializeUrPvtProp=function(){this.parent.lowerCanvas&&(this.lowerContext=this.parent.lowerCanvas.getContext("2d")),this.parent.upperCanvas&&(this.upperContext=this.parent.upperCanvas.getContext("2d"))},s.prototype.undoRedo=function(t){switch(this.initializeUrPvtProp(),t.prop){case"updateUndoRedoColl":this.updateUrc(t.value.operation,t.value.previousObj,t.value.previousObjColl,t.value.previousPointColl,t.value.previousSelPointColl,t.value.previousCropObj,t.value.previousText,t.value.currentText,t.value.previousFilter,t.value.isCircleCrop);break;case"refreshUrc":this.refreshUrc(t.value.bool);break;case"updateCurrUrc":this.updateCurrUrc(t.value.type);break;case"call-undo":this.callUndo();break;case"call-redo":this.callRedo();break;case"undo":this.undo();break;case"redo":this.redo();break;case"updateUrObj":this.updateUrObj(t.value.objColl);break;case"updateUndoRedo":this.updateUndoRedo();break;case"getAppliedUndoRedoColl":t.value.obj.appliedUndoRedoColl=this.appliedUndoRedoColl;break;case"getUndoRedoStep":t.value.obj.undoRedoStep=this.undoRedoStep;break;case"setUndoRedoStep":this.undoRedoStep=t.value.step;break;case"undoDefault":this.undoDefault(t.value.obj);break;case"reset":this.reset()}},s.prototype.getModuleName=function(){return"undo-redo"},s.prototype.reset=function(){this.tempCurrSelPoint=null,this.undoRedoStep=0,this.undoRedoColl=[],this.appliedUndoRedoColl=[],this.tempActObj=null,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0},s.prototype.refreshUrc=function(t){var e=this.parent;(t=t||!1)?(z()||e.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!0}}),this.tempUndoRedoColl=C([],this.appliedUndoRedoColl,[],!0),this.tempUndoRedoStep=this.undoRedoStep):z()||e.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}),this.undoRedoColl=this.undoRedoColl.slice(0,this.undoRedoStep),this.appliedUndoRedoColl=this.appliedUndoRedoColl.slice(0,this.undoRedoStep),e.isUndoRedo=e.currObjType.isUndoAction=!1,z()?e.updateToolbar(e.element,"enableDisableToolbarBtn"):e.notify("toolbar",{prop:"enable-disable-btns"})},s.prototype.updateCurrUrc=function(t){var e=this.parent;if(z()||e.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}),"ok"===t){e.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!1}});var i=C([],this.tempUndoRedoColl.length>0?this.tempUndoRedoColl:this.undoRedoColl,[],!0),n=this.undoRedoColl[this.undoRedoColl.length-1];if(p(this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1])?this.undoRedoColl[0]&&(n.previousCropObj=i[0].previousCropObj,n.previousObj=i[0].previousObj,n.previousObjColl=i[0].previousObjColl,n.previousPointColl=i[0].previousPointColl,n.previousText=i[0].previousText):(n.previousCropObj=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1].currentCropObj,n.previousObj=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1].currentObj,n.previousObjColl=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1].currentObjColl,n.previousPointColl=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1].currentPointColl,n.previousText=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1].currentText),n){var r=this.getZeroZoomObjPointValue(n.currentObjColl,n.currentPointColl);n.currentObjColl=r.obj,n.currentPointColl=r.point,this.appliedUndoRedoColl.push(n)}this.tempUndoRedoColl=[],this.tempUndoRedoStep=0}else this.tempUndoRedoColl.length>0&&(this.appliedUndoRedoColl=C([],this.tempUndoRedoColl,[],!0),this.undoRedoStep=this.tempUndoRedoStep,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0);this.appliedUndoRedoColl.length>16&&this.appliedUndoRedoColl.splice(0,1),this.undoRedoColl=[],this.undoRedoColl=C([],this.appliedUndoRedoColl,[],!0),"ok"===t&&(this.undoRedoStep=this.undoRedoColl.length,z()?e.updateToolbar(e.element,"enableDisableToolbarBtn"):e.notify("toolbar",{prop:"enable-disable-btns"})),e.transform.zoomFactor>0&&(e.togglePan=!0,e.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}))},s.prototype.cancelCropSelection=function(){var i,t=this.parent,e=!1;t.activeObj.shape&&(i=t.activeObj.shape.split("-")),(t.currObjType.isCustomCrop||i&&"crop"===i[0])&&(e=!0),e&&t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),(0!==this.tempUndoRedoColl.length||0!==this.tempUndoRedoStep)&&(this.appliedUndoRedoColl=C([],this.tempUndoRedoColl,[],!0),this.undoRedoColl=C([],this.tempUndoRedoColl,[],!0),this.undoRedoStep=this.tempUndoRedoStep,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0,z()||t.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}))},s.prototype.refreshToolbarActions=function(){var t=this.parent;z()?p(t.activeObj.shape)&&t.updateToolbar(t.element,"imageLoaded"):t.activeObj.shape?(t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),t.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})):t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})},s.prototype.applyCurrentChanges=function(){var t=this.parent;t.currObjType.isFiltered=!1,0===t.transform.zoomFactor&&(t.togglePan=!1,t.notify("selection",{prop:"setDragCanvas",value:{bool:!1}})),t.element.querySelector(".e-contextual-toolbar-wrapper")&&!z()&&t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.togglePen&&(t.togglePen=!1,t.upperCanvas.style.cursor=t.cursor="default",this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height)),this.appliedUndoRedoColl.length>0&&(this.undoRedoColl=C([],this.appliedUndoRedoColl,[],!0))},s.prototype.callUndo=function(){this.applyCurrentChanges(),this.undo()},s.prototype.callRedo=function(){this.applyCurrentChanges(),this.redo()},s.prototype.undo=function(){var t=this.parent;if(this.cancelCropSelection(),!t.disabled&&t.isImageLoaded&&this.undoRedoStep>0){this.refreshToolbarActions(),t.activeObj.activePoint&&0!==t.activeObj.activePoint.width&&(this.tempActObj=t.activeObj),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.undoRedoStep--,z()?t.updateToolbar(t.element,"enableDisableToolbarBtn"):(t.notify("toolbar",{prop:"enable-disable-btns"}),t.element.querySelector(".e-contextual-toolbar-wrapper")&&t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide")),t.isUndoRedo=!0;var e=this.undoRedoColl[this.undoRedoStep];switch(t.currObjType.isUndoAction=this.undoRedoColl.length!==this.undoRedoStep,"textAreaCustomization"!==e.operation&&"block"===t.textArea.style.display&&(t.textArea.style.display="none"),t.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!0}}),t.cropObj=C({},e.previousCropObj,{},!0),t.afterCropActions=e.previousObj.afterCropActions,this.lowerContext.filter=e.previousObj.filter,t.canvasFilter=this.lowerContext.filter,e.operation){case"shapeTransform":this.shapeTransform(e.previousObjColl);break;case"freehanddraw":case"freehand-draw":this.updateFreehandDraw(e.previousPointColl);break;case"freehanddrawCustomized":this.updateFreehandDrawCustomized(e.previousPointColl);break;case"deleteFreehandDrawing":case"deleteObj":this.updateDelete(e.operation,e.previousObjColl,e.previousPointColl);break;case"textAreaCustomization":this.updateTextAreaCustomization(void 0,e.previousObjColl);break;case"text":this.updateText(e.previousObjColl,!0);break;default:this.undoDefault(e),t.notify("filter",{prop:"set-adjustment",value:{operation:e.operation}}),t.notify("filter",{prop:"update-filter",value:{operation:e.operation,filter:e.filter}})}"crop"===e.operation&&(e.previousObj.currSelectionPoint&&(t.currSelectionPoint=C({},e.previousObj.currSelectionPoint,{},!0),t.currSelectionPoint&&p(t.currSelectionPoint.shape)&&(t.currSelectionPoint=null)),t.updateCropTransformItems(),t.select("custom"),t.isCircleCrop&&(t.isCircleCrop=!1,this.tempCurrSelPoint=C({},t.currSelectionPoint,{},!0),t.currSelectionPoint=null),t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}})),this.undoRedoColl[this.undoRedoStep-1]&&this.undoRedoColl[this.undoRedoStep-1].isCircleCrop&&(t.isCircleCrop=!0,t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})),this.endUndoRedo(e.operation,!0)}},s.prototype.redo=function(){var t=this.parent;if(this.cancelCropSelection(),!t.disabled&&t.isImageLoaded&&this.undoRedoStep<this.appliedUndoRedoColl.length){this.refreshToolbarActions(),this.undoRedoStep++,z()?t.updateToolbar(t.element,"enableDisableToolbarBtn"):t.notify("toolbar",{prop:"enable-disable-btns"}),t.isUndoRedo=!0;var e=this.undoRedoColl[this.undoRedoStep-1];t.currObjType.isUndoAction=this.undoRedoColl.length!==this.undoRedoStep,"textAreaCustomization"!==e.operation&&"block"===t.textArea.style.display&&(t.textArea.style.display="none"),t.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!0}}),t.cropObj=C({},e.currentCropObj,{},!0),t.afterCropActions=e.currentObj.afterCropActions,this.lowerContext.filter=e.currentObj.filter,!z()&&t.element.querySelector(".e-contextual-toolbar-wrapper")&&t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.canvasFilter=this.lowerContext.filter;var i=void 0;switch(e.operation){case"shapeTransform":this.shapeTransform(e.currentObjColl);break;case"freehanddraw":case"freehand-draw":this.updateFreehandDraw(e.currentPointColl);break;case"freehanddrawCustomized":this.updateFreehandDrawCustomized(e.currentPointColl);break;case"deleteFreehandDrawing":case"deleteObj":this.updateDelete(e.operation,e.currentObjColl,e.currentPointColl);break;case"textAreaCustomization":this.updateTextAreaCustomization(i,e.currentObjColl);break;case"text":this.updateText(e.currentObjColl,!1);break;default:t.objColl=[],t.pointColl=[],t.freehandCounter=0,t.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),t.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:e.currentObj}}),t.img.destLeft=e.currentObj.destPoints.startX,t.img.destTop=e.currentObj.destPoints.startY,i=C({},t.activeObj,{},!0),t.objColl=C([],e.currentObjColl,[],!0),t.pointColl=C([],e.currentPointColl,[],!0),t.freehandCounter=t.pointColl.length,t.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:C([],e.currentSelPointColl,[],!0)}}}),this.lowerContext.filter="none",t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=e.currentObj.filter,t.activeObj=i,this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),0!==t.activeObj.activePoint.width&&0!==t.activeObj.activePoint.height&&t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),t.notify("filter",{prop:"set-adjustment",value:{operation:e.operation}}),t.notify("filter",{prop:"update-filter",value:{operation:e.operation}})}"crop"===e.operation&&e.isCircleCrop&&(t.isCircleCrop=!0,t.currSelectionPoint=C({},this.tempCurrSelPoint,{},!0),this.tempCurrSelPoint=null),"crop"===e.operation&&!e.isCircleCrop&&(t.isCircleCrop=!1),"crop"===e.operation&&e.currentObj.currSelectionPoint&&(t.currSelectionPoint=C({},e.currentObj.currSelectionPoint,{},!0)),t.currSelectionPoint&&p(t.currSelectionPoint.shape)&&(t.currSelectionPoint=null),this.endUndoRedo(e.operation,!1)}},s.prototype.shapeTransform=function(t){var e=this.parent;e.objColl=C([],t,[],!0),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.isUndoRedo=!0,e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})},s.prototype.updateFreehandDraw=function(t){var e=this.parent;e.pointColl=t,e.freehandCounter=e.pointColl.length,e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.isUndoRedo=!0,e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},s.prototype.updateFreehandDrawCustomized=function(t){var e=this.parent;e.pointColl=t,e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.isUndoRedo=!0,e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},s.prototype.updateDelete=function(t,e,i){var n=this.parent;"deleteFreehandDrawing"===t?(n.pointColl=i,n.freehandCounter=n.pointColl.length,n.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}})):"deleteObj"===t&&(n.objColl=e,n.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}})),this.lowerContext.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),n.isUndoRedo=!0,n.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},s.prototype.updateTextAreaCustomization=function(t,e){var i=this.parent;i.objColl=C([],e,[],!0),i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:!0}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1});for(var n=0,r=e.length;n<r;n++){if(!this.tempActObj){t=C({},e[e.length-1],{},!0),i.objColl.splice(n,1);break}if(this.tempActObj.currIndex===e[n].currIndex){t=C({},e[n],{},!0),i.objColl.splice(n,1);break}}t&&this.updateTextBox(t),"block"===i.textArea.style.display&&i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}})},s.prototype.updateText=function(t,e){var i=this.parent;if(this.tempActObj&&(i.activeObj=C({},this.tempActObj,{},!0)),0===t.length&&1===i.objColl.length)this.tempActObj=C({},i.objColl[0],{},!0);else for(var n=0;n<i.objColl.length;n++){if(i.objColl[n]&&p(t[n])){this.tempActObj=C({},i.objColl[n],{},!0);break}if(t[n].currIndex!==i.objColl[n].currIndex){this.tempActObj=C({},i.objColl[n],{},!0);break}}e&&(i.activeObj=C({},this.tempActObj,{},!0)),i.objColl=C([],t,[],!0),i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:!0}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})},s.prototype.updateTextBox=function(t){var e=this.parent;this.upperContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),z()?e.updateToolbar(e.element,"destroyQuickAccessToolbar"):e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),e.textArea.style.display="block",e.textArea.style.fontFamily=t.textSettings.fontFamily,e.textArea.style.fontSize=t.textSettings.fontSize+"px",e.textArea.style.color=t.strokeSettings.strokeColor,e.textArea.style.fontWeight=t.textSettings.bold?"bold":"normal",e.textArea.style.fontStyle=t.textSettings.italic?"italic":"normal",e.textArea.style.border="2px solid "+e.themeColl[e.theme].primaryColor,e.textArea.value=t.keyHistory,e.activeObj=C({},t,{},!0),e.notify("shape",{prop:"updateFontStyles",onPropertyChange:!1,value:{isTextBox:null}}),e.textArea.style.width=e.activeObj.activePoint.width+"px"},s.prototype.undoDefault=function(t){this.lowerContext.filter=t.previousObj.filter;var e=this.parent;e.objColl=[],e.pointColl=[],e.freehandCounter=0,e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),e.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:t.previousObj}}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.img.destLeft=t.previousObj.destPoints.startX,e.img.destTop=t.previousObj.destPoints.startY;var i=C({},e.activeObj,{},!0);e.objColl=C([],t.previousObjColl,[],!0),e.pointColl=C([],t.previousPointColl,[],!0),e.freehandCounter=e.pointColl.length,e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:C([],t.previousSelPointColl,[],!0)}}}),this.lowerContext.filter="none",e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=t.previousObj.filter,e.activeObj=i,this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),0!==e.activeObj.activePoint.width&&0!==e.activeObj.activePoint.height&&e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}})},s.prototype.endUndoRedo=function(t,e){var i=this.parent;i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.isCircleCrop&&(e&&"crop"!==t||!e)&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i.transform.zoomFactor>0&&i.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}),i.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!1}}),z()?(p(i.activeObj.shape)||"crop"!==i.activeObj.shape.split("-")[0])&&(i.updateToolbar(i.element,"imageLoaded"),i.updateToolbar(i.element,"enableDisableToolbarBtn")):(i.activeObj.shape&&"crop"===i.activeObj.shape.split("-")[0]?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!0,isCropping:!0,isZooming:null,cType:null}}):i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"enable-disable-btns"})),document.getElementById(i.element.id+"_quickAccessToolbarArea")&&(document.getElementById(i.element.id+"_quickAccessToolbarArea").style.display="none"),z()?i.updateToolbar(i.element,"enableDisableToolbarBtn"):i.notify("toolbar",{prop:"enable-disable-btns"}),0!==i.transform.degree&&i.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:0,yDiff:0}}),i.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),i.currObjType.isCustomCrop=!1},s.prototype.updateUrc=function(t,e,i,n,r,o,a,l,h,c){var u=this.parent,d={isInitialLoaded:!1};if(u.currObjType.isUndoAction&&this.refreshUrc(!0),u.notify("draw",{prop:"isInitialLoaded",onPropertyChange:!1,value:{object:d}}),!d.isInitialLoaded&&u.allowUndoRedo){var f={currObj:{}};u.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:f}});var v=f.currObj;v.objColl=C([],u.objColl,[],!0),v.pointColl=C([],u.pointColl,[],!0),v.afterCropActions=C([],u.afterCropActions,[],!0);var g={selPointColl:null};u.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:g}}),v.selPointColl=C([],g.selPointColl,[],!0),"crop"===t&&(v.currSelectionPoint=C({},u.currSelectionPoint,{},!0)),this.undoRedoColl.push({operation:t,previousObj:e,currentObj:v,previousObjColl:i,currentObjColl:v.objColl,previousPointColl:n,currentPointColl:v.pointColl,previousSelPointColl:r,currentSelPointColl:v.selPointColl,previousCropObj:o,currentCropObj:C({},u.cropObj,{},!0),previousText:a,currentText:l,filter:h,isCircleCrop:c}),z()?u.updateToolbar(u.element,"enableDisableToolbarBtn"):u.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1})}},s.prototype.updateUrObj=function(t){var e=this.parent;if(e.allowUndoRedo){e.currObjType.isUndoAction&&this.refreshUrc(!0),e.objColl.push(e.activeObj);var i=C({},e.cropObj,{},!0),n={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}});var r=n.currObj;r.objColl=C([],e.objColl,[],!0),r.pointColl=C([],e.pointColl,[],!0),r.afterCropActions=C([],e.afterCropActions,[],!0);var o={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),r.selPointColl=C([],o.selPointColl,[],!0),this.undoRedoColl.push({operation:"shapeTransform",previousObj:r,currentObj:r,previousObjColl:t,currentObjColl:r.objColl,previousPointColl:r.pointColl,currentPointColl:r.pointColl,previousSelPointColl:r.selPointColl,currentSelPointColl:r.selPointColl,previousCropObj:i,currentCropObj:i}),e.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:e.objColl[e.objColl.length-1]}})}},s.prototype.updateUndoRedo=function(){var t=this.parent,e=C({},t.cropObj,{},!0),i={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}});var n=i.currObj;n.objColl=C([],t.objColl,[],!0),n.pointColl=C([],t.pointColl,[],!0),n.afterCropActions=C([],t.afterCropActions,[],!0);var r={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),n.selPointColl=C([],r.selPointColl,[],!0),t.objColl.push(t.activeObj),this.updateUrc("shapeTransform",n,n.objColl,n.pointColl,n.selPointColl,e),t.objColl.pop(),t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),z()?t.updateToolbar(t.element,"imageLoaded"):(t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}))},s.prototype.getZeroZoomObjPointValue=function(t,e){var i=this.parent,n={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}});var r=n.currObj;r.objColl=C([],i.objColl,[],!0),r.pointColl=C([],i.pointColl,[],!0),r.afterCropActions=C([],i.afterCropActions,[],!0);var o={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),r.selPointColl=C([],o.selPointColl,[],!0);var a={cropDimension:null};i.notify("transform",{prop:"getCropDimension",onPropertyChange:!1,value:{obj:a}});var l=C([],i.objColl,[],!0),h=C([],i.pointColl,[],!0),c={arrowDimension:null};this.parent.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:c}});var u=C({},c.arrowDimension,{},!0);if(i.transform.zoomFactor>0&&(t.length>0||e.length>0)){i.objColl=t,i.pointColl=e;var d=i.isUndoRedo;if(0!==i.transform.zoomFactor){i.isUndoRedo=i.isCropTab=!0,i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1});var f=C({},i.zoomSettings,null,!0);i.notify("transform",i.transform.zoomFactor>0?{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-i.transform.zoomFactor,zoomPoint:null}}:{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:Math.abs(i.transform.zoomFactor),zoomPoint:null}}),i.zoomSettings=f,i.isCropTab=!1,i.isUndoRedo=d,l=C([],i.objColl,[],!0),h=C([],i.pointColl,[],!0),i.objColl=[],i.pointColl=[],i.freehandCounter=0,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),i.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:a.cropDimension.width,height:a.cropDimension.height}});var v={width:a.cropDimension.width,height:a.cropDimension.height};v.width+=v.width*r.defaultZoom,v.height+=v.height*r.defaultZoom,i.notify("draw",{prop:"setZoomCropWidth",value:{width:v.width,height:v.height}}),i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:r}}),i.img.destLeft=r.destPoints.startX,i.img.destTop=r.destPoints.startY,i.panPoint.totalPannedPoint=r.totalPannedPoint,i.panPoint.totalPannedClientPoint=r.totalPannedClientPoint,i.panPoint.totalPannedInternalPoint=r.totalPannedInternalPoint,i.objColl=C([],r.objColl,[],!0),i.pointColl=C([],r.pointColl,[],!0),i.freehandCounter=i.pointColl.length,i.notify("draw",{prop:"setArrowDimension",onPropertyChange:!1,value:{arrowDimension:u}}),i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:C([],r.selPointColl,[],!0)}}}),this.lowerContext.filter="none",i.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),i.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),i.notify("freehand-draw",{prop:"updateFHDCurPts",onPropertyChange:!1}),this.lowerContext.filter=r.filter,0!==i.transform.degree&&i.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:0,yDiff:0}})}}return{obj:l,point:h}},s}(),Ld=function(){var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])})(t,e)};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Te=function(s,t,e,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,t,e,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(t,e,r):o(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},yV=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Ld(t,s),Te([m(null)],t.prototype,"brightness",void 0),Te([m(null)],t.prototype,"contrast",void 0),Te([m(null)],t.prototype,"hue",void 0),Te([m(null)],t.prototype,"saturation",void 0),Te([m(null)],t.prototype,"exposure",void 0),Te([m(null)],t.prototype,"opacity",void 0),Te([m(null)],t.prototype,"blur",void 0),t}(Ze),bV=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Ld(t,s),Te([m(null)],t.prototype,"zoomTrigger",void 0),Te([m(1)],t.prototype,"minZoomFactor",void 0),Te([m(10)],t.prototype,"maxZoomFactor",void 0),Te([m(1)],t.prototype,"zoomFactor",void 0),Te([m(null)],t.prototype,"zoomPoint",void 0),t}(Ze),CV=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return Ld(t,s),Te([m(!0)],t.prototype,"showCircle",void 0),Te([m(null)],t.prototype,"strokeColor",void 0),Te([m(null)],t.prototype,"fillColor",void 0),t}(Ze),MV=function(s){function t(i,n){var r=s.call(this,i)||this;return r.isImageLoaded=!1,r.activeObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[],rotatedAngle:0},r.currObjType={shape:"",isDragging:!1,isActiveObj:!1,isText:!1,isInitialText:!1,isLine:!1,isInitialLine:!1,isCustomCrop:!1,isZoomed:!1,isUndoZoom:!1,isUndoAction:!1,isFiltered:!1,isSave:!1,isResize:!1},r.objColl=[],r.pointColl={},r.freehandCounter=0,r.points=[],r.togglePen=!1,r.togglePan=!1,r.img={destLeft:0,destTop:0,destWidth:0,destHeight:0,srcLeft:0,srcTop:0,srcWidth:0,srcHeight:0},r.rotateFlipColl=[],r.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",zoomFactor:0,previousZoomValue:0},r.afterCropActions=[],r.transform={degree:0,currFlipState:"",zoomFactor:0,cropZoomFactor:null,defaultZoomFactor:0},r.panPoint={currentPannedPoint:{x:0,y:0},totalPannedPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0}},r.isUndoRedo=!1,r.isCropTab=!1,r.isCircleCrop=!1,r.fontSizeColl=[],r.initialAdjustmentValue="",r.currentFilter="",r.canvasFilter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",r.toolbarHeight=0,r.isPublicMethod=!1,r.isCropToolbar=!1,r.cursor="default",z()?(new ej(r),new tj(r),new nj(r),new rj(r),new sj(r),new oj(r),new aj(r),new lj(r),new ij(r)):(e.Inject(ej,tj,sj,aj,ij,SV),e.Inject(lj),e.Inject(nj),e.Inject(oj),e.Inject(rj),n&&r.appendTo(n)),r}var e;return Ld(t,s),e=t,t.prototype.requiredModules=function(){var i=[];return i.push({member:"crop",args:[this]}),i.push({member:"draw",args:[this]}),i.push({member:"selection",args:[this]}),i.push({member:"transform",args:[this]}),i.push({member:"export",args:[this]}),i.push({member:"toolbar-module",args:[this]}),i.push({member:"undo-redo",args:[this]}),i.push({member:"filter",args:[this]}),i.push({member:"shape",args:[this]}),i.push({member:"freehand-draw",args:[this]}),i},t.prototype.preRender=function(){this.element.id=this.element.id||at("ej2-image-editor"),O.isDevice&&this.element.classList.add("e-device"),this.initializeThemeColl()},t.prototype.render=function(){this.initialize()},t.prototype.getModuleName=function(){return"image-editor"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(i,n){for(var r=0,o=Object.keys(i);r<o.length;r++)switch(o[r]){case"cssClass":n.cssClass&&N([this.element],n.cssClass.replace(/\s+/g," ").trim().split(" ")),i.cssClass&&D([this.element],i.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"disabled":i.disabled?(this.element.classList.add("e-disabled"),this.unwireEvent()):(this.element.classList.remove("e-disabled"),this.wireEvent());break;case"height":this.element.style.height=i.height;break;case"width":this.element.style.width=i.width;break;case"theme":i.theme&&(this.theme=this.theme&&""!==this.theme?this.toPascalCase(this.theme):"Bootstrap5",this.upperContext.strokeStyle=this.themeColl[this.theme].primaryColor,this.upperContext.fillStyle=this.themeColl[this.theme].secondaryColor);break;case"finetuneSettings":i.finetuneSettings&&(this.finetuneSettings=i.finetuneSettings,this.notify("filter",{prop:"update-finetunes"}));break;case"locale":i.locale&&(this.notify("toolbar",{prop:"setLocale",onPropertyChange:!1,value:{locale:i.locale}}),this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}));break;case"allowUndoRedo":this.allowUndoRedo=!!i.allowUndoRedo,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});break;case"showQuickAccessToolbar":i.showQuickAccessToolbar?(this.showQuickAccessToolbar=!0,this.notify("toolbar",{prop:"create-qa-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})):(this.showQuickAccessToolbar=!1,this.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}));break;case"zoomSettings":i.zoomSettings&&(this.zoomSettings.zoomTrigger=i.zoomSettings.zoomTrigger),p(this.zoomSettings.zoomTrigger)?(this.zoomSettings.zoomTrigger=Nt.MouseWheel|Nt.Pinch|Nt.Toolbar|Nt.Commands,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})):(i.zoomSettings.zoomTrigger&Nt.Toolbar)===Nt.Toolbar&&this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});break;case"selectionSettings":i.selectionSettings&&(this.selectionSettings=i.selectionSettings,this.activeObj.shape&&(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:this.activeObj}})))}},t.prototype.destroy=function(){var i=[];this.element.removeAttribute("tabindex"),this.cssClass&&(i=i.concat(this.cssClass.replace(/\s+/g," ").trim().split(" "))),N([this.element],i),this.element.getAttribute("class")||this.element.removeAttribute("class"),z()?this.element.classList.remove("e-image-editor"):(this.notify("toolbar",{prop:"destroySubComponents",onPropertyChange:!1}),this.notify("destroyed",null),s.prototype.destroy.call(this)),this.unwireEvent(),this.element.innerHTML=""},t.prototype.initialize=function(){if(this.toolbarTemplate?(this.element.appendChild(this.createElement("div",{id:this.element.id+"_toolbarArea",className:"e-toolbar-area"})),this.toolbarTemplateFn()):(this.notify("toolbar",{prop:"create-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"create-contextual-toolbar",onPropertyChange:!1})),this.createCanvas(),this.showQuickAccessToolbar){document.querySelector("#"+this.element.id+"_canvasWrapper").appendChild(this.createElement("div",{id:this.element.id+"_quickAccessToolbarArea",className:"e-quick-access-toolbar-area"}));var n=document.getElementById(this.element.id+"_quickAccessToolbarArea");n.style.position="absolute",n.style.display="none",this.activeObj&&(n.style.left=this.activeObj.activePoint.startX+"px",n.style.top=this.activeObj.activePoint.startY+"px"),n.style.width="100%"}this.quickAccessToolbarTemplate?this.quickAccessToolbarTemplateFn():this.notify("toolbar",{prop:"create-qa-toolbar",onPropertyChange:!1}),this.wireEvent(),this.lowerContext=this.lowerCanvas.getContext("2d"),this.upperContext=this.upperCanvas.getContext("2d"),this.inMemoryContext=this.inMemoryCanvas.getContext("2d"),this.lowerContext.filter=this.getDefaultFilter(),this.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),this.canvasFilter=this.lowerContext.filter,this.notify("toolbar",{prop:"setInitialAdjustmentValue",onPropertyChange:!1,value:{value:this.lowerContext.filter}}),this.cssClass&&D([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.element&&Vs({target:this.element}),this.initializeZoomSettings()},t.prototype.wireEvent=function(){y.add(document,"keydown",this.keyDownEventHandler,this),y.add(document,"keypress",this.keyUpEventHandler,this),y.add(this.upperCanvas,"mousedown",this.mouseDownEventHandler,this),y.add(this.upperCanvas,"mousemove",this.mouseMoveEventHandler,this),y.add(this.upperCanvas,"mouseup",this.mouseUpEventHandler,this),y.add(document,"mouseup",this.mouseUpEventHandler,this),y.add(this.lowerCanvas,"mousedown",this.canvasMouseDownHandler,this),y.add(this.lowerCanvas,"mousemove",this.canvasMouseMoveHandler,this),y.add(this.lowerCanvas,"mouseup",this.canvasMouseUpHandler,this),y.add(document,"mouseup",this.canvasMouseUpHandler,this),y.add(this.upperCanvas,"touchstart",this.touchStartHandler,this),y.add(this.lowerCanvas,"touchstart",this.touchStartHandler,this),y.add(this.lowerCanvas,"mousewheel DOMMouseScroll",this.handleScroll,this),y.add(this.upperCanvas,"mousewheel DOMMouseScroll",this.handleScroll,this),window.addEventListener("resize",this.windowResizeHandler.bind(this)),!O.isIos&&"safari"!==O.info.name&&screen.orientation.addEventListener("change",this.screenOrientation.bind(this)),this.notify("shape",{prop:"wireEvent",onPropertyChange:!1})},t.prototype.unwireEvent=function(){y.remove(document,"keydown",this.keyDownEventHandler),y.remove(document,"keypress",this.keyUpEventHandler),y.remove(this.upperCanvas,"mousedown",this.mouseDownEventHandler),y.remove(this.upperCanvas,"mousemove",this.mouseMoveEventHandler),y.remove(this.upperCanvas,"mouseup",this.mouseUpEventHandler),y.remove(document,"mouseup",this.mouseUpEventHandler),y.remove(this.lowerCanvas,"mousedown",this.canvasMouseDownHandler),y.remove(this.lowerCanvas,"mousemove",this.canvasMouseMoveHandler),y.remove(this.lowerCanvas,"mouseup",this.canvasMouseUpHandler),y.remove(document,"mouseup",this.canvasMouseUpHandler),y.remove(this.upperCanvas,"touchstart",this.touchStartHandler),y.remove(this.lowerCanvas,"touchstart",this.touchStartHandler),y.remove(this.lowerCanvas,"mousewheel DOMMouseScroll",this.handleScroll),y.remove(this.upperCanvas,"mousewheel DOMMouseScroll",this.handleScroll),window.removeEventListener("resize",this.windowResizeHandler.bind(this)),!O.isIos&&"safari"!==O.info.name&&screen.orientation.removeEventListener("change",this.screenOrientation.bind(this)),this.notify("shape",{prop:"unWireEvent",onPropertyChange:!1}),this.notify("selection",{prop:"unWireEvent",onPropertyChange:!1})},t.prototype.createCanvas=function(){this.element.style.boxSizing="border-box";var i={toolbarHeight:0};this.notify("toolbar",{prop:"getToolbarHeight",value:{obj:i}});var n=i.toolbarHeight;this.element.style.width=this.width,this.element.style.height=this.height;var r=this.element.appendChild(this.createElement("div",{id:this.element.id+"_canvasWrapper",className:"e-canvas-wrapper",attrs:{style:"height:"+(this.element.offsetHeight-n-2)+"px; width:"+(this.element.offsetWidth-2)+"px; position: relative; overflow: hidden; margin: 0 auto;"}}));this.lowerCanvas=r.appendChild(this.createElement("canvas",{id:this.element.id+"_lowerCanvas",attrs:{name:"canvasImage"}})),this.upperCanvas=r.appendChild(this.createElement("canvas",{id:this.element.id+"_upperCanvas",attrs:{name:"canvasImage"}})),this.inMemoryCanvas=this.createElement("canvas",{id:this.element.id+"_inMemoryCanvas",attrs:{name:"canvasImage"}}),this.textArea=r.appendChild(this.createElement("textarea",{id:this.element.id+"_textArea",className:"e-textarea",attrs:{name:"textArea"}})),this.element.appendChild(this.createElement("div",{id:this.element.id+"_dialog",className:"e-dialog"})).style.display="none",this.textArea.setAttribute("spellcheck","false"),this.textArea.style.lineHeight="normal",this.lowerCanvas.style.width=this.upperCanvas.style.width=this.inMemoryCanvas.style.width="100%",this.lowerCanvas.style.height=this.upperCanvas.style.height=this.inMemoryCanvas.style.height="100%",this.upperCanvas.style.position=this.lowerCanvas.style.position=this.textArea.style.position="absolute",this.textArea.style.backgroundColor="transparent",this.textArea.style.display="none",this.textArea.style.resize="none",this.lowerContext=this.lowerCanvas.getContext("2d"),this.baseImg=this.createElement("img",{id:this.element.id+"_orgImg",attrs:{name:"Image",crossorigin:"anonymous"}}),this.upperCanvas.style.cursor=this.cursor="default",this.upperCanvas.style.display="block",this.upperContext=this.upperCanvas.getContext("2d")},t.prototype.touchStartHandler=function(i){this.notify("selection",{prop:"touchStartHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.mouseDownEventHandler=function(i){this.notify("selection",{prop:"mouseDownEventHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.mouseMoveEventHandler=function(i){this.notify("selection",{prop:"mouseMoveEventHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.mouseUpEventHandler=function(i){this.notify("selection",{prop:"mouseUpEventHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.keyDownEventHandler=function(i){this.notify("selection",{prop:"keyDownEventHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.keyUpEventHandler=function(i){"block"===this.textArea.style.display&&i.target.id===this.element.id+"_textArea"&&this.notify("selection",{prop:"textKeyDown",value:{e:i}})},t.prototype.canvasMouseDownHandler=function(i){this.notify("selection",{prop:"canvasMouseDownHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.canvasMouseMoveHandler=function(i){this.notify("selection",{prop:"canvasMouseMoveHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.canvasMouseUpHandler=function(i){this.notify("selection",{prop:"canvasMouseUpHandler",onPropertyChange:!1,value:{e:i}})},t.prototype.handleScroll=function(i){this.notify("selection",{prop:"handleScroll",onPropertyChange:!1,value:{e:i}})},t.prototype.adjustToScreen=function(){this.update()},t.prototype.screenOrientation=function(){O.isDevice&&setTimeout(this.adjustToScreen.bind(this),100)},t.prototype.windowResizeHandler=function(){!O.isDevice&&this.element.classList.contains("e-image-editor")&&this.adjustToScreen()},t.prototype.notifyResetForAllModules=function(){for(var i=this.requiredModules(),n=0;n<i.length;n++)this.notify(i[n].member,{prop:"reset",onPropertyChange:!1})},t.prototype.allowShape=function(i,n){this.isPublicMethod=!0;var r={inRange:!1};return this.notify("shape",{prop:"isPointsInRange",onPropertyChange:!1,value:{x:i,y:n,obj:r}}),r.inRange},t.prototype.clearSelection=function(){this.notify("selection",{prop:"clearSelection",onPropertyChange:!1})},t.prototype.crop=function(){var i={isCrop:!1};return this.notify("crop",{prop:"crop",onPropertyChange:!1,value:{obj:i}}),i.isCrop},t.prototype.flip=function(i){this.notify("transform",{prop:"flip",value:{direction:i}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})},t.prototype.getImageData=function(){var i={canvas:null};return this.notify("export",{prop:"exportToCanvas",value:{object:i}}),i.canvas.getContext("2d").getImageData(0,0,i.canvas.width,i.canvas.height)},t.prototype.open=function(i){this.notify("draw",{prop:"open",value:{data:i}})},t.prototype.reset=function(){var i={isErrorImage:!1};if(this.notify("draw",{prop:"getErrorImage",value:{obj:i}}),!this.disabled&&!i.isErrorImage){this.clearContext(this.inMemoryContext),this.clearContext(this.lowerContext),this.clearContext(this.upperContext),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),z()||(this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}),O.isDevice&&document.getElementById(this.element.id+"_bottomToolbar")&&(Qe(document.getElementById(this.element.id+"_bottomToolbar"),"toolbar").destroy(),this.notify("toolbar",{prop:"create-bottom-toolbar",onPropertyChange:!1}))),this.currObjType.isUndoAction=this.isUndoRedo=this.togglePan=this.togglePen=this.isImageLoaded=!1,this.isCircleCrop=this.isCropTab=!1,this.objColl=[],this.transform.degree=0,this.upperCanvas.style.display="block",this.transform.currFlipState="",this.upperCanvas.style.cursor=this.cursor=this.lowerCanvas.style.cursor="default",this.lowerContext.lineWidth=this.upperContext.lineWidth=void 0,this.textArea.value=this.textArea.textContent="",this.textArea.style.display="none",this.lowerContext.filter=this.canvasFilter=this.getDefaultFilter(),this.img.destLeft=this.img.destTop=this.img.srcLeft=this.img.srcTop=0,this.img.destWidth=this.img.destHeight=this.img.srcWidth=this.img.srcHeight=null,this.currSelectionPoint=null,this.panPoint.currentPannedPoint={x:0,y:0},this.rotateFlipColl=[],this.points=[],this.pointColl={},this.freehandCounter=0,this.notify("draw",{prop:"resetPanPoints"}),this.lowerCanvas.style.left=this.upperCanvas.style.left="",this.fontSizeColl=[],this.lowerCanvas.style.top=this.upperCanvas.style.top="",this.lowerCanvas.style.maxWidth=this.upperCanvas.style.maxWidth="",this.lowerCanvas.style.maxHeight=this.upperCanvas.style.maxHeight="",this.transform.defaultZoomFactor=this.transform.zoomFactor=0,this.transform.cropZoomFactor=null,this.currObjType={shape:"",isDragging:!1,isActiveObj:!1,isText:!1,isInitialText:!1,isLine:!1,isInitialLine:!1,isCustomCrop:!1,isZoomed:!1,isUndoZoom:!1,isUndoAction:!1,isFiltered:!1,isSave:!1,isResize:!1},this.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",zoomFactor:0,previousZoomValue:0,destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:""},this.afterCropActions=[],this.currentFilter="";var n={initialZoomValue:!1};this.notify("draw",{prop:"getInitialZoomValue",onPropertyChange:!1,value:{obj:n}}),n.initialZoomValue&&this.setProperties({zoomSettings:{zoomFactor:n.initialZoomValue}},!0),document.getElementById(this.element.id+"_quickAccessToolbarArea")&&(document.getElementById(this.element.id+"_quickAccessToolbarArea").style.display="none"),this.notifyResetForAllModules(),this.notify("filter",{prop:"update-finetunes"}),this.isImageLoaded=!1,this.notify("draw",{prop:"update-canvas",onPropertyChange:!1}),this.isImageLoaded=!0,z()||(this.element.querySelector(".e-contextual-toolbar-wrapper")&&this.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),this.notify("toolbar",{prop:"refresh-dropdown-btn",value:{isDisabled:!1}}),this.notify("toolbar",{prop:"enable-disable-btns"}))}},t.prototype.rotate=function(i){var n={isRotate:!1};return this.notify("transform",{prop:"rotate",value:{degree:i,obj:n}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),n.isRotate},t.prototype.export=function(i,n){this.notify("export",{prop:"export",onPropertyChange:!1,value:{type:i,fileName:n}})},t.prototype.select=function(i,n,r,o,a){this.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:i,startX:n,startY:r,width:o,height:a}})},t.prototype.freeHandDraw=function(i){this.notify("freehand-draw",{prop:"freeHandDraw",onPropertyChange:!1,value:{value:i}})},t.prototype.freehandDraw=function(i){!this.disabled&&this.isImageLoaded&&this.freeHandDraw(i)},t.prototype.pan=function(i){this.notify("transform",{prop:"pan",onPropertyChange:!1,value:{value:i}})},t.prototype.zoom=function(i,n){this.notify("transform",{prop:"zoom",onPropertyChange:!1,value:{zoomFactor:i,zoomPoint:n}})},t.prototype.drawEllipse=function(i,n,r,o,a,l,h){var c=!1,u=this.allowShape(i,n);return!this.disabled&&this.isImageLoaded&&(u||p(i)&&p(n))&&(c=!0,this.notify("shape",{prop:"drawEllipse",onPropertyChange:!1,value:{x:i,y:n,radiusX:r,radiusY:o,strokeWidth:a,strokeColor:l,fillColor:h}})),c},t.prototype.drawLine=function(i,n,r,o,a,l){var h=!1,c=this.allowShape(i,n);return!this.disabled&&this.isImageLoaded&&(c||p(i)&&p(n))&&(h=!0,this.notify("shape",{prop:"drawLine",onPropertyChange:!1,value:{startX:i,startY:n,endX:r,endY:o,strokeWidth:a,strokeColor:l}})),h},t.prototype.drawArrow=function(i,n,r,o,a,l,h,c){var u=!1,d=this.allowShape(i,n);return!this.disabled&&this.isImageLoaded&&(d||p(i)&&p(n))&&(u=!0,this.notify("shape",{prop:"drawArrow",onPropertyChange:!1,value:{startX:i,startY:n,endX:r,endY:o,strokeWidth:a,strokeColor:l,arrowStart:h,arrowEnd:c}})),u},t.prototype.drawPath=function(i,n,r){this.isPublicMethod=!0;var o={inRange:!1},a=!1;if(i&&i.length>0)for(var l=0;l<i.length&&!o.inRange;l++)this.notify("shape",{prop:"isPointsInRange",onPropertyChange:!1,value:{x:i[l].x,y:i[l].y,obj:o}});return!this.disabled&&this.isImageLoaded&&(o.inRange||p(i))&&(a=!0,this.notify("shape",{prop:"drawPath",onPropertyChange:!1,value:{pointColl:i,strokeWidth:n,strokeColor:r}})),a},t.prototype.drawRectangle=function(i,n,r,o,a,l,h){var c=!1,u=this.allowShape(i,n);return!this.disabled&&this.isImageLoaded&&(u||p(i)&&p(n))&&(c=!0,this.notify("shape",{prop:"drawRectangle",onPropertyChange:!1,value:{x:i,y:n,width:r,height:o,strokeWidth:a,strokeColor:l,fillColor:h}})),c},t.prototype.drawText=function(i,n,r,o,a,l,h,c){var u=!1,d=this.allowShape(i,n);return!this.disabled&&this.isImageLoaded&&(d||p(i)&&p(n))&&(u=!0,this.notify("shape",{prop:"drawText",onPropertyChange:!1,value:{x:i,y:n,text:r,fontFamily:o,fontSize:a,bold:l,italic:h,color:c}})),u},t.prototype.selectShape=function(i){var n={isSelected:!1};return this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:i,obj:n}}),n.isSelected},t.prototype.deleteShape=function(i){this.notify("shape",{prop:"deleteShape",onPropertyChange:!1,value:{id:i}})},t.prototype.getShapeSetting=function(i){var n={};return this.notify("shape",{prop:"getShapeSetting",onPropertyChange:!1,value:{id:i,obj:n}}),n},t.prototype.getShapeSettings=function(){var i={shapeDetailsColl:[]};return this.notify("shape",{prop:"getShapeSettings",onPropertyChange:!1,value:{obj:i}}),i.shapeDetailsColl},t.prototype.update=function(){this.notify("transform",{prop:"update"})},t.prototype.finetuneImage=function(i,n){!this.disabled&&this.isImageLoaded&&this.notify("filter",{prop:"finetuneImage",value:{value:n,option:i}})},t.prototype.applyImageFilter=function(i){!this.disabled&&this.isImageLoaded&&(this.notify("filter",{prop:"applyImageFilter",value:{option:i.toString()}}),this.canvasFilter=this.lowerContext.filter,this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))},t.prototype.undo=function(){this.notify("undo-redo",{prop:"undo",onPropertyChange:!1})},t.prototype.redo=function(){this.notify("undo-redo",{prop:"redo",onPropertyChange:!1})},t.prototype.getImageDimension=function(){return{x:this.img.destLeft,y:this.img.destTop,width:this.img.destWidth,height:this.img.destHeight}},t.prototype.toolbarTemplateFn=function(){var i,n=this.element.id+"_toolbar",r=this.element.querySelector("#"+this.element.id+"_toolbarArea");if(this.toolbarTemplate){if(this.toolbarFn=this.templateParser(this.toolbarTemplate),this.isReact)i=this.toolbarFn({type:"toolbar"},this,"Template",n)[0];else if(this.isAngular){var o=this.toolbarFn({type:"toolbar"},this,"Template",n);i=3===o[0].nodeType?o[1]:o[0]}else i=this.toolbarFn({type:"toolbar"},this,"Template",n)[0];r.appendChild(i),this.toolbarHeight=r.clientHeight,this.notify("toolbar",{prop:"setToolbarHeight",value:{height:this.toolbarHeight}}),this.renderReactTemplates()}},t.prototype.quickAccessToolbarTemplateFn=function(){var i,n=this.element.id+"_quickAccessToolbar",r=this.element.querySelector("#"+this.element.id+"_quickAccessToolbarArea");if(this.quickAccessToolbarTemplate){if(this.qatFn=this.templateParser(this.quickAccessToolbarTemplate),this.isReact)i=this.qatFn({type:"toolbar"},this,"Template",n)[0];else if(this.isAngular){var o=this.qatFn({type:"toolbar"},this,"Template",n);i=3===o[0].nodeType?o[1]:o[0]}else i=this.qatFn({type:"toolbar"},this,"Template",n)[0];r.appendChild(i),this.renderReactTemplates()}},t.prototype.templateParser=function(i){if(i)try{return"function"!=typeof i&&document.querySelectorAll(i).length?vt(document.querySelector(i).innerHTML.trim()):vt(i)}catch{return vt(i)}},t.prototype.getTextFromId=function(i){return{1:"none",2:"bar",3:"arrow",4:"arrowSolid",5:"circle",6:"circleSolid",7:"square",8:"squareSolid"}[""+i]},t.prototype.getFinetuneOption=function(i){return{brightness:Qr.Brightness,contrast:Qr.Contrast,hue:Qr.Hue,saturation:Qr.Saturation,opacity:Qr.Opacity,blur:Qr.Blur,exposure:Qr.Exposure}[""+i]},t.prototype.setPenStroke=function(i){this.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:parseInt(i,10)}})},t.prototype.updateFreehandDrawColorChange=function(){var i={tempFreeHandDrawEditingStyles:null};this.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:i}}),this.notify("freehand-draw",{prop:"color-change",value:{color:i.tempFreeHandDrawEditingStyles.strokeColor}})},t.prototype.setInitialZoomState=function(){this.objColl.push(this.activeObj),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1});var i=this.isUndoRedo;this.isCropTab=!1,this.isUndoRedo=!0,this.notify("transform",this.transform.cropZoomFactor&&this.transform.cropZoomFactor>0?{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-this.transform.cropZoomFactor,zoomPoint:null}}:{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:Math.abs(this.transform.cropZoomFactor),zoomPoint:null}}),this.isUndoRedo=i,this.panPoint.totalPannedPoint={x:0,y:0},this.transform.cropZoomFactor=0,this.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),this.activeObj=C({},this.objColl[this.objColl.length-1],{},!0),this.objColl.pop(),this.isCropTab=!0,this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:this.activeObj}})},t.prototype.updateCropTransformItems=function(){this.prevCurrSelectionPoint=C({},this.currSelectionPoint,{},!0);var i={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}});var n=i.currObj;n.objColl=C([],this.objColl,[],!0),n.pointColl=C([],this.pointColl,[],!0),n.afterCropActions=C([],this.afterCropActions,[],!0);var r={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),n.selPointColl=C([],r.selPointColl,[],!0),this.cancelCropSelection={operation:"cropTransform",previousObj:n,currentObj:n,previousObjColl:n.objColl,currentObjColl:n.objColl,previousPointColl:n.pointColl,currentPointColl:n.pointColl,previousSelPointColl:n.selPointColl,currentSelPointColl:n.selPointColl,previousCropObj:C({},this.cropObj,{},!0),currentCropObj:C({},this.cropObj,{},!0),previousText:null,currentText:null,filter:null,isCircleCrop:this.isCircleCrop}},t.prototype.toPascalCase=function(i,n){var r=[];p(i)||(r=i.toLowerCase().split("-"));for(var o=0;o<r.length;o++)r[o]=r[o].charAt(0).toUpperCase()+r[o].slice(1);return n&&(n.maxText=r.join("")),r.join("")},t.prototype.getFontSizes=function(){var n,i=[];this.fontSizeColl=[],n=0===this.transform.degree||this.transform.degree%180==0?this.img.destWidth/25:this.img.destHeight/25;for(var r=1;r<=10;r++)this.fontSizeColl.push({text:(r*Math.round(n/2)).toString()}),i.push({text:r.toString()});return i},t.prototype.okBtn=function(i){var r,n=!1;void 0!==this.activeObj.shape&&(r=this.activeObj.shape.split("-")),(void 0===r&&this.currObjType.isCustomCrop||void 0!==r&&"crop"===r[0])&&(n=!0);var o=this.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected"),a={bool:!1};if(this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:a}}),o&&(this.currentFilter=o.children[0].children[0].id.replace("Canvas","")),n)this.crop();else if(this.togglePen)this.freeHandDraw(!1),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}});else if("block"===this.textArea.style.display)this.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),p(i)&&this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}});else if(!z()&&document.querySelector("#"+this.element.id+"_sliderWrapper")||z()&&!this.element.querySelector(".e-ie-contextual-slider").classList.contains("e-hidden")||this.currObjType.isFiltered){this.initialAdjustmentValue=this.canvasFilter=this.lowerContext.filter,this.currObjType.isFiltered=!1;var l={value:null};this.notify("draw",{prop:"getTempAdjustmentValue",value:{obj:l}}),l.value!==this.lowerContext.filter&&this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}else a.bool?(this.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}}),z()?this.updateToolbar(this.element,"destroyQuickAccessToolbar"):this.notify("toolbar",{prop:"destroy-qa-toolbar"}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})):(0!==this.activeObj.activePoint.width&&0!==this.activeObj.activePoint.height||"path"===this.activeObj.shape&&this.activeObj.pointColl.length>0)&&this.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:i}});!z()&&!a.isCropToolbar&&this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:null,isZooming:null,cType:null}}),this.notify("draw",{prop:"setNewPath",value:{bool:!1}}),this.isCropTab=!1,this.transform.zoomFactor=this.transform.defaultZoomFactor,this.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}})},t.prototype.setTempFilterProperties=function(){this.upperCanvas.style.display="block",this.cropSelectedState();var i={adjustmentLevel:null};this.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:i}}),this.lowerContext.filter=this.initialAdjustmentValue,this.notify("draw",{prop:"setTempAdjustmentValue",value:{tempAdjustmentValue:this.lowerContext.filter}}),this.notify("filter",{prop:"setTempAdjustmentLevel",onPropertyChange:!1,value:{tempAdjustmentLevel:C({},i.adjustmentLevel,{},!0)}}),this.notify("draw",{prop:"setTempFilter",value:{tempFilter:this.currentFilter}});var n={undoRedoStep:null};this.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:n}}),this.notify("draw",{prop:"setTempUndoRedoStep",value:{tempUndoRedoStep:n.undoRedoStep}})},t.prototype.cropSelectedState=function(){this.activeObj.shape&&"crop"===this.activeObj.shape.split("-")[0]&&this.okBtn()},t.prototype.getCurrentCanvasData=function(){var i=this.lowerContext.filter;this.lowerContext.filter=this.canvasFilter="none";var n=C([],this.objColl,null,!0),r=C([],this.pointColl,null,!0);this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}});var o=this.getImageData();return z()||(O.isDevice||this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!0,isCropping:!1}}),this.element.querySelector("#"+this.element.id+"_contextualToolbarArea").classList.remove("e-hide")),this.objColl=n,this.pointColl=r,this.freehandCounter=r.length,this.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),this.lowerContext.filter=this.canvasFilter=i,o},t.prototype.setCurrAdjustmentValue=function(i,n){var r=this,o={finetune:this.getFinetuneOption(i),value:n,cancel:!1};if(z()&&this.events&&!0===this.events.finetuneValueChanging.hasDelegate)this.dotNetRef.invokeMethodAsync("OnFinetuneValueChangeAsync",o).then(function(a){a.cancel||r.notify("filter",{prop:"setCurrAdjValue",value:{type:i.toLowerCase(),value:n}})});else{if(this.trigger("finetuneValueChanging",o),o.cancel)return;this.notify("filter",{prop:"setCurrAdjValue",value:{type:i.toLowerCase(),value:n}})}},t.prototype.getSquarePointForPath=function(i){var n={startX:0,startY:0,endX:0,endY:0,width:0,height:0};if(i.pointColl.length>0){n={startX:i.pointColl[0].x,startY:i.pointColl[0].y,endX:i.pointColl[0].x,endY:i.pointColl[0].y};for(var r=1;r<i.pointColl.length;r++)i.pointColl[r].x<n.startX&&(n.startX=i.pointColl[r].x),i.pointColl[r].y<n.startY&&(n.startY=i.pointColl[r].y),i.pointColl[r].x>n.endX&&(n.endX=i.pointColl[r].x),i.pointColl[r].y>n.endY&&(n.endY=i.pointColl[r].y);n.width=n.endX-n.startX,n.height=n.endY-n.startY}return n},t.prototype.getSelectionType=function(i){return{CropCustom:"Custom",CropSquare:"Square",CropCircle:"Circle","Crop3:2":"3:2","Crop4:3":"4:3","Crop5:4":"5:4","Crop7:5":"7:5","Crop16:9":"16:9"}[""+i]},t.prototype.clearContext=function(i){i.clearRect(0,0,i.canvas.width,i.canvas.height),i.clearRect(0,0,i.canvas.height,i.canvas.width)},t.prototype.updateArrow=function(i,n){this.notify("shape",{prop:"pushActItemIntoObj"});var r=C({},this.cropObj,{},!0),o={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var a=o.currObj;a.objColl=C([],this.objColl,[],!0),a.pointColl=C([],this.pointColl,[],!0),a.afterCropActions=C([],this.afterCropActions,[],!0),this.objColl.pop(),"startArrow"===i?this.activeObj.start=this.getTextFromId(n):"endArrow"===i&&(this.activeObj.end=this.getTextFromId(n)),this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth}}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}),z()||(O.isDevice?document.getElementById(this.element.id+"_bottomToolbar")&&Qe(this.element.id+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(this.element.id+"_toolbar")&&Qe(this.element.id+"_toolbar","toolbar").refreshOverflow())},t.prototype.updateFontFamily=function(i){this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),this.notify("shape",{prop:"pushActItemIntoObj"});var n=C([],this.objColl,[],!0),r=C({},this.cropObj,{},!0),o={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var a=o.currObj;a.objColl=C([],this.objColl,[],!0),a.pointColl=C([],this.pointColl,[],!0),a.afterCropActions=C([],this.afterCropActions,[],!0);var l={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=C([],l.selPointColl,[],!0),this.objColl.pop(),"block"===this.textArea.style.display){this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:!0}});var h=this.activeObj.textSettings.fontFamily;this.activeObj.textSettings.fontFamily=this.toPascalCase(i),this.notify("shape",{prop:"redraw-text"}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.textArea.style.width=this.activeObj.activePoint.width+.25*this.activeObj.textSettings.fontSize+"px",this.textArea.style.fontFamily=this.toPascalCase(i),this.activeObj.textSettings.fontFamily=h,this.notify("shape",{prop:"updateFontStyles",onPropertyChange:!1,value:{isTextBox:null}})}else{this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:null}});var u=this.activeObj.textSettings.fontFamily=this.toPascalCase(i);this.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:null,fontFamily:u,fontSize:null}}),this.notify("shape",{prop:"redraw-text"}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:a,previousObjColl:n,previousPointColl:C([],this.pointColl,[],!0),previousSelPointColl:a.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}})}},t.prototype.updateFontSize=function(i){var n=i;this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),this.notify("shape",{prop:"pushActItemIntoObj"});var r=C({},this.cropObj,{},!0),o={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var a=o.currObj;a.objColl=C([],this.objColl,[],!0),a.pointColl=C([],this.pointColl,[],!0),a.afterCropActions=C([],this.afterCropActions,[],!0);var l={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=C([],l.selPointColl,[],!0),this.objColl.pop(),"block"===this.textArea.style.display){this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:!0}});var h=this.activeObj.textSettings.fontSize;this.activeObj.textSettings.fontSize=parseInt(this.fontSizeColl[parseInt(n,10)-1].text,10),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop();var c="";"bold"===this.textArea.style.fontWeight&&(c="bold "),"italic"===this.textArea.style.fontStyle&&(c="italic "),"bold"===this.textArea.style.fontWeight&&"italic"===this.textArea.style.fontStyle&&(c="italic bold "),this.upperContext.font=c+this.activeObj.textSettings.fontSize+"px "+this.textArea.style.fontFamily;var u=this.textArea.value.split("\n");this.notify("shape",{prop:"getMaxText",onPropertyChange:!1,value:{isTextBox:!0,text:null,obj:d={maxText:""}}});var v=this.upperContext.measureText(d.maxText).width+.5*this.activeObj.textSettings.fontSize;this.textArea.style.width=v+"px",this.textArea.style.height=u.length*(this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize)+"px",this.activeObj.textSettings.fontSize=h,this.upperContext.font=this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily,this.textArea.style.fontSize=parseInt(this.fontSizeColl[parseInt(n,10)-1].text,10)+"px","georgia"===this.textArea.style.fontFamily&&(this.textArea.style.width=parseFloat(this.textArea.style.width)+parseFloat(this.textArea.style.fontSize)+"px")}else{this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:null}});var d,g=this.activeObj.textSettings.fontSize=parseInt(this.fontSizeColl[parseInt(n,10)-1].text,10);this.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:null,fontFamily:null,fontSize:g}}),this.upperContext.font=this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily,u=this.activeObj.keyHistory.split("\n"),this.notify("shape",{prop:"getMaxText",onPropertyChange:!1,value:{isTextBox:null,text:null,obj:d={maxText:""}}}),v=this.upperContext.measureText(d.maxText).width+.5*this.activeObj.textSettings.fontSize,this.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:v,height:u.length*(this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize)}}),this.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:this.activeObj.activePoint,obj:this.activeObj,isMouseMove:null,x:null,y:null}}),this.notify("shape",{prop:"redraw-text"}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}})}},t.prototype.updateFontColor=function(i){this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),this.notify("shape",{prop:"pushActItemIntoObj"});var n=C({},this.cropObj,{},!0),r={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var o=r.currObj;o.objColl=C([],this.objColl,[],!0),o.pointColl=C([],this.pointColl,[],!0),o.afterCropActions=C([],this.afterCropActions,[],!0);var a={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),o.selPointColl=C([],a.selPointColl,[],!0),this.objColl.pop(),"none"===this.textArea.style.display)this.activeObj.strokeSettings.strokeColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:this.activeObj.strokeSettings.strokeColor,fillColor:null,strokeWidth:null}}),this.togglePen||(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}));else if("block"===this.textArea.style.display){this.textArea.style.color=i;var l=this.activeObj.strokeSettings.strokeColor;this.activeObj.strokeSettings.strokeColor=i,this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop(),this.activeObj.strokeSettings.strokeColor=l}else this.togglePen||(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}))},t.prototype.updatePenStrokeWidth=function(i){var n=C([],this.pointColl,[],!0);this.updateFreehandDrawColorChange();var r=C({},this.cropObj,{},!0),o={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var a=o.currObj;a.objColl=C([],this.objColl,[],!0),a.pointColl=C([],this.pointColl,[],!0),a.afterCropActions=C([],this.afterCropActions,[],!0);var l={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=C([],l.selPointColl,[],!0),this.pointColl=n,this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!0}}),this.setPenStroke(i);var h={bool:!1};if(this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:h}}),h.bool){var c={penStrokeWidth:null};this.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:c}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:c.penStrokeWidth}});var u={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:u}}),this.pointColl[u.freehandSelectedIndex].strokeWidth=c.penStrokeWidth,this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehanddrawCustomized",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}},t.prototype.updatePenStrokeColor=function(i){var n=C([],this.pointColl,[],!0);this.updateFreehandDrawColorChange();var r=C({},this.cropObj,{},!0),o={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var a=o.currObj;a.objColl=C([],this.objColl,[],!0),a.pointColl=C([],this.pointColl,[],!0),a.afterCropActions=C([],this.afterCropActions,[],!0);var l={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=C([],l.selPointColl,[],!0),this.pointColl=n,this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!0}}),this.activeObj.strokeSettings.strokeColor=i;var h={bool:!1};if(this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:h}}),h.bool){var c={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:c}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.pointColl[c.freehandSelectedIndex].strokeColor=i,this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:i}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehanddrawCustomized",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}else this.togglePen||this.notify("selection",{prop:"redrawShape",value:{obj:this.activeObj}})},t.prototype.updateStrokeWidth=function(i){this.notify("shape",{prop:"pushActItemIntoObj"});var n=C({},this.cropObj,{},!0),r={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var o=r.currObj;o.objColl=C([],this.objColl,[],!0),o.pointColl=C([],this.pointColl,[],!0),o.afterCropActions=C([],this.afterCropActions,[],!0);var a={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),o.selPointColl=C([],a.selPointColl,[],!0),this.objColl.pop(),this.activeObj.strokeSettings.strokeWidth=parseInt(i,10),this.activeObj.strokeSettings.strokeWidth*=2,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth}}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}})},t.prototype.updateStrokeColor=function(i){this.notify("shape",{prop:"pushActItemIntoObj"});var n=C({},this.cropObj,{},!0),r={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var o=r.currObj;o.objColl=C([],this.objColl,[],!0),o.pointColl=C([],this.pointColl,[],!0),o.afterCropActions=C([],this.afterCropActions,[],!0);var a={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),o.selPointColl=C([],a.selPointColl,[],!0),this.objColl.pop(),this.activeObj.strokeSettings.strokeColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:this.activeObj.strokeSettings.strokeColor,fillColor:null,strokeWidth:null}}),this.togglePen||(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}))},t.prototype.updateFillColor=function(i){this.notify("shape",{prop:"pushActItemIntoObj"});var n=C({},this.cropObj,{},!0),r={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var o=r.currObj;o.objColl=C([],this.objColl,[],!0),o.pointColl=C([],this.pointColl,[],!0),o.afterCropActions=C([],this.afterCropActions,[],!0);var a={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),o.selPointColl=C([],a.selPointColl,[],!0),this.objColl.pop(),this.activeObj.strokeSettings.fillColor=i,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:this.activeObj.strokeSettings.fillColor,strokeWidth:null}}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}})},t.prototype.pascalToSplitWords=function(i){var n=(i=i.charAt(0).toUpperCase()+i.slice(1)).match(/[A-Z][a-z]+/g);return p(n)?i:n.map(function(r){return r.charAt(0).toUpperCase()+r.slice(1)}).join(" ")},t.prototype.getCurrAdjustmentValue=function(i){var n={adjustmentLevel:null};return this.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:n}}),{brightness:n.adjustmentLevel.brightness,contrast:n.adjustmentLevel.contrast,hue:n.adjustmentLevel.hue,saturation:n.adjustmentLevel.saturation,opacity:n.adjustmentLevel.opacity,blur:n.adjustmentLevel.blur,exposure:n.adjustmentLevel.exposure}[""+i]},t.prototype.transformSelect=function(i){this.isCropToolbar=!0,this.setInitialZoomState();var n=C({},this.activeObj,{},!0);this.cropSelectedState(),this.notify("draw",{prop:"resetCurrentSelectionPoint"}),this.notify("transform",{prop:"performTransformation",value:{text:i}}),this.notify("draw",{prop:"moveToSelectionRange",value:{type:i,activeObj:n}}),this.isCropToolbar=!1},t.prototype.getDefaultFilter=function(){return"brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)"},t.prototype.initializeImageEditor=function(i,n){this.element=i;var r=this.element.querySelector(".e-canvas-wrapper");this.toolbarHeight=this.element.querySelector("#"+this.element.id+"_toolbarArea")?this.element.querySelector("#"+this.element.id+"_toolbarArea").clientHeight:0,r.style.height=this.element.offsetHeight-this.toolbarHeight-2+"px",r.style.width=this.element.offsetWidth-2+"px",this.lowerCanvas=this.element.querySelector(".e-lower-canvas"),this.upperCanvas=this.element.querySelector(".e-upper-canvas"),this.lowerCanvas.id=this.element.id+"_lowerCanvas",this.upperCanvas.id=this.element.id+"_upperCanvas",this.textArea=this.element.querySelector(".e-textbox"),this.inMemoryCanvas=this.createElement("canvas",{id:this.element.id+"_inMemoryCanvas",attrs:{name:"canvasImage"}}),this.upperCanvas.width=this.lowerCanvas.width=this.inMemoryCanvas.width=this.element.offsetWidth,this.upperCanvas.height=this.lowerCanvas.height=this.inMemoryCanvas.height=this.element.offsetHeight-this.toolbarHeight,this.lowerContext=this.lowerCanvas.getContext("2d"),this.baseImg=this.createElement("img",{id:this.element.id+"_orgImg",attrs:{name:"Image",crossorigin:"anonymous"}}),this.upperContext=this.upperCanvas.getContext("2d"),this.inMemoryContext=this.inMemoryCanvas.getContext("2d"),n&&(this.dotNetRef=n),this.prerender(),this.wireEvent(),this.lowerContext.filter=this.getDefaultFilter(),this.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),this.canvasFilter=this.initialAdjustmentValue=this.lowerContext.filter,this.cssClass&&D([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.element&&Vs({target:this.element}),this.initializeZoomSettings()},t.prototype.prerender=function(){this.element.id=this.element.id||at("ej2-image-editor"),O.isDevice&&this.element.classList.add("e-device"),this.initializeThemeColl()},t.prototype.initializeZoomSettings=function(){p(this.zoomSettings.zoomTrigger)&&(this.zoomSettings.zoomTrigger=Nt.MouseWheel|Nt.Pinch|Nt.Toolbar|Nt.Commands),p(this.selectionSettings.strokeColor)&&(this.selectionSettings.strokeColor=this.themeColl[this.theme].primaryColor),p(this.selectionSettings.fillColor)&&(this.selectionSettings.fillColor=this.themeColl[this.theme].secondaryColor)},t.prototype.initializeThemeColl=function(){this.themeColl={Bootstrap5:{primaryColor:"#0d6efd",secondaryColor:"#fff"},Bootstrap5Dark:{primaryColor:"#0d6efd",secondaryColor:"#fff"},Tailwind:{primaryColor:"#4f46e5",secondaryColor:"#fff"},TailwindDark:{primaryColor:"#22d3ee",secondaryColor:"#fff"},Fluent:{primaryColor:"#0078d4",secondaryColor:"#fff"},FluentDark:{primaryColor:"#0078d4",secondaryColor:"#fff"},Bootstrap4:{primaryColor:"#007bff",secondaryColor:"#fff"},Bootstrap:{primaryColor:"#317ab9",secondaryColor:"#fff"},BootstrapDark:{primaryColor:"#317ab9",secondaryColor:"#fff"},Material:{primaryColor:"#e3165b",secondaryColor:"#fff"},MaterialDark:{primaryColor:"#00b0ff",secondaryColor:"#fff"},Fabric:{primaryColor:"#0078d6",secondaryColor:"#fff"},FabricDark:{primaryColor:"#0074cc",secondaryColor:"#fff"},Highcontrast:{primaryColor:"#000000",secondaryColor:"#fff"},Material3:{primaryColor:"#6750a4",secondaryColor:"#fff"},Material3Dark:{primaryColor:"#d0bcff",secondaryColor:"#fff"}}},t.prototype.updateToolbar=function(i,n,r){},Te([m("")],t.prototype,"cssClass",void 0),Te([m(!1)],t.prototype,"disabled",void 0),Te([m("100%")],t.prototype,"height",void 0),Te([m("Bootstrap5")],t.prototype,"theme",void 0),Te([m()],t.prototype,"toolbar",void 0),Te([m()],t.prototype,"toolbarTemplate",void 0),Te([m("100%")],t.prototype,"width",void 0),Te([m(!0)],t.prototype,"allowUndoRedo",void 0),Te([m(!0)],t.prototype,"showQuickAccessToolbar",void 0),Te([m()],t.prototype,"quickAccessToolbarTemplate",void 0),Te([m(!1)],t.prototype,"isReadOnly",void 0),Te([m(!1)],t.prototype,"enableRtl",void 0),Te([m(!1)],t.prototype,"enablePersistence",void 0),Te([pt({},yV)],t.prototype,"finetuneSettings",void 0),Te([pt({},bV)],t.prototype,"zoomSettings",void 0),Te([pt({},CV)],t.prototype,"selectionSettings",void 0),Te([E()],t.prototype,"beforeSave",void 0),Te([E()],t.prototype,"created",void 0),Te([E()],t.prototype,"destroyed",void 0),Te([E()],t.prototype,"zooming",void 0),Te([E()],t.prototype,"panning",void 0),Te([E()],t.prototype,"cropping",void 0),Te([E()],t.prototype,"rotating",void 0),Te([E()],t.prototype,"flipping",void 0),Te([E()],t.prototype,"shapeChanging",void 0),Te([E()],t.prototype,"selectionChanging",void 0),Te([E()],t.prototype,"fileOpened",void 0),Te([E()],t.prototype,"saved",void 0),Te([E()],t.prototype,"toolbarCreated",void 0),Te([E()],t.prototype,"toolbarUpdating",void 0),Te([E()],t.prototype,"toolbarItemClicked",void 0),Te([E()],t.prototype,"imageFiltering",void 0),Te([E()],t.prototype,"finetuneValueChanging",void 0),Te([E()],t.prototype,"click",void 0),Te([E()],t.prototype,"quickAccessToolbarOpen",void 0),Te([E()],t.prototype,"quickAccessToolbarItemClick",void 0),e=Te([Be],t)}(Mt),nl=(()=>(function(s){s.Horizontal="Horizontal",s.Vertical="Vertical"}(nl||(nl={})),nl))(),ac=(()=>(function(s){s.Rectangle="Rectangle",s.Ellipse="Ellipse",s.Line="Line",s.Arrow="Arrow",s.Path="Path",s.Text="Text",s.FreehandDraw="FreehandDraw"}(ac||(ac={})),ac))(),Nt=(()=>(function(s){s[s.MouseWheel=1]="MouseWheel",s[s.Pinch=2]="Pinch",s[s.Commands=4]="Commands",s[s.Toolbar=8]="Toolbar"}(Nt||(Nt={})),Nt))(),Qr=(()=>(function(s){s.Brightness="Brightness",s.Contrast="Contrast",s.Hue="Hue",s.Saturation="Saturation",s.Exposure="Exposure",s.Opacity="Opacity",s.Blur="Blur"}(Qr||(Qr={})),Qr))(),SV=function(){function s(t){this.defToolbarItems=[],this.toolbarHeight=46,this.currToolbar="",this.preventZoomBtn=!1,this.currentToolbar="main",this.selFhdColor="#42a5f5",this.preventEnableDisableUr=!1,this.parent=t,this.addEventListener(),this.initLocale()}return s.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},s.prototype.addEventListener=function(){this.parent.on("toolbar",this.toolbar,this),this.parent.on("destroyed",this.destroy,this)},s.prototype.removeEventListener=function(){this.parent.off("toolbar",this.toolbar),this.parent.off("destroyed",this.destroy)},s.prototype.initLocale=function(){this.defaultLocale={Crop:"Crop",ZoomIn:"Zoom In",ZoomOut:"Zoom Out",Undo:"Undo",Redo:"Redo",Transform:"Transform",Annotation:"Annotation",Finetune:"Finetune",Brightness:"Brightness",Contrast:"Contrast",Hue:"Hue",Saturation:"Saturation",Opacity:"Opacity",Blur:"Blur",Sharpen:"Sharpen",Exposure:"Exposure",Filter:"Filter",Default:"Default",Chrome:"Chrome",Cold:"Cold",Warm:"Warm",Grayscale:"Grayscale",BlackAndWhite:"Black and White",Sepia:"Sepia",Invert:"Invert",Text:"Add Text",Pen:"Pen",Reset:"Reset",Save:"Save",Select:"Select",RotateLeft:"Rotate Left",RotateRight:"Rotate Right",HorizontalFlip:"Horizontal Flip",VerticalFlip:"Vertical Flip",OK:"OK",Cancel:"Cancel",FillColor:"Fill Color",StrokeColor:"Stroke Color",StrokeWidth:"Stroke Width",FontFamily:"Font Family",FontStyle:"Font Style",FontSize:"Font Size",FontColor:"Font Color",Pan:"Pan",Move:"Move",Load:"Load",Custom:"Custom",Square:"Square",Circle:"Circle",Ellipse:"Ellipse",Rectangle:"Rectangle",Line:"Line",Arrow:"Arrow",Path:"Path",Bold:"Bold",Italic:"Italic",BoldItalic:"Bold Italic",XSmall:"X-Small",Small:"Small",Medium:"Medium",Large:"Large",XLarge:"X-Large",ABC:"ABC",Browse:"Browse",Duplicate:"Duplicate",Remove:"Remove",EditText:"Edit Text",Start:"Start",End:"End",Bar:"Bar",ArrowSolid:"Arrow Solid",CircleSolid:"Circle Solid",SquareSolid:"Square Solid",None:"None",CropAndTransform:"Crop and Transform",CropSelection:"Crop Selection"},this.l10n=new Hr("image-editor",this.defaultLocale,this.parent.locale)},s.prototype.toolbar=function(t){var e=this.parent;switch(this.updatePrivateVariables(),t.prop){case"create-toolbar":this.createToolbar();break;case"create-contextual-toolbar":this.createContextualToolbar();break;case"update-toolbar-items":this.updateToolbarItems();break;case"refresh-toolbar":this.refreshToolbar(t.value.type,t.value.isApplyBtn,t.value.isCropping,t.value.isZooming,t.value.cType);break;case"renderQAT":this.renderQAT(t.value.isPenEdit);break;case"enable-disable-btns":this.enableDisableTbrBtn();break;case"init-main-toolbar":this.initMainToolbar(t.value.isApplyBtn,t.value.isDevice,t.value.isOkBtn);break;case"create-bottom-toolbar":this.createBottomToolbar();break;case"refresh-main-toolbar":this.refreshMainToolbar();break;case"create-qa-toolbar":this.createQuickAccessToolbar();break;case"destroy-qa-toolbar":this.destroyQuickAccessToolbar();break;case"zoom-up-handler":this.zoomBtnMouseUpHandler();break;case"refresh-dropdown-btn":this.refreshDropDownBtn(t.value.isDisabled);break;case"close-contextual-toolbar":this.closeContextualToolbar();break;case"destroy-bottom-toolbar":this.destroyBottomToolbar();break;case"destroy-top-toolbar":this.destroyTopToolbar();break;case"destroySubComponents":this.destroySubComponents();break;case"setLocale":this.l10n.setLocale(t.value.locale);break;case"setPreventZoomBtn":this.preventZoomBtn=t.value.isPrevent;break;case"getToolbarHeight":t.value.obj.toolbarHeight=this.toolbarHeight;break;case"setToolbarHeight":this.toolbarHeight=t.value.height;break;case"setCurrentToolbar":this.currentToolbar=t.value.type;break;case"setSelectedFreehandColor":this.selFhdColor=t.value.color;break;case"getCurrentFilter":t.value.obj.currentFilter=e.currentFilter;break;case"setCurrentFilter":e.currentFilter=t.value.filter;break;case"setInitialAdjustmentValue":e.initialAdjustmentValue=t.value.value;break;case"getCanvasFilter":t.value.obj.canvasFilter=e.canvasFilter;break;case"getDefToolbarItems":t.value.obj.defToolbarItems=this.defToolbarItems;break;case"getPenStroke":this.getPenStroke(t.value.value);break;case"performDefToolbarClickAction":this.performDefTbrClick(t.value.type,t.value.isContextualToolbar,t.value.isDisabledAdjustment,t.value.isDisabledFilter,t.value.isFilterFinetune);break;case"setTempFilterProperties":e.setTempFilterProperties();break;case"refreshSlider":this.refreshSlider();break;case"renderSlider":this.renderSlider(t.value.type);break;case"getCurrAdjustmentValue":e.getCurrAdjustmentValue(t.value.type);break;case"setCurrAdjustmentValue":e.setCurrAdjustmentValue(t.value.type,t.value.value);break;case"refreshShapeDrawing":this.refreshShapeDrawing();break;case"getCropToolbar":t.value.obj.isCropToolbar=e.isCropToolbar;break;case"getPrevCurrSelectionPoint":t.value.obj.prevCurrSelectionPoint=e.prevCurrSelectionPoint;break;case"setPrevCurrSelectionPoint":e.prevCurrSelectionPoint=t.value.point;break;case"updateCropTransformItems":e.updateCropTransformItems();break;case"setEnableDisableUndoRedo":this.preventEnableDisableUr=t.value.isPrevent;break;case"reset":this.reset()}},s.prototype.updatePrivateVariables=function(){var t=this.parent;this.inMemoryCanvas=t.inMemoryCanvas,t.lowerCanvas&&(this.lowerContext=t.lowerCanvas.getContext("2d")),t.upperCanvas&&(this.upperContext=t.upperCanvas.getContext("2d")),this.inMemoryCanvas&&(this.inMemoryContext=this.inMemoryCanvas.getContext("2d"))},s.prototype.reset=function(){var t=this.parent;this.defToolbarItems=[],this.toolbarHeight=46,t.prevCurrSelectionPoint=null,this.zoomBtnHold=null,this.currToolbar="",this.currentToolbar="main",this.selFhdColor="#42a5f5",t.currentFilter="",this.preventZoomBtn=t.isCropToolbar=this.preventEnableDisableUr=!1,t.initialAdjustmentValue=t.canvasFilter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)"},s.prototype.destroyTopToolbar=function(){var t=this.parent,e=document.getElementById(t.element.id+"_toolbar");this.isToolbar()&&e&&e.classList.contains("e-control")&&Qe(document.getElementById(t.element.id+"_toolbar"),"toolbar").destroy()},s.prototype.destroyBottomToolbar=function(){var t=this.parent,e=document.getElementById(t.element.id+"_bottomToolbar");e&&e.classList.contains("e-control")&&Qe(document.getElementById(t.element.id+"_bottomToolbar"),"toolbar").destroy()},s.prototype.isToolbar=function(){var t=this.parent;return p(t.toolbar)||t.toolbar&&t.toolbar.length>0||!p(t.toolbarTemplate)},s.prototype.createToolbar=function(){var t=this,e=this.parent;if(p(e.toolbar)||e.toolbar&&e.toolbar.length>0){e.element.appendChild(e.createElement("div",{id:e.element.id+"_toolbarArea",className:"e-toolbar-area"}));var i={cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new Lp({allowedExtensions:".jpg, .jpeg, .png,.svg"})};p(this.defToolbarItems)&&(this.defToolbarItems=[]),this.defToolbarItems.push(i);var n=document.getElementById(e.element.id+"_toolbarArea"),r=e.createElement("div",{id:e.element.id+"_toolbar"});n.appendChild(r);var o=[{cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new Lp({allowedExtensions:".jpg, .jpeg, .png,.svg",selected:function(){e.disabled||(O.isDevice?(t.defToolbarItems.length>0&&document.getElementById(e.element.id+"_toolbar")&&Qe(document.getElementById(e.element.id+"_toolbar"),"toolbar").destroy(),document.getElementById(e.element.id+"_bottomToolbar")&&Qe(document.getElementById(e.element.id+"_bottomToolbar"),"toolbar").destroy(),t.initMainToolbar(!1,O.isDevice,null),t.createBottomToolbar()):(t.defToolbarItems.length>0&&document.getElementById(e.element.id+"_toolbar")&&Qe(document.getElementById(e.element.id+"_toolbar"),"toolbar").destroy(),t.initMainToolbar(!1,!1,null)))}})}];new Zn({items:o,width:"100%",created:function(){e.trigger("toolbarCreated",{toolbarType:"main"})},clicked:this.defToolbarClicked.bind(this)}).appendTo("#"+e.element.id+"_toolbar"),this.createLeftToolbarControls(),document.getElementById(e.element.id+"_toolbar")&&(this.toolbarHeight=document.getElementById(e.element.id+"_toolbar").clientHeight)}else this.toolbarHeight=0},s.prototype.createContextualToolbar=function(){var t=this.parent;if(p(t.toolbar)||t.toolbar&&t.toolbar.length>0){t.element.appendChild(t.createElement("div",{id:t.element.id+"_contextualToolbarArea",className:"e-contextual-toolbar-wrapper e-hide",attrs:{style:"position: absolute;"}}));var e=document.getElementById(t.element.id+"_contextualToolbarArea"),i=t.createElement("div",{id:t.element.id+"_contextualToolbar"});e.appendChild(i)}},s.prototype.createBottomToolbar=function(){var t=this.parent;if(p(t.toolbar)||t.toolbar&&t.toolbar.length>0){if(t.element.appendChild(t.createElement("div",{id:t.element.id+"_bottomToolbarArea",className:"e-bottom-toolbar"})),!t.toolbarTemplate){document.getElementById(t.element.id+"_canvasWrapper").style.height=t.element.offsetHeight-2*this.toolbarHeight-3+"px";var e=document.getElementById(t.element.id+"_bottomToolbarArea"),i=t.createElement("div",{id:t.element.id+"_bottomToolbar"});e.appendChild(i)}this.initBottomToolbar()}},s.prototype.createQuickAccessToolbar=function(){var t=this.parent;if(t.showQuickAccessToolbar){var e={cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new Lp({allowedExtensions:".jpg, .jpeg, .png,.svg"})};p(this.defToolbarItems)&&(this.defToolbarItems=[]),this.defToolbarItems.push(e);var i=document.getElementById(t.element.id+"_quickAccessToolbarArea"),n=t.createElement("div",{id:t.element.id+"_quickAccessToolbar"});i.appendChild(n),new Zn({clicked:this.defToolbarClicked.bind(this)}).appendTo("#"+t.element.id+"_quickAccessToolbar")}},s.prototype.initMainToolbar=function(t,e,i){var n=this,r=this.parent;if(this.isToolbar()){var o=this.getLeftToolbarItem(i),a=this.getRightToolbarItem(i),l=this.getMainToolbarItem(t),h=this.getZoomToolbarItem();this.defToolbarItems=e?o.concat(a):o.concat(l,a,h),new Zn({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e||n.renderAnnotationBtn(),n.wireZoomBtnEvents(),n.renderSaveBtn(),r.trigger("toolbarCreated",{toolbarType:"main"})}}).appendTo("#"+r.element.id+"_toolbar"),this.createLeftToolbarControls(),this.enableDisableTbrBtn(),this.isToolbar()&&document.getElementById(r.element.id+"_toolbar")&&Qe(r.element.id+"_toolbar","toolbar").refreshOverflow()}},s.prototype.initBottomToolbar=function(){var t=this,e=this.parent;if(p(e.toolbar)||e.toolbar&&e.toolbar.length>0){var i=this.getMainToolbarItem();new Zn({items:i,width:"100%",created:function(){t.renderAnnotationBtn(),t.renderCropBtn(),t.renderTransformBtn(),e.trigger("toolbarCreated",{toolbarType:"main"})},clicked:this.defToolbarClicked.bind(this)}).appendTo("#"+e.element.id+"_bottomToolbar"),this.defToolbarItems.length>0&&document.getElementById(e.element.id+"_bottomToolbar")&&Qe(e.element.id+"_bottomToolbar","toolbar").refreshOverflow()}},s.prototype.getLeftToolbarItem=function(t){var e=this.parent,i=[];t||(i.push({id:e.element.id+"_upload",cssClass:"e-image-upload",align:"Left",type:"Input",template:new Lp({allowedExtensions:".jpg, .jpeg, .png,.svg"})}),i.push({visible:!1,cssClass:"e-image-position e-btn e-flat",tooltipText:this.l10n.getConstant("Browse"),align:"Left"})),e.allowUndoRedo&&((p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Undo")>-1)&&i.push({id:e.element.id+"_undo",prefixIcon:"e-icons e-undo",cssClass:"top-icon e-undo",tooltipText:this.l10n.getConstant("Undo"),align:"Left"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Redo")>-1)&&i.push({id:e.element.id+"_redo",prefixIcon:"e-icons e-redo",cssClass:"top-icon e-redo",tooltipText:this.l10n.getConstant("Redo"),align:"Left"})),!this.preventZoomBtn&&(e.zoomSettings.zoomTrigger&Nt.Toolbar)===Nt.Toolbar&&((p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("ZoomOut")>-1)&&i.push({id:e.element.id+"_zoomOut",prefixIcon:"e-icons e-zoom-out",cssClass:"top-icon e-dec-zoom",tooltipText:this.l10n.getConstant("ZoomOut"),align:"Left"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("ZoomIn")>-1)&&i.push({id:e.element.id+"_zoomIn",prefixIcon:"e-icons e-zoom-in",cssClass:"top-icon e-inc-zoom",tooltipText:this.l10n.getConstant("ZoomIn"),align:"Left"}));for(var n=this.processToolbar("left"),r=0,o=n.length;r<o;r++)i.push(n[r]);return i},s.prototype.getRightToolbarItem=function(t){var e=this.parent,i=[];t&&(i.push({id:e.element.id+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),i.push({id:e.element.id+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Reset")>-1)&&i.push({id:e.element.id+"_reset",prefixIcon:"e-icons e-btn-reset",cssClass:"top-icon e-img-reset",tooltipText:this.l10n.getConstant("Reset"),align:"Right"}),t||(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Save")>-1)&&i.push({id:e.element.id+"_save",prefixIcon:"e-icons e-btn-save",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Save"),align:"Right",template:'<button id="'+e.element.id+'_saveBtn"></button>'});for(var n=this.processToolbar("right"),r=0,o=n.length;r<o;r++)i.push(n[r]);return i},s.prototype.getMainToolbarItem=function(t){var e=this.parent,i=[];(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Crop")>-1)&&i.push({id:e.element.id+"_cropTransform",prefixIcon:"e-icons e-crop",cssClass:"top-icon e-crop",tooltipText:this.l10n.getConstant("CropAndTransform"),align:"Center"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Annotate")>-1)&&i.push({id:e.element.id+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+e.element.id+'_annotationBtn"></button>'}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Finetune")>-1)&&i.push({id:e.element.id+"_adjustment",prefixIcon:"e-icons e-adjustment",cssClass:"top-icon e-adjustment",tooltipText:this.l10n.getConstant("Finetune"),align:"Center"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Filter")>-1)&&i.push({id:e.element.id+"_filter",prefixIcon:"e-icons e-filters",cssClass:"top-icon e-filters",tooltipText:this.l10n.getConstant("Filter"),align:"Center"});for(var n=this.processToolbar("center"),r=0,o=n.length;r<o;r++)i.push(n[r]);return t&&(i.push({id:e.element.id+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),i.push({id:e.element.id+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),i},s.prototype.getZoomToolbarItem=function(){return[]},s.prototype.updateContextualToolbar=function(t,e){var i=this.parent,n=i.element.querySelector("#"+i.element.id+"_toolbarArea"),r=i.element.querySelector("#"+i.element.id+"_contextualToolbarArea");if(r.classList.remove("e-hide"),r.style.left=n.offsetLeft+"px","filter"===t?(document.getElementById(i.element.id+"_toolbar")&&this.defToolbarItems.length>0&&Qe(document.getElementById(i.element.id+"_toolbar"),"toolbar").destroy(),O.isDevice?this.initMainToolbar(!1,!0,!0):this.initMainToolbar(!0,null,null),this.refreshSlider(),this.initFilterToolbarItem()):(document.querySelector("#"+i.element.id+"_contextualToolbar").classList.contains("e-control")&&Qe(document.getElementById(i.element.id+"_contextualToolbar"),"toolbar").destroy(),this.refreshSlider(),this.renderSlider(e)),O.isDevice){var o=r.offsetHeight,a=i.element.querySelector("#"+i.element.id+"_canvasWrapper").offsetHeight;r.style.top=this.toolbarHeight+a-o+"px"}else r.style.top=this.toolbarHeight+"px"},s.prototype.processToolbar=function(t){var e=this.parent,i=[];if(e.toolbar)for(var n=0,r=e.toolbar.length;n<r;n++)"object"==typeof e.toolbar[n]&&(p(e.toolbar[n].align)?"left"===t&&i.push(e.toolbar[n]):e.toolbar[n].align.toLowerCase()===t&&i.push(e.toolbar[n]));return i},s.prototype.processSubToolbar=function(t){var e=[];if(t)for(var i=0,n=t.length;i<n;i++)"object"==typeof t[i]&&(t[i].align="Center",e.push(t[i]));return e},s.prototype.wireZoomBtnEvents=function(){var t=document.querySelector("#"+this.parent.element.id+"_zoomIn"),e=document.querySelector("#"+this.parent.element.id+"_zoomOut");t&&(t.addEventListener("mousedown",this.zoomInBtnMouseDownHandler.bind(this)),t.addEventListener("mouseup",this.zoomBtnMouseUpHandler.bind(this)),t.addEventListener("click",this.zoomInBtnClickHandler.bind(this)),t.addEventListener("touchstart",this.zoomInBtnClickHandler.bind(this))),e&&(e.addEventListener("mousedown",this.zoomOutBtnMouseDownHandler.bind(this)),e.addEventListener("mouseup",this.zoomBtnMouseUpHandler.bind(this)),e.addEventListener("click",this.zoomOutBtnClickHandler.bind(this)),t.addEventListener("touchstart",this.zoomInBtnClickHandler.bind(this)))},s.prototype.enableDisableTbrBtn=function(){var t=this.parent;if(!this.preventEnableDisableUr){var e={appliedUndoRedoColl:[]};t.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:e}});var i={undoRedoStep:null};t.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:i}});var n=document.querySelector("#"+t.element.id+"_undo");n&&0===i.undoRedoStep?(n.classList.add("e-disabled"),n.parentElement.classList.add("e-overlay")):n&&i.undoRedoStep>0&&(n.classList.remove("e-disabled"),n.parentElement.classList.remove("e-overlay"));var r=document.querySelector("#"+t.element.id+"_redo");r&&i.undoRedoStep===e.appliedUndoRedoColl.length?(r.classList.add("e-disabled"),r.parentElement.classList.add("e-overlay")):(r&&0===i.undoRedoStep&&e.appliedUndoRedoColl.length>0||r&&i.undoRedoStep>0)&&(r.classList.remove("e-disabled"),r.parentElement.classList.remove("e-overlay"))}var o=document.querySelector("#"+t.element.id+"_zoomIn");o&&t.zoomSettings.zoomFactor>=t.zoomSettings.maxZoomFactor?(o.classList.add("e-disabled"),o.parentElement.classList.add("e-overlay")):o&&(o.classList.remove("e-disabled"),o.parentElement.classList.remove("e-overlay"));var a=document.querySelector("#"+t.element.id+"_zoomOut");a&&t.zoomSettings.zoomFactor<=t.zoomSettings.minZoomFactor?(a.classList.add("e-disabled"),a.parentElement.classList.add("e-overlay")):a&&(a.classList.remove("e-disabled"),a.parentElement.classList.remove("e-overlay"));var l=document.querySelector("#"+t.element.id+"_pan");l&&t.zoomSettings.zoomFactor<=t.zoomSettings.minZoomFactor?l.style.display="none":l&&(l.style.display="block")},s.prototype.createLeftToolbarControls=function(){var t=this.parent;if(void 0!==this.defToolbarItems&&this.defToolbarItems.length>0&&document.getElementById(t.element.id+"_toolbar")){var e=document.getElementById(t.element.id+"_toolbar").querySelector(".e-image-upload");if(e){var i=e.getElementsByTagName("input")[0],n=e.getElementsByTagName("button")[0];n.className="e-tbar-btn e-tbtn-txt top-icon",n.innerHTML="",n.appendChild(t.createElement("span",{className:"e-btn-icon e-icons e-upload-icon e-icon-left"})),i.onchange=this.fileSelect.bind(this,i)}}},s.prototype.fileSelect=function(t,e){this.parent.notify("draw",{prop:"fileSelect",value:{inputElement:t,args:e}})},s.prototype.renderAnnotationBtn=function(t){var e=this,i=this.parent,n=[];(p(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Pen")>-1)&&n.push({text:this.l10n.getConstant("Pen"),id:"pen",iconCss:"e-icons e-free-pen"}),(p(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Line")>-1)&&n.push({text:this.l10n.getConstant("Line"),id:"line",iconCss:"e-icons e-line"}),(p(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Rectangle")>-1)&&n.push({text:this.l10n.getConstant("Rectangle"),id:"rectangle",iconCss:"e-icons e-rectangle"}),(p(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Ellipse")>-1)&&n.push({text:this.l10n.getConstant("Ellipse"),id:"ellipse",iconCss:"e-icons e-circle"}),(p(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Arrow")>-1)&&n.push({text:this.l10n.getConstant("Arrow"),id:"arrow",iconCss:"e-icons e-arrow-right-up"}),(p(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Path")>-1)&&n.push({text:this.l10n.getConstant("Path"),id:"path",iconCss:"e-icons e-critical-path"}),(p(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Text")>-1)&&n.push({text:this.l10n.getConstant("Text"),id:"text",iconCss:"e-icons e-add-text"});var r={freehandDrawSelectedId:null};i.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:r}});var o=document.querySelector("#"+i.element.id+"_duplicate"),a=document.querySelector("#"+i.element.id+"_remove"),l=document.querySelector("#"+i.element.id+"_editText");0===i.activeObj.activePoint.width&&0===i.activeObj.activePoint.height&&(p(i.activeObj.pointColl)||i.activeObj.pointColl&&0===i.activeObj.pointColl.length)&&p(r.freehandDrawSelectedId)?(o&&o.classList.add("e-disabled"),a&&a.classList.add("e-disabled"),l&&l.classList.add("e-disabled")):(o&&o.classList.remove("e-disabled"),a&&a.classList.remove("e-disabled"),l&&l.classList.remove("e-disabled"));var h=t?this.getCurrentShapeIcon(i.activeObj.shape):"e-annotation",c=new Ki({items:n,iconCss:"e-icons "+h,cssClass:"e-image-popup",open:function(u){O.isDevice&&(u.element.parentElement.style.top=c.element.getBoundingClientRect().top-u.element.parentElement.offsetHeight+"px"),i.activeObj.shape?document.getElementById(i.activeObj.shape).classList.add("e-selected"):i.togglePen&&document.getElementById("pen").classList.add("e-selected")},select:function(u){i.okBtn();var f,d=!1;void 0!==i.activeObj.shape&&(f=i.activeObj.shape.split("-")),(void 0===f&&i.currObjType.isCustomCrop||void 0!==f&&"crop"===f[0])&&(d=!0),i.currObjType.isCustomCrop=!1,(d||i.togglePan)&&(i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),e.refreshToolbar("main"));var v={currentFreehandDrawIndex:null};switch(i.notify("freehand-draw",{prop:"getCurrentFreehandDrawIndex",value:{obj:v}}),c.iconCss="e-icons "+e.getCurrentShapeIcon(u.item.id),u.item.id){case"pen":i.notify("draw",{prop:"setTempFreehandCounter",value:{tempFreehandCounter:i.freehandCounter}}),i.notify("draw",{prop:"setTempCurrentFreehandDrawIndex",value:{tempCurrentFreehandDrawIndex:v.currentFreehandDrawIndex}}),e.currentToolbar="pen",i.freeHandDraw(!0);break;case"text":e.currentToolbar="text",i.notify("shape",{prop:"draw-shape-text"});break;default:e.currentToolbar="shapes",e.setInitialShapeSettings(u),i.notify("selection",{prop:"annotate",value:{shape:u.item.id}}),i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})}e.updateToolbarItems()}});c.appendTo("#"+i.element.id+"_annotationBtn")},s.prototype.renderCropBtn=function(){var n,r,t=this,e=this.parent,i=[];(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("CustomSelection")>-1)&&i.push({text:this.l10n.getConstant("Custom"),id:"custom",iconCss:"e-icons e-custom"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("CircleSelection")>-1)&&i.push({text:this.l10n.getConstant("Circle"),id:"circle",iconCss:"e-icons e-circle"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("SquareSelection")>-1)&&i.push({text:this.l10n.getConstant("Square"),id:"square",iconCss:"e-icons e-square"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("RatioSelection")>-1)&&(i.push({text:"3:2",id:"3:2",iconCss:"e-icons e-custom-a"}),i.push({text:"4:3",id:"4:3",iconCss:"e-icons e-custom-b"}),i.push({text:"5:4",id:"5:4",iconCss:"e-icons e-custom-c"}),i.push({text:"7:5",id:"7:5",iconCss:"e-icons e-custom-d"}),i.push({text:"16:9",id:"16:9",iconCss:"e-icons e-custom-e"})),e.activeObj.shape?(n=this.getCurrentShapeIcon(e.activeObj.shape),r=e.activeObj.shape):e.currSelectionPoint?(n=this.getCurrentShapeIcon(e.currSelectionPoint.shape),r=e.currSelectionPoint.shape):(n="e-custom",r="custom");var o=new Ki({open:function(a){e.togglePan&&t.cancelPan(),O.isDevice&&(a.element.parentElement.style.top=o.element.getBoundingClientRect().top-a.element.parentElement.offsetHeight+"px"),e.activeObj.shape&&e.activeObj.shape.split("-").length>1&&document.getElementById(e.activeObj.shape.split("-")[1]).classList.add("e-selected"),e.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},items:i,select:function(a){t.cropSelect(a),o.iconCss="e-icons "+t.getCurrentShapeIcon("crop-"+a.item.id),o.content=e.toPascalCase(a.item.id)},iconCss:"e-icons "+n,cssClass:"e-image-popup",content:e.toPascalCase(r.replace("crop-",""))});o.appendTo("#"+e.element.id+"_cropBtn")},s.prototype.renderTransformBtn=function(){var t=this.parent,e=[];(p(t.toolbar)||t.toolbar&&t.toolbar.indexOf("RotateLeft")>-1)&&e.push({text:this.l10n.getConstant("RotateLeft"),id:"rotateleft",iconCss:"e-icons e-anti-clock-wise"}),(p(t.toolbar)||t.toolbar&&t.toolbar.indexOf("RotateRight")>-1)&&e.push({text:this.l10n.getConstant("RotateRight"),id:"rotateright",iconCss:"e-icons e-clock-wise"}),(p(t.toolbar)||t.toolbar&&t.toolbar.indexOf("FlipHorizontal")>-1)&&e.push({text:this.l10n.getConstant("HorizontalFlip"),id:"horizontalflip",iconCss:"e-icons e-horizontal-flip"}),(p(t.toolbar)||t.toolbar&&t.toolbar.indexOf("FlipVertical")>-1)&&e.push({text:this.l10n.getConstant("VerticalFlip"),id:"verticalflip",iconCss:"e-icons e-vertical-flip"});var i=new Ki({open:function(n){if(O.isDevice){var r=n.element.parentElement.offsetHeight;n.element.parentElement.style.display="none",n.element.parentElement.style.top=i.element.getBoundingClientRect().top-r+"px",n.element.parentElement.style.display="block"}},items:e,select:t.transformSelect.bind(this),iconCss:"e-icons e-transform",cssClass:"e-image-popup"});i.appendTo("#"+t.element.id+"_transformBtn")},s.prototype.renderSaveBtn=function(){var t=this.parent;document.getElementById(t.element.id+"_saveBtn")&&new Ki({items:[{text:"JPEG",id:"jpeg"},{text:"PNG",id:"png"},{text:"SVG",id:"svg"}],cssClass:"e-caret-hide e-image-popup",iconCss:"e-icons e-save",select:function(r){t.export(r.item.text)}}).appendTo("#"+t.element.id+"_saveBtn")},s.prototype.getCropTransformToolbarItem=function(){var t=this.parent,e=[];return e.push({id:t.element.id+"_crop",tooltipText:this.l10n.getConstant("CropSelection"),align:"Center",template:'<button id="'+t.element.id+'_cropBtn"></button>'}),e.push({align:"Center",type:"Separator"}),e.push({id:t.element.id+"_rotateLeft",prefixIcon:"e-icons e-anti-clock-wise",tooltipText:this.l10n.getConstant("RotateLeft"),align:"Center"}),e.push({id:t.element.id+"_rotateRight",prefixIcon:"e-icons e-clock-wise",tooltipText:this.l10n.getConstant("RotateRight"),align:"Center"}),e.push({align:"Center",type:"Separator"}),e.push({id:t.element.id+"_horizontalFlip",prefixIcon:"e-icons e-horizontal-flip",tooltipText:this.l10n.getConstant("HorizontalFlip"),align:"Center"}),e.push({id:t.element.id+"_verticalFlip",prefixIcon:"e-icons e-vertical-flip",tooltipText:this.l10n.getConstant("VerticalFlip"),align:"Center"}),O.isDevice||(e.push({id:t.element.id+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),e.push({id:t.element.id+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),e},s.prototype.getShapesToolbarItem=function(t){var e=this.parent,i=[];(p(e.toolbar)||e.toolbar)&&i.push({id:e.element.id+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+e.element.id+'_annotationBtn"></button>'}),t.indexOf("fillColor")>-1&&i.push({prefixIcon:"e-icons e-copy",id:e.element.id+"_fillcolor",cssClass:"top-icon e-fill",tooltipText:this.l10n.getConstant("FillColor"),align:"Center",type:"Input",template:'<button id="'+e.element.id+'_fillColorBtn"></button>'}),t.indexOf("strokeColor")>-1&&i.push({prefixIcon:"e-icons e-copy",id:e.element.id+"_strokecolor",cssClass:"top-icon e-stroke",tooltipText:this.l10n.getConstant("StrokeColor"),align:"Center",type:"Input",template:'<button id="'+e.element.id+'_borderColorBtn"></button>'}),t.indexOf("strokeWidth")>-1&&i.push({id:e.element.id+"_strokeWidth",cssClass:"top-icon e-size",tooltipText:"Stroke Width",align:"Center",type:"Input",template:'<button id="'+e.element.id+'_borderWidthBtn"></button>'}),t.indexOf("start")>-1&&i.push({id:e.element.id+"_start",cssClass:"top-icon e-size",tooltipText:"Start",align:"Center",type:"Input",template:'<button id="'+e.element.id+'_startBtn"></button>'}),t.indexOf("end")>-1&&i.push({id:e.element.id+"_end",cssClass:"top-icon e-size",tooltipText:"End",align:"Center",type:"Input",template:'<button id="'+e.element.id+'_endBtn"></button>'}),i.push({align:"Center",type:"Separator"}),t.indexOf("duplicate")>-1&&i.push({id:e.element.id+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Center"}),t.indexOf("remove")>-1&&i.push({id:e.element.id+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center"}),t.indexOf("text")>-1&&i.push({id:e.element.id+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Center"});for(var n=this.processSubToolbar(t),r=0,o=n.length;r<o;r++)i.push(n[r]);if(!O.isDevice){var a={shape:null};e.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:a}}),"path"!==a.shape&&(i.push({id:e.element.id+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),i.push({id:e.element.id+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"}))}return i},s.prototype.initCropTransformToolbar=function(){var t=this,e=this.parent,i=this.getLeftToolbarItem(),n=this.getRightToolbarItem(),r=this.getCropTransformToolbarItem(),o=this.getZoomToolbarItem();this.defToolbarItems=O.isDevice?r:i.concat(o,r,n);var a=new Zn({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){t.renderCropBtn(),t.wireZoomBtnEvents(),O.isDevice||t.renderSaveBtn(),e.trigger("toolbarCreated",{toolbarType:"shapes"}),O.isDevice?t.defToolbarItems.length>0&&document.getElementById(e.element.id+"_bottomToolbar")&&(a.refreshOverflow(),a.refreshOverflow(),a.refreshOverflow()):(t.createLeftToolbarControls(),t.defToolbarItems.length>0&&document.getElementById(e.element.id+"_toolbar")&&a.refreshOverflow()),e.select("custom")}});a.appendTo(O.isDevice?"#"+e.element.id+"_bottomToolbar":"#"+e.element.id+"_toolbar"),this.enableDisableTbrBtn(),e.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},s.prototype.getCurrentShapeIcon=function(t){var e="";switch(t){case"rectangle":e="e-rectangle";break;case"ellipse":case"crop-circle":e="e-circle";break;case"line":e="e-line";break;case"arrow":e="e-arrow-right-up";break;case"path":e="e-critical-path";break;case"text":e="e-add-text";break;case"pen":default:e="e-free-pen";break;case"crop-custom":e="e-custom";break;case"crop-square":e="e-square";break;case"crop-3:2":e="e-custom-a";break;case"crop-4:3":e="e-custom-b";break;case"crop-5:4":e="e-custom-c";break;case"crop-7:5":e="e-custom-d";break;case"crop-16:9":e="e-custom-e"}return e},s.prototype.initShapesToolbarItem=function(t){var e=this,i=this.parent,n=this.getLeftToolbarItem(),r=this.getRightToolbarItem(),o=this.getShapesToolbarItem(t),a=this.getZoomToolbarItem();this.defToolbarItems=O.isDevice?o:n.concat(a,o,r);var l=new Zn({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.renderAnnotationBtn(!0),e.createShapeColor(t),e.createShapeBtn(t),"arrow"===i.activeObj.shape&&(e.createStartBtn(),e.createEndBtn()),e.wireZoomBtnEvents(),O.isDevice||e.renderSaveBtn(),i.trigger("toolbarCreated",{toolbarType:"shapes"}),O.isDevice?e.defToolbarItems.length>0&&document.getElementById(i.element.id+"_bottomToolbar")&&(l.refreshOverflow(),l.refreshOverflow(),l.refreshOverflow()):(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(i.element.id+"_toolbar")&&l.refreshOverflow())}});l.appendTo(O.isDevice?"#"+i.element.id+"_bottomToolbar":"#"+i.element.id+"_toolbar"),this.enableDisableTbrBtn()},s.prototype.createShapeColor=function(t){var e=this.parent;if(t.indexOf("fillColor")>-1){e.element.querySelector(".e-template.e-fill").appendChild(e.createElement("input",{id:e.element.id+"_shape_fill"}));var i=new Bp({modeSwitcher:!1,noColor:!0,value:"",showButtons:!1,mode:"Palette",cssClass:"e-shape-fill-color",change:function(a){e.updateFillColor(a.currentValue.hex),""===a.currentValue.rgba?n.element.children[0].classList.add("e-nocolor-item"):(n.element.children[0].classList.remove("e-nocolor-item"),n.element.children[0].style.backgroundColor=a.currentValue.rgba),n.toggle()}},"#"+e.element.id+"_shape_fill"),n=new Ki({open:function(a){O.isDevice&&(a.element.parentElement.style.top=n.element.getBoundingClientRect().top-a.element.parentElement.offsetHeight+"px",a.element.parentElement.style.left=e.element.offsetLeft+"px")},target:".e-shape-fill-color",iconCss:"e-dropdownbtn-preview"},"#"+e.element.id+"_fillColorBtn");i.inline=!0,e.element.querySelector(".e-fill.e-template .e-dropdownbtn-preview").classList.add("e-nocolor-item")}if(t.indexOf("strokeColor")>-1){e.element.querySelector(".e-template.e-stroke").appendChild(e.createElement("input",{id:e.element.id+"_shape_stroke"}));var r=new Bp({modeSwitcher:!1,noColor:!1,value:"#fff",showButtons:!1,mode:"Palette",cssClass:"e-shape-stroke-color",change:function(a){e.updateStrokeColor(a.currentValue.hex),o.element.children[0].style.backgroundColor=a.currentValue.rgba,o.toggle()}},"#"+e.element.id+"_shape_stroke"),o=new Ki({open:function(a){O.isDevice&&(a.element.parentElement.style.top=o.element.getBoundingClientRect().top-a.element.parentElement.offsetHeight+"px",a.element.parentElement.style.left=e.element.offsetLeft+"px")},target:".e-shape-stroke-color",iconCss:"e-dropdownbtn-preview"},"#"+e.element.id+"_borderColorBtn");r.inline=!0,e.element.querySelector(".e-stroke.e-template .e-dropdownbtn-preview").style.background="#fff"}},s.prototype.createShapeBtn=function(t){var e=this.parent,i=[{id:"1",text:this.l10n.getConstant("XSmall")},{id:"2",text:this.l10n.getConstant("Small")},{id:"3",text:this.l10n.getConstant("Medium")},{id:"4",text:this.l10n.getConstant("Large")},{id:"5",text:this.l10n.getConstant("XLarge")}];if(t.indexOf("strokeWidth")>-1){var n=document.getElementById(e.element.id+"_borderWidthBtn"),r=document.createElement("span");r.innerHTML=this.l10n.getConstant("XSmall"),r.className="e-shape-stroke-width",n.appendChild(r);var o=new Ki({items:i,open:function(a){O.isDevice&&(a.element.parentElement.style.top=o.element.getBoundingClientRect().top-a.element.parentElement.offsetHeight+"px");var l=r.innerHTML;""!==l&&a.element.querySelector('[aria-label = "'+l+'"]').classList.add("e-selected-btn")},select:function(a){r.textContent=a.item.text,e.updateStrokeWidth(a.item.id),O.isDevice?document.getElementById(e.element.id+"_bottomToolbar")&&Qe(e.element.id+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(e.element.id+"_toolbar")&&Qe(e.element.id+"_toolbar","toolbar").refreshOverflow()}});o.appendTo("#"+e.element.id+"_borderWidthBtn")}},s.prototype.createStartBtn=function(){var t=this.parent,e=[{id:"1",text:this.l10n.getConstant("None")},{id:"2",text:this.l10n.getConstant("Bar")},{id:"3",text:this.l10n.getConstant("Arrow")},{id:"4",text:this.l10n.getConstant("ArrowSolid")},{id:"5",text:this.l10n.getConstant("Circle")},{id:"6",text:this.l10n.getConstant("CircleSolid")},{id:"7",text:this.l10n.getConstant("Square")},{id:"8",text:this.l10n.getConstant("SquareSolid")}],i=document.getElementById(t.element.id+"_startBtn"),n=document.createElement("span");p(t.activeObj.start)&&(t.activeObj.start="none"),n.innerHTML=t.pascalToSplitWords(t.activeObj.start),n.className="e-shape-start",i.appendChild(n);var r=new Ki({items:e,open:function(o){O.isDevice&&(o.element.parentElement.style.top=r.element.getBoundingClientRect().top-o.element.parentElement.offsetHeight+"px");var a=n.innerHTML;""!==a&&o.element.querySelector('[aria-label = "'+a+'"]').classList.add("e-selected-btn")},select:function(o){n.textContent=o.item.text,t.updateArrow("startArrow",o.item.id)}});r.appendTo("#"+t.element.id+"_startBtn")},s.prototype.createEndBtn=function(){var t=this.parent,e=[{id:"1",text:this.l10n.getConstant("None")},{id:"2",text:this.l10n.getConstant("Bar")},{id:"3",text:this.l10n.getConstant("Arrow")},{id:"4",text:this.l10n.getConstant("ArrowSolid")},{id:"5",text:this.l10n.getConstant("Circle")},{id:"6",text:this.l10n.getConstant("CircleSolid")},{id:"7",text:this.l10n.getConstant("Square")},{id:"8",text:this.l10n.getConstant("SquareSolid")}],i=document.getElementById(t.element.id+"_endBtn"),n=document.createElement("span");p(t.activeObj.end)&&(t.activeObj.end="arrowSolid"),n.innerHTML=t.pascalToSplitWords(t.activeObj.end),n.className="e-shape-end",i.appendChild(n);var r=new Ki({items:e,open:function(o){O.isDevice&&(o.element.parentElement.style.top=r.element.getBoundingClientRect().top-o.element.parentElement.offsetHeight+"px");var a=n.innerHTML;""!==a&&o.element.querySelector('[aria-label = "'+a+'"]').classList.add("e-selected-btn")},select:function(o){n.textContent=o.item.text,t.updateArrow("endArrow",o.item.id)}});r.appendTo("#"+t.element.id+"_endBtn")},s.prototype.getTextToolbarItem=function(t){var e=this.parent,i=[];(p(e.toolbar)||e.toolbar)&&i.push({id:e.element.id+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+e.element.id+'_annotationBtn"></button>'}),t.indexOf("fontFamily")>-1&&i.push({id:e.element.id+"_fontFamily",cssClass:"top-icon e-img-font-family",tooltipText:this.l10n.getConstant("FontFamily"),align:"Center",template:'<button id="'+e.element.id+'_fontFamilyBtn"></button>'}),t.indexOf("fontSize")>-1&&i.push({id:e.element.id+"_fontSize",cssClass:"top-icon e-img-font-size",tooltipText:this.l10n.getConstant("FontSize"),align:"Center",template:'<button id="'+e.element.id+'_fontSizeBtn"></button>'}),t.indexOf("fontColor")>-1&&i.push({cssClass:"top-icon e-text-font-color",id:e.element.id+"_text_strokecolor",tooltipText:this.l10n.getConstant("FontColor"),align:"Center",type:"Input",template:'<button id="'+e.element.id+'_fontColorBtn"></button>'}),t.indexOf("bold")>-1&&i.push({id:e.element.id+"_bold",prefixIcon:"e-icons e-bold",cssClass:"top-icon e-bold",tooltipText:this.l10n.getConstant("Bold"),align:"Center"}),t.indexOf("italic")>-1&&i.push({id:e.element.id+"_italic",prefixIcon:"e-icons e-italic",cssClass:"top-icon e-italic",tooltipText:this.l10n.getConstant("Italic"),align:"Center"}),i.push({align:"Center",type:"Separator"}),t.indexOf("duplicate")>-1&&i.push({id:e.element.id+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Center"}),t.indexOf("remove")>-1&&i.push({id:e.element.id+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center"}),t.indexOf("text")>-1&&i.push({id:e.element.id+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Center"});for(var n=this.processSubToolbar(t),r=0,o=n.length;r<o;r++)i.push(n[r]);return O.isDevice||(i.push({id:e.element.id+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),i.push({id:e.element.id+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),i},s.prototype.getFontFamilyItems=function(){return O.isDevice?[{id:"arial",text:"ABC"},{id:"calibri",text:"ABC"},{id:"georgia",text:"ABC"},{id:"roboto",text:"ABC"},{id:"tahoma",text:"ABC"}]:[{id:"arial",text:"Arial"},{id:"calibri",text:"Calibri"},{id:"georgia",text:"Georgia"},{id:"roboto",text:"Roboto"},{id:"tahoma",text:"Tahoma"}]},s.prototype.initTextToolbarItem=function(t){var e=this,i=this.parent,n=this.getLeftToolbarItem(),r=this.getRightToolbarItem(),o=this.getTextToolbarItem(t),a=this.getZoomToolbarItem();this.defToolbarItems=O.isDevice?o:n.concat(a,o,r);var l=new Zn({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.renderAnnotationBtn(!0),e.createTextColor(t),e.createTextBtn(t),e.wireZoomBtnEvents(),O.isDevice||e.renderSaveBtn(),i.trigger("toolbarCreated",{toolbarType:"text"}),O.isDevice?e.defToolbarItems.length>0&&document.getElementById(i.element.id+"_bottomToolbar")&&(l.refreshOverflow(),l.refreshOverflow(),l.refreshOverflow()):(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(i.element.id+"_toolbar")&&l.refreshOverflow())}});l.appendTo(O.isDevice?"#"+i.element.id+"_bottomToolbar":"#"+i.element.id+"_toolbar"),this.enableDisableTbrBtn()},s.prototype.createTextColor=function(t){var e=this.parent;if(t.indexOf("fontColor")>-1&&e.element.querySelector(".e-template.e-text-font-color")){e.element.querySelector(".e-template.e-text-font-color").appendChild(e.createElement("input",{id:e.element.id+"_text_font"}));var i=new Bp({modeSwitcher:!1,value:"#fff",showButtons:!1,mode:"Palette",cssClass:"e-text-fontt-color",change:function(r){e.updateFontColor(r.currentValue.hex),n.element.children[0].style.backgroundColor=r.currentValue.rgba,n.toggle()}},"#"+e.element.id+"_text_font"),n=new Ki({open:function(r){O.isDevice&&(r.element.parentElement.style.top=n.element.getBoundingClientRect().top-r.element.parentElement.offsetHeight+"px",r.element.parentElement.style.left=e.element.offsetLeft+"px")},target:".e-text-fontt-color",iconCss:"e-dropdownbtn-preview"},"#"+e.element.id+"_fontColorBtn");i.inline=!0,e.element.querySelector(".e-text-font-color.e-template .e-dropdownbtn-preview").style.background="#fff"}},s.prototype.createTextBtn=function(t){var e=this.parent;if(t.indexOf("fontFamily")>-1){var i=document.getElementById(e.element.id+"_fontFamilyBtn"),n=document.createElement("span");O.isDevice?(n.innerHTML="ABC",n.setAttribute("style","font-family: arial")):n.innerHTML="Arial",n.className="e-text-font-family",i&&i.appendChild(n);var r=new Ki({items:this.getFontFamilyItems(),cssClass:"e-font-family",createPopupOnClick:!0,beforeItemRender:function(c){c.element.setAttribute("style","font-family:"+c.element.id)},open:function(c){O.isDevice&&(c.element.parentElement.style.top=r.element.getBoundingClientRect().top-c.element.parentElement.offsetHeight+"px"),c.element.querySelector('[id *= "'+("block"===e.textArea.style.display?e.textArea.style.fontFamily:e.activeObj.textSettings.fontFamily).toLowerCase()+'"]').classList.add("e-selected-btn")},select:function(c){n.textContent=c.item.text,O.isDevice&&n.setAttribute("style","font-family:"+c.item.id),e.updateFontFamily(c.item.id)}});r.appendTo("#"+e.element.id+"_fontFamilyBtn")}if(t.indexOf("fontSize")>-1){var o=document.getElementById(e.element.id+"_fontSizeBtn"),a=document.createElement("span"),l=e.getFontSizes();a.innerHTML=l[0].text,a.className="e-text-font-size",o.appendChild(a);var h=new Ki({cssClass:"e-font-size",items:l,open:function(c){O.isDevice&&(c.element.parentElement.style.top=h.element.getBoundingClientRect().top-c.element.parentElement.offsetHeight+"px"),c.element.querySelector('[aria-label *= "'+a.innerHTML+'"]').classList.add("e-selected-btn")},select:function(c){a.textContent=c.item.text,e.updateFontSize(c.item.text)}});h.appendTo("#"+e.element.id+"_fontSizeBtn")}},s.prototype.refreshToolbar=function(t,e,i,n,r){var o=this.parent;if(o.isImageLoaded&&!o.isCropToolbar){var l={toolbarType:"shapes"===t&&o.activeObj.shape?o.activeObj.shape:t};switch("filter"!==t&&"color"!==t&&(document.getElementById(o.element.id+"_toolbar")&&this.defToolbarItems.length>0&&(Qe(document.getElementById(o.element.id+"_toolbar"),"toolbar").destroy(),document.getElementById(o.element.id+"_toolbar").innerHTML=""),document.getElementById(o.element.id+"_bottomToolbar")&&this.defToolbarItems.length>0&&document.getElementById(o.element.id+"_bottomToolbar").className.indexOf("e-control")>-1&&(Qe(document.getElementById(o.element.id+"_bottomToolbar"),"toolbar").destroy(),document.getElementById(o.element.id+"_bottomToolbar").innerHTML="")),this.refreshSlider(),o.isCropTab=!1,t){case"main":O.isDevice?this.initMainToolbar(!1,!0,!!i||null):(!O.isDevice||n)&&this.initMainToolbar(e,O.isDevice,null),O.isDevice&&this.initBottomToolbar();break;case"shapes":O.isDevice&&this.initMainToolbar(!1,!0,!0),l.toolbarItems="line"===o.activeObj.shape||"path"===o.activeObj.shape?["strokeColor","strokeWidth","duplicate","remove"]:"arrow"===o.activeObj.shape?["strokeColor","strokeWidth","start","end","duplicate","remove"]:["fillColor","strokeColor","strokeWidth","duplicate","remove"],o.trigger("toolbarUpdating",l),this.initShapesToolbarItem(l.toolbarItems);break;case"text":O.isDevice&&this.initMainToolbar(!1,!0,!0),l.toolbarItems=["fontFamily","fontSize","fontColor","bold","italic","duplicate","remove","text"],o.trigger("toolbarUpdating",l),this.initTextToolbarItem(l.toolbarItems);break;case"pen":O.isDevice&&this.initMainToolbar(!1,!0,!0),l.toolbarItems=["strokeColor","strokeWidth","remove"],o.trigger("toolbarUpdating",l),this.initPenToolbarItem(l.toolbarItems);break;case"adjustment":O.isDevice&&this.initMainToolbar(!1,!0,!0),this.initAdjustmentToolbarItem();break;case"filter":this.updateContextualToolbar(t);break;case"color":this.updateContextualToolbar(t,r);break;case"croptransform":o.isCropTab=!0,O.isDevice&&this.initMainToolbar(!1,!0,!0),o.updateCropTransformItems(),this.initCropTransformToolbar()}this.currToolbar=t,this.refreshDropDownBtn(i)}},s.prototype.getAdjustmentToolbarItem=function(){var t=[],e=this.parent;(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Brightness")>-1)&&t.push({id:e.element.id+"_brightness",prefixIcon:"e-icons e-brightness",cssClass:"top-icon e-brightness",tooltipText:this.l10n.getConstant("Brightness"),align:"Center"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Contrast")>-1)&&t.push({id:e.element.id+"_contrast",prefixIcon:"e-icons e-contrast",cssClass:"top-icon e-contrast",tooltipText:this.l10n.getConstant("Contrast"),align:"Center"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Hue")>-1)&&t.push({id:e.element.id+"_hue",prefixIcon:"e-icons e-fade",cssClass:"top-icon e-fade",tooltipText:this.l10n.getConstant("Hue"),align:"Center"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Saturation")>-1)&&t.push({id:e.element.id+"_saturation",prefixIcon:"e-icons e-saturation",cssClass:"top-icon e-saturation",tooltipText:this.l10n.getConstant("Saturation"),align:"Center"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Exposure")>-1)&&t.push({id:e.element.id+"_exposure",prefixIcon:"e-icons e-grain",cssClass:"top-icon e-grain",tooltipText:this.l10n.getConstant("Exposure"),align:"Center"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Opacity")>-1)&&t.push({id:e.element.id+"_opacity",prefixIcon:"e-icons e-opacity",cssClass:"top-icon e-opacity",tooltipText:this.l10n.getConstant("Opacity"),align:"Center"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Blur")>-1)&&t.push({id:e.element.id+"_blur",prefixIcon:"e-icons e-tint",cssClass:"top-icon e-tint",tooltipText:this.l10n.getConstant("Blur"),align:"Center"});for(var i=this.processToolbar("center"),n=0,r=i.length;n<r;n++)t.push(i[n]);return O.isDevice||(t.push({id:e.element.id+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),t.push({id:e.element.id+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),t},s.prototype.getFilterToolbarItem=function(){var t=[],e=this.parent;(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Default")>-1)&&t.push({id:e.element.id+"_default",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Default"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+e.element.id+'_defaultCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Default")+"</span></div></div>"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Chrome")>-1)&&t.push({id:e.element.id+"_chrome",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Chrome"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+e.element.id+'_chromeCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Chrome")+"</span></div></div>"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Cold")>-1)&&t.push({id:e.element.id+"_cold",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Cold"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+e.element.id+'_coldCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Cold")+"</span></div></div>"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Warm")>-1)&&t.push({id:e.element.id+"_warm",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Warm"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+e.element.id+'_warmCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Warm")+"</span></div></div>"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Grayscale")>-1)&&t.push({id:e.element.id+"_grayscale",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Grayscale"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+e.element.id+'_grayscaleCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Grayscale")+"</span></div></div>"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Sepia")>-1)&&t.push({id:e.element.id+"_sepia",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Sepia"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+e.element.id+'_sepiaCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Sepia")+"</span></div></div>"}),(p(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Invert")>-1)&&t.push({id:e.element.id+"_invert",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Invert"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+e.element.id+'_invertCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Invert")+"</span></div></div>"});for(var i=this.processToolbar("center"),n=0,r=i.length;n<r;n++)t.push(i[n]);return t},s.prototype.getPenToolbarItem=function(t){var e=this.parent,i=[];(p(e.toolbar)||e.toolbar)&&i.push({id:e.element.id+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+e.element.id+'_annotationBtn"></button>'}),t.indexOf("strokeColor")>-1&&i.push({prefixIcon:"e-icons e-copy",id:e.element.id+"_pen_strokecolor",cssClass:"top-icon e-pen-stroke-color",tooltipText:this.l10n.getConstant("StrokeColor"),align:"Center",type:"Input",template:'<button id="'+e.element.id+'_penColorBtn"></button>'}),t.indexOf("strokeWidth")>-1&&i.push({prefixIcon:"e-icons e-copy",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("StrokeWidth"),align:"Center",type:"Input",template:'<button id="'+e.element.id+'_penStrokeWidth"></button>'}),i.push({align:"Center",type:"Separator"}),t.indexOf("remove")>-1&&i.push({id:e.element.id+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center"});for(var n=this.processSubToolbar(t),r=0,o=n.length;r<o;r++)i.push(n[r]);return O.isDevice||(i.push({id:e.element.id+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),i.push({id:e.element.id+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),i},s.prototype.initPenToolbarItem=function(t){var e=this,i=this.parent,n=this.getLeftToolbarItem(),r=this.getRightToolbarItem(),o=this.getPenToolbarItem(t),a=this.getZoomToolbarItem();this.defToolbarItems=O.isDevice?o:n.concat(a,o,r);var l=new Zn({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.renderAnnotationBtn(!0),e.createPenColor(t),e.createPenBtn(t),e.wireZoomBtnEvents(),O.isDevice||e.renderSaveBtn(),i.trigger("toolbarCreated",{toolbarType:"pen"}),O.isDevice?e.defToolbarItems.length>0&&document.getElementById(i.element.id+"_toolbar")&&(l.refreshOverflow(),l.refreshOverflow()):(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(i.element.id+"_toolbar")&&l.refreshOverflow())}});l.appendTo(O.isDevice?"#"+i.element.id+"_bottomToolbar":"#"+i.element.id+"_toolbar"),this.enableDisableTbrBtn()},s.prototype.createPenColor=function(t){var e=this,i=this.parent;if(t.indexOf("strokeColor")>-1){i.element.querySelector(".e-template.e-pen-stroke-color").appendChild(i.createElement("input",{id:i.element.id+"_pen_stroke"}));var n=new Bp({modeSwitcher:!1,value:"#fff",showButtons:!1,mode:"Palette",cssClass:"e-pen-color",change:function(l){i.updatePenStrokeColor(l.currentValue.hex),e.selFhdColor=l.currentValue.hex,r.element.children[0].style.backgroundColor=l.currentValue.rgba,r.toggle()}},"#"+i.element.id+"_pen_stroke"),r=new Ki({open:function(l){O.isDevice&&(l.element.parentElement.style.top=r.element.getBoundingClientRect().top-l.element.parentElement.offsetHeight+"px",l.element.parentElement.style.left=i.element.offsetLeft+"px")},target:".e-pen-color",iconCss:"e-dropdownbtn-preview"},"#"+i.element.id+"_penColorBtn");n.inline=!0;var o={tempFreeHandDrawEditingStyles:null};i.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:o}});var a={freehandSelectedIndex:null};i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:a}}),!p(a.freehandSelectedIndex)&&a.freehandSelectedIndex>-1?i.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview").style.background="#42a5f5"===this.selFhdColor?o.tempFreeHandDrawEditingStyles.strokeColor:i.pointColl[a.freehandSelectedIndex].strokeColor:i.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview").style.background="#fff"}},s.prototype.createPenBtn=function(t){var e=this.parent,i=[{id:"1",text:this.l10n.getConstant("XSmall")},{id:"2",text:this.l10n.getConstant("Small")},{id:"3",text:this.l10n.getConstant("Medium")},{id:"4",text:this.l10n.getConstant("Large")},{id:"5",text:this.l10n.getConstant("XLarge")}];if(t.indexOf("strokeWidth")>-1){var n=document.getElementById(e.element.id+"_penStrokeWidth"),r=document.createElement("span"),o={freehandSelectedIndex:null};e.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:o}}),r.innerHTML=!p(o.freehandSelectedIndex)&&o.freehandSelectedIndex>-1?this.getPenStroke(e.pointColl[o.freehandSelectedIndex].strokeWidth):this.l10n.getConstant("Small"),r.className="e-pen-stroke-width",n.appendChild(r);var a=new Ki({items:i,open:function(l){O.isDevice&&(l.element.parentElement.style.top=a.element.getBoundingClientRect().top-l.element.parentElement.offsetHeight+"px"),l.element.querySelector('[aria-label = "'+r.innerHTML+'"]').classList.add("e-selected-btn")},select:function(l){r.textContent=l.item.text,e.updatePenStrokeWidth(l.item.id),O.isDevice?document.getElementById(e.element.id+"_bottomToolbar")&&Qe(e.element.id+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(e.element.id+"_toolbar")&&Qe(e.element.id+"_toolbar","toolbar").refreshOverflow()}});a.appendTo("#"+e.element.id+"_penStrokeWidth")}},s.prototype.getPenStroke=function(t){var e="",i={1:this.l10n.getConstant("XSmall"),2:this.l10n.getConstant("Small"),3:this.l10n.getConstant("Medium"),4:this.l10n.getConstant("Large"),5:this.l10n.getConstant("XLarge")};return t>=1&&t<=5&&(e=i[t]),e},s.prototype.initAdjustmentToolbarItem=function(){var t=this,e=this.parent,i=this.getLeftToolbarItem(null),n=this.getRightToolbarItem(),r=this.getAdjustmentToolbarItem(),o=this.getZoomToolbarItem();this.defToolbarItems=O.isDevice?r:i.concat(o,r,n);var a=new Zn({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){t.wireZoomBtnEvents(),O.isDevice||t.renderSaveBtn(),O.isDevice||t.createLeftToolbarControls(),t.defToolbarItems.length>0&&document.getElementById(e.element.id+"_toolbar")&&a.refreshOverflow()}});a.appendTo(O.isDevice?"#"+e.element.id+"_bottomToolbar":"#"+e.element.id+"_toolbar"),this.enableDisableTbrBtn()},s.prototype.initFilterToolbarItem=function(){var t=this,e=this.parent,i=this.getFilterToolbarItem();document.querySelector("#"+e.element.id+"_contextualToolbar").classList.contains("e-control")&&Qe(document.getElementById(e.element.id+"_contextualToolbar"),"toolbar").destroy();var n=new Zn({width:"100%",items:i,clicked:this.contextualToolbarClicked.bind(this),created:function(){t.updatePrivateVariables(),t.createCanvasFilter(),""===e.currentFilter&&(e.currentFilter=e.element.id+"_default");var r=document.querySelector("#"+e.element.id+"_headWrapper");r&&(r.style.display="none"),document.getElementById(e.currentFilter+"Canvas").parentElement.parentElement.classList.add("e-selected"),t.enableDisableTbrBtn(),n.refreshOverflow()}});n.appendTo("#"+e.element.id+"_contextualToolbar")},s.prototype.createCanvasFilter=function(){var t=this.parent;ln(t.element),t.element.style.opacity="0.5";var e=t.getCurrentCanvasData();this.inMemoryCanvas.width=e.width,this.inMemoryCanvas.height=e.height,this.inMemoryContext.putImageData(e,0,0),this.updateFilterCanvas("_defaultCanvas","default"),this.updateFilterCanvas("_chromeCanvas","chrome"),this.updateFilterCanvas("_coldCanvas","cold"),this.updateFilterCanvas("_warmCanvas","warm"),this.updateFilterCanvas("_grayscaleCanvas","grayscale"),this.updateFilterCanvas("_sepiaCanvas","sepia"),this.updateFilterCanvas("_invertCanvas","invert"),Ri(t.element),t.element.style.opacity="1",t.initialAdjustmentValue=this.lowerContext.filter},s.prototype.updateFilterCanvas=function(t,e){var i=this.parent,n=i.element.querySelector("#"+i.element.id+t);if(n){var r=n.getContext("2d");r=n.getContext("2d"),n.style.width="100px",n.style.height="100px",i.notify("filter",{prop:"updateAdj",value:{type:e,value:null,isPreview:!0,ctx:r}}),r.drawImage(this.inMemoryCanvas,0,0,300,150)}},s.prototype.getQuickAccessToolbarItem=function(t){var e=this.parent,i={cancel:!1,toolbarItems:[]},n=[];p(t)?(n.push("Clone"),n.push("Delete"),"text"===e.activeObj.shape&&n.push("EditText"),i.shape=e.toPascalCase(e.activeObj.shape)):t&&(n.push("Delete"),i.shape="Freehand draw"),i.toolbarItems=C([],n,null,!0),e.trigger("quickAccessToolbarOpen",i);var r=[];if(i.cancel)r=[];else for(var o=0;o<i.toolbarItems.length;o++)switch(i.toolbarItems[o]){case"Clone":r.push({id:e.element.id+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Left"});break;case"Delete":r.push({id:e.element.id+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Left"});break;case"EditText":r.push({id:e.element.id+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Left"});break;default:r.push(i.toolbarItems[o])}return r},s.prototype.renderQAT=function(t){var e=this.parent;if(e.activeObj&&e.showQuickAccessToolbar){var i=document.getElementById(e.element.id+"_quickAccessToolbarArea");i&&(this.destroyQuickAccessToolbar(),i.style.display="block");var n=this.getQuickAccessToolbarItem(t);if(0===n.length)return;if(p(e.quickAccessToolbarTemplate)&&new Zn({items:n,clicked:this.quickAccessToolbarClicked.bind(this)}).appendTo("#"+e.element.id+"_quickAccessToolbar"),p(t)){i.style.width="auto",e.activeObj.activePoint.width=Math.abs(e.activeObj.activePoint.width),e.activeObj.activePoint.height=Math.abs(e.activeObj.activePoint.height);var o=e.activeObj.activePoint.startX<e.activeObj.activePoint.endX?e.activeObj.activePoint.startX:e.activeObj.activePoint.endX,a=e.activeObj.activePoint.startY<e.activeObj.activePoint.endY?e.activeObj.activePoint.startY:e.activeObj.activePoint.endY,l=e.activeObj.activePoint.width;if(0!==e.activeObj.rotatedAngle&&"arrow"!==e.activeObj.shape){var h={activePoint:null};e.notify("shape",{prop:"getSquarePointForRotatedShape",onPropertyChange:!1,value:{obj:e.activeObj,object:h}}),o=(c=h.activePoint).startX,a=c.startY,l=c.width}else if("path"===e.activeObj.shape){var u=e.getSquarePointForPath(e.activeObj);o=u.startX,a=u.startY,l=u.width}i.style.left=o+l/2-25*n.length+"px",i.style.top=a-60<e.img.destTop?e.img.destTop+"px":a-60+"px"}else if(t){var d={activePoint:null},f={freehandSelectedIndex:null};e.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:f}}),e.notify("freehand-draw",{prop:"getSqPtFD",value:{idx:f.freehandSelectedIndex,obj:d}});var c=d.activePoint;i.style.width="auto",i.style.left=c.startX+c.width/2-27*n.length+"px",i.style.top=c.startY-60<e.img.destTop?e.img.destTop+"px":c.startY-60+"px"}}},s.prototype.refreshDropDownBtn=function(t){if(!p(t)){var e=this.parent,i=document.querySelector("#"+e.element.id+"_annotationBtn");i&&(t?(i.classList.add("e-disabled"),i.parentElement.classList.add("e-overlay")):(i.classList.remove("e-disabled"),i.parentElement.classList.remove("e-overlay")),Qe(i,"dropdown-btn").disabled=t);var n=document.querySelector("#"+e.element.id+"_transformBtn");n&&(t?(n.classList.add("e-disabled"),n.parentElement.classList.add("e-overlay")):(n.classList.remove("e-disabled"),n.parentElement.classList.remove("e-overlay")),Qe(n,"dropdown-btn").disabled=t);var r=document.querySelector("#"+e.element.id+"_adjustment");r&&(t?(r.classList.add("e-disabled"),r.parentElement.classList.add("e-overlay")):(r.classList.remove("e-disabled"),r.parentElement.classList.remove("e-overlay")),Qe(r,"btn").disabled=t);var o=document.querySelector("#"+e.element.id+"_filter");o&&(t?(o.classList.add("e-disabled"),o.parentElement.classList.add("e-overlay")):(o.classList.remove("e-disabled"),o.parentElement.classList.remove("e-overlay")),Qe(o,"btn").disabled=t)}},s.prototype.cropSelect=function(t){var e=this.parent;e.isCropTab=!0,p(e.transform.cropZoomFactor)&&(e.transform.cropZoomFactor=e.transform.zoomFactor,e.notify("draw",{prop:"setTempZoomFactor",onPropertyChange:!1,value:{tempZoomFactor:e.transform.zoomFactor}})),e.transform.zoomFactor=e.transform.cropZoomFactor;var i=t.item.id;this.currentToolbar="crop",e.currSelectionPoint=null,e.select(i),this.enableDisableTbrBtn(),e.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},s.prototype.quickAccessToolbarClicked=function(t,e){var i=this.parent,n={x:i.activeObj.activePoint.startX,y:i.activeObj.activePoint.startY};if(t.item){var r=void 0,o=void 0,a=null,l={prevActObj:null},h={tempObj:null};i.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:l}}),i.notify("selection",{prop:"getTempActObj",onPropertyChange:!1,value:{obj:h}}),h.tempObj.activePoint.height=Math.abs(h.tempObj.activePoint.height);var c={isNewPath:null};switch(i.notify("draw",{prop:"getNewPath",value:{obj:c}}),t.item.id.replace(i.element.id+"_","").toLowerCase()){case"duplicate":if(!i.element.querySelector("#"+i.element.id+"_duplicate").classList.contains("e-disabled")){if(!c.isNewPath&&JSON.stringify(h.tempObj)===JSON.stringify(i.activeObj)&&(a=!0),r=C({},i.activeObj,{},!0),p(i.activeObj.currIndex)?i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:a}}):l.prevActObj?(i.activeObj.currIndex=null,r.currIndex=null,i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:a}})):i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),c.isNewPath&&i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),o=C([],i.objColl,[],!0),r.activePoint.startX+=10,r.activePoint.startY-=10,r.activePoint.endX+=10,r.activePoint.endY-=10,"path"===r.shape)for(var u=0;u<r.pointColl.length;u++)r.pointColl[u].x+=10,r.pointColl[u].y-=10;i.activeObj=r,("line"===i.activeObj.shape||"arrow"===i.activeObj.shape)&&i.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:i.activeObj}}),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}}),i.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:o}}),this.renderQAT()}break;case"remove":i.element.querySelector("#"+i.element.id+"_remove").classList.contains("e-disabled")||i.notify("selection",{prop:"deleteItem",onPropertyChange:!1});break;case"edittext":i.element.querySelector("#"+i.element.id+"_editText").classList.contains("e-disabled")||(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:C({},i.activeObj,{},!0)}}),i.notify("selection",{prop:"setInitialTextEdit",onPropertyChange:!1,value:{bool:!0}}),i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:C({},i.activeObj,{},!0)}}),0!==i.activeObj.rotatedAngle&&(n.x=i.activeObj.horTopLinePointColl[0].x,n.y=i.activeObj.horTopLinePointColl[0].y),i.notify("shape",{prop:"renderTextArea",onPropertyChange:!1,value:{x:n.x,y:n.y,actObj:i.activeObj}}),(p(i.activeObj.currIndex)||l.prevActObj)&&i.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!0}}),document.getElementById(i.element.id+"_quickAccessToolbarArea")&&(document.getElementById(i.element.id+"_quickAccessToolbarArea").style.display="none"))}}p(e)&&i.trigger("quickAccessToolbarItemClick",t)},s.prototype.defToolbarClicked=function(t){var e=this.parent,i=!1,n=!1;if(e.element.querySelector(".e-contextual-toolbar-wrapper")&&(e.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hide")||(i=n=!0),e.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide")),t.item){var r=t.item.id.replace(e.element.id+"_","").toLowerCase();if("duplicate"===r||"remove"===r||"edittext"===r)this.quickAccessToolbarClicked(t,!0),e.trigger("toolbarItemClicked",t);else{var o=!1,a=!1,l=document.querySelector("#"+e.element.id+"_adjustment");l&&l.classList.contains("e-disabled")&&(a=!0);var h=document.querySelector("#"+e.element.id+"_filter");h&&h.classList.contains("e-disabled")&&(o=!0),this.enableDisableTbrBtn(),this.performDefTbrClick(r,i,a,o,n),e.trigger("toolbarItemClicked",t)}}},s.prototype.performDefTbrClick=function(t,e,i,n,r){var h,c,o=this.parent,a=o.element.querySelector("#"+o.element.id+"_zoomIn"),l=!1;if(void 0!==o.activeObj.shape&&(c=o.activeObj.shape.split("-")),(void 0===c&&o.currObjType.isCustomCrop||void 0!==c&&"crop"===c[0])&&(l=!0),!o.disabled)switch(t){case"pan":o.currObjType.isCustomCrop=o.currObjType.isFiltered=!1,o.currObjType.isUndoAction&&o.notify("undo-redo",{prop:"refreshUrc",value:{bool:null}}),l&&(o.currObjType.isCustomCrop=!1,o.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,o.upperCanvas.width,o.upperCanvas.height),this.refreshToolbar("main")),o.togglePan?(this.cancelPan(),o.notify("transform",{prop:"setDisablePan",onPropertyChange:!1,value:{bool:!0}}),"pen"===this.currentToolbar&&o.freehandDraw(!0)):((h=o.element.querySelector(".e-img-pan .e-btn"))&&h.classList.add("e-selected-btn"),o.pan(!0),o.notify("transform",{prop:"setDisablePan",onPropertyChange:!1,value:{bool:!1}})),a&&o.zoomSettings.zoomFactor>=o.zoomSettings.maxZoomFactor?(a.classList.add("e-disabled"),a.parentElement.classList.add("e-overlay")):a&&(a.classList.remove("e-disabled"),a.parentElement.classList.remove("e-overlay")),this.refreshToolbar("main");break;case"cancel":o.notify("draw",{prop:"performCancel",value:{isContextualToolbar:e}});break;case"ok":o.okBtn(),this.refreshDropDownBtn(!1),this.currentToolbar="main";break;case"crop":o.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}});break;case"reset":o.reset(),this.currentToolbar="main";break;case"undo":o.notify("undo-redo",{prop:"call-undo"});break;case"redo":o.notify("undo-redo",{prop:"call-redo"});break;case"adjustment":i||(o.currObjType.isFiltered&&o.okBtn(),this.refreshToolbar("adjustment"),o.setTempFilterProperties(),this.openSlider("brightness"));break;case"brightness":case"contrast":case"hue":case"saturation":case"opacity":case"blur":case"exposure":this.openSlider(t);break;case"filter":n||(ln(o.element),this.refreshToolbar("filter"),o.setTempFilterProperties(),Ri(o.element));break;case"default":case"chrome":case"cold":case"warm":case"grayscale":case"blackandwhite":case"sepia":case"invert":case"sharpen":o.currObjType.isFiltered=!0,o.notify("filter",{prop:"applyImageFilter",value:{option:t}});break;case"upload":r&&o.element.querySelector(".e-contextual-toolbar-wrapper").classList.remove("e-hide");break;case"bold":o.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),o.activeObj.textSettings.bold&&o.activeObj.textSettings.italic?o.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"italic"}}):o.activeObj.textSettings.bold&&!o.activeObj.textSettings.italic?o.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"default"}}):!o.activeObj.textSettings.bold&&o.activeObj.textSettings.italic?o.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bolditalic"}}):!o.activeObj.textSettings.bold&&!o.activeObj.textSettings.italic&&o.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bold"}}),o.element.querySelector("#"+o.element.id+"_bold").classList.contains("e-selected-btn")?o.element.querySelector("#"+o.element.id+"_bold").classList.remove("e-selected-btn"):o.element.querySelector("#"+o.element.id+"_bold").classList.add("e-selected-btn");break;case"italic":o.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),o.activeObj.textSettings.bold&&o.activeObj.textSettings.italic?o.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bold"}}):o.activeObj.textSettings.bold&&!o.activeObj.textSettings.italic?o.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bolditalic"}}):!o.activeObj.textSettings.bold&&o.activeObj.textSettings.italic?o.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"default"}}):!o.activeObj.textSettings.bold&&!o.activeObj.textSettings.italic&&o.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"italic"}}),o.element.querySelector("#"+o.element.id+"_italic").classList.contains("e-selected-btn")?o.element.querySelector("#"+o.element.id+"_italic").classList.remove("e-selected-btn"):o.element.querySelector("#"+o.element.id+"_italic").classList.add("e-selected-btn");break;case"croptransform":this.refreshToolbar("croptransform");break;case"rotateleft":case"rotateright":case"horizontalflip":case"verticalflip":o.transformSelect(t),o.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}});break;case"save":if(o.element.querySelector("#"+o.element.id+"_saveBtn").classList.contains("e-hide")){o.element.querySelector("#"+o.element.id+"_saveBtn").classList.remove("e-hide");break}o.okBtn(),o.element.querySelector("#"+o.element.id+"_saveBtn").classList.add("e-hide"),o.element.querySelector("#"+o.element.id+"_saveBtn").click()}},s.prototype.contextualToolbarClicked=function(t){var e=this.parent,i=e.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");i&&i.classList.remove("e-selected");var n=t.item.id.replace(e.element.id,"").split("_")[1],r={filter:e.toPascalCase(n),cancel:!1};e.trigger("imageFiltering",r),!r.cancel&&(document.getElementById(t.item.id+"Canvas").parentElement.parentElement.classList.add("e-selected"),e.currObjType.isFiltered=!0,e.notify("filter",{prop:"applyImageFilter",value:{option:n.toLowerCase()}}),e.currentFilter=t.item.id,this.enableDisableTbrBtn())},s.prototype.refreshShapeDrawing=function(){var t=this.parent,e={shape:""};t.notify("selection",{prop:"getCurrentDrawingShape",onPropertyChange:!1,value:{obj:e}}),""!==e.shape&&(t.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.refreshToolbar("main",!1))},s.prototype.zoomInBtnClickHandler=function(t){var e=this.parent;if((e.zoomSettings.zoomTrigger&Nt.Toolbar)===Nt.Toolbar){if(this.refreshShapeDrawing(),O.isDevice&&"touchstart"===t.type){if(!t.returnValue)return;t.preventDefault()}var i=document.querySelector("#"+e.element.id+"_zoomIn");y.trigger(i,"click");var n={bool:!1};e.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:n}}),n.bool&&(e.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.destroyQuickAccessToolbar()),this.applyPreviewFilter(),e.currObjType.isFiltered=!1,e.togglePen&&(e.currObjType.isZoomed=!0,e.freeHandDraw(!1),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})),e.notify("draw",{prop:"resetCurrentSelectionPoint"}),e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null}})}},s.prototype.zoomOutBtnClickHandler=function(t){var e=this.parent;if((e.zoomSettings.zoomTrigger&Nt.Toolbar)===Nt.Toolbar){if(this.refreshShapeDrawing(),O.isDevice&&"touchstart"===t.type){if(!t.returnValue)return;t.preventDefault()}var i=document.querySelector("#"+e.element.id+"_zoomOut");y.trigger(i,"click");var n={bool:!1};e.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:n}}),n.bool&&(e.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.destroyQuickAccessToolbar()),this.applyPreviewFilter(),e.currObjType.isFiltered=!1,e.togglePen&&(e.currObjType.isZoomed=!0,e.freeHandDraw(!1),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})),e.notify("draw",{prop:"resetCurrentSelectionPoint"}),e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null}})}},s.prototype.zoomInBtnMouseDownHandler=function(t){t.preventDefault(),this.zoomBtnHold=setInterval(this.zoomInBtnClickHandler.bind(this),250)},s.prototype.zoomOutBtnMouseDownHandler=function(t){t.preventDefault(),this.zoomBtnHold=setInterval(this.zoomOutBtnClickHandler.bind(this),250)},s.prototype.zoomBtnMouseUpHandler=function(){clearInterval(this.zoomBtnHold),this.zoomBtnHold=0},s.prototype.closeContextualToolbar=function(){var t=this.parent,e=!1;return(t.element.querySelector("#"+t.element.id+"_contextualToolbar")&&!t.element.querySelector("#"+t.element.id+"_contextualToolbar").parentElement.classList.contains("e-hide")||t.element.querySelector("#"+t.element.id+"_headWrapper")&&!t.element.querySelector("#"+t.element.id+"_headWrapper").parentElement.classList.contains("e-hide"))&&(t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.okBtn(),this.refreshMainToolbar(),e=!0),e},s.prototype.destroyQuickAccessToolbar=function(){var t=this.parent,e=document.getElementById(t.element.id+"_quickAccessToolbar");e&&e.classList.contains("e-control")&&Qe(e,"toolbar").destroy();var i=document.getElementById(t.element.id+"_quickAccessToolbarArea");i&&(i.style.display="none")},s.prototype.renderSlider=function(t){var e=this.parent,i=document.querySelector("#"+e.element.id+"_contextualToolbarArea"),n=document.querySelector("#"+e.element.id+"_headWrapper"),r=document.querySelector("#"+e.element.id+"_labelWrapper");n?n.style.display="block":r=(n=i.appendChild(e.createElement("div",{id:e.element.id+"_headWrapper",styles:"position: relative"}))).appendChild(e.createElement("label",{id:e.element.id+"_labelWrapper",styles:O.isDevice?"position: absolute; top: 25%; left: calc(50% - 150px); font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;"})),r.textContent=this.l10n.getConstant(e.toPascalCase(t));var l,h,c,o=n.appendChild(e.createElement("div",{id:e.element.id+"_sliderWrapper",styles:"position: absolute"})),a=e.getCurrAdjustmentValue(t);"brightness"===t||"contrast"===t||"saturation"===t||"exposure"===t?(e.finetuneSettings?"brightness"===t&&e.finetuneSettings.brightness?(l=e.finetuneSettings.brightness.min,h=e.finetuneSettings.brightness.max):"contrast"===t&&e.finetuneSettings.contrast?(l=e.finetuneSettings.contrast.min,h=e.finetuneSettings.contrast.max):"saturation"===t&&e.finetuneSettings.saturation?(l=e.finetuneSettings.saturation.min,h=e.finetuneSettings.saturation.max):"exposure"===t&&e.finetuneSettings.exposure?(l=e.finetuneSettings.exposure.min,h=e.finetuneSettings.exposure.max):(l=-100,h=100):(l=-100,h=100),c=this.createSlider(l,h,a,t)):("hue"===t||"blur"===t||"opacity"===t)&&(e.finetuneSettings?"hue"===t&&e.finetuneSettings.hue?(l=e.finetuneSettings.hue.min,h=e.finetuneSettings.hue.max):"blur"===t&&e.finetuneSettings.blur?(l=e.finetuneSettings.blur.min,h=e.finetuneSettings.blur.max):"opacity"===t&&e.finetuneSettings.opacity?(l=e.finetuneSettings.opacity.min,h=e.finetuneSettings.opacity.max):(l=0,h=100):(l=0,h=100),c=this.createSlider(l,h,a,t)),c.appendTo("#"+e.element.id+"_sliderWrapper"),o.style.left=(parseFloat(i.style.width)-parseFloat(c.width))/2+"px"},s.prototype.createSlider=function(t,e,i,n){var r=this,o=this.parent;return new Yy({value:i,tooltip:{isVisible:!0,placement:"Before",showOn:"Always"},type:"MinRange",min:t,max:e,step:10,width:O.isDevice?"200px":"300px",cssClass:"e-slider",change:function(a){o.setCurrAdjustmentValue(n,a.value),r.enableDisableTbrBtn()}})},s.prototype.applyPreviewFilter=function(){var t=this.parent;(document.querySelector("#"+t.element.id+"_sliderWrapper")||t.currObjType.isFiltered)&&(t.initialAdjustmentValue=this.lowerContext.filter,t.canvasFilter=this.lowerContext.filter,t.currObjType.isFiltered=!1)},s.prototype.unselectBtn=function(){for(var t=this.parent,i=0,n=["#"+t.element.id+"_brightness","#"+t.element.id+"_contrast","#"+t.element.id+"_hue","#"+t.element.id+"_saturation","#"+t.element.id+"_opacity","#"+t.element.id+"_blur","#"+t.element.id+"_exposure"];i<n.length;i++){var o=document.querySelector(n[i]);if(o.classList.contains("e-selected-btn")){o.classList.remove("e-selected-btn");break}}},s.prototype.openSlider=function(t){this.unselectBtn(),this.parent.currObjType.isFiltered=!0,this.refreshToolbar("color",null,null,null,t),document.getElementById(this.parent.element.id+"_"+t).classList.add("e-selected-btn")},s.prototype.refreshSlider=function(){var t=document.querySelector("#"+this.parent.element.id+"_sliderWrapper"),e=document.querySelector(".e-slider"),i=document.querySelector("#"+this.parent.element.id+"_headWrapper");i&&(i.style.display="none"),t&&e&&(e.ej2_instances[0].destroy(),t.remove())},s.prototype.updateToolbarItems=function(){var t=this.parent,e=t.element.querySelector(".e-fill.e-template .e-dropdownbtn-preview"),i=t.element.querySelector(".e-stroke.e-template .e-dropdownbtn-preview"),n=t.element.querySelector(".e-text-font-color.e-template .e-dropdownbtn-preview"),r=t.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview"),o=t.element.querySelector(".e-shape-stroke-width"),a=t.element.querySelector(".e-text-font-family"),l=t.element.querySelector(".e-text-font-size"),h=t.element.querySelector("#"+t.element.id+"_bold"),c=t.element.querySelector("#"+t.element.id+"_italic");if(p(t.activeObj.strokeSettings.strokeWidth)&&(t.activeObj.strokeSettings.strokeWidth=2),e&&(""===t.activeObj.strokeSettings.fillColor?e.classList.add("e-nocolor-item"):(e.classList.remove("e-nocolor-item"),e.style.background=t.activeObj.strokeSettings.fillColor),Qe(t.element.id+"_shape_fill","colorpicker").value=t.activeObj.strokeSettings.fillColor+"ff"),i&&(i.style.background=t.activeObj.strokeSettings.strokeColor,Qe(t.element.id+"_shape_stroke","colorpicker").value=t.activeObj.strokeSettings.strokeColor+"ff"),n&&(n.style.background=t.activeObj.strokeSettings.strokeColor,Qe(t.element.id+"_text_font","colorpicker").value=t.activeObj.strokeSettings.strokeColor+"ff"),r&&(r.style.background=t.activeObj.strokeSettings.strokeColor,Qe(t.element.id+"_pen_stroke","colorpicker").value=t.activeObj.strokeSettings.strokeColor+"ff"),a&&(O.isDevice?a.setAttribute("style","font-family:"+t.activeObj.textSettings.fontFamily.toLowerCase()):a.textContent=t.activeObj.textSettings.fontFamily),l)for(var u=0;u<t.fontSizeColl.length;u++)if(parseInt(t.fontSizeColl[u].text,10)>=Math.round(t.activeObj.textSettings.fontSize)){l.textContent=(u+1).toString();break}if(h&&(t.activeObj.textSettings.bold?h.classList.add("e-selected-btn"):h.classList.remove("e-selected-btn")),c&&(t.activeObj.textSettings.italic?c.classList.add("e-selected-btn"):c.classList.remove("e-selected-btn")),o){var d=Math.round(t.activeObj.strokeSettings.strokeWidth).toString();o.textContent=this.getStrokeWidth(d)}},s.prototype.getStrokeWidth=function(t){var e;switch(parseInt(t,10)/2){case 1:e=this.l10n.getConstant("XSmall");break;case 2:e=this.l10n.getConstant("Small");break;case 3:e=this.l10n.getConstant("Medium");break;case 4:e=this.l10n.getConstant("Large");break;case 5:e=this.l10n.getConstant("XLarge")}return e},s.prototype.cancelPan=function(){var t=this.parent;t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}});var e=t.element.querySelector(".e-img-pan .e-btn");e&&e.classList.remove("e-selected-btn"),t.pan(!1)},s.prototype.refreshMainToolbar=function(){"main"!==this.currToolbar&&this.refreshToolbar("main")},s.prototype.destroySubComponents=function(){for(var t=this.parent,e=t.element.querySelectorAll("input.e-control"),i=t.element.querySelectorAll("button.e-control"),n=0,r=e.length;n<r;n++)e[n].classList.contains("e-color-picker")&&(Qe(e[n],"color-picker").destroy(),X(T("input#"+e[n].id,t.element)));for(n=0,r=i.length;n<r;n++)i[n].classList.contains("e-dropdown-btn")?(Qe(i[n],"dropdown-btn").destroy(),X(T("button#"+i[n].id,t.element))):i[n].classList.contains("e-btn")&&(Qe(i[n],"btn").destroy(),X(T("button#"+i[n].id,t.element)))},s.prototype.setInitialShapeSettings=function(t){var e=this.parent;e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.currObjType.shape=t.item.id,e.activeObj.shape=e.currObjType.shape.toLowerCase(),e.currObjType.isDragging=e.currObjType.isCustomCrop=!1,e.activeObj.shapeDegree=e.transform.degree,e.activeObj.shapeFlip=e.transform.currFlipState,e.activeObj.textFlip=e.transform.currFlipState,e.activeObj.flipObjColl=[]},s.prototype.getModuleName=function(){return"toolbar-module"},s}();const wV=["toolbarTemplate"],IV=["beforeSave","click","created","cropping","destroyed","fileOpened","finetuneValueChanging","flipping","imageFiltering","panning","quickAccessToolbarItemClick","quickAccessToolbarOpen","rotating","saved","selectionChanging","shapeChanging","toolbarCreated","toolbarItemClicked","toolbarUpdating","zooming"],OV=[""];let TV=(()=>{let s=class extends MV{constructor(e,i,n,r){super(),this.ngEle=e,this.srenderer=i,this.viewContainerRef=n,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(IV),this.addTwoWay.call(this,OV),function W3(s,t,e){for(var i=s.replace(/\[/g,".").replace(/\]/g,"").split("."),n=e||{},r=0;r<i.length;r++){var o=i[r];r+1===i.length?n[o]=void 0===t?{}:t:void 0===n[o]&&(n[o]={}),n=n[o]}}("currentInstance",this,this.viewContainerRef),this.context=new VT}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.context.ngAfterContentChecked(this)}};return s.\u0275fac=function(e){return new(e||s)(_e(fo),_e(cv),_e(cr),_e(js))},s.\u0275cmp=sf({type:s,selectors:[["ejs-imageeditor"]],contentQueries:function(e,i,n){if(1&e&&function bI(s,t,e,i){const n=ct();if(n.firstCreatePass){const r=Ni();MI(n,new gI(t,e,i),r.index),function FF(s,t){const e=s.contentQueries||(s.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(s.queries.length-1,t)}(n,s),2==(2&e)&&(n.staticContentQueries=!0)}CI(n,J(),e)}(n,wV,5),2&e){let r;ag(r=lg())&&(i.toolbarTemplate=r.first)}},inputs:{allowUndoRedo:"allowUndoRedo",cssClass:"cssClass",disabled:"disabled",enablePersistence:"enablePersistence",enableRtl:"enableRtl",finetuneSettings:"finetuneSettings",height:"height",isReadOnly:"isReadOnly",locale:"locale",quickAccessToolbarTemplate:"quickAccessToolbarTemplate",selectionSettings:"selectionSettings",showQuickAccessToolbar:"showQuickAccessToolbar",theme:"theme",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",width:"width",zoomSettings:"zoomSettings"},outputs:{beforeSave:"beforeSave",click:"click",created:"created",cropping:"cropping",destroyed:"destroyed",fileOpened:"fileOpened",finetuneValueChanging:"finetuneValueChanging",flipping:"flipping",imageFiltering:"imageFiltering",panning:"panning",quickAccessToolbarItemClick:"quickAccessToolbarItemClick",quickAccessToolbarOpen:"quickAccessToolbarOpen",rotating:"rotating",saved:"saved",selectionChanging:"selectionChanging",shapeChanging:"shapeChanging",toolbarCreated:"toolbarCreated",toolbarItemClicked:"toolbarItemClicked",toolbarUpdating:"toolbarUpdating",zooming:"zooming"},features:[jv],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),Yd([$3()],s.prototype,"toolbarTemplate",void 0),s=Yd([V3([VT])],s),s})(),DV=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=Bo({type:s}),s.\u0275inj=so({imports:[[jO]]}),s})();const EV=["imageEditor"];let xV=(()=>{class s{constructor(){this.toolbar=[]}created(){this.imageEditorObj?.open("https://ej2.syncfusion.com/products/images/carousel/bee-eater.png")}btnClick(){this.imageEditorObj?.flip(nl.Horizontal)}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=sf({type:s,selectors:[["app-root"]],viewQuery:function(e,i){if(1&e&&function yI(s,t,e){const i=ct();i.firstCreatePass&&(MI(i,new gI(s,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),CI(i,J(),t)}(EV,5),2&e){let n;ag(n=lg())&&(i.imageEditorObj=n.first)}},decls:5,vars:1,consts:[["id","wrapperDiv",2,"width","550px","height","350px"],[3,"toolbar","created"],["imageEditor",""],[1,"e-btn","e-primary",3,"click"]],template:function(e,i){1&e&&(kl(0,"div",0)(1,"ejs-imageeditor",1,2),hu("created",function(){return i.created()}),zl()(),kl(3,"button",3),hu("click",function(){return i.btnClick()}),function sw(s,t=""){const e=J(),i=ct(),n=s+_t,r=i.firstCreatePass?ha(i,n,1,t,null):i.data[n],o=e[n]=function Yf(s,t){return s.createText(t)}(e[$e],t);Wc(i,e,o,r),Ar(r,!1)}(4,"Click"),zl()),2&e&&(function BM(s){_M(ct(),J(),sn()+s,!1)}(1),Nv("toolbar",i.toolbar))},dependencies:[TV],encapsulation:2}),s})();!function n3(s){Wn=s}(!0);let PV=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=Bo({type:s,bootstrap:[xV]}),s.\u0275inj=so({imports:[sB,DV]}),s})();rB().bootstrapModule(PV)}},ni=>{ni(ni.s=619)}]);